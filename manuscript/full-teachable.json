{
  "sections": [
    {
      "sectionTitle": "Introduction",
      "lectures": [
        {
          "lectureTitle": "Hello new friend üëã",
          "lectureLines": [
            "<h1 id=\"introduction\">Introduction</h1>",
            "<p>Hello new friend! üëã</p>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/6300d21408f5e9f0c8f5698d266fb258.jpg\"",
            "    alt=\"This is me, Swizec\"",
            "  />",
            "  <figcaption>This is me, Swizec</figcaption>",
            "</figure>",
            "<p>",
            "  Welcome to what I hope is the best and most fun React and D3 learning",
            "  resource on the internet. No TODO apps here, just fun interactive stuff",
            "  that makes you look great at a dinner party.",
            "</p>",
            "<p>",
            "  After an hour with <em>React + D3</em>, you‚Äôll know how to make React and",
            "  D3.js play together. You‚Äôll know how to create composable data",
            "  visualizations. Understand <em>why</em> that‚Äôs a good idea, and you will",
            "  have the tools to build your own library of interactive visualization",
            "  components. Or use <em>and understand</em> somebody else‚Äôs.",
            "</p>",
            "<p>It‚Äôs going to be fun!</p>",
            "<p>",
            "  I believe learning new tech should be exciting, so I did my best to",
            "  inject joy whenever I could.",
            "</p>",
            "<p>",
            "  250+ pages as a book, 8 example apps, near 8 hours of video, a bunch of",
            "  skill building blocks. üëå",
            "</p>",
            "<p>Going through this course you will:</p>",
            "<ul>",
            "  <li>build a bunch of reusable visualization components</li>",
            "  <li>build an interactive data dashboard</li>",
            "  <li>learn about reusable animation components</li>",
            "  <li>learn the basics of D3.js</li>",
            "  <li>master React</li>",
            "  <li>learn the basics of Redux and MobX</li>",
            "  <li>look into rendering rich animations on canvas</li>",
            "  <li>explore React alternatives like Preact and Inferno</li>",
            "  <li>learn about server-side rendering</li>",
            "  <li>learn a few basics of data science</li>",
            "  <li>learn some WebGL and 3D rendering</li>",
            "</ul>",
            "<p>",
            "  You might be thinking",
            "  <em",
            "    >‚ÄúHow the hell does this all fit together to help me build interactive",
            "    graphs and charts?‚Äù</em",
            "  >. They‚Äôre building blocks!",
            "</p>",
            "<p>",
            "  First I will show you the basics. Stuff like how to make React and D3",
            "  like each other, how to approach rendering, what to do with state.",
            "</p>",
            "<p>Then you‚Äôll build a big project to see how it all fits together.</p>",
            "<p>",
            "  When you‚Äôre comfortable with React and D3 working together, I will show",
            "  you animation. Cool things like how to approach updating components with",
            "  fine grained control and how to do transitions. I‚Äôll show you how tricks",
            "  from the gaming industry work on the web.",
            "</p>",
            "<p>Short on time? Don‚Äôt worry.</p>",
            "<p>",
            "  The initial examples work in CodeSandbox, a web-based IDE. Read the",
            "  explanation, run the code, master enough React to be dangerous. You won‚Äôt",
            "  even have to leave the browser.",
            "</p>",
            "<p>",
            "  In about an hour, you‚Äôll know React and D3 well enough to explore on your",
            "  own, to sell the tech to your boss and your team, and to assess if the",
            "  React+D3 combination fits your needs.",
            "</p>",
            "<p>I believe learning new tech should be exciting.</p>",
            "<h1 id=\"foreword\">Foreword</h1>",
            "<p>",
            "  I wrote the first version of React+D3 in Spring 2015 as a dare. Can I",
            "  learn a thing and write a book in a month? Yes.",
            "</p>",
            "<p>",
            "  That first version was 91 pages long and sold a few hundred copies. Great",
            "  success!",
            "</p>",
            "<p>",
            "  You are reading, and watching, the pinnacle of how this material has",
            "  evolved over almost 4 years. 4 years I‚Äôve been working on this. Not every",
            "  day, not all the time.",
            "</p>",
            "<p>",
            "  Little experiments here and there, launches and relaunches about once a",
            "  year. Learning how to do video, exploring new approaches, hosting",
            "  in-person workshops.",
            "</p>",
            "<p>A lot has changed.</p>",
            "<p>",
            "  React isn‚Äôt what it used to be. The internals are different, the API is",
            "  easier to use. Hooks just flipped everything on its head all over again.",
            "  Suspense and async rendering are here and getting even better.",
            "</p>",
            "<p>",
            "  D3 has seen less change, but still went through major improvements. It‚Äôs",
            "  easier to use now. Easier to understand. More modern.",
            "</p>",
            "<p>",
            "  It feels like the web development world is a different place in late 2018",
            "  than it was in early 2015. It really does. Look at my code from 3 years",
            "  ago and I think",
            "  <em>‚ÄúWhat!? We used to live like this? This is horrible‚Äù</em>",
            "</p>",
            "<p>",
            "  Almost 200 people bought this version of React+D3 in preorders alone. It",
            "  started as a book update and grew into a proper online course.",
            "</p>",
            "<p>",
            "  If you‚Äôre one of those early supporters, thank you! You are the best.",
            "  Without you this never would have happened. üôè",
            "</p>",
            "<hr />",
            "<p>",
            "  Because I think it‚Äôs interesting, here‚Äôs what I had to say about that",
            "  first version back in 2015:",
            "</p>",
            "<blockquote>",
            "  <p>",
            "    I wrote this book for you as an experiment. The theory we‚Äôre testing is",
            "    that technical content works better as a short e-book than as a long",
            "    article.",
            "  </p>",
            "</blockquote>",
            "<blockquote>",
            "  <p>",
            "    You see, the issue with online articles is that they live and die by",
            "    their length. As soon as you surpass 700 words, everything falls apart.",
            "    Readers wander off to a different tab in search of memes and funny",
            "    tweets, never to come back.",
            "  </p>",
            "</blockquote>",
            "<blockquote>",
            "  <p>",
            "    This hurts my precious writer‚Äôs ego, but more importantly, it sucks for",
            "    you. If you‚Äôre not reading, you‚Äôre not learning.",
            "  </p>",
            "</blockquote>",
            "<blockquote>",
            "  <p>So here we both are.</p>",
            "</blockquote>",
            "<blockquote>",
            "  <p>",
            "    I‚Äôm counting on you to take some time away from the internet, to sit",
            "    down and read. I‚Äôm counting on you to follow the examples. I‚Äôm counting",
            "    on you to <em>learn</em>.",
            "  </p>",
            "</blockquote>",
            "<blockquote>",
            "  <p>",
            "    You‚Äôre counting on me to have invested more time, effort, and care in",
            "    crafting this than I would have invested in an article. I have.",
            "  </p>",
            "</blockquote>",
            "<blockquote>",
            "  <p>",
            "    I‚Äôve tried to keep this book as concise as possible. iA Writer",
            "    estimates it will take you about an hour to read <em>React+d3.js</em>,",
            "    but playing with the examples might take some time, too.",
            "  </p>",
            "</blockquote>",
            "<p>",
            "  A lot of that still rings true. People are distracted, busy, the internet",
            "  is shiny. It‚Äôs hard to sit down and learn stuff.",
            "</p>",
            "<p>",
            "  The most common feedback I get from students goes something like this üëá",
            "</p>",
            "<blockquote>",
            "  <p>",
            "    Loving your book! It‚Äôs amazing. So clear and concise and relatable. But",
            "    I read 20 pages, then my wife had a kid, my boss pulled the project,",
            "    and I‚Äôm doing backend now. But truly amazing. I‚Äôm gonna get back to it",
            "    as soon as I can!",
            "  </p>",
            "</blockquote>",
            "<p>Sometimes they do.</p>",
            "<p>",
            "  That‚Äôs okay. Life happens. I understand. Hell, I procrastinated for",
            "  months before sitting down to update this stuff üòÉ",
            "</p>",
            "<p>",
            "  I recommend you go through the basic chapters at least. The little",
            "  building blocks. You can do that in an afternoon or two. It‚Äôs worth it, I",
            "  promise.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "What you need to know",
          "lectureLines": [
            "<h1 id=\"what-you-need-to-know\">What you need to know</h1>",
            "<p>",
            "  I‚Äôm going to assume you already know how to code and that you‚Äôre great",
            "  with JavaScript. Many books have been written to teach the basics of",
            "  JavaScript; this is not one of them.",
            "</p>",
            "<p>",
            "  If you‚Äôre struggling with modern JavaScript syntax, I suggest visiting my",
            "  <a href=\"https://es6cheatsheet.com\">Interactive ES6 Cheatsheet</a>",
            "</p>",
            "<p>",
            "  I‚Äôm assuming you‚Äôve tried D3 before, or at least heard of it. You don‚Äôt",
            "  have to know how D3 works, or understand what the code you copy pasted to",
            "  meet a deadline does. I‚Äôll show you all you need to know.",
            "</p>",
            "<p>",
            "  If you want to learn D3 in depth, there‚Äôs plenty of great resources out",
            "  there. For example, the third edition of my first ever book,",
            "  <a",
            "    href=\"https://www.packtpub.com/web-development/d3js-4x-data-visualization-third-edition\"",
            "    >D3.js 4.x Data Visualization - Third Edition</a",
            "  >. Written by √Ündrew Rininsland with some chapters left from yours truly.",
            "</p>",
            "<p>",
            "  As for React, same deal: I expect you have some idea how to use it, but",
            "  you‚Äôll be fine even if this is your first time looking at React. We‚Äôll go",
            "  through everything you need to know as it‚Äôs happening.",
            "</p>",
            "<p>",
            "  All examples in React + D3 use modern JavaScript. That is JavaScript from",
            "  ES6 ‚Äì¬†ES2015 ‚Äì¬†and beyond. No special mods, just stuff you get by default",
            "  in all React projects in recent years. Even if some syntax isn‚Äôt in the",
            "  standard yet.",
            "</p>",
            "<p>I‚Äôm going to explain any new syntax that we use.</p>"
          ]
        },
        {
          "lectureTitle": "How to approach React for Dataviz",
          "lectureLines": [
            "<h2 id=\"how-to-approach-react-for-data-visualization\">",
            "  How to approach React for Data Visualization",
            "</h2>",
            "<p>",
            "  I recommend starting with an idea, a problem. Something you want to",
            "  build. A dataset you want to play with. A feature you want to add to your",
            "  app.",
            "</p>",
            "<p>",
            "  That makes it easier. Helps focus your brain. Notice things in this",
            "  course that help <em>you</em> specifically.",
            "</p>",
            "<p>",
            "  From there, I think you should see how much time you‚Äôve got. The course",
            "  is designed so you can go over the important stuff in a couple hours.",
            "  Watch a video, read some text, try some code. See how it feels.",
            "</p>",
            "<p>",
            "  If the best way is a daily practice, 20 minutes after work, 5 minutes on",
            "  the pooper, do that. If you‚Äôre more of a sit down and cram it out kind of",
            "  person, a nice Sunday afternoon with some coffee will do just fine.",
            "</p>",
            "<p>But don‚Äôt make it a chore. We‚Äôre here to have fun üòÉ</p>",
            "<p>Two suggestions ‚úåÔ∏è:</p>",
            "<ol type=\"1\">",
            "  <li>",
            "    <em>Try</em> the example code. Don‚Äôt just copy-paste; type it and",
            "    execute it. Execute frequently. If something doesn‚Äôt fit together, look",
            "    at the linked Github repositories or solved CodeSandboxes. Each project",
            "    has one.",
            "  </li>",
            "  <li>If you know something, skip that section. You‚Äôre awesome. ‚ù§Ô∏è</li>",
            "</ol>",
            "<p>React + D3 is based on code samples. They look like this:</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb1\"",
            "  data-caption=\"Some code\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb1-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> foo <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;bar&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb1-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">foo <span class=\"op\" style=\"color: #666666;\">+=</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;more stuff&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  Each code sample starts with a commented out file path. That‚Äôs the file",
            "  you‚Äôre editing. Like this:",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb2\"",
            "  data-caption=\"Code samples have file paths\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb2-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ./src/App.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb2-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb2-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> <span class=\"va\" style=\"color: #19177c;\">App</span> ...</a></code></pre>",
            "</div>",
            "<p>",
            "  Commands that you should run in the terminal start with an",
            "  <code style=\"white-space: pre-wrap;\">$</code> symbol, like this:",
            "</p>",
            "<pre><code style=\"white-space: pre-wrap;\">$ npm start</code></pre>"
          ]
        },
        {
          "lectureTitle": "Why React and D3",
          "lectureLines": [
            "<h1 id=\"why-react-and-d3\">Why React and D3</h1>",
            "<p>",
            "  React is Facebook‚Äôs approach to writing modern JavaScript front-ends. It",
            "  encourages building an app out of small, re-usable components. Each",
            "  component is self-contained and only knows how to render a small bit of",
            "  the interface.",
            "</p>",
            "<p>",
            "  The catch is that many frameworks have attempted this: everything from",
            "  Angular to Backbone and jQuery plugins. But where jQuery plugins get",
            "  become messy, Angular depends too much on HTML structure, and Backbone",
            "  needs a lot of boilerplate, React has found a sweet spot.",
            "</p>",
            "<p>",
            "  I‚Äôve found React a joy to use. Using React was the first time in my life",
            "  that I could move a piece of HTML in a modern app without rewriting half",
            "  my JavaScript. It‚Äôs like a super power.",
            "</p>",
            "<p>",
            "  React being the most popular JavaScript framework out there, the world",
            "  seems to agree. React is great. ‚öõÔ∏è",
            "</p>",
            "<p>",
            "  D3 is Mike Bostock‚Äôs infamous data visualization library. It‚Äôs used by",
            "  The New York Times along with many other sites. It is the workhorse of",
            "  data visualization on the web, and many charting libraries out there are",
            "  based on it.",
            "</p>",
            "<p>",
            "  But D3 is a fairly low-level library. You can‚Äôt just say",
            "  <em>‚ÄúI have data; give me a bar chart‚Äù</em>. Well, you can, but it takes",
            "  a few more lines of code than that. Once you get used to it though, D3 is",
            "  a joy to use.",
            "</p>",
            "<p>Just like React, D3 is declarative.</p>",
            "<p>",
            "  You tell your code <em>what</em> you want instead of <em>how</em> you",
            "  want it. It gives you access straight to the SVG so you can manipulate",
            "  your lines and rectangles as you want. The problem is that D3 isn‚Äôt so",
            "  great, if all you want are charts.",
            "</p>",
            "<p>That‚Äôs where React comes in.</p>",
            "<p>",
            "  Once you‚Äôve created a histogram component, you can always get a histogram",
            "  with",
            "  <code style=\"white-space: pre-wrap;\"",
            "    >&lt;Histogram x=&quot;5&quot; ... /&gt;</code",
            "  >. Once you have a piechart, it‚Äôs always",
            "  <code style=\"white-space: pre-wrap;\"",
            "    >&lt;Piechart x=&quot;20&quot; ... /&gt;</code",
            "  >. Just like they were HTML elements.",
            "</p>",
            "<p>Doesn‚Äôt that sound like the best? I think it‚Äôs amazing.</p>",
            "<p>It gets better!</p>",
            "<p>",
            "  With React, you can make different graph and chart components share the",
            "  same data. When your data changes, the whole visualization reacts.",
            "</p>",
            "<p>",
            "  Your graph changes. The title changes. The description changes.",
            "  Everything changes. Mind, blown.",
            "</p>",
            "<p>",
            "  Look how this H1B salary visualization changes when the user picks a",
            "  subset of the data to look at.",
            "</p>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/full_default_h1b.png\"",
            "    alt=\"Default H1B histogram\"",
            "  />",
            "  <figcaption>Default H1B histogram</figcaption>",
            "</figure>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/full_changed_h1b.png\"",
            "    alt=\"Changes after user picks a data subset\"",
            "  />",
            "  <figcaption>Changes after user picks a data subset</figcaption>",
            "</figure>",
            "<p>React + D3: a powerful combination indeed.</p>"
          ]
        },
        {
          "lectureTitle": "Buzzword soup explained",
          "lectureLines": [
            "<h1 id=\"buzzword-soup-explained\">Buzzword soup explained</h1>",
            "<p>",
            "  We‚Äôre going to use some buzzwords in this book. Hell, we‚Äôve used some",
            "  already. Most will get a thorough explanation further on, but let me give",
            "  you a quick rundown.",
            "</p>",
            "<ul>",
            "  <li>",
            "    <strong>Babel</strong>, a JavaScript transpiler that makes your code",
            "    work on all browsers.",
            "  </li>",
            "  <li>",
            "    <strong>ECMAScript2015,16,17,18</strong>, official names for JavaScript",
            "    as new features come out every summer",
            "  </li>",
            "  <li>",
            "    <strong>ES5</strong>, any JavaScript features that existed before June",
            "    2015",
            "  </li>",
            "  <li>",
            "    <strong>ES6</strong> or <strong>ES6+</strong>, a common name for",
            "    JavaScript as it exists past June 2015",
            "  </li>",
            "  <li>",
            "    <strong>fat arrows</strong>, a new way to define functions in ES6",
            "    (<code style=\"white-space: pre-wrap;\">=&gt;</code>)",
            "  </li>",
            "  <li>",
            "    <strong>Git</strong>, a version control system. It‚Äôs pretty popular,",
            "    you probably know it üòÉ",
            "  </li>",
            "  <li>",
            "    <strong>H1B</strong>, a popular type of work visa in the United States",
            "  </li>",
            "  <li>",
            "    <strong>JSX</strong>, a language/syntax that lets you use",
            "    <code style=\"white-space: pre-wrap;\"",
            "      >&lt;a href=&quot;/example&quot;&gt;</code",
            "    >",
            "    as a native part of JavaScript",
            "  </li>",
            "  <li>",
            "    <strong>Mustache</strong>, a popular way to write HTML templates for",
            "    JavaScript code. Uses",
            "    <code style=\"white-space: pre-wrap;\">{{ ... }}</code> syntax.",
            "  </li>",
            "  <li>",
            "    <strong>npm</strong>, most popular package manager for JavaScript",
            "    libraries",
            "  </li>",
            "  <li><strong>props</strong>, component properties set when rendering</li>",
            "  <li>",
            "    <strong>state</strong>, a local dictionary of values available in most",
            "    components",
            "  </li>",
            "  <li>",
            "    <strong>functional components</strong>, React components expressed as",
            "    pure functions that take props and return markup",
            "  </li>",
            "  <li>",
            "    <strong>Webpack</strong>, a module packager for JavaScript. Makes it",
            "    more convenient to organize code into multiple files. Provides cool",
            "    plugins.",
            "  </li>",
            "</ul>"
          ]
        },
        {
          "lectureTitle": "JSX",
          "lectureLines": [
            "<h1 id=\"jsx\">JSX</h1>",
            "<p>",
            "  Our components are going to use JSX, a JavaScript syntax extension that",
            "  lets us treat XML-like data as normal code. You can use React without",
            "  JSX, but JSX makes React‚Äôs full power easier to use.",
            "</p>",
            "<p>",
            "  The gist of JSX is that we can use any XML-like string just like it was",
            "  part of JavaScript. No Mustache or messy string concatenation necessary.",
            "  Your functions can return HTML, SVG, or XML.",
            "</p>",
            "<p>",
            "  For instance, code that renders one of our first examples ‚Äì¬†a color",
            "  swatch ‚Äì¬†looks like this:",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb4\"",
            "  data-caption=\"Render a color swatch\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb4-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"va\" style=\"color: #19177c;\">ReactDOM</span>.<span class=\"at\" style=\"color: #7d9029;\">render</span>(</a>",
            "<a class=\"sourceLine\" id=\"cb4-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">&lt;</span>Colors width<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;400&quot;</span> /&gt;<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb4-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">document</span>.<span class=\"at\" style=\"color: #7d9029;\">getElementById</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;svg&#39;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb4-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>Which compiles to:</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb5\"",
            "  data-caption=\"JSX compiled result\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb5-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"va\" style=\"color: #19177c;\">ReactDOM</span>.<span class=\"at\" style=\"color: #7d9029;\">render</span>(</a>",
            "<a class=\"sourceLine\" id=\"cb5-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">createElement</span>(Colors<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"dt\" style=\"color: #902000;\">width</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;400&quot;</span><span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb5-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">document</span>.<span class=\"at\" style=\"color: #7d9029;\">querySelectorAll</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;svg&#39;</span>)[<span class=\"dv\" style=\"color: #40a070;\">0</span>]</a>",
            "<a class=\"sourceLine\" id=\"cb5-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  HTML code translates to",
            "  <code style=\"white-space: pre-wrap;\">React.createElement</code> calls",
            "  with attributes translated into a property dictionary. The beauty of this",
            "  approach is two-pronged: you can use React components as if they were",
            "  HTML tags, and HTML attributes can be anything.",
            "</p>",
            "<p>",
            "  You‚Äôll see that anything from a simple value to a function or an object",
            "  works equally well.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "What you'll build",
          "lectureLines": [
            "<h1 id=\"the-meat-start\">Visualizing data with React and d3.js</h1>",
            "<p>",
            "  Welcome to the main part of React + D3 2018. We‚Äôre going to talk a little",
            "  theory, learn some principles, then get our hands dirty with some",
            "  examples. Through this book you‚Äôre going to build:",
            "</p>",
            "<ul>",
            "  <li>",
            "    <a",
            "      href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6887721#basic-approach\"",
            "      >A few small components in Codesandbox</a",
            "    >",
            "  </li>",
            "  <li>",
            "    <a",
            "      href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6888908#choropleth-map\"",
            "      >A choropleth map</a",
            "    >",
            "  </li>",
            "  <li>",
            "    <a",
            "      href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6888919#histogram-of-salaries\"",
            "      >An interactive histogram</a",
            "    >",
            "  </li>",
            "  <li>",
            "    <a",
            "      href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6906619#a-bouncing-ball-game-loop-example\"",
            "      >A bouncing ball</a",
            "    >",
            "  </li>",
            "  <li>",
            "    <a",
            "      href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6906645#swipe-transition\"",
            "      >A swipe transition</a",
            "    >",
            "  </li>",
            "  <li>",
            "    <a",
            "      href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6906659#animated-alphabet\"",
            "      >An animated alphabet</a",
            "    >",
            "  </li>",
            "  <li>",
            "    <a",
            "      href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6906668#animating-react-redux\"",
            "      >A simple particle generator with Redux</a",
            "    >",
            "  </li>",
            "  <li>",
            "    <a",
            "      href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6906689#canvas-react-redux\"",
            "      >A particle generator pushed to 20,000 elements with canvas</a",
            "    >",
            "  </li>",
            "  <li>",
            "    <a",
            "      href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6906696#build-a-declarative-billiards-simulation-with-mobx-canvas-and-konva\"",
            "      >Billiards simulation with MobX and canvas</a",
            "    >",
            "  </li>",
            "  <li>",
            "    <a",
            "      href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/8456113#fractal-tree\"",
            "      >A dancing fractal tree</a",
            "    >",
            "  </li>",
            "</ul>",
            "<p>Looks random, right? Bear with me. Examples build on each other.</p>",
            "<p>",
            "  The first few examples teach you about static data visualizations and the",
            "  basics of merging React and D3 using two different approaches.",
            "</p>",
            "<p>",
            "  The choropleth and histogram visualizations teach you about interactivity",
            "  and components working together.",
            "</p>",
            "<p>",
            "  You learn about game loop and transition animations through two types of",
            "  bouncing balls. Followed by more complex enter/exit transitions with an",
            "  animated alphabet.",
            "</p>",
            "<p>",
            "  We look at how far we can push React‚Äôs performance with a simple particle",
            "  generator and a dancing fractal tree. A billiards game helps us learn",
            "  about complex canvas manipulation.",
            "</p>",
            "<p>",
            "  Throughout these examples, we‚Äôre going to use <strong>React 16</strong>,",
            "  compatible with <strong>React 17</strong>, <strong>D3v5</strong>, and",
            "  modern <strong>ES6+</strong> JavaScript syntax. The particle generator",
            "  also uses <strong>Redux</strong> for the game loop and the billiards",
            "  simulation uses MobX. We use <strong>Konva</strong> for complex canvas",
            "  stuff.",
            "</p>",
            "<p>",
            "  That way you can build experience in large portions of the React",
            "  ecosystem so you can choose what you like best.",
            "</p>",
            "<p>",
            "  Don‚Äôt worry, if you‚Äôre not comfortable with modern JavaScript syntax just",
            "  yet. By the end of this book, you‚Äôre gonna love it!",
            "</p>",
            "<p>",
            "  Until then, here‚Äôs an interactive cheatsheet:",
            "  <a href=\"https://es6cheatsheet.com/\">es6cheatsheet.com</a>. It uses",
            "  runnable code samples to compare the ES5 way with the ES6 way so you can",
            "  brush up quickly.",
            "</p>",
            "<p>",
            "  To give you a taste of React alternatives, we‚Äôll check out",
            "  <strong>Preact</strong>, <strong>Inferno</strong>, and",
            "  <strong>Vue</strong> in the fractal tree example. They‚Äôre component-based",
            "  UI frameworks similar to React. Preact is tiny, Inferno is fast, and Vue",
            "  is about as popular as React.",
            "</p>",
            "<hr />",
            "<p>",
            "  Let‚Äôs talk about how React and D3 fit together. If there‚Äôs just one",
            "  chapter you should read, this is the one. It explains how things work and",
            "  fit together. Takes you from beginning to being able to figure out the",
            "  rest on your own.",
            "</p>",
            "<p>",
            "  Although you should still play with the bigger examples. They‚Äôre fun.",
            "</p>",
            "<p>This section has five chapters:</p>",
            "<ul>",
            "  <li>",
            "    <a",
            "      href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6887710\"",
            "      >A quick intro to D3</a",
            "    >",
            "  </li>",
            "  <li>",
            "    <a",
            "      href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6887721#basic-approach\"",
            "      >How React makes D3 easier</a",
            "    >",
            "  </li>",
            "  <li>",
            "    <a",
            "      href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6887723#existing-libraries\"",
            "      >When should you use an existing library? Which one?</a",
            "    >",
            "  </li>",
            "  <li>",
            "    <a",
            "      href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6887730#blackbox-components\"",
            "      >Quickly integrate any D3 code in your React project with Blackbox",
            "      Components</a",
            "    >",
            "  </li>",
            "  <li>",
            "    <a",
            "      href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6887740#full-feature-integration\"",
            "      >Build scalable dataviz components with full integration</a",
            "    >",
            "  </li>",
            "  <li>",
            "    <a",
            "      href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6887771#state-handling-architecture\"",
            "      >Handling state in your React app</a",
            "    >",
            "  </li>",
            "  <li>",
            "    <a",
            "      href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6887772#structuring-your-app\"",
            "      >Structuring your React App</a",
            "    >",
            "  </li>",
            "</ul>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "A quick intro to D3",
      "lectures": [
        {
          "lectureTitle": "Why D3",
          "lectureLines": [
            "<p>",
            "  D3 is the best library out there for custom data visualization. It comes",
            "  with a rich ecosystem of functions for almost anything you can think of.",
            "  From simple medians, to automatic axis generators, and force diagrams.",
            "</p>",
            "<p>",
            "  Most data visualization you see on the web is built with D3. The New York",
            "  Times uses it, Guardian uses it, r/dataisbeautiful is full of it.",
            "</p>",
            "<p>Learning D3 from scratch is where life gets tricky.</p>",
            "<p>",
            "  There are several gotchas that trip you up and make examples look like",
            "  magic. You‚Äôve probably noticed this, if you ever looked at an example",
            "  project built with D3. They‚Äôre full of spaghetti code, global variables,",
            "  and often aren‚Äôt made to be maintainable.",
            "</p>",
            "<p>Most examples are just one-off toys after all. It‚Äôs art.</p>",
            "<p>",
            "  A lot of dataviz that <em>isn‚Äôt</em> art, is charts and graphs. You‚Äôll",
            "  often find that using D3 to build those, is too complicated. D3 gives you",
            "  more power than you need.",
            "</p>",
            "<p>If you want charts, I suggest using a charting library.</p>",
            "<p>",
            "  Where many charting libraries fall short is customization. The API is",
            "  limited, you can‚Äôt do everything you want, and it gets easier to just",
            "  build it yourself.",
            "</p>",
            "<p>",
            "  A lot of what you end up doing in real life is finding a D3 example that",
            "  looks like what you want to build and adapting it. That‚Äôs why you should",
            "  learn at least some D3.",
            "</p>",
            "<p>But D3 is hard to read. Take this barchart code, for example üëá</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb6\"",
            "  data-caption=\"Barchart in pure D3\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb6-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">tsv</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;data.tsv&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb6-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">frequency</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">+</span><span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">frequency</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb6-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> d<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb6-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">},</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(error<span class=\"op\" style=\"color: #666666;\">,</span> data) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb6-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (error) <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">throw</span> error<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb6-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb6-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">x</span>.<span class=\"at\" style=\"color: #7d9029;\">domain</span>(<span class=\"va\" style=\"color: #19177c;\">data</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">letter</span><span class=\"op\" style=\"color: #666666;\">;</span> <span class=\"op\" style=\"color: #666666;\">}</span>))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb6-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">y</span>.<span class=\"at\" style=\"color: #7d9029;\">domain</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">max</span>(data<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">frequency</span><span class=\"op\" style=\"color: #666666;\">;</span> <span class=\"op\" style=\"color: #666666;\">}</span>)])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb6-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb6-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">g</span>.<span class=\"at\" style=\"color: #7d9029;\">append</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;g&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb6-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;class&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;axis axis--x&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb6-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;transform&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;translate(0,&quot;</span> <span class=\"op\" style=\"color: #666666;\">+</span> height <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"st\" style=\"color: #4070a0;\">&quotüòâ&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb6-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">call</span>(<span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">axisBottom</span>(x))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb6-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb6-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">g</span>.<span class=\"at\" style=\"color: #7d9029;\">append</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;g&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb6-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;class&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;axis axis--y&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb6-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">call</span>(<span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">axisLeft</span>(y).<span class=\"at\" style=\"color: #7d9029;\">ticks</span>(<span class=\"dv\" style=\"color: #40a070;\">10</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;%&quot;</span>))</a>",
            "<a class=\"sourceLine\" id=\"cb6-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">append</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;text&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb6-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;transform&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;rotate(-90)&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb6-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;y&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">6</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb6-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;dy&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;0.71em&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb6-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;text-anchor&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;end&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb6-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">text</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;Frequency&quot;</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb6-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb6-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">g</span>.<span class=\"at\" style=\"color: #7d9029;\">selectAll</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;.bar&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb6-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">data</span>(data)</a>",
            "<a class=\"sourceLine\" id=\"cb6-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">enter</span>().<span class=\"at\" style=\"color: #7d9029;\">append</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;rect&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb6-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;class&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;bar&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb6-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;x&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"at\" style=\"color: #7d9029;\">x</span>(<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">letter</span>)<span class=\"op\" style=\"color: #666666;\">;</span> <span class=\"op\" style=\"color: #666666;\">}</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb6-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;y&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"at\" style=\"color: #7d9029;\">y</span>(<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">frequency</span>)<span class=\"op\" style=\"color: #666666;\">;</span> <span class=\"op\" style=\"color: #666666;\">}</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb6-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;width&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">x</span>.<span class=\"at\" style=\"color: #7d9029;\">bandwidth</span>())</a>",
            "<a class=\"sourceLine\" id=\"cb6-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;height&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> height <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"at\" style=\"color: #7d9029;\">y</span>(<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">frequency</span>)<span class=\"op\" style=\"color: #666666;\">;</span> <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb6-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>Can you tell what‚Äôs going on? I‚Äôd need to read it pretty carefully.</p>",
            "<p>Which brings us to üëâ</p>"
          ]
        },
        {
          "lectureTitle": "3 key insights to learn D3 from scratch",
          "lectureLines": [
            "<h2 id=\"key-insights-that-help-you-learn-d3.js-from-scratch\">",
            "  3 key insights that help you learn D3.js from scratch",
            "</h2>",
            "<p>",
            "  Somebody once asked me how to learn D3.js from scratch. I quipped that it",
            "  took me writing a book to really learn it. It‚Äôs one hell of a library.",
            "</p>",
            "<p>Most people don‚Äôt go that far. They don‚Äôt have to.</p>",
            "<p>",
            "  You start with a problem, find similar examples, do some copy pasta,",
            "  tweak until it works and end up with a working visualization you don‚Äôt",
            "  understand. You‚Äôd be surprised how few engineers actually understand how",
            "  their D3 data visualization works.",
            "</p>",
            "<p>",
            "  Fear not! There are just 3 key concepts you have to grok. Then you can",
            "  understand every D3 example out there. üò±",
            "</p>"
          ]
        },
        {
          "lectureTitle": "Data vs. DOM manipulation",
          "lectureLines": [
            "<h3 id=\"data-manipulation-vs.dom-manipulation\">",
            "  1) Data manipulation vs.¬†DOM manipulation",
            "</h3>",
            "<p>All D3 examples are split into two parts:</p>",
            "<ol type=\"1\">",
            "  <li>Data manipulation</li>",
            "  <li>DOM manipulation</li>",
            "</ol>",
            "<p>First you prep your values, then you render.</p>",
            "<p>",
            "  You have to go through many examples to notice what‚Äôs going on. Inference",
            "  learning is hard. Most beginners miss this pattern and it makes D3 look",
            "  more confusing than it is.",
            "</p>",
            "<p>",
            "  Let‚Äôs take an example from",
            "  <a href=\"https://github.com/d3/d3/wiki/Gallery\">D3‚Äôs docs</a>, a bar",
            "  chart with a hover effect.",
            "</p>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/barchart-example.png\"",
            "    alt=\"An example D3 barchart\"",
            "  />",
            "  <figcaption>An example D3 barchart</figcaption>",
            "</figure>",
            "<p>",
            "  You can",
            "  <a",
            "    href=\"https://cdn.rawgit.com/mbostock/3885304/raw/a91f37f5f4b43269df3dbabcda0090310c05285d/index.html\"",
            "    >try it online</a",
            "  >. When you hover on a bar, it changes color. Pretty neat.",
            "</p>",
            "<p>",
            "  Mike Bostock, the creator of D3, built this chart in 43 lines of code.",
            "  Here they are üëá",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb7\"",
            "  data-caption=\"Example D3 barchart\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb7-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">var</span> svg <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">select</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;svg&quot;</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb7-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    margin <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"dt\" style=\"color: #902000;\">top</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">20</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">right</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">20</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">bottom</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">30</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">left</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">40</span><span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb7-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    width <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">+</span><span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;width&quot;</span>) <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"va\" style=\"color: #19177c;\">margin</span>.<span class=\"at\" style=\"color: #7d9029;\">left</span> <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"va\" style=\"color: #19177c;\">margin</span>.<span class=\"at\" style=\"color: #7d9029;\">right</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb7-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    height <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">+</span><span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;height&quot;</span>) <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"va\" style=\"color: #19177c;\">margin</span>.<span class=\"at\" style=\"color: #7d9029;\">top</span> <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"va\" style=\"color: #19177c;\">margin</span>.<span class=\"at\" style=\"color: #7d9029;\">bottom</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb7-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb7-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">var</span> x <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">scaleBand</span>().<span class=\"at\" style=\"color: #7d9029;\">rangeRound</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> width]).<span class=\"at\" style=\"color: #7d9029;\">padding</span>(<span class=\"fl\" style=\"color: #40a070;\">0.1</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb7-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    y <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">scaleLinear</span>().<span class=\"at\" style=\"color: #7d9029;\">rangeRound</span>([height<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">0</span>])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb7-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb7-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">var</span> g <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">append</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;g&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb7-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;transform&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;translate(&quot;</span> <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"va\" style=\"color: #19177c;\">margin</span>.<span class=\"at\" style=\"color: #7d9029;\">left</span> <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;,&quot;</span> <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"va\" style=\"color: #19177c;\">margin</span>.<span class=\"at\" style=\"color: #7d9029;\">top</span> <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"st\" style=\"color: #4070a0;\">&quotüòâ&quot;</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb7-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb7-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">tsv</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;data.tsv&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb7-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">frequency</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">+</span><span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">frequency</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb7-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> d<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb7-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">},</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(error<span class=\"op\" style=\"color: #666666;\">,</span> data) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb7-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (error) <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">throw</span> error<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb7-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb7-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">x</span>.<span class=\"at\" style=\"color: #7d9029;\">domain</span>(<span class=\"va\" style=\"color: #19177c;\">data</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">letter</span><span class=\"op\" style=\"color: #666666;\">;</span> <span class=\"op\" style=\"color: #666666;\">}</span>))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb7-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">y</span>.<span class=\"at\" style=\"color: #7d9029;\">domain</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">max</span>(data<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">frequency</span><span class=\"op\" style=\"color: #666666;\">;</span> <span class=\"op\" style=\"color: #666666;\">}</span>)])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb7-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb7-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">g</span>.<span class=\"at\" style=\"color: #7d9029;\">append</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;g&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb7-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;class&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;axis axis--x&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb7-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;transform&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;translate(0,&quot;</span> <span class=\"op\" style=\"color: #666666;\">+</span> height <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"st\" style=\"color: #4070a0;\">&quotüòâ&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb7-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">call</span>(<span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">axisBottom</span>(x))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb7-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb7-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">g</span>.<span class=\"at\" style=\"color: #7d9029;\">append</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;g&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb7-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;class&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;axis axis--y&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb7-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">call</span>(<span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">axisLeft</span>(y).<span class=\"at\" style=\"color: #7d9029;\">ticks</span>(<span class=\"dv\" style=\"color: #40a070;\">10</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;%&quot;</span>))</a>",
            "<a class=\"sourceLine\" id=\"cb7-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">append</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;text&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb7-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;transform&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;rotate(-90)&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb7-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;y&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">6</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb7-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;dy&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;0.71em&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb7-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;text-anchor&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;end&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb7-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">text</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;Frequency&quot;</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb7-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb7-36\" title=\"36\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">g</span>.<span class=\"at\" style=\"color: #7d9029;\">selectAll</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;.bar&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb7-37\" title=\"37\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">data</span>(data)</a>",
            "<a class=\"sourceLine\" id=\"cb7-38\" title=\"38\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">enter</span>().<span class=\"at\" style=\"color: #7d9029;\">append</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;rect&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb7-39\" title=\"39\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;class&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;bar&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb7-40\" title=\"40\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;x&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"at\" style=\"color: #7d9029;\">x</span>(<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">letter</span>)<span class=\"op\" style=\"color: #666666;\">;</span> <span class=\"op\" style=\"color: #666666;\">}</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb7-41\" title=\"41\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;y&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"at\" style=\"color: #7d9029;\">y</span>(<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">frequency</span>)<span class=\"op\" style=\"color: #666666;\">;</span> <span class=\"op\" style=\"color: #666666;\">}</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb7-42\" title=\"42\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;width&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">x</span>.<span class=\"at\" style=\"color: #7d9029;\">bandwidth</span>())</a>",
            "<a class=\"sourceLine\" id=\"cb7-43\" title=\"43\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;height&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> height <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"at\" style=\"color: #7d9029;\">y</span>(<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">frequency</span>)<span class=\"op\" style=\"color: #666666;\">;</span> <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb7-44\" title=\"44\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  There are two parts to this code: Data manipulation and DOM manipulation.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb8\"",
            "  data-caption=\"Data manipulation code\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb8-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">var</span> <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ..,</span></a>",
            "<a class=\"sourceLine\" id=\"cb8-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    margin <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"dt\" style=\"color: #902000;\">top</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">20</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">right</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">20</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">bottom</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">30</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">left</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">40</span><span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb8-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    width <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">+</span><span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;width&quot;</span>) <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"va\" style=\"color: #19177c;\">margin</span>.<span class=\"at\" style=\"color: #7d9029;\">left</span> <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"va\" style=\"color: #19177c;\">margin</span>.<span class=\"at\" style=\"color: #7d9029;\">right</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb8-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    height <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">+</span><span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;height&quot;</span>) <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"va\" style=\"color: #19177c;\">margin</span>.<span class=\"at\" style=\"color: #7d9029;\">top</span> <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"va\" style=\"color: #19177c;\">margin</span>.<span class=\"at\" style=\"color: #7d9029;\">bottom</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb8-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb8-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">var</span> x <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">scaleBand</span>().<span class=\"at\" style=\"color: #7d9029;\">rangeRound</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> width]).<span class=\"at\" style=\"color: #7d9029;\">padding</span>(<span class=\"fl\" style=\"color: #40a070;\">0.1</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb8-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    y <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">scaleLinear</span>().<span class=\"at\" style=\"color: #7d9029;\">rangeRound</span>([height<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">0</span>])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb8-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb8-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb8-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb8-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">tsv</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;data.tsv&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb8-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">frequency</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">+</span><span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">frequency</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb8-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> d<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb8-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">},</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(error<span class=\"op\" style=\"color: #666666;\">,</span> data) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb8-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (error) <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">throw</span> error<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb8-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb8-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">x</span>.<span class=\"at\" style=\"color: #7d9029;\">domain</span>(<span class=\"va\" style=\"color: #19177c;\">data</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">letter</span><span class=\"op\" style=\"color: #666666;\">;</span> <span class=\"op\" style=\"color: #666666;\">}</span>))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb8-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">y</span>.<span class=\"at\" style=\"color: #7d9029;\">domain</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">max</span>(data<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">frequency</span><span class=\"op\" style=\"color: #666666;\">;</span> <span class=\"op\" style=\"color: #666666;\">}</span>)])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb8-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb8-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb8-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>Bostock here first prepares his data:</p>",
            "<ul>",
            "  <li>",
            "    some sizing variables (<code style=\"white-space: pre-wrap;\"",
            "      >margin</code",
            "    >, <code style=\"white-space: pre-wrap;\">width</code>,",
            "    <code style=\"white-space: pre-wrap;\">height</code>)",
            "  </li>",
            "  <li>",
            "    two scales to help with data-to-coordinates conversion (<code",
            "      style=\"white-space: pre-wrap;\"",
            "      >x, y</code",
            "    >)",
            "  </li>",
            "  <li>",
            "    loads his dataset (<code style=\"white-space: pre-wrap;\">d3.tsv</code>)",
            "    and updates his scales‚Äô domains",
            "  </li>",
            "</ul>",
            "<p>",
            "  In the DOM manipulation part, he puts shapes and objects into an SVG.",
            "  This is the part that shows up in your browser.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb9\"",
            "  data-caption=\"DOM manipulation code\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb9-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">var</span> svg <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">select</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;svg&quot;</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb9-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ..</span></a>",
            "<a class=\"sourceLine\" id=\"cb9-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb9-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ..</span></a>",
            "<a class=\"sourceLine\" id=\"cb9-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb9-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">var</span> g <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">append</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;g&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb9-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;transform&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;translate(&quot;</span> <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"va\" style=\"color: #19177c;\">margin</span>.<span class=\"at\" style=\"color: #7d9029;\">left</span> <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;,&quot;</span> <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"va\" style=\"color: #19177c;\">margin</span>.<span class=\"at\" style=\"color: #7d9029;\">top</span> <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"st\" style=\"color: #4070a0;\">&quotüòâ&quot;</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb9-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb9-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ..</span></a>",
            "<a class=\"sourceLine\" id=\"cb9-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">g</span>.<span class=\"at\" style=\"color: #7d9029;\">append</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;g&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb9-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;class&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;axis axis--x&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb9-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;transform&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;translate(0,&quot;</span> <span class=\"op\" style=\"color: #666666;\">+</span> height <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"st\" style=\"color: #4070a0;\">&quotüòâ&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb9-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">call</span>(<span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">axisBottom</span>(x))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb9-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb9-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">g</span>.<span class=\"at\" style=\"color: #7d9029;\">append</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;g&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb9-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;class&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;axis axis--y&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb9-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">call</span>(<span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">axisLeft</span>(y).<span class=\"at\" style=\"color: #7d9029;\">ticks</span>(<span class=\"dv\" style=\"color: #40a070;\">10</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;%&quot;</span>))</a>",
            "<a class=\"sourceLine\" id=\"cb9-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">append</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;text&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb9-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;transform&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;rotate(-90)&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb9-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;y&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">6</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb9-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;dy&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;0.71em&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb9-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;text-anchor&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;end&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb9-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">text</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;Frequency&quot;</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb9-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb9-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">g</span>.<span class=\"at\" style=\"color: #7d9029;\">selectAll</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;.bar&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb9-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">data</span>(data)</a>",
            "<a class=\"sourceLine\" id=\"cb9-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">enter</span>().<span class=\"at\" style=\"color: #7d9029;\">append</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;rect&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb9-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;class&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;bar&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb9-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;x&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"at\" style=\"color: #7d9029;\">x</span>(<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">letter</span>)<span class=\"op\" style=\"color: #666666;\">;</span> <span class=\"op\" style=\"color: #666666;\">}</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb9-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;y&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"at\" style=\"color: #7d9029;\">y</span>(<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">frequency</span>)<span class=\"op\" style=\"color: #666666;\">;</span> <span class=\"op\" style=\"color: #666666;\">}</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb9-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;width&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">x</span>.<span class=\"at\" style=\"color: #7d9029;\">bandwidth</span>())</a>",
            "<a class=\"sourceLine\" id=\"cb9-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;height&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> height <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"at\" style=\"color: #7d9029;\">y</span>(<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">frequency</span>)<span class=\"op\" style=\"color: #666666;\">;</span> <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb9-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">})<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  DOM manipulation in D3 happens via D3 selections. They‚Äôre a lot like",
            "  jQuery <code style=\"white-space: pre-wrap;\">$(something)</code>. This is",
            "  the part we‚Äôre doing with React later on.",
            "</p>",
            "<p>Here Bostock does a few things</p>",
            "<ul>",
            "  <li>",
            "    selects the",
            "    <code style=\"white-space: pre-wrap;\">&lt;svg&gt;</code> node (<code",
            "      style=\"white-space: pre-wrap;\"",
            "      >d3.select</code",
            "    >)",
            "  </li>",
            "  <li>",
            "    appends a grouping",
            "    <code style=\"white-space: pre-wrap;\">&lt;g&gt;</code> node (<code",
            "      style=\"white-space: pre-wrap;\"",
            "      >.append</code",
            "    >) with an SVG positioning attribute (translate)",
            "  </li>",
            "  <li>",
            "    adds a bottom axis by appending a",
            "    <code style=\"white-space: pre-wrap;\">&lt;g&gt;</code>, moving it, then",
            "    calling <code style=\"white-space: pre-wrap;\">d3.axisBottom</code> on",
            "    it. D3 has built-in axis generators",
            "  </li>",
            "  <li>adds a left axis using the same approach but rotating the ticks</li>",
            "  <li>appends a text label ‚ÄúFrequency‚Äù to the left axis</li>",
            "  <li>",
            "    uses <code style=\"white-space: pre-wrap;\">selectAll.data</code> to make",
            "    a virtual selection of",
            "    <code style=\"white-space: pre-wrap;\">.bar</code> nodes and attach some",
            "    data, then for every new data value (.enter), appends a",
            "    <code style=\"white-space: pre-wrap;\">&lt;rect&gt;</code> node and gives",
            "    it attributes",
            "  </li>",
            "</ul>",
            "<p>",
            "  That last part is where people get lost. It looks like magic. Even to me.",
            "</p>",
            "<p>",
            "  It‚Äôs a declarative approach to rendering data. Works great, hard to",
            "  understand. That‚Äôs why we‚Äôll do it in React instead üòÉ",
            "</p>",
            "<p>",
            "  You can think of <code style=\"white-space: pre-wrap;\">.enter</code> as a",
            "  loop over your data. Everything chained after",
            "  <code style=\"white-space: pre-wrap;\">.enter</code> is your loop‚Äôs body.",
            "  Sort of like doing",
            "  <code style=\"white-space: pre-wrap;\"",
            "    >data.map(d =&gt; append(rect).setManyAttributes())</code",
            "  >",
            "</p>",
            "<p>",
            "  That function executes for any <em>new</em> data ‚Äúentering‚Äù your",
            "  visualization. There‚Äôs also",
            "  <code style=\"white-space: pre-wrap;\">.exit</code> for anything that‚Äôs",
            "  dropping out, and <code style=\"white-space: pre-wrap;\">.update</code> for",
            "  anything that‚Äôs changing.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "Scales",
          "lectureLines": [
            "<h3 id=\"scales\">2) Scales</h3>",
            "<p>",
            "  Scales are D3‚Äôs most versatile concept. They help you translate between",
            "  two different spaces. Like, mathematical spaces.",
            "</p>",
            "<p>",
            "  They‚Äôre like the mathematical functions you learned about in school. A",
            "  domain maps to a range using some sort of formula.",
            "</p>",
            "<figure>",
            "  <img",
            "    src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/d/df/Function_color_example_3.svg/440px-Function_color_example_3.svg.png\"",
            "    alt=\"A basic function\"",
            "  />",
            "  <figcaption>A basic function</figcaption>",
            "</figure>",
            "<p>",
            "  Colored shapes in the domain map to colors in the range. No formula for",
            "  this one. That makes it an ordinal scale.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb10\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb10-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> shapes <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">scaleOrdinal</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb10-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  .<span class=\"at\" style=\"color: #7d9029;\">domain</span>([<span class=\"st\" style=\"color: #4070a0;\">&#39;red&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;orange&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> ...)</a>",
            "<a class=\"sourceLine\" id=\"cb10-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  .<span class=\"at\" style=\"color: #7d9029;\">range</span>([<span class=\"st\" style=\"color: #4070a0;\">&#39;red&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;orange&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> ...)</a></code></pre>",
            "</div>",
            "<p>",
            "  <a href=\"https://codesandbox.io/s/r0rw72z75o\"",
            "    >Play with scales on CodeSandbox</a",
            "  >",
            "</p>",
            "<iframe",
            "  src=\"https://codesandbox.io/embed/r0rw72z75o?codemirror=1&amp;view=split\"",
            "  style=\"width:100%; height:500px; borderüòÆ; border-radius: 4px; overflow:hidden;\"",
            "  sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\"",
            ">",
            "</iframe>",
            "<p>",
            "  Once you have this scale, you can use it to translate from shapes to",
            "  colors.",
            "  <code style=\"white-space: pre-wrap;\">shapes('red triangle')</code>",
            "  returns <code style=\"white-space: pre-wrap;\">'red'</code> for example.",
            "</p>",
            "<p>",
            "  Many different types of scales exist. Linear, logarithmic, quantize, etc.",
            "  Any basic transformation you can think of exists. The rest you can create",
            "  by writing custom scales.",
            "</p>",
            "<p>",
            "  You‚Äôre most often going to use scales to turn your data values into",
            "  coordinates. But other use-cases exist.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "D3 layouts",
          "lectureLines": [
            "<h3 id=\"d3-layouts\">3) D3 layouts</h3>",
            "<p>",
            "  Sure <code style=\"white-space: pre-wrap;\">.enter.append</code> looks like",
            "  magic, but D3 layouts are the real mind=blown of the D3 ecosystem. They",
            "  take your input data and return a full-featured visualization thing.",
            "</p>",
            "<p>",
            "  For example, a force layout using forces between nodes to place them on",
            "  the screen.",
            "</p>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/force-layout.png\"",
            "    alt=\"Force layout\"",
            "  />",
            "  <figcaption>Force layout</figcaption>",
            "</figure>",
            "<p>Or a circle packing layout that neatly packs circles.</p>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/circle-packing-layout.png\"",
            "    alt=\"Circle packing layout\"",
            "  />",
            "  <figcaption>Circle packing layout</figcaption>",
            "</figure>",
            "<p>",
            "  I don‚Äôt know the maths that goes into most of these. And that‚Äôs the",
            "  point, you shouldn‚Äôt have to!",
            "</p>",
            "<p>",
            "  Here‚Äôs a key insight about the magic of layouts: They‚Äôre the data part.",
            "</p>",
            "<p>",
            "  You take a <code style=\"white-space: pre-wrap;\">forceLayout</code> and",
            "  feed it your data. It returns an object with a",
            "  <code style=\"white-space: pre-wrap;\">tick</code> event callback.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb11\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb11-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">var</span> simulation <span class=\"op\" style=\"color: #666666;\">=</span> d3</a>",
            "<a class=\"sourceLine\" id=\"cb11-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  .<span class=\"at\" style=\"color: #7d9029;\">forceSimulation</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb11-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  .<span class=\"at\" style=\"color: #7d9029;\">force</span>(</a>",
            "<a class=\"sourceLine\" id=\"cb11-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"st\" style=\"color: #4070a0;\">&#39;link&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb11-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">forceLink</span>().<span class=\"at\" style=\"color: #7d9029;\">id</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb11-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">id</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb11-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb11-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  )</a>",
            "<a class=\"sourceLine\" id=\"cb11-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  .<span class=\"at\" style=\"color: #7d9029;\">force</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;charge&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">forceManyBody</span>())</a>",
            "<a class=\"sourceLine\" id=\"cb11-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  .<span class=\"at\" style=\"color: #7d9029;\">force</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;center&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">forceCenter</span>(width / <span class=\"dv\" style=\"color: #40a070;\">2</span><span class=\"op\" style=\"color: #666666;\">,</span> height / <span class=\"dv\" style=\"color: #40a070;\">2</span>))<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  This <code style=\"white-space: pre-wrap;\">simulation</code> now handles",
            "  everything <em>about</em> rendering your nodes. Changes their positions",
            "  on every <code style=\"white-space: pre-wrap;\">tick</code> callback,",
            "  figures out how often to change stuff, etc.",
            "</p>",
            "<p>",
            "  But it is up to you to render them. A layout handles your dataviz in the",
            "  abstract. You‚Äôre in control of the rendering.",
            "</p>",
            "<p>",
            "  For a force layout, you have to update the DOM on every tick of the",
            "  animation. For circle packing, you render it once.",
            "</p>",
            "<p>",
            "  Once you grok this, all the fancy visualizations out there start making",
            "  sense. Also means you can use these fancy layouts in React üôå",
            "</p>"
          ]
        },
        {
          "lectureTitle": "Recap",
          "lectureLines": [
            "<h2 id=\"recap\">Recap</h2>",
            "<p>",
            "  There‚Äôs a lot more D3 can do, but those are the 3 key insights you need",
            "  to understand any example you find in the wild.",
            "</p>",
            "<ol type=\"1\">",
            "  <li>Code is split into data and DOM manipulation</li>",
            "  <li>Scales are great and used a lot</li>",
            "  <li>You‚Äôre always in control of rendering</li>",
            "</ol>",
            "<p>",
            "  Then you can start using D3‚Äôs more advanced features like maps and axes",
            "  and shape generators and geo computations and data loading and",
            "  transitions and user interactions.",
            "</p>",
            "<p>",
            "  There‚Äôs a lot. We‚Äôre not going to cover it all but you can find those",
            "  advanced features in the docs and the skills you learn here will help you",
            "  get started.",
            "</p>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "How React makes D3 easier",
      "lectures": [
        {
          "lectureTitle": "React + D3 = ‚ù§Ô∏è",
          "lectureLines": [
            "<h1 id=\"basic-approach\">How React makes D3 easier</h1>",
            "<p>",
            "  Our visualizations are going to use SVG ‚Äì an XML-based image format that",
            "  lets us describe images in terms of mathematical shapes. For example, the",
            "  source code of an 800x600 SVG image with a rectangle looks like this:",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb12\"",
            "  data-caption=\"SVG rectangle\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode html\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode html\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb12-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&lt;svg</span><span class=\"ot\" style=\"color: #007020;\"> width=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;800&quot;</span><span class=\"ot\" style=\"color: #007020;\"> height=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;600&quot;</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb12-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&lt;rect</span><span class=\"ot\" style=\"color: #007020;\"> width=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;100&quot;</span><span class=\"ot\" style=\"color: #007020;\"> height=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;200&quot;</span><span class=\"ot\" style=\"color: #007020;\"> x=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;50&quot;</span><span class=\"ot\" style=\"color: #007020;\"> y=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;20&quot;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">/&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb12-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&lt;/svg&gt;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  These four lines create an SVG image with a black rectangle at",
            "  coordinates <code style=\"white-space: pre-wrap;\">(50, 20)</code> that is",
            "  100x200 pixels large. Black fill with no borders is default for SVG",
            "  shapes.",
            "</p>",
            "<p>",
            "  SVG is perfect for data visualization on the web because it works in all",
            "  browsers, renders without blurring or artifacts on all screens, and",
            "  supports animation and user interaction. You can see examples of",
            "  interaction and animation later in this book.",
            "</p>",
            "<p>",
            "  But SVG can get slow when you have many thousands of elements on screen.",
            "  We‚Äôre going to solve that problem by rendering bitmap images with canvas.",
            "  More on that later.",
            "</p>",
            "<hr />",
            "<p>",
            "  Another nice feature of SVG is that it‚Äôs just a dialect of XML - nested",
            "  elements describe structure, attributes describe the details. Same",
            "  principles that HTML uses.",
            "</p>",
            "<p>",
            "  That makes React‚Äôs rendering engine particularly suited for SVG. Our",
            "  100x200 rectangle from before looks like this as a React component:",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb13\"",
            "  data-caption=\"A simple rectangle in React\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb13-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> Rectangle <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb13-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>rect width<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;100&quot;</span> height<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;200&quot;</span> x<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;50&quot;</span> y<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;20&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb13-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  To use this rectangle component in a picture, you‚Äôd use a component like",
            "  this:",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb14\"",
            "  data-caption=\"Rect component in a picture\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb14-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> Picture <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb14-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>svg width<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;800&quot;</span> height<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;600&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb14-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>Rectangle /<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb14-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    &lt;/svg<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb14-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  Sure looks like tons of work for a static rectangle. But look closely!",
            "  Even if you know nothing about React and JSX, you can look at that code",
            "  and see that it‚Äôs a",
            "  <code style=\"white-space: pre-wrap;\">Picture</code> of a",
            "  <code style=\"white-space: pre-wrap;\">Rectangle</code>.",
            "</p>",
            "<p>Compare that to a pure D3 approach:</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb15\"",
            "  data-caption=\"A static rectangle in d3.js\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb15-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">select</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;svg&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb15-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;width&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">800</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb15-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;height&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">600</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb15-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  .<span class=\"at\" style=\"color: #7d9029;\">append</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;rect&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb15-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;width&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">100</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb15-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;height&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">200</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb15-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;x&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">50</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb15-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;y&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">20</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  It‚Äôs elegant, it‚Äôs declarative, and it looks like function call soup. It",
            "  doesn‚Äôt scream <em>‚ÄúRectangle in an SVG‚Äù</em> to as much as the React",
            "  version does.",
            "</p>",
            "<p>",
            "  You have to take your time and read the code carefully: first, we",
            "  <code style=\"white-space: pre-wrap;\">select</code> the",
            "  <code style=\"white-space: pre-wrap;\">svg</code> element, then we add",
            "  attributes for <code style=\"white-space: pre-wrap;\">width</code> and",
            "  <code style=\"white-space: pre-wrap;\">height</code>. After that, we",
            "  <code style=\"white-space: pre-wrap;\">append</code> a",
            "  <code style=\"white-space: pre-wrap;\">rect</code> element and set its",
            "  attributes for <code style=\"white-space: pre-wrap;\">width</code>,",
            "  <code style=\"white-space: pre-wrap;\">height</code>,",
            "  <code style=\"white-space: pre-wrap;\">x</code>, and",
            "  <code style=\"white-space: pre-wrap;\">y</code>.",
            "</p>",
            "<p>Those 8 lines of code create HTML that looks like this:</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb16\"",
            "  data-caption=\"HTML of a rectangle\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb16-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">&lt;</span>svg width<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;800&quot;</span> height<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;600&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb16-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>rect width<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;100&quot;</span> height<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;200&quot;</span> x<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;50&quot;</span> y<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;20&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb16-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">&lt;/svg<span class=\"op\" style=\"color: #666666;\">&gt;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  Would‚Äôve been easier to just write the HTML, right? Yes, for static",
            "  images, you‚Äôre better off using Photoshop or Sketch then exporting to",
            "  SVG.",
            "</p>",
            "<p>",
            "  Dealing with the DOM is not D3‚Äôs strong suit. There‚Äôs a lot of typing,",
            "  code that‚Äôs hard to read, it‚Äôs slow when you have thousands of elements,",
            "  and it‚Äôs often hard to keep track of which elements you‚Äôre changing. D3‚Äôs",
            "  enter-update-exit cycle is great in theory, but most people struggle",
            "  trying to wrap their head around it.",
            "</p>",
            "<p>",
            "  If you don‚Äôt understand what I just said, don‚Äôt worry. We‚Äôll cover the",
            "  enter-update-exit cycle in the animations example.",
            "</p>",
            "<p>",
            "  Don‚Äôt worry about D3 either. <strong>It‚Äôs hard!</strong> I‚Äôve written two",
            "  books about D3, and I still spend as much time reading the docs as",
            "  writing the code. The library is huge and there‚Äôs much to learn. I‚Äôll",
            "  explain everything as we go along.",
            "</p>",
            "<p>",
            "  D3‚Äôs strong suit is its ability to do everything except the DOM. There",
            "  are statistical functions, great support for data manipulation, a bunch",
            "  of built-in data visualizations, magic around transitions and animation ‚Ä¶",
            "  <strong",
            "    >D3 can calculate anything for you. All you have to do is draw it",
            "    out.</strong",
            "  >",
            "</p>",
            "<p>That‚Äôs why our general approach sounds like this in a nutshell:</p>",
            "<ul>",
            "  <li>React owns the DOM</li>",
            "  <li>D3 calculates properties</li>",
            "</ul>",
            "<p>",
            "  We leverage React for SVG structure and rendering optimizations; D3 for",
            "  its mathematical and visualization functions.",
            "</p>",
            "<p>",
            "  Now let‚Äôs look at three different ways of using React and D3 to build",
            "  data visualization:",
            "</p>",
            "<ul>",
            "  <li>using a library</li>",
            "  <li>quick blackbox components</li>",
            "  <li>full feature integration</li>",
            "</ul>"
          ]
        },
        {
          "lectureTitle": "What about existing libraries?",
          "lectureLines": [
            "<h1 id=\"existing-libraries\">",
            "  When should you use an existing library? Which one?",
            "</h1>",
            "<p>",
            "  The quickest way to achieve the benefits of integrating React with D3 is",
            "  to use a library. A collection of components with pre-built charting",
            "  visualizations. Plug it into your app, move on with life.",
            "</p>",
            "<p>",
            "  Great option for basic charts. I recommend it dearly to anyone who comes",
            "  to me and asks about building stuff. Try a library first. If it fits your",
            "  needs, perfect! You just saved yourselves plenty of time.",
            "</p>",
            "<p>",
            "  Where libraries become a problem is when you want to move beyond the",
            "  library author‚Äôs idea of How Things Are Done. Custom features,",
            "  visualizations that aren‚Äôt just charts, disabling this or that default",
            "  behavior ‚Ä¶ it gets messy.",
            "</p>",
            "<p>",
            "  That‚Äôs why I rarely use libraries myself. Often find it quicker to build",
            "  something specific from scratch than figuring out how to hold a",
            "  generalized API just right.",
            "</p>",
            "<p>",
            "  But they‚Äôre a great first step. Here‚Äôs a few of the most popular React",
            "  &amp; D3 libraries üëá",
            "</p>",
            "<p>",
            "  List borrowed from",
            "  <a href=\"https://www.smashingmagazine.com/2018/02/react-d3-ecosystem/\"",
            "    >a wonderful Smashing Magazine article</a",
            "  >, because it‚Äôs a good list.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "Victory.js",
          "lectureLines": [
            "<h2 id=\"victory\">Victory</h2>",
            "<blockquote>",
            "  <p>React.js components for modular charting and data visualization</p>",
            "</blockquote>",
            "<p>",
            "  <a href=\"https://formidable.com/open-source/victory/\"",
            "    ><img",
            "      src=\"https://raw.githubusercontent.com/hsribei/react-d3js-es6-ebook/teachable-only/manuscript/resources/images/2018/victoryjs.jpg\"",
            "      alt=\"Victory.js logo\"",
            "  /></a>",
            "</p>",
            "<p>",
            "  Victory offers low level components for basic charting and reimplements a",
            "  lot of D3‚Äôs API. Great when you need to create basic charts without a lot",
            "  of customization. Supports React Native.",
            "</p>",
            "<p>",
            "  Here‚Äôs what it takes to implement a Barchart using Victory.js.",
            "  <a href=\"https://codesandbox.io/s/3v3q013x36\"",
            "    >You can try it on CodeSandbox</a",
            "  >",
            "</p>",
            "<iframe",
            "  src=\"https://codesandbox.io/embed/3v3q013x36?codemirror=1&amp;view=split\"",
            "  style=\"width:100%; height:500px; borderüòÆ; border-radius: 4px; overflow:hidden;\"",
            "  sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\"",
            ">",
            "</iframe>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb17\"",
            "  data-caption=\"Bar chart in Victory.js\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb17-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> data <span class=\"op\" style=\"color: #666666;\">=</span> [</a>",
            "<a class=\"sourceLine\" id=\"cb17-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">quarter</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">1</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">earnings</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">13000</span> <span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb17-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">quarter</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">2</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">earnings</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">16500</span> <span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb17-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">quarter</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">3</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">earnings</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">14250</span> <span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb17-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">quarter</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">4</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">earnings</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">19000</span> <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb17-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">]<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb17-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb17-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> App <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb17-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">&lt;</span>div style<span class=\"op\" style=\"color: #666666;\">={</span>styles<span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb17-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>h1<span class=\"op\" style=\"color: #666666;\">&gt;</span>Victory basic demo&lt;/h1<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb17-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>VictoryChart domainPadding<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">20</span><span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb17-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>VictoryBar data<span class=\"op\" style=\"color: #666666;\">={</span>data<span class=\"op\" style=\"color: #666666;\">}</span> x<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;quarter&quot;</span> y<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;earnings&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb17-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    &lt;/VictoryChart<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb17-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb17-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  Create some fake data, render a",
            "  <code style=\"white-space: pre-wrap;\">&lt;VictoryChart&gt;</code>",
            "  rendering area, add a",
            "  <code style=\"white-space: pre-wrap;\">&lt;VictoryBar&gt;</code> component,",
            "  give it data and axis keys. Quick and easy.",
            "</p>",
            "<p>",
            "  My favorite feature of Victory is that components use fake random data",
            "  until you pass your own. Means you always know what to expect.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "Recharts",
          "lectureLines": [
            "<h2 id=\"recharts\">Recharts</h2>",
            "<blockquote>",
            "  <p>A composable charting library built on React components</p>",
            "</blockquote>",
            "<p>",
            "  <a href=\"https://recharts.org/\"",
            "    ><img",
            "      src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/recharts.png\"",
            "      alt=\"Recharts homepage\"",
            "  /></a>",
            "</p>",
            "<p>",
            "  Recharts is like a more colorful Victory. A pile of charting components,",
            "  some customization, loves animating everything by default.",
            "</p>",
            "<p>",
            "  Here‚Äôs what it takes to implement a Barchart using Recharts.",
            "  <a href=\"https://codesandbox.io/s/mmkrjl7qxp\"",
            "    >You can try it on CodeSandbox</a",
            "  >",
            "</p>",
            "<iframe",
            "  src=\"https://codesandbox.io/embed/mmkrjl7qxp?codemirror=1&amp;view=split\"",
            "  style=\"width:100%; height:500px; borderüòÆ; border-radius: 4px; overflow:hidden;\"",
            "  sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\"",
            ">",
            "</iframe>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb18\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb18-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> data <span class=\"op\" style=\"color: #666666;\">=</span> [</a>",
            "<a class=\"sourceLine\" id=\"cb18-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">quarter</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">1</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">earnings</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">13000</span> <span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb18-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">quarter</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">2</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">earnings</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">16500</span> <span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb18-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">quarter</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">3</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">earnings</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">14250</span> <span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb18-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">quarter</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">4</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">earnings</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">19000</span> <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb18-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">]<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb18-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb18-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> App <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb18-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">&lt;</span>div style<span class=\"op\" style=\"color: #666666;\">={</span>styles<span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb18-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>h1<span class=\"op\" style=\"color: #666666;\">&gt;</span>Recharts basic demo&lt;/h1<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb18-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>BarChart width<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">500</span><span class=\"op\" style=\"color: #666666;\">}</span> height<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">300</span><span class=\"op\" style=\"color: #666666;\">}</span> data<span class=\"op\" style=\"color: #666666;\">={</span>data<span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb18-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>XAxis dataKey<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;quarter&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb18-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>YAxis dataKey<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;earnings&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb18-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>Bar dataKey<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;earnings&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb18-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    &lt;/BarChart<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb18-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb18-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  More involved than Victory, but same principle. Fake some data, render a",
            "  drawing area this time with",
            "  <code style=\"white-space: pre-wrap;\">&lt;BarChart&gt;</code> and feed it",
            "  some data. Inside the",
            "  <code style=\"white-space: pre-wrap;\">&lt;BarChart&gt;</code> render two",
            "  axes, and a <code style=\"white-space: pre-wrap;\">&lt;Bar&gt;</code> for",
            "  each entry.",
            "</p>",
            "<p>",
            "  Recharts hits a great balance of flexibility and ease ‚Ä¶ unless you don‚Äôt",
            "  like animation by default. Then you‚Äôre in trouble.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "Nivo",
          "lectureLines": [
            "<h2 id=\"nivo\">Nivo</h2>",
            "<blockquote>",
            "  <p>",
            "    nivo provides a rich set of dataviz components, built on top of the",
            "    awesome d3 and Reactjs libraries.",
            "  </p>",
            "</blockquote>",
            "<p>",
            "  <a href=\"https://nivo.rocks/\"",
            "    ><img",
            "      src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/nivo.gif\"",
            "      alt=\"Nivo homepage\"",
            "  /></a>",
            "</p>",
            "<p>",
            "  Nivo is another attempt to give you a set of basic charting components.",
            "  Comes with great interactive documentation, support for Canvas and API",
            "  rendering. Plenty of basic customization.",
            "</p>",
            "<p>",
            "  Here‚Äôs what it takes to implement a Barchart using Nivo.",
            "  <a href=\"https://codesandbox.io/s/n1wwkvq24\"",
            "    >You can try it on CodeSandbox</a",
            "  >",
            "</p>",
            "<iframe",
            "  src=\"https://codesandbox.io/embed/n1wwkvq24?codemirror=1&amp;view=split\"",
            "  style=\"width:100%; height:500px; borderüòÆ; border-radius: 4px; overflow:hidden;\"",
            "  sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\"",
            ">",
            "</iframe>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb19\"",
            "  data-caption=\"Bar chart in Nivo\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb19-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> data <span class=\"op\" style=\"color: #666666;\">=</span> [</a>",
            "<a class=\"sourceLine\" id=\"cb19-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">quarter</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">1</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">earnings</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">13000</span> <span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb19-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">quarter</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">2</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">earnings</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">16500</span> <span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb19-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">quarter</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">3</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">earnings</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">14250</span> <span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb19-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">quarter</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">4</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">earnings</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">19000</span> <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb19-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">]<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb19-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb19-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> App <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb19-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">&lt;</span>div style<span class=\"op\" style=\"color: #666666;\">={</span>styles<span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb19-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>h1<span class=\"op\" style=\"color: #666666;\">&gt;</span>Nivo basic demo&lt;/h1<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb19-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>div style<span class=\"op\" style=\"color: #666666;\">={{</span> <span class=\"dt\">height</span><span class=\"op\">:</span> <span class=\"st\">&quot;400px&quot;</span> <span class=\"op\">}}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb19-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>ResponsiveBar data<span class=\"op\" style=\"color: #666666;\">={</span>data<span class=\"op\" style=\"color: #666666;\">}</span> keys<span class=\"op\" style=\"color: #666666;\">={</span>[<span class=\"st\" style=\"color: #4070a0;\">&quot;earnings&quot;</span>]<span class=\"op\" style=\"color: #666666;\">}</span> indexBy<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;quarter&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb19-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb19-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb19-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  Least amount of effort! You render a",
            "  <code style=\"white-space: pre-wrap;\">&lt;ResponsiveBar&gt;</code>",
            "  component, give it data and some params, and Nivo handles the rest.",
            "</p>",
            "<p>",
            "  Wonderful! But means you have to learn a whole new language of configs",
            "  and props that might make your hair stand on end. The documentation is",
            "  great and shows how everything works, but I found it difficult to know",
            "  which prop combinations are valid.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "VX",
          "lectureLines": [
            "<h2 id=\"vx\">VX</h2>",
            "<blockquote>",
            "  <p>",
            "    vx is collection of reusable low-level visualization components. vx",
            "    combines the power of d3 to generate your visualization with the",
            "    benefits of react for updating the DOM.",
            "  </p>",
            "</blockquote>",
            "<p>",
            "  <a href=\"https://vx-demo.now.sh/\"",
            "    ><img",
            "      src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/vx.png\"",
            "      alt=\"VX\"",
            "  /></a>",
            "</p>",
            "<p>",
            "  VX is the closest to the approaches you‚Äôre learning in this book. React",
            "  for rendering, D3 for calculations. When you build a set of custom",
            "  components for your organization, a flavor of VX is what you often come",
            "  up with.",
            "</p>",
            "<p>",
            "  That‚Äôs why I recommend teams use VX when they need to get started",
            "  quickly.",
            "</p>",
            "<p>",
            "  Here‚Äôs what it takes to implement a Barchart using Nivo.",
            "  <a href=\"https://codesandbox.io/s/k5853pryrv\"",
            "    >You can try it on CodeSandbox</a",
            "  >",
            "</p>",
            "<iframe",
            "  src=\"https://codesandbox.io/embed/k5853pryrv?codemirror=1&amp;view=split\"",
            "  style=\"width:100%; height:500px; borderüòÆ; border-radius: 4px; overflow:hidden;\"",
            "  sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\"",
            ">",
            "</iframe>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb20\"",
            "  data-caption=\"Bar chart built in VX\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb20-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> data <span class=\"op\" style=\"color: #666666;\">=</span> [</a>",
            "<a class=\"sourceLine\" id=\"cb20-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">quarter</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">1</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">earnings</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">13000</span> <span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">quarter</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">2</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">earnings</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">16500</span> <span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">quarter</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">3</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">earnings</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">14250</span> <span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">quarter</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">4</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">earnings</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">19000</span> <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">]<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb20-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> App <span class=\"op\" style=\"color: #666666;\">=</span> (<span class=\"op\" style=\"color: #666666;\">{</span> width <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"dv\" style=\"color: #40a070;\">400</span><span class=\"op\" style=\"color: #666666;\">,</span> height <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"dv\" style=\"color: #40a070;\">400</span> <span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> xMax <span class=\"op\" style=\"color: #666666;\">=</span> width<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> yMax <span class=\"op\" style=\"color: #666666;\">=</span> height <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"dv\" style=\"color: #40a070;\">120</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb20-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> x <span class=\"op\" style=\"color: #666666;\">=</span> d <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">quarter</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> y <span class=\"op\" style=\"color: #666666;\">=</span> d <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">earnings</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb20-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// scales</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> xScale <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">scaleBand</span>(<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">rangeRound</span><span class=\"op\" style=\"color: #666666;\">:</span> [<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> xMax]<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">domain</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">data</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(<span class=\"op\" style=\"color: #666666;\">:</span><span class=\"dt\" style=\"color: #902000;\">satisfied</span><span class=\"op\" style=\"color: #666666;\">:,</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">padding</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"fl\" style=\"color: #40a070;\">0.4</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> yScale <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">scaleLinear</span>(<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">rangeRound</span><span class=\"op\" style=\"color: #666666;\">:</span> [yMax<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">0</span>]<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">domain</span><span class=\"op\" style=\"color: #666666;\">:</span> [<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"at\" style=\"color: #7d9029;\">max</span>(data<span class=\"op\" style=\"color: #666666;\">,</span> y)]</a>",
            "<a class=\"sourceLine\" id=\"cb20-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb20-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb20-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>div style<span class=\"op\" style=\"color: #666666;\">={</span>styles<span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>h1<span class=\"op\" style=\"color: #666666;\">&gt;</span>VX basic demo&lt;/h1<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>svg width<span class=\"op\" style=\"color: #666666;\">={</span>width<span class=\"op\" style=\"color: #666666;\">}</span> height<span class=\"op\" style=\"color: #666666;\">={</span>height<span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"va\" style=\"color: #19177c;\">data</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>((d<span class=\"op\" style=\"color: #666666;\">,</span> i) <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> barHeight <span class=\"op\" style=\"color: #666666;\">=</span> yMax <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"at\" style=\"color: #7d9029;\">yScale</span>(<span class=\"at\" style=\"color: #7d9029;\">y</span>(d))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb20-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>Bar</a>",
            "<a class=\"sourceLine\" id=\"cb20-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">              width<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"va\" style=\"color: #19177c;\">xScale</span>.<span class=\"at\" style=\"color: #7d9029;\">bandwidth</span>()<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">              height<span class=\"op\" style=\"color: #666666;\">={</span>barHeight<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-36\" title=\"36\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">              x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"at\" style=\"color: #7d9029;\">xScale</span>(<span class=\"at\" style=\"color: #7d9029;\">x</span>(d))<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-37\" title=\"37\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">              y<span class=\"op\" style=\"color: #666666;\">={</span>yMax <span class=\"op\" style=\"color: #666666;\">-</span> barHeight<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-38\" title=\"38\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">              data<span class=\"op\" style=\"color: #666666;\">={{</span> <span class=\"dt\">x</span><span class=\"op\">:</span> <span class=\"at\">x</span>(d)<span class=\"op\">,</span> <span class=\"dt\">y</span><span class=\"op\">:</span> <span class=\"at\">y</span>(d) <span class=\"op\">}}</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-39\" title=\"39\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb20-40\" title=\"40\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-41\" title=\"41\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-42\" title=\"42\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      &lt;/svg<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-43\" title=\"43\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-44\" title=\"44\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-45\" title=\"45\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">};</span></a></code></pre>",
            "</div>",
            "<p>",
            "  Move involved than previous examples, but means you have more control and",
            "  fight the library less often. VX does the tedious stuff for you, so you",
            "  can focus on the stuff that matters.",
            "</p>",
            "<p>",
            "  This code creates value accessor methods, D3 scales, then iterates over",
            "  an array of <code style=\"white-space: pre-wrap;\">data</code> and renders",
            "  a <code style=\"white-space: pre-wrap;\">&lt;Bar</code> for each. The bar",
            "  gets a bunch of props.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "When you shouldn't use a library",
          "lectureLines": [
            "<h2 id=\"when-not-to-use-a-library\">When not to use a library</h2>",
            "<p>",
            "  Libraries are great. Quick to get started, quick to keep using, great for",
            "  common usecases.",
            "</p>",
            "<p>",
            "  Now, if you want to build something custom, something that delights and",
            "  astounds, something that makes your users love you ‚Ä¶ You‚Äôre gonna have to",
            "  understand how combining React and D3 works under the hood. Whether you",
            "  use a library or not.",
            "</p>",
            "<p>",
            "  A rule of thumb you can use is to consider how custom you want to make",
            "  your visualization. The more customizations, the more likely you are to",
            "  benefit from rolling your own.",
            "</p>",
            "<p>",
            "  Or if you‚Äôve had a lot of practice with rolling your own and it‚Äôs",
            "  literally easier than learning a library.",
            "</p>",
            "<p>",
            "  If you have to customize an existing library, or build your own for the",
            "  team, that‚Äôs what we‚Äôre here for today üòÉ",
            "</p>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "Quickly integrate any D3 code in your React project with Blackbox Components",
      "lectures": [
        {
          "lectureTitle": "The idea behind blackbox components",
          "lectureLines": [
            "<h1 id=\"blackbox-components\">",
            "  Quickly integrate any D3 code in your React project with Blackbox",
            "  Components",
            "</h1>",
            "<p>",
            "  Blackbox components are the quickest way to integrate D3 and React. You",
            "  can think of them as wrappers around D3 visualizations.",
            "</p>",
            "<p>",
            "  With the blackbox approach, you can take any D3 example from the",
            "  internets or your brain, wrap it in a React component, and it Just",
            "  Works‚Ñ¢. This is great when you‚Äôre in a hurry, but comes with a big",
            "  caveat: You‚Äôre letting D3 control some of the DOM.",
            "</p>",
            "<p>",
            "  D3 controlling the DOM is <em>okay</em>, but it means React can‚Äôt help",
            "  you there. That‚Äôs why it‚Äôs called a Blackbox ‚Äì¬†React can‚Äôt see inside.",
            "</p>",
            "<p>",
            "  No render engine, no tree diffing, no dev tools to inspect what‚Äôs going.",
            "  Just a blob of DOM elements.",
            "</p>",
            "<p>",
            "  Okay for small components or when you‚Äôre prototyping, but I‚Äôve had people",
            "  come to my workshops and say",
            "  <em",
            "    >‚ÄúWe built our whole app with the blackbox approach. It takes a few",
            "    seconds to re-render when you click something. Please help‚Äù</em",
            "  >",
            "</p>",
            "<p>ü§î</p>",
            "<p>Here‚Äôs how it works:</p>",
            "<ul>",
            "  <li>React renders an anchor element</li>",
            "  <li>D3 hijacks it and puts stuff in</li>",
            "</ul>",
            "<p>",
            "  You manually re-render on props and state changes. Throwing away and",
            "  rebuilding the entire DOM subtree on each render. With complex",
            "  visualizations this becomes a huge hit on performance.",
            "</p>",
            "<p>Use this technique sparingly.</p>"
          ]
        },
        {
          "lectureTitle": "A quick blackbox example - a D3 axis",
          "lectureLines": [
            "<h2 id=\"blackbox-axis\">A quick blackbox example - a D3 axis</h2>",
            "<p>",
            "  Let‚Äôs build an axis component. Axes are the perfect use-case for blackbox",
            "  components. D3 comes with an axis generator bundled inside, and they‚Äôre",
            "  difficult to build from scratch.",
            "</p>",
            "<p>",
            "  They don‚Äôt <em>look</em> difficult, but there are many tiny details you",
            "  have to get <em>just right</em>.",
            "</p>",
            "<p>",
            "  D3‚Äôs axis generator takes a scale and some configuration to render an",
            "  axis for us. The code looks like this:",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb21\"",
            "  data-caption=\"Vanilla D3 axis\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb21-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> scale <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">scaleLinear</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb21-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">domain</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">10</span>])</a>",
            "<a class=\"sourceLine\" id=\"cb21-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">range</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">200</span>])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb21-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> axis <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">axisBottom</span>(scale)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb21-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb21-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">select</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;svg&#39;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb21-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  .<span class=\"at\" style=\"color: #7d9029;\">append</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;g&#39;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb21-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;transform&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;translate(10, 30)&#39;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb21-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  .<span class=\"at\" style=\"color: #7d9029;\">call</span>(axis)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  You can",
            "  <a href=\"https://codesandbox.io/s/v6ovkow8q3\"",
            "    >try it out on CodeSandbox</a",
            "  >.",
            "</p>",
            "<iframe",
            "  src=\"https://codesandbox.io/embed/v6ovkow8q3?codemirror=1&amp;view=split\"",
            "  style=\"width:100%; height:500px; borderüòÆ; border-radius: 4px; overflow:hidden;\"",
            "  sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\"",
            ">",
            "</iframe>",
            "<p>",
            "  If this code doesn‚Äôt make any sense, don‚Äôt worry. There‚Äôs a bunch of D3",
            "  to learn, and I‚Äôll help you out. If it‚Äôs obvious, you‚Äôre a pro! This book",
            "  will be much quicker to read.",
            "</p>",
            "<p>",
            "  We start with a linear scale that has a domain",
            "  <code style=\"white-space: pre-wrap;\">[0, 10]</code> and a range",
            "  <code style=\"white-space: pre-wrap;\">[0, 200]</code>. Scales are like",
            "  mathematical functions that map a domain to a range. In this case,",
            "  calling <code style=\"white-space: pre-wrap;\">scale(0)</code> returns",
            "  <code style=\"white-space: pre-wrap;\">0</code>,",
            "  <code style=\"white-space: pre-wrap;\">scale(5)</code> returns",
            "  <code style=\"white-space: pre-wrap;\">100</code>,",
            "  <code style=\"white-space: pre-wrap;\">scale(10)</code> returns",
            "  <code style=\"white-space: pre-wrap;\">200</code>. Just like a linear",
            "  function from math class ‚Äì¬†y = kx + n.",
            "</p>",
            "<p>",
            "  We create an axis generator with",
            "  <code style=\"white-space: pre-wrap;\">axisBottom</code>, which takes a",
            "  <code style=\"white-space: pre-wrap;\">scale</code> and creates a",
            "  <code style=\"white-space: pre-wrap;\">bottom</code> oriented axis ‚Äì",
            "  numbers below the line. You can also change settings for the number of",
            "  ticks, their sizing, spacing, and so on.",
            "</p>",
            "<p>",
            "  Equipped with an",
            "  <code style=\"white-space: pre-wrap;\">axis</code> generator, we",
            "  <code style=\"white-space: pre-wrap;\">select</code> the",
            "  <code style=\"white-space: pre-wrap;\">svg</code> element, append a",
            "  grouping element, use a",
            "  <code style=\"white-space: pre-wrap;\">transform</code> attribute to move",
            "  it <code style=\"white-space: pre-wrap;\">10</code>px to the right and",
            "  <code style=\"white-space: pre-wrap;\">30</code>px down, and invoke the",
            "  generator with <code style=\"white-space: pre-wrap;\">.call()</code>.",
            "</p>",
            "<p>It creates a small axis:</p>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/simple-axis.png\"",
            "    alt=\"Simple axis\"",
            "  />",
            "  <figcaption>Simple axis</figcaption>",
            "</figure>",
            "<p>",
            "  Play around with it on",
            "  <a href=\"https://codepen.io/swizec/pen/YGoYBM\">Codesandbox</a>. Change",
            "  the scale type, play with axis orientation. Use",
            "  <code style=\"white-space: pre-wrap;\">.ticks</code> on the axis to change",
            "  how many show up. Have some fun üòÉ",
            "</p>"
          ]
        },
        {
          "lectureTitle": "A React + D3 axis",
          "lectureLines": [
            "<h2 id=\"a-quick-blackbox-example---a-reactd3-axis\">",
            "  A quick blackbox example - a React+D3 axis",
            "</h2>",
            "<p>",
            "  Now let‚Äôs say we want to use that same axis code but as a React",
            "  component. The simplest way is to use a blackbox component approach like",
            "  this:",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb22\"",
            "  data-caption=\"React blackbox axis\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb22-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Axis <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> Component <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb22-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  gRef <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">createRef</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb22-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb22-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">componentDidMount</span>() <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">d3render</span>() <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb22-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">componentDidUpdate</span>() <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">d3render</span>() <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb22-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb22-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">d3render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb22-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> scale <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">scaleLinear</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb22-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    .<span class=\"at\" style=\"color: #7d9029;\">domain</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">10</span>])</a>",
            "<a class=\"sourceLine\" id=\"cb22-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    .<span class=\"at\" style=\"color: #7d9029;\">range</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">200</span>])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb22-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> axis <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">axisBottom</span>(scale)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb22-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb22-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">select</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">gRef</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb22-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">call</span>(axis)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb22-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb22-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb22-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb22-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">&lt;</span>g transform<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;translate(10, 30)&quot;</span> ref<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">gRef</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb22-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb22-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  So much code! Worth it for the other benefits of using React in your",
            "  dataviz. You‚Äôll see üòÉ",
            "</p>",
            "<p>",
            "  We created an <code style=\"white-space: pre-wrap;\">Axis</code> component",
            "  that extends React‚Äôs base",
            "  <code style=\"white-space: pre-wrap;\">Component</code> class. We can‚Äôt use",
            "  functional components because we need lifecycle hooks.",
            "</p>",
            "<p>",
            "  Our component has a",
            "  <code style=\"white-space: pre-wrap;\">render</code> method. It returns a",
            "  grouping element (<code style=\"white-space: pre-wrap;\">g</code>) moved",
            "  10px to the right and 30px down using the",
            "  <code style=\"white-space: pre-wrap;\">transform</code> attribute. Same as",
            "  before.",
            "</p>",
            "<p>",
            "  A React ref saved in",
            "  <code style=\"white-space: pre-wrap;\">this.gRef</code> and passed into our",
            "  <code style=\"white-space: pre-wrap;\">&lt;g&gt;</code> element with",
            "  <code style=\"white-space: pre-wrap;\">ref</code> lets us talk to the DOM",
            "  node directly. We need this to hand over rendering control to D3.",
            "</p>",
            "<p>",
            "  The <code style=\"white-space: pre-wrap;\">d3render</code> method looks",
            "  familiar. It‚Äôs the same code we used in the vanilla D3 example. Scale,",
            "  axis, select, call. Only difference is that instead of selecting",
            "  <code style=\"white-space: pre-wrap;\">svg</code> and appending a",
            "  <code style=\"white-space: pre-wrap;\">g</code> element, we select the",
            "  <code style=\"white-space: pre-wrap;\">g</code> element rendered by React",
            "  and use that.",
            "</p>",
            "<p>",
            "  We use <code style=\"white-space: pre-wrap;\">componentDidUpdate</code> and",
            "  <code style=\"white-space: pre-wrap;\">componentDidMount</code> to keep our",
            "  render up to date. Ensures that our axis re-renders every time React‚Äôs",
            "  engine decides to render our component.",
            "</p>",
            "<p>That wasn‚Äôt so bad, was it?</p>",
            "<p>",
            "  <a href=\"https://codesandbox.io/s/3xy2jr1y5m\"",
            "    >Try it out on Codesandbox</a",
            "  >.",
            "</p>",
            "<iframe",
            "  src=\"https://codesandbox.io/embed/3xy2jr1y5m?codemirror=1&amp;view=split\"",
            "  style=\"width:100%; height:500px; borderüòÆ; border-radius: 4px; overflow:hidden;\"",
            "  sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\"",
            ">",
            "</iframe>",
            "<p>",
            "  You can make the axis more useful by getting positioning, scale, and",
            "  orientation from props. We‚Äôll do that in our big project.",
            "</p>",
            "<h3 id=\"practical-exercise\">Practical exercise</h3>",
            "<p>",
            "  Try implementing those as an exercise. Make the axis more reusable with",
            "  some carefully placed props.",
            "</p>",
            "<p>",
            "  Here‚Äôs my solution, if you get stuck üëâ",
            "  <a href=\"https://codesandbox.io/s/5ywlj6jn4l\"",
            "    >https://codesandbox.io/s/5ywlj6jn4l</a",
            "  >",
            "</p>",
            "<iframe",
            "  src=\"https://codesandbox.io/embed/5ywlj6jn4l?codemirror=1&amp;view=split\"",
            "  style=\"width:100%; height:500px; borderüòÆ; border-radius: 4px; overflow:hidden;\"",
            "  sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\"",
            ">",
            "</iframe>"
          ]
        },
        {
          "lectureTitle": "A D3 blackbox higher order component - HOC",
          "lectureLines": [
            "<h1 id=\"blackbox-hoc\">A D3 blackbox higher order component ‚Äì HOC</h1>",
            "<p>",
            "  After that example you might think this is hella tedious to implement",
            "  every time. You‚Äôd be right!",
            "</p>",
            "<p>",
            "  Good thing you can abstract it all away with a higher order component ‚Äì¬†a",
            "  HOC. Now this is something I should open source (just do it already), but",
            "  I want to show you how it works so you can learn about the HOC pattern.",
            "</p>",
            "<p>",
            "  Higher order components are great when you see multiple React components",
            "  sharing similar code. In our case, that shared code is:",
            "</p>",
            "<ul>",
            "  <li>rendering an anchor element</li>",
            "  <li>calling D3‚Äôs render on updates</li>",
            "</ul>",
            "<p>",
            "  With a HOC, we can abstract that away into a sort of",
            "  <a href=\"https://en.wikipedia.org/wiki/Factory_method_pattern\"",
            "    >object factory</a",
            "  >. It‚Äôs an old concept making a comeback now that JavaScript has classes.",
            "</p>",
            "<p>",
            "  Think of our HOC as a function that takes some params and creates a class",
            "  ‚Äì a React component. Another way to think about HOCs is that they‚Äôre",
            "  React components wrapping other React components and a function that",
            "  makes it easy.",
            "</p>",
            "<p>",
            "  A HOC for D3 blackbox integration, called",
            "  <code style=\"white-space: pre-wrap;\">D3blackbox</code>, looks like like",
            "  this:",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb23\"",
            "  data-caption=\"React blackbox HOC\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb23-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span> <span class=\"at\" style=\"color: #7d9029;\">D3blackbox</span>(D3render) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb23-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Blackbox <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb23-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    anchor <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">createRef</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb23-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb23-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">componentDidMount</span>() <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"va\" style=\"color: #19177c;\">D3render</span>.<span class=\"at\" style=\"color: #7d9029;\">call</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>)<span class=\"op\" style=\"color: #666666;\">;</span> <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb23-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">componentDidUpdate</span>() <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"va\" style=\"color: #19177c;\">D3render</span>.<span class=\"at\" style=\"color: #7d9029;\">call</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>) <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb23-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb23-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb23-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb23-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">&lt;</span>g transform<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"vs\" style=\"color: #4070a0;\">`translate(</span><span class=\"sc\" style=\"color: #4070a0;\">${</span>x<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">, </span><span class=\"sc\" style=\"color: #4070a0;\">${</span>y<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">)`</span><span class=\"op\" style=\"color: #666666;\">}</span> ref<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">anchor</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb23-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb23-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb23-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>You‚Äôll recognize most of that code from earlier.</p>",
            "<p>",
            "  We have",
            "  <code style=\"white-space: pre-wrap;\">componentDidMount</code> and<code",
            "    style=\"white-space: pre-wrap;\"",
            "    >componentDidUpdate</code",
            "  >",
            "  lifecycle hooks that call",
            "  <code style=\"white-space: pre-wrap;\">D3render</code> on component",
            "  updates. <code style=\"white-space: pre-wrap;\">render</code> renders a",
            "  grouping element as an anchor with a ref so D3 can use it to render stuff",
            "  into.",
            "</p>",
            "<p>",
            "  Because <code style=\"white-space: pre-wrap;\">D3render</code> is no longer",
            "  a part of our component, we have to use",
            "  <code style=\"white-space: pre-wrap;\">.call</code> to give it the scope we",
            "  want: this class, or rather",
            "  <code style=\"white-space: pre-wrap;\">this</code> instance of the",
            "  <code style=\"white-space: pre-wrap;\">Blackbox</code> class.",
            "</p>",
            "<p>",
            "  We‚Äôve also made some changes that make",
            "  <code style=\"white-space: pre-wrap;\">render</code> more flexible. Instead",
            "  of hardcoding the",
            "  <code style=\"white-space: pre-wrap;\">translate()</code> transformation,",
            "  we take <code style=\"white-space: pre-wrap;\">x</code> and",
            "  <code style=\"white-space: pre-wrap;\">y</code> props.",
            "  <code style=\"white-space: pre-wrap;\">{ x, y } = this.props</code> takes",
            "  <code style=\"white-space: pre-wrap;\">x</code> and",
            "  <code style=\"white-space: pre-wrap;\">y</code> out of",
            "  <code style=\"white-space: pre-wrap;\">this.props</code> using object",
            "  decomposition, and we used ES6 string templates for the",
            "  <code style=\"white-space: pre-wrap;\">transform</code> attribute.",
            "</p>",
            "<p>",
            "  Consult the <a href=\"https://es6cheatsheet.com/\">ES6 cheatsheet</a> for",
            "  details on the syntax.",
            "</p>",
            "<p>",
            "  Using our new <code style=\"white-space: pre-wrap;\">D3blackbox</code> HOC",
            "  to make an axis looks like this:",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb24\"",
            "  data-caption=\"React blackbox HOC\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb24-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> Axis <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">D3blackbox</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span> () <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb24-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> scale <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">scaleLinear</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb24-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">              .<span class=\"at\" style=\"color: #7d9029;\">domain</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">10</span>])</a>",
            "<a class=\"sourceLine\" id=\"cb24-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">              .<span class=\"at\" style=\"color: #7d9029;\">range</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">200</span>])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb24-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> axis <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">axisBottom</span>(scale)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb24-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb24-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">select</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">anchor</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb24-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">call</span>(axis)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb24-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  You know this code! We copy pasted our axis rendering code from before,",
            "  wrapped it in a function, and passed it into",
            "  <code style=\"white-space: pre-wrap;\">D3blackbox</code>. Now it‚Äôs a React",
            "  component.",
            "</p>",
            "<p>",
            "  Play with this example on",
            "  <a href=\"https://codesandbox.io/s/5v21r0wo4x\">Codesandbox, here</a>.",
            "</p>",
            "<iframe",
            "  src=\"https://codesandbox.io/embed/5v21r0wo4x?codemirror=1&amp;view=split\"",
            "  style=\"width:100%; height:500px; borderüòÆ; border-radius: 4px; overflow:hidden;\"",
            "  sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\"",
            ">",
            "</iframe>"
          ]
        },
        {
          "lectureTitle": "D3blackbox magic trick - render anything in 30 seconds",
          "lectureLines": [
            "<h2 id=\"magic-trick\">",
            "  D3blackbox magic trick ‚Äì render anything in 30 seconds",
            "</h2>",
            "<p>",
            "  Let me show you a magic trick. 30 seconds to take a random D3 piece of",
            "  code and add it to your React project.",
            "</p>",
            "<p>We can try it on the example barchart from before.</p>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/barchart-example.png\"",
            "    alt=\"An example D3 barchart\"",
            "  />",
            "  <figcaption>An example D3 barchart</figcaption>",
            "</figure>",
            "<p>",
            "  You can",
            "  <a",
            "    href=\"https://cdn.rawgit.com/mbostock/3885304/raw/a91f37f5f4b43269df3dbabcda0090310c05285d/index.html\"",
            "    >try it online</a",
            "  >. When you hover on a bar, it changes color. Pretty neat.",
            "</p>",
            "<p>",
            "  I recommend you follow along in a CodeSandbox. If you fork the",
            "  <a href=\"https://codesandbox.io/s/5v21r0wo4x\"",
            "    >react-d3-axis-hoc CodeSandbox</a",
            "  >",
            "  that will be easiest.",
            "</p>",
            "<iframe",
            "  src=\"https://codesandbox.io/embed/5v21r0wo4x?codemirror=1&amp;view=split\"",
            "  style=\"width:100%; height:500px; borderüòÆ; border-radius: 4px; overflow:hidden;\"",
            "  sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\"",
            ">",
            "</iframe>",
            "<p>",
            "  You should already have the",
            "  <code style=\"white-space: pre-wrap;\">D3blackbox</code> HOC. If you don‚Äôt,",
            "  make a new file and paste it in.",
            "</p>",
            "<p>",
            "  With your HOC ready, create a new file in CodeSandbox. Call it",
            "  <code style=\"white-space: pre-wrap;\">Barchart.js</code>.",
            "</p>",
            "<p>Add your imports:</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb25\"",
            "  data-caption=\"Import dependencies\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb25-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;react&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb25-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> D3blackbox <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./D3blackbox&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb25-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"im\">as</span> d3 <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;d3&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>This gives you React, our HOC, and D3.</p>",
            "<p>",
            "  Now right-click view code on that barchart and copy the code. Wrap it in",
            "  a <code style=\"white-space: pre-wrap;\">D3blackbox</code> call. Like this:",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb26\"",
            "  data-caption=\"Wrap D3 code in D3blackbox\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb26-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> Barchart <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">D3blackbox</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span> () <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb26-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">var</span> svg <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">select</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;svg&quot;</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb26-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      margin <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"dt\" style=\"color: #902000;\">top</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">20</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">right</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">20</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">bottom</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">30</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">left</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">40</span><span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb26-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      width <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">+</span><span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;width&quot;</span>) <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"va\" style=\"color: #19177c;\">margin</span>.<span class=\"at\" style=\"color: #7d9029;\">left</span> <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"va\" style=\"color: #19177c;\">margin</span>.<span class=\"at\" style=\"color: #7d9029;\">right</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb26-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      height <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">+</span><span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;height&quot;</span>) <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"va\" style=\"color: #19177c;\">margin</span>.<span class=\"at\" style=\"color: #7d9029;\">top</span> <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"va\" style=\"color: #19177c;\">margin</span>.<span class=\"at\" style=\"color: #7d9029;\">bottom</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb26-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb26-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">var</span> x <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">scaleBand</span>().<span class=\"at\" style=\"color: #7d9029;\">rangeRound</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> width]).<span class=\"at\" style=\"color: #7d9029;\">padding</span>(<span class=\"fl\" style=\"color: #40a070;\">0.1</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb26-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      y <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">scaleLinear</span>().<span class=\"at\" style=\"color: #7d9029;\">rangeRound</span>([height<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">0</span>])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb26-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb26-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">var</span> g <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">append</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;g&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb26-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;transform&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;translate(&quot;</span> <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"va\" style=\"color: #19177c;\">margin</span>.<span class=\"at\" style=\"color: #7d9029;\">left</span> <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;,&quot;</span> <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"va\" style=\"color: #19177c;\">margin</span>.<span class=\"at\" style=\"color: #7d9029;\">top</span> <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"st\" style=\"color: #4070a0;\">&quotüòâ&quot;</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb26-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb26-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">tsv</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;data.tsv&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb26-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">frequency</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">+</span><span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">frequency</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb26-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> d<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb26-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">},</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(error<span class=\"op\" style=\"color: #666666;\">,</span> data) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb26-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (error) <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">throw</span> error<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb26-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb26-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">x</span>.<span class=\"at\" style=\"color: #7d9029;\">domain</span>(<span class=\"va\" style=\"color: #19177c;\">data</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">letter</span><span class=\"op\" style=\"color: #666666;\">;</span> <span class=\"op\" style=\"color: #666666;\">}</span>))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb26-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">y</span>.<span class=\"at\" style=\"color: #7d9029;\">domain</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">max</span>(data<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">frequency</span><span class=\"op\" style=\"color: #666666;\">;</span> <span class=\"op\" style=\"color: #666666;\">}</span>)])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb26-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb26-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">g</span>.<span class=\"at\" style=\"color: #7d9029;\">append</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;g&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb26-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;class&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;axis axis--x&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb26-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;transform&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;translate(0,&quot;</span> <span class=\"op\" style=\"color: #666666;\">+</span> height <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"st\" style=\"color: #4070a0;\">&quotüòâ&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb26-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        .<span class=\"at\" style=\"color: #7d9029;\">call</span>(<span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">axisBottom</span>(x))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb26-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb26-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">g</span>.<span class=\"at\" style=\"color: #7d9029;\">append</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;g&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb26-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;class&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;axis axis--y&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb26-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        .<span class=\"at\" style=\"color: #7d9029;\">call</span>(<span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">axisLeft</span>(y).<span class=\"at\" style=\"color: #7d9029;\">ticks</span>(<span class=\"dv\" style=\"color: #40a070;\">10</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;%&quot;</span>))</a>",
            "<a class=\"sourceLine\" id=\"cb26-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">append</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;text&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb26-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;transform&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;rotate(-90)&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb26-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;y&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">6</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb26-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;dy&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;0.71em&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb26-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;text-anchor&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;end&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb26-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        .<span class=\"at\" style=\"color: #7d9029;\">text</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;Frequency&quot;</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb26-36\" title=\"36\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb26-37\" title=\"37\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">g</span>.<span class=\"at\" style=\"color: #7d9029;\">selectAll</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;.bar&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb26-38\" title=\"38\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">data</span>(data)</a>",
            "<a class=\"sourceLine\" id=\"cb26-39\" title=\"39\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">enter</span>().<span class=\"at\" style=\"color: #7d9029;\">append</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;rect&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb26-40\" title=\"40\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;class&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;bar&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb26-41\" title=\"41\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;x&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"at\" style=\"color: #7d9029;\">x</span>(<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">letter</span>)<span class=\"op\" style=\"color: #666666;\">;</span> <span class=\"op\" style=\"color: #666666;\">}</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb26-42\" title=\"42\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;y&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"at\" style=\"color: #7d9029;\">y</span>(<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">frequency</span>)<span class=\"op\" style=\"color: #666666;\">;</span> <span class=\"op\" style=\"color: #666666;\">}</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb26-43\" title=\"43\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;width&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">x</span>.<span class=\"at\" style=\"color: #7d9029;\">bandwidth</span>())</a>",
            "<a class=\"sourceLine\" id=\"cb26-44\" title=\"44\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;height&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> height <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"at\" style=\"color: #7d9029;\">y</span>(<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">frequency</span>)<span class=\"op\" style=\"color: #666666;\">;</span> <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb26-45\" title=\"45\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb26-46\" title=\"46\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb26-47\" title=\"47\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb26-48\" title=\"48\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> Barchart<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  That should throw some errors. We have to change the",
            "  <code style=\"white-space: pre-wrap;\">d3.select</code> and get",
            "  <code style=\"white-space: pre-wrap;\">width</code> and",
            "  <code style=\"white-space: pre-wrap;\">height</code> from props.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb27\"",
            "  data-caption=\"Change where D3 renders\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb27-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> Barchart <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">D3blackbox</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span> () <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb27-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Delete the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb27-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">var</span> svg <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">select</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;svg&quot;</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb27-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb27-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb27-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">var</span> svg <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">select</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">anchor</span>.<span class=\"at\" style=\"color: #7d9029;\">current</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb27-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb27-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      margin <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"dt\" style=\"color: #902000;\">top</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">20</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">right</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">20</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">bottom</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">30</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">left</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">40</span><span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb27-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Delete the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb27-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      width <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">+</span><span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;width&quot;</span>) <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"va\" style=\"color: #19177c;\">margin</span>.<span class=\"at\" style=\"color: #7d9029;\">left</span> <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"va\" style=\"color: #19177c;\">margin</span>.<span class=\"at\" style=\"color: #7d9029;\">right</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb27-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      height <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">+</span><span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;height&quot;</span>) <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"va\" style=\"color: #19177c;\">margin</span>.<span class=\"at\" style=\"color: #7d9029;\">top</span> <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"va\" style=\"color: #19177c;\">margin</span>.<span class=\"at\" style=\"color: #7d9029;\">bottom</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb27-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb27-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb27-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      width <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">+</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">width</span> <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"va\" style=\"color: #19177c;\">margin</span>.<span class=\"at\" style=\"color: #7d9029;\">left</span> <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"va\" style=\"color: #19177c;\">margin</span>.<span class=\"at\" style=\"color: #7d9029;\">right</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb27-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      height <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">+</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">height</span> <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"va\" style=\"color: #19177c;\">margin</span>.<span class=\"at\" style=\"color: #7d9029;\">top</span> <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"va\" style=\"color: #19177c;\">margin</span>.<span class=\"at\" style=\"color: #7d9029;\">bottom</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb27-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a></code></pre>",
            "</div>",
            "<p>",
            "  Most D3 examples use a global",
            "  <code style=\"white-space: pre-wrap;\">svg</code> variable to refer to",
            "  their drawing area ‚Äì¬†the SVG. Change that to the element you want, your",
            "  anchor, and the whole visualization should render in there.",
            "</p>",
            "<p>",
            "  We also replaced reading width and height from the SVG element to getting",
            "  them from props. This makes our component more reusable and better",
            "  follows best practices.",
            "</p>",
            "<p>",
            "  Next step is to change where our barchart gets its data. Gotta use the",
            "  public URL.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb28\"",
            "  data-caption=\"Change data URL\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb28-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">//Delete the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb28-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">tsv</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;data.tsv&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb28-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb28-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb28-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">tsv</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;https://swizec.github.io/dl/barchart.tsv&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb28-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb28-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">frequency</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">+</span><span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">frequency</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb28-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> d<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb28-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Delete the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb28-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">},</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(error<span class=\"op\" style=\"color: #666666;\">,</span> data) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb28-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (error) <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">throw</span> error<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb28-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb28-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb28-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span>).<span class=\"at\" style=\"color: #7d9029;\">then</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(data) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb28-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a></code></pre>",
            "</div>",
            "<p>",
            "  Same link, absolute version. And we updated the callback-based code to",
            "  use the D3v5 promises version. That‚Äôs the most disruptive change going",
            "  from v4 to v5 I believe.",
            "</p>",
            "<p>",
            "  That‚Äôs it. You now have a Barchart component that renders the example",
            "  barchart from D3‚Äôs docs.",
            "</p>",
            "<p>",
            "  You can use it like this üëá I recommend adding this code to the main App",
            "  component that CodeSandbox creates for you.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb29\"",
            "  data-caption=\"Use the Barchart\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb29-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> Barchart <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./Barchart&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb29-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb29-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb29-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb29-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">&lt;</span>svg width<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;800&quot;</span> height<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;600&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb29-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>Barchart x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">10</span><span class=\"op\" style=\"color: #666666;\">}</span> y<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">10</span><span class=\"op\" style=\"color: #666666;\">}</span> width<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">400</span><span class=\"op\" style=\"color: #666666;\">}</span> height<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">300</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb29-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  &lt;/svg<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb29-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">)</a></code></pre>",
            "</div>",
            "<p>",
            "  But like I said, don‚Äôt use this in production. It‚Äôs great for quick",
            "  prototypes, trying stuff out, or seeing how an existing visualization",
            "  might fit your app.",
            "</p>",
            "<h2 id=\"a-note-about-d3blackbox\">A note about D3blackbox</h2>",
            "<p>",
            "  To make your life easier, I have open sourced my version of the",
            "  D3blackbox HOC. You can read more about it at",
            "  <a href=\"https://d3blackbox.com\">d3blackbox.com</a>",
            "</p>",
            "<p>",
            "  Works the same as the HOC we just built together, adds the anchor ref,",
            "  props, and state to function arguments so it‚Äôs easier to use. No need to",
            "  mess with <code style=\"white-space: pre-wrap;\">this</code> if you don‚Äôt",
            "  want to üòÉ",
            "</p>",
            "<p>Install it from npm:</p>",
            "<pre><code style=\"white-space: pre-wrap;\">$ npm install d3blackbox</code></pre>",
            "<p>Then use it as you would your own HOC:</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb31\"",
            "  data-caption=\"Open source D3blackbox HOC\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb31-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;react&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb31-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> D3blackbox <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;d3blackbox&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb31-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"im\">as</span> d3 <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;d3&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb31-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb31-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> Barchart <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">D3blackbox</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(anchor<span class=\"op\" style=\"color: #666666;\">,</span> props<span class=\"op\" style=\"color: #666666;\">,</span> state) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb31-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> svg <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">select</span>(<span class=\"va\" style=\"color: #19177c;\">anchor</span>.<span class=\"at\" style=\"color: #7d9029;\">current</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb31-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// the rest of your D3 code</span></a>",
            "<a class=\"sourceLine\" id=\"cb31-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb31-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb31-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> Barchart<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  The function you pass into",
            "  <code style=\"white-space: pre-wrap;\">D3blackbox</code> is still your full",
            "  D3 render. Except now you can access important values directly without",
            "  using <code style=\"white-space: pre-wrap;\">this</code>.",
            "</p>",
            "<p>",
            "  You can use my D3blackbox or build your own. What‚Äôs important is that you",
            "  now understand how higher order components work.",
            "</p>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "Build scalable dataviz components with full integration",
      "lectures": [
        {
          "lectureTitle": "The approach",
          "lectureLines": [
            "<h1 id=\"full-feature-integration\">",
            "  Build scalable dataviz components with full integration",
            "</h1>",
            "<p>",
            "  As useful as blackbox components are, we need something better if we want",
            "  to leverage React‚Äôs rendering engine. The blackbox approach in particular",
            "  struggles with scale. The more charts and graphs and visualizations on",
            "  your screen, the slower it gets.",
            "</p>",
            "<p>",
            "  Someone once came to my workshop and said",
            "  <em",
            "    >‚ÄúWe used the blackbox approach and it takes several seconds to",
            "    re-render our dashboard on any change. I‚Äôm here to learn how to do it",
            "    better.‚Äù</em",
            "  >",
            "</p>",
            "<p>",
            "  In our full-feature integration, React does the rendering and D3",
            "  calculates the props.",
            "</p>",
            "<p>",
            "  Our goal is to build controlled components that listen to their props and",
            "  reconcile that with D3‚Äôs desire to use a lot of internal state.",
            "</p>",
            "<p>There are two situations we can find ourselves in:</p>",
            "<ol type=\"1\">",
            "  <li>We know for a fact our component‚Äôs props never change</li>",
            "  <li>We think props could change</li>",
            "</ol>",
            "<p>It‚Äôs easiest to show you with an example.</p>",
            "<p>",
            "  Let‚Äôs build a scatterplot step by step. Take a random array of",
            "  two-dimensional data, render in a loop. Make magic.",
            "</p>",
            "<p>Something like this üëá</p>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/scatterplot.png\"",
            "    alt=\"A simple scatterplot\"",
            "  />",
            "  <figcaption>A simple scatterplot</figcaption>",
            "</figure>",
            "<p>You‚Äôve already built the axes! Copy pasta time.</p>"
          ]
        },
        {
          "lectureTitle": "When props don't change - a scatterplot",
          "lectureLines": [
            "<h2 id=\"props-dont-change\">Props don‚Äôt change</h2>",
            "<p>",
            "  Ignoring props changes makes our life easier, but the component less",
            "  flexible and reusable. Great when you know in advance that there are",
            "  features you don‚Äôt ned to support.",
            "</p>",
            "<p>",
            "  Like, no filtering your data or changing component size üëâ means your D3",
            "  scales don‚Äôt have to change.",
            "</p>",
            "<p>When our props don‚Äôt change, we follow a 2-step integration process:</p>",
            "<ul>",
            "  <li>set up D3 objects as class properties</li>",
            "  <li>",
            "    output SVG in <code style=\"white-space: pre-wrap;\">render()</code>",
            "  </li>",
            "</ul>",
            "<p>",
            "  We don‚Äôt have to worry about updating D3 objects on prop changes. Work",
            "  done üëå",
            "</p>",
            "<h3 id=\"an-unchanging-scatterplot\">An unchanging scatterplot</h3>",
            "<p>",
            "  We‚Äôre building a scatterplot of random data. You can see the",
            "  <a href=\"https://codesandbox.io/s/1zlp4jv494\"",
            "    >final solution on CodeSandbox</a",
            "  >",
            "</p>",
            "<iframe",
            "  src=\"https://codesandbox.io/embed/1zlp4jv494?codemirror=1&amp;view=split\"",
            "  style=\"width:100%; height:500px; borderüòÆ; border-radius: 4px; overflow:hidden;\"",
            "  sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\"",
            ">",
            "</iframe>",
            "<p>Here‚Äôs the approach üëá</p>",
            "<ul>",
            "  <li>stub out the basic setup</li>",
            "  <li>generate random data</li>",
            "  <li>stub out Scatterplot</li>",
            "  <li>set up D3 scales</li>",
            "  <li>render circles for each entry</li>",
            "  <li>add axes</li>",
            "</ul>",
            "<p>",
            "  I recommend creating a new CodeSandbox, or starting a new app with",
            "  create-react-app. They should work the same.",
            "</p>",
            "<h4 id=\"basic-setup\">Basic setup</h4>",
            "<p>",
            "  Make sure you have <code style=\"white-space: pre-wrap;\">d3</code> added",
            "  as a dependency. Then add imports in your",
            "  <code style=\"white-space: pre-wrap;\">App.js</code> file.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb32\"",
            "  data-caption=\"Import files in App.js\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb32-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ./App.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb32-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb32-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"im\">as</span> d3 <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;d3&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb32-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> Scatterplot <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;./Scatterplot&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  Add an <code style=\"white-space: pre-wrap;\">&lt;svg&gt;</code> and render",
            "  a Scatterplot in the render method. This will throw an error because we",
            "  haven‚Äôt defined the Scatterplot yet and that‚Äôs okay.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb33\"",
            "  data-caption=\"Render Scatterplot in App.js\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb33-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ./App.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb33-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb33-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span> <span class=\"at\" style=\"color: #7d9029;\">App</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb33-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb33-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>div className<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;App&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb33-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>h1<span class=\"op\" style=\"color: #666666;\">&gt;</span>Hello CodeSandbox&lt;/h1<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb33-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>h2<span class=\"op\" style=\"color: #666666;\">&gt;</span>Start editing to see some magic happen<span class=\"op\" style=\"color: #666666;\">!</span>&lt;/h2<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb33-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>svg width<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;800&quot;</span> height<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;800&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb33-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>Scatterplot x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">50</span><span class=\"op\" style=\"color: #666666;\">}</span> y<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">50</span><span class=\"op\" style=\"color: #666666;\">}</span> width<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">300</span><span class=\"op\" style=\"color: #666666;\">}</span> height<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">300</span><span class=\"op\" style=\"color: #666666;\">}</span> data<span class=\"op\" style=\"color: #666666;\">={</span>data<span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb33-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      &lt;/svg<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb33-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb33-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb33-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  CodeSandbox adds most of that code by default. If you‚Äôre using",
            "  create-react-app, your App component has different markup. That‚Äôs okay",
            "  too.",
            "</p>",
            "<p>We added this part:</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb34\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb34-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">&lt;</span>svg width<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;800&quot;</span> height<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;800&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb34-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">&lt;</span>Scatterplot x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">50</span><span class=\"op\" style=\"color: #666666;\">}</span> y<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">50</span><span class=\"op\" style=\"color: #666666;\">}</span> width<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">300</span><span class=\"op\" style=\"color: #666666;\">}</span> height<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">300</span><span class=\"op\" style=\"color: #666666;\">}</span> data<span class=\"op\" style=\"color: #666666;\">={</span>data<span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb34-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">&lt;/svg<span class=\"op\" style=\"color: #666666;\">&gt;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  An <code style=\"white-space: pre-wrap;\">&lt;svg&gt;</code> drawing area",
            "  with a width and a height. Inside, a",
            "  <code style=\"white-space: pre-wrap;\">&lt;Scatterplot</code> that‚Äôs",
            "  positioned at <code style=\"white-space: pre-wrap;\">(50, 50)</code> and is",
            "  300px tall and wide. We‚Äôll have to listen to those props when building",
            "  the Scatterplot.",
            "</p>",
            "<p>It also accepts data.</p>",
            "<h4 id=\"random-data\">Random data</h4>",
            "<p>",
            "  We‚Äôre using a line of code to generate data for our scatterplot. Put it",
            "  in App.js. Either globally or within the App function. Doesn‚Äôt matter",
            "  because this is an example.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb35\"",
            "  data-caption=\"Generate random data\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb35-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> data <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">range</span>(<span class=\"dv\" style=\"color: #40a070;\">100</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb35-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">               .<span class=\"at\" style=\"color: #7d9029;\">map</span>(_ <span class=\"op\" style=\"color: #666666;\">=&gt;</span> [<span class=\"va\" style=\"color: #19177c;\">Math</span>.<span class=\"at\" style=\"color: #7d9029;\">random</span>()<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">Math</span>.<span class=\"at\" style=\"color: #7d9029;\">random</span>()])<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  <code style=\"white-space: pre-wrap;\">d3.range</code> returns a counting",
            "  array from 0 to 100. Think",
            "  <code style=\"white-space: pre-wrap;\">[1,2,3,4 ...]</code>.",
            "</p>",
            "<p>",
            "  We iterate over this array and return a pair of random numbers for each",
            "  entry. These will be our X and Y coordinates.",
            "</p>",
            "<h4 id=\"scatterplot\">Scatterplot</h4>",
            "<p>",
            "  Our scatterplot goes in a new",
            "  <code style=\"white-space: pre-wrap;\">Scatterplot.js</code> file. Starts",
            "  with imports and an empty React component.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb36\"",
            "  data-caption=\"Scatterplot stub\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb36-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ./Scatterplot.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb36-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;react&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb36-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"im\">as</span> d3 <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;d3&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb36-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb36-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Scatterplot <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb36-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb36-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb36-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y<span class=\"op\" style=\"color: #666666;\">,</span> data<span class=\"op\" style=\"color: #666666;\">,</span> height <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb36-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb36-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb36-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>g transform<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"vs\" style=\"color: #4070a0;\">`translate(</span><span class=\"sc\" style=\"color: #4070a0;\">${</span>x<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">, </span><span class=\"sc\" style=\"color: #4070a0;\">${</span>y<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">)`</span><span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb36-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb36-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      &lt;/g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb36-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb36-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb36-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb36-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb36-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> Scatterplot<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  Import dependencies, create a",
            "  <code style=\"white-space: pre-wrap;\">Scatterplot</code> component, render",
            "  a grouping element moved to the correct",
            "  <code style=\"white-space: pre-wrap;\">x</code> and",
            "  <code style=\"white-space: pre-wrap;\">y</code> position. Nothing too",
            "  strange yet.",
            "</p>",
            "<h4 id=\"d3-scales\">D3 scales</h4>",
            "<p>",
            "  Now we define D3 scales as component properties. We‚Äôre using the class",
            "  field syntax that‚Äôs common in React projects.",
            "</p>",
            "<p>",
            "  Technically a Babel plugin, but comes by default with CodeSandbox React",
            "  projects and create-react-app setup. As far as I can tell, it‚Äôs a common",
            "  way to write React components.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb37\"",
            "  data-caption=\"Add D3 scales\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb37-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ./Scatterplot.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb37-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Scatterplot <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb37-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  xScale <span class=\"op\" style=\"color: #666666;\">=</span> d3</a>",
            "<a class=\"sourceLine\" id=\"cb37-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">scaleLinear</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb37-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">domain</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">1</span>])</a>",
            "<a class=\"sourceLine\" id=\"cb37-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">range</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">width</span>])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb37-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  yScale <span class=\"op\" style=\"color: #666666;\">=</span> d3</a>",
            "<a class=\"sourceLine\" id=\"cb37-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">scaleLinear</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb37-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">domain</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">1</span>])</a>",
            "<a class=\"sourceLine\" id=\"cb37-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">range</span>([<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">height</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">0</span>])<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  We‚Äôre defining",
            "  <code style=\"white-space: pre-wrap;\">this.xScale</code> and",
            "  <code style=\"white-space: pre-wrap;\">this.yScale</code> as linear scales.",
            "  Their domains go from 0 to 1 because that‚Äôs what Math.random returns and",
            "  their ranges describe the size of our scatterplot component.",
            "</p>",
            "<p>",
            "  Idea being that these two scales will help us take those tiny variations",
            "  in datapoint coordinates and explode them up to the full size of our",
            "  scatterplot. Without this, they‚Äôd overlap and we wouldn‚Äôt see anything.",
            "</p>",
            "<h4 id=\"circles-for-each-entry\">Circles for each entry</h4>",
            "<p>",
            "  Rendering our data points is a matter of looping over the data and",
            "  rendering a",
            "  <code style=\"white-space: pre-wrap;\">&lt;circle&gt;</code> for each",
            "  entry. Using our scales to define positioning.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb38\"",
            "  data-caption=\"Loop through data and render circles\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb38-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ./Scatterplot.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb38-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb38-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb38-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">&lt;</span>g transform<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"vs\" style=\"color: #4070a0;\">`translate(</span><span class=\"sc\" style=\"color: #4070a0;\">${</span>x<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">, </span><span class=\"sc\" style=\"color: #4070a0;\">${</span>y<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">)`</span><span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb38-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"va\" style=\"color: #19177c;\">data</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(([x<span class=\"op\" style=\"color: #666666;\">,</span> y]) <span class=\"op\" style=\"color: #666666;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb38-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>circle cx<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">xScale</span>(<span class=\"op\" style=\"color: #666666;\">:</span><span class=\"dt\" style=\"color: #902000;\">satisfied</span><span class=\"op\" style=\"color: #666666;\">:}</span> cy<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">yScale</span>(y)<span class=\"op\" style=\"color: #666666;\">}</span> r<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;5&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb38-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    ))<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb38-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  &lt;/g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb38-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  In the <code style=\"white-space: pre-wrap;\">return</code> statement of",
            "  our <code style=\"white-space: pre-wrap;\">render</code> render method, we",
            "  add a <code style=\"white-space: pre-wrap;\">data.map</code> with an",
            "  iterator method. This method takes our datapoint, uses array",
            "  destructuring to get <code style=\"white-space: pre-wrap;\">x</code> and",
            "  <code style=\"white-space: pre-wrap;\">y</code> coordinates, then uses our",
            "  scales to define <code style=\"white-space: pre-wrap;\">cx</code> and",
            "  <code style=\"white-space: pre-wrap;\">cy</code> attributes on a",
            "  <code style=\"white-space: pre-wrap;\">&lt;circle&gt;</code> element.",
            "</p>",
            "<h4 id=\"add-axes\">Add axes</h4>",
            "<p>",
            "  You can reuse axes from our earlier exercise. Or copy mine from",
            "  <a href=\"https://codesandbox.io/s/1zlp4jv494\">the CodeSandbox</a>",
            "</p>",
            "<iframe",
            "  src=\"https://codesandbox.io/embed/1zlp4jv494?codemirror=1&amp;view=split\"",
            "  style=\"width:100%; height:500px; borderüòÆ; border-radius: 4px; overflow:hidden;\"",
            "  sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\"",
            ">",
            "</iframe>",
            "<p>",
            "  Mine take a scale and orientation as props, which makes them more",
            "  flexible. Means we can use the same component for both the vertical and",
            "  horizontal axis on our Scatterplot.",
            "</p>",
            "<p>",
            "  Put the axis code in <code style=\"white-space: pre-wrap;\">Axis.js</code>,",
            "  then augment the Scatterplot like this üëá",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb39\"",
            "  data-caption=\"Add axes to Scatterplot\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb39-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> Axis <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;./Axis&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb39-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb39-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb39-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb39-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb39-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">&lt;</span>g transform<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"vs\" style=\"color: #4070a0;\">`translate(</span><span class=\"sc\" style=\"color: #4070a0;\">${</span>x<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">, </span><span class=\"sc\" style=\"color: #4070a0;\">${</span>y<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">)`</span><span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb39-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"va\" style=\"color: #19177c;\">data</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(([x<span class=\"op\" style=\"color: #666666;\">,</span> y]) <span class=\"op\" style=\"color: #666666;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb39-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>circle cx<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">xScale</span>(<span class=\"op\" style=\"color: #666666;\">:</span><span class=\"dt\" style=\"color: #902000;\">satisfied</span><span class=\"op\" style=\"color: #666666;\">:}</span> cy<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">yScale</span>(y)<span class=\"op\" style=\"color: #666666;\">}</span> r<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;5&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb39-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    ))<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb39-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>Axis x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">}</span> y<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">}</span> scale<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">yScale</span><span class=\"op\" style=\"color: #666666;\">}</span> type<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;Left&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb39-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>Axis x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">}</span> y<span class=\"op\" style=\"color: #666666;\">={</span>height<span class=\"op\" style=\"color: #666666;\">}</span> scale<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">xScale</span><span class=\"op\" style=\"color: #666666;\">}</span> type<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;Bottom&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb39-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  &lt;/g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb39-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  Vertical axis takes the vertical",
            "  <code style=\"white-space: pre-wrap;\">this.yScale</code> scale, orients to",
            "  the <code style=\"white-space: pre-wrap;\">Left</code> and we position it",
            "  top left. The horizontal axis takes the horizontal",
            "  <code style=\"white-space: pre-wrap;\">this.xScale</code> scale, orients to",
            "  the <code style=\"white-space: pre-wrap;\">Bottom</code>, and we render it",
            "  bottom left.",
            "</p>",
            "<p>Your Scatterplot should now look like this</p>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/scatterplot-basic.png\"",
            "    alt=\"Rendered basic scatterplot\"",
            "  />",
            "  <figcaption>Rendered basic scatterplot</figcaption>",
            "</figure>"
          ]
        },
        {
          "lectureTitle": "A scatterplot When props do change",
          "lectureLines": [
            "<h2 id=\"props-might-update\">Props might update</h2>",
            "<p>",
            "  The story is a little different when our props might update. Since we‚Äôre",
            "  using D3 objects to calculate SVG properties, we have to make sure those",
            "  objects are updated <em>before</em> we render.",
            "</p>",
            "<p>",
            "  No problem in React 15: Update in",
            "  <code style=\"white-space: pre-wrap;\">componentWillUpdate</code>. But",
            "  since React 16.3 we‚Äôve been told never to use that again. Causes problems",
            "  for modern async rendering.",
            "</p>",
            "<p>",
            "  The official recommended solution is that anything that used to go in",
            "  <code style=\"white-space: pre-wrap;\">componentWillUpdate</code>, can go",
            "  in <code style=\"white-space: pre-wrap;\">componentDidUpdate</code>. But",
            "  not so fast!",
            "</p>",
            "<p>",
            "  Updating D3 objects in",
            "  <code style=\"white-space: pre-wrap;\">componentDidUpdate</code> would mean",
            "  our visualization always renders one update behind. Stale renders! üò±",
            "</p>",
            "<p>",
            "  The new",
            "  <code style=\"white-space: pre-wrap;\">getDerivedStateFromProps</code> to",
            "  the rescue. Our integration follows a 3-step pattern:",
            "</p>",
            "<ul>",
            "  <li>set up D3 objects in component state</li>",
            "  <li>",
            "    update D3 objects in",
            "    <code style=\"white-space: pre-wrap;\">getDerivedStateFromProps</code>",
            "  </li>",
            "  <li>",
            "    output SVG in <code style=\"white-space: pre-wrap;\">render()</code>",
            "  </li>",
            "</ul>",
            "<p>",
            "  <code style=\"white-space: pre-wrap;\">getDerivedStateFromProps</code> is",
            "  officially discouraged, and yet the best tool we have to make sure D3",
            "  state is updated <em>before</em> we render.",
            "</p>",
            "<p>",
            "  Because React calls",
            "  <code style=\"white-space: pre-wrap;\">getDerivedStateFromProps</code> on",
            "  every component render, not just when our props actually change, you",
            "  should avoid recalculating complex things too often. Use memoization",
            "  helpers, check for changes before updating, stuff like that.",
            "</p>",
            "<h3 id=\"an-updateable-scatterplot\">An updateable scatterplot</h3>",
            "<p>",
            "  Let‚Äôs update our scatterplot so it can deal with resizing and updating",
            "  data.",
            "</p>",
            "<p>3 steps üëá</p>",
            "<ul>",
            "  <li>add an interaction that resizes the scatterplot</li>",
            "  <li>move scales to state</li>",
            "  <li>",
            "    update scales in",
            "    <code style=\"white-space: pre-wrap;\">getDerivedStateFromProps</code>",
            "  </li>",
            "</ul>",
            "<p>",
            "  You can see",
            "  <a href=\"https://codesandbox.io/s/ll9kp8or0l\"",
            "    >my final solution on CodeSandbox</a",
            "  >. I recommend you follow along updating your existing code.",
            "</p>",
            "<iframe",
            "  src=\"https://codesandbox.io/embed/ll9kp8or0l?codemirror=1&amp;view=split\"",
            "  style=\"width:100%; height:500px; borderüòÆ; border-radius: 4px; overflow:hidden;\"",
            "  sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\"",
            ">",
            "</iframe>",
            "<h4 id=\"resize-scatterplot-on-click\">Resize scatterplot on click</h4>",
            "<p>",
            "  To test our scatterplot‚Äôs adaptability, we have to add an interaction:",
            "  Resize the scatterplot on click.",
            "</p>",
            "<p>",
            "  That change happens in",
            "  <code style=\"white-space: pre-wrap;\">App.js</code>. Click on the",
            "  <code style=\"white-space: pre-wrap;\">&lt;svg&gt;</code>, reduce width and",
            "  height by 30%.",
            "</p>",
            "<p>",
            "  Move sizing into App state and add an",
            "  <code style=\"white-space: pre-wrap;\">onClick</code> handler.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb40\"",
            "  data-caption=\"Sizing into state and click handler\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb40-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// App.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb40-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> App <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb40-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  state <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb40-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">width</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">300</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb40-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">height</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">300</span></a>",
            "<a class=\"sourceLine\" id=\"cb40-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb40-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb40-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  onClick <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb40-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> width<span class=\"op\" style=\"color: #666666;\">,</span> height <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb40-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">setState</span>(<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb40-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"dt\" style=\"color: #902000;\">width</span><span class=\"op\" style=\"color: #666666;\">:</span> width <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"fl\" style=\"color: #40a070;\">0.7</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb40-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"dt\" style=\"color: #902000;\">height</span><span class=\"op\" style=\"color: #666666;\">:</span> height <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"fl\" style=\"color: #40a070;\">0.7</span></a>",
            "<a class=\"sourceLine\" id=\"cb40-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb40-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb40-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb40-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb40-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> width<span class=\"op\" style=\"color: #666666;\">,</span> height <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  We changed our App component from a function to a class, added",
            "  <code style=\"white-space: pre-wrap;\">state</code> with default",
            "  <code style=\"white-space: pre-wrap;\">width</code> and",
            "  <code style=\"white-space: pre-wrap;\">height</code>, and an",
            "  <code style=\"white-space: pre-wrap;\">onClick</code> method that reduces",
            "  size by 30%. The",
            "  <code style=\"white-space: pre-wrap;\">render</code> method reads",
            "  <code style=\"white-space: pre-wrap;\">width</code> and",
            "  <code style=\"white-space: pre-wrap;\">height</code> from state.",
            "</p>",
            "<p>",
            "  Now gotta change rendering to listen to these values and fire the",
            "  <code style=\"white-space: pre-wrap;\">onClick</code> handler.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb41\"",
            "  data-caption=\"Use state in rendering\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb41-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// App.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb41-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb41-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">&lt;</span>svg width<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;800&quot;</span> height<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;800&quot;</span> onClick<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">onClick</span><span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb41-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">&lt;</span>Scatterplot</a>",
            "<a class=\"sourceLine\" id=\"cb41-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">50</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb41-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    y<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">50</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb41-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    width<span class=\"op\" style=\"color: #666666;\">={</span>width<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb41-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    height<span class=\"op\" style=\"color: #666666;\">={</span>height<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb41-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    data<span class=\"op\" style=\"color: #666666;\">={</span>data<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb41-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb41-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">&lt;/svg<span class=\"op\" style=\"color: #666666;\">&gt;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  Similar rendering as before. We have an",
            "  <code style=\"white-space: pre-wrap;\">&lt;svg&gt;</code> that contains a",
            "  <code style=\"white-space: pre-wrap;\">&lt;Scatterplot&gt;</code>. The svg",
            "  fires <code style=\"white-space: pre-wrap;\">this.onClick</code> on click",
            "  events and the scatterplot uses our",
            "  <code style=\"white-space: pre-wrap;\">width</code> and",
            "  <code style=\"white-space: pre-wrap;\">height</code> values for its props.",
            "</p>",
            "<p>",
            "  If you try this code now, you should see a funny effect where axes move,",
            "  but the scatterplot doesn‚Äôt resize.",
            "</p>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/not-resizing-scatterplot.png\"",
            "    alt=\"Axes move, scatterplot doesn‚Äôt resize\"",
            "  />",
            "  <figcaption>Axes move, scatterplot doesn‚Äôt resize</figcaption>",
            "</figure>",
            "<p>Peculiar isn‚Äôt it? Try to guess why.</p>",
            "<h4 id=\"move-scales-to-state\">Move scales to state</h4>",
            "<p>",
            "  The horizontal axis moves because it‚Äôs render at",
            "  <code style=\"white-space: pre-wrap;\">height</code> vertical coordinate.",
            "  Datapoints don‚Äôt move because the scales that position them are",
            "  calculated once ‚Äì¬†on component mount.",
            "</p>",
            "<p>",
            "  First step to keeping scales up to date is to move them from component",
            "  values into state.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb42\"",
            "  data-caption=\"Move scales into state\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb42-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Scatterplot.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb42-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Scatterplot <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb42-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  state <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb42-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">xScale</span><span class=\"op\" style=\"color: #666666;\">:</span> d3</a>",
            "<a class=\"sourceLine\" id=\"cb42-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">scaleLinear</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb42-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">domain</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">1</span>])</a>",
            "<a class=\"sourceLine\" id=\"cb42-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">range</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">width</span>])<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb42-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">yScale</span><span class=\"op\" style=\"color: #666666;\">:</span> d3</a>",
            "<a class=\"sourceLine\" id=\"cb42-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">scaleLinear</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb42-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">domain</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">1</span>])</a>",
            "<a class=\"sourceLine\" id=\"cb42-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">range</span>([<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">height</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">0</span>])</a>",
            "<a class=\"sourceLine\" id=\"cb42-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">};</span></a></code></pre>",
            "</div>",
            "<p>",
            "  Same scale definition code we had before. Linear scales, domain from 0 to",
            "  1, using props for ranges. But now they‚Äôre wrapped in a",
            "  <code style=\"white-space: pre-wrap;\">state = {}</code> object and it‚Äôs",
            "  <code style=\"white-space: pre-wrap;\">xScale: d3 ...</code> instead of",
            "  <code style=\"white-space: pre-wrap;\">xScale = d3 ...</code>.",
            "</p>",
            "<p>Our render function should use these as well. Small change:</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb43\"",
            "  data-caption=\"Render function uses state scales\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb43-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Scatterplot.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb43-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb43-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y<span class=\"op\" style=\"color: #666666;\">,</span> data<span class=\"op\" style=\"color: #666666;\">,</span> height <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb43-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">{</span> yScale<span class=\"op\" style=\"color: #666666;\">,</span> xScale <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb43-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb43-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb43-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>g transform<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"vs\" style=\"color: #4070a0;\">`translate(</span><span class=\"sc\" style=\"color: #4070a0;\">${</span>x<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">, </span><span class=\"sc\" style=\"color: #4070a0;\">${</span>y<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">)`</span><span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb43-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"va\" style=\"color: #19177c;\">data</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(([x<span class=\"op\" style=\"color: #666666;\">,</span> y]) <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">&lt;</span>circle cx<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"at\" style=\"color: #7d9029;\">xScale</span>(<span class=\"op\" style=\"color: #666666;\">:</span><span class=\"dt\" style=\"color: #902000;\">satisfied</span><span class=\"op\" style=\"color: #666666;\">:}</span> cy<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"at\" style=\"color: #7d9029;\">yScale</span>(y)<span class=\"op\" style=\"color: #666666;\">}</span> r<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;5&quot;</span> /&gtüòâ<span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  We use destructuring to take our scales from state, then use them when",
            "  mapping over our data.",
            "</p>",
            "<p>",
            "  Clicking on the SVG produces the same result as before, but we‚Äôre almost",
            "  there. Just one more step.",
            "</p>",
            "<h4 id=\"update-scales-in-getderivedstatefromprops\">",
            "  Update scales in",
            "  <code style=\"white-space: pre-wrap;\">getDerivedStateFromProps</code>",
            "</h4>",
            "<p>",
            "  Last step is to update our scales‚Äô ranges in",
            "  <code style=\"white-space: pre-wrap;\">getDerivedStateFromProps</code>.",
            "  This method runs every time React touches our component for any reason.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb44\"",
            "  data-caption=\"Update scales\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb44-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Scatterplot.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb44-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Scatterplot <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">PureComponent</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb44-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ..</span></a>",
            "<a class=\"sourceLine\" id=\"cb44-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">static</span> <span class=\"at\" style=\"color: #7d9029;\">getDerivedStateFromProps</span>(props<span class=\"op\" style=\"color: #666666;\">,</span> state) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb44-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> yScale<span class=\"op\" style=\"color: #666666;\">,</span> xScale <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> state<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb44-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb44-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">yScale</span>.<span class=\"at\" style=\"color: #7d9029;\">range</span>([<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">height</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">0</span>])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb44-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">xScale</span>.<span class=\"at\" style=\"color: #7d9029;\">range</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">width</span>])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb44-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb44-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb44-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      ...<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb44-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      yScale<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb44-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      xScale</a>",
            "<a class=\"sourceLine\" id=\"cb44-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb44-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  Take scales from state, update ranges with new values, return new state.",
            "  Nice and easy.",
            "</p>",
            "<p>",
            "  Notice that",
            "  <code style=\"white-space: pre-wrap;\">getDerivedStateFromProps</code> is a",
            "  static method shared by all instances of our Scatterplot component. You",
            "  have no reference to a",
            "  <code style=\"white-space: pre-wrap;\">this</code> and have to calculate",
            "  new state purely from the",
            "  <code style=\"white-space: pre-wrap;\">props</code> and",
            "  <code style=\"white-space: pre-wrap;\">state</code> passed into your",
            "  method.",
            "</p>",
            "<p>",
            "  It‚Äôs a lot like a Redux reducer, if that helps you think about it. If you",
            "  don‚Äôt know what Redux reducers are, don‚Äôt worry. Just remember to return",
            "  a new version of component state.",
            "</p>",
            "<p>Your Scatterplot should now update its size on every click.</p>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/scatterplot-resizes.png\"",
            "    alt=\"Scatterplot resizes\"",
            "  />",
            "  <figcaption>Scatterplot resizes</figcaption>",
            "</figure>"
          ]
        },
        {
          "lectureTitle": "Making your components more flexible with render props",
          "lectureLines": [
            "<h2 id=\"making-your-components-more-flexible-with-render-props\">",
            "  Making your components more flexible with render props",
            "</h2>",
            "<p>",
            "  Our scatterplot doesn‚Äôt look quite as nice as the earlier screenshot.",
            "  Regular SVG circles with no styling just can‚Äôt match up.",
            "</p>",
            "<p>",
            "  What if we wanted to render beautiful circles? Or stars? Or maybe",
            "  something else entirely?",
            "</p>",
            "<p>",
            "  We can use render props to give users of our scatterplot component the",
            "  power to define how they want datapoints to render. üò±",
            "</p>",
            "<p>",
            "  Think of it as a sort of inversion of control. Another common buzzword",
            "  are ‚Äúslots‚Äù, or renderless components. The idea is that one of our props",
            "  accepts a React component.",
            "</p>",
            "<p>We then use that prop to render our datapoints.</p>",
            "<p>It looks a little like this üëá</p>",
            "<pre class=\"jsx\"><code style=\"white-space: pre-wrap;\">&lt;Scatterplot",
            "  x={10} y={10}",
            "  data={data}",
            "  datapoint={(props) =&gt; &lt;Datapoint {...props} /&gt;}",
            "&gt;</code></pre>",
            "<p>",
            "  What‚Äôs more, we can add interactions and other useful stuff to our",
            "  <code style=\"white-space: pre-wrap;\">&lt;Datapoint&gt;</code> and",
            "  <code style=\"white-space: pre-wrap;\">&lt;Scatterplot&gt;</code> doesn‚Äôt",
            "  have to know anything about it. All the scatterplot cares about is",
            "  rendering two axes and a bunch of datapoints.",
            "</p>",
            "<p>",
            "  Let‚Äôs use the render prop approach to make our scatterplot more reusable.",
            "</p>",
            "<p>Steps üëá</p>",
            "<ul>",
            "  <li>pass in a render prop</li>",
            "  <li>use it to render datapoints</li>",
            "  <li>make datapoint component look nice</li>",
            "</ul>",
            "<p>",
            "  You can see",
            "  <a href=\"https://codesandbox.io/s/j73xlyr8v5\"",
            "    >my solution on CodeSandbox</a",
            "  >. I recommend you follow along with your existing code.",
            "</p>",
            "<iframe",
            "  src=\"https://codesandbox.io/embed/j73xlyr8v5?codemirror=1&amp;view=split\"",
            "  style=\"width:100%; height:500px; borderüòÆ; border-radius: 4px; overflow:hidden;\"",
            "  sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\"",
            ">",
            "</iframe>",
            "<h3 id=\"pass-in-a-render-prop\">Pass in a render prop</h3>",
            "<p>",
            "  React components are Just JavaScript. Either a JSX function call or a",
            "  function that returns some JSX.",
            "</p>",
            "<p>",
            "  That means we can pass them into components via props. Let‚Äôs do that in",
            "  App.js",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb46\"",
            "  data-caption=\"Pass render prop into Scatterplot\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb46-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// App.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb46-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb46-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> Datapoint <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;./Datapoint&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb46-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb46-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">//..</span></a>",
            "<a class=\"sourceLine\" id=\"cb46-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">&lt;</span>svg width<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;800&quot;</span> height<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;800&quot;</span> onClick<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">onClick</span><span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb46-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">&lt;</span>Scatterplot</a>",
            "<a class=\"sourceLine\" id=\"cb46-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">50</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb46-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    y<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">50</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb46-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    width<span class=\"op\" style=\"color: #666666;\">={</span>width<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb46-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    height<span class=\"op\" style=\"color: #666666;\">={</span>height<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb46-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    data<span class=\"op\" style=\"color: #666666;\">={</span>data<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb46-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    datapoint<span class=\"op\" style=\"color: #666666;\">={</span>(<span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y <span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">&lt;</span>Datapoint x<span class=\"op\" style=\"color: #666666;\">={</span>x<span class=\"op\" style=\"color: #666666;\">}</span> y<span class=\"op\" style=\"color: #666666;\">={</span>y<span class=\"op\" style=\"color: #666666;\">}</span> /&gt;<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb46-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb46-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">&lt;/svg<span class=\"op\" style=\"color: #666666;\">&gt;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  For extra flexibility and readability we‚Äôre wrapping our",
            "  <code style=\"white-space: pre-wrap;\">&lt;Datapoint&gt;</code> component",
            "  in another function that accepts",
            "  <code style=\"white-space: pre-wrap;\">x</code> and",
            "  <code style=\"white-space: pre-wrap;\">y</code> coordinates. This is a",
            "  common pattern you‚Äôll see with render props üëâ it gives you the ability",
            "  to pass in props from both the rendering component and the component",
            "  that‚Äôs setting the render prop.",
            "</p>",
            "<p>",
            "  Say we wanted Datapoint to know something about our App <em>and</em> our",
            "  Scatterplot. The scatterplot calls this function with coordinates. We",
            "  pass those into",
            "  <code style=\"white-space: pre-wrap;\">&lt;Datapoint&gt;</code>. And",
            "  because the method is defined inside App, we could pass-in anything",
            "  that‚Äôs defined in the App. Like perhaps",
            "  <code style=\"white-space: pre-wrap;\">data</code>.",
            "</p>",
            "<p>",
            "  Your code will start throwing an error now. Datapoint isn‚Äôt defined.",
            "  Don‚Äôt worry, it‚Äôs coming soon.",
            "</p>",
            "<h3 id=\"use-render-prop-to-render-datapoints\">",
            "  Use render prop to render datapoints",
            "</h3>",
            "<p>",
            "  To use our new",
            "  <code style=\"white-space: pre-wrap;\">datapoint</code> render prop, we",
            "  have to change how we render the scatterplot. Instead of returning a",
            "  <code style=\"white-space: pre-wrap;\">&lt;circle&gt;</code> for each",
            "  iteration of the dataset, we‚Äôre calling a function passed in from props.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb47\"",
            "  data-caption=\"Accept a render prop\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb47-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Scatterplot.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb47-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb47-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y<span class=\"op\" style=\"color: #666666;\">,</span> data<span class=\"op\" style=\"color: #666666;\">,</span> height<span class=\"op\" style=\"color: #666666;\">,</span> datapoint <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb47-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">{</span> yScale<span class=\"op\" style=\"color: #666666;\">,</span> xScale <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb47-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb47-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb47-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>g transform<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"vs\" style=\"color: #4070a0;\">`translate(</span><span class=\"sc\" style=\"color: #4070a0;\">${</span>x<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">, </span><span class=\"sc\" style=\"color: #4070a0;\">${</span>y<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">)`</span><span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb47-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"va\" style=\"color: #19177c;\">data</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(([x<span class=\"op\" style=\"color: #666666;\">,</span> y]) <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"at\" style=\"color: #7d9029;\">datapoint</span>(<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb47-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"at\" style=\"color: #7d9029;\">xScale</span>(<span class=\"op\" style=\"color: #666666;\">:</span><span class=\"dt\" style=\"color: #902000;\">satisfied</span><span class=\"op\" style=\"color: #666666;\">:,</span></a>",
            "<a class=\"sourceLine\" id=\"cb47-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"at\" style=\"color: #7d9029;\">yScale</span>(y)</a>",
            "<a class=\"sourceLine\" id=\"cb47-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span>))<span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  We take the",
            "  <code style=\"white-space: pre-wrap;\">datapoint</code> function from props",
            "  and call it in",
            "  <code style=\"white-space: pre-wrap;\">data.map</code> making sure to pass",
            "  in <code style=\"white-space: pre-wrap;\">x</code> and",
            "  <code style=\"white-space: pre-wrap;\">y</code> as an object. Calling",
            "  functions with objects like this is a common JavaScript pattern to fake",
            "  named arguments.",
            "</p>",
            "<h3 id=\"make-datapoint-component-look-nice\">",
            "  Make datapoint component look nice",
            "</h3>",
            "<p>",
            "  We‚Äôve got all the rendering, now all we need is the",
            "  <code style=\"white-space: pre-wrap;\">&lt;Datapoint</code> component",
            "  itself. That goes in a new",
            "  <code style=\"white-space: pre-wrap;\">Datapoint.js</code> file.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb48\"",
            "  data-caption=\"Datapoint file\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb48-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;react&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb48-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> styled <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;styled-components&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb48-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb48-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> Circle <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">styled</span>.<span class=\"at\" style=\"color: #7d9029;\">circle</span><span class=\"vs\" style=\"color: #4070a0;\">`</span></a>",
            "<a class=\"sourceLine\" id=\"cb48-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"vs\" style=\"color: #4070a0;\">  fill: steelblue;</span></a>",
            "<a class=\"sourceLine\" id=\"cb48-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"vs\" style=\"color: #4070a0;\">  fill-opacity: .7;</span></a>",
            "<a class=\"sourceLine\" id=\"cb48-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"vs\" style=\"color: #4070a0;\">  stroke: steelblue;</span></a>",
            "<a class=\"sourceLine\" id=\"cb48-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"vs\" style=\"color: #4070a0;\">  stroke-width: 1.5px;</span></a>",
            "<a class=\"sourceLine\" id=\"cb48-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"vs\" style=\"color: #4070a0;\">`</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb48-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb48-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Datapoint <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb48-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb48-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb48-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb48-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb48-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>Circle</a>",
            "<a class=\"sourceLine\" id=\"cb48-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        cx<span class=\"op\" style=\"color: #666666;\">={</span>x<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb48-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        cy<span class=\"op\" style=\"color: #666666;\">={</span>y<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb48-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        r<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">3</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb48-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb48-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb48-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb48-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb48-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb48-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> Datapoint<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  I‚Äôm using styled-components to define the CSS for my Datapoint. You can",
            "  use whatever you prefer. I like styled components because they‚Äôre a good",
            "  balance between CSS-in-JS and normal CSS syntax.",
            "</p>",
            "<p>",
            "  The component itself renders a styled circle using props for positioning",
            "  and a radius of 3 pixels.",
            "</p>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/scatterplot-finished.png\"",
            "    alt=\"Finished scatterplot\"",
            "  />",
            "  <figcaption>Finished scatterplot</figcaption>",
            "</figure>",
            "<p>",
            "  For an extra challenge, try rendering circle radius from state and",
            "  changing datapoint size on mouse over. Make the scatterplot interactive.",
            "</p>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "You're awesome",
      "lectures": [
        {
          "lectureTitle": "üí™",
          "lectureLines": [
            "<h1 id=\"youre-awesome\">You‚Äôre awesome</h1>",
            "<p>You know the basics!</p>",
            "<p>",
            "  You can take any D3 example from the internets and wrap it in a React",
            "  component, <em>and</em> you know how to build React+D3 components from",
            "  scratch. You‚Äôre amazing. High five! üñê",
            "</p>",
            "<p>",
            "  The rest of this book is about using these concepts and pushing them to",
            "  the limits of practicality. We‚Äôre going to build an interactive",
            "  visualization of tech salaries compared to median household income.",
            "</p>",
            "<p>",
            "  Why? Because it piqued my interest, and because it shows why you should",
            "  call yourself an engineer, not a programmer or a developer.",
            "  <strong>You‚Äôre an engineer</strong>. Remember that.",
            "</p>",
            "<p>",
            "  Throughout the example, you‚Äôll learn more details of D3, tidbits from",
            "  React, and the animation chapter is going to blow your mind.",
            "</p>",
            "<p>Super fun!</p>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/full-dataviz.png\"",
            "    alt=\"Default view\"",
            "  />",
            "  <figcaption>Default view</figcaption>",
            "</figure>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/interaction-dataviz.png\"",
            "    alt=\"After a click\"",
            "  />",
            "  <figcaption>After a click</figcaption>",
            "</figure>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "A note about state",
      "lectures": [
        {
          "lectureTitle": "Handling state in your React app",
          "lectureLines": [
            "<h1 id=\"state-handling-architecture\">Handling state in your React app</h1>",
            "<p>",
            "  Before I can set you loose on the world, we should talk about managing",
            "  state. It‚Äôs where most engineers shoot themselves in the foot.",
            "</p>",
            "<p>",
            "  You‚Äôll notice you shot yourself in the foot six months ago when all of a",
            "  sudden it becomes near impossible to build new features, add",
            "  functionality, and know what‚Äôs going on with your app. If you find",
            "  yourself spending a lot of time confused about why your UI does",
            "  something, you‚Äôve shot yourself in the foot.",
            "</p>",
            "<p>Don‚Äôt worry tho, happens to everyone!</p>",
            "<p>",
            "  I shoot myself in the foot all the time. You can‚Äôt predict how your app",
            "  is going to evolve. You can‚Äôt know how technology is going to improve.",
            "  Can‚Äôt know how your team will grow.",
            "</p>",
            "<p>Best approach is to optimize for change.</p>",
            "<p>",
            "  Otherwise you might have to do a rewrite. Rewrites are bad. One of the",
            "  most infamous rewrite story is about",
            "  <a href=\"https://www.joelonsoftware.com/articles/fog0000000069.html\"",
            "    >The Rewrite that Killed Netscape</a",
            "  >. You might not even have heard of Netscape üòâ",
            "</p>",
            "<p>Let‚Äôs save you from that.</p>"
          ]
        },
        {
          "lectureTitle": "Basic architecture we'll use",
          "lectureLines": [
            "<h2 id=\"basic-architecture\">Basic architecture</h2>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/unidirectionalflow.png\"",
            "    alt=\"Unidirectional data flow\"",
            "  />",
            "  <figcaption>Unidirectional data flow</figcaption>",
            "</figure>",
            "<p>",
            "  We‚Äôre using a unidirectional data flow architecture with a single source",
            "  of truth. That means you always know what to expect. Think of your app as",
            "  a giant circle.",
            "</p>",
            "<p>",
            "  Data goes from your source of truth into your components. Events go from",
            "  your components into your source of truth. All in one direction",
            "</p>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/architecture.png\"",
            "    alt=\"The basic architecture\"",
            "  />",
            "  <figcaption>The basic architecture</figcaption>",
            "</figure>",
            "<p>",
            "  Our main App component holds state for your entire application. Anything",
            "  that multiple components should be aware of lives here. This state flows",
            "  down the hierarchy via props. Changes happen via callbacks, also passed",
            "  down through props.",
            "</p>",
            "<p>Like this üëá</p>",
            "<ul>",
            "  <li>",
            "    The Main Component ‚Äì <code style=\"white-space: pre-wrap;\">App</code> ‚Äì",
            "    holds the truth",
            "  </li>",
            "  <li>Truth flows down through props</li>",
            "  <li>Child components react to user events</li>",
            "  <li>They announce changes using callbacks</li>",
            "  <li>The Main Component updates its truth</li>",
            "  <li>Updates flow back down the chain</li>",
            "  <li>UI updates through re-renders</li>",
            "</ul>",
            "<p>",
            "  This looks roundabout, but it‚Äôs amazing. Far better than worrying about",
            "  parts of the UI growing out of sync with the rest of your app. I could",
            "  talk your ear off with debugging horror stories, but I‚Äôm nice, so I",
            "  won‚Äôt.",
            "</p>",
            "<p>",
            "  When a user clicks one of our controls, a",
            "  <code style=\"white-space: pre-wrap;\">Toggle</code>, it invokes a",
            "  callback. This in turn invokes a callback on",
            "  <code style=\"white-space: pre-wrap;\">ControlRow</code>, which invokes a",
            "  callback on <code style=\"white-space: pre-wrap;\">Controls</code>, which",
            "  invokes a callback on <code style=\"white-space: pre-wrap;\">App</code>.",
            "</p>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/architecture_callbacks.png\"",
            "    alt=\"Callback chain\"",
            "  />",
            "  <figcaption>Callback chain</figcaption>",
            "</figure>",
            "<p>",
            "  With each hop, the nature of our callback changes.",
            "  <code style=\"white-space: pre-wrap;\">Toggle</code> tells",
            "  <code style=\"white-space: pre-wrap;\">ControlRow</code> which entry was",
            "  toggled, <code style=\"white-space: pre-wrap;\">ControlRow</code> tells",
            "  <code style=\"white-space: pre-wrap;\">Controls</code> how to update the",
            "  data filter function, and",
            "  <code style=\"white-space: pre-wrap;\">Controls</code> gives",
            "  <code style=\"white-space: pre-wrap;\">App</code> a composite filter built",
            "  from all the controls. You‚Äôll see how that works in the next chapter.",
            "</p>",
            "<p>",
            "  All you have to remember right now is that callbacks evolve from passing",
            "  low-level information to high-level business logic. Starts with",
            "  <em>‚ÄúI was clicked‚Äù</em> ends with <em>‚ÄúUpdate visualization filter‚Äù</em>",
            "</p>",
            "<p>",
            "  When the final callback is invoked,",
            "  <code style=\"white-space: pre-wrap;\">App</code> updates its repository of",
            "  truth ‚Äì <code style=\"white-space: pre-wrap;\">this.state</code> ‚Äì and",
            "  communicates the change back down the chain via props. No additional",
            "  wiring needed on your part. React‚Äôs got you covered.",
            "</p>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/architecture_dataflow.png\"",
            "    alt=\"Data flows down\"",
            "  />",
            "  <figcaption>Data flows down</figcaption>",
            "</figure>",
            "<p>",
            "  You can think of it like calling functions with new arguments. Because",
            "  the functions ‚Äì components ‚Äì render the UI, your interface updates.",
            "</p>",
            "<p>",
            "  Because your components are well-made and rely on their props to render,",
            "  React‚Äôs engine can optimize these changes. It compares the new and old",
            "  component trees and decides which components to re-render and which to",
            "  leave alone.",
            "</p>",
            "<p>Functional programming for HTML! üòé</p>",
            "<p>",
            "  The functional programming concepts we‚Äôre relying on are called",
            "  <a href=\"https://en.wikipedia.org/wiki/Referential_transparency\"",
            "    >referential transparency</a",
            "  >,",
            "  <a href=\"https://en.wikipedia.org/wiki/Idempotence\"",
            "    >idempotent functions</a",
            "  >, and",
            "  <a href=\"https://en.wikipedia.org/wiki/Pure_function\"",
            "    >functional purity</a",
            "  >. I suggest Googling them if you want to learn the theory behind it all.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "What about React Context? Redux? MobX?",
          "lectureLines": [
            "<h2 id=\"what-about-react-context-redux-mobx\">",
            "  What about React Context? Redux? MobX?",
            "</h2>",
            "<p>",
            "  You may have heard of React Context, Redux, MobX and other state handling",
            "  libraries. They‚Äôre all great in different ways and the internet can‚Äôt",
            "  decide which one is best. Everyone has their own little twist on the",
            "  story.",
            "</p>",
            "<p>And yet the basic principles are all the same:</p>",
            "<ol type=\"1\">",
            "  <li>Single source of truth</li>",
            "  <li>State flows down</li>",
            "  <li>Updates flow up</li>",
            "</ol>",
            "<p>",
            "  Where React Context, Redux, MobX and other libraries help, is how much",
            "  work it is to build this machinery and keep it running. How much",
            "  flexibility you get when moving components. Basically how easy it is to",
            "  change your app later.",
            "</p>",
            "<p>Remember the rewrite conundrum?</p>",
            "<p>",
            "  Our basic approach binds business structure to UI structure. Your state,",
            "  your props, your callbacks, they all follow the same hierarchy as your UI",
            "  does.",
            "</p>",
            "<p>",
            "  Want to move the buy button? Great! You have to update the entire chain",
            "  of components leading from your state to that button.",
            "</p>",
            "<p>Everything needs new callbacks and new props.</p>",
            "<p>",
            "  This is known as prop drilling and fast becomes super tedious. Rewiring",
            "  your whole app just to move a single button is no fun.",
            "</p>",
            "<p>",
            "  To solve this problem, React Context, Redux, MobX, etc. decouple your",
            "  business logic from your UI architecture. Take state out of the main",
            "  component and move it into its own object. Connect everything to that",
            "  instead.",
            "</p>",
            "<p>[picture]</p>",
            "<p>",
            "  Now it doesn‚Äôt matter where you move that button. It still triggers the",
            "  same function on the same state. Every other component that cares about",
            "  that state updates too.",
            "</p>",
            "<p>",
            "  Different libraries have different details for how that works, but they",
            "  all follow the same idea and solve the same problem.",
            "</p>",
            "<hr />",
            "<p>",
            "  We‚Äôre sticking with the basic approach because it‚Äôs easier to explain,",
            "  works without additional libraries, and is Good Enough‚Ñ¢.",
            "</p>",
            "<p>",
            "  You can see an approach to using Redux in dataviz in the",
            "  <a",
            "    href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6906668#animating-react-redux\"",
            "    >Animating with React, Redux, and D3 chapter</a",
            "  >, and we tackle MobX in the",
            "  <a",
            "    href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6906696\"",
            "    >MobX chapter</a",
            "  >.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "How to structure your app",
          "lectureLines": [
            "<h1 id=\"structuring-your-app\">How to structure your app</h1>",
            "<p>",
            "  Our app is built from components. You already know how components work.",
            "  Where it gets tricky is deciding where one component ends and another",
            "  beings.",
            "</p>",
            "<p>",
            "  One of the hardest problems in software engineering I‚Äôd say. Defining the",
            "  boundaries and interfaces between objects. Entire books have been written",
            "  on the subject.",
            "</p>",
            "<p>",
            "  You‚Äôll learn most of it with experience. Just through trying different",
            "  approaches, seeing what works, and developing your taste. Like a chef",
            "  gets better at improvisation the more things they try. Or a musician.",
            "</p>",
            "<p>",
            "  To get you started, here‚Äôs a rule of thumb that I like to use: if you",
            "  have to use the word ‚Äúand‚Äù to describe what your component does, then it",
            "  should become two components. If you build the same feature multiple",
            "  times, turn it into a component.",
            "</p>",
            "<p>",
            "  You can then remix components into larger components where it makes",
            "  sense, or you can keep them separate. It makes sense to combine when",
            "  multiple small components have to work together to build a big feature.",
            "</p>",
            "<p>This architecture often mimics the design of your UI.</p>",
            "<p>",
            "  For example: our tech salary visualization is going to use 1 very top",
            "  level component, 5 major components, and a bunch of child components.",
            "</p>",
            "<ul>",
            "  <li>",
            "    <code style=\"white-space: pre-wrap;\">App</code> is the very top level",
            "    component; it keeps everything together",
            "  </li>",
            "  <li>",
            "    <code style=\"white-space: pre-wrap;\">Title</code> renders the dynamic",
            "    title",
            "  </li>",
            "  <li>",
            "    <code style=\"white-space: pre-wrap;\">Description</code> renders the",
            "    dynamic description",
            "  </li>",
            "  <li>",
            "    <code style=\"white-space: pre-wrap;\">Histogram</code> renders the",
            "    histogram and has child components for the axis and histogram bars",
            "  </li>",
            "  <li>",
            "    <code style=\"white-space: pre-wrap;\">CountyMap</code> renders the",
            "    choropleth map and uses child components for the counties",
            "  </li>",
            "  <li>",
            "    <code style=\"white-space: pre-wrap;\">Controls</code> renders the rows",
            "    of buttons that let users explore our dataset",
            "  </li>",
            "</ul>",
            "<p>",
            "  Most of these are specific to our use case, but",
            "  <code style=\"white-space: pre-wrap;\">Histogram</code> and",
            "  <code style=\"white-space: pre-wrap;\">CountyMap</code> have potential to",
            "  be used elsewhere. We‚Äôll keep that in mind when we build them.",
            "</p>",
            "<p>",
            "  <code style=\"white-space: pre-wrap;\">Histogram</code>,",
            "  <code style=\"white-space: pre-wrap;\">CountyMap</code>, and",
            "  <code style=\"white-space: pre-wrap;\">Controls</code> are going to have",
            "  their own folder inside",
            "  <code style=\"white-space: pre-wrap;\">src/components/</code> to help us",
            "  group major components with their children. An",
            "  <code style=\"white-space: pre-wrap;\">index.js</code> file will help with",
            "  imports.",
            "</p>",
            "<p>",
            "  We‚Äôll use a <code style=\"white-space: pre-wrap;\">Meta</code> folder for",
            "  all our metadata components like",
            "  <code style=\"white-space: pre-wrap;\">Title</code> and",
            "  <code style=\"white-space: pre-wrap;\">Description</code>. We don‚Äôt",
            "  <em>have</em> to do this, but",
            "  <code style=\"white-space: pre-wrap;\"",
            "    >import { Title, Description } from './Meta'</code",
            "  >",
            "  looks better than separate imports for related-but-different components.",
            "  Namespacing, if you will.",
            "</p>",
            "<p>",
            "  We want to access every component with",
            "  <code style=\"white-space: pre-wrap;\"",
            "    >import My Component from './MyComponent'</code",
            "  >",
            "  and render as",
            "  <code style=\"white-space: pre-wrap;\"",
            "    >&lt;MyComponent {...params} /&gt;</code",
            "  >. Something is wrong, if a parent component has to know details about",
            "  the implementation of a child component.",
            "</p>",
            "<p>",
            "  You can read more about these ideas by Googling",
            "  <a href=\"https://en.wikipedia.org/wiki/Leaky_abstraction\"",
            "    >‚Äúleaky abstractions‚Äù</a",
            "  >,",
            "  <a href=\"https://en.wikipedia.org/wiki/Single_responsibility_principle\"",
            "    >‚Äúsingle responsibility principle‚Äù</a",
            "  >,",
            "  <a href=\"https://en.wikipedia.org/wiki/Separation_of_concerns\"",
            "    >‚Äúseparation of concerns‚Äù</a",
            "  >, and",
            "  <a href=\"https://en.wikipedia.org/wiki/Structured_programming\"",
            "    >‚Äústructured programming‚Äù</a",
            "  >. Books from the late 90‚Äôs and early 2000‚Äôs (when object-oriented",
            "  programming was The Future‚Ñ¢) have the best curated info in my experience.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "Congratz!",
          "lectureLines": [
            "<p>",
            "  Congratz! You know everything you need to build visualizations with React",
            "  and D3. üëè",
            "</p>",
            "<p>",
            "  This is the point in tech books where I run off and start building things",
            "  on my own. Then I get frustrated, spend hours Googling for answers, and",
            "  then remember, ‚ÄúHey! Maybe I should read the rest of the book!‚Äù",
            "</p>",
            "<p>",
            "  Reading the rest of the book helps. I‚Äôll show you how all this fits",
            "  together into a larger project.",
            "</p>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "Set up your local environment",
      "lectures": [
        {
          "lectureTitle": "Local environment setup",
          "lectureLines": [
            "<h1 id=\"getting-started\">",
            "  Set up a local environment with create-react-app",
            "</h1>",
            "<p>",
            "  Can you believe this is the third time I‚Äôm writing a",
            "  <em>‚ÄúHow to set up all the tools and get started‚Äù</em> section? The",
            "  ecosystem moves fast!",
            "</p>",
            "<p>",
            "  You can see the old versions in the ebook as Appendix A ‚Äì a roll-your-own",
            "  environment that‚Äôs almost the same as the one I‚Äôm about to show you, and",
            "  Appendix B ‚Äì a browserify-based environment (if you don‚Äôt like Webpack).",
            "</p>",
            "<p>",
            "  In the summer of 2016, the React team released a tool called",
            "  <code style=\"white-space: pre-wrap;\">create-react-app</code>. It creates",
            "  a React app so that you can get started right away. All of the code in",
            "  this book runs with an app set up like this.",
            "</p>",
            "<p>Getting started with React has never been easier.</p>",
            "<ol type=\"1\">",
            "  <li>Make sure you have node.js</li>",
            "  <li>Install the app generator</li>",
            "  <li>Run the app generator</li>",
            "</ol>"
          ]
        },
        {
          "lectureTitle": "Start with create-react-app",
          "lectureLines": [
            "<h2 id=\"make-sure-you-have-node.js\">Make sure you have node.js</h2>",
            "<p>",
            "  Modern JavaScript development runs on node.js. Your code still ends up in",
            "  a browser, but there are a few steps it has to go through before it gets",
            "  there. Those toolchains run on node.js.",
            "</p>",
            "<p>",
            "  Go to <a href=\"https://nodejs.org/en/\">nodejs.org</a>, download one of",
            "  the latest versions, and run the installer. You can pick the more stable",
            "  LTS (long-term-support) version, or the more gimme-all-the-features",
            "  version. JavaScript toolchains run fine in both.",
            "</p>",
            "<p>",
            "  Server-side rendering might be easier with the fancy-pants version. More",
            "  on that later.",
            "</p>",
            "<h2 id=\"install-create-react-app\">Install create-react-app</h2>",
            "<p>Great, you have node and you‚Äôre ready to go.</p>",
            "<p>Run this command in a terminal:</p>",
            "<pre",
            "  data-caption=\"Install create-react-app\"",
            "><code style=\"white-space: pre-wrap;\">$ npm install -g create-react-app</code></pre>",
            "<p>",
            "  This installs a global npm package called",
            "  <code style=\"white-space: pre-wrap;\">create-react-app</code>. Its job is",
            "  to create a directory and install",
            "  <code style=\"white-space: pre-wrap;\">react-scripts</code>.",
            "</p>",
            "<p>Confusing, I know.</p>",
            "<p>",
            "  You can think of",
            "  <code style=\"white-space: pre-wrap;\">create-react-app</code> and",
            "  <code style=\"white-space: pre-wrap;\">react-scripts</code> as two parts of",
            "  the same construction. The first is a lightweight script that you can",
            "  install globally and never update; the second is where the work happens.",
            "  You want this one to be fresh every time you start a new app.",
            "</p>",
            "<p>",
            "  Keeping a global dependency up to date would suck, especially considering",
            "  there have been six major updates since Facebook first launched",
            "  <code style=\"white-space: pre-wrap;\">create-react-app</code> in July",
            "  2016.",
            "</p>",
            "<h2 id=\"run-create-react-app\">Run create-react-app</h2>",
            "<p>",
            "  Superb! You have",
            "  <code style=\"white-space: pre-wrap;\">create-react-app</code>. Time to",
            "  create an app and get started with some coding.",
            "</p>",
            "<p>Run this in a terminal:</p>",
            "<pre",
            "  data-caption=\"Create your project\"",
            "><code style=\"white-space: pre-wrap;\">$ create-react-app react-d3js-example</code></pre>",
            "<p>",
            "  Congratulations! You just created a React app. <em>With</em> all the",
            "  setup and the fuss that goes into using a modern JavaScript toolchain.",
            "</p>",
            "<p>Your next step is to run your app:</p>",
            "<pre",
            "  data-caption=\"Start your dev server\"",
            "><code style=\"white-space: pre-wrap;\">$ cd react-d3js-example",
            "$ npm start</code></pre>",
            "<p>A browser tab should open with a page that looks like this:</p>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/initial-app.png\"",
            "    alt=\"Initial React app\"",
            "  />",
            "  <figcaption>Initial React app</figcaption>",
            "</figure>",
            "<p>",
            "  If that didn‚Äôt work, then something must have gone terribly wrong. You",
            "  should consult",
            "  <a href=\"https://github.com/facebookincubator/create-react-app\"",
            "    >the official docs</a",
            "  >. Maybe that will help.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "What you get",
          "lectureLines": [
            "<h2 id=\"what-you-get\">What you get</h2>",
            "<p>",
            "  Running",
            "  <code style=\"white-space: pre-wrap;\">create-react-app</code> installs",
            "  tools and libraries. There‚Äôs around 80MB of them as of October 2016. This",
            "  is why using a generator is easier than slogging through on your own.",
            "</p>",
            "<p>",
            "  Crucially, there is a single dependency in your project ‚Äì",
            "  <code style=\"white-space: pre-wrap;\">react-scripts</code>. But it gives",
            "  you everything you need to build modern React apps.",
            "</p>",
            "<ul>",
            "  <li>",
            "    <strong>Webpack</strong> - a module bundler and file loader. It turns",
            "    your app into a single JavaScript file, and it even lets you import",
            "    images and styles like they were code.",
            "  </li>",
            "  <li>",
            "    <strong>Babel</strong> - a JavaScript transpiler. It turns your modern",
            "    JS code (ES6, ECMAScript2015, 2016, ES7, whatever you call it) into",
            "    code that can run on real world browsers. It‚Äôs the ecosystem‚Äôs answer",
            "    to slow browser adoption.",
            "  </li>",
            "  <li>",
            "    <strong>ESLint</strong> - linting! It annoys you when you write code",
            "    that is bad. This is a good thing. üòÑ",
            "  </li>",
            "  <li>",
            "    <strong>Jest</strong> - a test runner. Having tests set up from the",
            "    beginning of a project is a good idea. We won‚Äôt really write tests in",
            "    this book, but I will show you how it‚Äôs done.",
            "  </li>",
            "</ul>",
            "<p>",
            "  All tools come preconfigured with sane defaults and ready to use. You",
            "  have no idea how revolutionary this is. Check the appendixes to see how",
            "  hard setting up an environment used to be. I‚Äôm so happy that",
            "  <code style=\"white-space: pre-wrap;\">create-react-app</code> exists.",
            "</p>",
            "<hr />",
            "<p>",
            "  Besides the toolchain,",
            "  <code style=\"white-space: pre-wrap;\">create-react-app</code> also gives",
            "  you a default directory structure and a ton of helpful docs.",
            "</p>",
            "<p>",
            "  You should read the",
            "  <code style=\"white-space: pre-wrap;\">README.md</code> file. It‚Äôs full of",
            "  great advice, and it goes into more detail about the app generator than",
            "  we can get into here. The team also makes sure it‚Äôs kept up-to-date.",
            "</p>",
            "<p>",
            "  All of the code samples in this book are going to follow the default",
            "  directory structure. Public assets like HTML files, datasets, and some",
            "  images go into <code style=\"white-space: pre-wrap;\">public/</code>. Code",
            "  goes into <code style=\"white-space: pre-wrap;\">src/</code>.",
            "</p>",
            "<p>",
            "  Code is anything that we",
            "  <code style=\"white-space: pre-wrap;\">import</code> or",
            "  <code style=\"white-space: pre-wrap;\">require()</code>. That includes",
            "  JavaScript files themselves, as well as stylesheets and images.",
            "</p>",
            "<p>",
            "  You can poke around",
            "  <code style=\"white-space: pre-wrap;\">src/App.js</code> to see how it‚Äôs",
            "  structured and what happens when you change something. You‚Äôre going to",
            "  change bits and pieces of this file as you go through the book.",
            "</p>",
            "<p>",
            "  I suggest you keep",
            "  <code style=\"white-space: pre-wrap;\">npm start</code> running at all",
            "  times while coding. The browser will refresh on every code change, so",
            "  you‚Äôll be able to see instant results.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "Install extra dependencies",
          "lectureLines": [
            "<h2 id=\"install-dependencies\">",
            "  Install dependencies for React for Datavisualization",
            "</h2>",
            "<p>",
            "  There are a couple of libraries we‚Äôre going to use often in this book:",
            "  D3, Topojson, and Lodash. We‚Äôre using D3 to do our heavy lifting,",
            "  Topojson to parse geographical data, and Lodash to make data manipulation",
            "  easier.",
            "</p>",
            "<p>You can install them like this:</p>",
            "<pre",
            "  data-caption=\"Install dependencies\"",
            "><code style=\"white-space: pre-wrap;\">$ npm install --save d3 topojson lodash</code></pre>",
            "<p>",
            "  Additionally, we‚Äôre using Bootstrap for default styling and String for",
            "  string manipulation. You should install them as well.",
            "</p>",
            "<pre",
            "  data-caption=\"Styling and string manipulation\"",
            "><code style=\"white-space: pre-wrap;\">$ npm install --save bootstrap string</code></pre>",
            "<p>",
            "  Now your environment is ready! You should see a default React App page in",
            "  the browser without errors. Keep",
            "  <code style=\"white-space: pre-wrap;\">npm start</code> running as you",
            "  follow the examples in this book.",
            "</p>",
            "<p>",
            "  Some examples are going to need other libraries. When that happens, I‚Äôll",
            "  remind you to install them.",
            "</p>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "176,113 tech salaries visualized ‚Äì¬†a dataviz dashboard",
      "lectures": [
        {
          "lectureTitle": "176,113 tech salaries visualized",
          "lectureLines": [
            "<h1 id=\"salary-visualization\">",
            "  A big example project - 176,113 tech salaries visualized",
            "</h1>",
            "<p>We‚Äôre going to build this:</p>",
            "<p>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/full-dataviz.png\"",
            "  />",
            "</p>",
            "<p>",
            "  An interactive visualization dashboard app with a choropleth map and a",
            "  histogram comparing tech salaries to median household income in the area.",
            "  Users can filter by year, job title, or US state to get a better view.",
            "</p>",
            "<p>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/interaction-dataviz.png\"",
            "  />",
            "</p>",
            "<p>It‚Äôs going to be great.</p>",
            "<p>",
            "  At this point, I assume you‚Äôve used",
            "  <code style=\"white-space: pre-wrap;\">create-react-app</code> to set up",
            "  your environment. Check the",
            "  <a",
            "    href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6888622#getting-started\"",
            "    >getting started</a",
            "  >",
            "  section if you haven‚Äôt. I‚Äôm also assuming you‚Äôve read the",
            "  <a",
            "    href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6887708#the-meat-start\"",
            "    >basics chapter</a",
            "  >. I‚Äôm still going to explain what we‚Äôre doing, but knowing the basics",
            "  helps.",
            "</p>",
            "<p>",
            "  I suggest you follow along, keep",
            "  <code style=\"white-space: pre-wrap;\">npm start</code> running, and watch",
            "  your visualization change in real time as you code. It‚Äôs rewarding as",
            "  hell.",
            "</p>",
            "<p>",
            "  If you get stuck, you can use my",
            "  <a href=\"https://github.com/Swizec/react-d3-walkthrough-livecode\"",
            "    >react-d3-walkthrough-livecode</a",
            "  >",
            "  to jump between steps. The",
            "  <a",
            "    href=\"https://github.com/Swizec/react-d3-walkthrough-livecode/commits/master\"",
            "    >commits</a",
            "  >",
            "  correspond to the code at the end of each step. Check out the first",
            "  commit and run <code style=\"white-space: pre-wrap;\">npm install</code> to",
            "  skip the initial setup.",
            "</p>",
            "<p>",
            "  If you want to see how this project evolved over 22 months, check",
            "  <a href=\"https://github.com/Swizec/h1b-software-salaries\"",
            "    >the original repo</a",
            "  >. The",
            "  <a",
            "    href=\"https://github.com/Swizec/h1b-software-salaries/tree/modern-code\"",
            "    >modern-code</a",
            "  >",
            "  branch has the code you‚Äôre about to build.",
            "</p>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "Show a Preloader",
      "lectures": [
        {
          "lectureTitle": "Show a Preloader",
          "lectureLines": [
            "<h1 id=\"show-a-preloader\">Show a Preloader</h1>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/preloader-screenshot.png\"",
            "    alt=\"Preloader screenshot\"",
            "  />",
            "  <figcaption>Preloader screenshot</figcaption>",
            "</figure>",
            "<p>",
            "  Our preloader is a screenshot of the final result. Usually you‚Äôd have to",
            "  wait until the end of the project to make that, but I‚Äôll just give you",
            "  mine. Starting with the preloader makes sense for two reasons:",
            "</p>",
            "<ol type=\"1\">",
            "  <li>It‚Äôs nicer than looking at a blank screen while data loads</li>",
            "  <li>It‚Äôs a good sanity check for our environment</li>",
            "</ol>",
            "<p>",
            "  We‚Äôre using a screenshot of the final result because the full dataset",
            "  takes a few seconds to load, parse, and render. It looks better if",
            "  visitors see something informative while they wait.",
            "</p>",
            "<p>",
            "  React Suspense is about to make building preloaders a whole lot better.",
            "  Adapting to the user‚Äôs network speed, built-in preload functionality,",
            "  stuff like that. More on that in the chapter on React Suspense and Time",
            "  Slicing.",
            "</p>",
            "<p>",
            "  Make sure you‚Äôve installed",
            "  <a",
            "    href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6888625#install-dependencies\"",
            "    >all dependencies</a",
            "  >",
            "  and that <code style=\"white-space: pre-wrap;\">npm start</code> is",
            "  running.",
            "</p>",
            "<p>We‚Äôre building our preloader in 4 steps:</p>",
            "<ol type=\"1\">",
            "  <li>Get the image</li>",
            "  <li>",
            "    Make the",
            "    <code style=\"white-space: pre-wrap;\">Preloader</code> component",
            "  </li>",
            "  <li>Update <code style=\"white-space: pre-wrap;\">App</code></li>",
            "  <li>",
            "    Load Bootstrap styles in",
            "    <code style=\"white-space: pre-wrap;\">index.js</code>",
            "  </li>",
            "</ol>"
          ]
        },
        {
          "lectureTitle": "Step1: get image",
          "lectureLines": [
            "<h2 id=\"step-1-get-the-image\">Step 1: Get the image</h2>",
            "<p>",
            "  Download",
            "  <a",
            "    href=\"https://github.com/Swizec/react-d3-walkthrough-livecode/raw/master/src/assets/preloading.png\"",
            "    >my screenshot from Github</a",
            "  >",
            "  and save it in",
            "  <code style=\"white-space: pre-wrap;\">src/assets/preloading.png</code>. It",
            "  goes in the",
            "  <code style=\"white-space: pre-wrap;\">src/assets/</code> directory because",
            "  we‚Äôre going to <code style=\"white-space: pre-wrap;\">import</code> it in",
            "  JavaScript (which makes it part of our source code), and I like to put",
            "  non-JavaScript files in",
            "  <code style=\"white-space: pre-wrap;\">assets</code>. Keeps the project",
            "  organized.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "Step 2: make component",
          "lectureLines": [
            "<h2 id=\"step-2-preloader-component\">Step 2: Preloader component</h2>",
            "<p>",
            "  Our <code style=\"white-space: pre-wrap;\">Preloader</code> is a small",
            "  component that pretends it‚Äôs the",
            "  <code style=\"white-space: pre-wrap;\">App</code> and renders a static",
            "  title, description, and a screenshot of the end result. It goes in",
            "  <code style=\"white-space: pre-wrap;\">src/components/Preloader.js</code>.",
            "</p>",
            "<p>",
            "  We‚Äôll put all of our components in",
            "  <code style=\"white-space: pre-wrap;\">src/components/</code>.",
            "</p>",
            "<p>",
            "  We start the component off with some imports, an export, and a functional",
            "  stateless component that returns an empty div element.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb54\"",
            "  data-caption=\"Preloader skeleton\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb54-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Preloader.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb54-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb54-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;react&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb54-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb54-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> PreloaderImg <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;../assets/preloading.png&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb54-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb54-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> Preloader <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb54-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>div className<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;App container&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb54-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb54-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb54-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb54-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb54-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> Preloader<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  We <code style=\"white-space: pre-wrap;\">import</code> React (which we",
            "  need to make JSX syntax work) and the",
            "  <code style=\"white-space: pre-wrap;\">PreloaderImg</code> for our image.",
            "  We can import images because of the Webpack configuration that comes with",
            "  <code style=\"white-space: pre-wrap;\">create-react-app</code>. The webpack",
            "  image loader returns a URL that we put in the",
            "  <code style=\"white-space: pre-wrap;\">PreloaderImg</code> constant.",
            "</p>",
            "<p>",
            "  At the bottom, we",
            "  <code style=\"white-space: pre-wrap;\">export default Preloader</code> so",
            "  that we can use it in",
            "  <code style=\"white-space: pre-wrap;\">App.js</code> as",
            "  <code style=\"white-space: pre-wrap;\">import Preloader</code>. Default",
            "  exports are great when your file exports a single object. Named exports",
            "  when you want to export multiple items. You‚Äôll see that play out in the",
            "  rest of this project.",
            "</p>",
            "<p>",
            "  The <code style=\"white-space: pre-wrap;\">Preloader</code> function takes",
            "  no props (because we don‚Äôt need any) and returns an empty",
            "  <code style=\"white-space: pre-wrap;\">div</code>. Let‚Äôs fill it in.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb55\"",
            "  data-caption=\"Preloader content\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb55-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Preloader.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb55-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb55-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> Preloader <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb55-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>div className<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;App container&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb55-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>h1<span class=\"op\" style=\"color: #666666;\">&gt;</span>The average H1B <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">in</span> tech pays $86<span class=\"op\" style=\"color: #666666;\">,</span><span class=\"dv\" style=\"color: #40a070;\">164</span>/year&lt;/h1<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb55-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>p className<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;lead&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb55-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            Since <span class=\"dv\" style=\"color: #40a070;\">2012</span> the US tech industry has sponsored <span class=\"dv\" style=\"color: #40a070;\">176</span><span class=\"op\" style=\"color: #666666;\">,</span><span class=\"dv\" style=\"color: #40a070;\">075</span> H1B work</a>",
            "<a class=\"sourceLine\" id=\"cb55-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"va\" style=\"color: #19177c;\">visas</span>. <span class=\"at\" style=\"color: #7d9029;\">Most</span> of them paid <span class=\"op\" style=\"color: #666666;\">&lt;</span>b<span class=\"op\" style=\"color: #666666;\">&gt;</span>$60<span class=\"op\" style=\"color: #666666;\">,</span><span class=\"dv\" style=\"color: #40a070;\">660</span> to $111<span class=\"op\" style=\"color: #666666;\">,</span><span class=\"dv\" style=\"color: #40a070;\">668</span>&lt;/b<span class=\"op\" style=\"color: #666666;\">&gt;</span> per <span class=\"at\" style=\"color: #7d9029;\">year</span> (<span class=\"dv\" style=\"color: #40a070;\">1</span></a>",
            "<a class=\"sourceLine\" id=\"cb55-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            standard deviation).<span class=\"op\" style=\"color: #666666;\">{</span><span class=\"st\" style=\"color: #4070a0;\">&quot; &quot;</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb55-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>span<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb55-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                The best city <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">for</span> an H1B is <span class=\"op\" style=\"color: #666666;\">&lt;</span>b<span class=\"op\" style=\"color: #666666;\">&gt;</span>Kirkland<span class=\"op\" style=\"color: #666666;\">,</span> WA&lt;/b<span class=\"op\" style=\"color: #666666;\">&gt;</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">with</span> an average</a>",
            "<a class=\"sourceLine\" id=\"cb55-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                individual salary <span class=\"op\" style=\"color: #666666;\">&lt;</span>b<span class=\"op\" style=\"color: #666666;\">&gt;</span>$39<span class=\"op\" style=\"color: #666666;\">,</span><span class=\"dv\" style=\"color: #40a070;\">465</span> above local household median&lt;/b<span class=\"op\" style=\"color: #666666;\">&gt;</span>.</a>",
            "<a class=\"sourceLine\" id=\"cb55-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                Median household salary is a good proxy <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">for</span> cost of living <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">in</span> an</a>",
            "<a class=\"sourceLine\" id=\"cb55-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"va\" style=\"color: #19177c;\">area</span>.</a>",
            "<a class=\"sourceLine\" id=\"cb55-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            &lt;/span<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb55-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        &lt;/p<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb55-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>img</a>",
            "<a class=\"sourceLine\" id=\"cb55-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            src<span class=\"op\" style=\"color: #666666;\">={</span>PreloaderImg<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb55-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            style<span class=\"op\" style=\"color: #666666;\">={{</span> <span class=\"dt\">width</span><span class=\"op\">:</span> <span class=\"st\">&quot;100%&quot;</span> <span class=\"op\">}}</span></a>",
            "<a class=\"sourceLine\" id=\"cb55-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            alt<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;Loading preview&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb55-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb55-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>h2 className<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;text-center&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span>Loading <span class=\"va\" style=\"color: #19177c;\">data</span> ...&lt;/h2<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb55-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb55-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  A little cheating with grabbing copy from the future, but that‚Äôs okay. In",
            "  real life you‚Äôd use some temporary text, then fill it in later.",
            "</p>",
            "<p>",
            "  The code itself looks like HTML. We have the usual tags -",
            "  <code style=\"white-space: pre-wrap;\">h1</code>,",
            "  <code style=\"white-space: pre-wrap;\">p</code>,",
            "  <code style=\"white-space: pre-wrap;\">b</code>,",
            "  <code style=\"white-space: pre-wrap;\">img</code>, and",
            "  <code style=\"white-space: pre-wrap;\">h2</code>. That‚Äôs what I like about",
            "  JSX: it‚Äôs familiar. Even if you don‚Äôt know React, you can guess what‚Äôs",
            "  going on here.",
            "</p>",
            "<p>",
            "  But look at the <code style=\"white-space: pre-wrap;\">img</code> tag: the",
            "  <code style=\"white-space: pre-wrap;\">src</code> attribute is dynamic,",
            "  defined by <code style=\"white-space: pre-wrap;\">PreloaderImg</code>, and",
            "  the <code style=\"white-space: pre-wrap;\">style</code> attribute takes an",
            "  object, not a string. That‚Äôs because JSX is more than HTML; it‚Äôs",
            "  JavaScript. Think of props as function arguments ‚Äì¬†any valid JavaScript",
            "  fits.",
            "</p>",
            "<p>That will be a cornerstone of our project.</p>"
          ]
        },
        {
          "lectureTitle": "Step 3: Update App",
          "lectureLines": [
            "<h2 id=\"step-3-update-app\">Step 3: Update App</h2>",
            "<p>",
            "  We use our new Preloader component in App ‚Äì",
            "  <code style=\"white-space: pre-wrap;\">src/App.js</code>. Let‚Äôs remove the",
            "  <code style=\"white-space: pre-wrap;\">create-react-app</code> defaults and",
            "  import our",
            "  <code style=\"white-space: pre-wrap;\">Preloader</code> component.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb56\"",
            "  data-caption=\"Revamp App.js\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb56-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/App.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb56-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb56-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;react&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb56-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Delete the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb56-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> logo <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./logo.svg&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb56-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./App.css&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb56-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb56-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb56-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb56-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> Preloader <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./components/Preloader&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb56-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb56-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb56-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> App <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb56-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Delete the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb56-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb56-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb56-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>div className<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;App&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb56-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>div className<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;App-header&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb56-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          <span class=\"op\" style=\"color: #666666;\">&lt;</span>img src<span class=\"op\" style=\"color: #666666;\">={</span>logo<span class=\"op\" style=\"color: #666666;\">}</span> className<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;App-logo&quot;</span> alt<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;logo&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb56-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          <span class=\"op\" style=\"color: #666666;\">&lt;</span>h2<span class=\"op\" style=\"color: #666666;\">&gt;</span>Welcome to React&lt;/h2<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb56-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb56-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>p className<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;App-intro&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb56-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          To get started<span class=\"op\" style=\"color: #666666;\">,</span> edit <span class=\"op\" style=\"color: #666666;\">&lt;</span>code<span class=\"op\" style=\"color: #666666;\">&gt;</span>src/<span class=\"va\" style=\"color: #19177c;\">App</span>.<span class=\"at\" style=\"color: #7d9029;\">js</span>&lt;/code<span class=\"op\" style=\"color: #666666;\">&gt;</span> and save to <span class=\"va\" style=\"color: #19177c;\">reload</span>.</a>",
            "<a class=\"sourceLine\" id=\"cb56-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        &lt;/p<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb56-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb56-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb56-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb56-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb56-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb56-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb56-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> App<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  We removed the logo and style imports, added an import for",
            "  <code style=\"white-space: pre-wrap;\">Preloader</code>, and gutted the",
            "  <code style=\"white-space: pre-wrap;\">App</code> class. It‚Äôs great for a",
            "  default app, but we don‚Äôt need that anymore.",
            "</p>",
            "<p>",
            "  Let‚Äôs define a default",
            "  <code style=\"white-space: pre-wrap;\">state</code> and a",
            "  <code style=\"white-space: pre-wrap;\">render</code> method that uses our",
            "  <code style=\"white-space: pre-wrap;\">Preloader</code> component when",
            "  there‚Äôs no data.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb57\"",
            "  data-caption=\"Render our preloader\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb57-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/App.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb57-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb57-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> App <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb57-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb57-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    state <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb57-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">techSalaries</span><span class=\"op\" style=\"color: #666666;\">:</span> []</a>",
            "<a class=\"sourceLine\" id=\"cb57-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb57-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb57-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb57-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> techSalaries <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb57-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb57-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (<span class=\"va\" style=\"color: #19177c;\">techSalaries</span>.<span class=\"at\" style=\"color: #7d9029;\">length</span> <span class=\"op\" style=\"color: #666666;\">&lt;</span> <span class=\"dv\" style=\"color: #40a070;\">1</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb57-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb57-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&lt;</span>Preloader /<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb57-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb57-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb57-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb57-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb57-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>div className<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;App&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb57-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb57-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb57-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb57-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb57-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb57-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  Nowadays we can define properties directly in the class body without a",
            "  constructor method. It‚Äôs not part of the official JavaScript standard",
            "  yet, but most React codebases use this pattern.",
            "</p>",
            "<p>",
            "  Properties defined this way are bound to each instance of our components",
            "  so they have the correct",
            "  <code style=\"white-space: pre-wrap;\">this</code> value. Late you‚Äôll see",
            "  we can use this shorthand to neatly define event handlers.",
            "</p>",
            "<p>",
            "  We set <code style=\"white-space: pre-wrap;\">techSalaries</code> to an",
            "  empty array by default. In",
            "  <code style=\"white-space: pre-wrap;\">render</code> we use object",
            "  destructuring to take",
            "  <code style=\"white-space: pre-wrap;\">techSalaries</code> out of component",
            "  state, <code style=\"white-space: pre-wrap;\">this.state</code>, and check",
            "  whether it‚Äôs empty. When",
            "  <code style=\"white-space: pre-wrap;\">techSalaries</code> is empty our",
            "  component renders the preloader, otherwise an empty div.",
            "</p>",
            "<p>",
            "  If your <code style=\"white-space: pre-wrap;\">npm start</code> is running,",
            "  the preloader should show up on your screen.",
            "</p>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/preloader-without-styles-screenshot.png\"",
            "    alt=\"Preloader without Bootstrap styles\"",
            "  />",
            "  <figcaption>Preloader without Bootstrap styles</figcaption>",
            "</figure>",
            "<p>Hmm‚Ä¶ that‚Äôs not very pretty. Let‚Äôs fix it.</p>"
          ]
        },
        {
          "lectureTitle": "Step 4: Load styles",
          "lectureLines": [
            "<h2 id=\"step-4-load-bootstrap-styles\">Step 4: Load Bootstrap styles</h2>",
            "<p>",
            "  We‚Äôre going to use Bootstrap styles to avoid reinventing the wheel. We‚Äôre",
            "  ignoring their JavaScript widgets and the amazing integration built by",
            "  the",
            "  <a href=\"https://react-bootstrap.github.io/\">react-bootstrap</a> team.",
            "  Just the stylesheets please.",
            "</p>",
            "<p>",
            "  They‚Äôll make our fonts look better, help with layouting, and make buttons",
            "  look like buttons. We <em>could</em> use styled components, but writing",
            "  our own styles detracts from this tutorial.",
            "</p>",
            "<p>",
            "  We load stylesheets in",
            "  <code style=\"white-space: pre-wrap;\">src/index.js</code>.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb58\"",
            "  data-caption=\"Add Bootstrap in index.js\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb58-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/index.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb58-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb58-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;react&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb58-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> ReactDOM <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;react-dom&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb58-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> App <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./App&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb58-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb58-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;bootstrap/dist/css/bootstrap.css&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb58-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb58-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb58-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"va\" style=\"color: #19177c;\">ReactDOM</span>.<span class=\"at\" style=\"color: #7d9029;\">render</span>(</a>",
            "<a class=\"sourceLine\" id=\"cb58-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">&lt;</span>App /<span class=\"op\" style=\"color: #666666;\">&gt;,</span></a>",
            "<a class=\"sourceLine\" id=\"cb58-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">document</span>.<span class=\"at\" style=\"color: #7d9029;\">getElementById</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;root&#39;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb58-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  Another benefit of Webpack:",
            "  <code style=\"white-space: pre-wrap;\">import</code>-ing stylesheets. These",
            "  imports turn into",
            "  <code style=\"white-space: pre-wrap;\">&lt;style&gt;</code> tags with CSS",
            "  in their body at runtime.",
            "</p>",
            "<p>",
            "  This is also a good opportunity to see how",
            "  <code style=\"white-space: pre-wrap;\">index.js</code> works to render our",
            "  app üëá",
            "</p>",
            "<ol type=\"1\">",
            "  <li>loads <code style=\"white-space: pre-wrap;\">App</code> and React</li>",
            "  <li>loads styles</li>",
            "  <li>",
            "    Uses <code style=\"white-space: pre-wrap;\">ReactDOM</code> to render",
            "    <code style=\"white-space: pre-wrap;\">&lt;App /&gt;</code> into the DOM",
            "  </li>",
            "</ol>",
            "<p>That‚Äôs it.</p>",
            "<p>Your preloader screen should look better now.</p>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/preloader-screenshot.png\"",
            "    alt=\"Preloader screenshot\"",
            "  />",
            "  <figcaption>Preloader screenshot</figcaption>",
            "</figure>",
            "<p>",
            "  If you don‚Äôt, try comparing your changes to this",
            "  <a",
            "    href=\"https://github.com/Swizec/react-d3-walkthrough-livecode/commit/f068b950b7a1a75e9417e126ee53fb7925c27569\"",
            "    >diff on Github</a",
            "  >.",
            "</p>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "Load and parse your data",
      "lectures": [
        {
          "lectureTitle": "Asynchronously load data",
          "lectureLines": [
            "<h1 id=\"asynchronously-load-data\">Asynchronously load data</h1>",
            "<p>Great! We have a preloader. Time to load some data.</p>",
            "<p>",
            "  We‚Äôll use D3‚Äôs built-in data loading methods and tie their promises into",
            "  React‚Äôs component lifecycle. You could talk to a REST API in the same",
            "  way. Neither D3 nor React care what the datasource is.",
            "</p>",
            "<p>First, you need some data.</p>",
            "<p>",
            "  Our dataset comes from a few sources. Tech salaries are from",
            "  <a href=\"https://h1bdata.info\">h1bdata.info</a>, median household incomes",
            "  come from the US census data, and I got US geo map info from Mike",
            "  Bostock‚Äôs github repositories. Some elbow grease and python scripts tied",
            "  them all together.",
            "</p>",
            "<p>",
            "  You can read about the scraping on my blog",
            "  <a",
            "    href=\"https://swizec.com/blog/place-names-county-names-geonames/swizec/7083\"",
            "    >here</a",
            "  >,",
            "  <a href=\"https://swizec.com/blog/facts-us-household-income/swizec/7075\"",
            "    >here</a",
            "  >, and",
            "  <a",
            "    href=\"https://swizec.com/blog/livecoding-24-choropleth-react-js/swizec/7078\"",
            "    >here</a",
            "  >. But it‚Äôs not the subject of this book.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "Step 0: Get data",
          "lectureLines": [
            "<h2 id=\"step-0-get-the-data\">Step 0: Get the data</h2>",
            "<p>",
            "  Download the data files from",
            "  <a",
            "    href=\"https://github.com/Swizec/react-d3-walkthrough-livecode/tree/fa0aa60f3f7ffeb12926553aaeb916a7fa1c4d4f/public/data\"",
            "    >my walkthrough repository on Github</a",
            "  >. Put them in your",
            "  <code style=\"white-space: pre-wrap;\">public/data</code> directory.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "Step 1: Prep App.js",
          "lectureLines": [
            "<h2 id=\"step-1-prep-app.js\">Step 1: Prep App.js</h2>",
            "<p>",
            "  Let‚Äôs set up our",
            "  <code style=\"white-space: pre-wrap;\">App</code> component first. That way",
            "  you‚Äôll see results as soon data loading starts to work.",
            "</p>",
            "<p>",
            "  Start by importing our data loading method -",
            "  <code style=\"white-space: pre-wrap;\">loadAllData</code> - and both D3 and",
            "  Lodash. We‚Äôll need them later.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb59\"",
            "  data-caption=\"Import D3\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb59-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/App.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb59-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;react&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb59-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb59-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"im\">as</span> d3 <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;d3&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb59-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> _ <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;lodash&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb59-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb59-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb59-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> Preloader <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./components/Preloader&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb59-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb59-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">{</span> loadAllData <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./DataHandling&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb59-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a></code></pre>",
            "</div>",
            "<p>",
            "  You already know about default imports. Importing with",
            "  <code style=\"white-space: pre-wrap;\">{}</code> is how we import named",
            "  exports. That lets us get multiple things from the same file. You‚Äôll see",
            "  the export side in Step 2.",
            "</p>",
            "<p>",
            "  Don‚Äôt worry about the missing",
            "  <code style=\"white-space: pre-wrap;\">DataHandling</code> file. It‚Äôs",
            "  coming soon.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb60\"",
            "  data-caption=\"Initiate data loading in App.js\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb60-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/App.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb60-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> App <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb60-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    state <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb60-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">techSalaries</span><span class=\"op\" style=\"color: #666666;\">:</span> []<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb60-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb60-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">medianIncomes</span><span class=\"op\" style=\"color: #666666;\">:</span> []<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb60-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">countyNames</span><span class=\"op\" style=\"color: #666666;\">:</span> []<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb60-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb60-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb60-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">componentDidMount</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb60-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"at\" style=\"color: #7d9029;\">loadAllData</span>(data <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">setState</span>(data))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb60-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb60-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a></code></pre>",
            "</div>",
            "<p>",
            "  We initiate data loading inside the",
            "  <code style=\"white-space: pre-wrap;\">componentDidMount</code> lifecycle",
            "  hook. It fires when React first mounts our component into the DOM.",
            "</p>",
            "<p>",
            "  I like to tie data loading to component mounts because it means you",
            "  aren‚Äôt making requests you‚Äôll never use. In a bigger app, you‚Äôd use",
            "  Redux, MobX, or similar to decouple loading from rendering. Many reasons",
            "  why.",
            "</p>",
            "<p>",
            "  To load our data, we call the",
            "  <code style=\"white-space: pre-wrap;\">loadAllData</code> function, then",
            "  use <code style=\"white-space: pre-wrap;\">this.setState</code> in the",
            "  callback. This updates <code style=\"white-space: pre-wrap;\">App</code>‚Äôs",
            "  state and triggers a re-render, which updates our entire visualization",
            "  via props.",
            "</p>",
            "<p>",
            "  Yes, it <em>would</em> be better to make",
            "  <code style=\"white-space: pre-wrap;\">loadAllData</code> return a promise",
            "  instead of expecting a callback. That was giving me trouble for some",
            "  reason and it doesn‚Äôt matter right now anyway.",
            "</p>",
            "<p>",
            "  We also add two more entries to our",
            "  <code style=\"white-space: pre-wrap;\">state</code>:",
            "  <code style=\"white-space: pre-wrap;\">countyNames</code>, and",
            "  <code style=\"white-space: pre-wrap;\">medianIncomes</code>. Defining",
            "  what‚Äôs in your component state in advance makes your code easier to read.",
            "  People, including you, know what to expect.",
            "</p>",
            "<p>",
            "  Let‚Äôs change the",
            "  <code style=\"white-space: pre-wrap;\">render</code> method to show a",
            "  message when our data finishes loading.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb61\"",
            "  data-caption=\"Show when data loads\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb61-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/App.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb61-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb61-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">     <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> techSalaries <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb61-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb61-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">     <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (<span class=\"va\" style=\"color: #19177c;\">techSalaries</span>.<span class=\"at\" style=\"color: #7d9029;\">length</span> <span class=\"op\" style=\"color: #666666;\">&lt;</span> <span class=\"dv\" style=\"color: #40a070;\">1</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb61-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">         <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb61-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">             <span class=\"op\" style=\"color: #666666;\">&lt;</span>Preloader /<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb61-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">         )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb61-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb61-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb61-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb61-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Delete the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb61-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>div className<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;App&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb61-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb61-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb61-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>div className<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;App container&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb61-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>h1<span class=\"op\" style=\"color: #666666;\">&gt;</span>Loaded <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"va\" style=\"color: #19177c;\">techSalaries</span>.<span class=\"at\" style=\"color: #7d9029;\">length</span><span class=\"op\" style=\"color: #666666;\">}</span> salaries&lt;/h1<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb61-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb61-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb61-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb61-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  We added a <code style=\"white-space: pre-wrap;\">container</code> class to",
            "  the main <code style=\"white-space: pre-wrap;\">&lt;div&gt;</code> and an",
            "  <code style=\"white-space: pre-wrap;\">&lt;h1&gt;</code> tag that shows how",
            "  many datapoints there are. You can use any valid JavaScript in curly",
            "  braces <code style=\"white-space: pre-wrap;\">{}</code> and JSX will",
            "  evaluate it. By convention we only use that ability to calculate display",
            "  values.",
            "</p>",
            "<p>You should now get an error overlay.</p>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/datahandling-error.png\"",
            "    alt=\"DataHandling.js not found error overlay\"",
            "  />",
            "  <figcaption>DataHandling.js not found error overlay</figcaption>",
            "</figure>",
            "<p>",
            "  These nice error overlays come with",
            "  <code style=\"white-space: pre-wrap;\">create-react-app</code> and make",
            "  your code easier to debug. No hunting around in the terminal to see",
            "  compilation errors.",
            "</p>",
            "<p>Let‚Äôs build that file and fill it with our data loading logic.</p>"
          ]
        },
        {
          "lectureTitle": "Step 2: Prep data parsing functions",
          "lectureLines": [
            "<h2 id=\"step-2-prep-data-parsing-functions\">",
            "  Step 2: Prep data parsing functions",
            "</h2>",
            "<p>",
            "  We‚Äôre putting data loading logic in a separate file from",
            "  <code style=\"white-space: pre-wrap;\">App.js</code> because it‚Äôs a bunch",
            "  of functions that work together and don‚Äôt have much to do with the",
            "  <code style=\"white-space: pre-wrap;\">App</code> component itself.",
            "</p>",
            "<p>We start with two imports and four data parsing functions:</p>",
            "<ul>",
            "  <li>",
            "    <code style=\"white-space: pre-wrap;\">cleanIncome</code>, which parses",
            "    each row of household income data",
            "  </li>",
            "  <li>",
            "    <code style=\"white-space: pre-wrap;\">dateParse</code>, which we use for",
            "    parsing dates",
            "  </li>",
            "  <li>",
            "    <code style=\"white-space: pre-wrap;\">cleanSalary</code>, which parses",
            "    each row of salary data",
            "  </li>",
            "  <li>",
            "    <code style=\"white-space: pre-wrap;\">cleanUSStateName</code>, which",
            "    parses US state names",
            "  </li>",
            "</ul>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb62\"",
            "  data-caption=\"Data parsing functions\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb62-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/DataHandling.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"im\">as</span> d3 <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;d3&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> _ <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;lodash&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb62-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> cleanIncome <span class=\"op\" style=\"color: #666666;\">=</span> (d) <span class=\"op\" style=\"color: #666666;\">=&gt;</span> (<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">countyName</span><span class=\"op\" style=\"color: #666666;\">:</span> d[<span class=\"st\" style=\"color: #4070a0;\">&#39;Name&#39;</span>]<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">USstate</span><span class=\"op\" style=\"color: #666666;\">:</span> d[<span class=\"st\" style=\"color: #4070a0;\">&#39;State&#39;</span>]<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">medianIncome</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"at\" style=\"color: #7d9029;\">Number</span>(d[<span class=\"st\" style=\"color: #4070a0;\">&#39;Median Household Income&#39;</span>])<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">lowerBound</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"at\" style=\"color: #7d9029;\">Number</span>(d[<span class=\"st\" style=\"color: #4070a0;\">&#39;90% CI Lower Bound&#39;</span>])<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">upperBound</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"at\" style=\"color: #7d9029;\">Number</span>(d[<span class=\"st\" style=\"color: #4070a0;\">&#39;90% CI Upper Bound&#39;</span>])</a>",
            "<a class=\"sourceLine\" id=\"cb62-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb62-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> dateParse <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">timeParse</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;%m/%d/%Y&quot;</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb62-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> cleanSalary <span class=\"op\" style=\"color: #666666;\">=</span> (d) <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (<span class=\"op\" style=\"color: #666666;\">!</span>d[<span class=\"st\" style=\"color: #4070a0;\">&#39;base salary&#39;</span>] <span class=\"op\" style=\"color: #666666;\">||</span> <span class=\"at\" style=\"color: #7d9029;\">Number</span>(d[<span class=\"st\" style=\"color: #4070a0;\">&#39;base salary&#39;</span>]) <span class=\"op\" style=\"color: #666666;\">&gt;</span> <span class=\"dv\" style=\"color: #40a070;\">300000</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">null</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb62-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"dt\" style=\"color: #902000;\">employer</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">employer</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">submit_date</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"at\" style=\"color: #7d9029;\">dateParse</span>(d[<span class=\"st\" style=\"color: #4070a0;\">&#39;submit date&#39;</span>])<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">start_date</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"at\" style=\"color: #7d9029;\">dateParse</span>(d[<span class=\"st\" style=\"color: #4070a0;\">&#39;start date&#39;</span>])<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">case_status</span><span class=\"op\" style=\"color: #666666;\">:</span> d[<span class=\"st\" style=\"color: #4070a0;\">&#39;case status&#39;</span>]<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">job_title</span><span class=\"op\" style=\"color: #666666;\">:</span> d[<span class=\"st\" style=\"color: #4070a0;\">&#39;job title&#39;</span>]<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">clean_job_title</span><span class=\"op\" style=\"color: #666666;\">:</span> d[<span class=\"st\" style=\"color: #4070a0;\">&#39;job title&#39;</span>]<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">base_salary</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"at\" style=\"color: #7d9029;\">Number</span>(d[<span class=\"st\" style=\"color: #4070a0;\">&#39;base salary&#39;</span>])<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">city</span><span class=\"op\" style=\"color: #666666;\">:</span> d[<span class=\"st\" style=\"color: #4070a0;\">&#39;city&#39;</span>]<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">USstate</span><span class=\"op\" style=\"color: #666666;\">:</span> d[<span class=\"st\" style=\"color: #4070a0;\">&#39;state&#39;</span>]<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">county</span><span class=\"op\" style=\"color: #666666;\">:</span> d[<span class=\"st\" style=\"color: #4070a0;\">&#39;county&#39;</span>]<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">countyID</span><span class=\"op\" style=\"color: #666666;\">:</span> d[<span class=\"st\" style=\"color: #4070a0;\">&#39;countyID&#39;</span>]</a>",
            "<a class=\"sourceLine\" id=\"cb62-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb62-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> cleanUSStateName <span class=\"op\" style=\"color: #666666;\">=</span> (d) <span class=\"op\" style=\"color: #666666;\">=&gt;</span> (<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">code</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">code</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-36\" title=\"36\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">id</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"at\" style=\"color: #7d9029;\">Number</span>(<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">id</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-37\" title=\"37\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">name</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">name</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-38\" title=\"38\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-39\" title=\"39\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb62-40\" title=\"40\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> cleanCounty <span class=\"op\" style=\"color: #666666;\">=</span> d <span class=\"op\" style=\"color: #666666;\">=&gt;</span> (<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-41\" title=\"41\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">id</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"at\" style=\"color: #7d9029;\">Number</span>(<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">id</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-42\" title=\"42\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">name</span><span class=\"op\" style=\"color: #666666;\">:</span> name</a>",
            "<a class=\"sourceLine\" id=\"cb62-43\" title=\"43\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  You‚Äôll see those <code style=\"white-space: pre-wrap;\">d3</code> and",
            "  <code style=\"white-space: pre-wrap;\">lodash</code> imports a lot.",
            "</p>",
            "<p>",
            "  Our data parsing functions all follow the same approach: Take a row of",
            "  data as <code style=\"white-space: pre-wrap;\">d</code>, return a",
            "  dictionary with nicer key names, cast any numbers or dates into",
            "  appropriate formats. They all start as strings.",
            "</p>",
            "<p>",
            "  Doing all this parsing now, keeps the rest of our codebase clean.",
            "  Handling data is always messy. You want to contain that mess as much as",
            "  possible.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "Step 3: Load the datasets",
          "lectureLines": [
            "<h2 id=\"step-3-load-the-datasets\">Step 3: Load the datasets</h2>",
            "<p>Now we can use D3 to load our data with fetch requests.</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb63\"",
            "  data-caption=\"Data loading\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb63-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/DataHandling.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb63-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> loadAllData <span class=\"op\" style=\"color: #666666;\">=</span> (callback <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">_</span>.<span class=\"at\" style=\"color: #7d9029;\">noop</span>) <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb63-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">Promise</span>.<span class=\"at\" style=\"color: #7d9029;\">all</span>([</a>",
            "<a class=\"sourceLine\" id=\"cb63-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">json</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;data/us.json&quot;</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb63-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">csv</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;data/us-county-names-normalized.csv&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> cleanCounty)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb63-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">csv</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;data/county-median-incomes.csv&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> cleanIncome)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb63-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">csv</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;data/h1bs-2012-2016-shortened.csv&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> cleanSalary)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb63-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">tsv</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;data/us-state-names.tsv&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> cleanUSStateName)</a>",
            "<a class=\"sourceLine\" id=\"cb63-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    ]).<span class=\"at\" style=\"color: #7d9029;\">then</span>(([us<span class=\"op\" style=\"color: #666666;\">,</span> countyNames<span class=\"op\" style=\"color: #666666;\">,</span> medianIncomes<span class=\"op\" style=\"color: #666666;\">,</span> techSalaries<span class=\"op\" style=\"color: #666666;\">,</span> USstateNames]) <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb63-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb63-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb63-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">};</span></a></code></pre>",
            "</div>",
            "<p>",
            "  Here you can see another ES6 trick: default argument values. If",
            "  <code style=\"white-space: pre-wrap;\">callback</code> is undefined, we set",
            "  it to <code style=\"white-space: pre-wrap;\">_.noop</code> - a function",
            "  that does nothing. This lets us later call",
            "  <code style=\"white-space: pre-wrap;\">callback()</code> without worrying",
            "  whether it‚Äôs defined.",
            "</p>",
            "<p>",
            "  In version 5, D3 updated its data loading methods to use promises instead",
            "  of callbacks. You can load a single file using",
            "  <code style=\"white-space: pre-wrap;\"",
            "    >d3.csv(&quot;filename&quotüòâ.then(data =&gt; ....</code",
            "  >. The promise resolves with your data, or throws an error.",
            "</p>",
            "<p>",
            "  If you‚Äôre on D3v4 and can‚Äôt upgrade, you‚Äôll have to import from",
            "  <code style=\"white-space: pre-wrap;\">d3-fetch</code>.",
            "</p>",
            "<p>",
            "  Each <code style=\"white-space: pre-wrap;\">d3.csv</code> call makes a",
            "  fetch request, parses the fetched CSV file into an array of JavaScript",
            "  dictionaries, and passes each row through the provided cleanup function.",
            "  We pass all median incomes through",
            "  <code style=\"white-space: pre-wrap;\">cleanIncome</code>, salaries through",
            "  <code style=\"white-space: pre-wrap;\">cleanSalary</code>, etc.",
            "</p>",
            "<p>",
            "  To load multiple files, we use",
            "  <code style=\"white-space: pre-wrap;\">Promise.all</code> with a list of",
            "  unresolved promises. Once resolved, our",
            "  <code style=\"white-space: pre-wrap;\">.then</code> handler gets a list of",
            "  results. We use array destructuring to expand that list into our",
            "  respective datasets before running some more logic to tie them together.",
            "</p>",
            "<p>",
            "  D3 supports formats like",
            "  <code style=\"white-space: pre-wrap;\">json</code>,",
            "  <code style=\"white-space: pre-wrap;\">csv</code>,",
            "  <code style=\"white-space: pre-wrap;\">tsv</code>,",
            "  <code style=\"white-space: pre-wrap;\">text</code>, and",
            "  <code style=\"white-space: pre-wrap;\">xml</code> out of the box. You can",
            "  make it work with custom data sources through the underlying",
            "  <code style=\"white-space: pre-wrap;\">request</code> API.",
            "</p>",
            "<p>",
            "  PS: we‚Äôre using the shortened salary dataset to make page reloads faster",
            "  while building our project.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "Step 4: Tie datasets together",
          "lectureLines": [
            "<h2 id=\"tie-datasets-together\">Step 4: Tie the datasets together</h2>",
            "<p>",
            "  If you add a <code style=\"white-space: pre-wrap;\">console.log</code> to",
            "  the <code style=\"white-space: pre-wrap;\">.then</code> callback above,",
            "  you‚Äôll see a bunch of data. Each argument -",
            "  <code style=\"white-space: pre-wrap;\">us</code>,",
            "  <code style=\"white-space: pre-wrap;\">countyNames</code>,",
            "  <code style=\"white-space: pre-wrap;\">medianIncomes</code>,",
            "  <code style=\"white-space: pre-wrap;\">techSalaries</code>,",
            "  <code style=\"white-space: pre-wrap;\">USstateNames</code> - holds a parsed",
            "  dataset from the corresponding file.",
            "</p>",
            "<p>",
            "  To tie them together and prepare a dictionary for",
            "  <code style=\"white-space: pre-wrap;\">setState</code> back in the",
            "  <code style=\"white-space: pre-wrap;\">App</code> component, we need to add",
            "  some logic. We‚Äôre building a dictionary of county household incomes and",
            "  removing any empty salaries.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb64\"",
            "  data-caption=\"Tie our datasets together\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb64-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/DataHandling.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb64-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">]).<span class=\"at\" style=\"color: #7d9029;\">then</span>(([us<span class=\"op\" style=\"color: #666666;\">,</span> countyNames<span class=\"op\" style=\"color: #666666;\">,</span> medianIncomes<span class=\"op\" style=\"color: #666666;\">,</span> techSalaries<span class=\"op\" style=\"color: #666666;\">,</span> USstateNames]) <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb64-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> medianIncomesMap <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{};</span></a>",
            "<a class=\"sourceLine\" id=\"cb64-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb64-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">medianIncomes</span>.<span class=\"at\" style=\"color: #7d9029;\">filter</span>(d <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">_</span>.<span class=\"at\" style=\"color: #7d9029;\">find</span>(countyNames<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb64-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                                     <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"dt\" style=\"color: #902000;\">name</span><span class=\"op\" style=\"color: #666666;\">:</span> d[<span class=\"st\" style=\"color: #4070a0;\">&#39;countyName&#39;</span>]<span class=\"op\" style=\"color: #666666;\">}</span>))</a>",
            "<a class=\"sourceLine\" id=\"cb64-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                 .<span class=\"at\" style=\"color: #7d9029;\">forEach</span>((d) <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb64-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                     d[<span class=\"st\" style=\"color: #4070a0;\">&#39;countyID&#39;</span>] <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">_</span>.<span class=\"at\" style=\"color: #7d9029;\">find</span>(countyNames<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb64-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                                            <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"dt\" style=\"color: #902000;\">name</span><span class=\"op\" style=\"color: #666666;\">:</span> d[<span class=\"st\" style=\"color: #4070a0;\">&#39;countyName&#39;</span>]<span class=\"op\" style=\"color: #666666;\">}</span>).<span class=\"at\" style=\"color: #7d9029;\">id</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb64-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                     medianIncomesMap[<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">countyID</span>] <span class=\"op\" style=\"color: #666666;\">=</span> d<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb64-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                 <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb64-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb64-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    techSalaries <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">techSalaries</span>.<span class=\"at\" style=\"color: #7d9029;\">filter</span>(d <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">!</span><span class=\"va\" style=\"color: #19177c;\">_</span>.<span class=\"at\" style=\"color: #7d9029;\">isNull</span>(d))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb64-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb64-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">callback</span>(<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb64-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">usTopoJson</span><span class=\"op\" style=\"color: #666666;\">:</span> us<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb64-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">countyNames</span><span class=\"op\" style=\"color: #666666;\">:</span> countyNames<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb64-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">medianIncomes</span><span class=\"op\" style=\"color: #666666;\">:</span> medianIncomesMap<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb64-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">medianIncomesByCounty</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">_</span>.<span class=\"at\" style=\"color: #7d9029;\">groupBy</span>(medianIncomes<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;countyName&#39;</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb64-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">medianIncomesByUSState</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">_</span>.<span class=\"at\" style=\"color: #7d9029;\">groupBy</span>(medianIncomes<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;USstate&#39;</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb64-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">techSalaries</span><span class=\"op\" style=\"color: #666666;\">:</span> techSalaries<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb64-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">USstateNames</span><span class=\"op\" style=\"color: #666666;\">:</span> USstateNames</a>",
            "<a class=\"sourceLine\" id=\"cb64-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb64-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  Building the income map looks weird because of indentation, but it‚Äôs not",
            "  that bad. We <code style=\"white-space: pre-wrap;\">filter</code> the",
            "  <code style=\"white-space: pre-wrap;\">medianIncomes</code> array to",
            "  discard any incomes whose",
            "  <code style=\"white-space: pre-wrap;\">countyName</code> we can‚Äôt find. I",
            "  made sure they were all unique when I built the datasets.",
            "</p>",
            "<p>",
            "  We walk through the filtered array with a",
            "  <code style=\"white-space: pre-wrap;\">forEach</code>, find the correct",
            "  <code style=\"white-space: pre-wrap;\">countyID</code>, and add each entry",
            "  to <code style=\"white-space: pre-wrap;\">medianIncomesMap</code>. When",
            "  we‚Äôre done, we have a large dictionary that maps county ids to their",
            "  household income data.",
            "</p>",
            "<p>",
            "  Then we filter",
            "  <code style=\"white-space: pre-wrap;\">techSalaries</code> to remove any",
            "  empty values where the",
            "  <code style=\"white-space: pre-wrap;\">cleanSalaries</code> function",
            "  returned <code style=\"white-space: pre-wrap;\">null</code>. That happens",
            "  when a salary is either undefined or absurdly high.",
            "</p>",
            "<p>",
            "  When our data is ready, we call our",
            "  <code style=\"white-space: pre-wrap;\">callback</code> with a dictionary of",
            "  the new datasets. To make future access quicker, we use",
            "  <code style=\"white-space: pre-wrap;\">_.groupBy</code> to build dictionary",
            "  maps of counties by county name and by US state.",
            "</p>",
            "<p>",
            "  You should now see how many salary entries the shortened dataset",
            "  contains.",
            "</p>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/data-loaded-screenshot.png\"",
            "    alt=\"Data loaded screenshot\"",
            "  />",
            "  <figcaption>Data loaded screenshot</figcaption>",
            "</figure>",
            "<p>",
            "  If that didn‚Äôt work, try comparing your changes to this",
            "  <a",
            "    href=\"https://github.com/Swizec/react-d3-walkthrough-livecode/commit/a170bc8e4001da95306063f55884d7575b9b7b60\"",
            "    >diff on Github</a",
            "  >.",
            "</p>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "Render a choropleth map of the US",
      "lectures": [
        {
          "lectureTitle": "Render a choropleth map of the US",
          "lectureLines": [
            "<h1 id=\"choropleth-map\">Render a choropleth map of the US</h1>",
            "<p>",
            "  With our data in hand, it‚Äôs time to draw some pictures. A choropleth map",
            "  will show us the best places to be in tech.",
            "</p>",
            "<p>",
            "  We‚Äôre showing the delta between median household salary in a statistical",
            "  county and the average salary of an individual tech worker on a visa. The",
            "  darker the blue, the higher the difference.",
            "</p>",
            "<p>",
            "  The more a single salary can out-earn an entire household, the better off",
            "  you are.",
            "</p>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/choropleth-map-shortened-dataset.png\"",
            "    alt=\"Choropleth map with shortened dataset\"",
            "  />",
            "  <figcaption>Choropleth map with shortened dataset</figcaption>",
            "</figure>",
            "<p>",
            "  There‚Äôs a lot of gray on this map because the shortened dataset doesn‚Äôt",
            "  have that many counties. Full dataset is going to look better, I promise.",
            "</p>",
            "<p>",
            "  Turns out immigration visa opportunities for techies aren‚Äôt evenly",
            "  distributed throughout the country. Who knew?",
            "</p>",
            "<p>",
            "  Just like before, we‚Äôre going to start with changes in our",
            "  <code style=\"white-space: pre-wrap;\">App</code> component, then build the",
            "  new bit. This time, a",
            "  <code style=\"white-space: pre-wrap;\">CountyMap</code> component spread",
            "  over three files:",
            "</p>",
            "<ul>",
            "  <li>",
            "    <code style=\"white-space: pre-wrap;\">CountyMap/index.js</code>, to make",
            "    imports easier",
            "  </li>",
            "  <li>",
            "    <code style=\"white-space: pre-wrap;\">CountyMap/CountyMap.js</code>, for",
            "    overall map logic",
            "  </li>",
            "  <li>",
            "    <code style=\"white-space: pre-wrap;\">CountyMap/County.js</code>, for",
            "    individual county polygons",
            "  </li>",
            "</ul>"
          ]
        },
        {
          "lectureTitle": "Step 1: Prep App.js",
          "lectureLines": [
            "<h2 id=\"step-1-prep-app.js-1\">Step 1: Prep App.js</h2>",
            "<p>",
            "  You might guess the pattern already: add an import, add a helper method",
            "  or two, update <code style=\"white-space: pre-wrap;\">render</code>.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb65\"",
            "  data-caption=\"Import CountyMap component\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb65-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/App.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb65-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> Preloader <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./components/Preloader&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb65-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">{</span> loadAllData <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./DataHandling&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb65-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb65-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb65-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> CountyMap <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./components/CountyMap&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb65-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a></code></pre>",
            "</div>",
            "<p>",
            "  That imports the",
            "  <code style=\"white-space: pre-wrap;\">CountyMap</code> component from",
            "  <code style=\"white-space: pre-wrap;\">components/CountyMap/</code>. Your",
            "  browser will show an error overlay about some file or another until we‚Äôre",
            "  done.",
            "</p>",
            "<p>",
            "  In the <code style=\"white-space: pre-wrap;\">App</code> class itself, we",
            "  add a <code style=\"white-space: pre-wrap;\">countyValue</code> method. It",
            "  takes a county entry and a map of tech salaries, and it returns the delta",
            "  between median household income and a single tech salary.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb66\"",
            "  data-caption=\"App.countyValue method\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb66-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/App.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb66-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">countyValue</span>(county<span class=\"op\" style=\"color: #666666;\">,</span> techSalariesMap) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb66-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> medianHousehold <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">medianIncomes</span>[<span class=\"va\" style=\"color: #19177c;\">county</span>.<span class=\"at\" style=\"color: #7d9029;\">id</span>]<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb66-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">              salaries <span class=\"op\" style=\"color: #666666;\">=</span> techSalariesMap[<span class=\"va\" style=\"color: #19177c;\">county</span>.<span class=\"at\" style=\"color: #7d9029;\">name</span>]<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb66-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb66-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (<span class=\"op\" style=\"color: #666666;\">!</span>medianHousehold <span class=\"op\" style=\"color: #666666;\">||</span> <span class=\"op\" style=\"color: #666666;\">!</span>salaries) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb66-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">null</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb66-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb66-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb66-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> median <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">median</span>(salaries<span class=\"op\" style=\"color: #666666;\">,</span> d <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">base_salary</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb66-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb66-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb66-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">countyID</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">county</span>.<span class=\"at\" style=\"color: #7d9029;\">id</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb66-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">value</span><span class=\"op\" style=\"color: #666666;\">:</span> median <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"va\" style=\"color: #19177c;\">medianHousehold</span>.<span class=\"at\" style=\"color: #7d9029;\">medianIncome</span></a>",
            "<a class=\"sourceLine\" id=\"cb66-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb66-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  We use",
            "  <code style=\"white-space: pre-wrap;\">this.state.medianIncomes</code> to",
            "  get the median household salary and the",
            "  <code style=\"white-space: pre-wrap;\">techSalariesMap</code> input to get",
            "  salaries for a specific census area. Then we use",
            "  <code style=\"white-space: pre-wrap;\">d3.median</code> to calculate the",
            "  median value for salaries and return a two-element dictionary with the",
            "  result.",
            "</p>",
            "<p>",
            "  <code style=\"white-space: pre-wrap;\">countyID</code> specifies the county",
            "  and <code style=\"white-space: pre-wrap;\">value</code> is the delta that",
            "  our choropleth displays.",
            "</p>",
            "<p>",
            "  In the <code style=\"white-space: pre-wrap;\">render</code> method, we‚Äôll:",
            "</p>",
            "<ul>",
            "  <li>prep a list of county values</li>",
            "  <li>remove the ‚Äúdata loaded‚Äù indicator</li>",
            "  <li>render the map</li>",
            "</ul>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb67\"",
            "  data-caption=\"Render the CountyMap component\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb67-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/App.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> countyNames<span class=\"op\" style=\"color: #666666;\">,</span> usTopoJson<span class=\"op\" style=\"color: #666666;\">,</span> techSalaries<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb67-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (<span class=\"va\" style=\"color: #19177c;\">techSalaries</span>.<span class=\"at\" style=\"color: #7d9029;\">length</span> <span class=\"op\" style=\"color: #666666;\">&lt;</span> <span class=\"dv\" style=\"color: #40a070;\">1</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb67-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>Preloader /<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb67-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> filteredSalaries <span class=\"op\" style=\"color: #666666;\">=</span> techSalaries<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          filteredSalariesMap <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">_</span>.<span class=\"at\" style=\"color: #7d9029;\">groupBy</span>(filteredSalaries<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;countyID&#39;</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          countyValues <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">countyNames</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(</a>",
            "<a class=\"sourceLine\" id=\"cb67-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">              county <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">countyValue</span>(county<span class=\"op\" style=\"color: #666666;\">,</span> filteredSalariesMap)</a>",
            "<a class=\"sourceLine\" id=\"cb67-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          ).<span class=\"at\" style=\"color: #7d9029;\">filter</span>(d <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">!</span><span class=\"va\" style=\"color: #19177c;\">_</span>.<span class=\"at\" style=\"color: #7d9029;\">isNull</span>(d))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb67-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> zoom <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">null</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb67-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb67-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>div className<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;App container&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Delete the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>h1<span class=\"op\" style=\"color: #666666;\">&gt;</span>Loaded <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"va\" style=\"color: #19177c;\">techSalaries</span>.<span class=\"at\" style=\"color: #7d9029;\">length</span><span class=\"op\" style=\"color: #666666;\">}</span> salaries&lt;/h1<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>svg width<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;1100&quot;</span> height<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;500&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>CountyMap usTopoJson<span class=\"op\" style=\"color: #666666;\">={</span>usTopoJson<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                       USstateNames<span class=\"op\" style=\"color: #666666;\">={</span>USstateNames<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                       values<span class=\"op\" style=\"color: #666666;\">={</span>countyValues<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                       x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                       y<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                       width<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">500</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-36\" title=\"36\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                       height<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">500</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-37\" title=\"37\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                       zoom<span class=\"op\" style=\"color: #666666;\">={</span>zoom<span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb67-38\" title=\"38\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        &lt;/svg<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-39\" title=\"39\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-40\" title=\"40\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-41\" title=\"41\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-42\" title=\"42\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  We call our dataset",
            "  <code style=\"white-space: pre-wrap;\">filteredTechSalaries</code> because",
            "  we‚Äôre going to add filtering in the",
            "  <a",
            "    href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6888938#user-controls\"",
            "    >subchapter about adding user controls</a",
            "  >. Using the proper name now means less code to change later. The magic",
            "  of foresight üòÑ",
            "</p>",
            "<p>",
            "  We use <code style=\"white-space: pre-wrap;\">_.groupBy</code> to build a",
            "  dictionary mapping each",
            "  <code style=\"white-space: pre-wrap;\">countyID</code> to an array of",
            "  salaries, and we use our",
            "  <code style=\"white-space: pre-wrap;\">countyValue</code> method to build",
            "  an array of counties for our map.",
            "</p>",
            "<p>",
            "  We set <code style=\"white-space: pre-wrap;\">zoom</code> to",
            "  <code style=\"white-space: pre-wrap;\">null</code> for now. We‚Äôll use this",
            "  later.",
            "</p>",
            "<p>",
            "  In the <code style=\"white-space: pre-wrap;\">return</code> statement, we",
            "  remove our ‚Äúdata loaded‚Äù indicator, and add an",
            "  <code style=\"white-space: pre-wrap;\">&lt;svg&gt;</code> element that‚Äôs",
            "  <code style=\"white-space: pre-wrap;\">1100</code> pixels wide and",
            "  <code style=\"white-space: pre-wrap;\">500</code> pixels high. Inside, we",
            "  place the <code style=\"white-space: pre-wrap;\">CountyMap</code> component",
            "  with a bunch of properties. Some dataset stuff, some sizing and",
            "  positioning stuff.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "Step 2: CountyMap index.js",
          "lectureLines": [
            "<h2 id=\"step-2-countymapindex.js\">Step 2: CountyMap/index.js</h2>",
            "<p>",
            "  We make <code style=\"white-space: pre-wrap;\">index.js</code> for just",
            "  reason: to make imports and debugging easier. I learned this lesson the",
            "  hard way so you don‚Äôt have to.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb68\"",
            "  data-caption=\"CountyMap index.js\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb68-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/CountyMap/index.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb68-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb68-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"im\">default</span> <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./CountyMap&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  Re-export the default import from",
            "  <code style=\"white-space: pre-wrap;\">./CountyMap.js</code>. That‚Äôs it.",
            "</p>",
            "<p>",
            "  This allows us to import",
            "  <code style=\"white-space: pre-wrap;\">CountyMap</code> from the directory",
            "  without knowing about internal file structure. We <em>could</em> put all",
            "  the code in this",
            "  <code style=\"white-space: pre-wrap;\">index.js</code> file, but that makes",
            "  debugging harder. You‚Äôll have plenty of index.js files in your project.",
            "</p>",
            "<p>",
            "  Having a lot of code in",
            "  <code style=\"white-space: pre-wrap;\">&lt;directory&gt;/index.js</code> is",
            "  a common pattern in new projects. But when you‚Äôre looking at a stack",
            "  trace, source files in the browser, or filenames in your editor, you‚Äôll",
            "  wish every component lived in a file of the same name.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "Step 3: CountyMap CountyMap.js",
          "lectureLines": [
            "<h2 id=\"step-3-countymapcountymap.js\">Step 3: CountyMap/CountyMap.js</h2>",
            "<p>",
            "  Here comes the fun part - declaratively drawing a map. You‚Äôll see why I",
            "  love using React for dataviz.",
            "</p>",
            "<p>",
            "  We‚Äôre using the",
            "  <a",
            "    href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6887740#full-feature-integration\"",
            "    >full-feature integration</a",
            "  >",
            "  approach and a lot of D3 maps magic. Drawing a map with D3 I‚Äôm always",
            "  surprised how little code it takes.",
            "</p>",
            "<p>",
            "  Start with the imports: React, D3, lodash, topojson, County component.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb69\"",
            "  data-caption=\"Import CountyMap dependencies\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb69-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/CountyMap/CountyMap.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb69-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"op\" style=\"color: #666666;\">{</span> Component <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;react&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb69-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"im\">as</span> d3 <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;d3&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb69-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"im\">as</span> topojson <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;topojson&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb69-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> _ <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;lodash&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb69-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb69-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> County <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./County&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  Out of these, we haven‚Äôt built",
            "  <code style=\"white-space: pre-wrap;\">County</code> yet, and you haven‚Äôt",
            "  seen <code style=\"white-space: pre-wrap;\">topojson</code> before.",
            "</p>",
            "<p>",
            "  TopoJSON is a geographical data format based on JSON. We‚Äôre using the",
            "  <code style=\"white-space: pre-wrap;\">topojson</code> library to translate",
            "  our geographical datasets into GeoJSON, which is another way of defining",
            "  geo data with JSON.",
            "</p>",
            "<p>",
            "  I don‚Äôt know why there are two, but TopoJSON produces smaller files, and",
            "  GeoJSON can be fed directly into D3‚Äôs geo functions. ¬Ø\\<em>(„ÉÑ)</em>/¬Ø",
            "</p>",
            "<p>",
            "  Maybe it‚Äôs a case of",
            "  <a href=\"https://xkcd.com/927/\">competing standards</a>.",
            "</p>",
            "<h3 id=\"constructor\">Constructor</h3>",
            "<p>",
            "  We stub out the",
            "  <code style=\"white-space: pre-wrap;\">CountyMap</code> component then fill",
            "  it in with logic.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb70\"",
            "  data-caption=\"CountyMap stub\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb70-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/CountyMap/CountyMap.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb70-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> CountyMap <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> Component <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb70-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">constructor</span>(props) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb70-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">super</span>(props)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb70-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb70-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb70-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb70-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb70-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb70-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">static</span> <span class=\"at\" style=\"color: #7d9029;\">getDerivedStateFromProps</span>(props<span class=\"op\" style=\"color: #666666;\">,</span> state) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb70-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb70-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb70-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb70-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb70-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> usTopoJson <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb70-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb70-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (<span class=\"op\" style=\"color: #666666;\">!</span>usTopoJson) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb70-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">null</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb70-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span><span class=\"cf\" style=\"color: #007020; font-weight: bold;\">else</span><span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb70-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb70-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb70-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb70-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb70-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb70-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb70-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb70-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> CountyMap<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  We‚Äôll set up default D3 state in",
            "  <code style=\"white-space: pre-wrap;\">constructor</code> and keep it up to",
            "  date with",
            "  <code style=\"white-space: pre-wrap;\">getDerivedStateFromProps</code>.",
            "</p>",
            "<p>",
            "  We need three D3 objects to build a choropleth map: a geographical",
            "  projection, a path generator, and a quantize scale for colors.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb71\"",
            "  data-caption=\"D3 objects for a map\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb71-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/CountyMap/CountyMap.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb71-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> CountyMap <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb71-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">constructor</span>(props) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb71-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">super</span>(props)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb71-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb71-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> projection <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">geoAlbersUsa</span>().<span class=\"at\" style=\"color: #7d9029;\">scale</span>(<span class=\"dv\" style=\"color: #40a070;\">1280</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb71-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb71-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb71-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">geoPath</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">geoPath</span>().<span class=\"at\" style=\"color: #7d9029;\">projection</span>(projection)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb71-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">quantize</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">scaleQuantize</span>().<span class=\"at\" style=\"color: #7d9029;\">range</span>(<span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">range</span>(<span class=\"dv\" style=\"color: #40a070;\">9</span>))<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb71-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            projection</a>",
            "<a class=\"sourceLine\" id=\"cb71-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb71-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  You might remember geographical projections from high school. They map a",
            "  sphere to a flat surface. We use",
            "  <code style=\"white-space: pre-wrap;\">geoAlbersUsa</code> because it‚Äôs",
            "  made specifically for maps of the USA.",
            "</p>",
            "<p>",
            "  D3 offers many other projections. You can see them on",
            "  <a href=\"https://github.com/d3/d3-geo#projections\"",
            "    >d3-geo‚Äôs Github page</a",
            "  >.",
            "</p>",
            "<p>",
            "  A <code style=\"white-space: pre-wrap;\">geoPath</code> generator takes a",
            "  projection and returns a function that generates the",
            "  <code style=\"white-space: pre-wrap;\">d</code> attribute of",
            "  <code style=\"white-space: pre-wrap;\">&lt;path&gt;</code> elements. This",
            "  is the most general way to specify SVG shapes. I won‚Äôt go into explaining",
            "  the <code style=\"white-space: pre-wrap;\">d</code> here, but it‚Äôs",
            "  <a href=\"https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d\"",
            "    >an entire language</a",
            "  >",
            "  for describing shapes.",
            "</p>",
            "<p>",
            "  <code style=\"white-space: pre-wrap;\">quantize</code> is a D3 scale. We‚Äôve",
            "  talked about the basics of scales in the",
            "  <a",
            "    href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6887732#blackbox-axis\"",
            "    >D3 Axis example</a",
            "  >. This one splits a domain into 9 quantiles and assigns them specific",
            "  values from the <code style=\"white-space: pre-wrap;\">range</code>.",
            "</p>",
            "<p>",
            "  Let‚Äôs say our domain goes from 0 to 90. Calling the scale with any number",
            "  between 0 and 9 would return 1. 10 to 19 returns 2 and so on. We‚Äôll use",
            "  it to pick colors from an array.",
            "</p>",
            "<h3 id=\"getderivedstatefromprops\">getDerivedStateFromProps</h3>",
            "<p>",
            "  Keeping our geo path and quantize scale up to date is simple, but we‚Äôll",
            "  make it harder by adding a zoom feature. It won‚Äôt work until we build the",
            "  filtering, but hey, we‚Äôll already have it by then! üòÑ",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb72\"",
            "  data-caption=\"CountyMap getDerivedStateFromProps\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb72-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/CountyMap/CountyMap.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb72-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">static</span> <span class=\"at\" style=\"color: #7d9029;\">getDerivedStateFromProps</span>(props<span class=\"op\" style=\"color: #666666;\">,</span> state) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb72-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> <span class=\"op\" style=\"color: #666666;\">{</span> projection<span class=\"op\" style=\"color: #666666;\">,</span> quantize<span class=\"op\" style=\"color: #666666;\">,</span> geoPath <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> state<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb72-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb72-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        projection</a>",
            "<a class=\"sourceLine\" id=\"cb72-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            .<span class=\"at\" style=\"color: #7d9029;\">translate</span>([<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">width</span> / <span class=\"dv\" style=\"color: #40a070;\">2</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">height</span> / <span class=\"dv\" style=\"color: #40a070;\">2</span>])</a>",
            "<a class=\"sourceLine\" id=\"cb72-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            .<span class=\"at\" style=\"color: #7d9029;\">scale</span>(<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">width</span> <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"fl\" style=\"color: #40a070;\">1.3</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb72-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb72-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">zoom</span> <span class=\"op\" style=\"color: #666666;\">&amp;&amp;</span> <span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">usTopoJson</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb72-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> us <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">usTopoJson</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb72-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                USstatePaths <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">topojson</span>.<span class=\"at\" style=\"color: #7d9029;\">feature</span>(us<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">us</span>.<span class=\"va\" style=\"color: #19177c;\">objects</span>.<span class=\"at\" style=\"color: #7d9029;\">states</span>).<span class=\"at\" style=\"color: #7d9029;\">features</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb72-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                id <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">_</span>.<span class=\"at\" style=\"color: #7d9029;\">find</span>(<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">USstateNames</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">code</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">zoom</span> <span class=\"op\" style=\"color: #666666;\">}</span>).<span class=\"at\" style=\"color: #7d9029;\">id</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb72-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb72-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"va\" style=\"color: #19177c;\">projection</span>.<span class=\"at\" style=\"color: #7d9029;\">scale</span>(<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">width</span> <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"fl\" style=\"color: #40a070;\">4.5</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb72-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb72-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> centroid <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">geoPath</span>.<span class=\"at\" style=\"color: #7d9029;\">centroid</span>(<span class=\"va\" style=\"color: #19177c;\">_</span>.<span class=\"at\" style=\"color: #7d9029;\">find</span>(USstatePaths<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">id</span><span class=\"op\" style=\"color: #666666;\">:</span> id <span class=\"op\" style=\"color: #666666;\">}</span>))<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb72-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                translate <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">projection</span>.<span class=\"at\" style=\"color: #7d9029;\">translate</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb72-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb72-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"va\" style=\"color: #19177c;\">projection</span>.<span class=\"at\" style=\"color: #7d9029;\">translate</span>([</a>",
            "<a class=\"sourceLine\" id=\"cb72-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                translate[<span class=\"dv\" style=\"color: #40a070;\">0</span>] <span class=\"op\" style=\"color: #666666;\">-</span> centroid[<span class=\"dv\" style=\"color: #40a070;\">0</span>] <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">width</span> / <span class=\"dv\" style=\"color: #40a070;\">2</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb72-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                translate[<span class=\"dv\" style=\"color: #40a070;\">1</span>] <span class=\"op\" style=\"color: #666666;\">-</span> centroid[<span class=\"dv\" style=\"color: #40a070;\">1</span>] <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">height</span> / <span class=\"dv\" style=\"color: #40a070;\">2</span></a>",
            "<a class=\"sourceLine\" id=\"cb72-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            ])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb72-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb72-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb72-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">values</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb72-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"va\" style=\"color: #19177c;\">quantize</span>.<span class=\"at\" style=\"color: #7d9029;\">domain</span>([</a>",
            "<a class=\"sourceLine\" id=\"cb72-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">quantile</span>(<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">values</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"fl\" style=\"color: #40a070;\">0.15</span><span class=\"op\" style=\"color: #666666;\">,</span> d <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">value</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb72-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">quantile</span>(<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">values</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"fl\" style=\"color: #40a070;\">0.85</span><span class=\"op\" style=\"color: #666666;\">,</span> d <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">value</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb72-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            ])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb72-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb72-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb72-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb72-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            ...<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb72-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            projection<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb72-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            quantize</a>",
            "<a class=\"sourceLine\" id=\"cb72-36\" title=\"36\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb72-37\" title=\"37\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>There‚Äôs a lot going on here.</p>",
            "<p>",
            "  We destructure <code style=\"white-space: pre-wrap;\">projection</code>,",
            "  <code style=\"white-space: pre-wrap;\">quantize</code>, and",
            "  <code style=\"white-space: pre-wrap;\">geoPath</code> out of component",
            "  state. These are the D3 object we‚Äôre about to update.",
            "</p>",
            "<p>",
            "  First up is the projection. We translate (move) it to the center of our",
            "  drawing area and set the scale property. You have to play around with",
            "  this value until you get a nice result because it‚Äôs different for every",
            "  projection.",
            "</p>",
            "<p>",
            "  Then we do some weird stuff if",
            "  <code style=\"white-space: pre-wrap;\">zoom</code> is defined.",
            "</p>",
            "<p>",
            "  We get the list of all US state features in our geo data, find the one",
            "  we‚Äôre <code style=\"white-space: pre-wrap;\">zoom</code>-ing on, and use",
            "  the <code style=\"white-space: pre-wrap;\">geoPath.centroid</code> method",
            "  to calculate its center point. This gives us a new coordinate to",
            "  <code style=\"white-space: pre-wrap;\">translate</code> our projection",
            "  onto.",
            "</p>",
            "<p>",
            "  The calculation in",
            "  <code style=\"white-space: pre-wrap;\">.translate()</code> helps us align",
            "  the center point of our",
            "  <code style=\"white-space: pre-wrap;\">zoom</code> US state with the center",
            "  of the drawing area.",
            "</p>",
            "<p>",
            "  While all of this is going on, we also tweak the",
            "  <code style=\"white-space: pre-wrap;\">.scale</code> property to make the",
            "  map bigger. This creates a zooming effect.",
            "</p>",
            "<p>",
            "  After all that, we update the quantize scale‚Äôs domain with new values.",
            "  Using <code style=\"white-space: pre-wrap;\">d3.quantile</code> lets us",
            "  offset the scale to produce a more interesting map. Again, I discovered",
            "  these values through experiment - they cut off the top and bottom of the",
            "  range because there isn‚Äôt much there. This brings higher contrast to the",
            "  richer middle of the range.",
            "</p>",
            "<p>",
            "  With our D3 objects updated, we return a new derived state.",
            "  <em>Technically</em> you don‚Äôt have to do this but you should. Due to how",
            "  JavaScript works, you already updated D3 objects in place, but you should",
            "  pretend <code style=\"white-space: pre-wrap;\">this.state</code> is",
            "  immutable and return a new copy.",
            "</p>",
            "<p>",
            "  Overall that makes your code easier to understand and closer to React",
            "  principles.",
            "</p>",
            "<h3 id=\"render\">render</h3>",
            "<p>",
            "  After all that hard work, the",
            "  <code style=\"white-space: pre-wrap;\">render</code> method is a breeze. We",
            "  prep our data then loop through it and render a",
            "  <code style=\"white-space: pre-wrap;\">County</code> element for each",
            "  entry.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb73\"",
            "  data-caption=\"CountyMap render\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb73-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> geoPath<span class=\"op\" style=\"color: #666666;\">,</span> quantize <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">{</span> usTopoJson<span class=\"op\" style=\"color: #666666;\">,</span> values<span class=\"op\" style=\"color: #666666;\">,</span> zoom <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb73-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (<span class=\"op\" style=\"color: #666666;\">!</span>usTopoJson) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">null</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">else</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> us <span class=\"op\" style=\"color: #666666;\">=</span> usTopoJson<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                USstatesMesh <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">topojson</span>.<span class=\"at\" style=\"color: #7d9029;\">mesh</span>(</a>",
            "<a class=\"sourceLine\" id=\"cb73-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    us<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"va\" style=\"color: #19177c;\">us</span>.<span class=\"va\" style=\"color: #19177c;\">objects</span>.<span class=\"at\" style=\"color: #7d9029;\">states</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    (a<span class=\"op\" style=\"color: #666666;\">,</span> b) <span class=\"op\" style=\"color: #666666;\">=&gt;</span> a <span class=\"op\" style=\"color: #666666;\">!==</span> b</a>",
            "<a class=\"sourceLine\" id=\"cb73-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                )<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                counties <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">topojson</span>.<span class=\"at\" style=\"color: #7d9029;\">feature</span>(us<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">us</span>.<span class=\"va\" style=\"color: #19177c;\">objects</span>.<span class=\"at\" style=\"color: #7d9029;\">counties</span>).<span class=\"at\" style=\"color: #7d9029;\">features</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb73-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> countyValueMap <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">_</span>.<span class=\"at\" style=\"color: #7d9029;\">fromPairs</span>(</a>",
            "<a class=\"sourceLine\" id=\"cb73-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"va\" style=\"color: #19177c;\">values</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(d <span class=\"op\" style=\"color: #666666;\">=&gt;</span> [<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">countyID</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">value</span>])</a>",
            "<a class=\"sourceLine\" id=\"cb73-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb73-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb73-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&lt;</span>g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"va\" style=\"color: #19177c;\">counties</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(feature <span class=\"op\" style=\"color: #666666;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb73-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        <span class=\"op\" style=\"color: #666666;\">&lt;</span>County</a>",
            "<a class=\"sourceLine\" id=\"cb73-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                            geoPath<span class=\"op\" style=\"color: #666666;\">={</span>geoPath<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                            feature<span class=\"op\" style=\"color: #666666;\">={</span>feature<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                            zoom<span class=\"op\" style=\"color: #666666;\">={</span>zoom<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                            key<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"va\" style=\"color: #19177c;\">feature</span>.<span class=\"at\" style=\"color: #7d9029;\">id</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                            quantize<span class=\"op\" style=\"color: #666666;\">={</span>quantize<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                            value<span class=\"op\" style=\"color: #666666;\">={</span>countyValueMap[<span class=\"va\" style=\"color: #19177c;\">feature</span>.<span class=\"at\" style=\"color: #7d9029;\">id</span>]<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb73-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    ))<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb73-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"op\" style=\"color: #666666;\">&lt;</span>path</a>",
            "<a class=\"sourceLine\" id=\"cb73-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        d<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"at\" style=\"color: #7d9029;\">geoPath</span>(USstatesMesh)<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        style<span class=\"op\" style=\"color: #666666;\">={{</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-36\" title=\"36\">                            <span class=\"dt\">fill</span><span class=\"op\">:</span> <span class=\"st\">&quot;none&quot;</span><span class=\"op\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-37\" title=\"37\">                            <span class=\"dt\">stroke</span><span class=\"op\">:</span> <span class=\"st\">&quot;#fff&quot;</span><span class=\"op\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-38\" title=\"38\">                            <span class=\"dt\">strokeLinejoin</span><span class=\"op\">:</span> <span class=\"st\">&quot;round&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-39\" title=\"39\">                        <span class=\"op\">}}</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-40\" title=\"40\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb73-41\" title=\"41\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                &lt;/g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-42\" title=\"42\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-43\" title=\"43\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-44\" title=\"44\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  We use destructuring to save all relevant props and state in constants,",
            "  then use the TopoJSON library to grab data out of the",
            "  <code style=\"white-space: pre-wrap;\">usTopoJson</code> dataset.",
            "</p>",
            "<p>",
            "  <code style=\"white-space: pre-wrap;\">.mesh</code> calculates a mesh for",
            "  US states ‚Äì¬†a thin line around the edges.",
            "  <code style=\"white-space: pre-wrap;\">.feature</code> calculates feature",
            "  for each count ‚Äì¬†fill in with color.",
            "</p>",
            "<p>",
            "  Mesh and feature aren‚Äôt tied to US states or counties by the way. It‚Äôs",
            "  just a matter of what you get back: borders or flat areas. What you need",
            "  depends on what you‚Äôre building.",
            "</p>",
            "<p>",
            "  We use Lodash‚Äôs",
            "  <code style=\"white-space: pre-wrap;\">_.fromPairs</code> to build a",
            "  dictionary that maps county identifiers to their values. Building it",
            "  beforehand makes our code faster. You can read some details about the",
            "  speed optimizations",
            "  <a",
            "    href=\"https://swizec.com/blog/optimizing-react-choropleth-map-rendering/swizec/7302\"",
            "    >here</a",
            "  >.",
            "</p>",
            "<p>",
            "  As promised, the",
            "  <code style=\"white-space: pre-wrap;\">return</code> statement loops",
            "  through the list of",
            "  <code style=\"white-space: pre-wrap;\">counties</code> and renders",
            "  <code style=\"white-space: pre-wrap;\">County</code> components. Each gets",
            "  a bunch of attributes and returns a",
            "  <code style=\"white-space: pre-wrap;\">&lt;path&gt;</code> element that",
            "  looks like a specific county.",
            "</p>",
            "<p>",
            "  For US state borders, we render a single",
            "  <code style=\"white-space: pre-wrap;\">&lt;path&gt;</code> element and use",
            "  <code style=\"white-space: pre-wrap;\">geoPath</code> to generate the",
            "  <code style=\"white-space: pre-wrap;\">d</code> attribute.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "Step 4: CountyMap County.js",
          "lectureLines": [
            "<h2 id=\"step-4-countymapcounty.js\">Step 4: CountyMap/County.js</h2>",
            "<p>",
            "  The <code style=\"white-space: pre-wrap;\">County</code> component is built",
            "  from two parts: imports and color constants, and a component that returns",
            "  a <code style=\"white-space: pre-wrap;\">&lt;path&gt;</code>. All the hard",
            "  calculation happens in",
            "  <code style=\"white-space: pre-wrap;\">CountyMap</code>.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb74\"",
            "  data-caption=\"Imports and color constants\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb74-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/CountyMap/County.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb74-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"op\" style=\"color: #666666;\">{</span> Component <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;react&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb74-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> _ <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;lodash&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb74-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb74-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> ChoroplethColors <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">_</span>.<span class=\"at\" style=\"color: #7d9029;\">reverse</span>([</a>",
            "<a class=\"sourceLine\" id=\"cb74-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"st\" style=\"color: #4070a0;\">&#39;rgb(247,251,255)&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb74-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"st\" style=\"color: #4070a0;\">&#39;rgb(222,235,247)&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb74-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"st\" style=\"color: #4070a0;\">&#39;rgb(198,219,239)&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb74-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"st\" style=\"color: #4070a0;\">&#39;rgb(158,202,225)&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb74-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"st\" style=\"color: #4070a0;\">&#39;rgb(107,174,214)&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb74-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"st\" style=\"color: #4070a0;\">&#39;rgb(66,146,198)&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb74-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"st\" style=\"color: #4070a0;\">&#39;rgb(33,113,181)&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb74-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"st\" style=\"color: #4070a0;\">&#39;rgb(8,81,156)&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb74-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"st\" style=\"color: #4070a0;\">&#39;rgb(8,48,107)&#39;</span></a>",
            "<a class=\"sourceLine\" id=\"cb74-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb74-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb74-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> BlankColor <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;rgb(240,240,240)&#39;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  We import React and Lodash, and define some color constants. I got the",
            "  <code style=\"white-space: pre-wrap;\">ChoroplethColors</code> from some",
            "  example online, and",
            "  <code style=\"white-space: pre-wrap;\">BlankColor</code> is a pleasant",
            "  gray.",
            "</p>",
            "<p>",
            "  Now we need the",
            "  <code style=\"white-space: pre-wrap;\">County</code> component.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb75\"",
            "  data-caption=\"County component\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb75-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/CountyMap/County.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb75-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> County <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> Component <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb75-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">shouldComponentUpdate</span>(nextProps<span class=\"op\" style=\"color: #666666;\">,</span> nextState) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb75-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> zoom<span class=\"op\" style=\"color: #666666;\">,</span> value <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb75-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb75-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> zoom <span class=\"op\" style=\"color: #666666;\">!==</span> <span class=\"va\" style=\"color: #19177c;\">nextProps</span>.<span class=\"at\" style=\"color: #7d9029;\">zoom</span></a>",
            "<a class=\"sourceLine\" id=\"cb75-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">||</span> value <span class=\"op\" style=\"color: #666666;\">!==</span> <span class=\"va\" style=\"color: #19177c;\">nextProps</span>.<span class=\"at\" style=\"color: #7d9029;\">value</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb75-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb75-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb75-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb75-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> value<span class=\"op\" style=\"color: #666666;\">,</span> geoPath<span class=\"op\" style=\"color: #666666;\">,</span> feature<span class=\"op\" style=\"color: #666666;\">,</span> quantize <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb75-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb75-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> color <span class=\"op\" style=\"color: #666666;\">=</span> BlankColor<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb75-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb75-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (value) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb75-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            color <span class=\"op\" style=\"color: #666666;\">=</span> ChoroplethColors[<span class=\"at\" style=\"color: #7d9029;\">quantize</span>(value)]<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb75-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb75-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb75-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb75-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>path d<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"at\" style=\"color: #7d9029;\">geoPath</span>(feature)<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb75-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                  style<span class=\"op\" style=\"color: #666666;\">={{</span><span class=\"dt\">fill</span><span class=\"op\">:</span> color<span class=\"op\">}}</span></a>",
            "<a class=\"sourceLine\" id=\"cb75-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                  title<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"va\" style=\"color: #19177c;\">feature</span>.<span class=\"at\" style=\"color: #7d9029;\">id</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb75-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb75-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb75-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb75-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb75-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> County<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  The <code style=\"white-space: pre-wrap;\">render</code> method uses a",
            "  <code style=\"white-space: pre-wrap;\">quantize</code> scale to pick the",
            "  right color and returns a",
            "  <code style=\"white-space: pre-wrap;\">&lt;path&gt;</code> element.",
            "  <code style=\"white-space: pre-wrap;\">geoPath</code> generates the",
            "  <code style=\"white-space: pre-wrap;\">d</code> attribute, we set style to",
            "  <code style=\"white-space: pre-wrap;\">fill</code> the color, and we give",
            "  our path a <code style=\"white-space: pre-wrap;\">title</code>.",
            "</p>",
            "<p>",
            "  <code style=\"white-space: pre-wrap;\">shouldComponentUpdate</code> is more",
            "  interesting. It‚Äôs a React lifecycle method that lets you specify which",
            "  prop changes are relevant to component re-rendering.",
            "</p>",
            "<p>",
            "  <code style=\"white-space: pre-wrap;\">CountyMap</code> passes complex",
            "  props - <code style=\"white-space: pre-wrap;\">quantize</code>,",
            "  <code style=\"white-space: pre-wrap;\">geoPath</code>, and",
            "  <code style=\"white-space: pre-wrap;\">feature</code>. They‚Äôre",
            "  pass-by-reference instead of pass-by-value. That means React can‚Äôt see",
            "  when their output changes unless you make completely new copies.",
            "</p>",
            "<p>",
            "  This can lead to all 3,220 counties re-rendering every time a user does",
            "  anything. But they only have to re-render if we change the map zoom or if",
            "  the county gets a new value.",
            "</p>",
            "<p>",
            "  Using",
            "  <code style=\"white-space: pre-wrap;\">shouldComponentUpdate</code> like",
            "  this we can go from 3,220 DOM updates to a few hundred. Big speed",
            "  improvement",
            "</p>"
          ]
        },
        {
          "lectureTitle": "A map appears üó∫",
          "lectureLines": [
            "<p>Your browser should now show a map.</p>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/choropleth-map-shortened-dataset.png\"",
            "    alt=\"Choropleth map with shortened dataset\"",
            "  />",
            "  <figcaption>Choropleth map with shortened dataset</figcaption>",
            "</figure>",
            "<p>",
            "  Tech work visas just aren‚Äôt that evenly distributed. Even with the full",
            "  dataset most counties are gray.",
            "</p>",
            "<p>",
            "  If that didn‚Äôt work, consult",
            "  <a",
            "    href=\"https://github.com/Swizec/react-d3-walkthrough-livecode/commit/4c9ba22e4d4de2fa71d032a0b8038231c72b9b8e\"",
            "    >this diff on Github</a",
            "  >.",
            "</p>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "Render a Histogram of salaries",
      "lectures": [
        {
          "lectureTitle": "Render a Histogram of salaries",
          "lectureLines": [
            "<h1 id=\"histogram-of-salaries\">Render a Histogram of salaries</h1>",
            "<p>",
            "  Knowing median salaries is great and all, but it doesn‚Äôt tell you much",
            "  about what you can expect. You need to know the distribution to see if",
            "  it‚Äôs more likely you‚Äôll get 140k or 70k.",
            "</p>",
            "<p>",
            "  That‚Äôs what histograms are for. Give them a bunch of data, and they show",
            "  its distribution. We‚Äôre going to build one like this:",
            "</p>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/basic-histogram.png\"",
            "    alt=\"Basic histogram\"",
            "  />",
            "  <figcaption>Basic histogram</figcaption>",
            "</figure>",
            "<p>",
            "  In the shortened dataset, 35% of tech salaries fall between $60k and",
            "  $80k, 26% between $80k and $100k etc. Throwing a weighed dice with this",
            "  <a href=\"https://en.wikipedia.org/wiki/Probability_distribution\"",
            "    >random distribution</a",
            "  >, you‚Äôre far more likely to get 60k-80k than 120k-140k. It‚Äôs a great way",
            "  to gauge situations.",
            "</p>",
            "<p>",
            "  It‚Äôs where statistics like ‚ÄúMore people die from vending machines than",
            "  shark attacks‚Äù come from. Which are you afraid of, vending machines or",
            "  sharks? Stats say your answer should be",
            "  <a href=\"https://www.cdc.gov/nchs/fastats/deaths.htm\">heart disease</a>.",
            "  üòâ",
            "</p>",
            "<p>",
            "  We‚Äôll start our histogram with some changes in",
            "  <code style=\"white-space: pre-wrap;\">App.js</code>, make a",
            "  <code style=\"white-space: pre-wrap;\">Histogram</code> component using the",
            "  <a",
            "    href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6887740#full-feature-integration\"",
            "    >full-feature approach</a",
            "  >, add an <code style=\"white-space: pre-wrap;\">Axis</code> using the",
            "  <a",
            "    href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6887729#blackbox-hoc\"",
            "    >blackbox HOC approach</a",
            "  >, and finally add some styling.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "Step 1: Prep App.js",
          "lectureLines": [
            "<h2 id=\"step-1-prep-app.js-2\">Step 1: Prep App.js</h2>",
            "<p>",
            "  You know the drill, don‚Äôt you? Import some stuff, add it to the",
            "  <code style=\"white-space: pre-wrap;\">render()</code> method in the",
            "  <code style=\"white-space: pre-wrap;\">App</code> component.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb76\"",
            "  data-caption=\"Histogram imports\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb76-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/App.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb76-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> _ <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;lodash&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb76-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb76-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb76-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./style.css&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb76-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb76-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb76-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> Preloader <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./components/Preloader&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb76-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">{</span> loadAllData <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./DataHandling&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb76-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb76-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> CountyMap <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./components/CountyMap&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb76-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb76-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> Histogram <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./components/Histogram&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb76-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a></code></pre>",
            "</div>",
            "<p>",
            "  We import <code style=\"white-space: pre-wrap;\">style.css</code> and the",
            "  <code style=\"white-space: pre-wrap;\">Histogram</code> component. That‚Äôs",
            "  what I love about Webpack - you can import CSS in JavaScript. We got the",
            "  setup with <code style=\"white-space: pre-wrap;\">create-react-app</code>.",
            "</p>",
            "<p>",
            "  There are competing schools of thought about styling React apps. Some say",
            "  each component should come with its own CSS files, some think it should",
            "  be in large per-app CSS files, many think CSS-in-JS is the way to go.",
            "</p>",
            "<p>",
            "  Personally I like to use CSS for general cross-component styling and",
            "  styled-components for more specific styles. We‚Äôre using CSS in this",
            "  project because it works and means we don‚Äôt have to learn yet another",
            "  dependency.",
            "</p>",
            "<p>",
            "  After the imports, we can render our",
            "  <code style=\"white-space: pre-wrap;\">Histogram</code> in the",
            "  <code style=\"white-space: pre-wrap;\">App</code> component.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb77\"",
            "  data-caption=\"Render Histogram in App\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb77-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/App.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb77-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>div className<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;App container&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>h1<span class=\"op\" style=\"color: #666666;\">&gt;</span>Loaded <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"va\" style=\"color: #19177c;\">techSalaries</span>.<span class=\"at\" style=\"color: #7d9029;\">length</span><span class=\"op\" style=\"color: #666666;\">}</span> salaries&lt;/h1<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>svg width<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;1100&quot;</span> height<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;500&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&lt;</span>CountyMap usTopoJson<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">usTopoJson</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                           USstateNames<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">USstateNames</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                           values<span class=\"op\" style=\"color: #666666;\">={</span>countyValues<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                           x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                           y<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                           width<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">500</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                           height<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">500</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                           zoom<span class=\"op\" style=\"color: #666666;\">={</span>zoom<span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb77-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&lt;</span>Histogram bins<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">10</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                           width<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">500</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                           height<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">500</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                           x<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;500&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                           y<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;10&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                           data<span class=\"op\" style=\"color: #666666;\">={</span>filteredSalaries<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                           axisMargin<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">83</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                           bottomMargin<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">5</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                           value<span class=\"op\" style=\"color: #666666;\">={</span>d <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">base_salary</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb77-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            &lt;/svg<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  We render the",
            "  <code style=\"white-space: pre-wrap;\">Histogram</code> component with a",
            "  bunch of props. They specify the dimensions we want, positioning, and",
            "  pass data to the component. We‚Äôre using",
            "  <code style=\"white-space: pre-wrap;\">filteredSalaries</code> even though",
            "  we haven‚Äôt set up any filtering yet. One less line of code to change",
            "  later üëå",
            "</p>",
            "<p>",
            "  That‚Äôs it. <code style=\"white-space: pre-wrap;\">App</code> is ready to",
            "  render our <code style=\"white-space: pre-wrap;\">Histogram</code>.",
            "</p>",
            "<p>You should now see an error about missing files. That‚Äôs normal.</p>"
          ]
        },
        {
          "lectureTitle": "Step 2: CSS changes",
          "lectureLines": [
            "<h2 id=\"histogram-css\">Step 2: CSS changes</h2>",
            "<p>",
            "  As mentioned, opinions vary on the best approach to styling React apps.",
            "  Some say stylesheets per component, some say styling inside JavaScript,",
            "  others swear by global app styling.",
            "</p>",
            "<p>",
            "  The truth is somewhere in between. Do what fits your project and your",
            "  team. We‚Äôre using global stylesheets because it‚Äôs the simplest.",
            "</p>",
            "<p>",
            "  Create a new file",
            "  <code style=\"white-space: pre-wrap;\">src/style.css</code> and add these",
            "  29 lines:",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb78\"",
            "  data-caption=\"style.css stylesheet\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode css\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode css\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb78-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"fu\" style=\"color: #06287e;\">.histogram</span> <span class=\"fu\" style=\"color: #06287e;\">.bar</span> rect {</a>",
            "<a class=\"sourceLine\" id=\"cb78-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">fill</span>: <span class=\"cn\" style=\"color: #880000;\">steelblue</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb78-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    shape-rendering: crispEdges<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb78-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">}</a>",
            "<a class=\"sourceLine\" id=\"cb78-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb78-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"fu\" style=\"color: #06287e;\">.histogram</span> <span class=\"fu\" style=\"color: #06287e;\">.bar</span> text {</a>",
            "<a class=\"sourceLine\" id=\"cb78-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">fill</span>: <span class=\"cn\" style=\"color: #880000;\">#fff</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb78-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">font</span>: <span class=\"dv\" style=\"color: #40a070;\">12</span><span class=\"dt\" style=\"color: #902000;\">px</span> <span class=\"dv\" style=\"color: #40a070;\">sans-serif</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb78-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">}</a>",
            "<a class=\"sourceLine\" id=\"cb78-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb78-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">button {</a>",
            "<a class=\"sourceLine\" id=\"cb78-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">margin-right</span>: <span class=\"dv\" style=\"color: #40a070;\">.5</span><span class=\"dt\" style=\"color: #902000;\">em</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb78-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">margin-bottom</span>: <span class=\"dv\" style=\"color: #40a070;\">.3</span><span class=\"dt\" style=\"color: #902000;\">em</span> <span class=\"at\" style=\"color: #7d9029;\">!important</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb78-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">}</a>",
            "<a class=\"sourceLine\" id=\"cb78-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb78-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"fu\" style=\"color: #06287e;\">.row</span> {</a>",
            "<a class=\"sourceLine\" id=\"cb78-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">margin-top</span>: <span class=\"dv\" style=\"color: #40a070;\">1</span><span class=\"dt\" style=\"color: #902000;\">em</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb78-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">}</a>",
            "<a class=\"sourceLine\" id=\"cb78-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb78-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"fu\" style=\"color: #06287e;\">.mean</span> text {</a>",
            "<a class=\"sourceLine\" id=\"cb78-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">font</span>: <span class=\"dv\" style=\"color: #40a070;\">11</span><span class=\"dt\" style=\"color: #902000;\">px</span> <span class=\"dv\" style=\"color: #40a070;\">sans-serif</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb78-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">fill</span>: <span class=\"cn\" style=\"color: #880000;\">grey</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb78-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">}</a>",
            "<a class=\"sourceLine\" id=\"cb78-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb78-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"fu\" style=\"color: #06287e;\">.mean</span> path {</a>",
            "<a class=\"sourceLine\" id=\"cb78-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    stroke-dasharray: <span class=\"dv\" style=\"color: #40a070;\">3</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb78-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    stroke: <span class=\"cn\" style=\"color: #880000;\">grey</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb78-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    stroke-width: <span class=\"dv\" style=\"color: #40a070;\">1</span><span class=\"dt\" style=\"color: #902000;\">px</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb78-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">}</a></code></pre>",
            "</div>",
            "<p>",
            "  We won‚Äôt go into details about the CSS here. Many better books have been",
            "  written about it.",
            "</p>",
            "<p>In broad strokes:</p>",
            "<ul>",
            "  <li>",
            "    we‚Äôre making",
            "    <code style=\"white-space: pre-wrap;\">.histogram</code> rectangles ‚Äì¬†the",
            "    bars ‚Äì blue",
            "  </li>",
            "  <li>",
            "    labels white <code style=\"white-space: pre-wrap;\">12px</code> font",
            "  </li>",
            "  <li>",
            "    <code style=\"white-space: pre-wrap;\">button</code>s and",
            "    <code style=\"white-space: pre-wrap;\">.row</code>s have some spacing",
            "  </li>",
            "  <li>",
            "    the <code style=\"white-space: pre-wrap;\">.mean</code> line is a dotted",
            "    grey with gray <code style=\"white-space: pre-wrap;\">11px</code> text.",
            "  </li>",
            "</ul>",
            "<p>",
            "  More CSS than we need for just the histogram, but we‚Äôre already here so",
            "  might as well write it now.",
            "</p>",
            "<p>",
            "  Adding our CSS before building the Histogram means it‚Äôs going to look",
            "  beautiful the first time around.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "Step 3: Histogram component",
          "lectureLines": [
            "<h2 id=\"step-3-histogram-component\">Step 3: Histogram component</h2>",
            "<p>",
            "  We‚Äôre following the",
            "  <a",
            "    href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6887740#full-feature-integration\"",
            "    >full-feature integration</a",
            "  >",
            "  approach for our Histogram component. React talks to the DOM, D3",
            "  calculates the props.",
            "</p>",
            "<p>We‚Äôll use two components:</p>",
            "<ol type=\"1\">",
            "  <li>",
            "    <code style=\"white-space: pre-wrap;\">Histogram</code> makes the general",
            "    layout, dealing with D3, and translating raw data into a histogram",
            "  </li>",
            "  <li>",
            "    <code style=\"white-space: pre-wrap;\">HistogramBar</code> draws a single",
            "    bar and labels it",
            "  </li>",
            "</ol>",
            "<p>",
            "  Let‚Äôs start with the basics: a",
            "  <code style=\"white-space: pre-wrap;\">Histogram</code> directory and an",
            "  <code style=\"white-space: pre-wrap;\">index.js</code> file. Keeps our code",
            "  organized and imports easy. I like to use directories for components made",
            "  of multiple files.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb79\"",
            "  data-caption=\"Re-export Histogram\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb79-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"im\">default</span> <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;./Histogram&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  Import and re-export the histogram componenet from",
            "  <code style=\"white-space: pre-wrap;\">./Histogram</code>. This way you can",
            "  keep your histogram code in a file called Histogram and pretend the",
            "  directory itself is exporting it.",
            "</p>",
            "<p>",
            "  Great way to group files that belong together without exposing your",
            "  directory‚Äôs internal structure.",
            "</p>",
            "<p>",
            "  Now we need the",
            "  <code style=\"white-space: pre-wrap;\">Histogram.js</code> file. Start with",
            "  some imports, a default export, and a stubbed out",
            "  <code style=\"white-space: pre-wrap;\">Histogram</code> class.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb80\"",
            "  data-caption=\"Histogram component stub\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb80-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Histogram/Histogram.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb80-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;react&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb80-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"im\">as</span> d3 <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;d3&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb80-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb80-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Histogram <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb80-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    state <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb80-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">histogram</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">histogram</span>()<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb80-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">widthScale</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">scaleLinear</span>()<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb80-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">yScale</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">scaleLinear</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb80-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb80-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb80-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">static</span> <span class=\"at\" style=\"color: #7d9029;\">getDerivedStateFromProps</span>(props<span class=\"op\" style=\"color: #666666;\">,</span> state) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb80-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> <span class=\"op\" style=\"color: #666666;\">{</span> histogram<span class=\"op\" style=\"color: #666666;\">,</span> widthScale<span class=\"op\" style=\"color: #666666;\">,</span> yScale <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> state<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb80-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb80-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb80-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            ...<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb80-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            histogram<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb80-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            widthScale<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb80-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            yScale</a>",
            "<a class=\"sourceLine\" id=\"cb80-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb80-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb80-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb80-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    makeBar <span class=\"op\" style=\"color: #666666;\">=</span> bar <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb80-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> yScale<span class=\"op\" style=\"color: #666666;\">,</span> widthScale <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb80-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb80-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb80-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb80-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb80-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> histogram<span class=\"op\" style=\"color: #666666;\">,</span> yScale <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb80-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y<span class=\"op\" style=\"color: #666666;\">,</span> data<span class=\"op\" style=\"color: #666666;\">,</span> axisMargin <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb80-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb80-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">null</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb80-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb80-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  We import React and D3, and set up",
            "  <code style=\"white-space: pre-wrap;\">Histogram</code>.",
            "</p>",
            "<p>",
            "  Default <code style=\"white-space: pre-wrap;\">state</code> for our D3",
            "  objects:¬†histogram, widthScale, and yScale. An empty",
            "  <code style=\"white-space: pre-wrap;\">getDerivedStateFromProps</code> to",
            "  keep them updated, <code style=\"white-space: pre-wrap;\">makeBar</code> to",
            "  help us render each bar, and",
            "  <code style=\"white-space: pre-wrap;\">render</code> returning null for",
            "  now.",
            "</p>",
            "<h3 id=\"getderivedstatefromprops-1\">getDerivedStateFromProps</h3>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb81\"",
            "  data-caption=\"getDerivedStateFromProps in Histogram\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb81-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Histogram/Histogram.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb81-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">static</span> <span class=\"at\" style=\"color: #7d9029;\">getDerivedStateFromProps</span>(props<span class=\"op\" style=\"color: #666666;\">,</span> state) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb81-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> <span class=\"op\" style=\"color: #666666;\">{</span> histogram<span class=\"op\" style=\"color: #666666;\">,</span> widthScale<span class=\"op\" style=\"color: #666666;\">,</span> yScale <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> state<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb81-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb81-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">histogram</span>.<span class=\"at\" style=\"color: #7d9029;\">thresholds</span>(<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">bins</span>).<span class=\"at\" style=\"color: #7d9029;\">value</span>(<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">value</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb81-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb81-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> bars <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">histogram</span>(<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">data</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb81-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            counts <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">bars</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(d <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">length</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb81-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb81-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        widthScale</a>",
            "<a class=\"sourceLine\" id=\"cb81-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            .<span class=\"at\" style=\"color: #7d9029;\">domain</span>([<span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">min</span>(counts)<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">max</span>(counts)])</a>",
            "<a class=\"sourceLine\" id=\"cb81-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            .<span class=\"at\" style=\"color: #7d9029;\">range</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">width</span> <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">axisMargin</span>])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb81-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb81-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        yScale</a>",
            "<a class=\"sourceLine\" id=\"cb81-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            .<span class=\"at\" style=\"color: #7d9029;\">domain</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">max</span>(bars<span class=\"op\" style=\"color: #666666;\">,</span> d <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">x1</span>)])</a>",
            "<a class=\"sourceLine\" id=\"cb81-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            .<span class=\"at\" style=\"color: #7d9029;\">range</span>([<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">height</span> <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">y</span> <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">bottomMargin</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">0</span>])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb81-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb81-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb81-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            ...<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb81-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            histogram<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb81-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            widthScale<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb81-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            yScale</a>",
            "<a class=\"sourceLine\" id=\"cb81-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb81-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  First, we configure the",
            "  <code style=\"white-space: pre-wrap;\">histogram</code> generator.",
            "  <code style=\"white-space: pre-wrap;\">thresholds</code> specify how many",
            "  bins we want and",
            "  <code style=\"white-space: pre-wrap;\">value</code> specifies the value",
            "  accessor function. We get both from props passed into the",
            "  <code style=\"white-space: pre-wrap;\">Histogram</code> component.",
            "</p>",
            "<p>",
            "  In our case that makes 20 bins, and the value accessor returns each data",
            "  point‚Äôs <code style=\"white-space: pre-wrap;\">base_salary</code>.",
            "</p>",
            "<p>",
            "  We feed the data prop into our histogram generator, and count how many",
            "  values are in each bin with a",
            "  <code style=\"white-space: pre-wrap;\">.map</code> call. We need those to",
            "  configure our scales.",
            "</p>",
            "<p>",
            "  If you print the result of",
            "  <code style=\"white-space: pre-wrap;\">histogram()</code>, you‚Äôll see an",
            "  array structure where each entry holds metadata about the bin and the",
            "  values it contains.",
            "</p>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/histogram-data-screenshot.png\"",
            "    alt=\"console.log(this.histogram())\"",
            "  />",
            "  <figcaption>console.log(this.histogram())</figcaption>",
            "</figure>",
            "<p>Let‚Äôs use this info to set up our scales.</p>",
            "<p>",
            "  <code style=\"white-space: pre-wrap;\">widthScale</code> has a range from",
            "  the smallest (<code style=\"white-space: pre-wrap;\">d3.min</code>) bin to",
            "  the largest (<code style=\"white-space: pre-wrap;\">d3.max</code>), and a",
            "  range of <code style=\"white-space: pre-wrap;\">0</code> to width less a",
            "  margin. We‚Äôll use it to calculate bar sizes.",
            "</p>",
            "<p>",
            "  <code style=\"white-space: pre-wrap;\">yScale</code> has a range from",
            "  <code style=\"white-space: pre-wrap;\">0</code> to the largest",
            "  <code style=\"white-space: pre-wrap;\">x1</code> coordinate we can find in",
            "  a bin. Bins go from <code style=\"white-space: pre-wrap;\">x0</code> to",
            "  <code style=\"white-space: pre-wrap;\">x1</code>, which reflects the fact",
            "  that most histograms are horizontally oriented. Ours is vertical so that",
            "  our labels are easier to read. The range goes from",
            "  <code style=\"white-space: pre-wrap;\">0</code> to the maximum height less",
            "  a margin.",
            "</p>",
            "<p>Now let‚Äôs render this puppy.</p>",
            "<h3 id=\"render-1\">render</h3>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb82\"",
            "  data-caption=\"Histogram.render\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb82-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Histogram/Histogram.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb82-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Histogram <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb82-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb82-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb82-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> histogram<span class=\"op\" style=\"color: #666666;\">,</span> yScale <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb82-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y<span class=\"op\" style=\"color: #666666;\">,</span> data<span class=\"op\" style=\"color: #666666;\">,</span> axisMargin <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb82-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb82-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> bars <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">histogram</span>(data)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb82-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb82-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb82-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>g className<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;histogram&quot;</span> transform<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"vs\" style=\"color: #4070a0;\">`translate(</span><span class=\"sc\" style=\"color: #4070a0;\">${</span>x<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">, </span><span class=\"sc\" style=\"color: #4070a0;\">${</span>y<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">)`</span><span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb82-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&lt;</span>g className<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;bars&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb82-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"va\" style=\"color: #19177c;\">bars</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">makeBar</span>))<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb82-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                &lt;/g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb82-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            &lt;/g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb82-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb82-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb82-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  We take everything we need out of",
            "  <code style=\"white-space: pre-wrap;\">state</code> and",
            "  <code style=\"white-space: pre-wrap;\">props</code> with destructuring,",
            "  call <code style=\"white-space: pre-wrap;\">histogram()</code> on our data",
            "  to get a list of bars, and render.",
            "</p>",
            "<p>",
            "  Our render method returns a",
            "  <code style=\"white-space: pre-wrap;\">&lt;g&gt;</code> grouping element",
            "  transformed to the position given in props and walks through the",
            "  <code style=\"white-space: pre-wrap;\">bars</code> array, calling",
            "  <code style=\"white-space: pre-wrap;\">makeBar</code> for each. Later,",
            "  we‚Äôre going to add an <code style=\"white-space: pre-wrap;\">Axis</code> as",
            "  well.",
            "</p>",
            "<p>",
            "  This is a great example of React‚Äôs declarativeness. We have a bunch of",
            "  stuff, and all it takes to render is a loop. No worrying about how it",
            "  renders, where it goes, or anything like that. Walk through data, render,",
            "  done.",
            "</p>",
            "<h3 id=\"makebar\">makeBar</h3>",
            "<p>",
            "  <code style=\"white-space: pre-wrap;\">makeBar</code> is a function that",
            "  takes a histogram bar‚Äôs metadata and returns a",
            "  <code style=\"white-space: pre-wrap;\">HistogramBar</code> component. We",
            "  use it to make our declarative loop more readable.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb83\"",
            "  data-caption=\"Histogram.makeBar\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb83-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Histogram/Histogram.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb83-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Histogram <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb83-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb83-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    makeBar <span class=\"op\" style=\"color: #666666;\">=</span> bar <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb83-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> yScale<span class=\"op\" style=\"color: #666666;\">,</span> widthScale <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb83-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb83-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> percent <span class=\"op\" style=\"color: #666666;\">=</span> (<span class=\"va\" style=\"color: #19177c;\">bar</span>.<span class=\"at\" style=\"color: #7d9029;\">length</span> / <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"va\" style=\"color: #19177c;\">data</span>.<span class=\"at\" style=\"color: #7d9029;\">length</span>) <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"dv\" style=\"color: #40a070;\">100</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb83-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb83-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> props <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb83-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">percent</span><span class=\"op\" style=\"color: #666666;\">:</span> percent<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb83-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">axisMargin</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb83-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"at\" style=\"color: #7d9029;\">yScale</span>(<span class=\"va\" style=\"color: #19177c;\">bar</span>.<span class=\"at\" style=\"color: #7d9029;\">x1</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb83-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">width</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"at\" style=\"color: #7d9029;\">widthScale</span>(<span class=\"va\" style=\"color: #19177c;\">bar</span>.<span class=\"at\" style=\"color: #7d9029;\">length</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb83-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">height</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"at\" style=\"color: #7d9029;\">yScale</span>(<span class=\"va\" style=\"color: #19177c;\">bar</span>.<span class=\"at\" style=\"color: #7d9029;\">x0</span>) <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"at\" style=\"color: #7d9029;\">yScale</span>(<span class=\"va\" style=\"color: #19177c;\">bar</span>.<span class=\"at\" style=\"color: #7d9029;\">x1</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb83-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">key</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;histogram-bar-&quot;</span> <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"va\" style=\"color: #19177c;\">bar</span>.<span class=\"at\" style=\"color: #7d9029;\">x0</span></a>",
            "<a class=\"sourceLine\" id=\"cb83-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb83-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb83-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">&lt;</span>HistogramBar <span class=\"op\" style=\"color: #666666;\">{</span>...<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb83-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb83-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  See, we‚Äôre calculating",
            "  <code style=\"white-space: pre-wrap;\">props</code> and feeding them into",
            "  <code style=\"white-space: pre-wrap;\">HistogramBar</code>. Putting it in a",
            "  separate function just makes the",
            "  <code style=\"white-space: pre-wrap;\">.map</code> construct in",
            "  <code style=\"white-space: pre-wrap;\">render</code> easier to read.",
            "  There‚Äôs a lot of props to calculate.",
            "</p>",
            "<p>",
            "  Some, like <code style=\"white-space: pre-wrap;\">axisMargin</code> we pass",
            "  through, others like",
            "  <code style=\"white-space: pre-wrap;\">width</code> and",
            "  <code style=\"white-space: pre-wrap;\">height</code> we calculate using our",
            "  scales.",
            "</p>",
            "<p>",
            "  Setting the <code style=\"white-space: pre-wrap;\">key</code> prop is",
            "  important. React uses it to tell the bars apart and only re-render those",
            "  that change.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "Step 4: HistogramBar (sub)component",
          "lectureLines": [
            "<h2 id=\"step-4-histogrambar-subcomponent\">",
            "  Step 4: HistogramBar (sub)component",
            "</h2>",
            "<p>",
            "  Before our histogram shows up, we need another component:",
            "  <code style=\"white-space: pre-wrap;\">HistogramBar</code>. We",
            "  <em>could</em> have shoved all of it in the",
            "  <code style=\"white-space: pre-wrap;\">makeBar</code> function, but it",
            "  makes sense to keep separate. Better future flexibility.",
            "</p>",
            "<p>",
            "  You can write small components like this in the same file as their main",
            "  component. They‚Äôre not reusable since they fit a specific use-case, and",
            "  they‚Äôre small enough so your files don‚Äôt get too crazy.",
            "</p>",
            "<p>",
            "  But in the interest of readability, let‚Äôs make a",
            "  <code style=\"white-space: pre-wrap;\">HistogramBar</code> file.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb84\"",
            "  data-caption=\"HistogramBar component\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb84-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Histogram/HistogramBar.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb84-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;react&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb84-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb84-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> HistogramBar <span class=\"op\" style=\"color: #666666;\">=</span> (<span class=\"op\" style=\"color: #666666;\">{</span> percent<span class=\"op\" style=\"color: #666666;\">,</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y<span class=\"op\" style=\"color: #666666;\">,</span> width<span class=\"op\" style=\"color: #666666;\">,</span> height <span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb84-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> translate <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"vs\" style=\"color: #4070a0;\">`translate(</span><span class=\"sc\" style=\"color: #4070a0;\">${</span>x<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">, </span><span class=\"sc\" style=\"color: #4070a0;\">${</span>y<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">)`</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb84-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        label <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">percent</span>.<span class=\"at\" style=\"color: #7d9029;\">toFixed</span>(<span class=\"dv\" style=\"color: #40a070;\">0</span>) <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;%&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb84-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb84-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (percent <span class=\"op\" style=\"color: #666666;\">&lt;</span> <span class=\"dv\" style=\"color: #40a070;\">1</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb84-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        label <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">percent</span>.<span class=\"at\" style=\"color: #7d9029;\">toFixed</span>(<span class=\"dv\" style=\"color: #40a070;\">2</span>) <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;%&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb84-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb84-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb84-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (width <span class=\"op\" style=\"color: #666666;\">&lt;</span> <span class=\"dv\" style=\"color: #40a070;\">20</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb84-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        label <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">label</span>.<span class=\"at\" style=\"color: #7d9029;\">replace</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;%&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;&quot;</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb84-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb84-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb84-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (width <span class=\"op\" style=\"color: #666666;\">&lt;</span> <span class=\"dv\" style=\"color: #40a070;\">10</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb84-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        label <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb84-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb84-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb84-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb84-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>g transform<span class=\"op\" style=\"color: #666666;\">={</span>translate<span class=\"op\" style=\"color: #666666;\">}</span> className<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;bar&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb84-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>rect</a>",
            "<a class=\"sourceLine\" id=\"cb84-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                width<span class=\"op\" style=\"color: #666666;\">={</span>width<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb84-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                height<span class=\"op\" style=\"color: #666666;\">={</span>height <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"dv\" style=\"color: #40a070;\">2</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb84-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                transform<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;translate(0, 1)&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb84-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb84-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>text textAnchor<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;end&quot;</span> x<span class=\"op\" style=\"color: #666666;\">={</span>width <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"dv\" style=\"color: #40a070;\">5</span><span class=\"op\" style=\"color: #666666;\">}</span> y<span class=\"op\" style=\"color: #666666;\">={</span>height / <span class=\"dv\" style=\"color: #40a070;\">2</span> <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"dv\" style=\"color: #40a070;\">3</span><span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb84-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">{</span>label<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb84-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            &lt;/text<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb84-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        &lt;/g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb84-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb84-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb84-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb84-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> HistogramBar<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  Pretty long for a functional component. Most of it goes into deciding how",
            "  much precision to render in the label, so it‚Äôs okay.",
            "</p>",
            "<p>",
            "  We start with an SVG translate and a default",
            "  <code style=\"white-space: pre-wrap;\">label</code>. Then we update the",
            "  label based on the bar size and its value.",
            "</p>",
            "<p>",
            "  When we have a label we like, we return a",
            "  <code style=\"white-space: pre-wrap;\">&lt;g&gt;</code> grouping element",
            "  with a rectangle and a text. Both positioned based on the",
            "  <code style=\"white-space: pre-wrap;\">width</code> and",
            "  <code style=\"white-space: pre-wrap;\">height</code> of the bar.",
            "</p>",
            "<p>",
            "  Make sure to import",
            "  <code style=\"white-space: pre-wrap;\">HistogramBar</code> in the main",
            "  <code style=\"white-space: pre-wrap;\">Histogram</code> file.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb85\"",
            "  data-caption=\"HistogramBar import\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb85-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Histogram/Histogram.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb85-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb85-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> HistogramBar <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./HistogramBar&#39;</span></a></code></pre>",
            "</div>",
            "<p>You should now see a histogram.</p>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/histogram-without-axis.png\"",
            "    alt=\"Histogram without axis\"",
            "  />",
            "  <figcaption>Histogram without axis</figcaption>",
            "</figure>"
          ]
        },
        {
          "lectureTitle": "Step 5: Add an axis",
          "lectureLines": [
            "<h2 id=\"step-5-axis-hoc\">Step 5: Axis HOC</h2>",
            "<p>",
            "  Our histogram is pretty, but it needs an axis to be useful. You‚Äôve",
            "  already learned how to implement an axis when we talked about",
            "  <a",
            "    href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6887732#blackbox-axis\"",
            "    >blackbox integration</a",
            "  >. We‚Äôre going to use the same approach and copy those concepts into the",
            "  real project.",
            "</p>",
            "<h3 id=\"d3blackbox\">D3blackbox</h3>",
            "<p>",
            "  We start with the D3blackbox higher order component. Same as before,",
            "  except we put it in",
            "  <code style=\"white-space: pre-wrap;\">src/components</code>.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb86\"",
            "  data-caption=\"D3blackbox HOC\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb86-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;react&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb86-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb86-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span> <span class=\"at\" style=\"color: #7d9029;\">D3blackbox</span>(D3render) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb86-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Blackbox <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb86-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        anchorRef <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">createRef</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb86-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb86-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"at\" style=\"color: #7d9029;\">componentDidMount</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb86-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"va\" style=\"color: #19177c;\">D3render</span>.<span class=\"at\" style=\"color: #7d9029;\">call</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb86-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb86-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"at\" style=\"color: #7d9029;\">componentDidUpdate</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb86-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"va\" style=\"color: #19177c;\">D3render</span>.<span class=\"at\" style=\"color: #7d9029;\">call</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb86-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb86-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb86-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb86-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb86-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb86-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&lt;</span>g transform<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"vs\" style=\"color: #4070a0;\">`translate(</span><span class=\"sc\" style=\"color: #4070a0;\">${</span>x<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">, </span><span class=\"sc\" style=\"color: #4070a0;\">${</span>y<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">)`</span><span class=\"op\" style=\"color: #666666;\">}</span> ref<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">anchorRef</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb86-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb86-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb86-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb86-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  Take a <code style=\"white-space: pre-wrap;\">D3render</code> function,",
            "  call it on",
            "  <code style=\"white-space: pre-wrap;\">componentDidMount</code> and",
            "  <code style=\"white-space: pre-wrap;\">componentDidUpdate</code>, and",
            "  render a positioned anchor element for",
            "  <code style=\"white-space: pre-wrap;\">D3render</code> to hook into.",
            "</p>",
            "<h3 id=\"axis-component\">Axis component</h3>",
            "<p>",
            "  With <code style=\"white-space: pre-wrap;\">D3blackbox</code>, we can",
            "  reduce the <code style=\"white-space: pre-wrap;\">Axis</code> component to",
            "  a wrapped function. We‚Äôre implementing the",
            "  <code style=\"white-space: pre-wrap;\">D3render</code> method.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb87\"",
            "  data-caption=\"Axis component using D3blackbox\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb87-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"im\">as</span> d3 <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;d3&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb87-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> D3blackbox <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;../D3blackbox&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb87-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb87-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> Axis <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">D3blackbox</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb87-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> axis <span class=\"op\" style=\"color: #666666;\">=</span> d3</a>",
            "<a class=\"sourceLine\" id=\"cb87-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        .<span class=\"at\" style=\"color: #7d9029;\">axisLeft</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb87-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        .<span class=\"at\" style=\"color: #7d9029;\">tickFormat</span>(d <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"vs\" style=\"color: #4070a0;\">`</span><span class=\"sc\" style=\"color: #4070a0;\">${</span><span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">format</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;.2s&quot;</span>)(d)<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">`</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb87-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        .<span class=\"at\" style=\"color: #7d9029;\">scale</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">scale</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb87-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        .<span class=\"at\" style=\"color: #7d9029;\">ticks</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"va\" style=\"color: #19177c;\">data</span>.<span class=\"at\" style=\"color: #7d9029;\">length</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb87-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb87-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">select</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">anchorRef</span>.<span class=\"at\" style=\"color: #7d9029;\">current</span>).<span class=\"at\" style=\"color: #7d9029;\">call</span>(axis)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb87-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb87-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb87-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> Axis<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  We use D3‚Äôs",
            "  <code style=\"white-space: pre-wrap;\">axisLeft</code> generator, configure",
            "  its <code style=\"white-space: pre-wrap;\">tickFormat</code>, pass in a",
            "  <code style=\"white-space: pre-wrap;\">scale</code> from our props, and",
            "  specify how many <code style=\"white-space: pre-wrap;\">ticks</code> we",
            "  want. To render, we",
            "  <code style=\"white-space: pre-wrap;\">select</code> the anchor element",
            "  from <code style=\"white-space: pre-wrap;\">D3blackbox</code> and",
            "  <code style=\"white-space: pre-wrap;\">call</code> the axis generator on",
            "  it.",
            "</p>",
            "<p>",
            "  Yes, this <code style=\"white-space: pre-wrap;\">Axis</code> works just for",
            "  our specific use case and that‚Äôs okay. No need to generalize your code",
            "  until you know where else you‚Äôre using it.",
            "</p>",
            "<p>",
            "  Remember the",
            "  <a href=\"https://en.wikipedia.org/wiki/You_aren%27t_gonna_need_it\"",
            "    >YAGNI principle</a",
            "  >.",
            "</p>",
            "<h3 id=\"add-axis-to-histogram\">Add Axis to Histogram</h3>",
            "<p>",
            "  To render our new <code style=\"white-space: pre-wrap;\">Axis</code>, we",
            "  add it to the",
            "  <code style=\"white-space: pre-wrap;\">Histogram</code> component. It‚Äôs a",
            "  two step process:",
            "</p>",
            "<ol type=\"1\">",
            "  <li>",
            "    Import <code style=\"white-space: pre-wrap;\">Axis</code> component",
            "  </li>",
            "  <li>Render it</li>",
            "</ol>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb88\"",
            "  data-caption=\"Import and render Axis\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb88-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Histogram/Histogram.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb88-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"op\" style=\"color: #666666;\">{</span> Component <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;react&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb88-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"im\">as</span> d3 <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;d3&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb88-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb88-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb88-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> Axis <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./Axis&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb88-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb88-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb88-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb88-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Histogram <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> Component <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb88-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb88-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb88-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> histogram<span class=\"op\" style=\"color: #666666;\">,</span> yScale <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb88-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y<span class=\"op\" style=\"color: #666666;\">,</span> data<span class=\"op\" style=\"color: #666666;\">,</span> axisMargin <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb88-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb88-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> bars <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">histogram</span>(data)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb88-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb88-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb88-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>g className<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;histogram&quot;</span> transform<span class=\"op\" style=\"color: #666666;\">={</span>translate<span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb88-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&lt;</span>g className<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;bars&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb88-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"va\" style=\"color: #19177c;\">bars</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">makeBar</span>)<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb88-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                &lt;/g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb88-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb88-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&lt;</span>Axis x<span class=\"op\" style=\"color: #666666;\">={</span>axisMargin<span class=\"dv\" style=\"color: #40a070;\">-3</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb88-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                      y<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb88-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                      data<span class=\"op\" style=\"color: #666666;\">={</span>bars<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb88-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                      scale<span class=\"op\" style=\"color: #666666;\">={</span>yScale<span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb88-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb88-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            &lt;/g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb88-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb88-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  We import our <code style=\"white-space: pre-wrap;\">Axis</code> and add it",
            "  to the <code style=\"white-space: pre-wrap;\">render</code> method with",
            "  some props. It takes an <code style=\"white-space: pre-wrap;\">x</code> and",
            "  <code style=\"white-space: pre-wrap;\">y</code> coordinate, the",
            "  <code style=\"white-space: pre-wrap;\">data</code>, and a",
            "  <code style=\"white-space: pre-wrap;\">scale</code>.",
            "</p>",
            "<p>An axis appears.</p>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/basic-histogram.png\"",
            "    alt=\"Basic histogram with axis\"",
            "  />",
            "  <figcaption>Basic histogram with axis</figcaption>",
            "</figure>",
            "<p>",
            "  If that didn‚Äôt work, try comparing your changes to this",
            "  <a",
            "    href=\"https://github.com/Swizec/react-d3-walkthrough-livecode/commit/477b88a584794c3e0ea8955bf8109a40b2a3b771\"",
            "    >diff on Github</a",
            "  >.",
            "</p>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "Make it understandable with meta info",
      "lectures": [
        {
          "lectureTitle": "Add meta info",
          "lectureLines": [
            "<h1 id=\"make-it-understandable---meta-info\">",
            "  Make it understandable - meta info",
            "</h1>",
            "<p>",
            "  You‚Äôve come so far! There‚Äôs a US map and a histogram. They‚Äôre blue and",
            "  shiny and you look at them and you go <em>‚ÄúHuh?‚Äù</em>.",
            "</p>",
            "<p>",
            "  The key to a good data visualization is telling users what it means. An",
            "  easy way to do that is a good title and description. Just tell them. The",
            "  picture supports the words, the words explain the picture.",
            "</p>",
            "<p>Let‚Äôs add those words.</p>",
            "<p>",
            "  We‚Äôre adding a dynamic title and description, and a median line on the",
            "  histogram. The text is dynamic because we‚Äôre adding user controls later,",
            "  and we want the pictures and the words to stay in sync.",
            "</p>",
            "<p>",
            "  At the end of this section, you‚Äôll have a full visualization of the",
            "  shortened dataset.",
            "</p>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/dataviz-without-controls.png\"",
            "    alt=\"Full visualization without user controls\"",
            "  />",
            "  <figcaption>Full visualization without user controls</figcaption>",
            "</figure>"
          ]
        },
        {
          "lectureTitle": "Dynamic title",
          "lectureLines": [
            "<h2 id=\"dynamic-title\">Dynamic title</h2>",
            "<p>We begin with the title because it shows up first.</p>",
            "<p>",
            "  We start with an import in",
            "  <code style=\"white-space: pre-wrap;\">App.js</code> and add it to the",
            "  render method. You know the drill üòÑ",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb89\"",
            "  data-caption=\"Adding Title to main App component\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb89-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/App.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> CountyMap <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./components/CountyMap&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> Histogram <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./components/Histogram&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">{</span> Title <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./components/Meta&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb89-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> App <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> Component <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    state <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">techSalaries</span><span class=\"op\" style=\"color: #666666;\">:</span> []<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">countyNames</span><span class=\"op\" style=\"color: #666666;\">:</span> []<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">medianIncomes</span><span class=\"op\" style=\"color: #666666;\">:</span> []<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">filteredBy</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">USstate</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;*&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">year</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;*&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">jobTitle</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;*&#39;</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb89-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb89-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> filteredBy <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ..</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb89-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>div className<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;App container&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&lt;</span>Title data<span class=\"op\" style=\"color: #666666;\">={</span>filteredSalaries<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                       filteredBy<span class=\"op\" style=\"color: #666666;\">={</span>filteredBy<span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb89-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        )</a>",
            "<a class=\"sourceLine\" id=\"cb89-36\" title=\"36\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-37\" title=\"37\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  Ok, I lied. We did a lot more than just imports and adding to render.",
            "</p>",
            "<p>",
            "  We also set up the",
            "  <code style=\"white-space: pre-wrap;\">App</code> component for future",
            "  user-controlled data filtering. The",
            "  <code style=\"white-space: pre-wrap;\">filteredBy</code> key in",
            "  <code style=\"white-space: pre-wrap;\">state</code> tells us what the user",
            "  is filtering by ‚Äì 3 options:",
            "  <code style=\"white-space: pre-wrap;\">USstate</code>,",
            "  <code style=\"white-space: pre-wrap;\">year</code>, and",
            "  <code style=\"white-space: pre-wrap;\">jobTitle</code>. We set them to",
            "  ‚Äúeverything‚Äù by default.",
            "</p>",
            "<p>",
            "  We added them now so that we can immediately write our",
            "  <code style=\"white-space: pre-wrap;\">Title</code> component in a",
            "  filterable way. No need to make changes later.",
            "</p>",
            "<p>",
            "  As you can see, <code style=\"white-space: pre-wrap;\">Title</code> takes",
            "  <code style=\"white-space: pre-wrap;\">data</code> and",
            "  <code style=\"white-space: pre-wrap;\">filteredBy</code> props.",
            "</p>",
            "<h3 id=\"prep-meta-component\">Prep Meta component</h3>",
            "<p>",
            "  Before we begin the",
            "  <code style=\"white-space: pre-wrap;\">Title</code> component, there are a",
            "  few things to take care of. Our meta components work together for a",
            "  common purpose ‚Äì showing meta data. Grouping them in a directory makes",
            "  sense.",
            "</p>",
            "<p>",
            "  We make a",
            "  <code style=\"white-space: pre-wrap;\">components/Meta</code> directory and",
            "  add an <code style=\"white-space: pre-wrap;\">index.js</code>. It makes",
            "  importing easier.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb90\"",
            "  data-caption=\"Meta index.js\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb90-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Meta/index.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb90-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"im\">default</span> <span class=\"im\">as</span> Title <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./Title&#39;</span></a>",
            "<a class=\"sourceLine\" id=\"cb90-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"im\">default</span> <span class=\"im\">as</span> Description <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./Description&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  We have to name our <code style=\"white-space: pre-wrap;\">Title</code> and",
            "  <code style=\"white-space: pre-wrap;\">Description</code> re-exports",
            "  because you can‚Äôt have two default exports.",
            "</p>",
            "<h4 id=\"get-the-usstatesmap-file\">Get the USStatesMap file</h4>",
            "<p>",
            "  You need the",
            "  <code style=\"white-space: pre-wrap;\">USStatesMap</code> file.",
            "</p>",
            "<p>",
            "  It‚Äôs a big dictionary that translates US state codes to full names. You",
            "  can",
            "  <a",
            "    href=\"https://github.com/Swizec/react-d3-walkthrough-livecode/raw/3b1052fe3f70ab12142e5aac684b95ed430b12b2/src/components/Meta/USStatesMap.js\"",
            "    >get it from Github</a",
            "  >",
            "  and save it as",
            "  <code style=\"white-space: pre-wrap;\">components/Meta/USStatesMap.js</code",
            "  >.",
            "</p>",
            "<p>We‚Äôll use it when creating titles and descriptions.</p>",
            "<h3 id=\"implement-title\">Implement Title</h3>",
            "<p>",
            "  We‚Äôre building two types of titles based on user selection. If both",
            "  <code style=\"white-space: pre-wrap;\">years</code> and",
            "  <code style=\"white-space: pre-wrap;\">US state</code> were selected, we",
            "  return",
            "  <code style=\"white-space: pre-wrap;\"",
            "    >In {US state}, the average {job title} paid ${mean}/year in",
            "    {year}</code",
            "  >. If not, we return",
            "  <code style=\"white-space: pre-wrap;\"",
            "    >{job title} paid ${mean}/year in {state} in {year}</code",
            "  >.",
            "</p>",
            "<p>",
            "  I know, it‚Äôs confusing. They look like the same sentence turned around.",
            "  Notice the <em>and</em>. First option when <em>both</em> are selected,",
            "  second when either/or.",
            "</p>",
            "<p>We start with imports, a stub, and a default export.</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb91\"",
            "  data-caption=\"Title component stub\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb91-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Meta/Title.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb91-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"op\" style=\"color: #666666;\">{</span> Component <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;react&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb91-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">{</span> scaleLinear <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;d3-scale&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb91-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">{</span> mean <span class=\"im\">as</span> d3mean<span class=\"op\" style=\"color: #666666;\">,</span> extent <span class=\"im\">as</span> d3extent <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;d3-array&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb91-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb91-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> USStatesMap <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./USStatesMap&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb91-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb91-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Title <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> Component <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb91-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    get <span class=\"at\" style=\"color: #7d9029;\">yearsFragment</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb91-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb91-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb91-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    get <span class=\"at\" style=\"color: #7d9029;\">USstateFragment</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb91-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb91-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb91-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    get <span class=\"at\" style=\"color: #7d9029;\">jobTitleFragment</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb91-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb91-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb91-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    get <span class=\"at\" style=\"color: #7d9029;\">format</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb91-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb91-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb91-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb91-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb91-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb91-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb91-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> Title<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  We import only what we need from D3‚Äôs",
            "  <code style=\"white-space: pre-wrap;\">d3-scale</code> and",
            "  <code style=\"white-space: pre-wrap;\">d3-array</code> packages. I consider",
            "  this best practice until you‚Äôre importing so much that it gets messy to",
            "  look at.",
            "</p>",
            "<p>",
            "  In the <code style=\"white-space: pre-wrap;\">Title</code> component, we",
            "  have 4 getters and a render. Getters are ES6 functions that work like",
            "  dynamic properties. You specify a function without arguments, and you use",
            "  it without <code style=\"white-space: pre-wrap;\">()</code>. It‚Äôs neat.",
            "</p>",
            "<h4 id=\"the-getters\">The getters</h4>",
            "<ol type=\"1\">",
            "  <li>",
            "    <code style=\"white-space: pre-wrap;\">yearsFragment</code> describes the",
            "    selected year",
            "  </li>",
            "  <li>",
            "    <code style=\"white-space: pre-wrap;\">USstateFragment</code> describes",
            "    the selected US state",
            "  </li>",
            "  <li>",
            "    <code style=\"white-space: pre-wrap;\">jobTitleFragment</code> describes",
            "    the selected job title",
            "  </li>",
            "  <li>",
            "    <code style=\"white-space: pre-wrap;\">format</code> returns a number",
            "    formatter",
            "  </li>",
            "</ol>",
            "<p>",
            "  We can implement",
            "  <code style=\"white-space: pre-wrap;\">yearsFragment</code>,",
            "  <code style=\"white-space: pre-wrap;\">USstateFragment</code>, and",
            "  <code style=\"white-space: pre-wrap;\">format</code> in one code sample.",
            "  They‚Äôre short.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb92\"",
            "  data-caption=\"3 short getters in Title\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb92-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Meta/Title.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb92-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Title <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> Component <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb92-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    get <span class=\"at\" style=\"color: #7d9029;\">yearsFragment</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb92-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> year <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"va\" style=\"color: #19177c;\">filteredBy</span>.<span class=\"at\" style=\"color: #7d9029;\">year</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb92-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb92-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> year <span class=\"op\" style=\"color: #666666;\">===</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;*&#39;</span> <span class=\"op\" style=\"color: #666666;\">?</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;&quot;</span> : <span class=\"vs\" style=\"color: #4070a0;\">`in </span><span class=\"sc\" style=\"color: #4070a0;\">${</span>year<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">`</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb92-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb92-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb92-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">getteFragment</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb92-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> USstate <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"va\" style=\"color: #19177c;\">filteredBy</span>.<span class=\"at\" style=\"color: #7d9029;\">USstate</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb92-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb92-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> USstate <span class=\"op\" style=\"color: #666666;\">===</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;*&#39;</span> <span class=\"op\" style=\"color: #666666;\">?</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;&quot;</span> : USStatesMap[<span class=\"va\" style=\"color: #19177c;\">USstate</span>.<span class=\"at\" style=\"color: #7d9029;\">toUpperCase</span>()]<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb92-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb92-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb92-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb92-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb92-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    get <span class=\"at\" style=\"color: #7d9029;\">format</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb92-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"at\" style=\"color: #7d9029;\">scaleLinear</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb92-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                 .<span class=\"at\" style=\"color: #7d9029;\">domain</span>(<span class=\"at\" style=\"color: #7d9029;\">d3extent</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">data</span><span class=\"op\" style=\"color: #666666;\">,</span> d <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">base_salary</span>))</a>",
            "<a class=\"sourceLine\" id=\"cb92-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                 .<span class=\"at\" style=\"color: #7d9029;\">tickFormat</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb92-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  In both <code style=\"white-space: pre-wrap;\">yearsFragment</code> and",
            "  <code style=\"white-space: pre-wrap;\">USstateFragment</code>, we get the",
            "  appropriate value from Title‚Äôs",
            "  <code style=\"white-space: pre-wrap;\">filteredBy</code> prop, then return",
            "  a string with the value or an empty string.",
            "</p>",
            "<p>",
            "  We rely on D3‚Äôs built-in number formatters to build",
            "  <code style=\"white-space: pre-wrap;\">format</code>. Linear scales have",
            "  the one that turns <code style=\"white-space: pre-wrap;\">10000</code> into",
            "  <code style=\"white-space: pre-wrap;\">10,000</code>. Tick formatters don‚Äôt",
            "  work well without a <code style=\"white-space: pre-wrap;\">domain</code>,",
            "  so we define it. We don‚Äôt need a range because we never use the scale",
            "  itself.",
            "</p>",
            "<p>",
            "  <code style=\"white-space: pre-wrap;\">format</code> returns a function,",
            "  which makes it a",
            "  <a href=\"https://en.wikipedia.org/wiki/Higher-order_function\"",
            "    >higher order function</a",
            "  >. Being a getter makes it really nice to use:",
            "  <code style=\"white-space: pre-wrap;\">this.format()</code>. Looks just",
            "  like a normal function call üòÑ",
            "</p>",
            "<p>",
            "  The <code style=\"white-space: pre-wrap;\">jobTitleFragment</code> getter",
            "  is conceptually no harder than",
            "  <code style=\"white-space: pre-wrap;\">yearsFragment</code> and",
            "  <code style=\"white-space: pre-wrap;\">USstateFragment</code>, but it comes",
            "  with a few more conditionals.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb93\"",
            "  data-caption=\"Title.jobTitleFragment\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb93-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Meta/Title.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb93-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb93-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Title <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> Component <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb93-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb93-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    get <span class=\"at\" style=\"color: #7d9029;\">jobTitleFragment</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb93-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> jobTitle<span class=\"op\" style=\"color: #666666;\">,</span> year <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">filteredBy</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb93-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> title <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb93-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb93-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (jobTitle <span class=\"op\" style=\"color: #666666;\">===</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;*&quot;</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb93-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (year <span class=\"op\" style=\"color: #666666;\">===</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;*&quot;</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb93-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                title <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;The average H1B in tech pays&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb93-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">else</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb93-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                title <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;The average tech H1B paid&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb93-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb93-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">else</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb93-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            title <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"vs\" style=\"color: #4070a0;\">`Software </span><span class=\"sc\" style=\"color: #4070a0;\">${</span>jobTitle<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">s on an H1B`</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb93-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (year <span class=\"op\" style=\"color: #666666;\">===</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;*&quot;</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb93-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                title <span class=\"op\" style=\"color: #666666;\">+=</span> <span class=\"st\" style=\"color: #4070a0;\">&quot; make&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb93-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">else</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb93-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                title <span class=\"op\" style=\"color: #666666;\">+=</span> <span class=\"st\" style=\"color: #4070a0;\">&quot; made&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb93-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb93-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb93-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb93-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> title<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb93-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb93-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb93-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  We‚Äôre dealing with the",
            "  <code style=\"white-space: pre-wrap;\">(jobTitle, year)</code> combination.",
            "  Each influences the other when building the fragment for a total 4",
            "  different options.",
            "</p>",
            "<h4 id=\"the-render\">The render</h4>",
            "<p>",
            "  We put all this together in the",
            "  <code style=\"white-space: pre-wrap;\">render</code> method. A conditional",
            "  decides which of the two situations we‚Äôre in, and we return an",
            "  <code style=\"white-space: pre-wrap;\">&lt;h2&gt;</code> tag with the right",
            "  text.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb94\"",
            "  data-caption=\"Title.render\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb94-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Meta/Title.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb94-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Title <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> Component <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb94-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb94-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb94-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> mean <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">format</span>(<span class=\"at\" style=\"color: #7d9029;\">d3mean</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">data</span><span class=\"op\" style=\"color: #666666;\">,</span> d <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">base_salary</span>))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb94-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb94-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> title<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb94-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb94-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">yearsFragment</span> <span class=\"op\" style=\"color: #666666;\">&amp;&amp;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">USstateFragment</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb94-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            title <span class=\"op\" style=\"color: #666666;\">=</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb94-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&lt;</span>h2<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb94-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    In <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">USstateFragment</span><span class=\"op\" style=\"color: #666666;\">},</span> <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">jobTitleFragment</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb94-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    $<span class=\"op\" style=\"color: #666666;\">{</span>mean<span class=\"op\" style=\"color: #666666;\">}</span><span class=\"ss\" style=\"color: #bb6688;\">/year {this.yearsFragment}</span></a>",
            "<a class=\"sourceLine\" id=\"cb94-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"ss\" style=\"color: #bb6688;\">                &lt;/h2</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb94-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb94-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span><span class=\"cf\" style=\"color: #007020; font-weight: bold;\">else</span><span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb94-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            title <span class=\"op\" style=\"color: #666666;\">=</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb94-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&lt;</span>h2<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb94-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">jobTitleFragment</span><span class=\"op\" style=\"color: #666666;\">}</span> $<span class=\"op\" style=\"color: #666666;\">{</span>mean<span class=\"op\" style=\"color: #666666;\">}</span><span class=\"ss\" style=\"color: #bb6688;\">/year</span></a>",
            "<a class=\"sourceLine\" id=\"cb94-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"ss\" style=\"color: #bb6688;\">                    {this.USstateFragment </span><span class=\"sc\" style=\"color: #4070a0;\">?</span><span class=\"ss\" style=\"color: #bb6688;\"> `in ${this.stateFragment}` : &#39;&#39;}</span></a>",
            "<a class=\"sourceLine\" id=\"cb94-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"ss\" style=\"color: #bb6688;\">                    {this.yearsFragment}</span></a>",
            "<a class=\"sourceLine\" id=\"cb94-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"ss\" style=\"color: #bb6688;\">                &lt;/h2</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb94-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb94-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb94-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb94-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> title<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb94-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb94-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  Calculate the mean value using",
            "  <code style=\"white-space: pre-wrap;\">d3.mean</code> with a value",
            "  accessor, turn it into a pretty number with",
            "  <code style=\"white-space: pre-wrap;\">this.format</code>, then use one of",
            "  two string patterns to make a",
            "  <code style=\"white-space: pre-wrap;\">title</code>.",
            "</p>",
            "<p>And a title appears.</p>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/dataviz-with-title.png\"",
            "    alt=\"Dataviz with title\"",
            "  />",
            "  <figcaption>Dataviz with title</figcaption>",
            "</figure>",
            "<p>",
            "  If it doesn‚Äôt, consult",
            "  <a",
            "    href=\"https://github.com/Swizec/react-d3-walkthrough-livecode/commit/781beba67e7b76935896fa7a3dfd4802a4d81993\"",
            "    >this diff on Github</a",
            "  >.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "Dynamic description",
          "lectureLines": [
            "<h2 id=\"dynamic-description\">Dynamic description</h2>",
            "<p>",
            "  You know what? The dynamic description component is pretty much the same",
            "  as the title. It‚Äôs just longer and more complex and uses more code. It‚Äôs",
            "  interesting, but not super relevant to the topic of this book.",
            "</p>",
            "<p>",
            "  So rather than explain it all here, I‚Äôm going to give you a link to the",
            "  <a",
            "    href=\"https://github.com/Swizec/react-d3-walkthrough-livecode/commit/3b1052fe3f70ab12142e5aac684b95ed430b12b2\"",
            "    >diff on Github</a",
            "  >",
            "</p>",
            "<p>We use the same approach as before:</p>",
            "<ol type=\"1\">",
            "  <li>",
            "    Add imports in <code style=\"white-space: pre-wrap;\">App.js</code>",
            "  </li>",
            "  <li>",
            "    Add component to <code style=\"white-space: pre-wrap;\">App</code> render",
            "  </li>",
            "  <li>",
            "    Add re-export to",
            "    <code style=\"white-space: pre-wrap;\">components/Meta/index.js</code>",
            "  </li>",
            "  <li>",
            "    Implement component in",
            "    <code style=\"white-space: pre-wrap;\"",
            "      >components/Meta/Description.js</code",
            "    >",
            "  </li>",
            "  <li>Use getters for sentence fragments</li>",
            "  <li>Play with conditionals to construct different sentences</li>",
            "</ol>",
            "<p>142 lines of mundane code.</p>",
            "<p>",
            "  All the interesting complexity goes into finding the richest city and",
            "  county. That part looks like this:",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb95\"",
            "  data-caption=\"Richest county calculation\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb95-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Meta/Description.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb95-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">get <span class=\"at\" style=\"color: #7d9029;\">countyFragment</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb95-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> byCounty <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">_</span>.<span class=\"at\" style=\"color: #7d9029;\">groupBy</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">data</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;countyID&#39;</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb95-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        medians <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">medianIncomesByCounty</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb95-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb95-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> ordered <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">_</span>.<span class=\"at\" style=\"color: #7d9029;\">sortBy</span>(</a>",
            "<a class=\"sourceLine\" id=\"cb95-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"va\" style=\"color: #19177c;\">_</span>.<span class=\"at\" style=\"color: #7d9029;\">keys</span>(byCounty)</a>",
            "<a class=\"sourceLine\" id=\"cb95-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">       .<span class=\"at\" style=\"color: #7d9029;\">map</span>(county <span class=\"op\" style=\"color: #666666;\">=&gt;</span> byCounty[county])</a>",
            "<a class=\"sourceLine\" id=\"cb95-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">       .<span class=\"at\" style=\"color: #7d9029;\">filter</span>(d <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">length</span>/<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"va\" style=\"color: #19177c;\">data</span>.<span class=\"at\" style=\"color: #7d9029;\">length</span> <span class=\"op\" style=\"color: #666666;\">&gt;</span> <span class=\"fl\" style=\"color: #40a070;\">0.01</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb95-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      items <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"at\" style=\"color: #7d9029;\">d3mean</span>(items<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb95-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                      d <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">base_salary</span>) <span class=\"op\" style=\"color: #666666;\">-</span> medians[items[<span class=\"dv\" style=\"color: #40a070;\">0</span>].<span class=\"at\" style=\"color: #7d9029;\">countyID</span>][<span class=\"dv\" style=\"color: #40a070;\">0</span>].<span class=\"at\" style=\"color: #7d9029;\">medianIncome</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb95-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb95-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> best <span class=\"op\" style=\"color: #666666;\">=</span> ordered[<span class=\"va\" style=\"color: #19177c;\">ordered</span>.<span class=\"at\" style=\"color: #7d9029;\">length</span><span class=\"dv\" style=\"color: #40a070;\">-1</span>]<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb95-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      countyMedian <span class=\"op\" style=\"color: #666666;\">=</span> medians[best[<span class=\"dv\" style=\"color: #40a070;\">0</span>].<span class=\"at\" style=\"color: #7d9029;\">countyID</span>][<span class=\"dv\" style=\"color: #40a070;\">0</span>].<span class=\"at\" style=\"color: #7d9029;\">medianIncome</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb95-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb95-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb95-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  We group the dataset by county, then sort counties by their income delta.",
            "  We look only at counties that are bigger than 1% of the entire dataset.",
            "  And we define income delta as the difference between a county‚Äôs median",
            "  household income and the median tech salary in our dataset.",
            "</p>",
            "<p>",
            "  This code is not super efficient, but it gets the job done. We could",
            "  optimize by just looking for the max value, for example.",
            "</p>",
            "<p>Similar code handles finding the best city.</p>",
            "<h3 id=\"render-the-description\">Render the description</h3>",
            "<p>",
            "  I recommend copying the",
            "  <a",
            "    href=\"https://github.com/Swizec/react-d3-walkthrough-livecode/commit/3b1052fe3f70ab12142e5aac684b95ed430b12b2\"",
            "    ><code style=\"white-space: pre-wrap;\">Description</code> component from",
            "    GitHub</a",
            "  >. Most of it has little to do with React and data visualization. It‚Äôs",
            "  all about combining sentence fragments based on props.",
            "</p>",
            "<p>You then render the Description like this:</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb96\"",
            "  data-caption=\"Render Description component\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb96-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/App.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb96-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb96-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">{</span> Title<span class=\"op\" style=\"color: #666666;\">,</span> Description <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;./components/Meta&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb96-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb96-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ..</span></a>",
            "<a class=\"sourceLine\" id=\"cb96-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb96-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">&lt;</span>Description</a>",
            "<a class=\"sourceLine\" id=\"cb96-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    data<span class=\"op\" style=\"color: #666666;\">={</span>filteredSalaries<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb96-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    allData<span class=\"op\" style=\"color: #666666;\">={</span>techSalaries<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb96-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    filteredBy<span class=\"op\" style=\"color: #666666;\">={</span>filteredBy<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb96-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    medianIncomesByCounty<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">medianIncomesByCounty</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb96-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">/&gt;</a></code></pre>",
            "</div>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/dataviz-with-description.png\"",
            "    alt=\"Dataviz with Title and Description\"",
            "  />",
            "  <figcaption>Dataviz with Title and Description</figcaption>",
            "</figure>"
          ]
        },
        {
          "lectureTitle": "Overlay a median household line",
          "lectureLines": [
            "<h2 id=\"overlay-a-median-household-line\">",
            "  Overlay a median household line",
            "</h2>",
            "<p>",
            "  Here‚Äôs a more interesting component: the median dotted line. It shows a",
            "  direct comparison between the histogram‚Äôs distribution and the median",
            "  household income in an area. I‚Äôm not sure people understand it at a",
            "  glance, but I think it‚Äôs cool.",
            "</p>",
            "<p>",
            "  We‚Äôre using a quick approach where everything fits into a functional",
            "  React component. It‚Äôs great for small components like this.",
            "</p>",
            "<h3 id=\"step-1-app.js\">Step 1: App.js</h3>",
            "<p>",
            "  Inside <code style=\"white-space: pre-wrap;\">src/App.js</code>, we first",
            "  have to add an import, then extract the median household value from",
            "  state, and in the end, add",
            "  <code style=\"white-space: pre-wrap;\">MedianLine</code> to the render",
            "  method.",
            "</p>",
            "<p>Let‚Äôs see if we can do it in a single code block üòÑ</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb97\"",
            "  data-caption=\"Adding MedianLine to App.js\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb97-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/App.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> Histogram <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./components/Histogram&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">{</span> Title<span class=\"op\" style=\"color: #666666;\">,</span> Description<span class=\"op\" style=\"color: #666666;\">,</span> GraphDescription <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./components/Meta&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> MedianLine <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./components/MedianLine&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb97-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> App <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> Component <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> zoom <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">null</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            medianHousehold <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">medianIncomesByUSState</span>[<span class=\"st\" style=\"color: #4070a0;\">&#39;US&#39;</span>][<span class=\"dv\" style=\"color: #40a070;\">0</span>]</a>",
            "<a class=\"sourceLine\" id=\"cb97-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                                  .<span class=\"at\" style=\"color: #7d9029;\">medianIncome</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb97-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb97-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>svg width<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;1100&quot;</span> height<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;500&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&lt;</span>CountyMap <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ... /&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&lt;</span>Histogram <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ... /&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&lt;</span>MedianLine data<span class=\"op\" style=\"color: #666666;\">={</span>filteredSalaries<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                            x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">500</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                            y<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">10</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                            width<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">600</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                            height<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">500</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                            bottomMargin<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">5</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                            median<span class=\"op\" style=\"color: #666666;\">={</span>medianHousehold<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                            value<span class=\"op\" style=\"color: #666666;\">={</span>d <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">base_salary</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb97-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            &lt;/svg<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        )</a>",
            "<a class=\"sourceLine\" id=\"cb97-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-36\" title=\"36\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  You probably don‚Äôt remember",
            "  <code style=\"white-space: pre-wrap;\">medianIncomesByUSState</code>",
            "  anymore. We set it up way back when",
            "  <a",
            "    href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6888897#tie-datasets-together\"",
            "    >tying datasets together</a",
            "  >. It groups our salary data by US state.",
            "</p>",
            "<p>See, using good names helps üòÑ</p>",
            "<p>",
            "  When rendering <code style=\"white-space: pre-wrap;\">MedianLine</code>, we",
            "  give it sizing and positioning props, the dataset, a",
            "  <code style=\"white-space: pre-wrap;\">value</code> accessor, and the",
            "  median value to show. We could make it smart enough to calculate the",
            "  median, but the added flexibility of a prop felt right.",
            "</p>",
            "<h3 id=\"step-2-medianline\">Step 2: MedianLine</h3>",
            "<p>",
            "  The <code style=\"white-space: pre-wrap;\">MedianLine</code> component",
            "  looks similar to what you‚Äôve seen so far. Some imports, a",
            "  <code style=\"white-space: pre-wrap;\">constructor</code> that sets up D3",
            "  objects, an <code style=\"white-space: pre-wrap;\">updateD3</code> method",
            "  that keeps them in sync, and a",
            "  <code style=\"white-space: pre-wrap;\">render</code> method that outputs",
            "  SVG.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb98\"",
            "  data-caption=\"MedianLine component stub\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb98-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/MedianLine.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb98-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb98-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;react&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb98-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"im\">as</span> d3 <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;d3&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb98-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb98-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> MedianLine <span class=\"op\" style=\"color: #666666;\">=</span> (<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb98-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    data<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb98-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    value<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb98-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    width<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb98-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    height<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb98-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    x<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb98-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    y<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb98-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    bottomMargin<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb98-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    median</a>",
            "<a class=\"sourceLine\" id=\"cb98-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb98-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb98-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb98-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb98-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> MedianLine<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  We have some imports, a functional",
            "  <code style=\"white-space: pre-wrap;\">MedianLine</code> component that",
            "  takes our props, and an export. It should cause an error because it‚Äôs not",
            "  returning anything.",
            "</p>",
            "<p>Everything we need to render the line, fits into this function.</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb99\"",
            "  data-caption=\"MedianLine render\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb99-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/MedianLine.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb99-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb99-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> MedianLine <span class=\"op\" style=\"color: #666666;\">=</span> (<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb99-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb99-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb99-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> yScale <span class=\"op\" style=\"color: #666666;\">=</span> d3</a>",
            "<a class=\"sourceLine\" id=\"cb99-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            .<span class=\"at\" style=\"color: #7d9029;\">scaleLinear</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb99-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            .<span class=\"at\" style=\"color: #7d9029;\">domain</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">max</span>(data<span class=\"op\" style=\"color: #666666;\">,</span> value)])</a>",
            "<a class=\"sourceLine\" id=\"cb99-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            .<span class=\"at\" style=\"color: #7d9029;\">range</span>([height <span class=\"op\" style=\"color: #666666;\">-</span> y <span class=\"op\" style=\"color: #666666;\">-</span> bottomMargin<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">0</span>])<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb99-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        line <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">line</span>()([[<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">5</span>]<span class=\"op\" style=\"color: #666666;\">,</span> [width<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">5</span>]])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb99-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb99-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> medianValue <span class=\"op\" style=\"color: #666666;\">=</span> median <span class=\"op\" style=\"color: #666666;\">||</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">median</span>(data<span class=\"op\" style=\"color: #666666;\">,</span> value)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb99-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb99-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> translate <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"vs\" style=\"color: #4070a0;\">`translate(</span><span class=\"sc\" style=\"color: #4070a0;\">${</span>x<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">, </span><span class=\"sc\" style=\"color: #4070a0;\">${</span><span class=\"at\" style=\"color: #7d9029;\">yScale</span>(medianValue)<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">)`</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb99-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        medianLabel <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"vs\" style=\"color: #4070a0;\">`Median Household: $</span><span class=\"sc\" style=\"color: #4070a0;\">${</span><span class=\"va\" style=\"color: #19177c;\">yScale</span>.<span class=\"at\" style=\"color: #7d9029;\">tickFormat</span>()(median)<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">`</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb99-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb99-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb99-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>g className<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;mean&quot;</span> transform<span class=\"op\" style=\"color: #666666;\">={</span>translate<span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb99-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>text</a>",
            "<a class=\"sourceLine\" id=\"cb99-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                x<span class=\"op\" style=\"color: #666666;\">={</span>width <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"dv\" style=\"color: #40a070;\">5</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb99-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                y<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;0&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb99-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                textAnchor<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;end&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb99-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                style<span class=\"op\" style=\"color: #666666;\">={{</span> <span class=\"dt\">background</span><span class=\"op\">:</span> <span class=\"st\">&quot;purple&quot;</span> <span class=\"op\">}}</span></a>",
            "<a class=\"sourceLine\" id=\"cb99-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb99-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">{</span>medianLabel<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb99-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            &lt;/text<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb99-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>path d<span class=\"op\" style=\"color: #666666;\">={</span>line<span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb99-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        &lt;/g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb99-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb99-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">};</span></a></code></pre>",
            "</div>",
            "<p>",
            "  We start with a scale for vertical positioning ‚Äì",
            "  <code style=\"white-space: pre-wrap;\">yScale</code>. It‚Äôs linear, takes",
            "  values from <code style=\"white-space: pre-wrap;\">0</code> to",
            "  <code style=\"white-space: pre-wrap;\">max</code>, and translates them to",
            "  pixels less some margin. For the",
            "  <code style=\"white-space: pre-wrap;\">medianValue</code>, we use props, or",
            "  calculate our own, if needed. Just like I promised.",
            "</p>",
            "<p>",
            "  A <code style=\"white-space: pre-wrap;\">translate</code> SVG transform",
            "  helps us position our line and label. We use it all to return a",
            "  <code style=\"white-space: pre-wrap;\">&lt;g&gt;</code> grouping element",
            "  containing a <code style=\"white-space: pre-wrap;\">&lt;text&gt;</code> for",
            "  our label, and a",
            "  <code style=\"white-space: pre-wrap;\">&lt;path&gt;</code> for the line.",
            "</p>",
            "<p>",
            "  Building the <code style=\"white-space: pre-wrap;\">d</code> attribute for",
            "  the path, that‚Äôs interesting. We use a",
            "  <code style=\"white-space: pre-wrap;\">line</code> generator from D3.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb100\"",
            "  data-caption=\"Line generator\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb100-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">line <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">line</span>()([[<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">5</span>]<span class=\"op\" style=\"color: #666666;\">,</span> [width<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">5</span>]])<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  It comes from the",
            "  <a href=\"https://github.com/d3/d3-shape#lines\">d3-shape</a> package and",
            "  generates splines, or polylines. By default, it takes an array of points",
            "  and builds a line through all of them. A line from",
            "  <code style=\"white-space: pre-wrap;\">[0, 5]</code> to",
            "  <code style=\"white-space: pre-wrap;\">[width, 5]</code> in our case.",
            "</p>",
            "<p>",
            "  That makes it span the entire width and leaves 5px for the label. We‚Äôre",
            "  using a <code style=\"white-space: pre-wrap;\">transform</code> on the",
            "  entire group to vertically position the final element.",
            "</p>",
            "<p>",
            "  Remember, we already styled",
            "  <code style=\"white-space: pre-wrap;\">medianLine</code> when we built",
            "  <a",
            "    href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6888921#histogram-css\"",
            "    >histogram styles</a",
            "  >",
            "  earlier.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb101\"",
            "  data-caption=\"Histogram css\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode css\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode css\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb101-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"fu\" style=\"color: #06287e;\">.mean</span> text {</a>",
            "<a class=\"sourceLine\" id=\"cb101-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">font</span>: <span class=\"dv\" style=\"color: #40a070;\">11</span><span class=\"dt\" style=\"color: #902000;\">px</span> <span class=\"dv\" style=\"color: #40a070;\">sans-serif</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb101-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">fill</span>: <span class=\"cn\" style=\"color: #880000;\">grey</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb101-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">}</a>",
            "<a class=\"sourceLine\" id=\"cb101-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb101-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"fu\" style=\"color: #06287e;\">.mean</span> path {</a>",
            "<a class=\"sourceLine\" id=\"cb101-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    stroke-dasharray: <span class=\"dv\" style=\"color: #40a070;\">3</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb101-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    stroke: <span class=\"cn\" style=\"color: #880000;\">grey</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb101-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    stroke-width: <span class=\"dv\" style=\"color: #40a070;\">1</span><span class=\"dt\" style=\"color: #902000;\">px</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb101-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">}</a></code></pre>",
            "</div>",
            "<p>",
            "  The <code style=\"white-space: pre-wrap;\">stroke-dasharray</code> is what",
            "  makes it dashed. <code style=\"white-space: pre-wrap;\">3</code> means each",
            "  <code style=\"white-space: pre-wrap;\">3px</code> dash is followed by a",
            "  <code style=\"white-space: pre-wrap;\">3px</code> blank. You can use",
            "  <a",
            "    href=\"https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-dasharray\"",
            "    >any pattern you like</a",
            "  >.",
            "</p>",
            "<p>",
            "  You should see a median household salary line overlaid on your histogram.",
            "</p>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/dataviz-with-everything.png\"",
            "    alt=\"Median line over histogram\"",
            "  />",
            "  <figcaption>Median line over histogram</figcaption>",
            "</figure>",
            "<p>",
            "  Almost everyone in tech makes more than an entire median household.",
            "  Crazy, huh? I think it is.",
            "</p>",
            "<p>",
            "  If that didn‚Äôt work, consult the",
            "  <a",
            "    href=\"https://github.com/Swizec/react-d3-walkthrough-livecode/commit/52b684b6441b491557a2623471cdf946c54c8959\"",
            "    >diff on Github</a",
            "  >.",
            "</p>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "Add user controls for exploration",
      "lectures": [
        {
          "lectureTitle": "Add user controls for data slicing and dicing",
          "lectureLines": [
            "<h1 id=\"user-controls\">Add user controls for data slicing and dicing</h1>",
            "<p>",
            "  Now comes the fun part. All that extra effort we put into making our",
            "  components aware of filtering, and it all comes down to this: User",
            "  controls.",
            "</p>",
            "<p>Here‚Äôs what we‚Äôre building:</p>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/controls.png\"",
            "    alt=\"User controlled filters\"",
            "  />",
            "  <figcaption>User controlled filters</figcaption>",
            "</figure>",
            "<p>",
            "  It‚Äôs a set of filters for users to slice and dice our visualization. The",
            "  shortened dataset gives you 2 years, 12 job titles, and 50 US states.",
            "  You‚Äôll get 5+ years and many more job titles with the full dataset.",
            "</p>",
            "<p>",
            "  We‚Äôre using the",
            "  <a",
            "    href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6887770#basic-architecture\"",
            "    >architecture we discussed</a",
            "  >",
            "  earlier to make it work. Clicking buttons updates a filter function and",
            "  communicates it all the way up to the",
            "  <code style=\"white-space: pre-wrap;\">App</code> component.",
            "  <code style=\"white-space: pre-wrap;\">App</code> then uses it to update",
            "  <code style=\"white-space: pre-wrap;\">this.state.filteredSalaries</code>,",
            "  which triggers a re-render and updates our dataviz.",
            "</p>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/architecture_callbacks.png\"",
            "    alt=\"Architecture sketch\"",
            "  />",
            "  <figcaption>Architecture sketch</figcaption>",
            "</figure>",
            "<p>We‚Äôre building controls in 4 steps, top to bottom:</p>",
            "<ol type=\"1\">",
            "  <li>",
            "    Update <code style=\"white-space: pre-wrap;\">App.js</code> with",
            "    filtering and a",
            "    <code style=\"white-space: pre-wrap;\">&lt;Controls&gt;</code> render",
            "  </li>",
            "  <li>",
            "    Build a <code style=\"white-space: pre-wrap;\">Controls</code> component,",
            "    which builds the filter based on inputs",
            "  </li>",
            "  <li>",
            "    Build a",
            "    <code style=\"white-space: pre-wrap;\">ControlRow</code> component, which",
            "    handles a row of buttons",
            "  </li>",
            "  <li>",
            "    Build a <code style=\"white-space: pre-wrap;\">Toggle</code> component,",
            "    which is a button",
            "  </li>",
            "</ol>",
            "<p>",
            "  We‚Äôll go through the files linearly. That makes them easier for me to",
            "  explain and easier for you to understand, but that also means there‚Äôs",
            "  going to be a long period where all you‚Äôre seeing is an error like this:",
            "</p>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/controls-error.png\"",
            "    alt=\"Controls error during coding\"",
            "  />",
            "  <figcaption>Controls error during coding</figcaption>",
            "</figure>",
            "<p>",
            "  If you want to see what‚Äôs up during this process, remove an import or two",
            "  and maybe a thing from render. For instance, it‚Äôs complaining about",
            "  <code style=\"white-space: pre-wrap;\">ControlRow</code> in this",
            "  screenshot. Remove the",
            "  <code style=\"white-space: pre-wrap;\">ControlRow</code> import on top and",
            "  delete",
            "  <code style=\"white-space: pre-wrap;\">&lt;ControlRow ... /&gt;</code> from",
            "  render. The error goes away, and you see what you‚Äôre doing.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "Step 1: Update App.js",
          "lectureLines": [
            "<h2 id=\"step-1-update-app.js\">Step 1: Update App.js</h2>",
            "<p>",
            "  All right, you know the drill. Add imports, tweak some things, add to",
            "  render. We have to import",
            "  <code style=\"white-space: pre-wrap;\">Controls</code>, set up filtering,",
            "  update the map‚Äôs <code style=\"white-space: pre-wrap;\">zoom</code> prop,",
            "  and render a white rectangle and",
            "  <code style=\"white-space: pre-wrap;\">Controls</code>.",
            "</p>",
            "<p>",
            "  The white rectangle makes it so the zoomed-in map doesn‚Äôt cover up the",
            "  histogram. I‚Äôll explain when we get there.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb102\"",
            "  data-caption=\"Imports and filter updates in App.js\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb102-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/App.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> MedianLine <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./components/MedianLine&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb102-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> Controls <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./components/Controls&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb102-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> App <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    state <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">medianIncomes</span><span class=\"op\" style=\"color: #666666;\">:</span> []<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">salariesFilter</span><span class=\"op\" style=\"color: #666666;\">:</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">true</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">filteredBy</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb102-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb102-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    updateDataFilter <span class=\"op\" style=\"color: #666666;\">=</span> (filter<span class=\"op\" style=\"color: #666666;\">,</span> filteredBy) <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">setState</span>(<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">salariesFilter</span><span class=\"op\" style=\"color: #666666;\">:</span> filter<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">filteredBy</span><span class=\"op\" style=\"color: #666666;\">:</span> filteredBy</a>",
            "<a class=\"sourceLine\" id=\"cb102-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb102-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  We import the",
            "  <code style=\"white-space: pre-wrap;\">Controls</code> component and add a",
            "  default",
            "  <code style=\"white-space: pre-wrap;\">salariesFilter</code> function to",
            "  <code style=\"white-space: pre-wrap;\">this.state</code>. The",
            "  <code style=\"white-space: pre-wrap;\">updateDataFilter</code> method",
            "  passes the filter function and",
            "  <code style=\"white-space: pre-wrap;\">filteredBy</code> dictionary from",
            "  arguments to App state. We‚Äôll use it as a callback in",
            "  <code style=\"white-space: pre-wrap;\">Controls</code>.",
            "</p>",
            "<p>The rest of filtering setup happens in the render method.</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb103\"",
            "  data-caption=\"Filtering data and updating map zoom in App render\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb103-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/App.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb103-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> App <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb103-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb103-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb103-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb103-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb103-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Delete the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb103-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> filteredSalaries <span class=\"op\" style=\"color: #666666;\">=</span> techSalaries</a>",
            "<a class=\"sourceLine\" id=\"cb103-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb103-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb103-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> filteredSalaries <span class=\"op\" style=\"color: #666666;\">=</span> techSalaries</a>",
            "<a class=\"sourceLine\" id=\"cb103-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                                     .<span class=\"at\" style=\"color: #7d9029;\">filter</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">salariesFilter</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb103-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb103-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb103-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb103-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb103-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> zoom <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">null</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb103-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            medianHousehold <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb103-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb103-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (<span class=\"va\" style=\"color: #19177c;\">filteredBy</span>.<span class=\"at\" style=\"color: #7d9029;\">USstate</span> <span class=\"op\" style=\"color: #666666;\">!==</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;*&#39;</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb103-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            zoom <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"va\" style=\"color: #19177c;\">filteredBy</span>.<span class=\"at\" style=\"color: #7d9029;\">USstate</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb103-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            medianHousehold <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">mean</span>(medianIncomesByUSState[zoom]<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb103-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                                      d <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">medianIncome</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb103-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb103-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb103-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb103-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb103-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb103-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  We add a <code style=\"white-space: pre-wrap;\">.filter</code> call to",
            "  <code style=\"white-space: pre-wrap;\">filteredSalaries</code>, which uses",
            "  our <code style=\"white-space: pre-wrap;\">salariesFilter</code> method to",
            "  throw out anything that doesn‚Äôt fit. Then we set up",
            "  <code style=\"white-space: pre-wrap;\">zoom</code>, if a US state was",
            "  selected.",
            "</p>",
            "<p>",
            "  We built the",
            "  <code style=\"white-space: pre-wrap;\">CountyMap</code> component to focus",
            "  on a given US state. Finding the centroid of a polygon, re-centering the",
            "  map, and increasing the sizing factor. It creates a nice zoom effect.",
            "</p>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/zoom-effect.png\"",
            "    alt=\"Zoom effect\"",
            "  />",
            "  <figcaption>Zoom effect</figcaption>",
            "</figure>",
            "<p>",
            "  And here‚Äôs the downside of this approach. SVG doesn‚Äôt know about element",
            "  boundaries. It just renders stuff.",
            "</p>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/zoom-without-rectangle.png\"",
            "    alt=\"Zoom without white rectangle\"",
            "  />",
            "  <figcaption>Zoom without white rectangle</figcaption>",
            "</figure>",
            "<p>",
            "  See, it goes under the histogram. Let‚Äôs fix that and add the",
            "  <code style=\"white-space: pre-wrap;\">Controls</code> render while we‚Äôre",
            "  at it.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb104\"",
            "  data-caption=\"Add opaque background to histogram\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb104-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/App.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb104-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> App <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb104-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb104-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb104-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb104-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb104-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb104-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb104-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>div <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">//...&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb104-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&lt;</span>svg <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">//...&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb104-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"op\" style=\"color: #666666;\">&lt;</span>CountyMap <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">//... /&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb104-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb104-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb104-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"op\" style=\"color: #666666;\">&lt;</span>rect x<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;500&quot;</span> y<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;0&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb104-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                          width<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;600&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb104-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                          height<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;500&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb104-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                          style<span class=\"op\" style=\"color: #666666;\">={{</span><span class=\"dt\">fill</span><span class=\"op\">:</span> <span class=\"st\">&#39;white&#39;</span><span class=\"op\">}}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb104-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb104-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb104-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"op\" style=\"color: #666666;\">&lt;</span>Histogram <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">//... /&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb104-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"op\" style=\"color: #666666;\">&lt;</span>MedianLine <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">//.. /&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb104-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                &lt;/svg<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb104-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb104-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb104-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&lt;</span>Controls data<span class=\"op\" style=\"color: #666666;\">={</span>techSalaries<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb104-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                          updateDataFilter<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">updateDataFilter</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb104-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb104-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb104-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        )</a>",
            "<a class=\"sourceLine\" id=\"cb104-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb104-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  Rectangle, <code style=\"white-space: pre-wrap;\">500</code> to the right,",
            "  <code style=\"white-space: pre-wrap;\">0</code> from top,",
            "  <code style=\"white-space: pre-wrap;\">600</code> wide and",
            "  <code style=\"white-space: pre-wrap;\">500</code> tall, with a white",
            "  background. Gives the histogram an opaque background, so it doesn‚Äôt",
            "  matter what the map is doing.",
            "</p>",
            "<p>",
            "  We render the",
            "  <code style=\"white-space: pre-wrap;\">Controls</code> component just after",
            "  <code style=\"white-space: pre-wrap;\">&lt;/svg&gt;</code> because it‚Äôs not",
            "  an SVG component ‚Äì it uses normal HTML. Unlike other components, it needs",
            "  our entire dataset as <code style=\"white-space: pre-wrap;\">data</code>.",
            "  We use the",
            "  <code style=\"white-space: pre-wrap;\">updateDataFilter</code> prop to say",
            "  which callback function it should call when a new filter is ready.",
            "</p>",
            "<p>",
            "  If this seems roundabout ‚Ä¶ I‚Äôve seen worse. The callbacks approach makes",
            "  our app easier to componentize and keeps the code relatively unmessy.",
            "  Imagine putting everything we‚Äôve done so far in",
            "  <code style=\"white-space: pre-wrap;\">App</code>! üòÜ",
            "</p>"
          ]
        },
        {
          "lectureTitle": "Step 2: Build Controls component",
          "lectureLines": [
            "<h2 id=\"step-2-build-controls-component\">",
            "  Step 2: Build Controls component",
            "</h2>",
            "<p>",
            "  The <code style=\"white-space: pre-wrap;\">Controls</code> component builds",
            "  our filter function and",
            "  <code style=\"white-space: pre-wrap;\">filteredBy</code> dictionary based",
            "  on user choices.",
            "</p>",
            "<p>",
            "  <code style=\"white-space: pre-wrap;\">Controls</code> renders 3 rows of",
            "  buttons and builds filtering out of the choice made on each row. That",
            "  makes <code style=\"white-space: pre-wrap;\">Controls</code> kind of",
            "  repetitive, but that‚Äôs okay.",
            "</p>",
            "<p>",
            "  To keep this book shorter, we‚Äôre going to build everything for a",
            "  <code style=\"white-space: pre-wrap;\">year</code> filter first. Then I‚Äôll",
            "  explain how to add",
            "  <code style=\"white-space: pre-wrap;\">USstate</code> and",
            "  <code style=\"white-space: pre-wrap;\">jobTitle</code> filters on a higher",
            "  level. Once you have one working, the rest follows that same pattern.",
            "</p>",
            "<p>",
            "  Make a <code style=\"white-space: pre-wrap;\">Controls</code> directory in",
            "  <code style=\"white-space: pre-wrap;\">src/components/</code> and let‚Äôs",
            "  begin. The main",
            "  <code style=\"white-space: pre-wrap;\">Controls</code> component goes in",
            "  your <code style=\"white-space: pre-wrap;\">index.js</code> file.",
            "</p>",
            "<h3 id=\"stub-controls\">Stub Controls</h3>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb105\"",
            "  data-caption=\"Controls stubbed for year filter\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb105-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Controls/index.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb105-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;react&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb105-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb105-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> ControlRow <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;./ControlRow&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb105-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb105-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Controls <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb105-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    state <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb105-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">yearFilter</span><span class=\"op\" style=\"color: #666666;\">:</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">true</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb105-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">year</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;*&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb105-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb105-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb105-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">componentDidMount</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb105-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb105-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb105-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb105-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    updateYearFilter <span class=\"op\" style=\"color: #666666;\">=</span> (year<span class=\"op\" style=\"color: #666666;\">,</span> reset) <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb105-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> filter <span class=\"op\" style=\"color: #666666;\">=</span> d <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"va\" style=\"color: #19177c;\">submit_date</span>.<span class=\"at\" style=\"color: #7d9029;\">getFullYear</span>() <span class=\"op\" style=\"color: #666666;\">===</span> year<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb105-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb105-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (reset <span class=\"op\" style=\"color: #666666;\">||</span> <span class=\"op\" style=\"color: #666666;\">!</span>year) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb105-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            filter <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">true</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb105-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            year <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;*&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb105-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb105-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb105-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">setState</span>(</a>",
            "<a class=\"sourceLine\" id=\"cb105-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb105-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">yearFilter</span><span class=\"op\" style=\"color: #666666;\">:</span> filter<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb105-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">year</span><span class=\"op\" style=\"color: #666666;\">:</span> year</a>",
            "<a class=\"sourceLine\" id=\"cb105-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb105-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">reportUpdateUpTheChain</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb105-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb105-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb105-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb105-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb105-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> data <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb105-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb105-36\" title=\"36\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb105-37\" title=\"37\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb105-38\" title=\"38\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> Controls<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  We start with some imports and a",
            "  <code style=\"white-space: pre-wrap;\">Controls</code> class-based",
            "  component. Inside, we define default",
            "  <code style=\"white-space: pre-wrap;\">state</code> with an always-true",
            "  <code style=\"white-space: pre-wrap;\">yearFilter</code> and an asterisk",
            "  for <code style=\"white-space: pre-wrap;\">year</code>.",
            "</p>",
            "<p>",
            "  We also need an",
            "  <code style=\"white-space: pre-wrap;\">updateYearFilter</code> function,",
            "  which we‚Äôll use to update the filter, a",
            "  <code style=\"white-space: pre-wrap;\">reportUpdateUpTheChain</code>",
            "  function, and a",
            "  <code style=\"white-space: pre-wrap;\">render</code> method. We‚Äôre using",
            "  <code style=\"white-space: pre-wrap;\">reportUpdateUpTheChain</code> to",
            "  bubble updates to our parent component. It‚Äôs a simpler alternative to",
            "  using React Context or a state management library.",
            "</p>",
            "<h3 id=\"filter-logic\">Filter logic</h3>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb106\"",
            "  data-caption=\"year filtering logic in Controls\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb106-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Controls/index.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb106-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Controls <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb106-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb106-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    updateYearFilter <span class=\"op\" style=\"color: #666666;\">=</span> (year<span class=\"op\" style=\"color: #666666;\">,</span> reset) <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb106-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> filter <span class=\"op\" style=\"color: #666666;\">=</span> d <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"va\" style=\"color: #19177c;\">submit_date</span>.<span class=\"at\" style=\"color: #7d9029;\">getFullYear</span>() <span class=\"op\" style=\"color: #666666;\">===</span> year<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb106-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb106-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (reset <span class=\"op\" style=\"color: #666666;\">||</span> <span class=\"op\" style=\"color: #666666;\">!</span>year) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb106-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            filter <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">true</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb106-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            year <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;*&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb106-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb106-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb106-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">setState</span>(</a>",
            "<a class=\"sourceLine\" id=\"cb106-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb106-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">yearFilter</span><span class=\"op\" style=\"color: #666666;\">:</span> filter<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb106-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">year</span><span class=\"op\" style=\"color: #666666;\">:</span> year</a>",
            "<a class=\"sourceLine\" id=\"cb106-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb106-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">reportUpdateUpTheChain</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb106-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb106-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb106-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  <code style=\"white-space: pre-wrap;\">updateYearFilter</code> is a",
            "  callback we pass into",
            "  <code style=\"white-space: pre-wrap;\">ControlRow</code>. When a user picks",
            "  a year, their action triggers this function.",
            "</p>",
            "<p>",
            "  When that happens, we create a new partial filter function. The",
            "  <code style=\"white-space: pre-wrap;\">App</code> component uses it inside",
            "  a <code style=\"white-space: pre-wrap;\">.filter</code> call like you saw",
            "  earlier. We have to return",
            "  <code style=\"white-space: pre-wrap;\">true</code> for elements we want to",
            "  keep and <code style=\"white-space: pre-wrap;\">false</code> for elements",
            "  we don‚Äôt.",
            "</p>",
            "<p>",
            "  Comparing",
            "  <code style=\"white-space: pre-wrap;\">submit_date.getFullYear()</code>",
            "  with <code style=\"white-space: pre-wrap;\">year</code> achieves that.",
            "</p>",
            "<p>",
            "  The <code style=\"white-space: pre-wrap;\">reset</code> argument lets us",
            "  reset filters back to defaults. Enables users to unselect options.",
            "</p>",
            "<p>",
            "  When we have the <code style=\"white-space: pre-wrap;\">year</code> and",
            "  <code style=\"white-space: pre-wrap;\">filter</code>, we update component",
            "  state with <code style=\"white-space: pre-wrap;\">this.setState</code>.",
            "  This triggers a re-render and calls",
            "  <code style=\"white-space: pre-wrap;\">reportUpdateUpTheChain</code>",
            "  afterwards. Great use-case for the little known setState callback üòÉ",
            "</p>",
            "<p>",
            "  <code style=\"white-space: pre-wrap;\">reportUpdateUpTheChain</code> then",
            "  calls",
            "  <code style=\"white-space: pre-wrap;\">this.props.updateDataFilter</code>,",
            "  which is a callback method on",
            "  <code style=\"white-space: pre-wrap;\">App</code>. We defined it earlier ‚Äì",
            "  it needs a new filter method and a",
            "  <code style=\"white-space: pre-wrap;\">filteredBy</code> dictionary.",
            "</p>",
            "<pre",
            "  data-caption=\"reportUpdateUpTheChain method\"",
            "><code style=\"white-space: pre-wrap;\">// src/components/Controls/index.js",
            "class Controls extends React.Component {",
            "// ...",
            "reportUpdateUpTheChain() {",
            "    window.location.hash = [",
            "        this.state.year || &quot;*&quot;",
            "    ].join(&quot;-&quotüòâ;",
            "",
            "    this.props.updateDataFilter(",
            "        (filters =&gt; {",
            "            return d =&gt;",
            "                filters.yearFilter(d)",
            "        })(this.state),",
            "        {",
            "            year: this.state.year",
            "        }",
            "    );",
            "}",
            "}</code></pre>",
            "<p>",
            "  Building the filter method looks tricky because we‚Äôre composing multiple",
            "  functions. The new arrow function takes a dictionary of filters as an",
            "  argument and returns a new function that",
            "  <code style=\"white-space: pre-wrap;\">&amp;&amp;</code>s them all. We",
            "  invoke it immediately with",
            "  <code style=\"white-space: pre-wrap;\">this.state</code> as the argument.",
            "</p>",
            "<p>",
            "  It looks silly when there‚Äôs just one filter, but I promise it makes",
            "  sense.",
            "</p>",
            "<h3 id=\"render-2\">Render</h3>",
            "<p>",
            "  Great, we have the filter logic. Let‚Äôs render those rows of controls",
            "  we‚Äôve been talking about.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb108\"",
            "  data-caption=\"Render the year ControlRow\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb108-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Controls/index.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb108-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Controls <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb108-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb108-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb108-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> data <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb108-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb108-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> years <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">new</span> <span class=\"at\" style=\"color: #7d9029;\">Set</span>(<span class=\"va\" style=\"color: #19177c;\">data</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(d <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"va\" style=\"color: #19177c;\">submit_date</span>.<span class=\"at\" style=\"color: #7d9029;\">getFullYear</span>()))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb108-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb108-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb108-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb108-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&lt;</span>ControlRow</a>",
            "<a class=\"sourceLine\" id=\"cb108-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    data<span class=\"op\" style=\"color: #666666;\">={</span>data<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb108-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    toggleNames<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"va\" style=\"color: #19177c;\">Array</span>.<span class=\"at\" style=\"color: #7d9029;\">from</span>(<span class=\"va\" style=\"color: #19177c;\">years</span>.<span class=\"at\" style=\"color: #7d9029;\">values</span>())<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb108-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    picked<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">year</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb108-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    updateDataFilter<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">updateYearFilter</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb108-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb108-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb108-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb108-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb108-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  Once more, this is generalized code used for a single example: the",
            "  <code style=\"white-space: pre-wrap;\">year</code> filter.",
            "</p>",
            "<p>",
            "  We build a <code style=\"white-space: pre-wrap;\">Set</code> of distinct",
            "  years in our dataset, then render a",
            "  <code style=\"white-space: pre-wrap;\">ControlRow</code> using props to",
            "  give it our <code style=\"white-space: pre-wrap;\">data</code>, a set of",
            "  <code style=\"white-space: pre-wrap;\">toggleNames</code>, a callback to",
            "  update the filter, and which entry is",
            "  <code style=\"white-space: pre-wrap;\">picked</code> right now. Also known",
            "  as the controlled component pattern, it enables us to maintain the",
            "  data-flows-down, events-bubble-up architecture.",
            "</p>",
            "<p>",
            "  If you don‚Äôt know about <code style=\"white-space: pre-wrap;\">Set</code>s,",
            "  they‚Äôre an ES6 data structure that ensures every entry is unique. Just",
            "  like a mathematical set. They‚Äôre pretty fast.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "Step 3: Build ControlRow component",
          "lectureLines": [
            "<h2 id=\"step-3-build-controlrow-component\">",
            "  Step 3: Build ControlRow component",
            "</h2>",
            "<p>",
            "  Let‚Äôs build the",
            "  <code style=\"white-space: pre-wrap;\">ControlRow</code> component. It",
            "  renders a row of controls and ensures only one at a time is selected.",
            "</p>",
            "<p>We‚Äôll start with a stub and go from there.</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb109\"",
            "  data-caption=\"ControlRow stub\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb109-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Controls/ControlRow.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb109-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;react&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb109-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb109-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> Toggle <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;./Toggle&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb109-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb109-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> ControlRow <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb109-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    makePick <span class=\"op\" style=\"color: #666666;\">=</span> (picked<span class=\"op\" style=\"color: #666666;\">,</span> newState) <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb109-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb109-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb109-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb109-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">_addToggle</span>(name) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb109-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb109-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb109-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb109-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> toggleNames <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb109-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb109-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb109-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb109-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> ControlRow<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  We start with imports, big surprise, then make a stub with 3 methods. Can",
            "  you guess what they are?",
            "</p>",
            "<ul>",
            "  <li>",
            "    <code style=\"white-space: pre-wrap;\">makePick</code> is the",
            "    <code style=\"white-space: pre-wrap;\">Toggle</code> click callback",
            "  </li>",
            "  <li>",
            "    <code style=\"white-space: pre-wrap;\">_addToggle</code> is a rendering",
            "    helper method",
            "  </li>",
            "  <li>",
            "    <code style=\"white-space: pre-wrap;\">render</code> renders a row of",
            "    buttons",
            "  </li>",
            "</ul>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb110\"",
            "  data-caption=\"makePick implementation\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb110-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Controls/ControlRow.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb110-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb110-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> ControlRow <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb110-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    makePick <span class=\"op\" style=\"color: #666666;\">=</span> (picked<span class=\"op\" style=\"color: #666666;\">,</span> newState) <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb110-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// if newState is false, we want to reset</span></a>",
            "<a class=\"sourceLine\" id=\"cb110-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">updateDataFilter</span>(picked<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"op\" style=\"color: #666666;\">!</span>newState)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb110-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a></code></pre>",
            "</div>",
            "<p>",
            "  <code style=\"white-space: pre-wrap;\">makePick</code> calls the data",
            "  filter update and passes in the new value and whether we want to",
            "  unselect. Pretty simple right?",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb111\"",
            "  data-caption=\"Render a row of controls\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb111-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Controls/ControlRow.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb111-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> ControlRow <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb111-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb111-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb111-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">_addToggle</span>(name) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb111-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> key <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"vs\" style=\"color: #4070a0;\">`toggle-</span><span class=\"sc\" style=\"color: #4070a0;\">${</span>name<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">`</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb111-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            label <span class=\"op\" style=\"color: #666666;\">=</span> name<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb111-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb111-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">capitalize</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb111-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            label <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">label</span>.<span class=\"at\" style=\"color: #7d9029;\">toUpperCase</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb111-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb111-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb111-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb111-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>Toggle</a>",
            "<a class=\"sourceLine\" id=\"cb111-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                label<span class=\"op\" style=\"color: #666666;\">={</span>label<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb111-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                name<span class=\"op\" style=\"color: #666666;\">={</span>name<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb111-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                key<span class=\"op\" style=\"color: #666666;\">={</span>key<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb111-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                value<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">picked</span> <span class=\"op\" style=\"color: #666666;\">===</span> name<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb111-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                onClick<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">makePick</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb111-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb111-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb111-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb111-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb111-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb111-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> toggleNames <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb111-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb111-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb111-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>div className<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;row&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb111-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&lt;</span>div className<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;col-md-12&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb111-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"va\" style=\"color: #19177c;\">toggleNames</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(name <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">_addToggle</span>(name))<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb111-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb111-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb111-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb111-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb111-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  Rendering comes in two functions:",
            "  <code style=\"white-space: pre-wrap;\">_addToggle</code>, which is a",
            "  helper, and <code style=\"white-space: pre-wrap;\">render</code>, which is",
            "  the main render.",
            "</p>",
            "<p>",
            "  In <code style=\"white-space: pre-wrap;\">render</code>, we set up two",
            "  <code style=\"white-space: pre-wrap;\">div</code>s with Bootstrap classes.",
            "  The first is a <code style=\"white-space: pre-wrap;\">row</code>, and the",
            "  second is a full-width column. I tried using a column for each button,",
            "  but it was annoying to manage and used too much space.",
            "</p>",
            "<p>",
            "  Inside the divs, we map over all toggles and use",
            "  <code style=\"white-space: pre-wrap;\">_addToggle</code> to render each of",
            "  them.",
            "</p>",
            "<p>",
            "  <code style=\"white-space: pre-wrap;\">_addToggle</code> renders a",
            "  <code style=\"white-space: pre-wrap;\">Toggle</code> component with a",
            "  <code style=\"white-space: pre-wrap;\">label</code>,",
            "  <code style=\"white-space: pre-wrap;\">name</code>,",
            "  <code style=\"white-space: pre-wrap;\">value</code> and",
            "  <code style=\"white-space: pre-wrap;\">onClick</code> callback. The label",
            "  is just a prettier version of the name, which also serves as a key in our",
            "  <code style=\"white-space: pre-wrap;\">toggleValues</code> dictionary. It‚Äôs",
            "  going to be the",
            "  <code style=\"white-space: pre-wrap;\">picked</code> attribute in",
            "  <code style=\"white-space: pre-wrap;\">makePick</code>.",
            "</p>",
            "<p>",
            "  Your browser should continue showing an error, but it should change to",
            "  talking about the",
            "  <code style=\"white-space: pre-wrap;\">Toggle</code> component instead of",
            "  <code style=\"white-space: pre-wrap;\">ControlRow</code>.",
            "</p>",
            "<p>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/toggle-error.png\"",
            "  />",
            "</p>",
            "<p>Let‚Äôs build it.</p>"
          ]
        },
        {
          "lectureTitle": "Step 4: Build Toggle component",
          "lectureLines": [
            "<h2 id=\"step-4-build-toggle-component\">Step 4: Build Toggle component</h2>",
            "<p>",
            "  Last piece of the puzzle ‚Äì the Toggle component. A button that turns on",
            "  and off.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb112\"",
            "  data-caption=\"Toggle component\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb112-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Controls/Toggle.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb112-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;react&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb112-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb112-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> Toggle <span class=\"op\" style=\"color: #666666;\">=</span> (<span class=\"op\" style=\"color: #666666;\">{</span> label<span class=\"op\" style=\"color: #666666;\">,</span> name<span class=\"op\" style=\"color: #666666;\">,</span> value<span class=\"op\" style=\"color: #666666;\">,</span> onClick <span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb112-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> className <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;btn btn-default&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb112-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb112-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (value) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb112-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        className <span class=\"op\" style=\"color: #666666;\">+=</span> <span class=\"st\" style=\"color: #4070a0;\">&quot; btn-primary&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb112-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb112-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb112-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb112-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>button className<span class=\"op\" style=\"color: #666666;\">={</span>className<span class=\"op\" style=\"color: #666666;\">}</span> onClick<span class=\"op\" style=\"color: #666666;\">={</span>() <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"at\" style=\"color: #7d9029;\">onClick</span>(name<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"op\" style=\"color: #666666;\">!</span>value)<span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb112-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">{</span>label<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb112-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        &lt;/button<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb112-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb112-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb112-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb112-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> Toggle<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  Import React to enable JSX and make a functional",
            "  <code style=\"white-space: pre-wrap;\">Toggle</code> component. It‚Äôs fully",
            "  controlled and takes event handlers as callbacks in props. No need for a",
            "  class.",
            "</p>",
            "<p>",
            "  We set up a Bootstrap classname:",
            "  <code style=\"white-space: pre-wrap;\">btn</code> and",
            "  <code style=\"white-space: pre-wrap;\">btn-default</code> make an element",
            "  look like a button, the conditional",
            "  <code style=\"white-space: pre-wrap;\">btn-primary</code> makes it blue. If",
            "  you‚Äôre not familiar with Bootstrap classes, you should check",
            "  <a href=\"https://getbootstrap.com/\">their documentation</a>.",
            "</p>",
            "<p>",
            "  Then we render a",
            "  <code style=\"white-space: pre-wrap;\">&lt;button&gt;</code> tag and, well,",
            "  that‚Äôs it. A row of year filters appears in the browser.",
            "  <code style=\"white-space: pre-wrap;\">onClick</code> passes",
            "</p>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/year-filter-row.png\"",
            "    alt=\"A row of year filters\"",
            "  />",
            "  <figcaption>A row of year filters</figcaption>",
            "</figure>",
            "<p>",
            "  Click on a button and the",
            "  <code style=\"white-space: pre-wrap;\">onClick</code> handler passes a",
            "  toggle‚Äôd value to its parent via the",
            "  <code style=\"white-space: pre-wrap;\">onClick</code> callback. This",
            "  triggers an update in",
            "  <code style=\"white-space: pre-wrap;\">Controls</code>, which calls",
            "  <code style=\"white-space: pre-wrap;\">reportUpdateUpTheChain</code>, which",
            "  in turn updates state in",
            "  <code style=\"white-space: pre-wrap;\">App</code> and re-renders our button",
            "  with the new value toggling its color on or off.",
            "</p>",
            "<p>",
            "  If that didn‚Äôt work, consult this",
            "  <a",
            "    href=\"https://github.com/Swizec/react-d3-walkthrough-livecode/commit/b58981f2fd69ee34dbde52efd4917dc731fd22a4\"",
            "    >diff on GitHub</a",
            "  >.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "Step 5: Add US state and Job Title filters",
          "lectureLines": [
            "<h2 id=\"step-5-add-us-state-and-job-title-filters\">",
            "  Step 5: Add US state and Job Title filters",
            "</h2>",
            "<p>",
            "  With all that done, we can add two more filters: US states and job",
            "  titles. Our <code style=\"white-space: pre-wrap;\">App</code> component is",
            "  already set up to use them, so we just have to add them to the",
            "  <code style=\"white-space: pre-wrap;\">Controls</code> component.",
            "</p>",
            "<p>",
            "  We‚Äôll start with the",
            "  <code style=\"white-space: pre-wrap;\">render</code> method, then handle",
            "  the parts I said earlier would look repetitive.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb113\"",
            "  data-caption=\"Adding two more rows to Controls\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb113-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Controls/index.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb113-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Controls <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> Component <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb113-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb113-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb113-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> data <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb113-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb113-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> years <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">new</span> <span class=\"at\" style=\"color: #7d9029;\">Set</span>(<span class=\"va\" style=\"color: #19177c;\">data</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(d <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"va\" style=\"color: #19177c;\">submit_date</span>.<span class=\"at\" style=\"color: #7d9029;\">getFullYear</span>()))<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb113-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">              <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb113-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">              jobTitles <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">new</span> <span class=\"at\" style=\"color: #7d9029;\">Set</span>(<span class=\"va\" style=\"color: #19177c;\">data</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(d <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">clean_job_title</span>))<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb113-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">              USstates <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">new</span> <span class=\"at\" style=\"color: #7d9029;\">Set</span>(<span class=\"va\" style=\"color: #19177c;\">data</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(d <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">USstate</span>))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb113-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">              <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb113-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb113-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb113-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb113-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&lt;</span>ControlRow data<span class=\"op\" style=\"color: #666666;\">={</span>data<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb113-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                            toggleNames<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"va\" style=\"color: #19177c;\">Array</span>.<span class=\"at\" style=\"color: #7d9029;\">from</span>(<span class=\"va\" style=\"color: #19177c;\">years</span>.<span class=\"at\" style=\"color: #7d9029;\">values</span>())<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb113-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                            picked<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">year</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb113-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                            updateDataFilter<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">updateYearFilter</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb113-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                            /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb113-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb113-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb113-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&lt;</span>ControlRow data<span class=\"op\" style=\"color: #666666;\">={</span>data<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb113-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                            toggleNames<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"va\" style=\"color: #19177c;\">Array</span>.<span class=\"at\" style=\"color: #7d9029;\">from</span>(<span class=\"va\" style=\"color: #19177c;\">jobTitles</span>.<span class=\"at\" style=\"color: #7d9029;\">values</span>())<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb113-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                            picked<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">jobTitle</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb113-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                            updateDataFilter<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">updateJobTitleFilter</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb113-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb113-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&lt;</span>ControlRow data<span class=\"op\" style=\"color: #666666;\">={</span>data<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb113-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                            toggleNames<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"va\" style=\"color: #19177c;\">Array</span>.<span class=\"at\" style=\"color: #7d9029;\">from</span>(<span class=\"va\" style=\"color: #19177c;\">USstates</span>.<span class=\"at\" style=\"color: #7d9029;\">values</span>())<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb113-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                            picked<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">USstate</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb113-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                            updateDataFilter<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">updateUSstateFilter</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb113-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                            capitalize<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;true&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb113-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb113-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb113-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        )</a>",
            "<a class=\"sourceLine\" id=\"cb113-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb113-36\" title=\"36\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>Ok, this part is plenty repetitive, too.</p>",
            "<p>",
            "  We created new sets for",
            "  <code style=\"white-space: pre-wrap;\">jobTitles</code> and",
            "  <code style=\"white-space: pre-wrap;\">USstates</code>, then rendered two",
            "  more <code style=\"white-space: pre-wrap;\">ControlRow</code> elements with",
            "  appropriate attributes. They get",
            "  <code style=\"white-space: pre-wrap;\">toggleNames</code> for building the",
            "  buttons, <code style=\"white-space: pre-wrap;\">picked</code> to know which",
            "  is active, an",
            "  <code style=\"white-space: pre-wrap;\">updateDataFilter</code> callback,",
            "  and we tell US states to render capitalized.",
            "</p>",
            "<p>",
            "  The implementations of those",
            "  <code style=\"white-space: pre-wrap;\">updateDataFilter</code> callbacks",
            "  follow the same pattern as",
            "  <code style=\"white-space: pre-wrap;\">updateYearFilter</code>.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb114\"",
            "  data-caption=\"new updateDataFilter callbacks\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb114-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Controls/index.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb114-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Controls <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    state <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">yearFilter</span><span class=\"op\" style=\"color: #666666;\">:</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">true</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">jobTitleFilter</span><span class=\"op\" style=\"color: #666666;\">:</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">true</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">USstateFilter</span><span class=\"op\" style=\"color: #666666;\">:</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">true</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">year</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;*&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">USstate</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;*&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">jobTitle</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;*&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb114-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    updateJobTitleFilter <span class=\"op\" style=\"color: #666666;\">=</span> (title<span class=\"op\" style=\"color: #666666;\">,</span> reset) <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> filter <span class=\"op\" style=\"color: #666666;\">=</span> d <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">clean_job_title</span> <span class=\"op\" style=\"color: #666666;\">===</span> title<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb114-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (reset <span class=\"op\" style=\"color: #666666;\">||</span> <span class=\"op\" style=\"color: #666666;\">!</span>title) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            filter <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">true</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            title <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;*&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb114-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">setState</span>(</a>",
            "<a class=\"sourceLine\" id=\"cb114-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">jobTitleFilter</span><span class=\"op\" style=\"color: #666666;\">:</span> filter<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">jobTitle</span><span class=\"op\" style=\"color: #666666;\">:</span> title</a>",
            "<a class=\"sourceLine\" id=\"cb114-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">reportUpdateUpTheChain</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb114-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb114-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    updateUSstateFilter <span class=\"op\" style=\"color: #666666;\">=</span> (USstate<span class=\"op\" style=\"color: #666666;\">,</span> reset) <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> filter <span class=\"op\" style=\"color: #666666;\">=</span> d <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">USstate</span> <span class=\"op\" style=\"color: #666666;\">===</span> USstate<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb114-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (reset <span class=\"op\" style=\"color: #666666;\">||</span> <span class=\"op\" style=\"color: #666666;\">!</span>USstate) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            filter <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">true</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            USstate <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;*&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-36\" title=\"36\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-37\" title=\"37\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb114-38\" title=\"38\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">setState</span>(</a>",
            "<a class=\"sourceLine\" id=\"cb114-39\" title=\"39\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-40\" title=\"40\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">USstateFilter</span><span class=\"op\" style=\"color: #666666;\">:</span> filter<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-41\" title=\"41\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">USstate</span><span class=\"op\" style=\"color: #666666;\">:</span> USstate</a>",
            "<a class=\"sourceLine\" id=\"cb114-42\" title=\"42\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-43\" title=\"43\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">reportUpdateUpTheChain</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb114-44\" title=\"44\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-45\" title=\"45\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-46\" title=\"46\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb114-47\" title=\"47\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ..</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-48\" title=\"48\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-49\" title=\"49\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb114-50\" title=\"50\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> Controls<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  Yes, they‚Äôre basically the same as",
            "  <code style=\"white-space: pre-wrap;\">updateYearFilter</code>. The only",
            "  difference is a changed",
            "  <code style=\"white-space: pre-wrap;\">filter</code> function and using",
            "  different keys in <code style=\"white-space: pre-wrap;\">setState()</code>.",
            "</p>",
            "<p>",
            "  Why separate functions then? No need to get fancy. It would‚Äôve made the",
            "  code harder to read.",
            "</p>",
            "<p>",
            "  Our last step is to add these new keys to the",
            "  <code style=\"white-space: pre-wrap;\">reportUpdateUpTheChain</code>",
            "  function.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb115\"",
            "  data-caption=\"Add new filters to main state update\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb115-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Controls/index.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb115-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb115-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Controls <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb115-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">reportUpdateUpTheChain</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb115-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">updateDataFilter</span>(</a>",
            "<a class=\"sourceLine\" id=\"cb115-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            (filters <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb115-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> d <span class=\"op\" style=\"color: #666666;\">=&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb115-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"va\" style=\"color: #19177c;\">filters</span>.<span class=\"at\" style=\"color: #7d9029;\">yearFilter</span>(d) <span class=\"op\" style=\"color: #666666;\">&amp;&amp;</span></a>",
            "<a class=\"sourceLine\" id=\"cb115-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"va\" style=\"color: #19177c;\">filters</span>.<span class=\"at\" style=\"color: #7d9029;\">jobTitleFilter</span>(d) <span class=\"op\" style=\"color: #666666;\">&amp;&amp;</span></a>",
            "<a class=\"sourceLine\" id=\"cb115-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"va\" style=\"color: #19177c;\">filters</span>.<span class=\"at\" style=\"color: #7d9029;\">USstateFilter</span>(d)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb115-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">}</span>)(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb115-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb115-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">USstate</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">USstate</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb115-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">year</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">year</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb115-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">jobTitle</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">jobTitle</span></a>",
            "<a class=\"sourceLine\" id=\"cb115-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb115-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb115-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  We add them to the filter condition with",
            "  <code style=\"white-space: pre-wrap;\">&amp;&amp;</code> and expand the",
            "  <code style=\"white-space: pre-wrap;\">filteredBy</code> argument.",
            "</p>",
            "<p>Two more rows of filters show up.</p>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/all-filters.png\"",
            "    alt=\"All the filters\"",
            "  />",
            "  <figcaption>All the filters</figcaption>",
            "</figure>",
            "<p>üëè</p>",
            "<p>",
            "  Again, if it didn‚Äôt work, consult",
            "  <a",
            "    href=\"https://github.com/Swizec/react-d3-walkthrough-livecode/commit/813cdd496d06a38bb2816a8f973ab6c816119dca\"",
            "    >the diff on GitHub</a",
            "  >.",
            "</p>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "Make it work in the real world",
      "lectures": [
        {
          "lectureTitle": "Add rudimentary routing",
          "lectureLines": [
            "<h1 id=\"rudimentary-routing\">Rudimentary routing</h1>",
            "<p>",
            "  Imagine this. A user finds your dataviz, clicks around, and finds an",
            "  interesting insight. They share it with their friends.",
            "</p>",
            "<p><em>‚ÄúSee! I was right! This link proves it.‚Äù</em></p>",
            "<p><em>‚ÄúWtf are you talking about?‚Äù</em></p>",
            "<p>",
            "  <em",
            "    >‚ÄúOh‚Ä¶ uuuuh‚Ä¶ you have to click this and then that and then you‚Äôll see.",
            "    I‚Äôm legit winning our argument.‚Äù</em",
            "  >",
            "</p>",
            "<p><em>‚ÄúWow! Kim Kardashian just posted a new snap with her dog.‚Äù</em></p>",
            "<p>",
            "  Let‚Äôs help our intrepid user out and make our dataviz linkable. We should",
            "  store the current",
            "  <code style=\"white-space: pre-wrap;\">filteredBy</code> state in the URL",
            "  and be able to restore from a link.",
            "</p>",
            "<p>",
            "  There are many ways to achieve this.",
            "  <a href=\"https://github.com/ReactTraining/react-router\">ReactRouter</a>",
            "  comes to mind, but the quickest is to implement our own rudimentary",
            "  routing. We‚Äôll add some logic to manipulate and read the URL hash.",
            "</p>",
            "<p>",
            "  The easiest place to put this logic is next to the existing filter logic",
            "  inside the",
            "  <code style=\"white-space: pre-wrap;\">Controls</code> component. Better",
            "  places exist from a ‚Äúlow-down components shouldn‚Äôt play with global",
            "  state‚Äù perspective, but that‚Äôs okay.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb116\"",
            "  data-caption=\"Add rudimentary routing\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb116-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Controls/index.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb116-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb116-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Controls <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb116-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ..</span></a>",
            "<a class=\"sourceLine\" id=\"cb116-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb116-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">componentDidMount</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb116-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> [year<span class=\"op\" style=\"color: #666666;\">,</span> USstate<span class=\"op\" style=\"color: #666666;\">,</span> jobTitle] <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">window</span>.<span class=\"va\" style=\"color: #19177c;\">location</span>.<span class=\"at\" style=\"color: #7d9029;\">hash</span></a>",
            "<a class=\"sourceLine\" id=\"cb116-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            .<span class=\"at\" style=\"color: #7d9029;\">replace</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;#&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb116-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            .<span class=\"at\" style=\"color: #7d9029;\">split</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;-&quot;</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb116-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb116-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (year <span class=\"op\" style=\"color: #666666;\">!==</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;*&quot;</span> <span class=\"op\" style=\"color: #666666;\">&amp;&amp;</span> year) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb116-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">updateYearFilter</span>(<span class=\"at\" style=\"color: #7d9029;\">Number</span>(year))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb116-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb116-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (USstate <span class=\"op\" style=\"color: #666666;\">!==</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;*&quot;</span> <span class=\"op\" style=\"color: #666666;\">&amp;&amp;</span> USstate) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb116-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">updateUSstateFilter</span>(USstate)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb116-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb116-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (jobTitle <span class=\"op\" style=\"color: #666666;\">!==</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;*&quot;</span> <span class=\"op\" style=\"color: #666666;\">&amp;&amp;</span> jobTitle) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb116-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">updateJobTitleFilter</span>(jobTitle)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb116-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb116-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb116-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb116-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ..</span></a>",
            "<a class=\"sourceLine\" id=\"cb116-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">reportUpdateUpTheChain</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb116-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">window</span>.<span class=\"va\" style=\"color: #19177c;\">location</span>.<span class=\"at\" style=\"color: #7d9029;\">hash</span> <span class=\"op\" style=\"color: #666666;\">=</span> [</a>",
            "<a class=\"sourceLine\" id=\"cb116-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">year</span> <span class=\"op\" style=\"color: #666666;\">||</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;*&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb116-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">USstate</span> <span class=\"op\" style=\"color: #666666;\">||</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;*&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb116-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">jobTitle</span> <span class=\"op\" style=\"color: #666666;\">||</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;*&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb116-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        ].<span class=\"at\" style=\"color: #7d9029;\">join</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;-&quot;</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb116-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb116-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ..</span></a>",
            "<a class=\"sourceLine\" id=\"cb116-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  We use the",
            "  <code style=\"white-space: pre-wrap;\">componentDidMount</code> lifecycle",
            "  hook to read the URL when",
            "  <code style=\"white-space: pre-wrap;\">Controls</code> first render on our",
            "  page. Presumably when the page loads, but it could be later. It doesn‚Äôt",
            "  really matter <em>when</em>, just that we update our filter the first",
            "  chance we get.",
            "</p>",
            "<p>",
            "  <code style=\"white-space: pre-wrap;\">window.location.hash</code> gives us",
            "  the hash part of the URL. We clean it up and split it into three parts:",
            "  <code style=\"white-space: pre-wrap;\">year</code>,",
            "  <code style=\"white-space: pre-wrap;\">USstate</code>, and",
            "  <code style=\"white-space: pre-wrap;\">jobTitle</code>. If the URL is",
            "  <code style=\"white-space: pre-wrap;\"",
            "    >localhost:3000/#2013-CA-manager</code",
            "  >, then <code style=\"white-space: pre-wrap;\">year</code> becomes",
            "  <code style=\"white-space: pre-wrap;\">2013</code>,",
            "  <code style=\"white-space: pre-wrap;\">USstate</code> becomes",
            "  <code style=\"white-space: pre-wrap;\">CA</code>, and",
            "  <code style=\"white-space: pre-wrap;\">jobTitle</code> becomes",
            "  <code style=\"white-space: pre-wrap;\">manager</code>.",
            "</p>",
            "<p>",
            "  We make sure each value is valid and use our existing filter update",
            "  callbacks to update the visualization. Just as if it was the user",
            "  clicking a button.",
            "</p>",
            "<p>",
            "  In <code style=\"white-space: pre-wrap;\">reportUpdateUpTheChain</code>, we",
            "  make sure to update the URL hash. Assigning a new value to",
            "  <code style=\"white-space: pre-wrap;\">window.location.hash</code> takes",
            "  care of that.",
            "</p>",
            "<p>You should see the URL changing as you click around.</p>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/changing-url.png\"",
            "    alt=\"Changing URL hash\"",
            "  />",
            "  <figcaption>Changing URL hash</figcaption>",
            "</figure>",
            "<p>",
            "  There‚Äôs a bug with some combinations in 2013 that don‚Äôt have enough data.",
            "  It will go away when we use the full dataset.",
            "</p>",
            "<p>",
            "  If it doesn‚Äôt work at all, consult the",
            "  <a",
            "    href=\"https://github.com/Swizec/react-d3-walkthrough-livecode/commit/1132e58063d5029878c616a65fffa22d59cb080f\"",
            "    >diff on Github</a",
            "  >.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "Prep your app for launch",
          "lectureLines": [
            "<h1 id=\"prep-for-launch\">Prep for launch</h1>",
            "<p>",
            "  You‚Äôve built a great visualization. Congratz! Time to put it online and",
            "  share with the world.",
            "</p>",
            "<p>",
            "  To do that, we‚Äôre going to use Github Pages because our app is a",
            "  glorified static website. There‚Äôs no backend, so all we need is something",
            "  to serve our HTML, JavaScript, and CSV. Github Pages is perfect for that.",
            "</p>",
            "<p>",
            "  It‚Äôs free, works well with",
            "  <code style=\"white-space: pre-wrap;\">create-react-app</code>, and can",
            "  withstand a lot of traffic. You don‚Äôt want to worry about traffic when",
            "  your app gets to the top of HackerNews or Reddit.",
            "</p>",
            "<p>There are a few things we should take care of:</p>",
            "<ul>",
            "  <li>setting up deployment</li>",
            "  <li>adding a page title</li>",
            "  <li>adding some copy</li>",
            "  <li>Twitter and Facebook cards</li>",
            "  <li>an SEO tweak for search engines</li>",
            "  <li>use the full dataset</li>",
            "</ul>",
            "<h2 id=\"setting-up-deployment\">Setting up deployment</h2>",
            "<p>",
            "  You‚Äôll need a Github repository. If you‚Äôre like me, writing all this code",
            "  without version control or off-site backup made you nervous, so you",
            "  already have one.",
            "</p>",
            "<p>",
            "  For everyone else, head over to Github, click the green",
            "  <code style=\"white-space: pre-wrap;\">New Repository</code> button and",
            "  give it a name. Then copy the commands it gives you and run them in your",
            "  console.",
            "</p>",
            "<p>It should be something like this:</p>",
            "<pre",
            "  data-caption=\"Put code on github\"",
            "><code style=\"white-space: pre-wrap;\">$ git init",
            "$ git commit -m &quot;My entire dataviz&quot;",
            "$ git remote add origin git://github ...",
            "$ git push origin -u master</code></pre>",
            "<p>",
            "  If you‚Äôve been git-ing locally without pushing, then you only need the",
            "  <code style=\"white-space: pre-wrap;\">git remote add</code> and",
            "  <code style=\"white-space: pre-wrap;\">git push origin</code> commands.",
            "  This puts your code on Github. Great idea for anything you don‚Äôt want to",
            "  lose if your computer craps out.",
            "</p>",
            "<p>",
            "  Every Github repository comes with an optional Github Pages setup. The",
            "  easiest way for us to use it is with the",
            "  <code style=\"white-space: pre-wrap;\">gh-pages</code> npm module.",
            "</p>",
            "<p>Install it with this command:</p>",
            "<pre",
            "  data-caption=\"Install gh-pages helper\"",
            "><code style=\"white-space: pre-wrap;\">$ npm install --save-dev gh-pages</code></pre>",
            "<p>Add two lines to package.json:</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb119\"",
            "  data-caption=\"Update package.json\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb119-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// package.json</span></a>",
            "<a class=\"sourceLine\" id=\"cb119-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb119-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"st\" style=\"color: #4070a0;\">&quot;homepage&quot;</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;https://&lt;your username&gt;.github.io/&lt;your repo name&gt;&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb119-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb119-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"st\" style=\"color: #4070a0;\">&quot;scripts&quot;</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb119-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"st\" style=\"color: #4070a0;\">&quot;eject&quot;</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;react-scripts eject&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb119-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb119-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"st\" style=\"color: #4070a0;\">&quot;deploy&quot;</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;npm run build &amp;&amp; gh-pages -d build&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb119-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb119-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  We‚Äôve been ignoring the",
            "  <code style=\"white-space: pre-wrap;\">package.json</code> file so far, but",
            "  it‚Äôs a pretty important file. It specifies all of our project‚Äôs",
            "  dependencies, meta data for npm, and scripts that we run locally. This is",
            "  where <code style=\"white-space: pre-wrap;\">npm start</code> is defined,",
            "  for instance.",
            "</p>",
            "<p>",
            "  We add a <code style=\"white-space: pre-wrap;\">deploy</code> script that",
            "  runs <code style=\"white-space: pre-wrap;\">build</code> and a",
            "  <code style=\"white-space: pre-wrap;\">gh-pages</code> deploy, and we",
            "  specify a <code style=\"white-space: pre-wrap;\">homepage</code> URL. The",
            "  URL tells our build script how to set up URLs for static files in",
            "  <code style=\"white-space: pre-wrap;\">index.html</code>.",
            "</p>",
            "<p>Github Pages URLs follow the schema:</p>",
            "<pre><code style=\"white-space: pre-wrap;\">https://&lt;your username&gt;.github.io/&lt;your repo name&gt;</code></pre>",
            "<p>For instance, mine is:</p>",
            "<pre><code style=\"white-space: pre-wrap;\">https://swizec.github.io/react-d3-walkthrough-livecode</code></pre>",
            "<p>Yours will be different.</p>",
            "<p>",
            "  You can deploy with",
            "  <code style=\"white-space: pre-wrap;\">npm run deploy</code>. Make sure all",
            "  changes are committed. We‚Äôll do it together when we‚Äôre done setting up.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "Twitter and Facebook cards and SEO",
          "lectureLines": [
            "<h2 id=\"twitter-and-facebook-cards-and-seo\">",
            "  Twitter and Facebook cards and SEO",
            "</h2>",
            "<p>",
            "  How your visualization looks on social media matters more than you‚Äôd",
            "  think. Does it have a nice picture, a great description, and a title, or",
            "  does it look like a random URL? Those things matter.",
            "</p>",
            "<p>And they‚Äôre easy to set up. No excuse.</p>",
            "<p>",
            "  We‚Äôre going to poke around",
            "  <code style=\"white-space: pre-wrap;\">public/index.html</code> for the",
            "  first time. Add titles, Twitter cards, Facebook Open Graph things, and so",
            "  on.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb122\"",
            "  data-caption=\"Basic SEO\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode html\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode html\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb122-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">&lt;!-- public/index.html --&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb122-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&lt;head&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb122-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">&lt;!-- //... --&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb122-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    // Insert the line(s) between here...</a>",
            "<a class=\"sourceLine\" id=\"cb122-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&lt;title&gt;</span>How much does an H1B in tech pay?<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&lt;/title&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb122-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb122-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&lt;link</span><span class=\"ot\" style=\"color: #007020;\"> rel=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;canonical&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb122-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"ot\" style=\"color: #007020;\">          href=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;https://swizec.github.io/react-d3-walkthrough-livecode/&quot;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">/&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb122-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    // ...and here.</a>",
            "<a class=\"sourceLine\" id=\"cb122-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&lt;/head&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb122-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&lt;body&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb122-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">&lt;!-- //... --&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb122-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&lt;div</span><span class=\"ot\" style=\"color: #007020;\"> id=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;root&quot;</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb122-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        // Insert the line(s) between here...</a>",
            "<a class=\"sourceLine\" id=\"cb122-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">         <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&lt;h2&gt;</span>The average H1B in tech pays $86,164/year<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&lt;/h2&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb122-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb122-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">   <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&ltüòú</span><span class=\"ot\" style=\"color: #007020;\"> class=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;lead&quot;</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb122-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">             Since 2012 the US tech industry has sponsored 176,075</a>",
            "<a class=\"sourceLine\" id=\"cb122-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">             H1B work visas. Most of them paid <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&lt;b&gt;</span>$60,660 to $111,668<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&lt;/b&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb122-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">             per year (1 standard deviation). <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&lt;span&gt;</span>The best city for</a>",
            "<a class=\"sourceLine\" id=\"cb122-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">             an H1B is <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&lt;b&gt;</span>Kirkland, WA<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&lt;/b&gt;</span> with an average individual</a>",
            "<a class=\"sourceLine\" id=\"cb122-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">             salary <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&lt;b&gt;</span>$39,465 above local household median<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&lt;/b&gt;</span>.</a>",
            "<a class=\"sourceLine\" id=\"cb122-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">             Median household salary is a good proxy for cost of</a>",
            "<a class=\"sourceLine\" id=\"cb122-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">             living in an area.<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&lt;/span&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb122-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">         <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&lt;/p&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb122-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        // ...and here.</a>",
            "<a class=\"sourceLine\" id=\"cb122-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&lt;/div&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb122-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&lt;/body&gt;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  We add a <code style=\"white-space: pre-wrap;\">&lt;title&gt;</code> and a",
            "  <code style=\"white-space: pre-wrap;\">canonical</code> URL. Titles",
            "  configure what shows up in browser tabs, and the canonical URL is there",
            "  to tell search engines that this is the main and most important URL for",
            "  this piece of content. This is especially important for when people",
            "  copy-paste your stuff and put it on other websites.",
            "</p>",
            "<p>",
            "  In the body root tag, we add some copy-pasted text from our dataviz.",
            "  You‚Äôll recognize the default title and description.",
            "</p>",
            "<p>",
            "  As soon as React loads, these get overwritten with our preloader, but",
            "  it‚Äôs good to have them here for any search engines that aren‚Äôt running",
            "  JavaScript yet. I think both Google and Bing are capable of running our",
            "  React app and getting text from there, but you never know.",
            "</p>",
            "<p>",
            "  To make social media embeds look great, we‚Äôll use",
            "  <a href=\"https://dev.twitter.com/cards/types/summary-large-image\"",
            "    >Twitter card</a",
            "  >",
            "  and",
            "  <a href=\"https://developers.facebook.com/docs/sharing/webmasters\"",
            "    >Facebook OpenGraph</a",
            "  >",
            "  meta tags. I think most other websites just rely on these since most",
            "  people use them. They go in the",
            "  <code style=\"white-space: pre-wrap;\">&lt;head&gt;</code> of our HTML.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb123\"",
            "  data-caption=\"Add FB and Twitter cards\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb123-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">&lt;!--</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">public</span><span class=\"ss\" style=\"color: #bb6688;\">/index.html --&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb123-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"ss\" style=\"color: #bb6688;\">&lt;head&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb123-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"ss\" style=\"color: #bb6688;\">    &lt;meta property=&quot;og:locale&quot; content=&quot;en_US&quot; /</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb123-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>meta property<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;og:type&quot;</span> content<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;article&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb123-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>meta property<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;og:title&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb123-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          content<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;The average H1B in tech pays $86,164/year&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb123-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>meta property<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;og:description&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb123-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          content<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;Since 2012 the US tech industry has sponsored</span></a>",
            "<a class=\"sourceLine\" id=\"cb123-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"dv\" style=\"color: #40a070;\">176</span><span class=\"op\" style=\"color: #666666;\">,</span><span class=\"dv\" style=\"color: #40a070;\">075</span> H1B work <span class=\"va\" style=\"color: #19177c;\">visas</span>. <span class=\"at\" style=\"color: #7d9029;\">With</span> an average individual salary</a>",
            "<a class=\"sourceLine\" id=\"cb123-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">up to $39<span class=\"op\" style=\"color: #666666;\">,</span><span class=\"dv\" style=\"color: #40a070;\">465</span> above median household <span class=\"va\" style=\"color: #19177c;\">income</span>.<span class=\"st\" style=\"color: #4070a0;\">&quot; /&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb123-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>meta property<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;og:url&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb123-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          content<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;https://swizec.github.io/react-d3-walkthrough-livecode&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb123-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>meta property<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;og:site_name&quot;</span> content<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;A geek with a hat&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb123-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>meta property<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;article:publisher&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb123-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          content<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;https://facebook.com/swizecpage&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb123-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>meta property<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;fb:admins&quot;</span> content<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;624156314&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb123-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>meta property<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;og:image&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb123-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          content<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;https://swizec.github.io/react-d3js-step-by-step/thumbnail.png&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb123-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb123-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>meta name<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;twitter:card&quot;</span> content<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;summary_large_image&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb123-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>meta name<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;twitter:description&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb123-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          content<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;Since 2012 the US tech industry has sponsored</span></a>",
            "<a class=\"sourceLine\" id=\"cb123-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"dv\" style=\"color: #40a070;\">176</span><span class=\"op\" style=\"color: #666666;\">,</span><span class=\"dv\" style=\"color: #40a070;\">075</span> H1B work <span class=\"va\" style=\"color: #19177c;\">visas</span>. <span class=\"at\" style=\"color: #7d9029;\">With</span> an average individual salary</a>",
            "<a class=\"sourceLine\" id=\"cb123-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">up to $39<span class=\"op\" style=\"color: #666666;\">,</span><span class=\"dv\" style=\"color: #40a070;\">465</span> above median household <span class=\"va\" style=\"color: #19177c;\">income</span>.<span class=\"st\" style=\"color: #4070a0;\">&quot; /&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb123-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>meta name<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;twitter:title&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb123-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          content<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;The average H1B in tech pays $86,164/year&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb123-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>meta name<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;twitter:site&quot;</span> content<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;@swizec&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb123-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>meta name<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;twitter:image&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb123-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          content<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;https://swizec.github.io/react-d3js-step-by-step/thumbnail.png&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb123-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>meta name<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;twitter:creator&quot;</span> content<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;@swizec&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb123-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">&lt;/head<span class=\"op\" style=\"color: #666666;\">&gt;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  Much of this code is repetitive. Both Twitter and Facebook want the same",
            "  info, but they‚Äôre stubborn and won‚Äôt read each other‚Äôs formats. You can",
            "  copy all of this, but make sure to change",
            "  <code style=\"white-space: pre-wrap;\">og:url</code>,",
            "  <code style=\"white-space: pre-wrap;\">og:site_name</code>,",
            "  <code style=\"white-space: pre-wrap;\">article:publisher</code>,",
            "  <code style=\"white-space: pre-wrap;\">fb:admins</code>,",
            "  <code style=\"white-space: pre-wrap;\">og:image</code>,",
            "  <code style=\"white-space: pre-wrap;\">twitter:site</code>,",
            "  <code style=\"white-space: pre-wrap;\">twitter:image</code>, and",
            "  <code style=\"white-space: pre-wrap;\">twitter:creator</code>. They‚Äôre",
            "  specific to you.",
            "</p>",
            "<p>",
            "  The URLs you should change to the",
            "  <code style=\"white-space: pre-wrap;\">homepage</code> URL you used above.",
            "  The rest you should change to use your name and Twitter/Facebook handles.",
            "  I‚Äôm not sure <em>why</em> it matters, but I‚Äôm sure it does.",
            "</p>",
            "<p>",
            "  An important one is <code style=\"white-space: pre-wrap;\">fb:admin</code>.",
            "  It enables admin features on your site if you add their social plugins.",
            "  If you don‚Äôt, it probably doesn‚Äôt matter.",
            "</p>",
            "<p>",
            "  You‚Äôre also going to need a thumbnail image. I made mine by taking a",
            "  screenshot of the final visualization, then I put it in",
            "  <code style=\"white-space: pre-wrap;\">public/thumbnail.png</code>.",
            "</p>",
            "<p>",
            "  Now when somebody shares your dataviz on Twitter or Facebook, it‚Äôs going",
            "  to look something like this:",
            "</p>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/twitter-card.png\"",
            "    alt=\"Dataviz Twitter card\"",
            "  />",
            "  <figcaption>Dataviz Twitter card</figcaption>",
            "</figure>"
          ]
        },
        {
          "lectureTitle": "Use full dataset",
          "lectureLines": [
            "<h2 id=\"full-dataset\">Full dataset</h2>",
            "<p>One more step left. Use the whole dataset!</p>",
            "<p>",
            "  Go into",
            "  <code style=\"white-space: pre-wrap;\">src/DataHandling.js</code> and",
            "  change one line:",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb124\"",
            "  data-caption=\"Switch to full dataset\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb124-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Example 4</span></a>",
            "<a class=\"sourceLine\" id=\"cb124-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">//</span></a>",
            "<a class=\"sourceLine\" id=\"cb124-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/DataHandling.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb124-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> loadAllData <span class=\"op\" style=\"color: #666666;\">=</span> (callback <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">_</span>.<span class=\"at\" style=\"color: #7d9029;\">noop</span>) <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb124-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">queue</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb124-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ..</span></a>",
            "<a class=\"sourceLine\" id=\"cb124-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Delete the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb124-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        .<span class=\"at\" style=\"color: #7d9029;\">defer</span>(<span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">csv</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;data/h1bs-2012-2016-shortened.csv&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> cleanSalary)</a>",
            "<a class=\"sourceLine\" id=\"cb124-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb124-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb124-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        .<span class=\"at\" style=\"color: #7d9029;\">defer</span>(<span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">csv</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;data/h1bs-2012-2016.csv&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> cleanSalary)</a>",
            "<a class=\"sourceLine\" id=\"cb124-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a></code></pre>",
            "</div>",
            "<p>",
            "  We change the file name, and that‚Äôs that. Full dataset locked and loaded.",
            "  Dataviz ready to go.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "Launch! üöÄ",
          "lectureLines": [
            "<h1 id=\"launch\">Launch!</h1>",
            "<p>",
            "  To show your dataviz to the world, make sure you‚Äôve committed all",
            "  changes. Using",
            "  <code style=\"white-space: pre-wrap;\">git status</code> shows you anything",
            "  you missed.",
            "</p>",
            "<p>Then run:</p>",
            "<pre><code style=\"white-space: pre-wrap;\">$ npm run deploy</code></pre>",
            "<p>You‚Äôll see a bunch of output:</p>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/npm-run-deploy.png\"",
            "    alt=\"Deploy output\"",
            "  />",
            "  <figcaption>Deploy output</figcaption>",
            "</figure>",
            "<p>",
            "  And you‚Äôre ready to go. Your visualization is online. My URL is",
            "  <code style=\"white-space: pre-wrap;\"",
            "    >https://swizec.github.io/react-d3-walkthrough-livecode/</code",
            "  >, yours is different. Visit it and you‚Äôll see what you‚Äôve built. Share",
            "  it and others will see it too.",
            "</p>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/deployed-dataviz.png\"",
            "    alt=\"Deployed dataviz\"",
            "  />",
            "  <figcaption>Deployed dataviz</figcaption>",
            "</figure>",
            "<p>",
            "  Congratz! You‚Äôve built and deployed your first React and D3 dataviz.",
            "  You‚Äôre amazing \\o/",
            "</p>",
            "<p>",
            "  Thanks for following along with the meaty part of my book. You‚Äôre now",
            "  well equipped to build cool things.",
            "</p>",
            "<p>In the next section, we‚Äôre going to look at building animations.</p>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "Animation",
      "lectures": [
        {
          "lectureTitle": "Intro",
          "lectureLines": [
            "<h1 id=\"animation\">Animation</h1>",
            "<p>",
            "  Welcome to the animation section. This is where the real fun begins.",
            "  Demos that look cool, impress your friends, and sound good at the dinner",
            "  table.",
            "</p>",
            "<p>At my dinner table at least ‚Ä¶</p>",
            "<p>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/puking-rainbows.png\"",
            "  />",
            "</p>",
            "<p>",
            "  You already know how React and D3 work together, so these examples are",
            "  going to go faster. You know that we‚Äôre using React for rendering SVG and",
            "  D3 for calculating props. You know how to make your dataviz interactive",
            "  and how to handle oodles of data.",
            "</p>",
            "<p>",
            "  Now you‚Äôre going to learn how to make it dance. Smooth transitions",
            "  between states, complex animations, interacting with users in real-time.",
            "  60 frames per second, baby!",
            "</p>",
            "<p>Animation looks like this in a nutshell:</p>",
            "<ul>",
            "  <li>render something</li>",
            "  <li>change it 60 times per second</li>",
            "</ul>",
            "<p>",
            "  When that happens humans perceive smooth motion. You can go as low as 24",
            "  frames per second, like old TVs used to, but that often looks jaggeddy on",
            "  modern monitors.",
            "</p>",
            "<p>",
            "  You‚Äôre about to learn two different approaches to building these",
            "  animations. Using game loops and using transitions.",
            "</p>",
            "<ol type=\"1\">",
            "  <li>Game loops give you more control</li>",
            "  <li>Transitions are easier to implement</li>",
            "</ol>",
            "<p>",
            "  We‚Äôre starting with an example or two in CodeSandbox, then building some",
            "  bigger stuff. No more big huge projects like the",
            "  <a",
            "    href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6888870#salary-visualization\"",
            "    >tech salary visualization</a",
            "  >, though. Takes too long to set up and doesn‚Äôt focus on animation.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "Using a game loop for rich animation",
          "lectureLines": [
            "<h1 id=\"game-loop\">Using a game loop for rich animation</h1>",
            "<p>",
            "  Game loops are fun! They‚Äôre my favorite. They even sound fun: ‚Äúgame",
            "  loop‚Äù. Doesn‚Äôt it sound fun to go build a game loop? Maybe it‚Äôs because",
            "  I‚Äôve always used game loops when building something fun to play with.",
            "</p>",
            "<p>",
            "  At its core, a game loop is an infinite loop where each iteration renders",
            "  the next frame of your animation.",
            "</p>",
            "<p>",
            "  The concept comes from the video game industry. At some point they",
            "  realized that building game engines is much easier when you think about",
            "  each frame as its own static representation of your game state.",
            "</p>",
            "<p>",
            "  You take every object in the game and render it. Then you throw it all",
            "  away, make small adjustments, and render again.",
            "</p>",
            "<p>",
            "  This turns out to be both faster to run and easier to implement than",
            "  diffing scenes and figuring out what moves and what doesn‚Äôt. Of course as",
            "  you get more objects on the screen it becomes silly to re-render the",
            "  immovable background every time.",
            "</p>",
            "<p>But you don‚Äôt have to worry about that. That‚Äôs React‚Äôs job.</p>",
            "<p>",
            "  React can figure out a diff between hierarchical representations of your",
            "  scene and re-render the appropriate objects.",
            "</p>",
            "<p>That‚Äôs a hard engineering problem, but you can think of it this way:</p>",
            "<ol type=\"1\">",
            "  <li>Render a DOM from state</li>",
            "  <li>Change some values in state</li>",
            "  <li>Trigger a re-render</li>",
            "</ol>",
            "<p>",
            "  Make those state changes fast enough and you get 60 frames per second.",
            "  The hard part then becomes thinking about your movement as snapshots in",
            "  time.",
            "</p>",
            "<p>",
            "  When something speeds up, what does that mean for changes in its",
            "  position?",
            "</p>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "A bouncy ball game loop example",
      "lectures": [
        {
          "lectureTitle": "Begin bouncy ball",
          "lectureLines": [
            "<h2 id=\"a-bouncing-ball-game-loop-example\">",
            "  A bouncing ball game loop example",
            "</h2>",
            "<p>",
            "  Let‚Äôs get our feet wet with my favorite childhood example: a bouncing",
            "  ball.",
            "</p>",
            "<p>",
            "  I must have built dozens of them back in my",
            "  <a href=\"https://en.wikipedia.org/wiki/Turbo_Pascal\">Turbo Pascal</a>",
            "  days using",
            "  <a href=\"https://en.wikipedia.org/wiki/Borland_Graphics_Interface\">BGI</a",
            "  >. Endless afternoons playing with different parameters in my bouncy ball",
            "  examples.",
            "</p>",
            "<p>",
            "  Yes, those Turbo Pascal and BGI are from the 80‚Äôs. No, I‚Äôm not that old.",
            "  I started young and with old equipment. Coding for DOS is easier when",
            "  you‚Äôre a kid than coding for Windows 95.",
            "</p>",
            "<p>Here is a screenshot of our bouncing ball:</p>",
            "<figure>",
            "  <img",
            "    alt=\"Bouncing Ball\"",
            "    src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQEAAADWCAYAAADRoDfeAAAKCGlDQ1BJQ0MgUHJvZmlsZQAASImFlndUVNcWxs+90xtthqH33jsMIL036VVUhgGGOsJQxY4EFYgoIiKgBCRUBaOhxoKIYiEIKGBBM0gQUJ7BAqigvAskMcl7670966zzW9/s8909Z/64HwAkd2ZiYjwsAEACJ4Xr42QrGxQcIosbBxCAAR0AoMBkJSfaeHm5Iwz+2P9eCyNIN1L3tVa9/vP7/1mCEZHJLAAgL4QZrERuCsIHEfZLT0lc5TGEaVxkKITnVpm9xjB6lcPXWXStx8/HDmFNAPBkJpPLBoDIQHTZNBYb8SEGIazLiYjhILzqb8mKZkYgfAthzaj41AyE36/2JCRsQ3SSIsKq4X/xZP/NP/xPfyaT/ScnxKeyfv9dqzdCjuT4+yK7OLIkQRTQBvEgFWQAWZAIuGAbosQgSiRy9//9HGPtnB3SmQi2IydiABtEgxTkvONfvHzXnFJAOmAiPZGI4o587Fb/x3XLd/Q1V4h+56uW1AWAaS4isr9qTAUAOl4AQF34qim8RcY5AsDlAVYqN21dW716gAFEwA9oQAxIAwWgCrSAPjAG5sAaOABX4An8QDDYAljIvAnIVOlgJ9gHckAeOAKOg1JQAc6AOnAOXABt4BK4Bm6Cu2AADIMngAcmwSswBxbAEgRBOIgCUSExSAZSgjQgfYgBWUIOkDvkAwVDYRAb4kCp0E5oP5QHFUKlUCVUD/0AdUDXoNvQIPQIGodmoLfQJxgFk2EaLAUrwzowA7aB3WA/eDPMhpPgTDgbPgyXwFXwWbgVvgbfhYdhHvwKnkcBFAlFR8mhtFAMlB3KExWCikJxUbtRuahiVBWqCdWJ6kXdR/FQs6iPaCyaipZFa6HN0c5ofzQLnYTejc5Hl6Lr0K3oHvR99Dh6Dv0FQ8FIYjQwZhgXTBCGjUnH5GCKMTWYFswNzDBmErOAxWLpWBWsCdYZG4yNxe7A5mNPYZuxXdhB7AR2HofDieE0cBY4TxwTl4LLwZ3EncVdxQ3hJnEf8CS8DF4f74gPwXPwWfhifAP+Cn4IP4VfIggQlAhmBE9CBGE7oYBQTegk3CNMEpaIgkQVogXRjxhL3EcsITYRbxDHiO9IJJI8yZTkTYoh7SWVkM6TbpHGSR/JQmR1sh05lJxKPkyuJXeRH5HfUSgUZYo1JYSSQjlMqadcpzyjfOCj8mnzufBF8O3hK+Nr5Rvie81P4Ffit+Hfwp/JX8x/kf8e/6wAQUBZwE6AKbBboEygQ2BUYF6QKqgn6CmYIJgv2CB4W3BaCCekLOQgFCGULXRG6LrQBBVFVaDaUVnU/dRq6g3qJA1LU6G50GJpebRztH7anLCQsKFwgHCGcJnwZWEeHUVXprvQ4+kF9Av0EfonESkRG5FIkUMiTSJDIouiEqLWopGiuaLNosOin8RkxRzE4sSOirWJPRVHi6uLe4uni58WvyE+K0GTMJdgSeRKXJB4LAlLqkv6SO6QPCPZJzkvJS3lJJUodVLqutSsNF3aWjpWukj6ivSMDFXGUiZGpkjmqsxLWWFZG9l42RLZHtk5OUk5Z7lUuUq5frkleRV5f/ks+Wb5pwpEBYZClEKRQrfCnKKMoofiTsVGxcdKBCWGUrTSCaVepUVlFeVA5QPKbcrTKqIqLiqZKo0qY6oUVSvVJNUq1QdqWDWGWpzaKbUBdVjdSD1avUz9ngasYawRo3FKY1ATo2mqydGs0hzVImvZaKVpNWqNa9O13bWztNu0X+so6oToHNXp1fmia6Qbr1ut+0RPSM9VL0uvU++tvro+S79M/4EBxcDRYI9Bu8EbQw3DSMPThg+NqEYeRgeMuo0+G5sYc42bjGdMFE3CTMpNRhk0hhcjn3HLFGNqa7rH9JLpRzNjsxSzC2a/mWuZx5k3mE9vUNkQuaF6w4SFvAXTotKCZylrGWb5nSXPSs6KaVVl9dxawTrCusZ6ykbNJtbmrM1rW11brm2L7aKdmd0uuy57lL2Tfa59v4OQg79DqcMzR3lHtmOj45yTkdMOpy5njLOb81HnURcpF5ZLvcucq4nrLtceN7Kbr1up23N3dXeue6cH7OHqccxjbKPSRs7GNk/g6eJ5zPOpl4pXktdP3lhvL+8y7xc+ej47fXp9qb5bfRt8F/xs/Qr8nvir+qf6dwfwB4QG1AcsBtoHFgbygnSCdgXdDRYPjgluD8GFBITUhMxvcth0fNNkqFFoTujIZpXNGZtvbxHfEr/l8lb+rcytF8MwYYFhDWHLTE9mFXM+3CW8PHyOZcc6wXoVYR1RFDETaRFZGDkVZRFVGDXNtmAfY89EW0UXR8/G2MWUxryJdY6tiF2M84yrjVuJD4xvTsAnhCV0cIQ4cZyebdLbMrYNJmok5iTyksySjifNcd24NclQ8ubk9hQa8vLsS1VN/SZ1PM0yrSztQ3pA+sUMwQxORt929e2Htk9lOmZ+vwO9g7Wje6fczn07x3fZ7KrcDe0O3929R2FP9p7JvU576/YR98Xt+zlLN6sw6/3+wP2d2VLZe7MnvnH6pjGHL4ebM3rA/EDFQfTBmIP9hwwOnTz0JTci906ebl5x3nI+K//Ot3rflny7cjjqcH+BccHpI9gjnCMjR62O1hUKFmYWThzzONZaJFuUW/T++Nbjt4sNiytOEE+knuCVuJe0n1Q8eeTkcml06XCZbVlzuWT5ofLFUxGnhk5bn26qkKrIq/j0Xcx3DyudKlurlKuKz2DPpJ15UR1Q3fs94/v6GvGavJrPtZxaXp1PXU+9SX19g2RDQSPcmNo4czb07MA5+3PtTVpNlc305rzz4Hzq+Zc/hP0wcsHtQvdFxsWmH5V+LG+htuS2Qq3bW+faott47cHtgx2uHd2d5p0tP2n/VHtJ7lLZZeHLBVeIV7KvrFzNvDrfldg1e419baJ7a/eT60HXH/R49/TfcLtx66bjzeu9Nr1Xb1ncunTb7HbHHcadtrvGd1v7jPpafjb6uaXfuL/1nsm99gHTgc7BDYNXhqyGrt23v3/zgcuDu8MbhwdH/EcejoaO8h5GPJx+FP/ozeO0x0tP9o5hxnKfCjwtfib5rOoXtV+aeca8y+P2433PfZ8/mWBNvPo1+dflyewXlBfFUzJT9dP605dmHGcGXm56Ofkq8dXSbM6/BP9V/lr19Y+/Wf/WNxc0N/mG+2blbf47sXe17w3fd897zT9bSFhYWsz9IPah7iPjY++nwE9TS+nLuOWSz2qfO7+4fRlbSVhZSWRymWtRAIUsOCoKgLe1AFCCkewwgGQhvvXM9Xuegf6SbP5g8HnoKy9vW89la2UMQK01AP57AXBHMsppZCkhTEb21YjoZw1gA4M/1++VHGWgv/4MMheJJh9WVt5JAYDrRJ7DXVlZOrWy8rkaGfYRAF1J/3e2f/B6HlwtLJKSC1Xo4viVPjIB/LP+DYgVvxTNfraPAAABnWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyI+CiAgICAgICAgIDxleGlmOlBpeGVsWERpbWVuc2lvbj4yNTc8L2V4aWY6UGl4ZWxYRGltZW5zaW9uPgogICAgICAgICA8ZXhpZjpQaXhlbFlEaW1lbnNpb24+MjE0PC9leGlmOlBpeGVsWURpbWVuc2lvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CrQ8pN4AAAbsSURBVHgB7drtTZxXFIXRIUohphOoxFCJoRLcCdAJnTh+LVmxgsiAtaNoa6/5k8gmV/ese/QEf1x8+/45+RAgMCvwx+zkBidA4IeACFgEAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYn8GcjwcvLy+nr16+n5+fnH9f/9OnT6cuXL6fjnz4ECHxM4OLb98/H/pP/96ufnp5O19fXry5xBODz58+nu7u7Vz/nBwgQeFugKgLHdwCXl5dvTnOE4PHx0XcEbwr5CQKvBap+T+D+/v71BL/8yBGJ29vbX37EvxIgcE6gKgLHLwXOfY4Q+BAg8H6Bql8OXFxcvGuyst/meNdMvojAfyVQ9Z3A1dXVWYebm5uzX+MLCBD4W6AqAsfv/p/7vOdrzp3h5wksCVRF4Pi//L/9n/74TuE93y0sPbBZCZwTqIrAMczDw8OPvxj062DHHw0ef1no+ONBHwIEPiZQ9RuD/xzt+JOAIwA+BAj8vkB1BH5/bP8lAQI/Bep+OfDz4v5JgEBGQAQyjk4hUCsgArVP5+IEMgIikHF0CoFaARGofToXJ5AREIGMo1MI1AqIQO3TuTiBjIAIZBydQqBWQARqn87FCWQERCDj6BQCtQIiUPt0Lk4gIyACGUenEKgVEIHap3NxAhkBEcg4OoVArYAI1D6dixPICIhAxtEpBGoFRKD26VycQEZABDKOTiFQKyACtU/n4gQyAiKQcXQKgVoBEah9OhcnkBEQgYyjUwjUCohA7dO5OIGMgAhkHJ1CoFZABGqfzsUJZAREIOPoFAK1AiJQ+3QuTiAjIAIZR6cQqBUQgdqnc3ECGQERyDg6hUCtgAjUPp2LE8gIiEDG0SkEagVEoPbpXJxARkAEMo5OIVArIAK1T+fiBDICIpBxdAqBWgERqH06FyeQERCBjKNTCNQKiEDt07k4gYyACGQcnUKgVkAEap/OxQlkBEQg4+gUArUCIlD7dC5OICMgAhlHpxCoFRCB2qdzcQIZARHIODqFQK2ACNQ+nYsTyAiIQMbRKQRqBUSg9ulcnEBGQAQyjk4hUCsgArVP5+IEMgIikHF0CoFaARGofToXJ5AREIGMo1MI1AqIQO3TuTiBjIAIZBydQqBWQARqn87FCWQERCDj6BQCtQIiUPt0Lk4gIyACGUenEKgVEIHap3NxAhkBEcg4OoVArYAI1D6dixPICIhAxtEpBGoFRKD26VycQEZABDKOTiFQKyACtU/n4gQyAiKQcXQKgVoBEah9OhcnkBEQgYyjUwjUCohA7dO5OIGMgAhkHJ1CoFZABGqfzsUJZAREIOPoFAK1AiJQ+3QuTiAjIAIZR6cQqBUQgdqnc3ECGQERyDg6hUCtwF8dFE4FdPS5tAAAAABJRU5ErkJggg==\"",
            "  />",
            "  <figcaption>Bouncing Ball</figcaption>",
            "</figure>",
            "<p>",
            "  Exciting, isn‚Äôt it? Took me five tries to catch it. Future examples will",
            "  look better as screenshots, I promise.",
            "</p>",
            "<p>",
            "  I suggest you follow along on CodeSandbox. Here‚Äôs one I prepared for you",
            "  earlier: <a href=\"https://codesandbox.io/s/rrwz67jl04\">click me</a>",
            "</p>"
          ]
        },
        {
          "lectureTitle": "Step 1: stub out App and Ball",
          "lectureLines": [
            "<h3 id=\"step-1-stub-out-app-and-ball\">Step 1: stub out App and Ball</h3>",
            "<p>",
            "  We start with a skeleton: An",
            "  <code style=\"white-space: pre-wrap;\">App</code> component rendering a",
            "  <code style=\"white-space: pre-wrap;\">BouncingBall</code> component inside",
            "  an SVG, and a <code style=\"white-space: pre-wrap;\">Ball</code> component.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb126\"",
            "  data-caption=\"App component\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb126-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// index.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb126-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;react&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb126-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">{</span> render <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;react-dom&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb126-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb126-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> BouncingBall <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;./BouncingBall&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb126-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb126-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> App <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb126-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">&lt;</span>div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb126-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>svg width<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;800&quot;</span> height<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;600&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb126-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>BouncingBall max_h<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">600</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb126-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    &lt;/svg<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb126-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb126-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb126-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb126-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"at\" style=\"color: #7d9029;\">render</span>(<span class=\"op\" style=\"color: #666666;\">&lt;</span>App /<span class=\"op\" style=\"color: #666666;\">&gt;,</span> <span class=\"va\" style=\"color: #19177c;\">document</span>.<span class=\"at\" style=\"color: #7d9029;\">getElementById</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;root&quot;</span>))<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  App imports dependencies, imports",
            "  <code style=\"white-space: pre-wrap;\">BouncingBall</code>, renders it all",
            "  into a <code style=\"white-space: pre-wrap;\">root</code> DOM node.",
            "  CodeSandbox gives us most of this code by default.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb127\"",
            "  data-caption=\"Ball component\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb127-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Ball.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb127-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;react&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb127-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb127-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> Ball <span class=\"op\" style=\"color: #666666;\">=</span> (<span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y <span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">&lt;</span>circle cx<span class=\"op\" style=\"color: #666666;\">={</span>x<span class=\"op\" style=\"color: #666666;\">}</span> cy<span class=\"op\" style=\"color: #666666;\">={</span>y<span class=\"op\" style=\"color: #666666;\">}</span> r<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;5&quot;</span> /&gt;<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb127-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb127-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> Ball<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  We‚Äôre calling it a ball, but eh it‚Äôs a just a circle. You can make this",
            "  more fun if you want. Right now it‚Äôs a black SVG circle that renders at a",
            "  specified <code style=\"white-space: pre-wrap;\">x, y</code> coordinate",
            "  with a radius of <code style=\"white-space: pre-wrap;\">5</code> pixels.",
            "</p>",
            "<p>",
            "  It‚Äôs these coordinates that we‚Äôre going to play with to make the ball",
            "  drop and bounce. Each time, React is going to re-render and move our ball",
            "  to its new coordinates. Because we change them so quickly, it looks like",
            "  the ball is animated. You‚Äôll see.",
            "</p>",
            "<hr />",
            "<p>",
            "  Those are the boring components. The animation game loop fun happens in",
            "  <code style=\"white-space: pre-wrap;\">BouncingBall</code>.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "Stub out BouncingBall",
          "lectureLines": [
            "<h3 id=\"step-2-stub-out-bouncingball\">Step 2: Stub out BouncingBall</h3>",
            "<p>",
            "  We encapsulate everything in this component so that",
            "  <code style=\"white-space: pre-wrap;\">App</code> doesn‚Äôt have to know",
            "  about the details of our animation. App declaratively renders a bouncing",
            "  ball and that‚Äôs it.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb128\"",
            "  data-caption=\"BouncingBall component stub\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb128-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"op\" style=\"color: #666666;\">{</span> Component <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;react&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"im\">as</span> d3 <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;d3&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb128-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> BouncingBall <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> Component <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">constructor</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">super</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb128-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">5</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"dt\" style=\"color: #902000;\">vy</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">0</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb128-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">componentDidMount</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// start game loop</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">timer</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">timer</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">gameLoop</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb128-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">componentWillUnmount</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// stop loop</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">timer</span>.<span class=\"at\" style=\"color: #7d9029;\">stop</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb128-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  gameLoop <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// move ball by vy</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// increase vy to accelerate</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb128-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// render Ball at position y</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">&lt;</span>g /<span class=\"op\" style=\"color: #666666;\">&gt;;</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb128-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> BouncingBall<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>Nothing renders yet and we‚Äôre set up to get started.</p>",
            "<p>",
            "  We start with default state: vertical position",
            "  <code style=\"white-space: pre-wrap;\">y=5</code>, vertical speed",
            "  <code style=\"white-space: pre-wrap;\">vyüòÆ</code>.",
            "</p>",
            "<p>",
            "  <code style=\"white-space: pre-wrap;\">componentDidMount</code> fires off a",
            "  d3 timer and",
            "  <code style=\"white-space: pre-wrap;\">componentWillUnmount</code> stops it",
            "  so we don‚Äôt have unwanted code running in the background. The timer calls",
            "  <code style=\"white-space: pre-wrap;\">this.gameLoop</code> every 16",
            "  milliseconds, which translates to about 60 frames per second.",
            "</p>",
            "<p>",
            "  D3 timers work like JavaScript‚Äôs own",
            "  <code style=\"white-space: pre-wrap;\">setInterval</code>, but their",
            "  implementation is more robust. They use",
            "  <code style=\"white-space: pre-wrap;\">requestAnimationFrame</code> to save",
            "  computer resources when possible, and default to",
            "  <code style=\"white-space: pre-wrap;\">setInterval</code> otherwise.",
            "</p>",
            "<p>",
            "  Unlike <code style=\"white-space: pre-wrap;\">setInterval</code> timers are",
            "  also synced so their frames match up, can be restarted, stopped, etc. You",
            "  should default to favoring",
            "  <code style=\"white-space: pre-wrap;\">d3.timer</code> over",
            "  <code style=\"white-space: pre-wrap;\">setInterval</code> or hacking your",
            "  own",
            "  <code style=\"white-space: pre-wrap;\">requestAnimationFrame</code>",
            "  implementation.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "Step 3: Rendering",
          "lectureLines": [
            "<h3 id=\"step-3-rendering\">Step 3: Rendering</h3>",
            "<p>",
            "  To render our Ball we have to tweak BouncingBall‚Äôs",
            "  <code style=\"white-space: pre-wrap;\">render</code> method. A small",
            "  change. Try it yourself first.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb129\"",
            "  data-caption=\"Render ball\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb129-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// BouncingBall.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb129-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> Ball <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;./Ball&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb129-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb129-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> App <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> Component <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb129-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb129-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb129-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// render Ball at position y</span></a>",
            "<a class=\"sourceLine\" id=\"cb129-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">&lt;</span>g<span class=\"op\" style=\"color: #666666;\">&gt;&lt;</span>Ball x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">10</span><span class=\"op\" style=\"color: #666666;\">}</span> y<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">y</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;&lt;/g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb129-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb129-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  Import our <code style=\"white-space: pre-wrap;\">Ball</code> component,",
            "  render it at <code style=\"white-space: pre-wrap;\">x=10</code> and use",
            "  <code style=\"white-space: pre-wrap;\">this.state.y</code> for the vertical",
            "  coordinate.",
            "</p>",
            "<p>A black ball shows up on your screen. Like this:</p>",
            "<figure>",
            "  <img",
            "    alt=\"Black ball\"",
            "    src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQEAAADWCAYAAADRoDfeAAAKCGlDQ1BJQ0MgUHJvZmlsZQAASImFlndUVNcWxs+90xtthqH33jsMIL036VVUhgGGOsJQxY4EFYgoIiKgBCRUBaOhxoKIYiEIKGBBM0gQUJ7BAqigvAskMcl7670966zzW9/s8909Z/64HwAkd2ZiYjwsAEACJ4Xr42QrGxQcIosbBxCAAR0AoMBkJSfaeHm5Iwz+2P9eCyNIN1L3tVa9/vP7/1mCEZHJLAAgL4QZrERuCsIHEfZLT0lc5TGEaVxkKITnVpm9xjB6lcPXWXStx8/HDmFNAPBkJpPLBoDIQHTZNBYb8SEGIazLiYjhILzqb8mKZkYgfAthzaj41AyE36/2JCRsQ3SSIsKq4X/xZP/NP/xPfyaT/ScnxKeyfv9dqzdCjuT4+yK7OLIkQRTQBvEgFWQAWZAIuGAbosQgSiRy9//9HGPtnB3SmQi2IydiABtEgxTkvONfvHzXnFJAOmAiPZGI4o587Fb/x3XLd/Q1V4h+56uW1AWAaS4isr9qTAUAOl4AQF34qim8RcY5AsDlAVYqN21dW716gAFEwA9oQAxIAwWgCrSAPjAG5sAaOABX4An8QDDYAljIvAnIVOlgJ9gHckAeOAKOg1JQAc6AOnAOXABt4BK4Bm6Cu2AADIMngAcmwSswBxbAEgRBOIgCUSExSAZSgjQgfYgBWUIOkDvkAwVDYRAb4kCp0E5oP5QHFUKlUCVUD/0AdUDXoNvQIPQIGodmoLfQJxgFk2EaLAUrwzowA7aB3WA/eDPMhpPgTDgbPgyXwFXwWbgVvgbfhYdhHvwKnkcBFAlFR8mhtFAMlB3KExWCikJxUbtRuahiVBWqCdWJ6kXdR/FQs6iPaCyaipZFa6HN0c5ofzQLnYTejc5Hl6Lr0K3oHvR99Dh6Dv0FQ8FIYjQwZhgXTBCGjUnH5GCKMTWYFswNzDBmErOAxWLpWBWsCdYZG4yNxe7A5mNPYZuxXdhB7AR2HofDieE0cBY4TxwTl4LLwZ3EncVdxQ3hJnEf8CS8DF4f74gPwXPwWfhifAP+Cn4IP4VfIggQlAhmBE9CBGE7oYBQTegk3CNMEpaIgkQVogXRjxhL3EcsITYRbxDHiO9IJJI8yZTkTYoh7SWVkM6TbpHGSR/JQmR1sh05lJxKPkyuJXeRH5HfUSgUZYo1JYSSQjlMqadcpzyjfOCj8mnzufBF8O3hK+Nr5Rvie81P4Ffit+Hfwp/JX8x/kf8e/6wAQUBZwE6AKbBboEygQ2BUYF6QKqgn6CmYIJgv2CB4W3BaCCekLOQgFCGULXRG6LrQBBVFVaDaUVnU/dRq6g3qJA1LU6G50GJpebRztH7anLCQsKFwgHCGcJnwZWEeHUVXprvQ4+kF9Av0EfonESkRG5FIkUMiTSJDIouiEqLWopGiuaLNosOin8RkxRzE4sSOirWJPRVHi6uLe4uni58WvyE+K0GTMJdgSeRKXJB4LAlLqkv6SO6QPCPZJzkvJS3lJJUodVLqutSsNF3aWjpWukj6ivSMDFXGUiZGpkjmqsxLWWFZG9l42RLZHtk5OUk5Z7lUuUq5frkleRV5f/ks+Wb5pwpEBYZClEKRQrfCnKKMoofiTsVGxcdKBCWGUrTSCaVepUVlFeVA5QPKbcrTKqIqLiqZKo0qY6oUVSvVJNUq1QdqWDWGWpzaKbUBdVjdSD1avUz9ngasYawRo3FKY1ATo2mqydGs0hzVImvZaKVpNWqNa9O13bWztNu0X+so6oToHNXp1fmia6Qbr1ut+0RPSM9VL0uvU++tvro+S79M/4EBxcDRYI9Bu8EbQw3DSMPThg+NqEYeRgeMuo0+G5sYc42bjGdMFE3CTMpNRhk0hhcjn3HLFGNqa7rH9JLpRzNjsxSzC2a/mWuZx5k3mE9vUNkQuaF6w4SFvAXTotKCZylrGWb5nSXPSs6KaVVl9dxawTrCusZ6ykbNJtbmrM1rW11brm2L7aKdmd0uuy57lL2Tfa59v4OQg79DqcMzR3lHtmOj45yTkdMOpy5njLOb81HnURcpF5ZLvcucq4nrLtceN7Kbr1up23N3dXeue6cH7OHqccxjbKPSRs7GNk/g6eJ5zPOpl4pXktdP3lhvL+8y7xc+ej47fXp9qb5bfRt8F/xs/Qr8nvir+qf6dwfwB4QG1AcsBtoHFgbygnSCdgXdDRYPjgluD8GFBITUhMxvcth0fNNkqFFoTujIZpXNGZtvbxHfEr/l8lb+rcytF8MwYYFhDWHLTE9mFXM+3CW8PHyOZcc6wXoVYR1RFDETaRFZGDkVZRFVGDXNtmAfY89EW0UXR8/G2MWUxryJdY6tiF2M84yrjVuJD4xvTsAnhCV0cIQ4cZyebdLbMrYNJmok5iTyksySjifNcd24NclQ8ubk9hQa8vLsS1VN/SZ1PM0yrSztQ3pA+sUMwQxORt929e2Htk9lOmZ+vwO9g7Wje6fczn07x3fZ7KrcDe0O3929R2FP9p7JvU576/YR98Xt+zlLN6sw6/3+wP2d2VLZe7MnvnH6pjGHL4ebM3rA/EDFQfTBmIP9hwwOnTz0JTci906ebl5x3nI+K//Ot3rflny7cjjqcH+BccHpI9gjnCMjR62O1hUKFmYWThzzONZaJFuUW/T++Nbjt4sNiytOEE+knuCVuJe0n1Q8eeTkcml06XCZbVlzuWT5ofLFUxGnhk5bn26qkKrIq/j0Xcx3DyudKlurlKuKz2DPpJ15UR1Q3fs94/v6GvGavJrPtZxaXp1PXU+9SX19g2RDQSPcmNo4czb07MA5+3PtTVpNlc305rzz4Hzq+Zc/hP0wcsHtQvdFxsWmH5V+LG+htuS2Qq3bW+faott47cHtgx2uHd2d5p0tP2n/VHtJ7lLZZeHLBVeIV7KvrFzNvDrfldg1e419baJ7a/eT60HXH/R49/TfcLtx66bjzeu9Nr1Xb1ncunTb7HbHHcadtrvGd1v7jPpafjb6uaXfuL/1nsm99gHTgc7BDYNXhqyGrt23v3/zgcuDu8MbhwdH/EcejoaO8h5GPJx+FP/ozeO0x0tP9o5hxnKfCjwtfib5rOoXtV+aeca8y+P2433PfZ8/mWBNvPo1+dflyewXlBfFUzJT9dP605dmHGcGXm56Ofkq8dXSbM6/BP9V/lr19Y+/Wf/WNxc0N/mG+2blbf47sXe17w3fd897zT9bSFhYWsz9IPah7iPjY++nwE9TS+nLuOWSz2qfO7+4fRlbSVhZSWRymWtRAIUsOCoKgLe1AFCCkewwgGQhvvXM9Xuegf6SbP5g8HnoKy9vW89la2UMQK01AP57AXBHMsppZCkhTEb21YjoZw1gA4M/1++VHGWgv/4MMheJJh9WVt5JAYDrRJ7DXVlZOrWy8rkaGfYRAF1J/3e2f/B6HlwtLJKSC1Xo4viVPjIB/LP+DYgVvxTNfraPAAABnWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyI+CiAgICAgICAgIDxleGlmOlBpeGVsWERpbWVuc2lvbj4yNTc8L2V4aWY6UGl4ZWxYRGltZW5zaW9uPgogICAgICAgICA8ZXhpZjpQaXhlbFlEaW1lbnNpb24+MjE0PC9leGlmOlBpeGVsWURpbWVuc2lvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CrQ8pN4AAAbsSURBVHgB7drtTZxXFIXRIUohphOoxFCJoRLcCdAJnTh+LVmxgsiAtaNoa6/5k8gmV/ese/QEf1x8+/45+RAgMCvwx+zkBidA4IeACFgEAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYn8GcjwcvLy+nr16+n5+fnH9f/9OnT6cuXL6fjnz4ECHxM4OLb98/H/pP/96ufnp5O19fXry5xBODz58+nu7u7Vz/nBwgQeFugKgLHdwCXl5dvTnOE4PHx0XcEbwr5CQKvBap+T+D+/v71BL/8yBGJ29vbX37EvxIgcE6gKgLHLwXOfY4Q+BAg8H6Bql8OXFxcvGuyst/meNdMvojAfyVQ9Z3A1dXVWYebm5uzX+MLCBD4W6AqAsfv/p/7vOdrzp3h5wksCVRF4Pi//L/9n/74TuE93y0sPbBZCZwTqIrAMczDw8OPvxj062DHHw0ef1no+ONBHwIEPiZQ9RuD/xzt+JOAIwA+BAj8vkB1BH5/bP8lAQI/Bep+OfDz4v5JgEBGQAQyjk4hUCsgArVP5+IEMgIikHF0CoFaARGofToXJ5AREIGMo1MI1AqIQO3TuTiBjIAIZBydQqBWQARqn87FCWQERCDj6BQCtQIiUPt0Lk4gIyACGUenEKgVEIHap3NxAhkBEcg4OoVArYAI1D6dixPICIhAxtEpBGoFRKD26VycQEZABDKOTiFQKyACtU/n4gQyAiKQcXQKgVoBEah9OhcnkBEQgYyjUwjUCohA7dO5OIGMgAhkHJ1CoFZABGqfzsUJZAREIOPoFAK1AiJQ+3QuTiAjIAIZR6cQqBUQgdqnc3ECGQERyDg6hUCtgAjUPp2LE8gIiEDG0SkEagVEoPbpXJxARkAEMo5OIVArIAK1T+fiBDICIpBxdAqBWgERqH06FyeQERCBjKNTCNQKiEDt07k4gYyACGQcnUKgVkAEap/OxQlkBEQg4+gUArUCIlD7dC5OICMgAhlHpxCoFRCB2qdzcQIZARHIODqFQK2ACNQ+nYsTyAiIQMbRKQRqBUSg9ulcnEBGQAQyjk4hUCsgArVP5+IEMgIikHF0CoFaARGofToXJ5AREIGMo1MI1AqIQO3TuTiBjIAIZBydQqBWQARqn87FCWQERCDj6BQCtQIiUPt0Lk4gIyACGUenEKgVEIHap3NxAhkBEcg4OoVArYAI1D6dixPICIhAxtEpBGoFRKD26VycQEZABDKOTiFQKyACtU/n4gQyAiKQcXQKgVoBEah9OhcnkBEQgYyjUwjUCohA7dO5OIGMgAhkHJ1CoFZABGqfzsUJZAREIOPoFAK1AiJQ+3QuTiAjIAIZR6cQqBUQgdqnc3ECGQERyDg6hUCtwF8dFE4FdPS5tAAAAABJRU5ErkJggg==\"",
            "  />",
            "  <figcaption>Black ball</figcaption>",
            "</figure>"
          ]
        },
        {
          "lectureTitle": "Step 4: The Game Loop",
          "lectureLines": [
            "<h3 id=\"step-4-the-game-loop\">Step 4: The Game Loop</h3>",
            "<p>",
            "  Our game loop is already running. It‚Äôs that",
            "  <code style=\"white-space: pre-wrap;\">d3.timer</code> we started on",
            "  component mount.",
            "</p>",
            "<p>",
            "  What do you think we should do every time",
            "  <code style=\"white-space: pre-wrap;\">gameLoop</code> is called?",
            "</p>",
            "<p>Move the ball. Accelerate. Bounce it back. üèÄ</p>",
            "<p>",
            "  The physics is tricky to think about. Few students at my workshops figure",
            "  this one out and that‚Äôs the point: Game loop gives you control. All the",
            "  control.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb130\"",
            "  data-caption=\"Bouncy ball at 60fps\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb130-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// BouncingBall.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb130-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">componentDidMount</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb130-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// start game loop</span></a>",
            "<a class=\"sourceLine\" id=\"cb130-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">timer</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">timer</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">gameLoop</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb130-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb130-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb130-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">componentWillUnmount</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb130-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">timer</span>.<span class=\"at\" style=\"color: #7d9029;\">stop</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb130-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb130-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb130-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  gameLoop <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb130-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> <span class=\"op\" style=\"color: #666666;\">{</span> y<span class=\"op\" style=\"color: #666666;\">,</span> vy <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb130-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb130-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (y <span class=\"op\" style=\"color: #666666;\">&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">max_h</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb130-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      vy <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">-</span>vy <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"fl\" style=\"color: #40a070;\">.87</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb130-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb130-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb130-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">setState</span>(<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb130-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> y <span class=\"op\" style=\"color: #666666;\">+</span> vy<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb130-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"dt\" style=\"color: #902000;\">vy</span><span class=\"op\" style=\"color: #666666;\">:</span> vy <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"fl\" style=\"color: #40a070;\">0.3</span></a>",
            "<a class=\"sourceLine\" id=\"cb130-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb130-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  Our <code style=\"white-space: pre-wrap;\">gameLoop</code> method is called",
            "  every 16 milliseconds give or take. Sometimes more, if the computer is",
            "  busy, low on batter, or the tab is left inactive for too long",
            "</p>",
            "<p>Bounce physics go like this:</p>",
            "<ul>",
            "  <li>",
            "    add vertical speed, <code style=\"white-space: pre-wrap;\">vy</code>, to",
            "    position, <code style=\"white-space: pre-wrap;\">y</code>",
            "  </li>",
            "  <li>",
            "    increased <code style=\"white-space: pre-wrap;\">vy</code> by amount of",
            "    acceleration",
            "  </li>",
            "  <li>if position is more than max, bounce</li>",
            "  <li>bounce means invert speed</li>",
            "  <li>bounce means energy loss, reduce speed by 13%</li>",
            "</ul>",
            "<p>High school physics my friend. You might not remember.</p>",
            "<p>",
            "  Speed tells you how much an object moves per unit of time. Our speed",
            "  starts at 5 pixels per frame.",
            "</p>",
            "<p>",
            "  Acceleration tells you how much speed increases per unit of time. Gravity",
            "  makes you fall 10 meters per second faster every second. Our gravity",
            "  looks best at 0.3 pixels per frame.",
            "</p>",
            "<p>Bounce is what really breaks people‚Äôs brains.</p>",
            "<p>",
            "  I think it‚Äôs one of Newton‚Äôs laws? Or a derivation from there. Bouncing",
            "  means balls maintain the same speed, but change direction. Our wall is",
            "  perpendicular to the path of travel, so the speed inverts.",
            "</p>",
            "<p>We add some energy loss to make the bounce more realistic.</p>",
            "<p>",
            "  Gravity acceleration points the same downwards direction as always.",
            "  Except now it‚Äôs slowing down the ball instead of speeding it up.",
            "</p>",
            "<p>Eventually speed reaches zero and the ball starts falling again.</p>",
            "<figure>",
            "  <img",
            "    src=\"https://media.giphy.com/media/12NUbkX6p4xOO4/giphy.gif\"",
            "    alt=\"Magic\"",
            "  />",
            "  <figcaption>Magic</figcaption>",
            "</figure>",
            "<p>",
            "  Here‚Äôs a CodeSandbox with the",
            "  <a href=\"https://codesandbox.io/s/o4vk8zkn96\">final bouncy ball code</a>.",
            "</p>",
            "<p>",
            "  Experiment with multiple balls. Start them at different heights. Play",
            "  with different factors in those equations. It‚Äôs fun if you‚Äôre a nerd like",
            "  me.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "Step 5: Correcting for time and frame drops",
          "lectureLines": [
            "<h3 id=\"step-5-correcting-for-time-and-frame-drops\">",
            "  Step 5: Correcting for time and frame drops",
            "</h3>",
            "<p>If you run the CodeSandbox a few times, you‚Äôll notice two bugs.</p>",
            "<ol type=\"1\">",
            "  <li>",
            "    <p>",
            "      Sometimes our ball gets trapped at the bottom of the bounce. We won‚Äôt",
            "      fix this one; it‚Äôs tricky.",
            "    </p>",
            "  </li>",
            "  <li>",
            "    <p>",
            "      When you slow down your computer, the ball lags. That‚Äôs not how",
            "      things behave in real life.",
            "    </p>",
            "  </li>",
            "</ol>",
            "<p>We‚Äôre dealing with dropped frames.</p>",
            "<p>",
            "  Modern browsers slow down JavaScript in tabs that aren‚Äôt focused, on",
            "  computers running off batteries, when batteries get low‚Ä¶ many different",
            "  reasons. To make our animation silky smooth, we have to take this into",
            "  account.",
            "</p>",
            "<p>",
            "  That involves calculating how many frames we dropped and adjusting our",
            "  physics.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb131\"",
            "  data-caption=\"Adjust for frame drops\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb131-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// BouncingBall.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb131-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  gameLoop <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb131-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> <span class=\"op\" style=\"color: #666666;\">{</span> y<span class=\"op\" style=\"color: #666666;\">,</span> vy<span class=\"op\" style=\"color: #666666;\">,</span> lastFrame <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb131-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb131-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> frames <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"dv\" style=\"color: #40a070;\">1</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb131-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb131-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (lastFrame) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb131-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      frames <span class=\"op\" style=\"color: #666666;\">=</span> (<span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">now</span>() <span class=\"op\" style=\"color: #666666;\">-</span> lastFrame) / (<span class=\"dv\" style=\"color: #40a070;\">1000</span> / <span class=\"dv\" style=\"color: #40a070;\">60</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb131-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb131-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb131-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">for</span> (<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> i <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">;</span> i <span class=\"op\" style=\"color: #666666;\">&lt;</span> frames<span class=\"op\" style=\"color: #666666;\">;</span> i<span class=\"op\" style=\"color: #666666;\">++</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb131-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (y <span class=\"op\" style=\"color: #666666;\">&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">max_h</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb131-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        vy <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">-</span>vy <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"fl\" style=\"color: #40a070;\">0.87</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb131-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb131-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb131-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      y <span class=\"op\" style=\"color: #666666;\">=</span> y <span class=\"op\" style=\"color: #666666;\">+</span> vy<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb131-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      vy <span class=\"op\" style=\"color: #666666;\">=</span> vy <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"fl\" style=\"color: #40a070;\">0.3</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb131-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb131-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb131-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">setState</span>(<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb131-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      y<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb131-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      vy<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb131-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"dt\" style=\"color: #902000;\">lastFrame</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">now</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb131-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb131-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">};</span></a></code></pre>",
            "</div>",
            "<p>",
            "  We add <code style=\"white-space: pre-wrap;\">lastFrame</code> to game",
            "  state and set it with",
            "  <code style=\"white-space: pre-wrap;\">d3.now()</code>. This gives us a",
            "  high resolution timestamp that‚Äôs pegged to",
            "  <code style=\"white-space: pre-wrap;\">requestAnimationFrame</code>. D3",
            "  guarantees that every",
            "  <code style=\"white-space: pre-wrap;\">d3.now()</code> called within the",
            "  same frame gets the same timestamp.",
            "</p>",
            "<p>",
            "  <code style=\"white-space: pre-wrap;\">(d3.now()-lastFrame)/16</code> tells",
            "  us how many frames were meant to have happened since last iteration. Most",
            "  of the time, this value will be",
            "  <code style=\"white-space: pre-wrap;\">1</code>.",
            "</p>",
            "<p>",
            "  We use <code style=\"white-space: pre-wrap;\">frames</code> to simulate as",
            "  many frames as we need in a quick loop. Run the same calculations with",
            "  the same height checks. This simulates the missing frames and makes our",
            "  animation look smooth.",
            "</p>",
            "<p>",
            "  Try it out on CodeSandbox:",
            "  <a href=\"https://codesandbox.io/s/8n3p6720wl\"",
            "    >click me for time-fixed bouncy ball</a",
            "  >",
            "</p>"
          ]
        },
        {
          "lectureTitle": "Game loop recap",
          "lectureLines": [
            "<h2 id=\"game-loop-recap\">Game loop recap</h2>",
            "<p>",
            "  You now know how to build a game loop and use it to run custom",
            "  animations. üëè",
            "</p>",
            "<ul>",
            "  <li>render from state</li>",
            "  <li>change state 60 times per second</li>",
            "  <li>reason about movement in snapshots</li>",
            "  <li>deal with dropped frames</li>",
            "  <li>complete control</li>",
            "</ul>",
            "<p>",
            "  Complete control is nice, but the mental acrobatics are not. Getting game",
            "  loops just right is hard.",
            "</p>",
            "<p>",
            "  And that‚Äôs why I recommend transitions in most cases. Transitions can",
            "  handle all of that for you out of the box.",
            "</p>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "Use transitions for simple animation",
      "lectures": [
        {
          "lectureTitle": "Transition basics",
          "lectureLines": [
            "<h1 id=\"using-transitions-for-simple-animation\">",
            "  Using transitions for simple animation",
            "</h1>",
            "<p>",
            "  Game loops are great for fine-grained control. And when all you need is a",
            "  little flourish on user action, that‚Äôs where transitions shine.",
            "</p>",
            "<p>No details, just keyframes.</p>",
            "<p>",
            "  Transitions let you animate SVG elements by saying",
            "  <em",
            "    >‚ÄúI want this property to change to this new value and take this long",
            "    to do so‚Äù</em",
            "  >.",
            "</p>",
            "<p>",
            "  Start-end keyframes are the simplest. You define the starting position.",
            "  Start a transition. Define the end position. D3 figures out the rest.",
            "  Everything from calculating the perfect rate of change to match your",
            "  start and end values and your duration, to <em>what</em> to change and",
            "  handling dropped frames.",
            "</p>",
            "<p>Quite magical.</p>",
            "<p>",
            "  You can also sequence transitions to create complex keyframe-based",
            "  animation. Each new transition definition is like a new keyframe. D3",
            "  figures out the rest.",
            "</p>",
            "<p>",
            "  Better yet, you can use easing functions to make your animation look more",
            "  natural. Make rate of change follow a mathematical curve to create smooth",
            "  natural movement.",
            "</p>",
            "<p>",
            "  You can read more about the <em>why</em> of easing functions in Disney‚Äôs",
            "  <a href=\"https://en.wikipedia.org/wiki/12_basic_principles_of_animation\"",
            "    >12 Basic Principles of Animation</a",
            "  >. Bottom line is that it makes your animation feel natural.",
            "</p>",
            "<p>",
            "  <em>How</em> they work is hard to explain. You can grok part of it in my",
            "  <a",
            "    href=\"https://swizec.com/blog/silky-smooth-piechart-transitions-react-d3js/swizec/8258\"",
            "    >Custom transition tweens</a",
            "  >",
            "  article.",
            "</p>",
            "<p>",
            "  But don‚Äôt worry about it. All you have to know is that many easing",
            "  functions exist. <a href=\"https://easings.net/\">easings.net</a> lists the",
            "  common ones. D3 implements everything on that list.",
            "</p>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/easings.net.png\"",
            "    alt=\"Common easing functions\"",
            "  />",
            "  <figcaption>Common easing functions</figcaption>",
            "</figure>",
            "<p>Let‚Äôs try an example: A swipe transition.</p>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "Build a simple transition component",
      "lectures": [
        {
          "lectureTitle": "A swipe transition component",
          "lectureLines": [
            "<h2 id=\"swipe-transition\">Swipe transition</h2>",
            "<p>",
            "  Our goal is to build a declarative component fully controlled by props.",
            "  We pass in the <code style=\"white-space: pre-wrap;\">x</code> coordinate",
            "  and the coordinate figures out the rest.",
            "</p>",
            "<p>",
            "  We shouldn‚Äôt care about the transition or how long it takes. That‚Äôs up to",
            "  the component. We just change",
            "  <code style=\"white-space: pre-wrap;\">x</code>.",
            "</p>",
            "<p>",
            "  You can see it in action",
            "  <a href=\"https://codesandbox.io/s/618mr9r6nr\">on CodeSandbox, here</a>.",
            "  Tweak params, see what happens. Follow along as I explain how it works.",
            "</p>",
            "<p>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/ball-swipe-left.png\"",
            "    alt=\"Ball on the left before you click\"",
            "  />",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/ball-swipe-right.png\"",
            "    alt=\"Ball on the right before you click\"",
            "  />",
            "</p>"
          ]
        },
        {
          "lectureTitle": "App.js",
          "lectureLines": [
            "<h3 id=\"app.js\">App.js</h3>",
            "<p>",
            "  Like we said: the hard stuff happens inside our Ball component. That",
            "  means App has render our Ball and implement a mechanism to toggle the",
            "  <code style=\"white-space: pre-wrap;\">x</code> coordinate between two",
            "  states: Left and right.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb132\"",
            "  data-caption=\"Rendering a declarative transitionable component\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb132-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> App <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb132-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  state <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb132-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">ballLeft</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">true</span></a>",
            "<a class=\"sourceLine\" id=\"cb132-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb132-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  ballJump <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb132-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">setState</span>(<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb132-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"dt\" style=\"color: #902000;\">ballLeft</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"op\" style=\"color: #666666;\">!</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">ballLeft</span></a>",
            "<a class=\"sourceLine\" id=\"cb132-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb132-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb132-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb132-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> ballLeft <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb132-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb132-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>div style<span class=\"op\" style=\"color: #666666;\">={</span>styles<span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb132-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>h1<span class=\"op\" style=\"color: #666666;\">&gt;</span>D3 transitions <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">in</span> React <span class=\"fl\" style=\"color: #40a070;\">16.3</span> <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"st\" style=\"color: #4070a0;\">&quot;</span><span class=\"sc\" style=\"color: #4070a0;\">\\u2728</span><span class=\"st\" style=\"color: #4070a0;\">&quot;</span><span class=\"op\" style=\"color: #666666;\">}</span>&lt;/h1<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb132-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>p<span class=\"op\" style=\"color: #666666;\">&gt;</span>Click the <span class=\"dt\" style=\"color: #902000;\">ball </span><span class=\"op\" style=\"color: #666666;\">:</span><span class=\"dt\" style=\"color: #902000;\">point_down</span><span class=\"op\" style=\"color: #666666;\">:</span>&lt;/p<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb132-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>svg style<span class=\"op\" style=\"color: #666666;\">={{</span> <span class=\"dt\">width</span><span class=\"op\">:</span> <span class=\"st\">&quot;300&quot;</span><span class=\"op\">,</span> <span class=\"dt\">height</span><span class=\"op\">:</span> <span class=\"st\">&quot;300px&quot;</span> <span class=\"op\">}}</span> onClick<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">ballJump</span><span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb132-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          <span class=\"op\" style=\"color: #666666;\">&lt;</span>Ball x<span class=\"op\" style=\"color: #666666;\">={</span>ballLeft <span class=\"op\" style=\"color: #666666;\">?</span> <span class=\"dv\" style=\"color: #40a070;\">15</span> : <span class=\"dv\" style=\"color: #40a070;\">250</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb132-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        &lt;/svg<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb132-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb132-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb132-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb132-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>Typical class based component:</p>",
            "<ol type=\"1\">",
            "  <li>",
            "    State holding a",
            "    <code style=\"white-space: pre-wrap;\">ballLeft</code> boolean",
            "  </li>",
            "  <li>A method to toggle said boolean</li>",
            "  <li>",
            "    A render method that renders an SVG with an",
            "    <code style=\"white-space: pre-wrap;\">onClick</code> event",
            "  </li>",
            "</ol>",
            "<p>",
            "  When <code style=\"white-space: pre-wrap;\">state.ballLeft</code> is true,",
            "  ball renders on the left. When it‚Äôs false, on the right. Left and right",
            "  are hardcoded <code style=\"white-space: pre-wrap;\">x</code> coordinates.",
            "</p>",
            "<p>Ball component handles the rest.</p>"
          ]
        },
        {
          "lectureTitle": "Ball.js",
          "lectureLines": [
            "<h3 id=\"ball.js\">Ball.js</h3>",
            "<p>",
            "  You‚Äôve rendered a ball before: It‚Äôs an SVG circle. You can make it",
            "  fancier, but that‚Äôs not the point. The point are transitions.",
            "</p>",
            "<p>",
            "  The way D3 transitions work with React feels like combining the blackbox",
            "  and full integration approaches. Full integration for rendering, switch",
            "  to blackbox for the transition, release control back to React. ü§Ø",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb133\"",
            "  data-caption=\"Rendering a ball\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb133-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Ball <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">PureComponent</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb133-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">constructor</span>(props) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb133-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">super</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb133-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb133-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">x</span></a>",
            "<a class=\"sourceLine\" id=\"cb133-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb133-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb133-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb133-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  circleRef <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">createRef</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb133-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb133-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb133-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb133-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb133-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb133-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">&lt;</span>circle r<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;10&quot;</span> cx<span class=\"op\" style=\"color: #666666;\">={</span>x<span class=\"op\" style=\"color: #666666;\">}</span> cy<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">10</span><span class=\"op\" style=\"color: #666666;\">}</span> ref<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">circleRef</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb133-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb133-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  We render a <code style=\"white-space: pre-wrap;\">circle</code> at",
            "  <code style=\"white-space: pre-wrap;\">x</code> coordinate and a random",
            "  <code style=\"white-space: pre-wrap;\">y</code> and give it a React ref.",
            "  We‚Äôll use this ref to give control of the DOM node to D3. Just like",
            "  blackbox components.",
            "</p>",
            "<p>",
            "  The interesting part is that we use a constructor to copy our",
            "  <code style=\"white-space: pre-wrap;\">x</code> prop into state. That‚Äôs",
            "  because we‚Äôre going to use props as a sort of staging area for what we",
            "  <em>want</em> <code style=\"white-space: pre-wrap;\">x</code> to be, not",
            "  what it currently is.",
            "</p>",
            "<p>Props change, state stays the same. React doesn‚Äôt move our ball.</p>"
          ]
        },
        {
          "lectureTitle": "Ball.js state transition",
          "lectureLines": [
            "<h3 id=\"ball.js-state-transition\">Ball.js state transition</h3>",
            "<p>",
            "  What does move our ball, is our transition. We do that in",
            "  <code style=\"white-space: pre-wrap;\">componentDidUpdate</code>.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb134\"",
            "  data-caption=\"D3 transition our ball\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb134-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">componentDidUpdate</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb134-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> el <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">select</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">circleRef</span>.<span class=\"at\" style=\"color: #7d9029;\">current</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb134-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb134-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">el</span>.<span class=\"at\" style=\"color: #7d9029;\">transition</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb134-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">duration</span>(<span class=\"dv\" style=\"color: #40a070;\">800</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb134-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">ease</span>(<span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">easeBounceOut</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb134-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;cx&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"op\" style=\"color: #666666;\">:</span><span class=\"dt\" style=\"color: #902000;\">satisfied</span><span class=\"op\" style=\"color: #666666;\">:</span></a>",
            "<a class=\"sourceLine\" id=\"cb134-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">on</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;end&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb134-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">setState</span>(<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb134-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">x</span></a>",
            "<a class=\"sourceLine\" id=\"cb134-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb134-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb134-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  React calls",
            "  <code style=\"white-space: pre-wrap;\">componentDidUpdate</code> when props",
            "  or state change. We use this as an opportunity to run a D3 transition on",
            "  our DOM node.",
            "</p>",
            "<p>Here‚Äôs what happens:</p>",
            "<ol type=\"1\">",
            "  <li>",
            "    Take the node with",
            "    <code style=\"white-space: pre-wrap;\">d3.select</code>",
            "  </li>",
            "  <li>",
            "    Start a transition with",
            "    <code style=\"white-space: pre-wrap;\">.transition</code>",
            "  </li>",
            "  <li>",
            "    Specify 800ms duration with",
            "    <code style=\"white-space: pre-wrap;\">.duration</code>",
            "  </li>",
            "  <li>",
            "    Add an easing function for that beautiful bounce effect with",
            "    <code style=\"white-space: pre-wrap;\">.ease</code>",
            "  </li>",
            "  <li>",
            "    Define which attributes are changing with",
            "    <code style=\"white-space: pre-wrap;\">.attr</code>",
            "  </li>",
            "  <li>",
            "    Use <code style=\"white-space: pre-wrap;\">.on(&quot;end&quotüòâ</code> to",
            "    sync React worldview with reality after transition ends",
            "  </li>",
            "</ol>",
            "<p>",
            "  What‚Äôs great about D3 transitions is that D3 figures everything for you.",
            "  You can throw as many attributes at a transition as you want. The",
            "  attributes can be as complex as you can imagine.",
            "</p>",
            "<p>",
            "  D3‚Äôs interpolation methods will figure it out for you. Numbers, strings,",
            "  colors, it all works great.",
            "</p>",
            "<p>",
            "  After a transition is done, I like to sync React‚Äôs worldview with what",
            "  the transition changed. It‚Äôs not strictly required but it can sometimes",
            "  lead to React freaking out that you moved an element.",
            "</p>",
            "<p>",
            "  Play around. Try adding some more transitions. Make the ball move",
            "  diagonally. Make it go right then down. It‚Äôs fun. üòä",
            "</p>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "Enter-update-exit animation",
      "lectures": [
        {
          "lectureTitle": "Enter-update-exit animation intro",
          "lectureLines": [
            "<h1 id=\"enter-exit-animation\">Enter/update/exit animation</h1>",
            "<p>",
            "  Now that you know how to use transitions, it‚Äôs time to take it up a",
            "  notch. Enter/exit animations.",
            "</p>",
            "<p>",
            "  Enter/exit animations are the most common use of transitions. They‚Äôre",
            "  what happens when a new element enters or exits the picture. For example:",
            "  in visualizations like this famous",
            "  <a href=\"https://www.youtube.com/watch?v=LLCF7vPanrY\"",
            "    >Nuclear Detonation Timeline</a",
            "  >",
            "  by Isao Hashimoto. Each new Boom! flashes to look like an explosion.",
            "</p>",
            "<p>",
            "  I don‚Äôt know how Hashimoto did it, but with React &amp; D3, you‚Äôd do it",
            "  with enter/exit transitions.",
            "</p>",
            "<p>",
            "  Another favorite of mine is this",
            "  <a href=\"https://bl.ocks.org/mbostock/3808234\">animated alphabet</a>",
            "  example by Mike Bostock, the creator of D3, that showcases",
            "  enter/update/exit transitions.",
            "</p>",
            "<p>",
            "  That‚Äôs what we‚Äôre going to build: An animated alphabet. New letters fall",
            "  down and are green, updated letters move right or left, deleted letters",
            "  are red and fall down.",
            "</p>",
            "<p>",
            "  You can play with a more advanced version",
            "  <a href=\"https://swizec.github.io/react-d3-enter-exit-transitions/\"",
            "    >here</a",
            "  >. Same principle as the alphabet, but it animates what you type.",
            "</p>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/typing-screenshot.png\"",
            "    alt=\"Typing animation screenshot\"",
            "  />",
            "  <figcaption>Typing animation screenshot</figcaption>",
            "</figure>",
            "<p>",
            "  We‚Äôre building the alphabet version because the",
            "  <a",
            "    href=\"https://swizec.com/blog/animated-string-diffing-with-react-and-d3/swizec/6952\"",
            "    >string diffing algorithm</a",
            "  >",
            "  is a pain to explain. I learned that the hard way when giving workshops",
            "  on React and D3‚Ä¶",
            "</p>",
            "<figure>",
            "  <img",
            "    src=\"https://cdn.staticaly.com/gh/hsribei/react-d3js-es6-ebook/024f7e0ae8547f5288f61bc442370f0f689d84eb/manuscript/resources/images/es6v2/string-diffing.jpg\"",
            "    alt=\"String diffing algorithm sketch\"",
            "  />",
            "  <figcaption>String diffing algorithm sketch</figcaption>",
            "</figure>",
            "<p>See?</p>",
            "<p>",
            "  Easy on paper, but the code is long and weird. That, or I‚Äôm bad at",
            "  implementing it. Either way, it‚Äôs too tangential to explain here. You can",
            "  <a",
            "    href=\"https://swizec.com/blog/animated-string-diffing-with-react-and-d3/swizec/6952\"",
            "    >read the article about it</a",
            "  >.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "Build a declarative animated alphabet",
          "lectureLines": [
            "<h2 id=\"animated-alphabet\">Animated alphabet</h2>",
            "<p>",
            "  Our goal is to render a random subset of the alphabet. Every time the set",
            "  updates, old letters transition out, new letters transition in, and",
            "  updated letters transition into a new position.",
            "</p>",
            "<p>We need two components:</p>",
            "<ul>",
            "  <li>",
            "    <code style=\"white-space: pre-wrap;\">Alphabet</code>, which creates",
            "    random lists of letters every 1.5 seconds, then maps through them to",
            "    render <code style=\"white-space: pre-wrap;\">Letter</code> components",
            "  </li>",
            "  <li>",
            "    <code style=\"white-space: pre-wrap;\">Letter</code>, which renders an",
            "    SVG text element and takes care of its own enter/update/exit",
            "    transitions",
            "  </li>",
            "</ul>",
            "<p>",
            "  You can see the full code on GitHub",
            "  <a",
            "    href=\"https://github.com/Swizec/react-d3-enter-exit-transitions/blob/master/src/components/Alphabet.jsx\"",
            "    >here</a",
            "  >.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "Project setup",
          "lectureLines": [
            "<h3 id=\"project-setup\">Project setup</h3>",
            "<p>",
            "  To get started you‚Äôll need a project. Either start one with",
            "  <code style=\"white-space: pre-wrap;\">create-react-app</code> or in",
            "  CodeSandbox. Either will work.",
            "</p>",
            "<p>",
            "  You‚Äôll need a base App component that renders an SVG with an",
            "  <code style=\"white-space: pre-wrap;\">&lt;Alphabet&gt;</code> child. Our",
            "  component is self-contained so that‚Äôs all you need.",
            "</p>",
            "<p>Something like this üëá</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb135\"",
            "  data-caption=\"Base App component\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb135-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> Alphabet <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./components/Alphabet`;</span></a>",
            "<a class=\"sourceLine\" id=\"cb135-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb135-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> App <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb135-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">&lt;</span>svg width<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;100%&quot;</span> height<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;600&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb135-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>Alphabet x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">32</span><span class=\"op\" style=\"color: #666666;\">}</span> y<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">300</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb135-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  &lt;/svg<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb135-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">)</a></code></pre>",
            "</div>",
            "<p>",
            "  I follow the convention of putting components in a",
            "  <code style=\"white-space: pre-wrap;\">src/components</code> directory. You",
            "  don‚Äôt have to.",
            "</p>",
            "<p>Remember to install dependencies: d3 and react-transition-group</p>"
          ]
        },
        {
          "lectureTitle": "The Alphabet component",
          "lectureLines": [
            "<h3 id=\"the-alphabet-component\">The Alphabet component</h3>",
            "<p>",
            "  The <code style=\"white-space: pre-wrap;\">Alphabet</code> component holds",
            "  a list of letters in component state and renders a collection of",
            "  <code style=\"white-space: pre-wrap;\">Letter</code> components in a loop.",
            "</p>",
            "<p>We start with a skeleton like this:</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb136\"",
            "  data-caption=\"Alphabet skeleton\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb136-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Alphabet.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb136-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;react&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb136-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"im\">as</span> d3 <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;d3&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb136-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">{</span> TransitionGroup <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;react-transition-group&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb136-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb136-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> Letter <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;./Letter&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb136-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb136-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Alphabet <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb136-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">static</span> letters <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;abcdefghijklmnopqrstuvwxyz&quot;</span>.<span class=\"at\" style=\"color: #7d9029;\">split</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;&quot;</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb136-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    state <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">alphabet</span><span class=\"op\" style=\"color: #666666;\">:</span> [] <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb136-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb136-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">componentDidMount</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb136-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// start interval</span></a>",
            "<a class=\"sourceLine\" id=\"cb136-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb136-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb136-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    shuffleAlphabet <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb136-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">       <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// generate new alphabet</span></a>",
            "<a class=\"sourceLine\" id=\"cb136-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb136-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb136-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb136-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> transform <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"vs\" style=\"color: #4070a0;\">`translate(</span><span class=\"sc\" style=\"color: #4070a0;\">${</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">x</span><span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">, </span><span class=\"sc\" style=\"color: #4070a0;\">${</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">y</span><span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">)`</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb136-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb136-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb136-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// spit out letters</span></a>",
            "<a class=\"sourceLine\" id=\"cb136-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb136-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb136-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb136-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb136-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> Alphabet<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  We import dependencies and define the",
            "  <code style=\"white-space: pre-wrap;\">Alphabet</code> component. It keeps",
            "  a list of available letters in a static",
            "  <code style=\"white-space: pre-wrap;\">letters</code> property and an empty",
            "  <code style=\"white-space: pre-wrap;\">alphabet</code> in component state.",
            "</p>",
            "<p>",
            "  We‚Äôll start a <code style=\"white-space: pre-wrap;\">d3.interval</code> on",
            "  <code style=\"white-space: pre-wrap;\">componentDidMount</code> and use",
            "  <code style=\"white-space: pre-wrap;\">shuffleAlphabet</code> to generate",
            "  alphabet subsets.",
            "</p>",
            "<p>",
            "  To showcase enter-update-exit transitions, we create a new alphabet every",
            "  second and a half. Using",
            "  <code style=\"white-space: pre-wrap;\">d3.interval</code> lets us do that",
            "  in a browser friendly way.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb137\"",
            "  data-caption=\"Alphabet game loop\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb137-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Alphabet/index.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb137-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">componentDidMount</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb137-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">interval</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">shuffleAlphabet</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">1500</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb137-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb137-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb137-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    shuffleAlphabet <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb137-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> alphabet <span class=\"op\" style=\"color: #666666;\">=</span> d3</a>",
            "<a class=\"sourceLine\" id=\"cb137-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            .<span class=\"at\" style=\"color: #7d9029;\">shuffle</span>(<span class=\"va\" style=\"color: #19177c;\">Alphabet</span>.<span class=\"at\" style=\"color: #7d9029;\">letters</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb137-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            .<span class=\"at\" style=\"color: #7d9029;\">slice</span>(<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">Math</span>.<span class=\"at\" style=\"color: #7d9029;\">floor</span>(<span class=\"va\" style=\"color: #19177c;\">Math</span>.<span class=\"at\" style=\"color: #7d9029;\">random</span>() <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"va\" style=\"color: #19177c;\">Alphabet</span>.<span class=\"va\" style=\"color: #19177c;\">letters</span>.<span class=\"at\" style=\"color: #7d9029;\">length</span>))</a>",
            "<a class=\"sourceLine\" id=\"cb137-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            .<span class=\"at\" style=\"color: #7d9029;\">sort</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb137-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb137-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">setState</span>(<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb137-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            alphabet</a>",
            "<a class=\"sourceLine\" id=\"cb137-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb137-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a></code></pre>",
            "</div>",
            "<p>",
            "  Think of this as our game loop: Change alphabet state in consistent time",
            "  intervals.",
            "</p>",
            "<p>",
            "  We use",
            "  <code style=\"white-space: pre-wrap;\">d3.interval( //.., 1500)</code> to",
            "  call <code style=\"white-space: pre-wrap;\">shuffleAlphabet</code> every",
            "  1.5 seconds. Same as",
            "  <code style=\"white-space: pre-wrap;\">setInterval</code>, but friendlier",
            "  to batteries and CPUs because it pegs to",
            "  <code style=\"white-space: pre-wrap;\">requestAnimationFrame</code>. On",
            "  each period, we use",
            "  <code style=\"white-space: pre-wrap;\">shuffleAlphabet</code> to shuffle",
            "  available letters, slice out a random amount, sort them, and update",
            "  component state with",
            "  <code style=\"white-space: pre-wrap;\">setState</code>.",
            "</p>",
            "<p>",
            "  This process ensures our alphabet is both random and in alphabetical",
            "  order.",
            "</p>",
            "<p>",
            "  Starting the interval in",
            "  <code style=\"white-space: pre-wrap;\">componentDidMount</code> ensures it",
            "  only runs when our Alphabet is on the page. In real life you should stop",
            "  it on <code style=\"white-space: pre-wrap;\">componentWillUnmount</code>.",
            "  Since this is a tiny experiment and we know",
            "  <code style=\"white-space: pre-wrap;\">&lt;Alphabet&gt;</code> never",
            "  unmounts without a page refresh, it‚Äôs okay to skip that step.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "Declarative render for enter-exit transitions",
          "lectureLines": [
            "<h4 id=\"declarative-render-for-enterexit-transitions\">",
            "  Declarative render for enter/exit transitions",
            "</h4>",
            "<p>",
            "  Our declarative enter/exit transitions start in the",
            "  <code style=\"white-space: pre-wrap;\">render</code> method.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb138\"",
            "  data-caption=\"Letter rendering\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb138-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Alphabet/index.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb138-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb138-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> transform <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"vs\" style=\"color: #4070a0;\">`translate(</span><span class=\"sc\" style=\"color: #4070a0;\">${</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">x</span><span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">, </span><span class=\"sc\" style=\"color: #4070a0;\">${</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">y</span><span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">)`</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb138-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb138-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb138-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>g transform<span class=\"op\" style=\"color: #666666;\">={</span>transform<span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb138-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&lt;</span>TransitionGroup enter<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">true</span><span class=\"op\" style=\"color: #666666;\">}</span> exit<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">true</span><span class=\"op\" style=\"color: #666666;\">}</span> component<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;g&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb138-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"va\" style=\"color: #19177c;\">alphabet</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>((d<span class=\"op\" style=\"color: #666666;\">,</span> i) <span class=\"op\" style=\"color: #666666;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb138-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        <span class=\"op\" style=\"color: #666666;\">&lt;</span>Letter letter<span class=\"op\" style=\"color: #666666;\">={</span>d<span class=\"op\" style=\"color: #666666;\">}</span> index<span class=\"op\" style=\"color: #666666;\">={</span>i<span class=\"op\" style=\"color: #666666;\">}</span> key<span class=\"op\" style=\"color: #666666;\">={</span>d<span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb138-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    ))<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb138-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                &lt;/TransitionGroup<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb138-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            &lt;/g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb138-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb138-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  An SVG transformation moves our alphabet into the specified",
            "  <code style=\"white-space: pre-wrap;\">(x, y)</code> position. We map",
            "  through",
            "  <code style=\"white-space: pre-wrap;\">this.state.alphabet</code> inside a",
            "  <code style=\"white-space: pre-wrap;\">&lt;TransitionGroup&gt;</code>",
            "  component and render a",
            "  <code style=\"white-space: pre-wrap;\">&lt;Letter&gt;</code> component for",
            "  every letter. Each",
            "  <code style=\"white-space: pre-wrap;\">Letter</code> gets a",
            "  <code style=\"white-space: pre-wrap;\">letter</code> prop for the text, an",
            "  <code style=\"white-space: pre-wrap;\">index</code> prop to know where it",
            "  stands, and a <code style=\"white-space: pre-wrap;\">key</code> so React",
            "  can tell them apart.",
            "</p>",
            "<h4 id=\"the-key-property\">The key property</h4>",
            "<p>",
            "  The key property is how React identifies components. Pick wrong, and",
            "  you‚Äôre gonna have a bad time. I spent many hours debugging and writing",
            "  workarounds before I realized that basing my key on the index was a Bad",
            "  Move‚Ñ¢. <em>Obviously</em>, you want the letter to stay constant in each",
            "  component and the index to change.",
            "</p>",
            "<p>That‚Äôs how x-axis transitions work.</p>",
            "<p>",
            "  You move the letter into a specific place in the alphabet. You‚Äôll see",
            "  what I mean when we look at the",
            "  <code style=\"white-space: pre-wrap;\">Letter</code> component.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "TransitionGroup",
          "lectureLines": [
            "<h4 id=\"transitiongroup\">TransitionGroup</h4>",
            "<p>",
            "  React TransitionGroup gives us coordinated control over a set of",
            "  transitionable components. Each Letter is going to be a",
            "  <code style=\"white-space: pre-wrap;\">&lt;Transition&gt;</code>, you‚Äôll",
            "  see.",
            "</p>",
            "<p>",
            "  We need TransitionGroup to gain declarative control over the enter/exit",
            "  cycle. Transition components can handle transitions themselves, but they",
            "  need an <code style=\"white-space: pre-wrap;\">in</code> prop to say",
            "  whether they‚Äôre in or out of the visualization.",
            "</p>",
            "<p>",
            "  Flip from <code style=\"white-space: pre-wrap;\">false</code> to",
            "  <code style=\"white-space: pre-wrap;\">true</code>, run an enter",
            "  transition.",
            "</p>",
            "<p>",
            "  <code style=\"white-space: pre-wrap;\">true</code> to",
            "  <code style=\"white-space: pre-wrap;\">false</code>, run an exit",
            "  transition.",
            "</p>",
            "<p>",
            "  We can make this change from within our component, of course. When",
            "  responding to user events for example. In our case we need that control",
            "  to come from outside based on which letters exist in the",
            "  <code style=\"white-space: pre-wrap;\">alphabet</code> array.",
            "</p>",
            "<p>",
            "  <code style=\"white-space: pre-wrap;\">TransitionGroup</code> handles that",
            "  for us. It automatically passes the correct",
            "  <code style=\"white-space: pre-wrap;\">in</code> prop to its children based",
            "  on who is and isn‚Äôt being rendered.",
            "</p>",
            "<p>",
            "  As an added bonus, we can use TransitionGroup to set a bunch of default",
            "  parameters for child Transitions. Whether to use",
            "  <code style=\"white-space: pre-wrap;\">enter</code> animations,",
            "  <code style=\"white-space: pre-wrap;\">exit</code> animations, stuff like",
            "  that. You can read",
            "  <a href=\"https://github.com/reactjs/react-transition-group\"",
            "    >a full list in the docs</a",
            "  >.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "The Letter component",
          "lectureLines": [
            "<h3 id=\"the-letter-component\">The Letter component</h3>",
            "<p>",
            "  We‚Äôre ready for the component that can transition itself into and out of",
            "  a visualization. Without consumers having to worry about what‚Äôs going on",
            "  behind the scenes üëå",
            "</p>",
            "<p>",
            "  The skeleton for our",
            "  <code style=\"white-space: pre-wrap;\">Letter</code> component looks like",
            "  this:",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb139\"",
            "  data-caption=\"Letter component skeleton\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb139-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Letter.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb139-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;react&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"im\">as</span> d3 <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;d3&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> Transition <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;react-transition-group/Transition&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb139-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> ExitColor <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;brown&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    UpdateColor <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;#333&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    EnterColor <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;green&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb139-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Letter <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    defaultState <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">-60</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">index</span> <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"dv\" style=\"color: #40a070;\">32</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">color</span><span class=\"op\" style=\"color: #666666;\">:</span> EnterColor<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">fillOpacity</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"fl\" style=\"color: #40a070;\">1e-6</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    state <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">defaultState</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    letterRef <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">createRef</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb139-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    onEnter <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Letter enters the visualization</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb139-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    onExit <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Letter drops out transition</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb139-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">componentDidUpdate</span>(prevProps<span class=\"op\" style=\"color: #666666;\">,</span> prevState) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// update transition</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb139-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y<span class=\"op\" style=\"color: #666666;\">,</span> fillOpacity<span class=\"op\" style=\"color: #666666;\">,</span> color <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">{</span> letter <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-36\" title=\"36\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb139-37\" title=\"37\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb139-38\" title=\"38\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// render Transition with text</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-39\" title=\"39\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-40\" title=\"40\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-41\" title=\"41\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-42\" title=\"42\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb139-43\" title=\"43\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> Letter<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  We start with some imports and define a",
            "  <code style=\"white-space: pre-wrap;\">Letter</code> component with a",
            "  default state. We keep",
            "  <code style=\"white-space: pre-wrap;\">defaultState</code> in a separate",
            "  value because we‚Äôre going to manually reset state in some cases.",
            "</p>",
            "<p>",
            "  A <code style=\"white-space: pre-wrap;\">letterRef</code> helps us hand",
            "  over control to D3 during transitions, the",
            "  <code style=\"white-space: pre-wrap;\">onEnter</code> callback handles",
            "  enter transitions,",
            "  <code style=\"white-space: pre-wrap;\">onExit</code> exit transitions, and",
            "  <code style=\"white-space: pre-wrap;\">componentDidUpdate</code> update",
            "  transitions. Render is where it call comes together.",
            "</p>",
            "<p>",
            "  Each of these transition methods is going to follow the same approach you",
            "  learned about in the swipe transition example. Render from state,",
            "  transition with D3, update state to match.",
            "</p>",
            "<p>",
            "  You can make this component more flexible by moving the various magic",
            "  numbers we use into props. Default",
            "  <code style=\"white-space: pre-wrap;\">y</code> offset, transition",
            "  duration, colors, stuff like that. The world is your oyster my friend.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "onEnter",
          "lectureLines": [
            "<h4 id=\"onenter\">onEnter</h4>",
            "<p>",
            "  We start with the enter transition in the",
            "  <code style=\"white-space: pre-wrap;\">onEnter</code> callback.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb140\"",
            "  data-caption=\"Enter transition\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb140-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Letter.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb140-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    onEnter <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb140-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Letter is entering the visualization</span></a>",
            "<a class=\"sourceLine\" id=\"cb140-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> node <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">select</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">letterRef</span>.<span class=\"at\" style=\"color: #7d9029;\">current</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb140-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb140-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">node</span>.<span class=\"at\" style=\"color: #7d9029;\">transition</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb140-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            .<span class=\"at\" style=\"color: #7d9029;\">duration</span>(<span class=\"dv\" style=\"color: #40a070;\">750</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb140-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            .<span class=\"at\" style=\"color: #7d9029;\">ease</span>(<span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">easeCubicInOut</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb140-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;y&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">0</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb140-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            .<span class=\"at\" style=\"color: #7d9029;\">style</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;fill-opacity&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">1</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb140-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            .<span class=\"at\" style=\"color: #7d9029;\">on</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;end&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb140-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">setState</span>(<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb140-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb140-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"dt\" style=\"color: #902000;\">fillOpacity</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">1</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb140-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"dt\" style=\"color: #902000;\">color</span><span class=\"op\" style=\"color: #666666;\">:</span> UpdateColor</a>",
            "<a class=\"sourceLine\" id=\"cb140-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb140-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb140-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a></code></pre>",
            "</div>",
            "<p>",
            "  We use <code style=\"white-space: pre-wrap;\">d3.select</code> to grab our",
            "  DOM node and take control with D3. Start a new transition with",
            "  <code style=\"white-space: pre-wrap;\">.transition()</code>, specify a",
            "  duration, an easing function, and specify the changes. Vertical position",
            "  moves to <code style=\"white-space: pre-wrap;\">0</code>, opacity changes",
            "  to <code style=\"white-space: pre-wrap;\">1</code>.",
            "</p>",
            "<p>This creates a drop-in fade-in effect.</p>",
            "<p>",
            "  When our transition ends, we update state with the new",
            "  <code style=\"white-space: pre-wrap;\">y</code> coordinate,",
            "  <code style=\"white-space: pre-wrap;\">fillOpacity</code>, and",
            "  <code style=\"white-space: pre-wrap;\">color</code>.",
            "</p>",
            "<p>",
            "  The result is an invisible letter that starts at -60px and moves into 0px",
            "  and full visibility over 750 milliseconds.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "onExit",
          "lectureLines": [
            "<h4 id=\"onexit\">onExit</h4>",
            "<p>",
            "  Our exit transition goes in the",
            "  <code style=\"white-space: pre-wrap;\">onExit</code> callback.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb141\"",
            "  data-caption=\"Leave transition\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb141-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Alphabet/</span></a>",
            "<a class=\"sourceLine\" id=\"cb141-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    onExit <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb141-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Letter is dropping out</span></a>",
            "<a class=\"sourceLine\" id=\"cb141-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> node <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">select</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">letterRef</span>.<span class=\"at\" style=\"color: #7d9029;\">current</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb141-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb141-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">node</span>.<span class=\"at\" style=\"color: #7d9029;\">style</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;fill&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> ExitColor)</a>",
            "<a class=\"sourceLine\" id=\"cb141-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            .<span class=\"at\" style=\"color: #7d9029;\">transition</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">transition</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb141-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;y&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">60</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb141-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            .<span class=\"at\" style=\"color: #7d9029;\">style</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;fill-opacity&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"fl\" style=\"color: #40a070;\">1e-6</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb141-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            .<span class=\"at\" style=\"color: #7d9029;\">on</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;end&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">setState</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">defaultState</span>))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb141-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a></code></pre>",
            "</div>",
            "<p>",
            "  Same as before, we take control of the DOM, run a transition, and update",
            "  state when we‚Äôre done. We start with forcing our letter into a new color,",
            "  then move it 60px down, transition to invisible, and reset state.",
            "</p>",
            "<p>",
            "  But why are we resetting state instead of updating to current reality?",
            "</p>",
            "<p>Our components never unmount.</p>",
            "<p>",
            "  We avoid unmounts to keep transitions smoother. Instead of unmounting, we",
            "  have to reset state back to its default values.",
            "</p>",
            "<p>",
            "  That moves the letter back into its enter state and ensures even re-used",
            "  letters drop down from the top. Took me a while to tinker that one out.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "componentDidUpdate",
          "lectureLines": [
            "<h4 id=\"componentdidupdate\">componentDidUpdate</h4>",
            "<p>",
            "  <code style=\"white-space: pre-wrap;\">componentDidUpdate</code> is our",
            "  trickiest transition yet. It has two jobs:",
            "</p>",
            "<ul>",
            "  <li>",
            "    jump existing components to correct horizontal position when a new",
            "    <code style=\"white-space: pre-wrap;\">enter</code> transition begins",
            "  </li>",
            "  <li>",
            "    transition components into new horizontal positions based on changing",
            "    indexes",
            "  </li>",
            "</ul>",
            "<p>It goes like this üëá</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb142\"",
            "  data-caption=\"Update transition\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb142-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Alphabet/Letter.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb142-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">componentDidUpdate</span>(prevProps<span class=\"op\" style=\"color: #666666;\">,</span> prevState) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb142-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (<span class=\"va\" style=\"color: #19177c;\">prevProps</span>.<span class=\"at\" style=\"color: #7d9029;\">in</span> <span class=\"op\" style=\"color: #666666;\">!==</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">in</span> <span class=\"op\" style=\"color: #666666;\">&amp;&amp;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">in</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb142-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// A new enter transition has begun</span></a>",
            "<a class=\"sourceLine\" id=\"cb142-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">setState</span>(<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb142-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">index</span> <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"dv\" style=\"color: #40a070;\">32</span></a>",
            "<a class=\"sourceLine\" id=\"cb142-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb142-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">else</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (<span class=\"va\" style=\"color: #19177c;\">prevProps</span>.<span class=\"at\" style=\"color: #7d9029;\">index</span> <span class=\"op\" style=\"color: #666666;\">!==</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">index</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb142-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Letter is moving to a new location</span></a>",
            "<a class=\"sourceLine\" id=\"cb142-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> node <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">select</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">letterRef</span>.<span class=\"at\" style=\"color: #7d9029;\">current</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb142-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                targetX <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">index</span> <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"dv\" style=\"color: #40a070;\">32</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb142-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb142-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"va\" style=\"color: #19177c;\">node</span>.<span class=\"at\" style=\"color: #7d9029;\">style</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;fill&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> UpdateColor)</a>",
            "<a class=\"sourceLine\" id=\"cb142-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                .<span class=\"at\" style=\"color: #7d9029;\">transition</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb142-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                .<span class=\"at\" style=\"color: #7d9029;\">duration</span>(<span class=\"dv\" style=\"color: #40a070;\">750</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb142-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                .<span class=\"at\" style=\"color: #7d9029;\">ease</span>(<span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">easeCubicInOut</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb142-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;x&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> targetX)</a>",
            "<a class=\"sourceLine\" id=\"cb142-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                .<span class=\"at\" style=\"color: #7d9029;\">on</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;end&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb142-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">setState</span>(<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb142-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> targetX<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb142-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        <span class=\"dt\" style=\"color: #902000;\">color</span><span class=\"op\" style=\"color: #666666;\">:</span> UpdateColor</a>",
            "<a class=\"sourceLine\" id=\"cb142-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"op\" style=\"color: #666666;\">}</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb142-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb142-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb142-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  When the <code style=\"white-space: pre-wrap;\">in</code> prop changes to",
            "  <code style=\"white-space: pre-wrap;\">true</code>, we‚Äôre starting a new",
            "  enter transition on an existing component. We already moved it to the top",
            "  of the visualization after exiting, but we couldn‚Äôt have known its future",
            "  index.",
            "</p>",
            "<p>",
            "  A quick <code style=\"white-space: pre-wrap;\">setState</code> makes sure",
            "  our letter is in the right place and",
            "  <code style=\"white-space: pre-wrap;\">onEnter</code> takes care of the",
            "  rest.",
            "</p>",
            "<p>",
            "  Otherwise we check if index changed and if it has, we run a transition in",
            "  much the same way as we have so far:",
            "</p>",
            "<ul>",
            "  <li>",
            "    calculate new <code style=\"white-space: pre-wrap;\">targetX</code>",
            "  </li>",
            "  <li>update letter color</li>",
            "  <li>start a transition with the usual parameters</li>",
            "  <li>update <code style=\"white-space: pre-wrap;\">x</code> coordinate</li>",
            "  <li>update state when transition ends</li>",
            "</ul>",
            "<p>",
            "  You now have a component that knows how to run its own enter/update/exit",
            "  transitions. Time to wire it all up in the",
            "  <code style=\"white-space: pre-wrap;\">render</code> method.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "render",
          "lectureLines": [
            "<h4 id=\"render-3\">render</h4>",
            "<p>Hard work is done. Here‚Äôs how you render:</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb143\"",
            "  data-caption=\"Letter render method\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb143-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Alphabet/Letter.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb143-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb143-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y<span class=\"op\" style=\"color: #666666;\">,</span> fillOpacity<span class=\"op\" style=\"color: #666666;\">,</span> color <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb143-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">{</span> letter <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb143-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb143-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb143-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>Transition</a>",
            "<a class=\"sourceLine\" id=\"cb143-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">in</span><span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">in</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb143-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                unmountOnExit<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">false</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb143-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                timeout<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">750</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb143-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                onEnter<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">onEnter</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb143-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                onExit<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">onExit</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb143-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb143-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&lt;</span>text</a>",
            "<a class=\"sourceLine\" id=\"cb143-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    dy<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;.35em&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb143-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    x<span class=\"op\" style=\"color: #666666;\">={</span>x<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb143-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    y<span class=\"op\" style=\"color: #666666;\">={</span>y<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb143-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    style<span class=\"op\" style=\"color: #666666;\">={{</span></a>",
            "<a class=\"sourceLine\" id=\"cb143-19\" title=\"19\">                        <span class=\"dt\">fillOpacity</span><span class=\"op\">:</span> fillOpacity<span class=\"op\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb143-20\" title=\"20\">                        <span class=\"dt\">fill</span><span class=\"op\">:</span> color<span class=\"op\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb143-21\" title=\"21\">                        <span class=\"dt\">font</span><span class=\"op\">:</span> <span class=\"st\">&quot;bold 48px monospace&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb143-22\" title=\"22\">                    <span class=\"op\">}}</span></a>",
            "<a class=\"sourceLine\" id=\"cb143-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    ref<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">letterRef</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb143-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb143-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"op\" style=\"color: #666666;\">{</span>letter<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb143-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                &lt;/text<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb143-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            &lt;/Transition<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb143-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb143-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  We render a",
            "  <code style=\"white-space: pre-wrap;\">Transition</code> element, which",
            "  gives us the transition super powers we need to run enter/exit",
            "  transitions. Update transitions work on all React components.",
            "</p>",
            "<p>",
            "  The outside",
            "  <code style=\"white-space: pre-wrap;\">TransitionGroup</code> gives us the",
            "  correct <code style=\"white-space: pre-wrap;\">in</code> prop value, we",
            "  just have to pass it into",
            "  <code style=\"white-space: pre-wrap;\">Transition</code>. We disable",
            "  <code style=\"white-space: pre-wrap;\">unmountOnExit</code> to make",
            "  transitions smoother, define a",
            "  <code style=\"white-space: pre-wrap;\">timeout</code> which has to match",
            "  what we‚Äôre using in our transitions, and define",
            "  <code style=\"white-space: pre-wrap;\">onEnter</code> and",
            "  <code style=\"white-space: pre-wrap;\">onExit</code> callbacks.",
            "</p>",
            "<p>",
            "  There‚Äôs a lot more to the API that we can use and you should check that",
            "  out in the docs. Docs don‚Äôt go into detail on everything, but if you",
            "  experiment I‚Äôm sure you‚Äôll figure it out.",
            "</p>",
            "<p>",
            "  Inside the transition we render an SVG",
            "  <code style=\"white-space: pre-wrap;\">&lt;text&gt;</code> element rendered",
            "  at an <code style=\"white-space: pre-wrap;\">(x, y)</code> position with a",
            "  <code style=\"white-space: pre-wrap;\">color</code> and",
            "  <code style=\"white-space: pre-wrap;\">fillOpacity</code> style. It shows a",
            "  single letter taken from the",
            "  <code style=\"white-space: pre-wrap;\">letter</code> prop.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "That's it üëç",
          "lectureLines": [
            "<h3 id=\"thats-it-thumbsup\">That‚Äôs it üëç</h3>",
            "<p>Boom. We‚Äôre done.</p>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/alphabet-transitions.png\"",
            "    alt=\"Alphabet transitions are hard to screenshot\"",
            "  />",
            "  <figcaption>Alphabet transitions are hard to screenshot</figcaption>",
            "</figure>",
            "<p>",
            "  You can play with a more complex version of this example here:",
            "  <a href=\"https://swizec.github.io/react-d3-enter-exit-transitions/\"",
            "    >https://swizec.github.io/react-d3-enter-exit-transitions/</a",
            "  >. Try typing different strings and see how the visualization reacts.",
            "</p>",
            "<p>",
            "  The typing example uses the same Letter components to declaratively",
            "  render its string, but it drives the input through your typing instead of",
            "  an automatic shuffler.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "Key transition takeaways",
          "lectureLines": [
            "<h3 id=\"key-takeaways-for-transitions-are\">",
            "  Key takeaways for transitions are:",
            "</h3>",
            "<ul>",
            "  <li>use d3 for transitions</li>",
            "  <li>use React to manage SVG elements</li>",
            "  <li>",
            "    use TransitionGroup and Transition for the enter/update/exit pattern",
            "  </li>",
            "</ul>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "Animating with React, Redux, and D3",
      "lectures": [
        {
          "lectureTitle": "Redux animation intro",
          "lectureLines": [
            "<h1 id=\"animating-react-redux\">Animating with React, Redux, and d3</h1>",
            "<p>",
            "  And now for some pure nerdy fun: A particle generator‚Ä¶ or, well, as close",
            "  as you can get with React and D3. You‚Äôd need WebGL for a",
            "  <em>real</em> particle generator.",
            "</p>",
            "<p>",
            "  We‚Äôre making tiny circles fly out of your mouse cursor. Works on mobile",
            "  with your finger, too.",
            "</p>",
            "<p>",
            "  To see the particle generator in action,",
            "  <a href=\"https://swizec.github.io/react-particles-experiment/\">go here</a",
            "  >. Github won‚Äôt let me host different branches, so you‚Äôll see the",
            "  advanced 20,000 particle version from next chapter.",
            "</p>",
            "<p>",
            "  We‚Äôre using the",
            "  <a",
            "    href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6906604#game-loop\"",
            "    >game loop</a",
            "  >",
            "  approach to animation and Redux to store the state tree and drive changes",
            "  for each frame.",
            "</p>",
            "<p>",
            "  You can see the full code",
            "  <a href=\"https://github.com/Swizec/react-particles-experiment\"",
            "    >on GitHub</a",
            "  >. I‚Äôve merged the SVG and Canvas branches. Redux part is the same, some",
            "  parameters differ. We‚Äôre focusing on the Redux part because that‚Äôs what‚Äôs",
            "  new.",
            "</p>",
            "<p>It‚Äôs going to be great.</p>",
            "<p>",
            "  {aside} Code in this example uses the",
            "  <code style=\"white-space: pre-wrap;\">.jsx</code> file extension. I",
            "  originally wrote it back when that was still a thing, and while I did",
            "  update everything to React 16+, I felt that changing filenames was",
            "  unnecessary. {/aside}",
            "</p>"
          ]
        },
        {
          "lectureTitle": "Here's how it works",
          "lectureLines": [
            "<h2 id=\"heres-how-it-works\">Here‚Äôs how it works</h2>",
            "<p>",
            "  We use <strong>React to render everything</strong>: the page, the SVG",
            "  element, the particles inside. This lets us tap into React‚Äôs algorithms",
            "  that decide which nodes to update and when to garbage collect old nodes.",
            "</p>",
            "<p>",
            "  Then we use some <strong>d3 calculations and event detection</strong>. D3",
            "  has great random generators, so we take advantage of that. D3‚Äôs mouse and",
            "  touch event handlers calculate coordinates relative to our SVG. We need",
            "  those, but React‚Äôs click handlers are based on DOM nodes, which don‚Äôt",
            "  correspond to",
            "  <code style=\"white-space: pre-wrap;\">(x, y)</code> coordinates. D3 looks",
            "  at real cursor position on screen.",
            "</p>",
            "<p>",
            "  All <strong>particle coordinates are in a Redux store</strong>. Each",
            "  particle also has a movement vector. The store holds some useful flags",
            "  and general parameters, as well. This lets us treat animation as data",
            "  transformations. I‚Äôll show you what that means.",
            "</p>",
            "<p>",
            "  We use <strong>actions to communicate user events</strong> like creating",
            "  particles, starting the animation, changing mouse position, and so on. On",
            "  each requestAnimationFrame, we",
            "  <strong>dispatch an ‚Äúadvance animation‚Äù action</strong>.",
            "</p>",
            "<p>",
            "  On each action, the <strong>reducer calculates a new state</strong> for",
            "  the whole app. This includes <strong>new particle positions</strong> for",
            "  each step of the animation.",
            "</p>",
            "<p>",
            "  When the store updates, <strong>React flushes changes</strong> via props",
            "  and because <strong>coordinates are state, the particles move</strong>.",
            "</p>",
            "<p>",
            "  The result is smooth animation. Just like the game loop example from",
            "  before.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "Some basic terminology",
          "lectureLines": [
            "<h2 id=\"some-basic-terminology\">Some basic terminology</h2>",
            "<p>",
            "  We‚Äôre about to throw around some terms. You‚Äôll understand what they mean",
            "  in detail after this chapter.",
            "</p>",
            "<p>Until then, here‚Äôs a quick glossary so you don‚Äôt feel lost:</p>",
            "<p>",
            "  <strong>The store, or the state</strong>, is Redux state. Held globally",
            "  and shared by all components. It‚Äôs like the App local state from earlier",
            "  chapters.",
            "</p>",
            "<p>",
            "  <strong>Actions</strong> are packets of information that tell us what",
            "  happened.",
            "</p>",
            "<p>",
            "  <strong>Reducers</strong> are functions that take the current state and",
            "  an action, and use that information to generate a new state.",
            "</p>",
            "<p>Got it? No worries. You will soon üòÉ</p>"
          ]
        },
        {
          "lectureTitle": "3 presentation components",
          "lectureLines": [
            "<h2 id=\"presentation-components\">3 presentation components</h2>",
            "<p>",
            "  We start with the presentation components because they‚Äôre the simplest.",
            "  To render a collection of particles, we need:",
            "</p>",
            "<ul>",
            "  <li>a stateless <code style=\"white-space: pre-wrap;\">Particle</code></li>",
            "  <li>",
            "    a stateless <code style=\"white-space: pre-wrap;\">Particles</code>",
            "  </li>",
            "  <li>a class-based <code style=\"white-space: pre-wrap;\">App</code></li>",
            "</ul>",
            "<p>",
            "  None of them contain state, but",
            "  <code style=\"white-space: pre-wrap;\">App</code> has to be a class-based",
            "  component so that we can use",
            "  <code style=\"white-space: pre-wrap;\">componentDidMount</code>. We need it",
            "  to attach D3 event listeners.",
            "</p>",
            "<h3 id=\"particle\">Particle</h3>",
            "<p>",
            "  The <code style=\"white-space: pre-wrap;\">Particle</code> component is a",
            "  circle. It looks like this:",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb144\"",
            "  data-caption=\"Particle component\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb144-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Particles/Particle.jsx</span></a>",
            "<a class=\"sourceLine\" id=\"cb144-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;react&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb144-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb144-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> Particle <span class=\"op\" style=\"color: #666666;\">=</span> (<span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y <span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"op\" style=\"color: #666666;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb144-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">&lt;</span>circle cx<span class=\"op\" style=\"color: #666666;\">={</span>x<span class=\"op\" style=\"color: #666666;\">}</span> cy<span class=\"op\" style=\"color: #666666;\">={</span>y<span class=\"op\" style=\"color: #666666;\">}</span> r<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;1.8&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb144-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb144-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb144-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> Particle<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  It takes <code style=\"white-space: pre-wrap;\">x</code> and",
            "  <code style=\"white-space: pre-wrap;\">y</code> coordinates and returns an",
            "  SVG circle.",
            "</p>",
            "<h3 id=\"svg-particles\">Particles</h3>",
            "<p>",
            "  The <code style=\"white-space: pre-wrap;\">Particles</code> component isn‚Äôt",
            "  much smarter ‚Äì it returns a list of circles wrapped in a grouping",
            "  element, like this:",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb145\"",
            "  data-caption=\"Particles list\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb145-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Particles/index.jsx</span></a>",
            "<a class=\"sourceLine\" id=\"cb145-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;react&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb145-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> Particle <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./Particle&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb145-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb145-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> Particles <span class=\"op\" style=\"color: #666666;\">=</span> (<span class=\"op\" style=\"color: #666666;\">{</span> particles <span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"op\" style=\"color: #666666;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb145-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">&lt;</span>g<span class=\"op\" style=\"color: #666666;\">&gt;{</span><span class=\"va\" style=\"color: #19177c;\">particles</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(particle <span class=\"op\" style=\"color: #666666;\">=&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb145-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>Particle key<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"va\" style=\"color: #19177c;\">particle</span>.<span class=\"at\" style=\"color: #7d9029;\">id</span><span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">{</span>...<span class=\"at\" style=\"color: #7d9029;\">particle</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb145-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    )<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb145-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  &lt;/g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb145-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb145-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb145-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> Particles<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  Walk through the array of particles, render a Particle component for",
            "  each. Declarative rendering that you‚Äôve seen before üòÉ",
            "</p>",
            "<p>",
            "  We can take an array of",
            "  <code style=\"white-space: pre-wrap;\">{id, x, y}</code> objects and render",
            "  SVG circles. Now comes our first fun component: the",
            "  <code style=\"white-space: pre-wrap;\">App</code>.",
            "</p>",
            "<h3 id=\"app\">App</h3>",
            "<p>",
            "  <code style=\"white-space: pre-wrap;\">App</code> takes care of rendering",
            "  the scene and attaching d3 event listeners. It gets actions via props and",
            "  ties them to mouse events. You can think of actions as callbacks that",
            "  work on the global data store directly. No need to pass them through many",
            "  levels of props.",
            "</p>",
            "<p>The rendering part looks like this:</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb146\"",
            "  data-caption=\"App component\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb146-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/index.jsx</span></a>",
            "<a class=\"sourceLine\" id=\"cb146-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb146-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"op\" style=\"color: #666666;\">{</span> Component <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;react&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb146-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">{</span> select <span class=\"im\">as</span> d3Select<span class=\"op\" style=\"color: #666666;\">,</span> mouse <span class=\"im\">as</span> d3Mouse<span class=\"op\" style=\"color: #666666;\">,</span> touches <span class=\"im\">as</span> d3Touches <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;d3&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb146-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb146-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> Particles <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./Particles&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb146-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> Footer <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./Footer&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb146-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> Header <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./Header&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb146-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb146-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> App <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> Component <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb146-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ..</span></a>",
            "<a class=\"sourceLine\" id=\"cb146-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb146-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb146-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>div onMouseDown<span class=\"op\" style=\"color: #666666;\">={</span>e <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">startTicker</span>()<span class=\"op\" style=\"color: #666666;\">}</span> style<span class=\"op\" style=\"color: #666666;\">={{</span><span class=\"dt\">overflow</span><span class=\"op\">:</span> <span class=\"st\">&#39;hidden&#39;</span><span class=\"op\">}}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb146-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">           <span class=\"op\" style=\"color: #666666;\">&lt;</span>Header /<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb146-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">           <span class=\"op\" style=\"color: #666666;\">&lt;</span>svg width<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">svgWidth</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb146-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                height<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">svgHeight</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb146-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                ref<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;svg&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb146-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                style<span class=\"op\" style=\"color: #666666;\">={{</span><span class=\"dt\">background</span><span class=\"op\">:</span> <span class=\"st\">&#39;rgba(124, 224, 249, .3)&#39;</span><span class=\"op\">}}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb146-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">               <span class=\"op\" style=\"color: #666666;\">&lt;</span>Particles particles<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">particles</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb146-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">           &lt;/svg<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb146-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">           <span class=\"op\" style=\"color: #666666;\">&lt;</span>Footer N<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"va\" style=\"color: #19177c;\">particles</span>.<span class=\"at\" style=\"color: #7d9029;\">length</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb146-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">       &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb146-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb146-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb146-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb146-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb146-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> App<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  There‚Äôs more going on, but the gist is that we return a",
            "  <code style=\"white-space: pre-wrap;\">&lt;div&gt;</code> with a",
            "  <code style=\"white-space: pre-wrap;\">Header</code>, a",
            "  <code style=\"white-space: pre-wrap;\">Footer</code>, and an",
            "  <code style=\"white-space: pre-wrap;\">&lt;svg&gt;</code>. Inside",
            "  <code style=\"white-space: pre-wrap;\">&lt;svg&gt;</code>, we use",
            "  <code style=\"white-space: pre-wrap;\">Particles</code> to render many",
            "  circles. The Header and Footer components are just some helpful text.",
            "</p>",
            "<p>",
            "  Notice that the core of our rendering function only says",
            "  <em>‚ÄúPut all Particles here, please‚Äù</em>. There‚Äôs nothing about what‚Äôs",
            "  moved, what‚Äôs new, or what‚Äôs no longer needed. We don‚Äôt have to worry",
            "  about that.",
            "</p>",
            "<p>",
            "  We get a list of coordinates and naively render some circles. React takes",
            "  care of the rest.",
            "</p>",
            "<p>",
            "  Oh, and we call",
            "  <code style=\"white-space: pre-wrap;\">startTicker()</code> when a user",
            "  clicks on our scene. No reason to have the clock running",
            "  <em>before</em> any particles exist.",
            "</p>",
            "<h4 id=\"d3-event-listeners\">D3 event listeners</h4>",
            "<p>",
            "  To let users generate particles, we have to wire up some functions in",
            "  <code style=\"white-space: pre-wrap;\">componentDidMount</code>. That looks",
            "  like this:",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb147\"",
            "  data-caption=\"Event listeners\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb147-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/index.jsx</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb147-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> App <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> Component <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    svgWrap <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">createRef</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb147-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">componentDidMount</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> svg <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">d3Select</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">svgWrap</span>.<span class=\"at\" style=\"color: #7d9029;\">current</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb147-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">on</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;mousedown&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">updateMousePos</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">startParticles</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">on</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;touchstart&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">updateTouchPos</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">startParticles</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">on</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;mousemove&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">updateMousePos</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">on</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;touchmove&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">updateTouchPos</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">on</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;mouseup&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">stopParticles</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">on</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;touchend&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">stopParticles</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">on</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;mouseleave&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">stopParticles</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb147-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">updateMousePos</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> [x<span class=\"op\" style=\"color: #666666;\">,</span> y] <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">d3Mouse</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">svgWrap</span>.<span class=\"at\" style=\"color: #7d9029;\">current</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-36\" title=\"36\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">updateMousePos</span>(x<span class=\"op\" style=\"color: #666666;\">,</span> y)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-37\" title=\"37\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-38\" title=\"38\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb147-39\" title=\"39\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">updateTouchPos</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-40\" title=\"40\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> [x<span class=\"op\" style=\"color: #666666;\">,</span> y] <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">d3Touches</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">svgWrap</span>.<span class=\"at\" style=\"color: #7d9029;\">current</span>)[<span class=\"dv\" style=\"color: #40a070;\">0</span>]<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-41\" title=\"41\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">updateMousePos</span>(x<span class=\"op\" style=\"color: #666666;\">,</span> y)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-42\" title=\"42\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>There are several events we take into account:</p>",
            "<ul>",
            "  <li>",
            "    <code style=\"white-space: pre-wrap;\">mousedown</code> and",
            "    <code style=\"white-space: pre-wrap;\">touchstart</code> turn on particle",
            "    generation",
            "  </li>",
            "  <li>",
            "    <code style=\"white-space: pre-wrap;\">mousemove</code> and",
            "    <code style=\"white-space: pre-wrap;\">touchmove</code> update the mouse",
            "    location",
            "  </li>",
            "  <li>",
            "    <code style=\"white-space: pre-wrap;\">mouseup</code>,",
            "    <code style=\"white-space: pre-wrap;\">touchend</code>, and",
            "    <code style=\"white-space: pre-wrap;\">mouseleave</code> turn off",
            "    particle generation",
            "  </li>",
            "</ul>",
            "<p>",
            "  Inside our event callbacks, we use",
            "  <code style=\"white-space: pre-wrap;\">updateMousePos</code> and",
            "  <code style=\"white-space: pre-wrap;\">updateTouchPos</code> to update",
            "  Redux state. They use",
            "  <code style=\"white-space: pre-wrap;\">d3Mouse</code> and",
            "  <code style=\"white-space: pre-wrap;\">d3Touches</code> to get",
            "  <code style=\"white-space: pre-wrap;\">(x, y)</code> coordinates for new",
            "  particles relative to our SVG element and call Redux actions passed-in",
            "  via props. The particle generation step uses this data as each particle‚Äôs",
            "  initial position.",
            "</p>",
            "<p>",
            "  You‚Äôll see that in the next section. I agree, it smells kind of",
            "  convoluted, but it‚Äôs for good reason: We need a reference to a mouse",
            "  event to get the cursor position, and we want to decouple particle",
            "  generation from event handling.",
            "</p>",
            "<p>",
            "  Remember, React isn‚Äôt smart enough to figure out mouse position relative",
            "  to our drawing area. React knows that we clicked a DOM node.",
            "  <a href=\"https://github.com/d3/d3-selection/blob/master/src/mouse.js\"",
            "    >D3 does some magic</a",
            "  >",
            "  to find exact coordinates.",
            "</p>",
            "<p>",
            "  Touch events return lists of coordinates. One for each finger. We use",
            "  only the first coordinate because shooting particles out of multiple",
            "  fingers would make this example too hard.",
            "</p>",
            "<p>",
            "  That‚Äôs it for rendering and user events.",
            "  <a",
            "    href=\"https://github.com/Swizec/react-particles-experiment/blob/svg-based-branch/src/components/index.jsx\"",
            "    >107 lines of code</a",
            "  >.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "6 Redux Actions",
          "lectureLines": [
            "<h2 id=\"redux-actions\">6 Redux Actions</h2>",
            "<p>",
            "  Redux actions are a fancy way of saying <em>‚ÄúYo, a thing happened!‚Äù</em>.",
            "  They‚Äôre functions you call to get structured metadata that‚Äôs passed into",
            "  Redux reducers.",
            "</p>",
            "<p>Our particle generator uses 6 actions:</p>",
            "<ol type=\"1\">",
            "  <li>",
            "    <code style=\"white-space: pre-wrap;\">tickTime</code> steps our",
            "    animation to the next frame",
            "  </li>",
            "  <li>",
            "    <code style=\"white-space: pre-wrap;\">tickerStarted</code> fires when",
            "    everything begins",
            "  </li>",
            "  <li>",
            "    <code style=\"white-space: pre-wrap;\">startParticles</code> fires when",
            "    we hold down the mouse",
            "  </li>",
            "  <li>",
            "    <code style=\"white-space: pre-wrap;\">stopParticles</code> fires when we",
            "    release",
            "  </li>",
            "  <li>",
            "    <code style=\"white-space: pre-wrap;\">updateMousePos</code> keeps mouse",
            "    position saved in state",
            "  </li>",
            "  <li>",
            "    <code style=\"white-space: pre-wrap;\">resizeScreen</code> saves new",
            "    screen size so we know where edges lie",
            "  </li>",
            "</ol>",
            "<p>Our actions look something like this:</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb148\"",
            "  data-caption=\"A Redux action\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb148-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span> <span class=\"at\" style=\"color: #7d9029;\">updateMousePos</span>(x<span class=\"op\" style=\"color: #666666;\">,</span> y) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb148-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb148-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">type</span><span class=\"op\" style=\"color: #666666;\">:</span> UPDATE_MOUSE_POS<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb148-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> x<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb148-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> y</a>",
            "<a class=\"sourceLine\" id=\"cb148-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb148-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  A function that accepts params and returns an object with a type and meta",
            "  data. Technically this is an action generator and the object is an",
            "  action, but that distinction has long since been lost in the community.",
            "</p>",
            "<p>",
            "  Actions <em>must</em> have a",
            "  <code style=\"white-space: pre-wrap;\">type</code>. Reducers use the type",
            "  to decide what to do. The rest is optional.",
            "</p>",
            "<p>",
            "  You can see",
            "  <a",
            "    href=\"https://github.com/Swizec/react-particles-experiment/blob/master/src/actions/index.js\"",
            "    >all the actions on GitHub</a",
            "  >.",
            "</p>",
            "<p>",
            "  I find this to be the least elegant part of Redux. Makes sense in large",
            "  applications, but way too convoluted for small apps. Simpler alternatives",
            "  exist like doing it yourself with React Context.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "1 Container component",
          "lectureLines": [
            "<h2 id=\"container-component\">1 Container component</h2>",
            "<p>Containers are React components that talk to the Redux data store.</p>",
            "<p>",
            "  You can think of presentation components as templates that render stuff",
            "  and containers as smart-ish views that talk to controllers. Or maybe",
            "  they‚Äôre the controllers.",
            "</p>",
            "<p>",
            "  Sometimes it‚Äôs hard to tell. In theory presentation components render and",
            "  don‚Äôt think, containers communicate and don‚Äôt render. Redux reducers and",
            "  actions do the thinking.",
            "</p>",
            "<p>I‚Äôm not sure this separation is necessary in small projects.</p>",
            "<p>",
            "  Maintaining it can be awkward and sometimes cumbersome in mid-size",
            "  projects, but I‚Äôm sure it makes total sense at Facebook scale. We‚Äôre",
            "  using it in this project because the community has decided that‚Äôs the way",
            "  to go.",
            "</p>",
            "<p>",
            "  We use the idiomatic",
            "  <code style=\"white-space: pre-wrap;\">connect()</code> approach. Like",
            "  this:",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb149\"",
            "  data-caption=\"Main container component\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb149-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/containers/AppContainer.jsx</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb149-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">{</span> connect <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;react-redux&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"op\" style=\"color: #666666;\">{</span> Component <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;react&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"im\">as</span> d3 <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;d3&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb149-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> App <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;../components&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    tickTime<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    tickerStarted<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    startParticles<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    stopParticles<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    updateMousePos</a>",
            "<a class=\"sourceLine\" id=\"cb149-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;../actions&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb149-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> AppContainer <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> Component <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    startTicker <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> isTickerStarted <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb149-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (<span class=\"op\" style=\"color: #666666;\">!</span>isTickerStarted) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"va\" style=\"color: #19177c;\">console</span>.<span class=\"at\" style=\"color: #7d9029;\">log</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;Starting ticker&quot;</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">tickerStarted</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">timer</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">tickTime</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb149-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> svgWidth<span class=\"op\" style=\"color: #666666;\">,</span> svgHeight<span class=\"op\" style=\"color: #666666;\">,</span> particles <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb149-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb149-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>App</a>",
            "<a class=\"sourceLine\" id=\"cb149-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                svgWidth<span class=\"op\" style=\"color: #666666;\">={</span>svgWidth<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                svgHeight<span class=\"op\" style=\"color: #666666;\">={</span>svgHeight<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                particles<span class=\"op\" style=\"color: #666666;\">={</span>particles<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                startTicker<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">startTicker</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-36\" title=\"36\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                startParticles<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">startParticles</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-37\" title=\"37\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                stopParticles<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">stopParticles</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-38\" title=\"38\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                updateMousePos<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">updateMousePos</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-39\" title=\"39\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb149-40\" title=\"40\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-41\" title=\"41\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-42\" title=\"42\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-43\" title=\"43\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb149-44\" title=\"44\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> mapStateToProps <span class=\"op\" style=\"color: #666666;\">=</span> (<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-45\" title=\"45\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    generateParticles<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-46\" title=\"46\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    mousePos<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-47\" title=\"47\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    particlesPerTick<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-48\" title=\"48\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    isTickerStarted<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-49\" title=\"49\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    svgWidth<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-50\" title=\"50\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    svgHeight<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-51\" title=\"51\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    particles</a>",
            "<a class=\"sourceLine\" id=\"cb149-52\" title=\"52\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"op\" style=\"color: #666666;\">=&gt;</span> (<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-53\" title=\"53\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    generateParticles<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-54\" title=\"54\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    mousePos<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-55\" title=\"55\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    particlesPerTick<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-56\" title=\"56\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    isTickerStarted<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-57\" title=\"57\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    svgWidth<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-58\" title=\"58\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    svgHeight<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-59\" title=\"59\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    particles</a>",
            "<a class=\"sourceLine\" id=\"cb149-60\" title=\"60\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-61\" title=\"61\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb149-62\" title=\"62\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> mapDispatchToProps <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-63\" title=\"63\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    tickTime<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-64\" title=\"64\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    tickerStarted<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-65\" title=\"65\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    startParticles<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-66\" title=\"66\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    stopParticles<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-67\" title=\"67\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    updateMousePos</a>",
            "<a class=\"sourceLine\" id=\"cb149-68\" title=\"68\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-69\" title=\"69\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb149-70\" title=\"70\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> <span class=\"at\" style=\"color: #7d9029;\">connect</span>(</a>",
            "<a class=\"sourceLine\" id=\"cb149-71\" title=\"71\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    mapStateToProps<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-72\" title=\"72\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    mapDispatchToProps</a>",
            "<a class=\"sourceLine\" id=\"cb149-73\" title=\"73\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">)(AppContainer)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>I love the smell of boilerplate in the morning. üëÉ</p>",
            "<p>",
            "  We import dependencies and define",
            "  <code style=\"white-space: pre-wrap;\">AppContainer</code> as a class-based",
            "  React <code style=\"white-space: pre-wrap;\">Component</code> so we have",
            "  somewhere to put the D3 interval. The render method outputs our",
            "  <code style=\"white-space: pre-wrap;\">&lt;App&gt;</code> component using a",
            "  bunch of props to pass relevant actions and values.",
            "</p>",
            "<p>",
            "  The <code style=\"white-space: pre-wrap;\">startTicker</code> method is a",
            "  callback we pass into App. It runs on first click and starts the D3",
            "  interval if necessary. Each interval iteration triggers the",
            "  <code style=\"white-space: pre-wrap;\">tickTime</code> action.",
            "</p>",
            "<h3 id=\"appcontainer-talks-to-the-store\">",
            "  AppContainer talks to the store",
            "</h3>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb150\"",
            "  data-caption=\"The Reduxy part\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb150-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/containers/AppContainer.jsx</span></a>",
            "<a class=\"sourceLine\" id=\"cb150-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb150-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> mapStateToProps <span class=\"op\" style=\"color: #666666;\">=</span> (<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb150-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    generateParticles<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb150-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    mousePos<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb150-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    particlesPerTick<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb150-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    isTickerStarted<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb150-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    svgWidth<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb150-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    svgHeight<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb150-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    particles</a>",
            "<a class=\"sourceLine\" id=\"cb150-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"op\" style=\"color: #666666;\">=&gt;</span> (<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb150-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    generateParticles<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb150-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    mousePos<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb150-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    particlesPerTick<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb150-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    isTickerStarted<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb150-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    svgWidth<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb150-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    svgHeight<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb150-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    particles</a>",
            "<a class=\"sourceLine\" id=\"cb150-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb150-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb150-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> mapDispatchToProps <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb150-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    tickTime<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb150-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    tickerStarted<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb150-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    startParticles<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb150-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    stopParticles<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb150-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    updateMousePos</a>",
            "<a class=\"sourceLine\" id=\"cb150-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb150-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb150-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> <span class=\"at\" style=\"color: #7d9029;\">connect</span>(</a>",
            "<a class=\"sourceLine\" id=\"cb150-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    mapStateToProps<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb150-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    mapDispatchToProps</a>",
            "<a class=\"sourceLine\" id=\"cb150-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">)(AppContainer)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  We‚Äôre using the",
            "  <code style=\"white-space: pre-wrap;\">connect()</code> idiom to connect",
            "  our AppContainer to the Redux store. It‚Äôs a higher order component that",
            "  handles all the details of connection to the store and staying in sync.",
            "</p>",
            "<p>",
            "  We pass two arguments into connect. This returns a higher order component",
            "  function, which we wrap around AppContainer.",
            "</p>",
            "<p>",
            "  The first argument is <strong>mapStateToProps</strong>. It accepts",
            "  current state as an argument, which we immediately deconstruct into",
            "  interesting parts, and returns a key:value dictionary. Each key becomes a",
            "  component prop with the corresponding value.",
            "</p>",
            "<p>",
            "  You‚Äôd often use this opportunity to run ad-hoc calculations, or combine",
            "  parts of state into single props. No need for that in our case, just pass",
            "  it through.",
            "</p>",
            "<h4 id=\"dispatching-actions\">Dispatching actions</h4>",
            "<p>",
            "  <strong>mapDispatchToProps</strong> is a dictionary that maps props to",
            "  actions. Each prop turns into an action generator wrapped in a",
            "  <code style=\"white-space: pre-wrap;\">store.dispatch()</code> call. To",
            "  fire an action inside a component we just call the function in that prop.",
            "</p>",
            "<p>",
            "  But Swiz, we‚Äôre not writing key:value dictionaries, we‚Äôre just listing",
            "  stuff!",
            "</p>",
            "<p>",
            "  That‚Äôs a syntax supported in most modern JavaScript environments, called",
            "  object literal property value shorthand. Our build system expands that",
            "  <code style=\"white-space: pre-wrap;\">mapDispatchToProps</code> dictionary",
            "  into something like this:",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb151\"",
            "  data-caption=\"Compiler expands our dictionaries\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb151-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> mapDispatchToProps <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb151-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">tickTime</span><span class=\"op\" style=\"color: #666666;\">:</span> tickTime<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb151-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">tickerStarted</span><span class=\"op\" style=\"color: #666666;\">:</span> tickerStarted<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb151-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">startParticles</span><span class=\"op\" style=\"color: #666666;\">:</span> startParticles<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb151-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">stopParticles</span><span class=\"op\" style=\"color: #666666;\">:</span> stopParticles<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb151-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">updateMousePos</span><span class=\"op\" style=\"color: #666666;\">:</span> updateMousePos</a>",
            "<a class=\"sourceLine\" id=\"cb151-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">};</span></a></code></pre>",
            "</div>",
            "<p>",
            "  And you thought previous code had a lot of boilerplate ‚Ä¶ imagine if this",
            "  was how you‚Äôd do it in real life üòõ",
            "</p>",
            "<p>",
            "  <code style=\"white-space: pre-wrap;\">connect</code> wraps each of these",
            "  action generators in",
            "  <code style=\"white-space: pre-wrap;\">store.dispatch()</code> calls. You",
            "  can pass the resulting function into any component and fire actions by",
            "  calling that method.",
            "</p>",
            "<h4 id=\"the-redux-loop\">The Redux loop</h4>",
            "<p>To make a change therefore, a Redux loop unfolds:</p>",
            "<ol type=\"1\">",
            "  <li>Call our action triggerer, passed in through props</li>",
            "  <li>",
            "    Calls the generator, gets a",
            "    <code style=\"white-space: pre-wrap;\">{type: ...}</code> object",
            "  </li>",
            "  <li>Dispatches that object on the store</li>",
            "  <li>Redux calls the reducer</li>",
            "  <li>Reducer creates new state</li>",
            "  <li>",
            "    Store updates triggering React‚Äôs engine to flow updates through the",
            "    props",
            "  </li>",
            "</ol>",
            "<p>So that‚Äôs the container. 71 lines of boilerplate pretty code.</p>",
            "<p>",
            "  The remaining piece of the puzzle is our reducer. Two reducers in fact.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "2 Redux Reducers",
          "lectureLines": [
            "<h2 id=\"redux-reducers\">2 Redux Reducers</h2>",
            "<p>",
            "  With the actions firing and the drawing done, it‚Äôs time to look at the",
            "  business logic of our particle generator. We‚Äôll get it done in just 33",
            "  lines of code and some change.",
            "</p>",
            "<p>",
            "  Well, it‚Äôs a bunch of change. But the 33 lines that make up",
            "  <code style=\"white-space: pre-wrap;\">CREATE_PARTICLES</code> and",
            "  <code style=\"white-space: pre-wrap;\">TIME_TICK</code> changes are the",
            "  most interesting. The rest just flips various flags.",
            "</p>",
            "<p>",
            "  All our logic and physics goes in the reducer.",
            "  <a href=\"https://redux.js.org/docs/basics/Reducers.html\"",
            "    >Dan Abramov says</a",
            "  >",
            "  to think of reducers as the function you‚Äôd put in",
            "  <code style=\"white-space: pre-wrap;\">.reduce()</code>. Given a state and",
            "  a set of changes, how do I create the new state?",
            "</p>",
            "<p>A ‚Äúsum numbers‚Äù example would look like this:</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb152\"",
            "  data-caption=\"Reducer concept\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb152-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> sum <span class=\"op\" style=\"color: #666666;\">=</span> [<span class=\"dv\" style=\"color: #40a070;\">1</span><span class=\"op\" style=\"color: #666666;\">,</span><span class=\"dv\" style=\"color: #40a070;\">2</span><span class=\"op\" style=\"color: #666666;\">,</span><span class=\"dv\" style=\"color: #40a070;\">3</span><span class=\"op\" style=\"color: #666666;\">,</span><span class=\"dv\" style=\"color: #40a070;\">4</span>].<span class=\"at\" style=\"color: #7d9029;\">reduce</span>((sum<span class=\"op\" style=\"color: #666666;\">,</span> n) <span class=\"op\" style=\"color: #666666;\">=&gt;</span> sum<span class=\"op\" style=\"color: #666666;\">+</span>n<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">0</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>For each number, take the previous sum and add the number.</p>",
            "<p>",
            "  Our particle generator is a more advanced version of the same concept:",
            "  Takes current application state, incorporates an action, and returns new",
            "  application state.",
            "</p>",
            "<p>Start with a default state and some D3 random number helpers.</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb153\"",
            "  data-caption=\"Default state and constants\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb153-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">{</span> randomNormal <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;d3&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb153-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb153-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> Gravity <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"fl\" style=\"color: #40a070;\">0.5</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb153-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    randNormal <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">randomNormal</span>(<span class=\"fl\" style=\"color: #40a070;\">0.3</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">2</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb153-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    randNormal2 <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">randomNormal</span>(<span class=\"fl\" style=\"color: #40a070;\">0.5</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"fl\" style=\"color: #40a070;\">1.</span><span class=\"op\" style=\"color: #666666;\">:</span>sunglasses<span class=\"op\" style=\"color: #666666;\">:;</span></a>",
            "<a class=\"sourceLine\" id=\"cb153-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb153-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> initialState <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb153-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">particles</span><span class=\"op\" style=\"color: #666666;\">:</span> []<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb153-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">particleIndex</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb153-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">particlesPerTick</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">30</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb153-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">svgWidth</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">800</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb153-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">svgHeight</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">600</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb153-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">isTickerStarted</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">false</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb153-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">generateParticles</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">false</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb153-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">mousePos</span><span class=\"op\" style=\"color: #666666;\">:</span> [<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">null</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">null</span>]<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb153-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">lastFrameTime</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">null</span></a>",
            "<a class=\"sourceLine\" id=\"cb153-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">};</span></a></code></pre>",
            "</div>",
            "<p>",
            "  Using D3‚Äôs",
            "  <code style=\"white-space: pre-wrap;\">randomNormal</code> random number",
            "  generator creates a better random distribution than using JavaScript‚Äôs",
            "  own <code style=\"white-space: pre-wrap;\">Math.random</code>. The rest is",
            "  a bunch of default state üëá",
            "</p>",
            "<ul>",
            "  <li>",
            "    <code style=\"white-space: pre-wrap;\">particles</code> holds an array of",
            "    particles to draw",
            "  </li>",
            "  <li>",
            "    <code style=\"white-space: pre-wrap;\">particleIndex</code> defines the",
            "    ID of the next generated particle",
            "  </li>",
            "  <li>",
            "    <code style=\"white-space: pre-wrap;\">particlesPerTick</code> defines",
            "    how many particles we create on each requestAnimationFrame",
            "  </li>",
            "  <li>",
            "    <code style=\"white-space: pre-wrap;\">svgWidth</code> is the width of",
            "    our drawing area",
            "  </li>",
            "  <li>",
            "    <code style=\"white-space: pre-wrap;\">svgHeigh</code> is the height",
            "  </li>",
            "  <li>",
            "    <code style=\"white-space: pre-wrap;\">isTickerStarted</code> specifies",
            "    whether the animation is running",
            "  </li>",
            "  <li>",
            "    <code style=\"white-space: pre-wrap;\">generateParticles</code> turns",
            "    particle generation on and off",
            "  </li>",
            "  <li>",
            "    <code style=\"white-space: pre-wrap;\">mousePos</code> defines the",
            "    origination point for new particles",
            "  </li>",
            "  <li>",
            "    <code style=\"white-space: pre-wrap;\">lastFrameTime</code> helps us",
            "    compensate for dropped frames",
            "  </li>",
            "</ul>",
            "<p>",
            "  To manipulate all this state, we use two reducers and manually combine",
            "  them. Redux does come with a",
            "  <code style=\"white-space: pre-wrap;\">combineReducers</code> function, but",
            "  I wanted to keep our state flat and that doesn‚Äôt fit",
            "  <code style=\"white-space: pre-wrap;\">combineReducers</code>‚Äôs view of how",
            "  life should work.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb154\"",
            "  data-caption=\"Combining two reducers\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb154-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/reducers/index.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb154-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb154-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Manually combineReducers</span></a>",
            "<a class=\"sourceLine\" id=\"cb154-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(state <span class=\"op\" style=\"color: #666666;\">=</span> initialState<span class=\"op\" style=\"color: #666666;\">,</span> action) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb154-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb154-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        ...<span class=\"at\" style=\"color: #7d9029;\">appReducer</span>(state<span class=\"op\" style=\"color: #666666;\">,</span> action)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb154-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        ...<span class=\"at\" style=\"color: #7d9029;\">particlesReducer</span>(state<span class=\"op\" style=\"color: #666666;\">,</span> action)</a>",
            "<a class=\"sourceLine\" id=\"cb154-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb154-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  This is our reducer. It takes current",
            "  <code style=\"white-space: pre-wrap;\">state</code>, sets it to",
            "  <code style=\"white-space: pre-wrap;\">initialState</code> if undefined,",
            "  and an action. To create new state, it spreads the object returned from",
            "  <code style=\"white-space: pre-wrap;\">appReducer</code> and from",
            "  <code style=\"white-space: pre-wrap;\">particlesReducer</code> into a new",
            "  object. You can combine as many reducers as you want in this way.",
            "</p>",
            "<p>",
            "  The usual",
            "  <code style=\"white-space: pre-wrap;\">combineReducers</code> approach",
            "  leads to nested hierarchical state. That often works great, but I wanted",
            "  to keep our state flat.",
            "</p>",
            "<p>",
            "  Lesson here is that there are no rules. You can make your reducers",
            "  whatever you want. Combine them whichever way fits your use case. As long",
            "  as you take a state object and an action and return a new state object.",
            "</p>",
            "<p>",
            "  <code style=\"white-space: pre-wrap;\">appReducer</code> will handle the",
            "  constants and booleans and drive the metadata for our animation.",
            "  <code style=\"white-space: pre-wrap;\">particlesReducer</code> will do the",
            "  hard work of generating and animating particles.",
            "</p>",
            "<h3 id=\"driving-the-basics-with-appreducer\">",
            "  Driving the basics with appReducer",
            "</h3>",
            "<p>",
            "  Our <code style=\"white-space: pre-wrap;\">appReducer</code> handles the",
            "  boring actions with a big switch statement. These are common in the Redux",
            "  world. They help us decide what to do based on action type.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb155\"",
            "  data-caption=\"appReducer big switch\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb155-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/reducers/index.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb155-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span> <span class=\"at\" style=\"color: #7d9029;\">appReducer</span>(state<span class=\"op\" style=\"color: #666666;\">,</span> action) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb155-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">switch</span> (<span class=\"va\" style=\"color: #19177c;\">action</span>.<span class=\"at\" style=\"color: #7d9029;\">type</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb155-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">case</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;TICKER_STARTED&quot;</span><span class=\"op\" style=\"color: #666666;\">:</span></a>",
            "<a class=\"sourceLine\" id=\"cb155-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"va\" style=\"color: #19177c;\">Object</span>.<span class=\"at\" style=\"color: #7d9029;\">assign</span>(<span class=\"op\" style=\"color: #666666;\">{},</span> state<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb155-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">isTickerStarted</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">true</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb155-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">lastFrameTime</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">new</span> <span class=\"at\" style=\"color: #7d9029;\">Date</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb155-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb155-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">case</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;START_PARTICLES&quot;</span><span class=\"op\" style=\"color: #666666;\">:</span></a>",
            "<a class=\"sourceLine\" id=\"cb155-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"va\" style=\"color: #19177c;\">Object</span>.<span class=\"at\" style=\"color: #7d9029;\">assign</span>(<span class=\"op\" style=\"color: #666666;\">{},</span> state<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb155-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">generateParticles</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">true</span></a>",
            "<a class=\"sourceLine\" id=\"cb155-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb155-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">case</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;STOP_PARTICLES&quot;</span><span class=\"op\" style=\"color: #666666;\">:</span></a>",
            "<a class=\"sourceLine\" id=\"cb155-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"va\" style=\"color: #19177c;\">Object</span>.<span class=\"at\" style=\"color: #7d9029;\">assign</span>(<span class=\"op\" style=\"color: #666666;\">{},</span> state<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb155-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">generateParticles</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">false</span></a>",
            "<a class=\"sourceLine\" id=\"cb155-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb155-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">case</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;UPDATE_MOUSE_POS&quot;</span><span class=\"op\" style=\"color: #666666;\">:</span></a>",
            "<a class=\"sourceLine\" id=\"cb155-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"va\" style=\"color: #19177c;\">Object</span>.<span class=\"at\" style=\"color: #7d9029;\">assign</span>(<span class=\"op\" style=\"color: #666666;\">{},</span> state<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb155-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">mousePos</span><span class=\"op\" style=\"color: #666666;\">:</span> [<span class=\"va\" style=\"color: #19177c;\">action</span>.<span class=\"at\" style=\"color: #7d9029;\">x</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">action</span>.<span class=\"at\" style=\"color: #7d9029;\">y</span>]</a>",
            "<a class=\"sourceLine\" id=\"cb155-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb155-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">case</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;RESIZE_SCREEN&quot;</span><span class=\"op\" style=\"color: #666666;\">:</span></a>",
            "<a class=\"sourceLine\" id=\"cb155-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"va\" style=\"color: #19177c;\">Object</span>.<span class=\"at\" style=\"color: #7d9029;\">assign</span>(<span class=\"op\" style=\"color: #666666;\">{},</span> state<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb155-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">svgWidth</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">action</span>.<span class=\"at\" style=\"color: #7d9029;\">width</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb155-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">svgHeight</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">action</span>.<span class=\"at\" style=\"color: #7d9029;\">height</span></a>",
            "<a class=\"sourceLine\" id=\"cb155-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb155-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">default</span><span class=\"op\" style=\"color: #666666;\">:</span></a>",
            "<a class=\"sourceLine\" id=\"cb155-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> state<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb155-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb155-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>Gotta love that boilerplate üòõ</p>",
            "<p>",
            "  Even though we‚Äôre only changing values of boolean flags and two-digit",
            "  arrays, <em>we have to create a new state</em>. Redux relies on",
            "  application state being immutable.",
            "</p>",
            "<p>",
            "  Well, JavaScript doesn‚Äôt have real immutability. We pretend and make sure",
            "  to never change state without making a new copy first. There are",
            "  libraries that give you proper immutable data structures, but that‚Äôs a",
            "  whole different course.",
            "</p>",
            "<p>",
            "  We use",
            "  <code style=\"white-space: pre-wrap;\">Object.assign({}, ...</code> to",
            "  create a new empty object, fill it with the current state, then overwrite",
            "  specific values with new ones. This is fast enough even with large state",
            "  trees thanks to modern JavaScript engines.",
            "</p>",
            "<p>",
            "  Note that when a reducer doesn‚Äôt recognize an action, it has to return",
            "  the same state it received. Otherwise you end up wiping state. üòÖ",
            "</p>",
            "<p>",
            "  So that‚Äôs the boilerplatey state updates. Manages starting and stopping",
            "  the animation, flipping the particle generation switch, and resizing our",
            "  viewport.",
            "</p>",
            "<p>",
            "  The fun stuff happens in",
            "  <code style=\"white-space: pre-wrap;\">particleReducer</code>.",
            "</p>",
            "<h3 id=\"driving-particles-with-particlereducer\">",
            "  Driving particles with particleReducer",
            "</h3>",
            "<p>",
            "  Our particles live in an array. Each particle has an id, a position, and",
            "  a vector. That tells us where to draw the particle and how to move it to",
            "  its future position.",
            "</p>",
            "<p>On each tick of the animation we have to:</p>",
            "<ol type=\"1\">",
            "  <li>Generate new particles</li>",
            "  <li>Remove particles outside the viewport</li>",
            "  <li>Move every particle by its vector</li>",
            "</ol>",
            "<p>We can do all that in one big reducer, like this:</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb156\"",
            "  data-caption=\"The particles logic\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb156-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/reducers/index.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span> <span class=\"at\" style=\"color: #7d9029;\">particlesReducer</span>(state<span class=\"op\" style=\"color: #666666;\">,</span> action) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">switch</span> (<span class=\"va\" style=\"color: #19177c;\">action</span>.<span class=\"at\" style=\"color: #7d9029;\">type</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">case</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;TIME_TICK&quot;</span><span class=\"op\" style=\"color: #666666;\">:</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    svgWidth<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    svgHeight<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    lastFrameTime<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    generateParticles<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    particlesPerTick<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    particleIndex<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    mousePos</a>",
            "<a class=\"sourceLine\" id=\"cb156-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> state<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                newFrameTime <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">new</span> <span class=\"at\" style=\"color: #7d9029;\">Date</span>()<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                multiplier <span class=\"op\" style=\"color: #666666;\">=</span> (newFrameTime <span class=\"op\" style=\"color: #666666;\">-</span> lastFrameTime) / (<span class=\"dv\" style=\"color: #40a070;\">1000</span> / <span class=\"dv\" style=\"color: #40a070;\">60</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                newParticles <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"va\" style=\"color: #19177c;\">particles</span>.<span class=\"at\" style=\"color: #7d9029;\">slice</span>(<span class=\"dv\" style=\"color: #40a070;\">0</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb156-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (generateParticles) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">for</span> (<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> i <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">;</span> i <span class=\"op\" style=\"color: #666666;\">&lt;</span> particlesPerTick<span class=\"op\" style=\"color: #666666;\">;</span> i<span class=\"op\" style=\"color: #666666;\">++</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> particle <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        <span class=\"dt\" style=\"color: #902000;\">id</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">particleIndex</span> <span class=\"op\" style=\"color: #666666;\">+</span> i<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> mousePos[<span class=\"dv\" style=\"color: #40a070;\">0</span>]<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> mousePos[<span class=\"dv\" style=\"color: #40a070;\">1</span>]</a>",
            "<a class=\"sourceLine\" id=\"cb156-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb156-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"va\" style=\"color: #19177c;\">particle</span>.<span class=\"at\" style=\"color: #7d9029;\">vector</span> <span class=\"op\" style=\"color: #666666;\">=</span> [</a>",
            "<a class=\"sourceLine\" id=\"cb156-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        <span class=\"va\" style=\"color: #19177c;\">particle</span>.<span class=\"at\" style=\"color: #7d9029;\">id</span> <span class=\"op\" style=\"color: #666666;\">%</span> <span class=\"dv\" style=\"color: #40a070;\">2</span> <span class=\"op\" style=\"color: #666666;\">?</span> <span class=\"op\" style=\"color: #666666;\">-</span><span class=\"at\" style=\"color: #7d9029;\">randNormal</span>() : <span class=\"at\" style=\"color: #7d9029;\">randNormal</span>()<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        <span class=\"op\" style=\"color: #666666;\">-</span><span class=\"at\" style=\"color: #7d9029;\">randNormal2</span>() <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"fl\" style=\"color: #40a070;\">3.3</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    ]<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb156-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"va\" style=\"color: #19177c;\">newParticles</span>.<span class=\"at\" style=\"color: #7d9029;\">unshift</span>(particle)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb156-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                particleIndex <span class=\"op\" style=\"color: #666666;\">=</span> particleIndex <span class=\"op\" style=\"color: #666666;\">+</span> particlesPerTick <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"dv\" style=\"color: #40a070;\">1</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-36\" title=\"36\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb156-37\" title=\"37\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> movedParticles <span class=\"op\" style=\"color: #666666;\">=</span> newParticles</a>",
            "<a class=\"sourceLine\" id=\"cb156-38\" title=\"38\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                .<span class=\"at\" style=\"color: #7d9029;\">filter</span>(p <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-39\" title=\"39\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">!</span>(<span class=\"va\" style=\"color: #19177c;\">p</span>.<span class=\"at\" style=\"color: #7d9029;\">y</span> <span class=\"op\" style=\"color: #666666;\">&gt;</span> svgHeight <span class=\"op\" style=\"color: #666666;\">||</span> <span class=\"va\" style=\"color: #19177c;\">p</span>.<span class=\"at\" style=\"color: #7d9029;\">x</span> <span class=\"op\" style=\"color: #666666;\">&lt;</span> <span class=\"dv\" style=\"color: #40a070;\">0</span> <span class=\"op\" style=\"color: #666666;\">||</span> <span class=\"va\" style=\"color: #19177c;\">p</span>.<span class=\"at\" style=\"color: #7d9029;\">x</span> <span class=\"op\" style=\"color: #666666;\">&gt;</span> svgWidth)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-40\" title=\"40\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">}</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb156-41\" title=\"41\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                .<span class=\"at\" style=\"color: #7d9029;\">map</span>(p <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-42\" title=\"42\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> [vx<span class=\"op\" style=\"color: #666666;\">,</span> vy] <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">p</span>.<span class=\"at\" style=\"color: #7d9029;\">vector</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-43\" title=\"43\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"va\" style=\"color: #19177c;\">p</span>.<span class=\"at\" style=\"color: #7d9029;\">x</span> <span class=\"op\" style=\"color: #666666;\">+=</span> vx <span class=\"op\" style=\"color: #666666;\">*</span> multiplier<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-44\" title=\"44\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"va\" style=\"color: #19177c;\">p</span>.<span class=\"at\" style=\"color: #7d9029;\">y</span> <span class=\"op\" style=\"color: #666666;\">+=</span> vy <span class=\"op\" style=\"color: #666666;\">*</span> multiplier<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-45\" title=\"45\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"va\" style=\"color: #19177c;\">p</span>.<span class=\"at\" style=\"color: #7d9029;\">vector</span>[<span class=\"dv\" style=\"color: #40a070;\">1</span>] <span class=\"op\" style=\"color: #666666;\">+=</span> Gravity <span class=\"op\" style=\"color: #666666;\">*</span> multiplier<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-46\" title=\"46\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> p<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-47\" title=\"47\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-48\" title=\"48\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb156-49\" title=\"49\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-50\" title=\"50\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">particles</span><span class=\"op\" style=\"color: #666666;\">:</span> movedParticles<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-51\" title=\"51\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">lastFrameTime</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">new</span> <span class=\"at\" style=\"color: #7d9029;\">Date</span>()<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-52\" title=\"52\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                particleIndex</a>",
            "<a class=\"sourceLine\" id=\"cb156-53\" title=\"53\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-54\" title=\"54\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">default</span><span class=\"op\" style=\"color: #666666;\">:</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-55\" title=\"55\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-56\" title=\"56\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">particles</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">particles</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-57\" title=\"57\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">lastFrameTime</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">lastFrameTime</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-58\" title=\"58\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">particleIndex</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">particleIndex</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-59\" title=\"59\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-60\" title=\"60\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-61\" title=\"61\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>That‚Äôs a lot of code, I know. Let me explain üòÉ</p>",
            "<p>",
            "  The first part takes important values out of",
            "  <code style=\"white-space: pre-wrap;\">state</code>, calculates the dropped",
            "  frame multiplier, and makes a new copy of the particles array with",
            "  <code style=\"white-space: pre-wrap;\">.slice(0)</code>. That was the",
            "  fastest way I could find.",
            "</p>",
            "<p>Then we generate new particles.</p>",
            "<p>",
            "  We loop through",
            "  <code style=\"white-space: pre-wrap;\">particlesPerTick</code> particles,",
            "  create them at",
            "  <code style=\"white-space: pre-wrap;\">mousePos</code> coordinates, and",
            "  insert at the beginning of the array. In my tests that performed best.",
            "  Particles get random movement vectors.",
            "</p>",
            "<p>",
            "  This randomness is a Redux faux pas. Reducers are supposed to be",
            "  functionally pure: produce the same result every time they are called",
            "  with the same argument values. Randomness is impure.",
            "</p>",
            "<p>",
            "  We don‚Äôt need our particle vectors to be deterministic, so I think this",
            "  is fine. Let‚Äôs say our universe is stochastic instead üòÑ",
            "</p>",
            "<p>",
            "  {aside} Stochastic means that our universe/physic simulation is governed",
            "  by probabilities. You can still model such a universe and reason about",
            "  its behavior. A lot of real world physics is stochastic in nature.",
            "  {/aside}",
            "</p>",
            "<p>",
            "  We now have an array full of old and new particles. We remove all",
            "  out-of-bounds particles with a",
            "  <code style=\"white-space: pre-wrap;\">filter</code>, then walk through",
            "  what‚Äôs left to move each particle by its vector.",
            "</p>",
            "<p>",
            "  To simulate gravity, we update vectors‚Äô vertical component using our",
            "  <code style=\"white-space: pre-wrap;\">Gravity</code> constant. That makes",
            "  particles fall down faster and faster creating a nice parabola.",
            "</p>",
            "<p>",
            "  Our reducer is done. Our particle generator works. Our thing animates",
            "  smoothly. \\o/",
            "</p>"
          ]
        },
        {
          "lectureTitle": "What we learned",
          "lectureLines": [
            "<h2 id=\"what-we-learned\">What we learned</h2>",
            "<p>",
            "  Building a particle generator in React and Redux, we made three important",
            "  discoveries:",
            "</p>",
            "<ol type=\"1\">",
            "  <li>",
            "    <strong>Redux is much faster than you‚Äôd think</strong>. Creating a new",
            "    copy of the state tree on each animation loop sounds crazy, but it",
            "    works. Most of our code creates shallow copies, which explains the",
            "    speed.",
            "  </li>",
            "  <li>",
            "    <strong>Adding to JavaScript arrays is slow</strong>. Once we hit about",
            "    300 particles, adding new ones becomes slow. Stop adding particles and",
            "    you get smooth animation. This indicates that something about creating",
            "    particles is slow: either adding to the array, or creating React",
            "    component instances, or creating SVG DOM nodes.",
            "  </li>",
            "  <li>",
            "    <strong>SVG is also slow</strong>. To test the above hypothesis, I made",
            "    the generator create 3000 particles on first click. The animation speed",
            "    is <em>terrible</em> at first and becomes okayish at around 1000",
            "    particles. This suggests that making shallow copies of big arrays and",
            "    moving existing SVG nodes around is faster than adding new DOM nodes",
            "    and array elements.",
            "    <a href=\"https://i.imgur.com/ug478Me.gif\">Here‚Äôs a gif</a>",
            "  </li>",
            "</ol>",
            "<hr />",
            "<p>",
            "  There you go: Animating with React, Redux, and D3. Kind of a new",
            "  superpower üòâ",
            "</p>",
            "<p>Here‚Äôs the recap:</p>",
            "<ul>",
            "  <li>React handles rendering</li>",
            "  <li>D3 calculates stuff, detects mouse positions</li>",
            "  <li>Redux handles state</li>",
            "  <li>element coordinates are state</li>",
            "  <li>",
            "    change coordinates on every",
            "    <code style=\"white-space: pre-wrap;\">requestAnimationFrame</code>",
            "  </li>",
            "  <li>animation!</li>",
            "</ul>",
            "<p>",
            "  Now let‚Äôs render to canvas and push this sucker to 20,000 smoothly",
            "  animated elements. Even on a mobile phone.",
            "</p>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "Speed optimizations",
      "lectures": [
        {
          "lectureTitle": "Speed intro",
          "lectureLines": [
            "<h1 id=\"speed-optimizations\">Speed optimizations</h1>",
            "<p>",
            "  Welcome to the speed optimization chapter. This is where we make our code",
            "  harder to read and faster to run.",
            "</p>",
            "<p>You might never need any techniques discussed here.</p>",
            "<p>",
            "  You already know how to build performant data visualization components.",
            "  For 99% of applications, plain code that‚Äôs easy to read and understand is",
            "  faster than fast code that‚Äôs hard to read.",
            "</p>",
            "<p>",
            "  You and your team spend most of your time reading code. Optimize for",
            "  that. The faster you can code, the faster your system can evolve. Leave",
            "  runtime optimization to React and its ecosystem of library authors for as",
            "  long as you can get away with.",
            "</p>",
            "<p>",
            "  Do you really need to save that tenth of a second at runtime if it means",
            "  an extra hour of head scratching every time there‚Äôs a bug?",
            "</p>",
            "<p>Be honest. üòâ</p>",
            "<p>",
            "  That said, there <em>are</em> cases where faster code is also easier to",
            "  read. And there are cases where your visualization is so massive, that",
            "  you need every ounce of oomph you can get.",
            "</p>",
            "<p>For the most part, we‚Äôre going to talk about three things:</p>",
            "<ul>",
            "  <li>using Canvas to speed up rendering</li>",
            "  <li>using React-like libraries to speed up the core rendering engine</li>",
            "  <li>avoiding unnecessary computation and redraws</li>",
            "  <li>reaching for WebGL when even Canvas isn‚Äôt fast enough</li>",
            "</ul>",
            "<p>",
            "  We‚Äôll start with Canvas because it‚Äôs the best bang for buck improvement",
            "  you can make.",
            "</p>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "Using canvas",
      "lectures": [
        {
          "lectureTitle": "Intro",
          "lectureLines": [
            "<h1 id=\"using-canvas\">Using canvas</h1>",
            "<p>",
            "  So far we‚Äôve been rendering our visualizations with SVG. SVG is great",
            "  because it follows a familiar structure, offers infinitely scalable",
            "  vector graphics, and works everywhere. There are <em>some</em> advanced",
            "  SVG features you can‚Äôt use everywhere, but the core is solid.",
            "</p>",
            "<p>However, SVG has a big flaw: it‚Äôs slow.</p>",
            "<p>",
            "  Anything more than a few hundred SVG nodes and your browser starts to",
            "  struggle. Especially if those thousands of elements move around.",
            "</p>",
            "<p>",
            "  A web animation panel moderator at ForwardJS once asked me,",
            "  <em>‚ÄúBut why would you want thousands of SVG elements?‚Äù</em>.",
            "</p>",
            "<p>",
            "  It was my first time participating in a panel, stage lights shining upon",
            "  me, a mildly disinterested audience staring into their phones ‚Ä¶ I bombed:",
            "  <em>‚ÄúErrr ‚Ä¶ because you can?‚Äù</em>.",
            "</p>",
            "<p>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/stage_lights.jpg\"",
            "  />",
            "</p>",
            "<p>",
            "  What I <em>should</em> have said was:",
            "  <em",
            "    >‚ÄúBecause there have been thousands of UFO sightings, there are",
            "    thousands of counties in the US, millions of taxi rides, hundreds of",
            "    millions of people having this or that datapoint. And you want to show",
            "    change over time.‚Äù</em",
            "  >",
            "</p>",
            "<p>That‚Äôs the real answer.</p>",
            "<p>",
            "  Sometimes, when you‚Äôre visualizing data, you have a lot of data. The data",
            "  changes over time. Animation is the best way to show change over time.",
            "</p>",
            "<p>",
            "  Once upon a time, I worked on a",
            "  <a href=\"https://www.packtpub.com/web-development/mastering-d3js-video\"",
            "    >D3 video course</a",
            "  >",
            "  for Packt and used UFO sightings as an example. At peak UFO sighting,",
            "  right before smartphones become a thing, the animation takes up to 2",
            "  seconds to redraw a single frame.",
            "</p>",
            "<p>Terrible.</p>",
            "<p>",
            "  So if SVG is slow and you need to animate thousands of elements, what are",
            "  you to do? HTML5 Canvas.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "Why canvas",
          "lectureLines": [
            "<h2 id=\"why-canvas\">Why Canvas</h2>",
            "<p>",
            "  Unlike SVG, HTML5 Canvas lets you draw rasterized images. This means",
            "  you‚Äôre no longer operating at the level of shapes because you‚Äôre working",
            "  with pixels on the screen.",
            "</p>",
            "<p>",
            "  With SVG and other vector formats, you tell the browser <em>what</em> you",
            "  want to render. With Canvas and other raster formats, you tell the",
            "  browser <em>how</em> you want to render. The browser doesn‚Äôt know what",
            "  you‚Äôre doing; it gets a field of pixel colors and renders them as an",
            "  image.",
            "</p>",
            "<p>",
            "  That‚Äôs much faster for computers to handle. In some cases browsers can",
            "  even use hardware acceleration ‚Äì the GPU ‚Äì¬†to render HTML5 Canvas",
            "  elements. With a bit of care, you can do almost anything you want, even",
            "  on a mobile phone.",
            "</p>",
            "<p>",
            "  Phones these days have amazing GPUs and kind of terrible CPUs in",
            "  comparison. The CPU burns more battery, works slower, warms up your phone",
            "  more, etc.",
            "</p>",
            "<p>",
            "  If SVG wasn‚Äôt so easy to use, I‚Äôd almost suggest going straight to Canvas",
            "  for any sort of complex animation. Mobile traffic is, what, 60% to 70% of",
            "  web traffic these days?",
            "</p>"
          ]
        },
        {
          "lectureTitle": "Isn't canvas too hard?",
          "lectureLines": [
            "<h2 id=\"isnt-that-too-hard\">Isn‚Äôt that too hard?</h2>",
            "<p>",
            "  You might think all this pixel stuff sounds complicated. We‚Äôve stayed in",
            "  shape and component land so far. We didn‚Äôt care about any pixels or",
            "  rendering details. Draw a rectangle and a wild rectangle appears.",
            "</p>",
            "<p>",
            "  How do you know which pixel should do what when you render with Canvas?",
            "</p>",
            "<p>",
            "  HTML5 Canvas does offer some shape primitives. It has circles and",
            "  rectangles and things like that, but they suffer from the same problem",
            "  that SVG does. The browser has to use your CPU to calculate those, and at",
            "  around 10,000 elements, things break down.",
            "</p>",
            "<p>",
            "  10,000 elements is still a hell of a lot more than the 3,000 or so that",
            "  SVG gives you.",
            "</p>",
            "<p>",
            "  If your app allows it, you can use sprites: Tiny images copy-pasted on",
            "  the Canvas as bytestreams. I have yet to find an upper bound for those.",
            "  My JavaScript became the bottleneck üòÑ",
            "</p>",
            "<p>But I‚Äôm getting ahead of myself. We‚Äôll talk about sprites later.</p>"
          ]
        },
        {
          "lectureTitle": "The trouble with Canvas",
          "lectureLines": [
            "<h2 id=\"the-trouble-with-html5-canvas\">The trouble with HTML5 Canvas</h2>",
            "<p>",
            "  The tricky thing with HTML5 Canvas is that the API is low level and that",
            "  canvas is flat. As far as your JavaScript and React code are concerned,",
            "  it‚Äôs a flat image. It could be anything.",
            "</p>",
            "<p>",
            "  The lack of structure makes it difficult to detect clicks on elements,",
            "  interactions between shapes, when something covers something else, how",
            "  the user interacts with your stuff and so on Anything that requires",
            "  understanding what‚Äôs rendered.",
            "</p>",
            "<p>",
            "  You have to move most of that logic into your data store and manually",
            "  keep track.",
            "</p>",
            "<p>",
            "  As you can imagine, this becomes cumbersome. And you still can‚Äôt detect",
            "  user interaction because all you get is",
            "  <em>‚ÄúUser clicked on coordinate (x, y). Have fun.‚Äù</em>",
            "</p>",
            "<p>",
            "  At the same time, the low level API makes abstractions difficult. You",
            "  can‚Äôt create components for ‚Äúthis is a map‚Äù or ‚Äúhistogram goes here‚Äù.",
            "  You‚Äôre always down to circles and rectangles and basic shapes.",
            "</p>",
            "<p>",
            "  Your code soon looks like the D3.js spaghetti we tried to avoid in the",
            "  first place.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "Declarative Canvas with Konva and react-konva",
          "lectureLines": [
            "<h1 id=\"declarative-html5-canvas-with-konva-and-react-konva\">",
            "  Declarative HTML5 Canvas with Konva and react-konva",
            "</h1>",
            "<p>",
            "  Enter <a href=\"https://konvajs.github.io\">Konva</a> and react-konva. All",
            "  the benefits of declarative code, but rendered on the canvas.",
            "</p>",
            "<p>I‚Äôm gonna let Anton Lavrenov, the author of Konva, explain:</p>",
            "<blockquote>",
            "  <p>",
            "    Konva is an HTML5 Canvas JavaScript framework that enables high",
            "    performance animations, transitions, node nesting, layering, filtering,",
            "    caching, event handling for desktop and mobile applications, and much",
            "    more.",
            "  </p>",
            "</blockquote>",
            "<blockquote>",
            "  <p>",
            "    You can draw things onto the stage, add event listeners to them, move",
            "    them, scale them, and rotate them independently from other shapes to",
            "    support high performance animations, even if your application uses",
            "    thousands of shapes. Served hot with a side of awesomeness.",
            "  </p>",
            "</blockquote>",
            "<p>That.</p>",
            "<p>",
            "  It‚Äôs exactly what we need to push our animated React apps to thousands of",
            "  elements without spending too much time thinking about the",
            "  <em>how</em> of rendering. Best leave the hairy details to somebody else.",
            "</p>",
            "<p>Let‚Äôs try out two examples:</p>",
            "<ol type=\"1\">",
            "  <li>Pushing our particle generator to 20,000 elements</li>",
            "  <li>An n-body collision simulator built with MobX</li>",
            "</ol>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "Smooth animation with 20,000+ elements",
      "lectures": [
        {
          "lectureTitle": "A particle generator pushed to the max",
          "lectureLines": [
            "<h2 id=\"canvas-react-redux\">",
            "  A particle generator pushed to 20,000 elements with Canvas",
            "</h2>",
            "<p>",
            "  Our",
            "  <a",
            "    href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6906668#animating-react-redux\"",
            "    >SVG-based particle generator</a",
            "  >",
            "  caps out at a few thousand elements. Animation becomes slow as times",
            "  between iterations of our game loop increase.",
            "</p>",
            "<p>",
            "  Old elements leave the screen and get pruned faster than we can create",
            "  new ones. This creates a natural upper limit to how many elements we can",
            "  push into the page.",
            "</p>",
            "<p>",
            "  We can render many more elements if we take out SVG and use HTML5 Canvas",
            "  instead. I was able to push the code up to almost 20,000 smoothly",
            "  animated elements. Then JavaScript became the bottleneck.",
            "</p>",
            "<p>",
            "  Well, I say JavaScript was the bottleneck, but monitor size plays a role",
            "  too. It goes up to 20,000 on my laptop screen, juuuust grazes 30,000 on",
            "  my large desktop monitor, and averages about 17,000 on my iPhone 5SE.",
            "</p>",
            "<p>Friends with newer laptops got it up to 35,000.</p>",
            "<p>",
            "  You can see it in action hosted on",
            "  <a href=\"https://swizec.github.io/react-particles-experiment/\"",
            "    >Github pages</a",
            "  >.",
            "</p>",
            "<p>",
            "  We‚Äôre keeping most of our existing code. The real changes happen in",
            "  <code style=\"white-space: pre-wrap;\">src/components/index.jsx</code>,",
            "  where a Konva stage replaces the",
            "  <code style=\"white-space: pre-wrap;\">&lt;svg&gt;</code> element, and in",
            "  <code style=\"white-space: pre-wrap;\">src/components/Particles.jsx</code>,",
            "  where we change what we render. There‚Äôs a small tweak in the reducer to",
            "  generate more particles per tick.",
            "</p>",
            "<p>",
            "  You should go into your particle generator directory, install Konva and",
            "  react-konva, and then make the changes below. Trying things out is better",
            "  than just reading my code üòâ",
            "</p>",
            "<pre",
            "  data-caption=\"Install Konva\"",
            "><code style=\"white-space: pre-wrap;\">$ npm install --save konva react-konva</code></pre>",
            "<p>",
            "  {aside} react-konva is a thin wrapper on Konva itself. There‚Äôs no need to",
            "  think about it as its own thing. For the most part, you can go into the",
            "  Konva docs, read about something, and it Just Works‚Ñ¢ in react-konva.",
            "  {/aside}",
            "</p>"
          ]
        },
        {
          "lectureTitle": "Prepare canvas layer",
          "lectureLines": [
            "<h3 id=\"preparing-a-canvas-layer\">Preparing a canvas layer</h3>",
            "<p>",
            "  Our changes start in",
            "  <code style=\"white-space: pre-wrap;\">src/components/index.jsx</code>. We",
            "  have to throw away the",
            "  <code style=\"white-space: pre-wrap;\">&lt;svg&gt;</code> element and",
            "  replace it with a Konva stage.",
            "</p>",
            "<p>",
            "  You can think of a Konva stage as a Canvas element with a bunch of helper",
            "  methods attached. Some of them Konva uses internally; others are exposed",
            "  as an API. Functions like exporting to an image file, detecting",
            "  intersections, etc.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb158\"",
            "  data-caption=\"Import Konva and set the stage\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb158-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/index.jsx</span></a>",
            "<a class=\"sourceLine\" id=\"cb158-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb158-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb158-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">{</span> Stage <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;react-konva&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb158-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb158-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb158-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> App <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> Component <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb158-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ..</span></a>",
            "<a class=\"sourceLine\" id=\"cb158-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb158-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb158-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ..</span></a>",
            "<a class=\"sourceLine\" id=\"cb158-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                     <span class=\"op\" style=\"color: #666666;\">&lt;</span>Stage width<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">svgWidth</span><span class=\"op\" style=\"color: #666666;\">}</span> height<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">svgHeight</span><span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb158-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                         <span class=\"op\" style=\"color: #666666;\">&lt;</span>Particles particles<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">particles</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb158-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb158-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                     &lt;/Stage<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb158-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb158-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                 &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb158-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                 <span class=\"op\" style=\"color: #666666;\">&lt;</span>Footer N<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"va\" style=\"color: #19177c;\">particles</span>.<span class=\"at\" style=\"color: #7d9029;\">length</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb158-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">             &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb158-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb158-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb158-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  We import <code style=\"white-space: pre-wrap;\">Stage</code> from",
            "  <code style=\"white-space: pre-wrap;\">react-konva</code>, then use it",
            "  instead of the",
            "  <code style=\"white-space: pre-wrap;\">&lt;svg&gt;</code> element in the",
            "  <code style=\"white-space: pre-wrap;\">render</code> method. It gets a",
            "  <code style=\"white-space: pre-wrap;\">width</code> and a",
            "  <code style=\"white-space: pre-wrap;\">height</code>.",
            "</p>",
            "<p>",
            "  Inside, we render the",
            "  <code style=\"white-space: pre-wrap;\">Particles</code> component. It‚Äôs",
            "  going to create a Konva layer and use low-level Canvas methods to render",
            "  particles as sprites.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "Use sprites for max redraw speed",
          "lectureLines": [
            "<h3 id=\"using-sprites-for-max-redraw-speed\">",
            "  Using sprites for max redraw speed",
            "</h3>",
            "<p>",
            "  Our",
            "  <a",
            "    href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6906670#svg-particles\"",
            "    >SVG-based Particles</a",
            "  >",
            "  component was simple. Iterate through a list of particles, render a",
            "  <code style=\"white-space: pre-wrap;\">&lt;Particle&gt;</code> component",
            "  for each.",
            "</p>",
            "<p>",
            "  We‚Äôre going to completely rewrite that. Our new approach goes like this:",
            "</p>",
            "<ol start=\"0\" type=\"1\">",
            "  <li>",
            "    Cache a sprite on",
            "    <code style=\"white-space: pre-wrap;\">componentDidMount</code>",
            "  </li>",
            "  <li>Clear canvas</li>",
            "  <li>Redraw all particles</li>",
            "  <li>Repeat</li>",
            "</ol>",
            "<p>",
            "  Because the new approach renders a flat image, and because we don‚Äôt care",
            "  about interaction with individual particles, we can get rid of the",
            "  <code style=\"white-space: pre-wrap;\">Particle</code> component. The",
            "  unnecessary layer of nesting was slowing us down.",
            "</p>",
            "<p>",
            "  The new <code style=\"white-space: pre-wrap;\">Particles</code> component",
            "  looks like this:",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb159\"",
            "  data-caption=\"Sprite-based Particles component\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb159-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Particles.jsx</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb159-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"op\" style=\"color: #666666;\">{</span> Component <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;react&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">{</span> FastLayer <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;react-konva&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb159-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Particles <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> Component <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    layerRef <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">createRef</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb159-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">componentDidMount</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">canvas</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">layerRef</span>.<span class=\"va\" style=\"color: #19177c;\">current</span>.<span class=\"va\" style=\"color: #19177c;\">canvas</span>.<span class=\"at\" style=\"color: #7d9029;\">_canvas</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">canvasContext</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">canvas</span>.<span class=\"at\" style=\"color: #7d9029;\">getContext</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;2d&#39;</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb159-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">sprite</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">new</span> <span class=\"at\" style=\"color: #7d9029;\">Image</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">sprite</span>.<span class=\"at\" style=\"color: #7d9029;\">src</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;https://i.imgur.com/m5l6lhr.png&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb159-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">drawParticle</span>(particle) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> <span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> particle<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb159-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">canvasContext</span>.<span class=\"at\" style=\"color: #7d9029;\">drawImage</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">sprite</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">128</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">128</span><span class=\"op\" style=\"color: #666666;\">,</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">15</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">15</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb159-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">componentDidUpdate</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> particles <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">particles</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb159-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">console</span>.<span class=\"at\" style=\"color: #7d9029;\">time</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;drawing&#39;</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">canvasContext</span>.<span class=\"at\" style=\"color: #7d9029;\">clearRect</span>(<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">canvas</span>.<span class=\"at\" style=\"color: #7d9029;\">width</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">canvas</span>.<span class=\"at\" style=\"color: #7d9029;\">height</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb159-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">for</span> (<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> i <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">;</span> i <span class=\"op\" style=\"color: #666666;\">&lt;</span> <span class=\"va\" style=\"color: #19177c;\">particles</span>.<span class=\"at\" style=\"color: #7d9029;\">length</span><span class=\"op\" style=\"color: #666666;\">;</span> i<span class=\"op\" style=\"color: #666666;\">++</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">drawParticle</span>(particles[i])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">console</span>.<span class=\"at\" style=\"color: #7d9029;\">timeEnd</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;drawing&#39;</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb159-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-36\" title=\"36\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb159-37\" title=\"37\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>FastLayer ref<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">layerRef</span><span class=\"op\" style=\"color: #666666;\">}</span> listening<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;false&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb159-38\" title=\"38\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-39\" title=\"39\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-40\" title=\"40\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-41\" title=\"41\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb159-42\" title=\"42\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> Particles<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  40 lines of code is a lot all at once. Let‚Äôs walk through step by step.",
            "</p>",
            "<h4 id=\"componentdidmount\">componentDidMount</h4>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb160\"",
            "  data-caption=\"componentDidMount method\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb160-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Particles.jsx</span></a>",
            "<a class=\"sourceLine\" id=\"cb160-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb160-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb160-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"at\" style=\"color: #7d9029;\">componentDidMount</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb160-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">canvas</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">refs</span>.<span class=\"va\" style=\"color: #19177c;\">layer</span>.<span class=\"va\" style=\"color: #19177c;\">canvas</span>.<span class=\"at\" style=\"color: #7d9029;\">_canvas</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb160-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">canvasContext</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">canvas</span>.<span class=\"at\" style=\"color: #7d9029;\">getContext</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;2d&#39;</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb160-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb160-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">sprite</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">new</span> <span class=\"at\" style=\"color: #7d9029;\">Image</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb160-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">sprite</span>.<span class=\"at\" style=\"color: #7d9029;\">src</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;https://i.imgur.com/m5l6lhr.png&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb160-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  React calls",
            "  <code style=\"white-space: pre-wrap;\">componentDidMount</code> when our",
            "  component first renders. We use it to set up 3 instance properties.",
            "</p>",
            "<p>",
            "  <code style=\"white-space: pre-wrap;\">this.canvas</code> is a reference to",
            "  the HTML5 Canvas element. We get it through a ref to the Konva layer,",
            "  then spelunk through Konva internals to get the canvas itself. As the",
            "  <code style=\"white-space: pre-wrap;\">_</code> prefix indicates, Anton",
            "  Lavrenov did not intend this to be a public API.",
            "</p>",
            "<p>Thanks to JavaScript‚Äôs permissiveness, we can use it anyway. üôå</p>",
            "<p>",
            "  <code style=\"white-space: pre-wrap;\">this.canvasContext</code> is a",
            "  reference to our canvas‚Äôs",
            "  <a",
            "    href=\"https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D\"",
            "    >CanvasRenderingContext2D</a",
            "  >. It‚Äôs the interface we use to draw basic shapes, perform",
            "  transformations, and so on. Context is the only part of canvas you ever",
            "  interact with as a developer.",
            "</p>",
            "<p>Why it‚Äôs not just Canvas, I don‚Äôt know.</p>",
            "<p>",
            "  <code style=\"white-space: pre-wrap;\">this.sprite</code> is a cached",
            "  image. A small minion that we are going to copy-paste all over as our",
            "  particle. Creating a new image object with",
            "  <code style=\"white-space: pre-wrap;\">new Image()</code> and setting the",
            "  <code style=\"white-space: pre-wrap;\">src</code> property downloads our",
            "  sprite from the internet into browser memory.",
            "</p>",
            "<p>It looks like this:</p>",
            "<figure>",
            "  <img src=\"https://i.imgur.com/m5l6lhr.png\" alt=\"Our minion particle\" />",
            "  <figcaption>Our minion particle</figcaption>",
            "</figure>",
            "<p>",
            "  You might think it‚Äôs unsafe to copy references to rendered elements into",
            "  component properties like that, but it‚Äôs okay. Our render function always",
            "  renders the same thing, so the reference never changes. It just makes our",
            "  code cleaner.",
            "</p>",
            "<p>",
            "  Should our component unmount and re-mount, React will call",
            "  <code style=\"white-space: pre-wrap;\">componentDidMount</code> again and",
            "  update our reference.",
            "</p>",
            "<h4 id=\"drawparticle\">drawParticle</h4>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb161\"",
            "  data-caption=\"drawParticle code\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb161-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Particles.jsx</span></a>",
            "<a class=\"sourceLine\" id=\"cb161-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb161-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb161-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"at\" style=\"color: #7d9029;\">drawParticle</span>(particle) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb161-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> <span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> particle<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb161-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb161-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">canvasContext</span>.<span class=\"at\" style=\"color: #7d9029;\">drawImage</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">sprite</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">128</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">128</span><span class=\"op\" style=\"color: #666666;\">,</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">15</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">15</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb161-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  <code style=\"white-space: pre-wrap;\">drawParticle</code> draws a single",
            "  particle on the canvas. It gets coordinates from the",
            "  <code style=\"white-space: pre-wrap;\">particle</code> argument and uses",
            "  <code style=\"white-space: pre-wrap;\">drawImage</code> to copy our sprite",
            "  into position.",
            "</p>",
            "<p>",
            "  We use the whole sprite, corner",
            "  <code style=\"white-space: pre-wrap;\">(0, 0)</code> to corner",
            "  <code style=\"white-space: pre-wrap;\">(128, 128)</code>. That‚Äôs how big",
            "  our sprite is. And we copy it to position",
            "  <code style=\"white-space: pre-wrap;\">(x, y)</code> with a width and",
            "  height of <code style=\"white-space: pre-wrap;\">15</code> pixels.",
            "</p>",
            "<p>",
            "  <code style=\"white-space: pre-wrap;\">drawImage</code> is the fastest",
            "  method I‚Äôve found to put pixels on canvas. I don‚Äôt know why it‚Äôs so fast,",
            "  but here‚Äôs a",
            "  <a href=\"https://jsperf.com/canvas-drawimage-vs-putimagedata/3\"",
            "    >helpful benchmark</a",
            "  >",
            "  so you can see for yourself.",
            "</p>",
            "<h4 id=\"componentdidupdate-1\">componentDidUpdate</h4>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb162\"",
            "  data-caption=\"componentDidUpdate code\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb162-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Particles.jsx</span></a>",
            "<a class=\"sourceLine\" id=\"cb162-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb162-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb162-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"at\" style=\"color: #7d9029;\">componentDidUpdate</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb162-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> particles <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">particles</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb162-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb162-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">console</span>.<span class=\"at\" style=\"color: #7d9029;\">time</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;drawing&#39;</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb162-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">canvasContext</span>.<span class=\"at\" style=\"color: #7d9029;\">clearRect</span>(<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">canvas</span>.<span class=\"at\" style=\"color: #7d9029;\">width</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">canvas</span>.<span class=\"at\" style=\"color: #7d9029;\">height</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb162-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb162-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">for</span> (<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> i <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">;</span> i <span class=\"op\" style=\"color: #666666;\">&lt;</span> <span class=\"va\" style=\"color: #19177c;\">particles</span>.<span class=\"at\" style=\"color: #7d9029;\">length</span><span class=\"op\" style=\"color: #666666;\">;</span> i<span class=\"op\" style=\"color: #666666;\">++</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb162-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">drawParticle</span>(particles[i])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb162-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb162-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">console</span>.<span class=\"at\" style=\"color: #7d9029;\">timeEnd</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;drawing&#39;</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb162-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  <code style=\"white-space: pre-wrap;\">componentDidUpdate</code> is where",
            "  the magic happens. React calls this lifecycle method every time our list",
            "  of particles changes. <em>After</em> the",
            "  <code style=\"white-space: pre-wrap;\">render</code> method.",
            "</p>",
            "<p>",
            "  Just like the D3 blackbox approach, we move rendering out of the",
            "  <code style=\"white-space: pre-wrap;\">render</code> method and into",
            "  <code style=\"white-space: pre-wrap;\">componentDidUpdate</code>.",
            "</p>",
            "<p>Here‚Äôs how it works:</p>",
            "<ol type=\"1\">",
            "  <li>",
            "    <code style=\"white-space: pre-wrap;\"",
            "      >this.canvasContext.clearRect</code",
            "    >",
            "    clears the entire canvas from coordinate",
            "    <code style=\"white-space: pre-wrap;\">(0, 0)</code> to coordinate",
            "    <code style=\"white-space: pre-wrap;\">(width, height)</code>. We delete",
            "    everything and make the canvas transparent.",
            "  </li>",
            "  <li>",
            "    We iterate our",
            "    <code style=\"white-space: pre-wrap;\">particles</code> list with a",
            "    <code style=\"white-space: pre-wrap;\">for</code> loop and call",
            "    <code style=\"white-space: pre-wrap;\">drawParticle</code> on each",
            "    element.",
            "  </li>",
            "</ol>",
            "<p>",
            "  Clearing and redrawing the canvas is faster than moving individual",
            "  particles. For loops are faster than",
            "  <code style=\"white-space: pre-wrap;\">.map</code> or any other form of",
            "  iteration. I tested. A lot.",
            "</p>",
            "<p>",
            "  Open your browser console and see how long each frame takes to draw. The",
            "  <code style=\"white-space: pre-wrap;\">console.time</code> -",
            "  <code style=\"white-space: pre-wrap;\">console.timeEnd</code> pair measures",
            "  how long it takes your code to get from",
            "  <code style=\"white-space: pre-wrap;\">time</code> to",
            "  <code style=\"white-space: pre-wrap;\">timeEnd</code>. You can have as many",
            "  of these timers running as you want as long as you give them different",
            "  names.",
            "</p>",
            "<h4 id=\"render-4\">render</h4>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb163\"",
            "  data-caption=\"render code\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb163-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Particles.jsx</span></a>",
            "<a class=\"sourceLine\" id=\"cb163-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb163-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb163-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb163-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb163-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>FastLayer ref<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">layerRef</span><span class=\"op\" style=\"color: #666666;\">}</span> listening<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;false&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb163-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb163-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  After all that work, our",
            "  <code style=\"white-space: pre-wrap;\">render</code> method is quite short.",
            "</p>",
            "<p>",
            "  We render a Konva <code style=\"white-space: pre-wrap;\">FastLayer</code>,",
            "  give it a <code style=\"white-space: pre-wrap;\">ref</code> and turn off",
            "  <code style=\"white-space: pre-wrap;\">listening</code> for mouse events.",
            "  That makes the fast layer even faster.",
            "</p>",
            "<p>",
            "  Ideas for this combination of settings came from Konva‚Äôs official",
            "  <a",
            "    href=\"https://konvajs.github.io/docs/performance/All_Performance_Tips.html\"",
            "    >performance tips</a",
            "  >",
            "  documentation. This makes sense when you think about it.",
            "</p>",
            "<p>",
            "  A <code style=\"white-space: pre-wrap;\">FastLayer</code> is faster than a",
            "  <code style=\"white-space: pre-wrap;\">Layer</code>. It‚Äôs in the name.",
            "  Ignoring mouse events means you don‚Äôt have to keep track of elements. It",
            "  reduces computation.",
            "</p>",
            "<p>",
            "  This was empirically the fastest solution with the most particles on",
            "  screen.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "But why so many elements?",
          "lectureLines": [
            "<h3 id=\"but-why-swizec\">But why, Swizec?</h3>",
            "<p>",
            "  I‚Äôm glad you asked. This was a silly example. I devised the experiment",
            "  because at my first React+D3 workshop somebody asked,",
            "  <em",
            "    >‚ÄúWhat if we have thousands of datapoints, and we want to animate all",
            "    of them?‚Äù</em",
            "  >. I didn‚Äôt have a good answer.",
            "</p>",
            "<p>",
            "  Now I do. You put them in Canvas. You drive the animation with a game",
            "  loop. You‚Äôre good.",
            "</p>",
            "<p>",
            "  You can even do it as an overlay. Have an SVG for your graphs and charts,",
            "  overlay with a transparent canvas for your high speed animation.",
            "</p>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "Build a small interactive canvas game",
      "lectures": [
        {
          "lectureTitle": "Simulating billiards with MobX, Canvas, and Konva",
          "lectureLines": [
            "<h2",
            "  id=\"build-a-declarative-billiards-simulation-with-mobx-canvas-and-konva\"",
            ">",
            "  Build a declarative billiards simulation with MobX, Canvas, and Konva",
            "</h2>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/billiards-start.png\"",
            "    alt=\"Billiards game\"",
            "  />",
            "  <figcaption>Billiards game</figcaption>",
            "</figure>",
            "<p>",
            "  We‚Äôre building a small game. You have 11 glass balls ‚Äì¬†marbles, if you",
            "  will. Grab one, throw it at the others, watch them bounce around. There",
            "  is no score, but it looks cool, and it‚Äôs a fun way to explore how Konva",
            "  and React give you interactive Canvas features.",
            "</p>",
            "<p>",
            "  We‚Äôre using React and Konva to render our 11 marbles on an HTML5 Canvas",
            "  element, MobX to drive the animation loop, and D3 to help with collision",
            "  detection. Because this example is declarative, we can split it into two",
            "  parts:",
            "</p>",
            "<ul>",
            "  <li>Part 1: Rendering the marbles</li>",
            "  <li>Part 2: Building the physics</li>",
            "</ul>",
            "<p>",
            "  You can see the finished",
            "  <a href=\"https://github.com/Swizec/declarative-canvas-react-konva\"",
            "    >code on Github</a",
            "  >",
            "  and play around with a",
            "  <a href=\"https://swizec.github.io/declarative-canvas-react-konva/\"",
            "    >hosted version</a",
            "  >",
            "  of the code you‚Äôre about to build.",
            "</p>",
            "<p>",
            "  I know this example comes late in the book, and you‚Äôre feeling like you",
            "  know all there is to React and visualizations. You can think of this",
            "  example as practice. Plus it‚Äôs a good way to learn the basics of MobX.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "Decorators",
          "lectureLines": [
            "<h3 id=\"decorators\">Decorators</h3>",
            "<p>Before we begin, let me tell you about decorators.</p>",
            "<p>",
            "  MobX embraces them to make its API easier to use. You can use MobX",
            "  without decorators, but decorators make it better.",
            "</p>",
            "<p>",
            "  A couple years ago, decorators got very close to becoming an official",
            "  spec, then got held back. I don‚Äôt know <em>why</em>, but they‚Äôre a great",
            "  feature whose syntax is unlikely to change. So even if MobX has to change",
            "  its implementation when decorators do land in the JavaScript spec, you‚Äôre",
            "  not likely to have to change anything.",
            "</p>",
            "<p>",
            "  You can think of decorators as function wrappers. Instead of code like",
            "  this:",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb164\"",
            "  data-caption=\"Decoratorless function wrapping\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb164-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"at\" style=\"color: #7d9029;\">inject</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;store&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> (<span class=\"op\" style=\"color: #666666;\">{</span> store <span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">&lt;</span>div<span class=\"op\" style=\"color: #666666;\">&gt;</span>A thing <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">with</span> <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"va\" style=\"color: #19177c;\">store</span>.<span class=\"at\" style=\"color: #7d9029;\">value</span><span class=\"op\" style=\"color: #666666;\">}</span>&lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>You can write the same code like this:</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb165\"",
            "  data-caption=\"Function wrapping with decorators\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb165-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">@<span class=\"at\" style=\"color: #7d9029;\">inject</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;store&#39;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb165-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">(<span class=\"op\" style=\"color: #666666;\">{</span> store <span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">&lt;</span>div<span class=\"op\" style=\"color: #666666;\">&gt;</span>A thing <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">with</span> <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"va\" style=\"color: #19177c;\">store</span>.<span class=\"at\" style=\"color: #7d9029;\">value</span><span class=\"op\" style=\"color: #666666;\">}</span>&lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  Not much of a difference, but it becomes better looking when you work",
            "  with classes or combine multiple decorators. That‚Äôs when they shine. No",
            "  more <code style=\"white-space: pre-wrap;\">})))}))</code> at the end of",
            "  your functions.",
            "</p>",
            "<p>",
            "  By the way, <code style=\"white-space: pre-wrap;\">inject</code> is to MobX",
            "  much like <code style=\"white-space: pre-wrap;\">connect</code> is to",
            "  Redux. I‚Äôll explain in a bit.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "Part 0: Some setup",
          "lectureLines": [
            "<h3 id=\"part-0-some-setup\">Part 0: Some setup</h3>",
            "<p>",
            "  Because decorators aren‚Äôt in the JavaScript spec, we have to tweak how we",
            "  start our project. We can still use",
            "  <code style=\"white-space: pre-wrap;\">create-react-app</code>, but there‚Äôs",
            "  an additional step.",
            "</p>",
            "<p>You should start a new project like this:</p>",
            "<pre",
            "  data-caption=\"Create the billiards game project\"",
            "><code style=\"white-space: pre-wrap;\">$ create-react-app billiards-game --scripts-version custom-react-scripts</code></pre>",
            "<p>",
            "  This creates a new directory with a full setup for React. Just like",
            "  you‚Äôre used to.",
            "</p>",
            "<p>",
            "  The addition of",
            "  <code style=\"white-space: pre-wrap;\"",
            "    >--scripts-version custom-react-scripts</code",
            "  >",
            "  employs <span class=\"citation\" data-cites=\"kitze\">@kitze</span>‚Äôs",
            "  <a href=\"https://github.com/kitze/custom-react-scripts\"",
            "    >custom-react-scripts</a",
            "  >",
            "  project to give us more configuration options. Like the ability to enable",
            "  decorators.",
            "</p>",
            "<p>",
            "  We enable them in the",
            "  <code style=\"white-space: pre-wrap;\">.env</code> file. Add this line:",
            "</p>",
            "<pre",
            "  data-caption=\"Add to .env settings\"",
            "><code style=\"white-space: pre-wrap;\">// billiards-game/.env",
            "// ...",
            "REACT_APP_DECORATORS=true</code></pre>",
            "<p>",
            "  No installation necessary. I think",
            "  <code style=\"white-space: pre-wrap;\">custom-react-scripts</code> uses the",
            "  <code style=\"white-space: pre-wrap;\">transform-decorators-legacy</code>",
            "  Babel plugin behind the scenes. It‚Äôs pre-installed, and we enable it with",
            "  that <code style=\"white-space: pre-wrap;\">.env</code> change.",
            "</p>",
            "<p>Before we begin, you should install some other dependencies as well:</p>",
            "<pre",
            "  data-caption=\"Install libraries\"",
            "><code style=\"white-space: pre-wrap;\">$ npm install --save konva react-konva mobx mobx-react \\",
            "d3-timer d3-scale d3-quadtree</code></pre>",
            "<p>",
            "  This gives you Konva, MobX, and the parts of D3 that we need. You‚Äôre now",
            "  ready to build the billiards game.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "A quick MobX primer",
          "lectureLines": [
            "<h3 id=\"a-quick-mobx-primer\">A quick MobX primer</h3>",
            "<p>",
            "  Explaining MobX in detail is beyond the scope of this book. You can learn",
            "  it by osmosis as you follow the code in our billiards example.",
            "</p>",
            "<p>That said, here‚Äôs a quick rundown of the concepts we‚Äôre using.</p>",
            "<p>",
            "  MobX is based on reactive programming. There are values that are",
            "  observable and functions that react when those values change. MobX",
            "  ensures only the minimal possible set of observers is triggered on every",
            "  change.",
            "</p>",
            "<p>So, we have:</p>",
            "<p>",
            "  <code style=\"white-space: pre-wrap;\">@observable</code> ‚Äì a property",
            "  whose changes observers subscribe to",
            "  <code style=\"white-space: pre-wrap;\">@observer</code> ‚Äì¬†a component whose",
            "  <code style=\"white-space: pre-wrap;\">render()</code> method observes",
            "  values <code style=\"white-space: pre-wrap;\">@computed</code> ‚Äì¬†a method",
            "  whose value can be fully derived from observables",
            "  <code style=\"white-space: pre-wrap;\">@action</code> ‚Äì a method that",
            "  changes state, analogous to a Redux reducer",
            "  <code style=\"white-space: pre-wrap;\">@inject</code> ‚Äì¬†a decorator that",
            "  injects global stores into a component‚Äôs props",
            "</p>",
            "<p>",
            "  That‚Äôs all you need to know. Once your component is an",
            "  <code style=\"white-space: pre-wrap;\">@observer</code>, you never have to",
            "  worry about <em>what</em> it‚Äôs observing. MobX ensures it reacts to",
            "  changes in values used during rendering.",
            "</p>",
            "<p>",
            "  Making your component an observer and injecting the global store is the",
            "  same as using <code style=\"white-space: pre-wrap;\">connect</code> in",
            "  Redux. It gives your component access to your state, and it triggers a",
            "  re-render when something changes.",
            "</p>",
            "<p>",
            "  Importantly, it <em>doesn‚Äôt</em> trigger a re-render when something that",
            "  the component isn‚Äôt using changes. That little tidbit is what makes many",
            "  other reactive libraries difficult to use.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "Part 1: Rendering our marbles",
          "lectureLines": [
            "<h3 id=\"part-1-rendering-our-marbles\">Part 1: Rendering our marbles</h3>",
            "<p>",
            "  Our marbles render on Canvas using Konva. Each marble is its own sprite",
            "  rendered as a Konva element. This makes it easier to implement user and",
            "  marble interactions.",
            "</p>",
            "<p>Rendering happens in 3 components:</p>",
            "<ul>",
            "  <li>",
            "    <code style=\"white-space: pre-wrap;\">App</code> holds everything",
            "    together",
            "  </li>",
            "  <li>",
            "    <code style=\"white-space: pre-wrap;\">MarbleList</code> renders a list",
            "    of marbles",
            "  </li>",
            "  <li>",
            "    <code style=\"white-space: pre-wrap;\">Marble</code> renders an",
            "    individual marble",
            "  </li>",
            "</ul>",
            "<p>We‚Äôre also using 2 MobX stores:</p>",
            "<ul>",
            "  <li>",
            "    <code style=\"white-space: pre-wrap;\">Sprite</code> to load the marble",
            "    sprite and define coordinates within",
            "  </li>",
            "  <li>",
            "    <code style=\"white-space: pre-wrap;\">Physics</code> as our physics",
            "    engine",
            "  </li>",
            "</ul>",
            "<p>",
            "  <code style=\"white-space: pre-wrap;\">Sprite</code> and",
            "  <code style=\"white-space: pre-wrap;\">Physics</code> are hold almost all",
            "  of our game logic. A bit of drag &amp; drop logic goes in the",
            "  <code style=\"white-space: pre-wrap;\">Marble</code> component. Other than",
            "  that, all our components are presentational. They get props and render",
            "  stuff.",
            "</p>",
            "<p>",
            "  Let‚Äôs start with <code style=\"white-space: pre-wrap;\">App</code> and work",
            "  our way down.",
            "</p>",
            "<h4 id=\"app-1\">App</h4>",
            "<p>",
            "  Our <code style=\"white-space: pre-wrap;\">App</code> component doesn‚Äôt do",
            "  much. It imports MobX stores, triggers sprite loading, and starts the",
            "  game loop.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb169\"",
            "  data-caption=\"The App component\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb169-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/App.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb169-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb169-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"op\" style=\"color: #666666;\">{</span> Component <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;react&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb169-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">{</span> Provider <span class=\"im\">as</span> MobXProvider<span class=\"op\" style=\"color: #666666;\">,</span> observer <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;mobx-react&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb169-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb169-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> Physics <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;../logic/Physics&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb169-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> Sprite <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;../logic/Sprite&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb169-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> MarbleList <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./MarbleList&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb169-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb169-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">@observer</a>",
            "<a class=\"sourceLine\" id=\"cb169-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> App <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> Component <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb169-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">componentDidMount</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb169-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">Sprite</span>.<span class=\"at\" style=\"color: #7d9029;\">loadSprite</span>(() <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">Physics</span>.<span class=\"at\" style=\"color: #7d9029;\">startGameLoop</span>())<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb169-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb169-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb169-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb169-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb169-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>div className<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;App&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb169-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&lt;</span>div className<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;App-header&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb169-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"op\" style=\"color: #666666;\">&lt;</span>h2<span class=\"op\" style=\"color: #666666;\">&gt;</span>Elastic collisions&lt;/h2<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb169-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"op\" style=\"color: #666666;\">&lt;</span>p<span class=\"op\" style=\"color: #666666;\">&gt;</span>Rendered on canvas<span class=\"op\" style=\"color: #666666;\">,</span> built <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">with</span> React and Konva&lt;/p<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb169-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb169-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&lt;</span>div className<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;App-intro&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb169-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"op\" style=\"color: #666666;\">&lt;</span>MobXProvider physics<span class=\"op\" style=\"color: #666666;\">={</span>Physics<span class=\"op\" style=\"color: #666666;\">}</span> sprite<span class=\"op\" style=\"color: #666666;\">={</span>Sprite<span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb169-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        <span class=\"op\" style=\"color: #666666;\">&lt;</span>MarbleList /<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb169-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    &lt;/MobXProvider<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb169-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb169-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb169-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb169-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb169-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb169-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb169-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> App<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  We import our dependencies: React itself, a",
            "  <code style=\"white-space: pre-wrap;\">MobXProvider</code> that‚Äôs similar",
            "  to the Redux provider (puts stuff in react context), both of our MobX",
            "  stores which export singleton instances, and the main",
            "  <code style=\"white-space: pre-wrap;\">MarbleList</code> component.",
            "</p>",
            "<p>",
            "  <code style=\"white-space: pre-wrap;\">App</code> itself is a full featured",
            "  component that initiates sprite loading in",
            "  <code style=\"white-space: pre-wrap;\">componentDidMount</code> and calls",
            "  <code style=\"white-space: pre-wrap;\">startGameLoop</code> when the sprite",
            "  is ready. We know the sprite is ready because it calls a callback. You‚Äôll",
            "  see how that works in a bit.",
            "</p>",
            "<p>",
            "  The <code style=\"white-space: pre-wrap;\">render</code> method outputs",
            "  some descriptive text and the",
            "  <code style=\"white-space: pre-wrap;\">MarbleList</code> component wrapped",
            "  in a <code style=\"white-space: pre-wrap;\">MobXProvider</code>. The",
            "  provider puts instances of our stores ‚Äì",
            "  <code style=\"white-space: pre-wrap;\">sprite</code> and",
            "  <code style=\"white-space: pre-wrap;\">physics</code> ‚Äì¬†in React context.",
            "</p>",
            "<p>",
            "  This makes them available to all child components via the",
            "  <code style=\"white-space: pre-wrap;\">inject</code> decorator.",
            "</p>",
            "<h4 id=\"marblelist\">MarbleList</h4>",
            "<p>",
            "  <code style=\"white-space: pre-wrap;\">MarbleList</code> is an important",
            "  component that renders the whole game, yet it can still be small and",
            "  functional. Every prop it needs comes from our two stores.",
            "</p>",
            "<p>Like this:</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb170\"",
            "  data-caption=\"MarbleList component\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb170-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/MarbleList.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb170-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb170-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;react&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb170-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">{</span> inject<span class=\"op\" style=\"color: #666666;\">,</span> observer <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;mobx-react&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb170-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">{</span> Stage<span class=\"op\" style=\"color: #666666;\">,</span> Layer<span class=\"op\" style=\"color: #666666;\">,</span> Group <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;react-konva&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb170-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb170-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> Marble <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./Marble&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb170-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb170-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> MarbleList <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">inject</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;physics&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;sprite&#39;</span>)(<span class=\"at\" style=\"color: #7d9029;\">observer</span>((<span class=\"op\" style=\"color: #666666;\">{</span> physics<span class=\"op\" style=\"color: #666666;\">,</span> sprite <span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb170-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> width<span class=\"op\" style=\"color: #666666;\">,</span> height<span class=\"op\" style=\"color: #666666;\">,</span> marbles <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> physics<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb170-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> marbleTypes <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> sprite<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb170-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb170-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb170-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>Stage width<span class=\"op\" style=\"color: #666666;\">={</span>width<span class=\"op\" style=\"color: #666666;\">}</span> height<span class=\"op\" style=\"color: #666666;\">={</span>height<span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb170-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>Layer<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb170-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&lt;</span>Group<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb170-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"va\" style=\"color: #19177c;\">marbles</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>((<span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y<span class=\"op\" style=\"color: #666666;\">,</span> id <span class=\"op\" style=\"color: #666666;\">},</span> i) <span class=\"op\" style=\"color: #666666;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb170-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        <span class=\"op\" style=\"color: #666666;\">&lt;</span>Marble x<span class=\"op\" style=\"color: #666666;\">={</span>x<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb170-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                                y<span class=\"op\" style=\"color: #666666;\">={</span>y<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb170-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                                type<span class=\"op\" style=\"color: #666666;\">={</span>marbleTypes[i<span class=\"op\" style=\"color: #666666;\">%</span><span class=\"va\" style=\"color: #19177c;\">marbleTypes</span>.<span class=\"at\" style=\"color: #7d9029;\">length</span>]<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb170-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                                draggable<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;true&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb170-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                                id<span class=\"op\" style=\"color: #666666;\">={</span>id<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb170-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                                key<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"vs\" style=\"color: #4070a0;\">`marble-</span><span class=\"sc\" style=\"color: #4070a0;\">${</span>id<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">`</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb170-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    ))<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb170-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                &lt;/Group<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb170-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            &lt;/Layer<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb170-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        &lt;/Stage<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb170-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb170-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span>))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb170-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb170-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> MarbleList<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  We import dependencies and create a",
            "  <code style=\"white-space: pre-wrap;\">MarbleList</code> component. Instead",
            "  of decorators, we‚Äôre using with functional composition.",
            "</p>",
            "<p>",
            "  This shows you that MobX <em>can</em> work without decorators, but",
            "  there‚Äôs no deep reason behind this choice. Over time, I‚Äôve developed a",
            "  preference for composition for functional components and decorators for",
            "  class-based components.",
            "</p>",
            "<p>",
            "  <code style=\"white-space: pre-wrap;\">inject</code> takes values out of",
            "  context and puts them in component props.",
            "  <code style=\"white-space: pre-wrap;\">observer</code> declares that our",
            "  component observes those props and reacts to them.",
            "</p>",
            "<p>",
            "  It‚Äôs generally a good idea to use both",
            "  <code style=\"white-space: pre-wrap;\">inject</code> and",
            "  <code style=\"white-space: pre-wrap;\">observer</code> together. I have yet",
            "  to find a case where you need just one or the other.",
            "</p>",
            "<p>",
            "  The rendering itself takes values out of our stores and returns a Konva",
            "  <code style=\"white-space: pre-wrap;\">Stage</code> with a single",
            "  <code style=\"white-space: pre-wrap;\">Layer</code>, which contains a",
            "  <code style=\"white-space: pre-wrap;\">Group</code>. Inside this group is",
            "  our list of marbles.",
            "</p>",
            "<p>",
            "  Each marble gets a position, a",
            "  <code style=\"white-space: pre-wrap;\">type</code> that defines how it",
            "  looks, an <code style=\"white-space: pre-wrap;\">id</code>, and a",
            "  <code style=\"white-space: pre-wrap;\">key</code>. We set",
            "  <code style=\"white-space: pre-wrap;\">draggable</code> to",
            "  <code style=\"white-space: pre-wrap;\">true</code> so Konva knows that this",
            "  element is draggable.",
            "</p>",
            "<p>",
            "  Yes, that means we get draggability on an HTML5 Canvas without any extra",
            "  effort. I like that.",
            "</p>",
            "<h4 id=\"marble\">Marble</h4>",
            "<p>",
            "  Each <code style=\"white-space: pre-wrap;\">Marble</code> component renders",
            "  a single marble and handles dragging and dropping. That‚Äôs how you ‚Äúshoot‚Äù",
            "  marbles.",
            "</p>",
            "<p>",
            "  Dragging and dropping creates a vector that accelerates, or shoots, the",
            "  marble in a certain direction with a certain speed. Putting this logic in",
            "  the component itself makes sense because the rest of our game only cares",
            "  about that final vector.",
            "</p>",
            "<p>The Marble component looks like this:</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb171\"",
            "  data-caption=\"Marble component\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb171-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Marble.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb171-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"op\" style=\"color: #666666;\">{</span> Component <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;react&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">{</span> Circle <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;react-konva&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">{</span> inject<span class=\"op\" style=\"color: #666666;\">,</span> observer <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;mobx-react&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb171-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">@<span class=\"at\" style=\"color: #7d9029;\">inject</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;physics&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;sprite&#39;</span>) @observer</a>",
            "<a class=\"sourceLine\" id=\"cb171-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Marble <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> Component <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    onDragStart <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// set drag starting position</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb171-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    onDragMove <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// update marble position</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb171-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    onDragEnd <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// shoot the marble</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb171-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> sprite<span class=\"op\" style=\"color: #666666;\">,</span> type<span class=\"op\" style=\"color: #666666;\">,</span> draggable<span class=\"op\" style=\"color: #666666;\">,</span> id<span class=\"op\" style=\"color: #666666;\">,</span> physics <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> MarbleDefinitions <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">sprite</span>.<span class=\"at\" style=\"color: #7d9029;\">marbleDefinitions</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y<span class=\"op\" style=\"color: #666666;\">,</span> r <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">physics</span>.<span class=\"at\" style=\"color: #7d9029;\">marbles</span>[id]<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb171-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb171-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>Circle x<span class=\"op\" style=\"color: #666666;\">={</span>x<span class=\"op\" style=\"color: #666666;\">}</span> y<span class=\"op\" style=\"color: #666666;\">={</span>y<span class=\"op\" style=\"color: #666666;\">}</span> radius<span class=\"op\" style=\"color: #666666;\">={</span>r<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    fillPatternImage<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"va\" style=\"color: #19177c;\">sprite</span>.<span class=\"at\" style=\"color: #7d9029;\">sprite</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    fillPatternOffset<span class=\"op\" style=\"color: #666666;\">={</span>MarbleDefinitions[type]<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    fillPatternScale<span class=\"op\" style=\"color: #666666;\">={{</span> <span class=\"dt\">x</span><span class=\"op\">:</span> r<span class=\"op\">*</span><span class=\"dv\">2</span>/<span class=\"dv\">111</span><span class=\"op\">,</span> <span class=\"dt\">y</span><span class=\"op\">:</span> r<span class=\"op\">*</span><span class=\"dv\">2</span>/<span class=\"dv\">111</span> <span class=\"op\">}}</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    shadowColor<span class=\"op\" style=\"color: #666666;\">={</span>MarbleDefinitions[type].<span class=\"at\" style=\"color: #7d9029;\">c</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    shadowBlur<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;15&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    shadowOpacity<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;1&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    draggable<span class=\"op\" style=\"color: #666666;\">={</span>draggable<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    onDragStart<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">onDragStart</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-36\" title=\"36\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    onDragEnd<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">onDragEnd</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-37\" title=\"37\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    onDragMove<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">onDragMove</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-38\" title=\"38\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    ref<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;circle&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-39\" title=\"39\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb171-40\" title=\"40\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-41\" title=\"41\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-42\" title=\"42\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-43\" title=\"43\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb171-44\" title=\"44\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> Marble<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  We <code style=\"white-space: pre-wrap;\">@inject</code> both stores into",
            "  our component and make it an",
            "  <code style=\"white-space: pre-wrap;\">@observer</code>. The",
            "  <code style=\"white-space: pre-wrap;\">render</code> method takes values",
            "  out of our stores and renders a Konva",
            "  <code style=\"white-space: pre-wrap;\">Circle</code>. The circle uses a",
            "  chunk of our sprite as its background, has a colorful shadow, and has a",
            "  bunch of drag callbacks.",
            "</p>",
            "<p>Those callbacks make our game playable.</p>",
            "<p>",
            "  In <code style=\"white-space: pre-wrap;\">onDragStart</code>, we store the",
            "  starting position of the dragged marble. In",
            "  <code style=\"white-space: pre-wrap;\">onDragMove</code>, we update the",
            "  marble‚Äôs position in the store, which makes it possible for other marbles",
            "  to bounce off of ours while it‚Äôs moving, and in",
            "  <code style=\"white-space: pre-wrap;\">onDragEnd</code>, we shoot the",
            "  marble.",
            "</p>",
            "<p>",
            "  Shoot direction depends on how we dragged. That‚Äôs why we need the",
            "  starting positions.",
            "</p>",
            "<p>",
            "  Drag callbacks double as MobX actions. Makes our code simpler. Instead of",
            "  specifying an extra",
            "  <code style=\"white-space: pre-wrap;\">@action</code> in the MobX store, we",
            "  manipulate the values directly.",
            "</p>",
            "<p>",
            "  MobX makes this okay. It keeps everything in sync and our state easy to",
            "  understand. MobX even batches value changes before triggering re-renders.",
            "</p>",
            "<p>The code inside those callbacks is pretty mathsy.</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb172\"",
            "  data-caption=\"Dragging callbacks\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb172-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Marble.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb172-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Marble <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> Component <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    onDragStart <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> physics<span class=\"op\" style=\"color: #666666;\">,</span> id <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb172-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">setState</span>(<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">origX</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">physics</span>.<span class=\"at\" style=\"color: #7d9029;\">marbles</span>[id].<span class=\"at\" style=\"color: #7d9029;\">x</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">origY</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">physics</span>.<span class=\"at\" style=\"color: #7d9029;\">marbles</span>[id].<span class=\"at\" style=\"color: #7d9029;\">y</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">startTime</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">new</span> <span class=\"at\" style=\"color: #7d9029;\">Date</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb172-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb172-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    onDragMove <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> physics<span class=\"op\" style=\"color: #666666;\">,</span> id <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">refs</span>.<span class=\"va\" style=\"color: #19177c;\">circle</span>.<span class=\"at\" style=\"color: #7d9029;\">attrs</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb172-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">physics</span>.<span class=\"at\" style=\"color: #7d9029;\">marbles</span>[id].<span class=\"at\" style=\"color: #7d9029;\">x</span> <span class=\"op\" style=\"color: #666666;\">=</span> x<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">physics</span>.<span class=\"at\" style=\"color: #7d9029;\">marbles</span>[id].<span class=\"at\" style=\"color: #7d9029;\">y</span> <span class=\"op\" style=\"color: #666666;\">=</span> y<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb172-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    onDragEnd <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> physics <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">              circle <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">refs</span>.<span class=\"at\" style=\"color: #7d9029;\">circle</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">              <span class=\"op\" style=\"color: #666666;\">{</span> origX<span class=\"op\" style=\"color: #666666;\">,</span> origY <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">              <span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">circle</span>.<span class=\"at\" style=\"color: #7d9029;\">attrs</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb172-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb172-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> delta_t <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">new</span> <span class=\"at\" style=\"color: #7d9029;\">Date</span>() <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">startTime</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">              dist <span class=\"op\" style=\"color: #666666;\">=</span> (x <span class=\"op\" style=\"color: #666666;\">-</span> origX) <span class=\"op\" style=\"color: #666666;\">**</span> <span class=\"dv\" style=\"color: #40a070;\">2</span> <span class=\"op\" style=\"color: #666666;\">+</span> (y <span class=\"op\" style=\"color: #666666;\">-</span> origY) <span class=\"op\" style=\"color: #666666;\">**</span> <span class=\"dv\" style=\"color: #40a070;\">2</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">              v <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">Math</span>.<span class=\"at\" style=\"color: #7d9029;\">sqrt</span>(dist)/(delta_t/<span class=\"dv\" style=\"color: #40a070;\">16</span>)<span class=\"op\" style=\"color: #666666;\">;</span> <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// distance per frame (= 16ms)</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb172-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">physics</span>.<span class=\"at\" style=\"color: #7d9029;\">shoot</span>(<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">           <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> x<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">           <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> y<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-36\" title=\"36\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">           <span class=\"dt\" style=\"color: #902000;\">vx</span><span class=\"op\" style=\"color: #666666;\">:</span> (x <span class=\"op\" style=\"color: #666666;\">-</span> origX)/(v/<span class=\"dv\" style=\"color: #40a070;\">3</span>)<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// /3 is a speedup factor</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-37\" title=\"37\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">           <span class=\"dt\" style=\"color: #902000;\">vy</span><span class=\"op\" style=\"color: #666666;\">:</span> (y <span class=\"op\" style=\"color: #666666;\">-</span> origY)/(v/<span class=\"dv\" style=\"color: #40a070;\">3</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb172-38\" title=\"38\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">           <span class=\"op\" style=\"color: #666666;\">},</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">id</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-39\" title=\"39\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-40\" title=\"40\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb172-41\" title=\"41\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-42\" title=\"42\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  In <code style=\"white-space: pre-wrap;\">onDragStart</code>, we store",
            "  original coordinates and start time in local state. These are temporary",
            "  values that nothing outside this user action cares about. Local state",
            "  makes sense.",
            "</p>",
            "<p>We‚Äôll use them to determine how far the user dragged our marble.</p>",
            "<p>",
            "  In <code style=\"white-space: pre-wrap;\">onDragMove</code> we update the",
            "  MobX store with new coordinates for this particular marble. You might",
            "  think we‚Äôre messing with mutable state here, and we <em>might</em> be,",
            "  but these are MobX observables. They‚Äôre wrapped in setters that ensure",
            "  everything is kept in sync, changes logged, observers notified, etc.",
            "</p>",
            "<p>",
            "  <code style=\"white-space: pre-wrap;\">onDragEnd</code> shoots the marble.",
            "  We calculate drag speed and direction, then we call the",
            "  <code style=\"white-space: pre-wrap;\">shoot()</code> action on the",
            "  <code style=\"white-space: pre-wrap;\">physics</code> store.",
            "</p>",
            "<p>",
            "  The math we‚Äôre doing is called",
            "  <a href=\"https://en.wikipedia.org/wiki/Euclidean_distance\"",
            "    >euclidean distance</a",
            "  >",
            "  by the way. Distance between two points is the root of the sum of squares",
            "  of distance on each axis.",
            "</p>",
            "<h4 id=\"sprite-store\">Sprite store</h4>",
            "<p>",
            "  Now that we know how rendering works, we need to load our sprite. It‚Äôs an",
            "  icon set I bought online. Can‚Äôt remember where or who from.",
            "</p>",
            "<p>Here‚Äôs what it looks like:</p>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/monster-marbles-sprite-sheets.jpg\"",
            "    alt=\"Marbles sprite\"",
            "  />",
            "  <figcaption>Marbles sprite</figcaption>",
            "</figure>",
            "<p>To use this sprite, we need two things:</p>",
            "<ol type=\"1\">",
            "  <li>A way to tell where on the image each marble lies</li>",
            "  <li>A MobX store that loads the image into memory</li>",
            "</ol>",
            "<p>",
            "  The first is a",
            "  <code style=\"white-space: pre-wrap;\">MarbleDefinitions</code> dictionary.",
            "  We used it in",
            "  <code style=\"white-space: pre-wrap;\">Marble</code> component‚Äôs render",
            "  method. If you‚Äôre playing along, you should copy paste this. Too much",
            "  typing üòÉ",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb173\"",
            "  data-caption=\"MarbleDefinitions dictionary\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb173-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/logic/Sprite.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb173-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb173-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> MarbleDefinitions <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb173-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">dino</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">-222</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">-177</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">c</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;#8664d5&#39;</span> <span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb173-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">redHeart</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">-222</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">-299</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">c</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;#e47178&#39;</span> <span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb173-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">sun</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">-222</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">-420</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">c</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;#5c96ac&#39;</span> <span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb173-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb173-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">yellowHeart</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">-400</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">-177</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">c</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;#c8b405&#39;</span> <span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb173-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">mouse</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">-400</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">-299</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">c</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;#7d7e82&#39;</span> <span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb173-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">pumpkin</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">-400</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">-420</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">c</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;#fa9801&#39;</span> <span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb173-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb173-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">frog</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">-576</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">-177</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">c</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;#98b42b&#39;</span> <span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb173-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">moon</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">-575</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">-299</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">c</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;#b20717&#39;</span> <span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb173-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">bear</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">-576</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">-421</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">c</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;#a88534&#39;</span> <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb173-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb173-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb173-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"op\" style=\"color: #666666;\">{</span> MarbleDefinitions <span class=\"op\" style=\"color: #666666;\">};</span></a></code></pre>",
            "</div>",
            "<p>",
            "  Each type of marble has a name, a coordinate, and a color. The coordinate",
            "  tells us where on the sprite image it is, and the color helps us create a",
            "  nice shadow.",
            "</p>",
            "<p>All values painstakingly assembled by hand. You‚Äôre welcome. üòå</p>",
            "<p>",
            "  The MobX store that loads our sprite into memory and helps us use it",
            "  looks like this:",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb174\"",
            "  data-caption=\"Sprite store\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb174-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/logic/Sprite.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb174-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb174-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">{</span> observable<span class=\"op\" style=\"color: #666666;\">,</span> action<span class=\"op\" style=\"color: #666666;\">,</span> computed <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;mobx&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb174-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> MarbleSprite <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;../monster-marbles-sprite-sheets.jpg&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb174-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb174-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Sprite <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb174-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    @observable sprite <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">null</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb174-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb174-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    @action <span class=\"at\" style=\"color: #7d9029;\">loadSprite</span>(callback <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">null</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb174-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> sprite <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">new</span> <span class=\"at\" style=\"color: #7d9029;\">Image</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb174-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">sprite</span>.<span class=\"at\" style=\"color: #7d9029;\">src</span> <span class=\"op\" style=\"color: #666666;\">=</span> MarbleSprite<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb174-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb174-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">sprite</span>.<span class=\"at\" style=\"color: #7d9029;\">onload</span> <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb174-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">sprite</span> <span class=\"op\" style=\"color: #666666;\">=</span> sprite<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb174-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb174-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"at\" style=\"color: #7d9029;\">callback</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb174-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb174-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb174-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb174-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    @computed get <span class=\"at\" style=\"color: #7d9029;\">marbleTypes</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb174-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"va\" style=\"color: #19177c;\">Object</span>.<span class=\"at\" style=\"color: #7d9029;\">keys</span>(MarbleDefinitions)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb174-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb174-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb174-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    @computed get <span class=\"at\" style=\"color: #7d9029;\">marbleDefinitions</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb174-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> MarbleDefinitions<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb174-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb174-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb174-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb174-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">new</span> <span class=\"at\" style=\"color: #7d9029;\">Sprite</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  A MobX store is a JavaScript object. It has",
            "  <code style=\"white-space: pre-wrap;\">@observable</code> values,",
            "  <code style=\"white-space: pre-wrap;\">@actions</code>, and",
            "  <code style=\"white-space: pre-wrap;\">@computed</code> getters. That‚Äôs all",
            "  there is to it.",
            "</p>",
            "<p>",
            "  No complicated reducers and action generators. Just JavaScript functions",
            "  and properties. There‚Äôs plenty going on behind the scenes, but we don‚Äôt",
            "  have to think about it.",
            "</p>",
            "<p>That‚Äôs why I like MobX more than Redux. Feels easier to use ü§´</p>",
            "<p>",
            "  In the <code style=\"white-space: pre-wrap;\">Sprite</code> store, we have",
            "  an <code style=\"white-space: pre-wrap;\">@observable sprite</code>.",
            "  Changing this value triggers a re-render in al",
            "  <code style=\"white-space: pre-wrap;\">@observer</code> components that",
            "  rely on it. In our case that‚Äôs every marble.",
            "</p>",
            "<p>",
            "  Then we have a",
            "  <code style=\"white-space: pre-wrap;\">loadSprite</code> action. It creates",
            "  a new <code style=\"white-space: pre-wrap;\">Image</code> object and loads",
            "  the sprite. After the image loads, we set",
            "  <code style=\"white-space: pre-wrap;\">this.sprite</code>.",
            "</p>",
            "<p>",
            "  The <code style=\"white-space: pre-wrap;\">@computed</code> getters make it",
            "  easier to access",
            "  <code style=\"white-space: pre-wrap;\">MarbleDefinitions</code>.",
            "  <code style=\"white-space: pre-wrap;\">marbleTypes</code> gives us a list",
            "  of available types of marbles and",
            "  <code style=\"white-space: pre-wrap;\">marbleDefinitions</code> returns the",
            "  definitions object.",
            "</p>",
            "<p>",
            "  Running your code won‚Äôt work just yet. We need the physics store first",
            "  because it defines marble positions.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "Part 2: Building the physics",
          "lectureLines": [
            "<h3 id=\"part-2-building-the-physics\">Part 2: Building the physics</h3>",
            "<p>",
            "  Our whole physics engine fits into a single MobX store. It contains the",
            "  collision detection, marble movement calculations, and drives the game",
            "  loop itself.",
            "</p>",
            "<p>The general approach goes like this:</p>",
            "<ol type=\"1\">",
            "  <li>Have an observable array of marbles</li>",
            "  <li>",
            "    Run a <code style=\"white-space: pre-wrap;\">simulationStep</code> on",
            "    each",
            "    <code style=\"white-space: pre-wrap;\">requestAnimationFrame</code> using",
            "    <code style=\"white-space: pre-wrap;\">d3.timer</code>",
            "  </li>",
            "  <li>Change marble positions and speed</li>",
            "  <li>",
            "    MobX observables and observers trigger re-renders of marbles that move",
            "  </li>",
            "</ol>",
            "<p>",
            "  The",
            "  <a",
            "    href=\"https://github.com/Swizec/declarative-canvas-react-konva/blob/master/src/logic/Physics.js\"",
            "    >whole Physics store</a",
            "  >",
            "  is some 120 lines of code. We‚Äôll go slow. Here‚Äôs the skeleton:",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb175\"",
            "  data-caption=\"Physics skeleton\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb175-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/logic/Physics.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb175-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb175-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Physics <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb175-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    @observable MarbleR <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"dv\" style=\"color: #40a070;\">25</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb175-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    @observable width <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"dv\" style=\"color: #40a070;\">800</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb175-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    @observable height <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"dv\" style=\"color: #40a070;\">600</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb175-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    @observable marbles <span class=\"op\" style=\"color: #666666;\">=</span> []<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb175-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    timer <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">null</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb175-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb175-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    @computed get <span class=\"at\" style=\"color: #7d9029;\">initialPositions</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb175-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb175-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb175-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb175-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    @action <span class=\"at\" style=\"color: #7d9029;\">startGameLoop</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb175-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb175-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb175-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb175-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    @action <span class=\"at\" style=\"color: #7d9029;\">simulationStep</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb175-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb175-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb175-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb175-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    @action <span class=\"at\" style=\"color: #7d9029;\">shoot</span>(<span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y<span class=\"op\" style=\"color: #666666;\">,</span> vx<span class=\"op\" style=\"color: #666666;\">,</span> vy <span class=\"op\" style=\"color: #666666;\">},</span> i) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb175-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb175-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb175-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  We have four observable properties, a",
            "  <code style=\"white-space: pre-wrap;\">timer</code>, a",
            "  <code style=\"white-space: pre-wrap;\">@computed</code> property for",
            "  initial positions, and 3 actions.",
            "  <code style=\"white-space: pre-wrap;\">startGameLoop</code> starts our",
            "  game, <code style=\"white-space: pre-wrap;\">simulationStep</code> holds",
            "  the main logic, and",
            "  <code style=\"white-space: pre-wrap;\">shoot</code> shoots a particular",
            "  marble.",
            "</p>",
            "<p>Let‚Äôs walk through.</p>",
            "<h4 id=\"initialpositions\">initialPositions</h4>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb176\"",
            "  data-caption=\"initialPositions function\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb176-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/logic/Physics.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Physics <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ..</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    @computed get <span class=\"at\" style=\"color: #7d9029;\">initialPositions</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> width<span class=\"op\" style=\"color: #666666;\">,</span> height<span class=\"op\" style=\"color: #666666;\">,</span> MarbleR <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">              center <span class=\"op\" style=\"color: #666666;\">=</span> width/<span class=\"dv\" style=\"color: #40a070;\">2</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb176-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> lines <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"dv\" style=\"color: #40a070;\">4</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">              maxY <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"dv\" style=\"color: #40a070;\">200</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb176-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> marbles <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">range</span>(lines<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">-1</span>).<span class=\"at\" style=\"color: #7d9029;\">map</span>(y <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (y <span class=\"op\" style=\"color: #666666;\">===</span> lines) <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> [<span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> center<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> maxY<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                                       <span class=\"dt\" style=\"color: #902000;\">vx</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">vy</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">r</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">MarbleR</span><span class=\"op\" style=\"color: #666666;\">}</span>]<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb176-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> left <span class=\"op\" style=\"color: #666666;\">=</span> center <span class=\"op\" style=\"color: #666666;\">-</span> y<span class=\"op\" style=\"color: #666666;\">*</span>(MarbleR<span class=\"op\" style=\"color: #666666;\">+</span><span class=\"dv\" style=\"color: #40a070;\">5</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                  right <span class=\"op\" style=\"color: #666666;\">=</span> center <span class=\"op\" style=\"color: #666666;\">+</span> y<span class=\"op\" style=\"color: #666666;\">*</span>(MarbleR<span class=\"op\" style=\"color: #666666;\">+</span><span class=\"dv\" style=\"color: #40a070;\">5</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb176-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"at\" style=\"color: #7d9029;\">range</span>(left<span class=\"op\" style=\"color: #666666;\">,</span> right<span class=\"op\" style=\"color: #666666;\">,</span> MarbleR<span class=\"op\" style=\"color: #666666;\">*</span><span class=\"dv\" style=\"color: #40a070;\">2</span><span class=\"op\" style=\"color: #666666;\">+</span><span class=\"dv\" style=\"color: #40a070;\">5</span>).<span class=\"at\" style=\"color: #7d9029;\">map</span>(x <span class=\"op\" style=\"color: #666666;\">=&gt;</span> (<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> x<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> maxY<span class=\"op\" style=\"color: #666666;\">-</span>y<span class=\"op\" style=\"color: #666666;\">*</span>(MarbleR<span class=\"op\" style=\"color: #666666;\">*</span><span class=\"dv\" style=\"color: #40a070;\">2</span><span class=\"op\" style=\"color: #666666;\">+</span><span class=\"dv\" style=\"color: #40a070;\">5</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">vx</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">vy</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">r</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">MarbleR</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">}</span>))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span>).<span class=\"at\" style=\"color: #7d9029;\">reduce</span>((acc<span class=\"op\" style=\"color: #666666;\">,</span> pos) <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">acc</span>.<span class=\"at\" style=\"color: #7d9029;\">concat</span>(pos)<span class=\"op\" style=\"color: #666666;\">,</span> [])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb176-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        marbles <span class=\"op\" style=\"color: #666666;\">=</span> [].<span class=\"at\" style=\"color: #7d9029;\">concat</span>(marbles<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> width/<span class=\"dv\" style=\"color: #40a070;\">2</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> height<span class=\"dv\" style=\"color: #40a070;\">-150</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">vx</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">vy</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">r</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">MarbleR</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb176-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">marbles</span>.<span class=\"at\" style=\"color: #7d9029;\">forEach</span>((m<span class=\"op\" style=\"color: #666666;\">,</span> i) <span class=\"op\" style=\"color: #666666;\">=&gt;</span> marbles[i].<span class=\"at\" style=\"color: #7d9029;\">id</span> <span class=\"op\" style=\"color: #666666;\">=</span> i)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-36\" title=\"36\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb176-37\" title=\"37\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> marbles<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-38\" title=\"38\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-39\" title=\"39\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ..</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-40\" title=\"40\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  Believe it or not, this is like one of those",
            "  <em>‚ÄúArrange things in a triangle‚Äù</em> puzzles you‚Äôd see in an old Learn",
            "  How To Program book. Or a whiteboard interview.",
            "</p>",
            "<p>It took me 3 hours to build. Easy to get wrong, fiddly to implement.</p>",
            "<p>",
            "  We start with a <code style=\"white-space: pre-wrap;\">range</code> of",
            "  numbers. From <code style=\"white-space: pre-wrap;\">lines</code> to",
            "  <code style=\"white-space: pre-wrap;\">0</code> in descending order. We",
            "  iterate through this list of rows and change each into a list of marbles.",
            "</p>",
            "<p>",
            "  4 marbles in the first row, 3 in the next, all the way down to 1 in last",
            "  row.",
            "</p>",
            "<p>",
            "  For each row, we calculate how much space we have on the",
            "  <code style=\"white-space: pre-wrap;\">left</code> and",
            "  <code style=\"white-space: pre-wrap;\">right</code> of the center and make",
            "  a <code style=\"white-space: pre-wrap;\">range</code> of horizontal",
            "  positions from <code style=\"white-space: pre-wrap;\">left</code> to",
            "  <code style=\"white-space: pre-wrap;\">right</code> with a step of ‚Äú1",
            "  marble size‚Äù. Using these positions and the known row, we create marbles",
            "  as needed.",
            "</p>",
            "<p>",
            "  We use a <code style=\"white-space: pre-wrap;\">.reduce</code> to flatten",
            "  nested arrays and add the last marble. That‚Äôs a corner case I couldn‚Äôt",
            "  solve elegantly, but I‚Äôm sure it‚Äôs possible.",
            "</p>",
            "<p>",
            "  In the end, we add an <code style=\"white-space: pre-wrap;\">id</code> to",
            "  each marble. We‚Äôre using index as the id, that‚Äôs true, but that still",
            "  ensures we use consistent values throughout our app. Positions in the",
            "  array may change.",
            "</p>",
            "<h4 id=\"shoot-and-startgameloop\">shoot and startGameLoop</h4>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb177\"",
            "  data-caption=\"shoot and startGameLoop functions\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb177-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/logic/Physics.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb177-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Physics <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb177-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb177-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb177-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    @action <span class=\"at\" style=\"color: #7d9029;\">startGameLoop</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb177-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">marbles</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">initialPositions</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb177-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb177-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">timer</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">timer</span>(() <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">simulationStep</span>())<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb177-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb177-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb177-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb177-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb177-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    @action <span class=\"at\" style=\"color: #7d9029;\">shoot</span>(<span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y<span class=\"op\" style=\"color: #666666;\">,</span> vx<span class=\"op\" style=\"color: #666666;\">,</span> vy <span class=\"op\" style=\"color: #666666;\">},</span> i) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb177-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> maxSpeed <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"dv\" style=\"color: #40a070;\">20</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb177-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb177-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">marbles</span>[i].<span class=\"at\" style=\"color: #7d9029;\">x</span> <span class=\"op\" style=\"color: #666666;\">=</span> x<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb177-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">marbles</span>[i].<span class=\"at\" style=\"color: #7d9029;\">y</span> <span class=\"op\" style=\"color: #666666;\">=</span> y<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb177-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">marbles</span>[i].<span class=\"at\" style=\"color: #7d9029;\">vx</span> <span class=\"op\" style=\"color: #666666;\">=</span> vx <span class=\"op\" style=\"color: #666666;\">&lt;</span> maxSpeed <span class=\"op\" style=\"color: #666666;\">?</span> vx : maxSpeed<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb177-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">marbles</span>[i].<span class=\"at\" style=\"color: #7d9029;\">vy</span> <span class=\"op\" style=\"color: #666666;\">=</span> vy <span class=\"op\" style=\"color: #666666;\">&lt;</span> maxSpeed <span class=\"op\" style=\"color: #666666;\">?</span> vy : maxSpeed<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb177-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb177-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  <code style=\"white-space: pre-wrap;\">shoot</code> and",
            "  <code style=\"white-space: pre-wrap;\">startGameLoop</code> are the",
            "  simplest functions in our physics engine.",
            "  <code style=\"white-space: pre-wrap;\">startGameLoop</code> gets the",
            "  initial <code style=\"white-space: pre-wrap;\">marbles</code> array and",
            "  starts a D3 timer.",
            "  <code style=\"white-space: pre-wrap;\">shoot</code> updates a specific",
            "  marble‚Äôs coordinates and speed vector.",
            "</p>",
            "<p>üëå</p>"
          ]
        },
        {
          "lectureTitle": "Collision detection",
          "lectureLines": [
            "<h4 id=\"simulationstep-where-collisions-collision\">",
            "  simulationStep ‚Äì¬†where collisions collision",
            "</h4>",
            "<p>Here comes the fun part. The one with our game loop.</p>",
            "<p>",
            "  There‚Äôs also a video explaining how this works üëâ",
            "  <a href=\"https://www.youtube.com/watch?v=H84fmXjTElM\"",
            "    >Watch it on YouTube</a",
            "  >. With hand-drawn sketches that explain the math, and I think that‚Äôs",
            "  neat.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb178\"",
            "  data-caption=\"Full simulationStep function\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb178-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb178-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">@action <span class=\"at\" style=\"color: #7d9029;\">simulationStep</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> width<span class=\"op\" style=\"color: #666666;\">,</span> height<span class=\"op\" style=\"color: #666666;\">,</span> MarbleR <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb178-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> moveMarble <span class=\"op\" style=\"color: #666666;\">=</span> (<span class=\"op\" style=\"color: #666666;\">{</span>x<span class=\"op\" style=\"color: #666666;\">,</span> y<span class=\"op\" style=\"color: #666666;\">,</span> vx<span class=\"op\" style=\"color: #666666;\">,</span> vy<span class=\"op\" style=\"color: #666666;\">,</span> id<span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> _vx <span class=\"op\" style=\"color: #666666;\">=</span> ((x<span class=\"op\" style=\"color: #666666;\">+</span>vx <span class=\"op\" style=\"color: #666666;\">&lt;</span> MarbleR) <span class=\"op\" style=\"color: #666666;\">?</span> <span class=\"op\" style=\"color: #666666;\">-</span>vx : (x<span class=\"op\" style=\"color: #666666;\">+</span>vx <span class=\"op\" style=\"color: #666666;\">&gt;</span> width<span class=\"op\" style=\"color: #666666;\">-</span>MarbleR) <span class=\"op\" style=\"color: #666666;\">?</span> <span class=\"op\" style=\"color: #666666;\">-</span>vx : vx)<span class=\"op\" style=\"color: #666666;\">*</span>.<span class=\"dv\" style=\"color: #40a070;\">99</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            _vy <span class=\"op\" style=\"color: #666666;\">=</span> ((y<span class=\"op\" style=\"color: #666666;\">+</span>vy <span class=\"op\" style=\"color: #666666;\">&lt;</span> MarbleR) <span class=\"op\" style=\"color: #666666;\">?</span> <span class=\"op\" style=\"color: #666666;\">-</span>vy : (y<span class=\"op\" style=\"color: #666666;\">+</span>vy <span class=\"op\" style=\"color: #666666;\">&gt;</span> height<span class=\"op\" style=\"color: #666666;\">-</span>MarbleR) <span class=\"op\" style=\"color: #666666;\">?</span> <span class=\"op\" style=\"color: #666666;\">-</span>vy : vy)<span class=\"op\" style=\"color: #666666;\">*</span>.<span class=\"dv\" style=\"color: #40a070;\">99</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb178-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// nearest marble is a collision candidate</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> subdividedSpace <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">quadtree</span>().<span class=\"at\" style=\"color: #7d9029;\">extent</span>([[<span class=\"op\" style=\"color: #666666;\">-</span><span class=\"dv\" style=\"color: #40a070;\">1</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">-1</span>]<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                                                   [<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">width</span><span class=\"op\" style=\"color: #666666;\">+</span><span class=\"dv\" style=\"color: #40a070;\">1</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">height</span><span class=\"op\" style=\"color: #666666;\">+</span><span class=\"dv\" style=\"color: #40a070;\">1</span>]])</a>",
            "<a class=\"sourceLine\" id=\"cb178-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                                          .<span class=\"at\" style=\"color: #7d9029;\">x</span>(d <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"op\" style=\"color: #666666;\">:</span><span class=\"dt\" style=\"color: #902000;\">satisfied</span><span class=\"op\" style=\"color: #666666;\">:</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                                          .<span class=\"at\" style=\"color: #7d9029;\">y</span>(d <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">y</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb178-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                                          .<span class=\"at\" style=\"color: #7d9029;\">addAll</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">marbles</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                                                      .<span class=\"at\" style=\"color: #7d9029;\">filter</span>(m <span class=\"op\" style=\"color: #666666;\">=&gt;</span> id <span class=\"op\" style=\"color: #666666;\">!==</span> <span class=\"va\" style=\"color: #19177c;\">m</span>.<span class=\"at\" style=\"color: #7d9029;\">id</span>))<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">              candidate <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">subdividedSpace</span>.<span class=\"at\" style=\"color: #7d9029;\">find</span>(x<span class=\"op\" style=\"color: #666666;\">,</span> y<span class=\"op\" style=\"color: #666666;\">,</span> MarbleR<span class=\"op\" style=\"color: #666666;\">*</span><span class=\"dv\" style=\"color: #40a070;\">2</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb178-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (candidate) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb178-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// borrowing @air_hadoken&#39;s implementation from here:</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// github.com/airhadoken/game_of_circles/</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">//   blob/master/circles.js#L64</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> cx <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">candidate</span>.<span class=\"at\" style=\"color: #7d9029;\">x</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                  cy <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">candidate</span>.<span class=\"at\" style=\"color: #7d9029;\">y</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                  normx <span class=\"op\" style=\"color: #666666;\">=</span> cx <span class=\"op\" style=\"color: #666666;\">-</span> x<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                  normy <span class=\"op\" style=\"color: #666666;\">=</span> cy <span class=\"op\" style=\"color: #666666;\">-</span> y<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                  dist <span class=\"op\" style=\"color: #666666;\">=</span> (normx <span class=\"op\" style=\"color: #666666;\">**</span> <span class=\"dv\" style=\"color: #40a070;\">2</span> <span class=\"op\" style=\"color: #666666;\">+</span> normy <span class=\"op\" style=\"color: #666666;\">**</span> <span class=\"dv\" style=\"color: #40a070;\">2</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                  c <span class=\"op\" style=\"color: #666666;\">=</span> (_vx <span class=\"op\" style=\"color: #666666;\">*</span> normx <span class=\"op\" style=\"color: #666666;\">+</span> _vy <span class=\"op\" style=\"color: #666666;\">*</span> normy) / dist <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"fl\" style=\"color: #40a070;\">2.3</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb178-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            _vx <span class=\"op\" style=\"color: #666666;\">=</span> (_vx <span class=\"op\" style=\"color: #666666;\">-</span> c <span class=\"op\" style=\"color: #666666;\">*</span> normx)/<span class=\"fl\" style=\"color: #40a070;\">2.3</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            _vy <span class=\"op\" style=\"color: #666666;\">=</span> (_vy <span class=\"op\" style=\"color: #666666;\">-</span> c <span class=\"op\" style=\"color: #666666;\">*</span> normy)/<span class=\"fl\" style=\"color: #40a070;\">2.3</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb178-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"va\" style=\"color: #19177c;\">candidate</span>.<span class=\"at\" style=\"color: #7d9029;\">vx</span> <span class=\"op\" style=\"color: #666666;\">+=</span> <span class=\"op\" style=\"color: #666666;\">-</span>_vx<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"va\" style=\"color: #19177c;\">candidate</span>.<span class=\"at\" style=\"color: #7d9029;\">vy</span> <span class=\"op\" style=\"color: #666666;\">+=</span> <span class=\"op\" style=\"color: #666666;\">-</span>_vy<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"va\" style=\"color: #19177c;\">candidate</span>.<span class=\"at\" style=\"color: #7d9029;\">x</span> <span class=\"op\" style=\"color: #666666;\">+=</span> <span class=\"op\" style=\"color: #666666;\">-</span>_vx<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-36\" title=\"36\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"va\" style=\"color: #19177c;\">candidate</span>.<span class=\"at\" style=\"color: #7d9029;\">y</span> <span class=\"op\" style=\"color: #666666;\">+=</span> <span class=\"op\" style=\"color: #666666;\">-</span>_vy<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-37\" title=\"37\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-38\" title=\"38\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb178-39\" title=\"39\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-40\" title=\"40\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> x <span class=\"op\" style=\"color: #666666;\">+</span> _vx<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-41\" title=\"41\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> y <span class=\"op\" style=\"color: #666666;\">+</span> _vy<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-42\" title=\"42\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">vx</span><span class=\"op\" style=\"color: #666666;\">:</span> _vx<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-43\" title=\"43\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">vy</span><span class=\"op\" style=\"color: #666666;\">:</span> _vy</a>",
            "<a class=\"sourceLine\" id=\"cb178-44\" title=\"44\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-45\" title=\"45\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-46\" title=\"46\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb178-47\" title=\"47\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">marbles</span>.<span class=\"at\" style=\"color: #7d9029;\">forEach</span>((marble<span class=\"op\" style=\"color: #666666;\">,</span> i) <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-48\" title=\"48\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y<span class=\"op\" style=\"color: #666666;\">,</span> vx<span class=\"op\" style=\"color: #666666;\">,</span> vy <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">moveMarble</span>(marble)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-49\" title=\"49\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb178-50\" title=\"50\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">marbles</span>[i].<span class=\"at\" style=\"color: #7d9029;\">x</span> <span class=\"op\" style=\"color: #666666;\">=</span> x<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-51\" title=\"51\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">marbles</span>[i].<span class=\"at\" style=\"color: #7d9029;\">y</span> <span class=\"op\" style=\"color: #666666;\">=</span> y<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-52\" title=\"52\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">marbles</span>[i].<span class=\"at\" style=\"color: #7d9029;\">vx</span> <span class=\"op\" style=\"color: #666666;\">=</span> vx<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-53\" title=\"53\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">marbles</span>[i].<span class=\"at\" style=\"color: #7d9029;\">vy</span> <span class=\"op\" style=\"color: #666666;\">=</span> vy<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-54\" title=\"54\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-55\" title=\"55\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>That‚Äôs a lot of code üòÖ. Let‚Äôs break it down.</p>",
            "<p>",
            "  You can think of",
            "  <code style=\"white-space: pre-wrap;\">simulationStep</code> as a function",
            "  and a loop. At the bottom, there is a",
            "  <code style=\"white-space: pre-wrap;\">.forEach</code> that applies a",
            "  <code style=\"white-space: pre-wrap;\">moveMarble</code> function to each",
            "  marble.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb179\"",
            "  data-caption=\"Loop through marbles\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb179-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">marbles</span>.<span class=\"at\" style=\"color: #7d9029;\">forEach</span>((marble<span class=\"op\" style=\"color: #666666;\">,</span> i) <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb179-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y<span class=\"op\" style=\"color: #666666;\">,</span> vx<span class=\"op\" style=\"color: #666666;\">,</span> vy <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">moveMarble</span>(marble)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb179-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb179-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">marbles</span>[i].<span class=\"at\" style=\"color: #7d9029;\">x</span> <span class=\"op\" style=\"color: #666666;\">=</span> x<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb179-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">marbles</span>[i].<span class=\"at\" style=\"color: #7d9029;\">y</span> <span class=\"op\" style=\"color: #666666;\">=</span> y<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb179-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">marbles</span>[i].<span class=\"at\" style=\"color: #7d9029;\">vx</span> <span class=\"op\" style=\"color: #666666;\">=</span> vx<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb179-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">marbles</span>[i].<span class=\"at\" style=\"color: #7d9029;\">vy</span> <span class=\"op\" style=\"color: #666666;\">=</span> vy<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb179-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  We iterate over the list of marbles, feed them into",
            "  <code style=\"white-space: pre-wrap;\">moveMarble</code>, get new",
            "  properties, and save them in the main marbles array. MobX",
            "  <em>should</em> allows us to change these values inside",
            "  <code style=\"white-space: pre-wrap;\">moveMarble</code> and let MobX",
            "  observables do the heavy lifting, but more explicit code is easier to",
            "  read.",
            "</p>",
            "<h5 id=\"movemarble\">moveMarble</h5>",
            "<p>",
            "  <code style=\"white-space: pre-wrap;\">moveMarble</code> is itself a hairy",
            "  function. Stuff happens in 3 steps:",
            "</p>",
            "<ol type=\"1\">",
            "  <li>Handle collisions with walls</li>",
            "  <li>Find collision with closest other marble</li>",
            "  <li>Handle collision with marble</li>",
            "</ol>",
            "<p>",
            "  <strong>Handling collisions with walls</strong> happens in two lines of",
            "  code. One per axis.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb180\"",
            "  data-caption=\"Detecting wall collisions\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb180-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> _vx <span class=\"op\" style=\"color: #666666;\">=</span> ((x<span class=\"op\" style=\"color: #666666;\">+</span>vx <span class=\"op\" style=\"color: #666666;\">&lt;</span> MarbleR) <span class=\"op\" style=\"color: #666666;\">?</span> <span class=\"op\" style=\"color: #666666;\">-</span>vx : (x<span class=\"op\" style=\"color: #666666;\">+</span>vx <span class=\"op\" style=\"color: #666666;\">&gt;</span> width<span class=\"op\" style=\"color: #666666;\">-</span>MarbleR) <span class=\"op\" style=\"color: #666666;\">?</span> <span class=\"op\" style=\"color: #666666;\">-</span>vx : vx)<span class=\"op\" style=\"color: #666666;\">*</span>.<span class=\"dv\" style=\"color: #40a070;\">99</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb180-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    _vy <span class=\"op\" style=\"color: #666666;\">=</span> ((y<span class=\"op\" style=\"color: #666666;\">+</span>vy <span class=\"op\" style=\"color: #666666;\">&lt;</span> MarbleR) <span class=\"op\" style=\"color: #666666;\">?</span> <span class=\"op\" style=\"color: #666666;\">-</span>vy : (y<span class=\"op\" style=\"color: #666666;\">+</span>vy <span class=\"op\" style=\"color: #666666;\">&gt;</span> height<span class=\"op\" style=\"color: #666666;\">-</span>MarbleR) <span class=\"op\" style=\"color: #666666;\">?</span> <span class=\"op\" style=\"color: #666666;\">-</span>vy : vy)<span class=\"op\" style=\"color: #666666;\">*</span>.<span class=\"dv\" style=\"color: #40a070;\">99</span><span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  Nested ternary expressions are kinda messy, but good enough. If a marble",
            "  is beyond any boundary, we reverse its direction. We",
            "  <em>always</em> apply a",
            "  <code style=\"white-space: pre-wrap;\">.99</code> friction coefficient so",
            "  that marbles slow down.",
            "</p>",
            "<p>",
            "  <strong>Finding collisions</strong> with the next closest marble happens",
            "  using a quadtree. Since we don‚Äôt have too many marbles, we can build a",
            "  new quadtree every time.",
            "</p>",
            "<p>",
            "  {aside} A quadtree is a way to subdivide space into areas. It lets us",
            "  answer the question of ‚ÄúWhat‚Äôs close enough to me to possibly touch me?‚Äù",
            "  without making too many position comparisons.",
            "</p>",
            "<p>",
            "  Checking every marble with every other marble produces 81 comparisons.",
            "  Versus 2 comparisons using a quadtree. {/aside}",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb181\"",
            "  data-caption=\"Finding collision candidates\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb181-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// nearest marble is a collision candidate</span></a>",
            "<a class=\"sourceLine\" id=\"cb181-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> subdividedSpace <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">quadtree</span>().<span class=\"at\" style=\"color: #7d9029;\">extent</span>([[<span class=\"op\" style=\"color: #666666;\">-</span><span class=\"dv\" style=\"color: #40a070;\">1</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">-1</span>]<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb181-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                                           [<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">width</span><span class=\"op\" style=\"color: #666666;\">+</span><span class=\"dv\" style=\"color: #40a070;\">1</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">height</span><span class=\"op\" style=\"color: #666666;\">+</span><span class=\"dv\" style=\"color: #40a070;\">1</span>]])</a>",
            "<a class=\"sourceLine\" id=\"cb181-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                                  .<span class=\"at\" style=\"color: #7d9029;\">x</span>(d <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"op\" style=\"color: #666666;\">:</span>satisfied<span class=\"op\" style=\"color: #666666;\">:</span></a>",
            "<a class=\"sourceLine\" id=\"cb181-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                                  .<span class=\"at\" style=\"color: #7d9029;\">y</span>(d <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">y</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb181-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                                  .<span class=\"at\" style=\"color: #7d9029;\">addAll</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">marbles</span></a>",
            "<a class=\"sourceLine\" id=\"cb181-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                                              .<span class=\"at\" style=\"color: #7d9029;\">filter</span>(m <span class=\"op\" style=\"color: #666666;\">=&gt;</span> id <span class=\"op\" style=\"color: #666666;\">!==</span> <span class=\"va\" style=\"color: #19177c;\">m</span>.<span class=\"at\" style=\"color: #7d9029;\">id</span>))<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb181-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      candidate <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">subdividedSpace</span>.<span class=\"at\" style=\"color: #7d9029;\">find</span>(x<span class=\"op\" style=\"color: #666666;\">,</span> y<span class=\"op\" style=\"color: #666666;\">,</span> MarbleR<span class=\"op\" style=\"color: #666666;\">*</span><span class=\"dv\" style=\"color: #40a070;\">2</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  We‚Äôre using",
            "  <a href=\"https://github.com/d3/d3-quadtree\"",
            "    ><code style=\"white-space: pre-wrap;\">d3-quadtree</code></a",
            "  >",
            "  for the quadtree implementation. It takes an",
            "  <code style=\"white-space: pre-wrap;\">extent</code>, which tells it how",
            "  big our space is. An <code style=\"white-space: pre-wrap;\">x</code> and",
            "  <code style=\"white-space: pre-wrap;\">y</code> accessor tells it how to",
            "  get coordinates out of our marble objects, and we use",
            "  <code style=\"white-space: pre-wrap;\">addAll</code> to fill the quadtree",
            "  with marbles.",
            "</p>",
            "<p>",
            "  To avoid detecting each marble as colliding with itself, we take each",
            "  marble out of our list before feeding the quadtree.",
            "</p>",
            "<p>",
            "  Once we have a quadtree, we use",
            "  <code style=\"white-space: pre-wrap;\">.find</code> to look for the nearest",
            "  marble within two radiuses ‚Äì",
            "  <code style=\"white-space: pre-wrap;\">MarbleR*2</code> ‚Äì of the current",
            "  marble. That‚Äôs exactly the one we‚Äôre colliding with! üòÑ",
            "</p>",
            "<p>",
            "  <strong>Handling collisions with marbles</strong> involves math. The sort",
            "  of thing you think you remember from high school, and suddenly realize",
            "  you don‚Äôt when the time comes to use it.",
            "</p>",
            "<p>Code looks like this:</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb182\"",
            "  data-caption=\"Handling marble collisions\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb182-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (candidate) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb182-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb182-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// borrowing @air_hadoken&#39;s implementation from here:</span></a>",
            "<a class=\"sourceLine\" id=\"cb182-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// github.com/airhadoken/game_of_circles/</span></a>",
            "<a class=\"sourceLine\" id=\"cb182-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">//   blob/master/circles.js#L64</span></a>",
            "<a class=\"sourceLine\" id=\"cb182-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> cx <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">candidate</span>.<span class=\"at\" style=\"color: #7d9029;\">x</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb182-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          cy <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">candidate</span>.<span class=\"at\" style=\"color: #7d9029;\">y</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb182-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          normx <span class=\"op\" style=\"color: #666666;\">=</span> cx <span class=\"op\" style=\"color: #666666;\">-</span> x<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb182-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          normy <span class=\"op\" style=\"color: #666666;\">=</span> cy <span class=\"op\" style=\"color: #666666;\">-</span> y<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb182-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          dist <span class=\"op\" style=\"color: #666666;\">=</span> (normx <span class=\"op\" style=\"color: #666666;\">**</span> <span class=\"dv\" style=\"color: #40a070;\">2</span> <span class=\"op\" style=\"color: #666666;\">+</span> normy <span class=\"op\" style=\"color: #666666;\">**</span> <span class=\"dv\" style=\"color: #40a070;\">2</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb182-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          c <span class=\"op\" style=\"color: #666666;\">=</span> (_vx <span class=\"op\" style=\"color: #666666;\">*</span> normx <span class=\"op\" style=\"color: #666666;\">+</span> _vy <span class=\"op\" style=\"color: #666666;\">*</span> normy) / dist <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"fl\" style=\"color: #40a070;\">2.3</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb182-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb182-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    _vx <span class=\"op\" style=\"color: #666666;\">=</span> (_vx <span class=\"op\" style=\"color: #666666;\">-</span> c <span class=\"op\" style=\"color: #666666;\">*</span> normx)/<span class=\"fl\" style=\"color: #40a070;\">2.3</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb182-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    _vy <span class=\"op\" style=\"color: #666666;\">=</span> (_vy <span class=\"op\" style=\"color: #666666;\">-</span> c <span class=\"op\" style=\"color: #666666;\">*</span> normy)/<span class=\"fl\" style=\"color: #40a070;\">2.3</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb182-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb182-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">candidate</span>.<span class=\"at\" style=\"color: #7d9029;\">vx</span> <span class=\"op\" style=\"color: #666666;\">+=</span> <span class=\"op\" style=\"color: #666666;\">-</span>_vx<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb182-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">candidate</span>.<span class=\"at\" style=\"color: #7d9029;\">vy</span> <span class=\"op\" style=\"color: #666666;\">+=</span> <span class=\"op\" style=\"color: #666666;\">-</span>_vy<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb182-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">candidate</span>.<span class=\"at\" style=\"color: #7d9029;\">x</span> <span class=\"op\" style=\"color: #666666;\">+=</span> <span class=\"op\" style=\"color: #666666;\">-</span>_vx<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb182-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">candidate</span>.<span class=\"at\" style=\"color: #7d9029;\">y</span> <span class=\"op\" style=\"color: #666666;\">+=</span> <span class=\"op\" style=\"color: #666666;\">-</span>_vy<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb182-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb182-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb182-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb182-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> x <span class=\"op\" style=\"color: #666666;\">+</span> _vx<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb182-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> y <span class=\"op\" style=\"color: #666666;\">+</span> _vy<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb182-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">vx</span><span class=\"op\" style=\"color: #666666;\">:</span> _vx<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb182-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">vy</span><span class=\"op\" style=\"color: #666666;\">:</span> _vy</a>",
            "<a class=\"sourceLine\" id=\"cb182-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  Ok, the <code style=\"white-space: pre-wrap;\">return</code> statement",
            "  isn‚Äôt about handling collisions. It updates the current marble.",
            "</p>",
            "<p>",
            "  The rest looks like magic. I implemented it and it still looks like",
            "  magic.",
            "</p>",
            "<p>",
            "  You can think of",
            "  <code style=\"white-space: pre-wrap;\">[normx, normy]</code> as a vector",
            "  that points from current marble to collision candidate. It gives us",
            "  bounce direction. We use the",
            "  <a href=\"https://en.wikipedia.org/wiki/Euclidean_distance\"",
            "    >euclidean distance</a",
            "  >",
            "  formula to calculate the length of this vector. The distance between the",
            "  centers of both marbles.",
            "</p>",
            "<p>",
            "  Then we calculate the",
            "  <a href=\"https://en.wikipedia.org/wiki/Dot_product\">dot product</a>",
            "  between our marble‚Äôs speed vector and the collision direction vector. And",
            "  we normalize it by distance. Multiplying distance by",
            "  <code style=\"white-space: pre-wrap;\">2</code> accounts for there being",
            "  two marbles in the collision. That extra",
            "  <code style=\"white-space: pre-wrap;\">.3</code> made the simulation look",
            "  better.",
            "</p>",
            "<p>",
            "  Fiddling and experimentation are your best tools for magic values like",
            "  that üòâ",
            "</p>",
            "<p>",
            "  Then we use the dot product scalar to adjust the marble‚Äôs speed vector.",
            "  Dividing by <code style=\"white-space: pre-wrap;\">2</code> takes into",
            "  account that half the energy goes to the other marble. This is true",
            "  because we assume their masses are equal.",
            "</p>",
            "<p>",
            "  Finally, we update the",
            "  <code style=\"white-space: pre-wrap;\">candidate</code> marble and make",
            "  sure it bounces off as well. We do it additively because that‚Äôs how it",
            "  happens in real life.",
            "</p>",
            "<p>",
            "  Two marbles traveling towards each other in exactly opposite directions",
            "  with exactly the same speed, will stop dead and stay there. As soon as",
            "  there‚Äôs any misalignment, deflection happens. If one is stationary, it",
            "  starts moving. If it‚Äôs moving in the same direction, it speeds up‚Ä¶ etc.",
            "</p>",
            "<p>",
            "  The end result is",
            "  <a href=\"https://swizec.github.io/declarative-canvas-react-konva/\"",
            "    >a decent-looking simulation of billiards</a",
            "  >.",
            "</p>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "Speedy React alternatives",
      "lectures": [
        {
          "lectureTitle": "Using a React alternative like Preact or Inferno",
          "lectureLines": [
            "<h1 id=\"fractal-tree\">Using a React alternative like Preact or Inferno</h1>",
            "<p>",
            "  We‚Äôve been using React so far, and that‚Äôs worked great. React is fast,",
            "  easy to use, and not too hard to understand. However, two alternative",
            "  frameworks promise the ease of React, but faster with a smaller",
            "  footprint.",
            "</p>",
            "<p>",
            "  <a href=\"https://github.com/developit/preact\"><strong>Preact</strong></a>",
            "  looks just like React when you‚Äôre using it, but the smaller code",
            "  footprint means your apps open faster. Performing fewer sanity checks at",
            "  runtime makes it faster to run too. Async rendering can make your apps",
            "  feel even faster.",
            "</p>",
            "<p>",
            "  <a href=\"https://github.com/infernojs/inferno\"",
            "    ><strong>Inferno</strong></a",
            "  >",
            "  also promises to look just like React when you‚Äôre using it, but its sole",
            "  purpose in life is to be faster. According to its maintainers, converting",
            "  to Inferno can improve performance of your real-world app by up to 110%.",
            "</p>",
            "<p>",
            "  Both Preact and Inferno have a",
            "  <code style=\"white-space: pre-wrap;\">-compat</code> project that lets you",
            "  convert existing React projects without any code modifications. While",
            "  React has gotten much faster in recent years, so have Preact and Inferno.",
            "  You should give them a try.",
            "</p>",
            "<p>I know Uber uses Preact for their Uber lite mobile app.</p>"
          ]
        },
        {
          "lectureTitle": "Stress test your framework with a recursive fractal",
          "lectureLines": [
            "<h2 id=\"stress-test-your-framework-with-a-recursive-fractal\">",
            "  Stress test your framework with a recursive fractal",
            "</h2>",
            "<p>",
            "  To show you how these speed improvements look in real life, I‚Äôve devised",
            "  a stress test. A",
            "  <a href=\"https://en.wikipedia.org/wiki/Pythagoras_tree_(fractal)\"",
            "    >pythagorean fractal tree</a",
            "  >",
            "  that moves around when you move your mouse.",
            "</p>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/pythagorean-tree.png\"",
            "    alt=\"Pythagorean tree\"",
            "  />",
            "  <figcaption>Pythagorean tree</figcaption>",
            "</figure>",
            "<p>",
            "  It‚Äôs a great stress test because a render like this is the worst case",
            "  scenario for tree-based rendering. You have 2048 SVG nodes, deeply",
            "  nested, that all change props and re-render with every change.",
            "</p>",
            "<p>",
            "  You can see",
            "  <a href=\"https://github.com/Swizec/react-fractals\"",
            "    >the full code on Github</a",
            "  >. We‚Äôre going to focus on the recursive",
            "  <code style=\"white-space: pre-wrap;\">&lt;Pythagoras&gt;</code> component.",
            "</p>",
            "<h3 id=\"how-you-too-can-build-a-dancing-tree-fractal\">",
            "  How you too can build a dancing tree fractal",
            "</h3>",
            "<p>",
            "  Equipped with basic trigonometry, you need 3 ingredients to build a",
            "  dancing tree:",
            "</p>",
            "<ul>",
            "  <li>",
            "    a recursive",
            "    <code style=\"white-space: pre-wrap;\">&lt;Pythagoras&gt;</code>",
            "    component",
            "  </li>",
            "  <li>a mousemove listener</li>",
            "  <li>a memoized next-step-props calculation function</li>",
            "</ul>",
            "<p>",
            "  We‚Äôre using a",
            "  <code style=\"white-space: pre-wrap;\">&lt;Pythagoras&gt;</code> component",
            "  for each square and its two children, a D3 mouse listener, and some math",
            "  that a reader helped me with. We need D3 because its mouse listeners",
            "  automatically calculate mouse position relative to SVG coordinates.",
            "  <a href=\"https://en.wikipedia.org/wiki/Memoization\">Memoization</a> in",
            "  the math function helps us keep our code faster.",
            "</p>",
            "<p>",
            "  The",
            "  <code style=\"white-space: pre-wrap;\">&lt;Pythagoras&gt;</code> component",
            "  looks like this:",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb183\"",
            "  data-caption=\"Recursive &lt;Pythagoras&gt; component\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb183-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> Pythagoras <span class=\"op\" style=\"color: #666666;\">=</span> (<span class=\"op\" style=\"color: #666666;\">{</span> w<span class=\"op\" style=\"color: #666666;\">,</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y<span class=\"op\" style=\"color: #666666;\">,</span> heightFactor<span class=\"op\" style=\"color: #666666;\">,</span> lean<span class=\"op\" style=\"color: #666666;\">,</span> left<span class=\"op\" style=\"color: #666666;\">,</span> right<span class=\"op\" style=\"color: #666666;\">,</span> lvl<span class=\"op\" style=\"color: #666666;\">,</span> maxlvl <span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (lvl <span class=\"op\" style=\"color: #666666;\">&gt;=</span> maxlvl <span class=\"op\" style=\"color: #666666;\">||</span> w <span class=\"op\" style=\"color: #666666;\">&lt;</span> <span class=\"dv\" style=\"color: #40a070;\">1</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">null</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb183-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> nextRight<span class=\"op\" style=\"color: #666666;\">,</span> nextLeft<span class=\"op\" style=\"color: #666666;\">,</span> A<span class=\"op\" style=\"color: #666666;\">,</span> B <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">memoizedCalc</span>(<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">w</span><span class=\"op\" style=\"color: #666666;\">:</span> w<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">heightFactor</span><span class=\"op\" style=\"color: #666666;\">:</span> heightFactor<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">lean</span><span class=\"op\" style=\"color: #666666;\">:</span> lean</a>",
            "<a class=\"sourceLine\" id=\"cb183-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb183-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> rotate <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb183-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (left) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        rotate <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"vs\" style=\"color: #4070a0;\">`rotate(</span><span class=\"sc\" style=\"color: #4070a0;\">${</span><span class=\"op\" style=\"color: #666666;\">-</span>A<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\"> 0 </span><span class=\"sc\" style=\"color: #4070a0;\">${</span>w<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">)`</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span><span class=\"cf\" style=\"color: #007020; font-weight: bold;\">else</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (right) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        rotate <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"vs\" style=\"color: #4070a0;\">`rotate(</span><span class=\"sc\" style=\"color: #4070a0;\">${</span>B<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\"> </span><span class=\"sc\" style=\"color: #4070a0;\">${</span>w<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\"> </span><span class=\"sc\" style=\"color: #4070a0;\">${</span>w<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">)`</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb183-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb183-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>g transform<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"vs\" style=\"color: #4070a0;\">`translate(</span><span class=\"sc\" style=\"color: #4070a0;\">${</span>x<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\"> </span><span class=\"sc\" style=\"color: #4070a0;\">${</span>y<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">) </span><span class=\"sc\" style=\"color: #4070a0;\">${</span>rotate<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">`</span><span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>rect width<span class=\"op\" style=\"color: #666666;\">={</span>w<span class=\"op\" style=\"color: #666666;\">}</span> height<span class=\"op\" style=\"color: #666666;\">={</span>w<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                  x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">}</span> y<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                  style<span class=\"op\" style=\"color: #666666;\">={{</span><span class=\"dt\">fill</span><span class=\"op\">:</span> <span class=\"at\">interpolateViridis</span>(lvl/maxlvl)<span class=\"op\">}}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb183-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb183-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>Pythagoras w<span class=\"op\" style=\"color: #666666;\">={</span>nextLeft<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">}</span> y<span class=\"op\" style=\"color: #666666;\">={-</span>nextLeft<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        lvl<span class=\"op\" style=\"color: #666666;\">={</span>lvl<span class=\"op\" style=\"color: #666666;\">+</span><span class=\"dv\" style=\"color: #40a070;\">1</span><span class=\"op\" style=\"color: #666666;\">}</span> maxlvl<span class=\"op\" style=\"color: #666666;\">={</span>maxlvl<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        heightFactor<span class=\"op\" style=\"color: #666666;\">={</span>heightFactor<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        lean<span class=\"op\" style=\"color: #666666;\">={</span>lean<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        left /<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb183-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>Pythagoras w<span class=\"op\" style=\"color: #666666;\">={</span>nextRight<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        x<span class=\"op\" style=\"color: #666666;\">={</span>w<span class=\"op\" style=\"color: #666666;\">-</span>nextRight<span class=\"op\" style=\"color: #666666;\">}</span> y<span class=\"op\" style=\"color: #666666;\">={-</span>nextRight<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        lvl<span class=\"op\" style=\"color: #666666;\">={</span>lvl<span class=\"op\" style=\"color: #666666;\">+</span><span class=\"dv\" style=\"color: #40a070;\">1</span><span class=\"op\" style=\"color: #666666;\">}</span> maxlvl<span class=\"op\" style=\"color: #666666;\">={</span>maxlvl<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-36\" title=\"36\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        heightFactor<span class=\"op\" style=\"color: #666666;\">={</span>heightFactor<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-37\" title=\"37\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        lean<span class=\"op\" style=\"color: #666666;\">={</span>lean<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-38\" title=\"38\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        right /<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-39\" title=\"39\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb183-40\" title=\"40\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        &lt;/g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-41\" title=\"41\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-42\" title=\"42\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">};</span></a></code></pre>",
            "</div>",
            "<p>",
            "  We break out of recursion when we get too deep or try to draw an",
            "  invisible square. Otherwise we:",
            "</p>",
            "<ul>",
            "  <li>",
            "    use <code style=\"white-space: pre-wrap;\">memoizedCalc</code> to do the",
            "    mathematics",
            "  </li>",
            "  <li>",
            "    define different",
            "    <code style=\"white-space: pre-wrap;\">rotate()</code> transforms for the",
            "    <code style=\"white-space: pre-wrap;\">left</code> and",
            "    <code style=\"white-space: pre-wrap;\">right</code> branches",
            "  </li>",
            "  <li>",
            "    return an SVG",
            "    <code style=\"white-space: pre-wrap;\">&lt;rect&gt;</code> for the",
            "    current rectangle, and two",
            "    <code style=\"white-space: pre-wrap;\">&lt;Pythagoras&gt;</code> elements",
            "    for each branch.",
            "  </li>",
            "</ul>",
            "<p>",
            "  Most of this code deals with passing props to children, which isn‚Äôt the",
            "  most elegant approach, but it works. The rest is about positioning",
            "  branches so corners match up.",
            "</p>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/pythagoras-corners-match-up.png\"",
            "    alt=\"Corners matching up\"",
            "  />",
            "  <figcaption>Corners matching up</figcaption>",
            "</figure>",
            "<h4 id=\"the-math\">The math</h4>",
            "<p>",
            "  I don‚Äôt <em>really</em> understand this math, but I sort of know where",
            "  it‚Äôs coming from. It‚Äôs the",
            "  <a href=\"https://en.wikipedia.org/wiki/Law_of_sines\">sine law</a> applied",
            "  correctly. The part I failed at",
            "  <a href=\"https://swizec.com/blog/fractals-react/swizec/7233\"",
            "    >when I tried</a",
            "  >",
            "  to do it myself.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb184\"",
            "  data-caption=\"Trigonometry that moves our fractal\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb184-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> memoizedCalc <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span> () <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb184-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> memo <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{};</span></a>",
            "<a class=\"sourceLine\" id=\"cb184-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb184-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> key <span class=\"op\" style=\"color: #666666;\">=</span> (<span class=\"op\" style=\"color: #666666;\">{</span> w<span class=\"op\" style=\"color: #666666;\">,</span> heightFactor<span class=\"op\" style=\"color: #666666;\">,</span> lean <span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"op\" style=\"color: #666666;\">=&gt;</span> [w<span class=\"op\" style=\"color: #666666;\">,</span>heightFactor<span class=\"op\" style=\"color: #666666;\">,</span> lean].<span class=\"at\" style=\"color: #7d9029;\">join</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;-&#39;</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb184-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb184-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (args) <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb184-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> memoKey <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">key</span>(args)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb184-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb184-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (memo[memoKey]) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb184-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> memo[memoKey]<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb184-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span><span class=\"cf\" style=\"color: #007020; font-weight: bold;\">else</span><span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb184-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> w<span class=\"op\" style=\"color: #666666;\">,</span> heightFactor<span class=\"op\" style=\"color: #666666;\">,</span> lean <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> args<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb184-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb184-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> trigH <span class=\"op\" style=\"color: #666666;\">=</span> heightFactor<span class=\"op\" style=\"color: #666666;\">*</span>w<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb184-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb184-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> result <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb184-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">nextRight</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">Math</span>.<span class=\"at\" style=\"color: #7d9029;\">sqrt</span>(trigH<span class=\"op\" style=\"color: #666666;\">**</span><span class=\"dv\" style=\"color: #40a070;\">2</span> <span class=\"op\" style=\"color: #666666;\">+</span> (w <span class=\"op\" style=\"color: #666666;\">*</span> (.<span class=\"dv\" style=\"color: #40a070;\">5</span><span class=\"op\" style=\"color: #666666;\">+</span>lean))<span class=\"op\" style=\"color: #666666;\">**</span><span class=\"dv\" style=\"color: #40a070;\">2</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb184-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">nextLeft</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">Math</span>.<span class=\"at\" style=\"color: #7d9029;\">sqrt</span>(trigH<span class=\"op\" style=\"color: #666666;\">**</span><span class=\"dv\" style=\"color: #40a070;\">2</span> <span class=\"op\" style=\"color: #666666;\">+</span> (w <span class=\"op\" style=\"color: #666666;\">*</span> (.<span class=\"dv\" style=\"color: #40a070;\">5</span><span class=\"op\" style=\"color: #666666;\">-</span>lean))<span class=\"op\" style=\"color: #666666;\">**</span><span class=\"dv\" style=\"color: #40a070;\">2</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb184-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">A</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">Math</span>.<span class=\"at\" style=\"color: #7d9029;\">deg</span>(<span class=\"va\" style=\"color: #19177c;\">Math</span>.<span class=\"at\" style=\"color: #7d9029;\">atan</span>(trigH / ((.<span class=\"dv\" style=\"color: #40a070;\">5</span><span class=\"op\" style=\"color: #666666;\">-</span>lean) <span class=\"op\" style=\"color: #666666;\">*</span> w)))<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb184-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">B</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">Math</span>.<span class=\"at\" style=\"color: #7d9029;\">deg</span>(<span class=\"va\" style=\"color: #19177c;\">Math</span>.<span class=\"at\" style=\"color: #7d9029;\">atan</span>(trigH / ((.<span class=\"dv\" style=\"color: #40a070;\">5</span><span class=\"op\" style=\"color: #666666;\">+</span>lean) <span class=\"op\" style=\"color: #666666;\">*</span> w)))</a>",
            "<a class=\"sourceLine\" id=\"cb184-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb184-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb184-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            memo[memoKey] <span class=\"op\" style=\"color: #666666;\">=</span> result<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb184-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> result<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb184-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb184-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb184-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre>",
            "</div>",
            "<p>",
            "  We expanded the basic law of sines with a dynamic",
            "  <code style=\"white-space: pre-wrap;\">heightFactor</code> and",
            "  <code style=\"white-space: pre-wrap;\">lean</code> adjustment. We‚Äôll",
            "  control those with mouse movement.",
            "</p>",
            "<p>",
            "  To improve performance our",
            "  <code style=\"white-space: pre-wrap;\">memoizedCalc</code> function has an",
            "  internal data store that maintains a hash of every argument tuple and its",
            "  result. So when we call",
            "  <code style=\"white-space: pre-wrap;\">memoizedCalc</code> with the same",
            "  arguments multiple times, it reads from cache instead of recalculating.",
            "</p>",
            "<p>",
            "  At 11 levels of recursion,",
            "  <code style=\"white-space: pre-wrap;\">memoizedCalc</code> is called 2,048",
            "  times and only returns 11 different results. Great candidate for",
            "  memoization if I ever saw one.",
            "</p>",
            "<p>",
            "  Of course, a benchmark would be great here. Maybe",
            "  <code style=\"white-space: pre-wrap;\">sqrt</code>,",
            "  <code style=\"white-space: pre-wrap;\">atan</code>, and",
            "  <code style=\"white-space: pre-wrap;\">**</code> aren‚Äôt <em>that</em> slow,",
            "  and our real bottleneck is redrawing all those nodes on every mouse move.",
            "  Hint: it totally is.",
            "</p>",
            "<p>",
            "  Our ability to memoize calculation also means that we could, in theory,",
            "  flatten our rendering. Instead of recursion, we could use iteration and",
            "  render in layers. Squares at each level are the same, just at different",
            "  <code style=\"white-space: pre-wrap;\">(x, y)</code> coordinates.",
            "</p>",
            "<p>This, however, would be far too tricky to implement.</p>",
            "<h4 id=\"the-mouse-listener\">The mouse listener</h4>",
            "<p>",
            "  Inside",
            "  <a href=\"https://github.com/Swizec/react-fractals/blob/master/src/App.js\"",
            "    ><code style=\"white-space: pre-wrap;\">App.js</code></a",
            "  >, we add a mouse event listener. We use D3‚Äôs because it gives us",
            "  SVG-relative position calculation out of the box. With React‚Äôs, we‚Äôd have",
            "  to do the hard work ourselves.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb185\"",
            "  data-caption=\"Reacting to mouse movement\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb185-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// App.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">state <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">currentMax</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">baseW</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">80</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">heightFactor</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">lean</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">0</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb185-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"at\" style=\"color: #7d9029;\">componentDidMount</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">d3select</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">refs</span>.<span class=\"at\" style=\"color: #7d9029;\">svg</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb185-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">     .<span class=\"at\" style=\"color: #7d9029;\">on</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;mousemove&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">onMouseMove</span>.<span class=\"at\" style=\"color: #7d9029;\">bind</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb185-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"at\" style=\"color: #7d9029;\">onMouseMove</span>(event) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> [x<span class=\"op\" style=\"color: #666666;\">,</span> y] <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">d3mouse</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">refs</span>.<span class=\"at\" style=\"color: #7d9029;\">svg</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb185-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  scaleFactor <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">scaleLinear</span>().<span class=\"at\" style=\"color: #7d9029;\">domain</span>([<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">height</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">0</span>])</a>",
            "<a class=\"sourceLine\" id=\"cb185-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                             .<span class=\"at\" style=\"color: #7d9029;\">range</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> .<span class=\"op\" style=\"color: #666666;\">:</span><span class=\"dt\" style=\"color: #902000;\">sunglasses</span><span class=\"op\" style=\"color: #666666;\">:</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb185-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  scaleLean <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">scaleLinear</span>().<span class=\"at\" style=\"color: #7d9029;\">domain</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">width</span>/<span class=\"dv\" style=\"color: #40a070;\">2</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">width</span>])</a>",
            "<a class=\"sourceLine\" id=\"cb185-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                           .<span class=\"at\" style=\"color: #7d9029;\">range</span>([.<span class=\"dv\" style=\"color: #40a070;\">5</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"fl\" style=\"color: #40a070;\">-.5</span>])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb185-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">setState</span>(<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">heightFactor</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"at\" style=\"color: #7d9029;\">scaleFactor</span>(y)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">lean</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"at\" style=\"color: #7d9029;\">scaleLean</span>(<span class=\"op\" style=\"color: #666666;\">:</span><span class=\"dt\" style=\"color: #902000;\">satisfied</span><span class=\"op\" style=\"color: #666666;\">:</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb185-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb185-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">&lt;</span>svg ref<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;svg&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span> <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">//...</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">&lt;</span>Pythagoras w<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">baseW</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">              h<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">baseW</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-36\" title=\"36\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">              heightFactor<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">heightFactor</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-37\" title=\"37\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">             lean<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">lean</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-38\" title=\"38\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">             x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">width</span>/<span class=\"dv\" style=\"color: #40a070;\">2-40</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-39\" title=\"39\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">             y<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">height</span><span class=\"op\" style=\"color: #666666;\">-</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">baseW</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-40\" title=\"40\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">             lvl<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-41\" title=\"41\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">             maxlvl<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">currentMax</span><span class=\"op\" style=\"color: #666666;\">}</span>/&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb185-42\" title=\"42\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>A few things happen here:</p>",
            "<ul>",
            "  <li>",
            "    we set initial <code style=\"white-space: pre-wrap;\">lean</code> and",
            "    <code style=\"white-space: pre-wrap;\">heightFactor</code> to",
            "    <code style=\"white-space: pre-wrap;\">0</code>",
            "  </li>",
            "  <li>",
            "    in <code style=\"white-space: pre-wrap;\">componentDidMount</code>, we",
            "    use <code style=\"white-space: pre-wrap;\">d3.select</code> and",
            "    <code style=\"white-space: pre-wrap;\">.on</code> to add a mouse listener",
            "  </li>",
            "  <li>",
            "    we define an",
            "    <code style=\"white-space: pre-wrap;\">onMouseMove</code> method as the",
            "    listener",
            "  </li>",
            "  <li>",
            "    render the first",
            "    <code style=\"white-space: pre-wrap;\">&lt;Pythagoras&gt;</code> using",
            "    values from <code style=\"white-space: pre-wrap;\">state</code>",
            "  </li>",
            "</ul>",
            "<p>",
            "  The <code style=\"white-space: pre-wrap;\">lean</code> parameter tells us",
            "  which way the tree is leaning and how much, the",
            "  <code style=\"white-space: pre-wrap;\">heightFactor</code> tells us how",
            "  high those triangles should be. We control both with the mouse position.",
            "</p>",
            "<p>",
            "  That happens in <code style=\"white-space: pre-wrap;\">onMouseMove</code>:",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb186\"",
            "  data-caption=\"Moving the fractal as user moves mouse\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb186-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"at\" style=\"color: #7d9029;\">onMouseMove</span>(event) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb186-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> [x<span class=\"op\" style=\"color: #666666;\">,</span> y] <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">d3mouse</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">refs</span>.<span class=\"at\" style=\"color: #7d9029;\">svg</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb186-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb186-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  scaleFactor <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">scaleLinear</span>().<span class=\"at\" style=\"color: #7d9029;\">domain</span>([<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">height</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">0</span>])</a>",
            "<a class=\"sourceLine\" id=\"cb186-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                             .<span class=\"at\" style=\"color: #7d9029;\">range</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> .<span class=\"op\" style=\"color: #666666;\">:</span><span class=\"dt\" style=\"color: #902000;\">sunglasses</span><span class=\"op\" style=\"color: #666666;\">:</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb186-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb186-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  scaleLean <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">scaleLinear</span>().<span class=\"at\" style=\"color: #7d9029;\">domain</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">width</span>/<span class=\"dv\" style=\"color: #40a070;\">2</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">width</span>])</a>",
            "<a class=\"sourceLine\" id=\"cb186-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                           .<span class=\"at\" style=\"color: #7d9029;\">range</span>([.<span class=\"dv\" style=\"color: #40a070;\">5</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"fl\" style=\"color: #40a070;\">-.5</span>])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb186-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb186-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">setState</span>(<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb186-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">heightFactor</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"at\" style=\"color: #7d9029;\">scaleFactor</span>(y)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb186-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">lean</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"at\" style=\"color: #7d9029;\">scaleLean</span>(<span class=\"op\" style=\"color: #666666;\">:</span><span class=\"dt\" style=\"color: #902000;\">satisfied</span><span class=\"op\" style=\"color: #666666;\">:</span></a>",
            "<a class=\"sourceLine\" id=\"cb186-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb186-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  <code style=\"white-space: pre-wrap;\">d3mouse</code> - an imported",
            "  <code style=\"white-space: pre-wrap;\">mouse</code> function from",
            "  <code style=\"white-space: pre-wrap;\">d3-selection</code> - gives us",
            "  cursor position relative to the SVG element. Two linear scales give us",
            "  <code style=\"white-space: pre-wrap;\">scaleFactor</code> and",
            "  <code style=\"white-space: pre-wrap;\">scaleLean</code> values, which we",
            "  put into component state.",
            "</p>",
            "<p>",
            "  When we feed a change to",
            "  <code style=\"white-space: pre-wrap;\">this.setState</code>, it triggers a",
            "  re-render of the entire tree, our",
            "  <code style=\"white-space: pre-wrap;\">memoizedCalc</code> function returns",
            "  new values, and the final result is a dancing tree.",
            "</p>",
            "<figure>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/pythagoras-dancing.gif\"",
            "    alt=\"Dancing Pythagoras tree\"",
            "  />",
            "  <figcaption>Dancing Pythagoras tree</figcaption>",
            "</figure>",
            "<p>Beautious. üòç</p>"
          ]
        },
        {
          "lectureTitle": "Stress testing Preact and Inferno",
          "lectureLines": [
            "<h2 id=\"trying-the-stress-test-in-preact-and-inferno\">",
            "  Trying the stress test in Preact and Inferno",
            "</h2>",
            "<p>",
            "  The Pythagoras tree example got converted into 6 different UI libraries:",
            "  React, Preact, Inferno, Vue, Angular 2, and CycleJS.",
            "</p>",
            "<p>",
            "  Mostly by the creators of those libraries themselves because they‚Äôre",
            "  awesome and much smarter than I am. You can see the result, in gifs, on",
            "  <a",
            "    href=\"https://swizec.com/blog/animating-svg-nodes-react-preact-inferno-vue/swizec/7311\"",
            "    >my blog here</a",
            "  >.",
            "</p>",
            "<p>",
            "  We‚Äôre focusing on React-like libraries, so here‚Äôs a rundown of changes",
            "  required for Preact and Inferno with links to full code.",
            "</p>",
            "<h3 id=\"preact\">Preact</h3>",
            "<p>",
            "  Implemented by Jason Miller, creator of Preact.",
            "  <a href=\"https://github.com/developit/preact-fractals\"",
            "    >Full code on Github</a",
            "  >",
            "</p>",
            "<p>",
            "  <img",
            "    src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/preact-pythagora.gif\"",
            "  />",
            "</p>",
            "<p>",
            "  Jason used the",
            "  <code style=\"white-space: pre-wrap;\">preact-compat</code> layer to make",
            "  Preact pretend that it‚Äôs React. This might impact performance.",
            "</p>",
            "<p>",
            "  What I love about the Preact example is that it uses async rendering to",
            "  look smoother. You can see the redraw cycle lag behind the mouse movement",
            "  producing curious effects.",
            "</p>",
            "<p>I like it.</p>",
            "<p>",
            "  Here‚Äôs how he did it:",
            "  <a",
            "    href=\"https://github.com/Swizec/react-fractals/compare/master...developit:master\"",
            "    >full diff on github</a",
            "  >",
            "</p>",
            "<p>",
            "  In <code style=\"white-space: pre-wrap;\">package.json</code>, he added",
            "  <code style=\"white-space: pre-wrap;\">preact</code>,",
            "  <code style=\"white-space: pre-wrap;\">preact-compat</code>, and preact",
            "  -compat clones for React libraries. I guess you need the latter so you",
            "  don‚Äôt have to change your imports.",
            "</p>",
            "<p>",
            "  He changed the functional",
            "  <code style=\"white-space: pre-wrap;\">Pythagoras</code> component into a",
            "  stateful component to enable async rendering.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb187\"",
            "  data-caption=\"Change &lt;Pythagoras&gt; to a class\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb187-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/Pythagoras.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb187-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb187-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">render</span>(props) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb187-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"at\" style=\"color: #7d9029;\">Pythagoras</span>(props)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb187-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb187-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>And enabled debounced asynchronous rendering:</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb188\"",
            "  data-caption=\"Debounce rendering\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb188-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/index.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb188-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">{</span> options <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;preact&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb188-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"va\" style=\"color: #19177c;\">options</span>.<span class=\"at\" style=\"color: #7d9029;\">syncComponentUpdates</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">false</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb188-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb188-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">//option 1:  rIC + setTimeout fallback</span></a>",
            "<a class=\"sourceLine\" id=\"cb188-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> timer<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb188-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"va\" style=\"color: #19177c;\">options</span>.<span class=\"at\" style=\"color: #7d9029;\">debounceRendering</span> <span class=\"op\" style=\"color: #666666;\">=</span> f <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb188-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">clearTimeout</span>(timer)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb188-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    timer <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">setTimeout</span>(f<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">100</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb188-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">requestIdleCallback</span>(f)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb188-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">};</span></a></code></pre>",
            "</div>",
            "<p>",
            "  My favorite part is that you can use Preact as a drop-in replacement for",
            "  React and it Just Works‚Ñ¢ <em>and</em> works well. This is promising for",
            "  anyone who wants a quick win in their codebase.",
            "</p>",
            "<h3 id=\"inferno\">Inferno</h3>",
            "<p>",
            "  Implemented by Dominic Gannaway, creator of Inferno.",
            "  <a href=\"https://github.com/trueadm/inferno-fractals\"",
            "    >Full code on Github</a",
            "  >",
            "</p>",
            "<p>",
            "  You <em>can</em> use Inferno as a drop-in replacement for React, and I",
            "  did when I tried to build this myself. Dominic says that impacts",
            "  performance, though, so he made a proper fork. You can see the",
            "  <a",
            "    href=\"https://github.com/Swizec/react-fractals/compare/master...trueadm:master\"",
            "    >full diff on Github</a",
            "  >",
            "</p>",
            "<p>",
            "  Dominic changed all",
            "  <code style=\"white-space: pre-wrap;\">react-scripts</code> references to",
            "  <code style=\"white-space: pre-wrap;\">inferno-scripts</code>, and it‚Äôs a",
            "  good sign that such a thing exists. He also changed the",
            "  <code style=\"white-space: pre-wrap;\">react</code> dependency to",
            "  <code style=\"white-space: pre-wrap;\">inferno-beta36</code>, but I‚Äôm sure",
            "  it‚Äôs out of beta by the time you‚Äôre reading this. The experiment was done",
            "  in December 2016.",
            "</p>",
            "<p>",
            "  From there, the main changes are to the imports ‚Äì¬†React becomes Inferno",
            "  ‚Äì¬†and he changed some class methods to bound fat arrow functions.",
            "  Probably a stylistic choice.",
            "</p>",
            "<p>",
            "  He also had to change a string-based ref into a callback ref. Inferno",
            "  doesn‚Äôt do string-based refs for performance reasons, and we need refs so",
            "  we can use D3 to detect mouse position on SVG.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb189\"",
            "  data-caption=\"Change ref to callback\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb189-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/App.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb189-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb189-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> App <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> Component <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb189-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb189-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  svgElemeRef <span class=\"op\" style=\"color: #666666;\">=</span> (domNode) <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb189-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">svgElement</span> <span class=\"op\" style=\"color: #666666;\">=</span> domNode<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb189-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb189-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb189-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb189-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ..</span></a>",
            "<a class=\"sourceLine\" id=\"cb189-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>svg width<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">width</span><span class=\"op\" style=\"color: #666666;\">}</span> height<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">height</span><span class=\"op\" style=\"color: #666666;\">}</span> ref<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">svgElemeRef</span> <span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb189-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  In the core",
            "  <code style=\"white-space: pre-wrap;\">Pythagoras</code> component, he",
            "  added two Inferno-specific props:",
            "  <code style=\"white-space: pre-wrap;\">noNormalize</code> and",
            "  <code style=\"white-space: pre-wrap;\">hasNonKeyedChildren</code>.",
            "</p>",
            "<p>",
            "  According to",
            "  <a href=\"https://github.com/trueadm/inferno/issues/565\">this issue</a>,",
            "  <code style=\"white-space: pre-wrap;\">noNormalize</code> is a",
            "  benchmark-focused flag that improves performance, and I can‚Äôt figure out",
            "  what",
            "  <code style=\"white-space: pre-wrap;\">hasNonKeyedChildren</code> does. I",
            "  assume both are performance optimizations for the Virtual DOM diffing",
            "  algorithm.",
            "</p>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "Refactor your components with React Hooks",
      "lectures": [
        {
          "lectureTitle": "An intro to hooks",
          "lectureLines": [
            "<h1 id=\"refactor-your-components-with-react-hooks\">",
            "  Refactor your components with React Hooks",
            "</h1>",
            "<p>",
            "  Hooks launched with great fanfare and community excitement in February",
            "  2019. A whole new way to write React components.",
            "</p>",
            "<p>",
            "  Not a fundamental change, the React team would say, but a mind shift",
            "  after all. A change in how you think about state, side effects, and",
            "  component structure. You might not like hooks at first. With a little",
            "  practice they‚Äôre going to feel more natural than the component lifecycle",
            "  model you‚Äôre used to now.",
            "</p>",
            "<p>Hooks exist to:</p>",
            "<ul>",
            "  <li>help you write less code for little bits of logic</li>",
            "  <li>help you move logic out of your components</li>",
            "  <li>help you reuse logic between components</li>",
            "</ul>",
            "<p>",
            "  Some say it removes complexity around the",
            "  <code style=\"white-space: pre-wrap;\">this</code> keyword in JavaScript",
            "  and I‚Äôm not sure that it does. Yes, there‚Äôs no more",
            "  <code style=\"white-space: pre-wrap;\">this</code> because everything is a",
            "  function, that‚Äôs true. But you replace that with passing a lot of",
            "  function arguments around and being careful about function scope.",
            "</p>",
            "<p>",
            "  My favorite React Hooks magic trick is that you can and should write your",
            "  own. Reusable or not, a custom hook almost always cleans up your code.",
            "</p>",
            "<p>",
            "  Oh and good news! Hooks are backwards compatible. You can write new stuff",
            "  with hooks and keep your old stuff unchanged. üëå",
            "</p>",
            "<p>",
            "  In this section we‚Äôre going to look at the core React hooks, talk about",
            "  the most important hook for dataviz, then refactor our big example from",
            "  earlier to use hooks.",
            "</p>",
            "<p>",
            "  You‚Äôll need to upgrade React to at least version",
            "  <code style=\"white-space: pre-wrap;\">16.8.0</code> to use hooks.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "useState, useEffect, and useContext",
          "lectureLines": [
            "<h2 id=\"usestate-useeffect-and-usecontext\">",
            "  useState, useEffect, and useContext",
            "</h2>",
            "<p>",
            "  React comes with",
            "  <a href=\"https://reactjs.org/docs/hooks-reference.html\"",
            "    >a bunch of basic and advanced hooks</a",
            "  >. The core hooks are:",
            "</p>",
            "<ul>",
            "  <li>",
            "    <code style=\"white-space: pre-wrap;\">useState</code> for managing state",
            "  </li>",
            "  <li>",
            "    <code style=\"white-space: pre-wrap;\">useEffect</code> for side-effects",
            "  </li>",
            "  <li>",
            "    <code style=\"white-space: pre-wrap;\">useContext</code> for React‚Äôs",
            "    context API",
            "  </li>",
            "</ul>",
            "<p>Here‚Äôs how to think about them in a nutshell üëá</p>",
            "<h3 id=\"usestate\">useState</h3>",
            "<p>",
            "  The <code style=\"white-space: pre-wrap;\">useState</code> hook replaces",
            "  pairs of state getters and setters.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb190\"",
            "  data-caption=\"State without hooks\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb190-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> myComponent <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb190-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    state <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb190-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"dt\" style=\"color: #902000;\">value</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;default&#39;</span></a>",
            "<a class=\"sourceLine\" id=\"cb190-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb190-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb190-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    handleChange <span class=\"op\" style=\"color: #666666;\">=</span> (e) <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">setState</span>(<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb190-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"dt\" style=\"color: #902000;\">value</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">e</span>.<span class=\"va\" style=\"color: #19177c;\">target</span>.<span class=\"at\" style=\"color: #7d9029;\">value</span></a>",
            "<a class=\"sourceLine\" id=\"cb190-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb190-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb190-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb190-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> value <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb190-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb190-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">&lt;</span>input value<span class=\"op\" style=\"color: #666666;\">={</span>value<span class=\"op\" style=\"color: #666666;\">}</span> onChange<span class=\"op\" style=\"color: #666666;\">={</span>handleChange<span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb190-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb190-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>üëá</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb191\"",
            "  data-caption=\"useState hook\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb191-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> myComponent <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb191-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> [value<span class=\"op\" style=\"color: #666666;\">,</span> setValue] <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">useState</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;default&#39;</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb191-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb191-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> handleChange <span class=\"op\" style=\"color: #666666;\">=</span> (e) <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"at\" style=\"color: #7d9029;\">setValue</span>(<span class=\"va\" style=\"color: #19177c;\">e</span>.<span class=\"va\" style=\"color: #19177c;\">target</span>.<span class=\"at\" style=\"color: #7d9029;\">value</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb191-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb191-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">&lt;</span>input value<span class=\"op\" style=\"color: #666666;\">={</span>value<span class=\"op\" style=\"color: #666666;\">}</span> onChange<span class=\"op\" style=\"color: #666666;\">={</span>handleChange<span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb191-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>Less code to write and understand.</p>",
            "<p>In a class component you:</p>",
            "<ul>",
            "  <li>set a default value</li>",
            "  <li>",
            "    create an <code style=\"white-space: pre-wrap;\">onChange</code> callback",
            "    that fires <code style=\"white-space: pre-wrap;\">setState</code>",
            "  </li>",
            "  <li>read value from state before rendering etc.</li>",
            "</ul>",
            "<p>",
            "  Without modern fat arrow syntax you might run into trouble with binds.",
            "</p>",
            "<p>",
            "  The hook approach moves that boilerplate to React‚Äôs plate. You call",
            "  <code style=\"white-space: pre-wrap;\">useState</code>. It takes a default",
            "  value and returns a getter and a setter.",
            "</p>",
            "<p>You call that setter in your change handler.</p>",
            "<p>",
            "  Behind the scenes React subscribes your component to that change. Your",
            "  component re-renders.",
            "</p>",
            "<h3 id=\"useeffect\">useEffect</h3>",
            "<p>",
            "  <code style=\"white-space: pre-wrap;\">useEffect</code> replaces the",
            "  <code style=\"white-space: pre-wrap;\">componentDidMount</code>,",
            "  <code style=\"white-space: pre-wrap;\">componentDidUpdate</code>,",
            "  <code style=\"white-space: pre-wrap;\">shouldComponentUpdate</code>,",
            "  <code style=\"white-space: pre-wrap;\">componentWillUnmount</code>",
            "  quadfecta. It‚Äôs like a trifecta, but four.",
            "</p>",
            "<p>",
            "  Say you want a side-effect when your component updates, like make an API",
            "  call. Gotta run it on mount and update. Want to subscribe to a DOM event?",
            "  Gotta unsubscribe on unmount.",
            "</p>",
            "<p>",
            "  Wanna do all this only when certain props change? Gotta check for that.",
            "</p>",
            "<p>Class:</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb192\"",
            "  data-caption=\"Side-effects without hooks\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb192-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> myComp <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> Component <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb192-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  state <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb192-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"dt\" style=\"color: #902000;\">value</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;default&#39;</span></a>",
            "<a class=\"sourceLine\" id=\"cb192-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb192-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb192-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    handleChange <span class=\"op\" style=\"color: #666666;\">=</span> (e) <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">setState</span>(<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb192-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"dt\" style=\"color: #902000;\">value</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">e</span>.<span class=\"va\" style=\"color: #19177c;\">target</span>.<span class=\"at\" style=\"color: #7d9029;\">value</span></a>",
            "<a class=\"sourceLine\" id=\"cb192-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb192-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb192-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    saveValue <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"at\" style=\"color: #7d9029;\">fetch</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;/my/endpoint&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb192-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">method</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;POST&#39;</span></a>",
            "<a class=\"sourceLine\" id=\"cb192-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">body</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">value</span></a>",
            "<a class=\"sourceLine\" id=\"cb192-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb192-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb192-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">componentDidMount</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb192-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">saveValue</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb192-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb192-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb192-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">componentDidUpdate</span>(prevProps<span class=\"op\" style=\"color: #666666;\">,</span> prevState) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb192-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (<span class=\"va\" style=\"color: #19177c;\">prevState</span>.<span class=\"at\" style=\"color: #7d9029;\">value</span> <span class=\"op\" style=\"color: #666666;\">!==</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">value</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb192-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">saveValue</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb192-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb192-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb192-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb192-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb192-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> value <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb192-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb192-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">&lt;</span>input value<span class=\"op\" style=\"color: #666666;\">={</span>value<span class=\"op\" style=\"color: #666666;\">}</span> onChange<span class=\"op\" style=\"color: #666666;\">={</span>handleChange<span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb192-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb192-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>üëá</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb193\"",
            "  data-caption=\"useEffect hook\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb193-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> myComponent <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb193-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> [value<span class=\"op\" style=\"color: #666666;\">,</span> setValue] <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">useState</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;default&#39;</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb193-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb193-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> handleChange <span class=\"op\" style=\"color: #666666;\">=</span> (e) <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"at\" style=\"color: #7d9029;\">setValue</span>(<span class=\"va\" style=\"color: #19177c;\">e</span>.<span class=\"va\" style=\"color: #19177c;\">target</span>.<span class=\"at\" style=\"color: #7d9029;\">value</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb193-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> saveValue <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"at\" style=\"color: #7d9029;\">fetch</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;/my/endpoint&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb193-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">method</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;POST&#39;</span></a>",
            "<a class=\"sourceLine\" id=\"cb193-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">body</span><span class=\"op\" style=\"color: #666666;\">:</span> value</a>",
            "<a class=\"sourceLine\" id=\"cb193-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb193-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb193-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">useEffect</span>(saveValue<span class=\"op\" style=\"color: #666666;\">,</span> [value])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb193-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb193-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">&lt;</span>input value<span class=\"op\" style=\"color: #666666;\">={</span>value<span class=\"op\" style=\"color: #666666;\">}</span> onChange<span class=\"op\" style=\"color: #666666;\">={</span>handleChange<span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb193-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>So much less code!</p>",
            "<p>",
            "  <code style=\"white-space: pre-wrap;\">useEffect</code> runs your function",
            "  on <code style=\"white-space: pre-wrap;\">componentDidMount</code> and",
            "  <code style=\"white-space: pre-wrap;\">componentDidUpdate</code>. And that",
            "  second argument, the",
            "  <code style=\"white-space: pre-wrap;\">[value]</code> part, tells it to run",
            "  only when <code style=\"white-space: pre-wrap;\">value</code> changes.",
            "</p>",
            "<p>",
            "  No need to double check with a conditional. If your effect updates the",
            "  component itself through a state setter, the second argument acts as a",
            "  <code style=\"white-space: pre-wrap;\">shouldComponentUpdate</code> of",
            "  sorts.",
            "</p>",
            "<p>",
            "  When you return a method from",
            "  <code style=\"white-space: pre-wrap;\">useEffect</code>, it acts as a",
            "  <code style=\"white-space: pre-wrap;\">componentWillUnmount</code>.",
            "  Listening to, say, your mouse position looks like this:",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb194\"",
            "  data-caption=\"A mouse listener hook\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb194-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> [mouseX<span class=\"op\" style=\"color: #666666;\">,</span> setMouseX] <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">useState</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb194-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> handleMouse <span class=\"op\" style=\"color: #666666;\">=</span> (e) <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"at\" style=\"color: #7d9029;\">setMouseX</span>(<span class=\"va\" style=\"color: #19177c;\">e</span>.<span class=\"at\" style=\"color: #7d9029;\">screenX</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb194-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb194-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"at\" style=\"color: #7d9029;\">useEffect</span>(() <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb194-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">window</span>.<span class=\"at\" style=\"color: #7d9029;\">addEventListener</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;mousemove&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> handleMouse)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb194-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> () <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">window</span>.<span class=\"at\" style=\"color: #7d9029;\">removeEventListener</span>(handleMouse)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb194-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span>)</a></code></pre>",
            "</div>",
            "<p>Neat :okay_hand:</p>",
            "<h3 id=\"usecontext\">useContext</h3>",
            "<p>",
            "  <code style=\"white-space: pre-wrap;\">useContext</code> cleans up your",
            "  render prop callbacky hell.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb195\"",
            "  data-caption=\"Context without hooks\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb195-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> SomeContext <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">createContext</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb195-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb195-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb195-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb195-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">&lt;</span><span class=\"va\" style=\"color: #19177c;\">SomeContext</span>.<span class=\"at\" style=\"color: #7d9029;\">Consumer</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb195-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">{</span>state <span class=\"op\" style=\"color: #666666;\">=&gt;</span> ...<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb195-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">&lt;/<span class=\"va\" style=\"color: #19177c;\">SomeContext</span>.<span class=\"at\" style=\"color: #7d9029;\">Consumer</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a></code></pre>",
            "</div>",
            "<p>üëá</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb196\"",
            "  data-caption=\"Context with hooks\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb196-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> state <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">useContext</span>(SomeContext)</a></code></pre>",
            "</div>",
            "<p>",
            "  Context state becomes just a value in your function. React auto",
            "  subscribes to all updates.",
            "</p>",
            "<p>",
            "  And those are the core hooks. useState, useEffect, and useContext. You",
            "  can use them to build almost everything. :okay_hand:",
            "</p>"
          ]
        },
        {
          "lectureTitle": "useMemo is your new best friend",
          "lectureLines": [
            "<h2 id=\"usememo-is-your-new-best-dataviz-friend\">",
            "  useMemo is your new best dataviz friend",
            "</h2>",
            "<p>",
            "  My favorite hook for making React and D3 work together is",
            "  <code style=\"white-space: pre-wrap;\">useMemo</code>. It‚Äôs like a",
            "  combination of <code style=\"white-space: pre-wrap;\">useEffect</code> and",
            "  <code style=\"white-space: pre-wrap;\">useState</code>.",
            "</p>",
            "<p>",
            "  Remember how the rest of this course focused on syncing D3‚Äôs internal",
            "  state with React‚Äôs internal state and complications around large datasets",
            "  and speeding up your D3 code to avoid recomputing on every render?",
            "</p>",
            "<p>",
            "  All that goes away with",
            "  <code style=\"white-space: pre-wrap;\">useMemo</code> ‚Äì it memoizes values",
            "  returned from a function and recomputes them when particular props",
            "  change. Think of it like a cache.",
            "</p>",
            "<p>",
            "  Say you have a D3 linear scale. You want to update its range when your",
            "  component‚Äôs width changes.",
            "</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb197\"",
            "  data-caption=\"useMemo for a scale\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb197-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span> <span class=\"at\" style=\"color: #7d9029;\">MyComponent</span>(<span class=\"op\" style=\"color: #666666;\">{</span> data<span class=\"op\" style=\"color: #666666;\">,</span> width <span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb197-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> scale <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">useMemo</span>(() <span class=\"op\" style=\"color: #666666;\">=&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb197-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">scaleLinear</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb197-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            .<span class=\"at\" style=\"color: #7d9029;\">domain</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">1</span>])</a>",
            "<a class=\"sourceLine\" id=\"cb197-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            .<span class=\"at\" style=\"color: #7d9029;\">range</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> width])</a>",
            "<a class=\"sourceLine\" id=\"cb197-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    )<span class=\"op\" style=\"color: #666666;\">,</span> [width])</a>",
            "<a class=\"sourceLine\" id=\"cb197-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb197-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">&lt;</span>g<span class=\"op\" style=\"color: #666666;\">&gt;</span> ... &lt;/g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb197-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre>",
            "</div>",
            "<p>",
            "  <code style=\"white-space: pre-wrap;\">useMemo</code> takes a function that",
            "  returns a value to be memoized. In this case that‚Äôs the linear scale.",
            "</p>",
            "<p>",
            "  You create the scale same way you always would. Initiate a scale, set the",
            "  domain, update the range. No fancypants trickery.",
            "</p>",
            "<p>",
            "  <code style=\"white-space: pre-wrap;\">useMemo</code>‚Äôs second argument",
            "  works much like useEffect‚Äôs does: It tells React which values to observe",
            "  for change. When that value changes,",
            "  <code style=\"white-space: pre-wrap;\">useMemo</code> reruns your function",
            "  and gets a new scale.",
            "</p>",
            "<p>",
            "  Don‚Äôt rely on <code style=\"white-space: pre-wrap;\">useMemo</code> running",
            "  only once however. Memoization is meant as a performance optimization, a",
            "  hint if you will, not as a syntactical guarantee of uniqueness.",
            "</p>",
            "<p>",
            "  And that‚Äôs exactly what we want. No more futzing around with",
            "  <code style=\"white-space: pre-wrap;\">getDerivedStateFromProps</code> and",
            "  <code style=\"white-space: pre-wrap;\">this.state</code>. Just",
            "  <code style=\"white-space: pre-wrap;\">useMemo</code> and leave the rest to",
            "  React. ‚úåÔ∏è",
            "</p>"
          ]
        },
        {
          "lectureTitle": "my useD3 hook",
          "lectureLines": [
            "<h2 id=\"my-used3-hook\">my useD3 hook</h2>",
            "<p>",
            "  Remember when we talked about D3 blackbox rendering? I built a hook for",
            "  that so you don‚Äôt have to mess around with HOCs anymore üòÉ",
            "</p>",
            "<p>",
            "  Read the full docs at",
            "  <a href=\"https://d3blackbox.com/\">d3blackbox.com</a>",
            "</p>",
            "<p>",
            "  It works as a combination of",
            "  <code style=\"white-space: pre-wrap;\">useRef</code> and",
            "  <code style=\"white-space: pre-wrap;\">useEffect</code>. Hooks into",
            "  component re-renders, gives you control of the anchor element, and",
            "  re-runs your D3 render function on every component render.",
            "</p>",
            "<p>You use it like this:</p>",
            "<div",
            "  class=\"sourceCode\"",
            "  id=\"cb198\"",
            "  data-caption=\"useD3 for quick integrations\"",
            "  style=\"overflow: visible; margin: 1em 0;\"",
            ">",
            "  <pre",
            "    class=\"sourceCode javascript\"",
            "    style=\"overflow: visible; margin: 0;\"",
            "  ><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb198-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">{</span> useD3 <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;d3blackbox&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb198-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span> <span class=\"at\" style=\"color: #7d9029;\">renderSomeD3</span>(anchor) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb198-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">select</span>(anchor)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb198-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb198-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb198-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb198-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> MyD3Component <span class=\"op\" style=\"color: #666666;\">=</span> (<span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y <span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb198-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> refAnchor <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">useD3</span>(anchor <span class=\"op\" style=\"color: #666666;\">=&gt;</span> <span class=\"at\" style=\"color: #7d9029;\">renderSomeD3</span>(anchor))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb198-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">&lt;</span>g ref<span class=\"op\" style=\"color: #666666;\">={</span>refAnchor<span class=\"op\" style=\"color: #666666;\">}</span> transform<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"vs\" style=\"color: #4070a0;\">`translate(</span><span class=\"sc\" style=\"color: #4070a0;\">${</span>x<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">, </span><span class=\"sc\" style=\"color: #4070a0;\">${</span>y<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">)`</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb198-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">};</span></a></code></pre>",
            "</div>",
            "<p>",
            "  You‚Äôll see how this works in more detail when we refactor the big example",
            "  to hooks. We‚Äôll use <code style=\"white-space: pre-wrap;\">useD3</code> to",
            "  build axes.",
            "</p>"
          ]
        },
        {
          "lectureTitle": "Refactoring our big example to hooks",
          "lectureLines": [
            "<h2 id=\"refactoring-our-big-example-to-hooks\">",
            "  Refactoring our big example to hooks",
            "</h2>",
            "<p>",
            "  I considered writing this section out as text, but I don‚Äôt think that‚Äôs",
            "  the best way to learn about refactoring. Too many moving pieces. You",
            "  should watch the videos üòÉ",
            "</p>",
            "<p>As always, they‚Äôre cut so you can enjoy bitesized pieces.</p>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "You finished! üöÄ",
      "lectures": [
        {
          "lectureTitle": "You're the best",
          "lectureLines": [
            "<h1 id=\"conclusion\">Conclusion</h1>",
            "<p>You finished the book! You‚Äôre my new favorite person \\o/</p>",
            "<p>",
            "  You‚Äôve built a really big interactive data visualization, a few silly",
            "  animations, learned the basics of Redux and MobX, looked into rendering",
            "  your stuff on canvas, and considered React alternatives.",
            "</p>",
            "<p>",
            "  Right now you might be thinking",
            "  <em",
            "    >‚ÄúHow the hell does this all fit together to help me build interactive",
            "    graphs and charts?‚Äù</em",
            "  >",
            "  You‚Äôve learned the building blocks!",
            "</p>",
            "<p>",
            "  First, you learned the basics. How to make React and D3 like each other,",
            "  how to approach rendering, what to do with state. Then you built a big",
            "  project to see how it fits together.",
            "</p>",
            "<p>",
            "  Then you learned animation basics. How to approach updating components",
            "  with fine grained control and how to do transitions. You learned that",
            "  tricks from the gaming industry work here, too.",
            "</p>",
            "<p>You‚Äôre an expert React slinger now! I think that‚Äôs awesome.</p>",
            "<p>",
            "  Even if you didn‚Äôt build the projects, you still learned the theory. When",
            "  the right problem presents itself, you‚Äôll think of this book and remember",
            "  what to do. Or at least know where to look to find a solution.",
            "</p>",
            "<p>",
            "  At the very least, you know where to look to find a solution. This book",
            "  is yours forever.",
            "</p>",
            "<p>",
            "  I hope you have enjoyed this book. Tweet",
            "  <a href=\"https://twitter.com/Swizec\">@Swizec</a> and tell me what you‚Äôre",
            "  building. üòÑ",
            "</p>",
            "<p>",
            "  Questions? Poke me on twitter. I‚Äôm",
            "  <a href=\"https://twitter.com/Swizec\">@Swizec</a>. Or send me an email to",
            "  <a href=\"mailto:hi@swizec.com\">hi@swizec.com</a>. I read every email and",
            "  reply on a best effort basis.",
            "</p>"
          ]
        }
      ]
    }
  ]
}
