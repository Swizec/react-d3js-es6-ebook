{
  "sections": [
    {
      "sectionTitle": "Introduction",
      "lectures": [
        {
          "lectureTitle": "Hello new friend 👋",
          "lectureLines": [
            "<h1 id=\"introduction\">Introduction</h1>",
            "<p>Hello new friend! 👋</p>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/6300d21408f5e9f0c8f5698d266fb258.jpg\" alt=\"This is me, Swizec\"><figcaption>This is me, Swizec</figcaption>",
            "</figure>",
            "<p>Welcome to what I hope is the best and most fun React and D3 learning resource on the internet. No TODO apps here, just fun interactive stuff that makes you look great at a dinner party.</p>",
            "<p>After an hour with <em>React + D3</em>, you’ll know how to make React and D3.js play together. You’ll know how to create composable data visualizations. Understand <em>why</em> that’s a good idea, and you will have the tools to build your own library of interactive visualization components. Or use <em>and understand</em> somebody else’s.</p>",
            "<p>It’s going to be fun!</p>",
            "<p>I believe learning new tech should be exciting, so I did my best to inject joy whenever I could.</p>",
            "<p>250+ pages as a book, 8 example apps, near 8 hours of video, a bunch of skill building blocks. 👌</p>",
            "<p>Going through this course you will:</p>",
            "<ul>",
            "<li>build a bunch of reusable visualization components</li>",
            "<li>build an interactive data dashboard</li>",
            "<li>learn about reusable animation components</li>",
            "<li>learn the basics of D3.js</li>",
            "<li>master React</li>",
            "<li>learn the basics of Redux and MobX</li>",
            "<li>look into rendering rich animations on canvas</li>",
            "<li>explore React alternatives like Preact and Inferno</li>",
            "<li>learn about server-side rendering</li>",
            "<li>learn a few basics of data science</li>",
            "<li>learn some WebGL and 3D rendering</li>",
            "</ul>",
            "<p>You might be thinking <em>“How the hell does this all fit together to help me build interactive graphs and charts?”</em>. They’re building blocks!</p>",
            "<p>First I will show you the basics. Stuff like how to make React and D3 like each other, how to approach rendering, what to do with state.</p>",
            "<p>Then you’ll build a big project to see how it all fits together.</p>",
            "<p>When you’re comfortable with React and D3 working together, I will show you animation. Cool things like how to approach updating components with fine grained control and how to do transitions. I’ll show you how tricks from the gaming industry work on the web.</p>",
            "<p>Short on time? Don’t worry.</p>",
            "<p>The initial examples work in CodeSandbox, a web-based IDE. Read the explanation, run the code, master enough React to be dangerous. You won’t even have to leave the browser.</p>",
            "<p>In about an hour, you’ll know React and D3 well enough to explore on your own, to sell the tech to your boss and your team, and to assess if the React+D3 combination fits your needs.</p>",
            "<p>I believe learning new tech should be exciting.</p>",
            "<h1 id=\"foreword\">Foreword</h1>",
            "<p>I wrote the first version of React+D3 in Spring 2015 as a dare. Can I learn a thing and write a book in a month? Yes.</p>",
            "<p>That first version was 91 pages long and sold a few hundred copies. Great success!</p>",
            "<p>You are reading, and watching, the pinnacle of how this material has evolved over almost 4 years. 4 years I’ve been working on this. Not every day, not all the time.</p>",
            "<p>Little experiments here and there, launches and relaunches about once a year. Learning how to do video, exploring new approaches, hosting in-person workshops.</p>",
            "<p>A lot has changed.</p>",
            "<p>React isn’t what it used to be. The internals are different, the API is easier to use. Hooks just flipped everything on its head all over again. Suspense and async rendering are here and getting even better.</p>",
            "<p>D3 has seen less change, but still went through major improvements. It’s easier to use now. Easier to understand. More modern.</p>",
            "<p>It feels like the web development world is a different place in late 2018 than it was in early 2015. It really does. Look at my code from 3 years ago and I think <em>“What!? We used to live like this? This is horrible”</em></p>",
            "<p>Almost 200 people bought this version of React+D3 in preorders alone. It started as a book update and grew into a proper online course.</p>",
            "<p>If you’re one of those early supporters, thank you! You are the best. Without you this never would have happened. 🙏</p>",
            "<hr>",
            "<p>Because I think it’s interesting, here’s what I had to say about that first version back in 2015:</p>",
            "<blockquote>",
            "<p>I wrote this book for you as an experiment. The theory we’re testing is that technical content works better as a short e-book than as a long article.</p>",
            "</blockquote>",
            "<blockquote>",
            "<p>You see, the issue with online articles is that they live and die by their length. As soon as you surpass 700 words, everything falls apart. Readers wander off to a different tab in search of memes and funny tweets, never to come back.</p>",
            "</blockquote>",
            "<blockquote>",
            "<p>This hurts my precious writer’s ego, but more importantly, it sucks for you. If you’re not reading, you’re not learning.</p>",
            "</blockquote>",
            "<blockquote>",
            "<p>So here we both are.</p>",
            "</blockquote>",
            "<blockquote>",
            "<p>I’m counting on you to take some time away from the internet, to sit down and read. I’m counting on you to follow the examples. I’m counting on you to <em>learn</em>.</p>",
            "</blockquote>",
            "<blockquote>",
            "<p>You’re counting on me to have invested more time, effort, and care in crafting this than I would have invested in an article. I have.</p>",
            "</blockquote>",
            "<blockquote>",
            "<p>I’ve tried to keep this book as concise as possible. iA Writer estimates it will take you about an hour to read <em>React+d3.js</em>, but playing with the examples might take some time, too.</p>",
            "</blockquote>",
            "<p>A lot of that still rings true. People are distracted, busy, the internet is shiny. It’s hard to sit down and learn stuff.</p>",
            "<p>The most common feedback I get from students goes something like this 👇</p>",
            "<blockquote>",
            "<p>Loving your book! It’s amazing. So clear and concise and relatable. But I read 20 pages, then my wife had a kid, my boss pulled the project, and I’m doing backend now. But truly amazing. I’m gonna get back to it as soon as I can!</p>",
            "</blockquote>",
            "<p>Sometimes they do.</p>",
            "<p>That’s okay. Life happens. I understand. Hell, I procrastinated for months before sitting down to update this stuff 😃</p>",
            "<p>I recommend you go through the basic chapters at least. The little building blocks. You can do that in an afternoon or two. It’s worth it, I promise.</p>"
          ]
        },
        {
          "lectureTitle": "What you need to know",
          "lectureLines": [
            "<h1 id=\"what-you-need-to-know\">What you need to know</h1>",
            "<p>I’m going to assume you already know how to code and that you’re great with JavaScript. Many books have been written to teach the basics of JavaScript; this is not one of them.</p>",
            "<p>If you’re struggling with modern JavaScript syntax, I suggest visiting my <a href=\"https://es6cheatsheet.com\">Interactive ES6 Cheatsheet</a></p>",
            "<p>I’m assuming you’ve tried D3 before, or at least heard of it. You don’t have to know how D3 works, or understand what the code you copy pasted to meet a deadline does. I’ll show you all you need to know.</p>",
            "<p>If you want to learn D3 in depth, there’s plenty of great resources out there. For example, the third edition of my first ever book, <a href=\"https://www.packtpub.com/web-development/d3js-4x-data-visualization-third-edition\">D3.js 4.x Data Visualization - Third Edition</a>. Written by Ændrew Rininsland with some chapters left from yours truly.</p>",
            "<p>As for React, same deal: I expect you have some idea how to use it, but you’ll be fine even if this is your first time looking at React. We’ll go through everything you need to know as it’s happening.</p>",
            "<p>All examples in React + D3 use modern JavaScript. That is JavaScript from ES6 – ES2015 – and beyond. No special mods, just stuff you get by default in all React projects in recent years. Even if some syntax isn’t in the standard yet.</p>",
            "<p>I’m going to explain any new syntax that we use.</p>"
          ]
        },
        {
          "lectureTitle": "How to approach React for Dataviz",
          "lectureLines": [
            "<h2 id=\"how-to-approach-react-for-data-visualization\">How to approach React for Data Visualization</h2>",
            "<p>I recommend starting with an idea, a problem. Something you want to build. A dataset you want to play with. A feature you want to add to your app.</p>",
            "<p>That makes it easier. Helps focus your brain. Notice things in this course that help <em>you</em> specifically.</p>",
            "<p>From there, I think you should see how much time you’ve got. The course is designed so you can go over the important stuff in a couple hours. Watch a video, read some text, try some code. See how it feels.</p>",
            "<p>If the best way is a daily practice, 20 minutes after work, 5 minutes on the pooper, do that. If you’re more of a sit down and cram it out kind of person, a nice Sunday afternoon with some coffee will do just fine.</p>",
            "<p>But don’t make it a chore. We’re here to have fun 😃</p>",
            "<p>Two suggestions ✌️:</p>",
            "<ol type=\"1\">",
            "<li><em>Try</em> the example code. Don’t just copy-paste; type it and execute it. Execute frequently. If something doesn’t fit together, look at the linked Github repositories or solved CodeSandboxes. Each project has one.</li>",
            "<li>If you know something, skip that section. You’re awesome. ❤️</li>",
            "</ol>",
            "<p>React + D3 is based on code samples. They look like this:</p>",
            "<div class=\"sourceCode\" id=\"cb1\" data-caption=\"Some code\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb1-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> foo <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;bar&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb1-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">foo <span class=\"op\" style=\"color: #666666;\">+=</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;more stuff&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>Each code sample starts with a commented out file path. That’s the file you’re editing. Like this:</p>",
            "<div class=\"sourceCode\" id=\"cb2\" data-caption=\"Code samples have file paths\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb2-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ./src/App.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb2-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb2-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> <span class=\"va\" style=\"color: #19177c;\">App</span> ...</a></code></pre></div>",
            "<p>Commands that you should run in the terminal start with an <code style=\"white-space: pre-wrap;\">$</code> symbol, like this:</p>",
            "<pre><code style=\"white-space: pre-wrap;\">$ npm start</code></pre>"
          ]
        },
        {
          "lectureTitle": "Why React and D3",
          "lectureLines": [
            "<h1 id=\"why-react-and-d3\">Why React and D3</h1>",
            "<p>React is Facebook’s approach to writing modern JavaScript front-ends. It encourages building an app out of small, re-usable components. Each component is self-contained and only knows how to render a small bit of the interface.</p>",
            "<p>The catch is that many frameworks have attempted this: everything from Angular to Backbone and jQuery plugins. But where jQuery plugins get become messy, Angular depends too much on HTML structure, and Backbone needs a lot of boilerplate, React has found a sweet spot.</p>",
            "<p>I’ve found React a joy to use. Using React was the first time in my life that I could move a piece of HTML in a modern app without rewriting half my JavaScript. It’s like a super power.</p>",
            "<p>React being the most popular JavaScript framework out there, the world seems to agree. React is great. ⚛️</p>",
            "<p>D3 is Mike Bostock’s infamous data visualization library. It’s used by The New York Times along with many other sites. It is the workhorse of data visualization on the web, and many charting libraries out there are based on it.</p>",
            "<p>But D3 is a fairly low-level library. You can’t just say <em>“I have data; give me a bar chart”</em>. Well, you can, but it takes a few more lines of code than that. Once you get used to it though, D3 is a joy to use.</p>",
            "<p>Just like React, D3 is declarative.</p>",
            "<p>You tell your code <em>what</em> you want instead of <em>how</em> you want it. It gives you access straight to the SVG so you can manipulate your lines and rectangles as you want. The problem is that D3 isn’t so great, if all you want are charts.</p>",
            "<p>That’s where React comes in.</p>",
            "<p>Once you’ve created a histogram component, you can always get a histogram with <code style=\"white-space: pre-wrap;\">&lt;Histogram x=\"5\" ... /&gt;</code>. Once you have a piechart, it’s always <code style=\"white-space: pre-wrap;\">&lt;Piechart x=\"20\" ... /&gt;</code>. Just like they were HTML elements.</p>",
            "<p>Doesn’t that sound like the best? I think it’s amazing.</p>",
            "<p>It gets better!</p>",
            "<p>With React, you can make different graph and chart components share the same data. When your data changes, the whole visualization reacts.</p>",
            "<p>Your graph changes. The title changes. The description changes. Everything changes. Mind, blown.</p>",
            "<p>Look how this H1B salary visualization changes when the user picks a subset of the data to look at.</p>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/full_default_h1b.png\" alt=\"Default H1B histogram\"><figcaption>Default H1B histogram</figcaption>",
            "</figure>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/full_changed_h1b.png\" alt=\"Changes after user picks a data subset\"><figcaption>Changes after user picks a data subset</figcaption>",
            "</figure>",
            "<p>React + D3: a powerful combination indeed.</p>"
          ]
        },
        {
          "lectureTitle": "Buzzword soup explained",
          "lectureLines": [
            "<h1 id=\"buzzword-soup-explained\">Buzzword soup explained</h1>",
            "<p>We’re going to use some buzzwords in this book. Hell, we’ve used some already. Most will get a thorough explanation further on, but let me give you a quick rundown.</p>",
            "<ul>",
            "<li><strong>Babel</strong>, a JavaScript transpiler that makes your code work on all browsers.</li>",
            "<li><strong>ECMAScript2015,16,17,18</strong>, official names for JavaScript as new features come out every summer</li>",
            "<li><strong>ES5</strong>, any JavaScript features that existed before June 2015</li>",
            "<li><strong>ES6</strong> or <strong>ES6+</strong>, a common name for JavaScript as it exists past June 2015</li>",
            "<li><strong>fat arrows</strong>, a new way to define functions in ES6 (<code style=\"white-space: pre-wrap;\">=&gt;</code>)</li>",
            "<li><strong>Git</strong>, a version control system. It’s pretty popular, you probably know it 😃</li>",
            "<li><strong>H1B</strong>, a popular type of work visa in the United States</li>",
            "<li><strong>JSX</strong>, a language/syntax that lets you use <code style=\"white-space: pre-wrap;\">&lt;a href=\"/example\"&gt;</code> as a native part of JavaScript</li>",
            "<li><strong>Mustache</strong>, a popular way to write HTML templates for JavaScript code. Uses <code style=\"white-space: pre-wrap;\">{{ ... }}</code> syntax.</li>",
            "<li><strong>npm</strong>, most popular package manager for JavaScript libraries</li>",
            "<li><strong>props</strong>, component properties set when rendering</li>",
            "<li><strong>state</strong>, a local dictionary of values available in most components</li>",
            "<li><strong>functional components</strong>, React components expressed as pure functions that take props and return markup</li>",
            "<li><strong>Webpack</strong>, a module packager for JavaScript. Makes it more convenient to organize code into multiple files. Provides cool plugins.</li>",
            "</ul>"
          ]
        },
        {
          "lectureTitle": "JSX",
          "lectureLines": [
            "<h1 id=\"jsx\">JSX</h1>",
            "<p>Our components are going to use JSX, a JavaScript syntax extension that lets us treat XML-like data as normal code. You can use React without JSX, but JSX makes React’s full power easier to use.</p>",
            "<p>The gist of JSX is that we can use any XML-like string just like it was part of JavaScript. No Mustache or messy string concatenation necessary. Your functions can return HTML, SVG, or XML.</p>",
            "<p>For instance, code that renders one of our first examples – a color swatch – looks like this:</p>",
            "<div class=\"sourceCode\" id=\"cb4\" data-caption=\"Render a color swatch\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb4-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"va\" style=\"color: #19177c;\">ReactDOM</span>.<span class=\"at\" style=\"color: #7d9029;\">render</span>(</a>",
            "<a class=\"sourceLine\" id=\"cb4-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">&lt;</span>Colors width<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;400&quot;</span> /&gt;<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb4-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">document</span>.<span class=\"at\" style=\"color: #7d9029;\">getElementById</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;svg&#39;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb4-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>Which compiles to:</p>",
            "<div class=\"sourceCode\" id=\"cb5\" data-caption=\"JSX compiled result\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb5-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"va\" style=\"color: #19177c;\">ReactDOM</span>.<span class=\"at\" style=\"color: #7d9029;\">render</span>(</a>",
            "<a class=\"sourceLine\" id=\"cb5-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">createElement</span>(Colors<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"dt\" style=\"color: #902000;\">width</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;400&quot;</span><span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb5-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">document</span>.<span class=\"at\" style=\"color: #7d9029;\">querySelectorAll</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;svg&#39;</span>)[<span class=\"dv\" style=\"color: #40a070;\">0</span>]</a>",
            "<a class=\"sourceLine\" id=\"cb5-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>HTML code translates to <code style=\"white-space: pre-wrap;\">React.createElement</code> calls with attributes translated into a property dictionary. The beauty of this approach is two-pronged: you can use React components as if they were HTML tags, and HTML attributes can be anything.</p>",
            "<p>You’ll see that anything from a simple value to a function or an object works equally well.</p>"
          ]
        },
        {
          "lectureTitle": "What you'll build",
          "lectureLines": [
            "<h1 id=\"the-meat-start\">Visualizing data with React and d3.js</h1>",
            "<p>Welcome to the main part of React + D3 2018. We’re going to talk a little theory, learn some principles, then get our hands dirty with some examples. Through this book you’re going to build:</p>",
            "<ul>",
            "<li><a href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6887721#basic-approach\">A few small components in Codesandbox</a></li>",
            "<li><a href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6888908#choropleth-map\">A choropleth map</a></li>",
            "<li><a href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6888919#histogram-of-salaries\">An interactive histogram</a></li>",
            "<li><a href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6906619#a-bouncing-ball-game-loop-example\">A bouncing ball</a></li>",
            "<li><a href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6906645#swipe-transition\">A swipe transition</a></li>",
            "<li><a href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6906659#animated-alphabet\">An animated alphabet</a></li>",
            "<li><a href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6906668#animating-react-redux\">A simple particle generator with Redux</a></li>",
            "<li><a href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6906689#canvas-react-redux\">A particle generator pushed to 20,000 elements with canvas</a></li>",
            "<li><a href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6906696#build-a-declarative-billiards-simulation-with-mobx-canvas-and-konva\">Billiards simulation with MobX and canvas</a></li>",
            "<li><a href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/8456113#fractal-tree\">A dancing fractal tree</a></li>",
            "</ul>",
            "<p>Looks random, right? Bear with me. Examples build on each other.</p>",
            "<p>The first few examples teach you about static data visualizations and the basics of merging React and D3 using two different approaches.</p>",
            "<p>The choropleth and histogram visualizations teach you about interactivity and components working together.</p>",
            "<p>You learn about game loop and transition animations through two types of bouncing balls. Followed by more complex enter/exit transitions with an animated alphabet.</p>",
            "<p>We look at how far we can push React’s performance with a simple particle generator and a dancing fractal tree. A billiards game helps us learn about complex canvas manipulation.</p>",
            "<p>Throughout these examples, we’re going to use <strong>React 16</strong>, compatible with <strong>React 17</strong>, <strong>D3v5</strong>, and modern <strong>ES6+</strong> JavaScript syntax. The particle generator also uses <strong>Redux</strong> for the game loop and the billiards simulation uses MobX. We use <strong>Konva</strong> for complex canvas stuff.</p>",
            "<p>That way you can build experience in large portions of the React ecosystem so you can choose what you like best.</p>",
            "<p>Don’t worry, if you’re not comfortable with modern JavaScript syntax just yet. By the end of this book, you’re gonna love it!</p>",
            "<p>Until then, here’s an interactive cheatsheet: <a href=\"https://es6cheatsheet.com/\">es6cheatsheet.com</a>. It uses runnable code samples to compare the ES5 way with the ES6 way so you can brush up quickly.</p>",
            "<p>To give you a taste of React alternatives, we’ll check out <strong>Preact</strong>, <strong>Inferno</strong>, and <strong>Vue</strong> in the fractal tree example. They’re component-based UI frameworks similar to React. Preact is tiny, Inferno is fast, and Vue is about as popular as React.</p>",
            "<hr>",
            "<p>Let’s talk about how React and D3 fit together. If there’s just one chapter you should read, this is the one. It explains how things work and fit together. Takes you from beginning to being able to figure out the rest on your own.</p>",
            "<p>Although you should still play with the bigger examples. They’re fun.</p>",
            "<p>This section has five chapters:</p>",
            "<ul>",
            "<li><a href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6887710\">A quick intro to D3</a></li>",
            "<li><a href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6887721#basic-approach\">How React makes D3 easier</a></li>",
            "<li><a href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6887723#existing-libraries\">When should you use an existing library? Which one?</a></li>",
            "<li><a href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6887730#blackbox-components\">Quickly integrate any D3 code in your React project with Blackbox Components</a></li>",
            "<li><a href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6887740#full-feature-integration\">Build scalable dataviz components with full integration</a></li>",
            "<li><a href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6887771#state-handling-architecture\">Handling state in your React app</a></li>",
            "<li><a href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6887772#structuring-your-app\">Structuring your React App</a></li>",
            "</ul>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "A quick intro to D3",
      "lectures": [
        {
          "lectureTitle": "Why D3",
          "lectureLines": [
            "<p>D3 is the best library out there for custom data visualization. It comes with a rich ecosystem of functions for almost anything you can think of. From simple medians, to automatic axis generators, and force diagrams.</p>",
            "<p>Most data visualization you see on the web is built with D3. The New York Times uses it, Guardian uses it, r/dataisbeautiful is full of it.</p>",
            "<p>Learning D3 from scratch is where life gets tricky.</p>",
            "<p>There are several gotchas that trip you up and make examples look like magic. You’ve probably noticed this, if you ever looked at an example project built with D3. They’re full of spaghetti code, global variables, and often aren’t made to be maintainable.</p>",
            "<p>Most examples are just one-off toys after all. It’s art.</p>",
            "<p>A lot of dataviz that <em>isn’t</em> art, is charts and graphs. You’ll often find that using D3 to build those, is too complicated. D3 gives you more power than you need.</p>",
            "<p>If you want charts, I suggest using a charting library.</p>",
            "<p>Where many charting libraries fall short is customization. The API is limited, you can’t do everything you want, and it gets easier to just build it yourself.</p>",
            "<p>A lot of what you end up doing in real life is finding a D3 example that looks like what you want to build and adapting it. That’s why you should learn at least some D3.</p>",
            "<p>But D3 is hard to read. Take this barchart code, for example 👇</p>",
            "<div class=\"sourceCode\" id=\"cb6\" data-caption=\"Barchart in pure D3\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb6-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">tsv</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;data.tsv&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb6-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">frequency</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">+</span><span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">frequency</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb6-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> d<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb6-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">},</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(error<span class=\"op\" style=\"color: #666666;\">,</span> data) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb6-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (error) <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">throw</span> error<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb6-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb6-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">x</span>.<span class=\"at\" style=\"color: #7d9029;\">domain</span>(<span class=\"va\" style=\"color: #19177c;\">data</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">letter</span><span class=\"op\" style=\"color: #666666;\">;</span> <span class=\"op\" style=\"color: #666666;\">}</span>))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb6-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">y</span>.<span class=\"at\" style=\"color: #7d9029;\">domain</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">max</span>(data<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">frequency</span><span class=\"op\" style=\"color: #666666;\">;</span> <span class=\"op\" style=\"color: #666666;\">}</span>)])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb6-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb6-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">g</span>.<span class=\"at\" style=\"color: #7d9029;\">append</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;g&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb6-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;class&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;axis axis--x&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb6-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;transform&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;translate(0,&quot;</span> <span class=\"op\" style=\"color: #666666;\">+</span> height <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"st\" style=\"color: #4070a0;\">&quot😉&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb6-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">call</span>(<span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">axisBottom</span>(x))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb6-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb6-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">g</span>.<span class=\"at\" style=\"color: #7d9029;\">append</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;g&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb6-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;class&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;axis axis--y&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb6-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">call</span>(<span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">axisLeft</span>(y).<span class=\"at\" style=\"color: #7d9029;\">ticks</span>(<span class=\"dv\" style=\"color: #40a070;\">10</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;%&quot;</span>))</a>",
            "<a class=\"sourceLine\" id=\"cb6-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">append</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;text&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb6-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;transform&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;rotate(-90)&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb6-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;y&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">6</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb6-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;dy&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;0.71em&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb6-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;text-anchor&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;end&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb6-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">text</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;Frequency&quot;</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb6-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb6-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">g</span>.<span class=\"at\" style=\"color: #7d9029;\">selectAll</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;.bar&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb6-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">data</span>(data)</a>",
            "<a class=\"sourceLine\" id=\"cb6-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">enter</span>().<span class=\"at\" style=\"color: #7d9029;\">append</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;rect&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb6-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;class&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;bar&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb6-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;x&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"at\" style=\"color: #7d9029;\">x</span>(<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">letter</span>)<span class=\"op\" style=\"color: #666666;\">;</span> <span class=\"op\" style=\"color: #666666;\">}</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb6-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;y&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"at\" style=\"color: #7d9029;\">y</span>(<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">frequency</span>)<span class=\"op\" style=\"color: #666666;\">;</span> <span class=\"op\" style=\"color: #666666;\">}</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb6-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;width&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">x</span>.<span class=\"at\" style=\"color: #7d9029;\">bandwidth</span>())</a>",
            "<a class=\"sourceLine\" id=\"cb6-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;height&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> height <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"at\" style=\"color: #7d9029;\">y</span>(<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">frequency</span>)<span class=\"op\" style=\"color: #666666;\">;</span> <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb6-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>Can you tell what’s going on? I’d need to read it pretty carefully.</p>",
            "<p>Which brings us to 👉</p>"
          ]
        },
        {
          "lectureTitle": "3 key insights to learn D3 from scratch",
          "lectureLines": [
            "<h2 id=\"key-insights-that-help-you-learn-d3.js-from-scratch\">3 key insights that help you learn D3.js from scratch</h2>",
            "<p>Somebody once asked me how to learn D3.js from scratch. I quipped that it took me writing a book to really learn it. It’s one hell of a library.</p>",
            "<p>Most people don’t go that far. They don’t have to.</p>",
            "<p>You start with a problem, find similar examples, do some copy pasta, tweak until it works and end up with a working visualization you don’t understand. You’d be surprised how few engineers actually understand how their D3 data visualization works.</p>",
            "<p>Fear not! There are just 3 key concepts you have to grok. Then you can understand every D3 example out there. 😱</p>"
          ]
        },
        {
          "lectureTitle": "Data vs. DOM manipulation",
          "lectureLines": [
            "<h3 id=\"data-manipulation-vs.-dom-manipulation\">1) Data manipulation vs. DOM manipulation</h3>",
            "<p>All D3 examples are split into two parts:</p>",
            "<ol type=\"1\">",
            "<li>Data manipulation</li>",
            "<li>DOM manipulation</li>",
            "</ol>",
            "<p>First you prep your values, then you render.</p>",
            "<p>You have to go through many examples to notice what’s going on. Inference learning is hard. Most beginners miss this pattern and it makes D3 look more confusing than it is.</p>",
            "<p>Let’s take an example from <a href=\"https://github.com/d3/d3/wiki/Gallery\">D3’s docs</a>, a bar chart with a hover effect.</p>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/barchart-example.png\" alt=\"An example D3 barchart\"><figcaption>An example D3 barchart</figcaption>",
            "</figure>",
            "<p>You can <a href=\"https://cdn.rawgit.com/mbostock/3885304/raw/a91f37f5f4b43269df3dbabcda0090310c05285d/index.html\">try it online</a>. When you hover on a bar, it changes color. Pretty neat.</p>",
            "<p>Mike Bostock, the creator of D3, built this chart in 43 lines of code. Here they are 👇</p>",
            "<div class=\"sourceCode\" id=\"cb7\" data-caption=\"Example D3 barchart\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb7-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">var</span> svg <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">select</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;svg&quot;</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb7-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    margin <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"dt\" style=\"color: #902000;\">top</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">20</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">right</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">20</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">bottom</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">30</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">left</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">40</span><span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb7-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    width <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">+</span><span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;width&quot;</span>) <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"va\" style=\"color: #19177c;\">margin</span>.<span class=\"at\" style=\"color: #7d9029;\">left</span> <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"va\" style=\"color: #19177c;\">margin</span>.<span class=\"at\" style=\"color: #7d9029;\">right</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb7-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    height <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">+</span><span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;height&quot;</span>) <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"va\" style=\"color: #19177c;\">margin</span>.<span class=\"at\" style=\"color: #7d9029;\">top</span> <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"va\" style=\"color: #19177c;\">margin</span>.<span class=\"at\" style=\"color: #7d9029;\">bottom</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb7-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb7-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">var</span> x <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">scaleBand</span>().<span class=\"at\" style=\"color: #7d9029;\">rangeRound</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> width]).<span class=\"at\" style=\"color: #7d9029;\">padding</span>(<span class=\"fl\" style=\"color: #40a070;\">0.1</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb7-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    y <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">scaleLinear</span>().<span class=\"at\" style=\"color: #7d9029;\">rangeRound</span>([height<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">0</span>])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb7-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb7-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">var</span> g <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">append</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;g&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb7-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;transform&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;translate(&quot;</span> <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"va\" style=\"color: #19177c;\">margin</span>.<span class=\"at\" style=\"color: #7d9029;\">left</span> <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;,&quot;</span> <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"va\" style=\"color: #19177c;\">margin</span>.<span class=\"at\" style=\"color: #7d9029;\">top</span> <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"st\" style=\"color: #4070a0;\">&quot😉&quot;</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb7-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb7-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">tsv</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;data.tsv&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb7-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">frequency</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">+</span><span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">frequency</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb7-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> d<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb7-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">},</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(error<span class=\"op\" style=\"color: #666666;\">,</span> data) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb7-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (error) <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">throw</span> error<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb7-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb7-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">x</span>.<span class=\"at\" style=\"color: #7d9029;\">domain</span>(<span class=\"va\" style=\"color: #19177c;\">data</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">letter</span><span class=\"op\" style=\"color: #666666;\">;</span> <span class=\"op\" style=\"color: #666666;\">}</span>))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb7-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">y</span>.<span class=\"at\" style=\"color: #7d9029;\">domain</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">max</span>(data<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">frequency</span><span class=\"op\" style=\"color: #666666;\">;</span> <span class=\"op\" style=\"color: #666666;\">}</span>)])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb7-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb7-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">g</span>.<span class=\"at\" style=\"color: #7d9029;\">append</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;g&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb7-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;class&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;axis axis--x&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb7-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;transform&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;translate(0,&quot;</span> <span class=\"op\" style=\"color: #666666;\">+</span> height <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"st\" style=\"color: #4070a0;\">&quot😉&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb7-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">call</span>(<span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">axisBottom</span>(x))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb7-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb7-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">g</span>.<span class=\"at\" style=\"color: #7d9029;\">append</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;g&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb7-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;class&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;axis axis--y&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb7-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">call</span>(<span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">axisLeft</span>(y).<span class=\"at\" style=\"color: #7d9029;\">ticks</span>(<span class=\"dv\" style=\"color: #40a070;\">10</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;%&quot;</span>))</a>",
            "<a class=\"sourceLine\" id=\"cb7-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">append</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;text&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb7-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;transform&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;rotate(-90)&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb7-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;y&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">6</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb7-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;dy&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;0.71em&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb7-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;text-anchor&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;end&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb7-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">text</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;Frequency&quot;</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb7-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb7-36\" title=\"36\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">g</span>.<span class=\"at\" style=\"color: #7d9029;\">selectAll</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;.bar&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb7-37\" title=\"37\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">data</span>(data)</a>",
            "<a class=\"sourceLine\" id=\"cb7-38\" title=\"38\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">enter</span>().<span class=\"at\" style=\"color: #7d9029;\">append</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;rect&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb7-39\" title=\"39\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;class&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;bar&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb7-40\" title=\"40\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;x&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"at\" style=\"color: #7d9029;\">x</span>(<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">letter</span>)<span class=\"op\" style=\"color: #666666;\">;</span> <span class=\"op\" style=\"color: #666666;\">}</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb7-41\" title=\"41\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;y&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"at\" style=\"color: #7d9029;\">y</span>(<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">frequency</span>)<span class=\"op\" style=\"color: #666666;\">;</span> <span class=\"op\" style=\"color: #666666;\">}</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb7-42\" title=\"42\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;width&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">x</span>.<span class=\"at\" style=\"color: #7d9029;\">bandwidth</span>())</a>",
            "<a class=\"sourceLine\" id=\"cb7-43\" title=\"43\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;height&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> height <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"at\" style=\"color: #7d9029;\">y</span>(<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">frequency</span>)<span class=\"op\" style=\"color: #666666;\">;</span> <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb7-44\" title=\"44\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>There are two parts to this code: Data manipulation and DOM manipulation.</p>",
            "<div class=\"sourceCode\" id=\"cb8\" data-caption=\"Data manipulation code\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb8-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">var</span> <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ..,</span></a>",
            "<a class=\"sourceLine\" id=\"cb8-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    margin <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"dt\" style=\"color: #902000;\">top</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">20</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">right</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">20</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">bottom</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">30</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">left</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">40</span><span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb8-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    width <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">+</span><span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;width&quot;</span>) <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"va\" style=\"color: #19177c;\">margin</span>.<span class=\"at\" style=\"color: #7d9029;\">left</span> <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"va\" style=\"color: #19177c;\">margin</span>.<span class=\"at\" style=\"color: #7d9029;\">right</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb8-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    height <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">+</span><span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;height&quot;</span>) <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"va\" style=\"color: #19177c;\">margin</span>.<span class=\"at\" style=\"color: #7d9029;\">top</span> <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"va\" style=\"color: #19177c;\">margin</span>.<span class=\"at\" style=\"color: #7d9029;\">bottom</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb8-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb8-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">var</span> x <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">scaleBand</span>().<span class=\"at\" style=\"color: #7d9029;\">rangeRound</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> width]).<span class=\"at\" style=\"color: #7d9029;\">padding</span>(<span class=\"fl\" style=\"color: #40a070;\">0.1</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb8-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    y <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">scaleLinear</span>().<span class=\"at\" style=\"color: #7d9029;\">rangeRound</span>([height<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">0</span>])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb8-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb8-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb8-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb8-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">tsv</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;data.tsv&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb8-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">frequency</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">+</span><span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">frequency</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb8-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> d<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb8-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">},</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(error<span class=\"op\" style=\"color: #666666;\">,</span> data) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb8-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (error) <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">throw</span> error<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb8-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb8-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">x</span>.<span class=\"at\" style=\"color: #7d9029;\">domain</span>(<span class=\"va\" style=\"color: #19177c;\">data</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">letter</span><span class=\"op\" style=\"color: #666666;\">;</span> <span class=\"op\" style=\"color: #666666;\">}</span>))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb8-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">y</span>.<span class=\"at\" style=\"color: #7d9029;\">domain</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">max</span>(data<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">frequency</span><span class=\"op\" style=\"color: #666666;\">;</span> <span class=\"op\" style=\"color: #666666;\">}</span>)])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb8-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb8-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb8-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>Bostock here first prepares his data:</p>",
            "<ul>",
            "<li>some sizing variables (<code style=\"white-space: pre-wrap;\">margin</code>, <code style=\"white-space: pre-wrap;\">width</code>, <code style=\"white-space: pre-wrap;\">height</code>)</li>",
            "<li>two scales to help with data-to-coordinates conversion (<code style=\"white-space: pre-wrap;\">x, y</code>)</li>",
            "<li>loads his dataset (<code style=\"white-space: pre-wrap;\">d3.tsv</code>) and updates his scales’ domains</li>",
            "</ul>",
            "<p>In the DOM manipulation part, he puts shapes and objects into an SVG. This is the part that shows up in your browser.</p>",
            "<div class=\"sourceCode\" id=\"cb9\" data-caption=\"DOM manipulation code\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb9-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">var</span> svg <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">select</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;svg&quot;</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb9-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ..</span></a>",
            "<a class=\"sourceLine\" id=\"cb9-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb9-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ..</span></a>",
            "<a class=\"sourceLine\" id=\"cb9-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb9-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">var</span> g <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">append</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;g&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb9-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;transform&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;translate(&quot;</span> <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"va\" style=\"color: #19177c;\">margin</span>.<span class=\"at\" style=\"color: #7d9029;\">left</span> <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;,&quot;</span> <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"va\" style=\"color: #19177c;\">margin</span>.<span class=\"at\" style=\"color: #7d9029;\">top</span> <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"st\" style=\"color: #4070a0;\">&quot😉&quot;</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb9-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb9-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ..</span></a>",
            "<a class=\"sourceLine\" id=\"cb9-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">g</span>.<span class=\"at\" style=\"color: #7d9029;\">append</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;g&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb9-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;class&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;axis axis--x&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb9-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;transform&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;translate(0,&quot;</span> <span class=\"op\" style=\"color: #666666;\">+</span> height <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"st\" style=\"color: #4070a0;\">&quot😉&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb9-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">call</span>(<span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">axisBottom</span>(x))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb9-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb9-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">g</span>.<span class=\"at\" style=\"color: #7d9029;\">append</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;g&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb9-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;class&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;axis axis--y&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb9-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">call</span>(<span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">axisLeft</span>(y).<span class=\"at\" style=\"color: #7d9029;\">ticks</span>(<span class=\"dv\" style=\"color: #40a070;\">10</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;%&quot;</span>))</a>",
            "<a class=\"sourceLine\" id=\"cb9-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">append</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;text&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb9-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;transform&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;rotate(-90)&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb9-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;y&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">6</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb9-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;dy&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;0.71em&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb9-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;text-anchor&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;end&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb9-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">text</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;Frequency&quot;</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb9-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb9-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">g</span>.<span class=\"at\" style=\"color: #7d9029;\">selectAll</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;.bar&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb9-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">data</span>(data)</a>",
            "<a class=\"sourceLine\" id=\"cb9-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">enter</span>().<span class=\"at\" style=\"color: #7d9029;\">append</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;rect&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb9-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;class&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;bar&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb9-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;x&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"at\" style=\"color: #7d9029;\">x</span>(<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">letter</span>)<span class=\"op\" style=\"color: #666666;\">;</span> <span class=\"op\" style=\"color: #666666;\">}</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb9-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;y&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"at\" style=\"color: #7d9029;\">y</span>(<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">frequency</span>)<span class=\"op\" style=\"color: #666666;\">;</span> <span class=\"op\" style=\"color: #666666;\">}</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb9-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;width&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">x</span>.<span class=\"at\" style=\"color: #7d9029;\">bandwidth</span>())</a>",
            "<a class=\"sourceLine\" id=\"cb9-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;height&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> height <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"at\" style=\"color: #7d9029;\">y</span>(<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">frequency</span>)<span class=\"op\" style=\"color: #666666;\">;</span> <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb9-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">})<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>DOM manipulation in D3 happens via D3 selections. They’re a lot like jQuery <code style=\"white-space: pre-wrap;\">$(something)</code>. This is the part we’re doing with React later on.</p>",
            "<p>Here Bostock does a few things</p>",
            "<ul>",
            "<li>selects the <code style=\"white-space: pre-wrap;\">&lt;svg&gt;</code> node (<code style=\"white-space: pre-wrap;\">d3.select</code>)</li>",
            "<li>appends a grouping <code style=\"white-space: pre-wrap;\">&lt;g&gt;</code> node (<code style=\"white-space: pre-wrap;\">.append</code>) with an SVG positioning attribute (translate)</li>",
            "<li>adds a bottom axis by appending a <code style=\"white-space: pre-wrap;\">&lt;g&gt;</code>, moving it, then calling <code style=\"white-space: pre-wrap;\">d3.axisBottom</code> on it. D3 has built-in axis generators</li>",
            "<li>adds a left axis using the same approach but rotating the ticks</li>",
            "<li>appends a text label “Frequency” to the left axis</li>",
            "<li>uses <code style=\"white-space: pre-wrap;\">selectAll.data</code> to make a virtual selection of <code style=\"white-space: pre-wrap;\">.bar</code> nodes and attach some data, then for every new data value (.enter), appends a <code style=\"white-space: pre-wrap;\">&lt;rect&gt;</code> node and gives it attributes</li>",
            "</ul>",
            "<p>That last part is where people get lost. It looks like magic. Even to me.</p>",
            "<p>It’s a declarative approach to rendering data. Works great, hard to understand. That’s why we’ll do it in React instead 😃</p>",
            "<p>You can think of <code style=\"white-space: pre-wrap;\">.enter</code> as a loop over your data. Everything chained after <code style=\"white-space: pre-wrap;\">.enter</code> is your loop’s body. Sort of like doing <code style=\"white-space: pre-wrap;\">data.map(d =&gt; append(rect).setManyAttributes())</code></p>",
            "<p>That function executes for any <em>new</em> data “entering” your visualization. There’s also <code style=\"white-space: pre-wrap;\">.exit</code> for anything that’s dropping out, and <code style=\"white-space: pre-wrap;\">.update</code> for anything that’s changing.</p>"
          ]
        },
        {
          "lectureTitle": "Scales",
          "lectureLines": [
            "<h3 id=\"scales\">2) Scales</h3>",
            "<p>Scales are D3’s most versatile concept. They help you translate between two different spaces. Like, mathematical spaces.</p>",
            "<p>They’re like the mathematical functions you learned about in school. A domain maps to a range using some sort of formula.</p>",
            "<figure>",
            "<img src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/d/df/Function_color_example_3.svg/440px-Function_color_example_3.svg.png\" alt=\"A basic function\"><figcaption>A basic function</figcaption>",
            "</figure>",
            "<p>Colored shapes in the domain map to colors in the range. No formula for this one. That makes it an ordinal scale.</p>",
            "<div class=\"sourceCode\" id=\"cb10\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb10-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> shapes <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">scaleOrdinal</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb10-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  .<span class=\"at\" style=\"color: #7d9029;\">domain</span>([<span class=\"st\" style=\"color: #4070a0;\">&#39;red&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;orange&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> ...)</a>",
            "<a class=\"sourceLine\" id=\"cb10-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  .<span class=\"at\" style=\"color: #7d9029;\">range</span>([<span class=\"st\" style=\"color: #4070a0;\">&#39;red&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;orange&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> ...)</a></code></pre></div>",
            "<p><a href=\"https://codesandbox.io/s/r0rw72z75o\">Play with scales on CodeSandbox</a></p>",
            "<iframe src=\"https://codesandbox.io/embed/r0rw72z75o?codemirror=1&amp;view=split\" style=\"width:100%; height:500px; border😮; border-radius: 4px; overflow:hidden;\" sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\">",
            "</iframe>",
            "<p>Once you have this scale, you can use it to translate from shapes to colors. <code style=\"white-space: pre-wrap;\">shapes('red triangle')</code> returns <code style=\"white-space: pre-wrap;\">'red'</code> for example.</p>",
            "<p>Many different types of scales exist. Linear, logarithmic, quantize, etc. Any basic transformation you can think of exists. The rest you can create by writing custom scales.</p>",
            "<p>You’re most often going to use scales to turn your data values into coordinates. But other use-cases exist.</p>"
          ]
        },
        {
          "lectureTitle": "D3 layouts",
          "lectureLines": [
            "<h3 id=\"d3-layouts\">3) D3 layouts</h3>",
            "<p>Sure <code style=\"white-space: pre-wrap;\">.enter.append</code> looks like magic, but D3 layouts are the real mind=blown of the D3 ecosystem. They take your input data and return a full-featured visualization thing.</p>",
            "<p>For example, a force layout using forces between nodes to place them on the screen.</p>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/force-layout.png\" alt=\"Force layout\"><figcaption>Force layout</figcaption>",
            "</figure>",
            "<p>Or a circle packing layout that neatly packs circles.</p>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/circle-packing-layout.png\" alt=\"Circle packing layout\"><figcaption>Circle packing layout</figcaption>",
            "</figure>",
            "<p>I don’t know the maths that goes into most of these. And that’s the point, you shouldn’t have to!</p>",
            "<p>Here’s a key insight about the magic of layouts: They’re the data part.</p>",
            "<p>You take a <code style=\"white-space: pre-wrap;\">forceLayout</code> and feed it your data. It returns an object with a <code style=\"white-space: pre-wrap;\">tick</code> event callback.</p>",
            "<div class=\"sourceCode\" id=\"cb11\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb11-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">var</span> simulation <span class=\"op\" style=\"color: #666666;\">=</span> d3</a>",
            "<a class=\"sourceLine\" id=\"cb11-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  .<span class=\"at\" style=\"color: #7d9029;\">forceSimulation</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb11-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  .<span class=\"at\" style=\"color: #7d9029;\">force</span>(</a>",
            "<a class=\"sourceLine\" id=\"cb11-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"st\" style=\"color: #4070a0;\">&#39;link&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb11-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">forceLink</span>().<span class=\"at\" style=\"color: #7d9029;\">id</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb11-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">id</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb11-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb11-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  )</a>",
            "<a class=\"sourceLine\" id=\"cb11-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  .<span class=\"at\" style=\"color: #7d9029;\">force</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;charge&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">forceManyBody</span>())</a>",
            "<a class=\"sourceLine\" id=\"cb11-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  .<span class=\"at\" style=\"color: #7d9029;\">force</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;center&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">forceCenter</span>(width / <span class=\"dv\" style=\"color: #40a070;\">2</span><span class=\"op\" style=\"color: #666666;\">,</span> height / <span class=\"dv\" style=\"color: #40a070;\">2</span>))<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>This <code style=\"white-space: pre-wrap;\">simulation</code> now handles everything <em>about</em> rendering your nodes. Changes their positions on every <code style=\"white-space: pre-wrap;\">tick</code> callback, figures out how often to change stuff, etc.</p>",
            "<p>But it is up to you to render them. A layout handles your dataviz in the abstract. You’re in control of the rendering.</p>",
            "<p>For a force layout, you have to update the DOM on every tick of the animation. For circle packing, you render it once.</p>",
            "<p>Once you grok this, all the fancy visualizations out there start making sense. Also means you can use these fancy layouts in React 🙌</p>"
          ]
        },
        {
          "lectureTitle": "Recap",
          "lectureLines": [
            "<h2 id=\"recap\">Recap</h2>",
            "<p>There’s a lot more D3 can do, but those are the 3 key insights you need to understand any example you find in the wild.</p>",
            "<ol type=\"1\">",
            "<li>Code is split into data and DOM manipulation</li>",
            "<li>Scales are great and used a lot</li>",
            "<li>You’re always in control of rendering</li>",
            "</ol>",
            "<p>Then you can start using D3’s more advanced features like maps and axes and shape generators and geo computations and data loading and transitions and user interactions.</p>",
            "<p>There’s a lot. We’re not going to cover it all but you can find those advanced features in the docs and the skills you learn here will help you get started.</p>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "How React makes D3 easier",
      "lectures": [
        {
          "lectureTitle": "React + D3 = ❤️",
          "lectureLines": [
            "<h1 id=\"basic-approach\">How React makes D3 easier</h1>",
            "<p>Our visualizations are going to use SVG – an XML-based image format that lets us describe images in terms of mathematical shapes. For example, the source code of an 800x600 SVG image with a rectangle looks like this:</p>",
            "<div class=\"sourceCode\" id=\"cb12\" data-caption=\"SVG rectangle\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode html\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode html\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb12-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&lt;svg</span><span class=\"ot\" style=\"color: #007020;\"> width=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;800&quot;</span><span class=\"ot\" style=\"color: #007020;\"> height=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;600&quot;</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb12-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&lt;rect</span><span class=\"ot\" style=\"color: #007020;\"> width=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;100&quot;</span><span class=\"ot\" style=\"color: #007020;\"> height=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;200&quot;</span><span class=\"ot\" style=\"color: #007020;\"> x=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;50&quot;</span><span class=\"ot\" style=\"color: #007020;\"> y=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;20&quot;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">/&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb12-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&lt;/svg&gt;</span></a></code></pre></div>",
            "<p>These four lines create an SVG image with a black rectangle at coordinates <code style=\"white-space: pre-wrap;\">(50, 20)</code> that is 100x200 pixels large. Black fill with no borders is default for SVG shapes.</p>",
            "<p>SVG is perfect for data visualization on the web because it works in all browsers, renders without blurring or artifacts on all screens, and supports animation and user interaction. You can see examples of interaction and animation later in this book.</p>",
            "<p>But SVG can get slow when you have many thousands of elements on screen. We’re going to solve that problem by rendering bitmap images with canvas. More on that later.</p>",
            "<hr>",
            "<p>Another nice feature of SVG is that it’s just a dialect of XML - nested elements describe structure, attributes describe the details. Same principles that HTML uses.</p>",
            "<p>That makes React’s rendering engine particularly suited for SVG. Our 100x200 rectangle from before looks like this as a React component:</p>",
            "<div class=\"sourceCode\" id=\"cb13\" data-caption=\"A simple rectangle in React\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb13-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> Rectangle <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb13-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>rect width<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;100&quot;</span> height<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;200&quot;</span> x<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;50&quot;</span> y<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;20&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb13-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>To use this rectangle component in a picture, you’d use a component like this:</p>",
            "<div class=\"sourceCode\" id=\"cb14\" data-caption=\"Rect component in a picture\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb14-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> Picture <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb14-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>svg width<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;800&quot;</span> height<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;600&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb14-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>Rectangle /<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb14-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    &lt;/svg<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb14-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>Sure looks like tons of work for a static rectangle. But look closely! Even if you know nothing about React and JSX, you can look at that code and see that it’s a <code style=\"white-space: pre-wrap;\">Picture</code> of a <code style=\"white-space: pre-wrap;\">Rectangle</code>.</p>",
            "<p>Compare that to a pure D3 approach:</p>",
            "<div class=\"sourceCode\" id=\"cb15\" data-caption=\"A static rectangle in d3.js\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb15-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">select</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;svg&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb15-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;width&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">800</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb15-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;height&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">600</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb15-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  .<span class=\"at\" style=\"color: #7d9029;\">append</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;rect&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb15-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;width&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">100</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb15-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;height&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">200</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb15-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;x&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">50</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb15-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;y&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">20</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>It’s elegant, it’s declarative, and it looks like function call soup. It doesn’t scream <em>“Rectangle in an SVG”</em> to as much as the React version does.</p>",
            "<p>You have to take your time and read the code carefully: first, we <code style=\"white-space: pre-wrap;\">select</code> the <code style=\"white-space: pre-wrap;\">svg</code> element, then we add attributes for <code style=\"white-space: pre-wrap;\">width</code> and <code style=\"white-space: pre-wrap;\">height</code>. After that, we <code style=\"white-space: pre-wrap;\">append</code> a <code style=\"white-space: pre-wrap;\">rect</code> element and set its attributes for <code style=\"white-space: pre-wrap;\">width</code>, <code style=\"white-space: pre-wrap;\">height</code>, <code style=\"white-space: pre-wrap;\">x</code>, and <code style=\"white-space: pre-wrap;\">y</code>.</p>",
            "<p>Those 8 lines of code create HTML that looks like this:</p>",
            "<div class=\"sourceCode\" id=\"cb16\" data-caption=\"HTML of a rectangle\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb16-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">&lt;</span>svg width<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;800&quot;</span> height<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;600&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb16-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>rect width<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;100&quot;</span> height<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;200&quot;</span> x<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;50&quot;</span> y<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;20&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb16-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">&lt;/svg<span class=\"op\" style=\"color: #666666;\">&gt;</span></a></code></pre></div>",
            "<p>Would’ve been easier to just write the HTML, right? Yes, for static images, you’re better off using Photoshop or Sketch then exporting to SVG.</p>",
            "<p>Dealing with the DOM is not D3’s strong suit. There’s a lot of typing, code that’s hard to read, it’s slow when you have thousands of elements, and it’s often hard to keep track of which elements you’re changing. D3’s enter-update-exit cycle is great in theory, but most people struggle trying to wrap their head around it.</p>",
            "<p>If you don’t understand what I just said, don’t worry. We’ll cover the enter-update-exit cycle in the animations example.</p>",
            "<p>Don’t worry about D3 either. <strong>It’s hard!</strong> I’ve written two books about D3, and I still spend as much time reading the docs as writing the code. The library is huge and there’s much to learn. I’ll explain everything as we go along.</p>",
            "<p>D3’s strong suit is its ability to do everything except the DOM. There are statistical functions, great support for data manipulation, a bunch of built-in data visualizations, magic around transitions and animation … <strong>D3 can calculate anything for you. All you have to do is draw it out.</strong></p>",
            "<p>That’s why our general approach sounds like this in a nutshell:</p>",
            "<ul>",
            "<li>React owns the DOM</li>",
            "<li>D3 calculates properties</li>",
            "</ul>",
            "<p>We leverage React for SVG structure and rendering optimizations; D3 for its mathematical and visualization functions.</p>",
            "<p>Now let’s look at three different ways of using React and D3 to build data visualization:</p>",
            "<ul>",
            "<li>using a library</li>",
            "<li>quick blackbox components</li>",
            "<li>full feature integration</li>",
            "</ul>"
          ]
        },
        {
          "lectureTitle": "What about existing libraries?",
          "lectureLines": [
            "<h1 id=\"existing-libraries\">When should you use an existing library? Which one?</h1>",
            "<p>The quickest way to achieve the benefits of integrating React with D3 is to use a library. A collection of components with pre-built charting visualizations. Plug it into your app, move on with life.</p>",
            "<p>Great option for basic charts. I recommend it dearly to anyone who comes to me and asks about building stuff. Try a library first. If it fits your needs, perfect! You just saved yourselves plenty of time.</p>",
            "<p>Where libraries become a problem is when you want to move beyond the library author’s idea of How Things Are Done. Custom features, visualizations that aren’t just charts, disabling this or that default behavior … it gets messy.</p>",
            "<p>That’s why I rarely use libraries myself. Often find it quicker to build something specific from scratch than figuring out how to hold a generalized API just right.</p>",
            "<p>But they’re a great first step. Here’s a few of the most popular React &amp; D3 libraries 👇</p>",
            "<p>List borrowed from <a href=\"https://www.smashingmagazine.com/2018/02/react-d3-ecosystem/\">a wonderful Smashing Magazine article</a>, because it’s a good list.</p>"
          ]
        },
        {
          "lectureTitle": "Victory.js",
          "lectureLines": [
            "<h2 id=\"victory\">Victory</h2>",
            "<blockquote>",
            "<p>React.js components for modular charting and data visualization</p>",
            "</blockquote>",
            "<p><a href=\"https://formidable.com/open-source/victory/\"><img src=\"https://raw.githubusercontent.com/hsribei/react-d3js-es6-ebook/teachable-only/manuscript/resources/images/2018/victoryjs.jpg\" alt=\"Victory.js logo\"></a></p>",
            "<p>Victory offers low level components for basic charting and reimplements a lot of D3’s API. Great when you need to create basic charts without a lot of customization. Supports React Native.</p>",
            "<p>Here’s what it takes to implement a Barchart using Victory.js. <a href=\"https://codesandbox.io/s/3v3q013x36\">You can try it on CodeSandbox</a></p>",
            "<iframe src=\"https://codesandbox.io/embed/3v3q013x36?codemirror=1&amp;view=split\" style=\"width:100%; height:500px; border😮; border-radius: 4px; overflow:hidden;\" sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\">",
            "</iframe>",
            "<div class=\"sourceCode\" id=\"cb17\" data-caption=\"Bar chart in Victory.js\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb17-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> data <span class=\"op\" style=\"color: #666666;\">=</span> [</a>",
            "<a class=\"sourceLine\" id=\"cb17-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">quarter</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">1</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">earnings</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">13000</span> <span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb17-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">quarter</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">2</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">earnings</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">16500</span> <span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb17-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">quarter</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">3</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">earnings</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">14250</span> <span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb17-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">quarter</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">4</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">earnings</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">19000</span> <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb17-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">]<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb17-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb17-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> App <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb17-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">&lt;</span>div style<span class=\"op\" style=\"color: #666666;\">={</span>styles<span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb17-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>h1<span class=\"op\" style=\"color: #666666;\">&gt;</span>Victory basic demo&lt;/h1<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb17-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>VictoryChart domainPadding<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">20</span><span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb17-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>VictoryBar data<span class=\"op\" style=\"color: #666666;\">={</span>data<span class=\"op\" style=\"color: #666666;\">}</span> x<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;quarter&quot;</span> y<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;earnings&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb17-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    &lt;/VictoryChart<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb17-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb17-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>Create some fake data, render a <code style=\"white-space: pre-wrap;\">&lt;VictoryChart&gt;</code> rendering area, add a <code style=\"white-space: pre-wrap;\">&lt;VictoryBar&gt;</code> component, give it data and axis keys. Quick and easy.</p>",
            "<p>My favorite feature of Victory is that components use fake random data until you pass your own. Means you always know what to expect.</p>"
          ]
        },
        {
          "lectureTitle": "Recharts",
          "lectureLines": [
            "<h2 id=\"recharts\">Recharts</h2>",
            "<blockquote>",
            "<p>A composable charting library built on React components</p>",
            "</blockquote>",
            "<p><a href=\"https://recharts.org/\"><img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/recharts.png\" alt=\"Recharts homepage\"></a></p>",
            "<p>Recharts is like a more colorful Victory. A pile of charting components, some customization, loves animating everything by default.</p>",
            "<p>Here’s what it takes to implement a Barchart using Recharts. <a href=\"https://codesandbox.io/s/mmkrjl7qxp\">You can try it on CodeSandbox</a></p>",
            "<iframe src=\"https://codesandbox.io/embed/mmkrjl7qxp?codemirror=1&amp;view=split\" style=\"width:100%; height:500px; border😮; border-radius: 4px; overflow:hidden;\" sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\">",
            "</iframe>",
            "<div class=\"sourceCode\" id=\"cb18\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb18-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> data <span class=\"op\" style=\"color: #666666;\">=</span> [</a>",
            "<a class=\"sourceLine\" id=\"cb18-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">quarter</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">1</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">earnings</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">13000</span> <span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb18-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">quarter</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">2</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">earnings</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">16500</span> <span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb18-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">quarter</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">3</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">earnings</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">14250</span> <span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb18-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">quarter</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">4</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">earnings</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">19000</span> <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb18-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">]<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb18-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb18-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> App <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb18-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">&lt;</span>div style<span class=\"op\" style=\"color: #666666;\">={</span>styles<span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb18-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>h1<span class=\"op\" style=\"color: #666666;\">&gt;</span>Recharts basic demo&lt;/h1<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb18-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>BarChart width<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">500</span><span class=\"op\" style=\"color: #666666;\">}</span> height<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">300</span><span class=\"op\" style=\"color: #666666;\">}</span> data<span class=\"op\" style=\"color: #666666;\">={</span>data<span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb18-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>XAxis dataKey<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;quarter&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb18-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>YAxis dataKey<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;earnings&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb18-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>Bar dataKey<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;earnings&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb18-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    &lt;/BarChart<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb18-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb18-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>More involved than Victory, but same principle. Fake some data, render a drawing area this time with <code style=\"white-space: pre-wrap;\">&lt;BarChart&gt;</code> and feed it some data. Inside the <code style=\"white-space: pre-wrap;\">&lt;BarChart&gt;</code> render two axes, and a <code style=\"white-space: pre-wrap;\">&lt;Bar&gt;</code> for each entry.</p>",
            "<p>Recharts hits a great balance of flexibility and ease … unless you don’t like animation by default. Then you’re in trouble.</p>"
          ]
        },
        {
          "lectureTitle": "Nivo",
          "lectureLines": [
            "<h2 id=\"nivo\">Nivo</h2>",
            "<blockquote>",
            "<p>nivo provides a rich set of dataviz components, built on top of the awesome d3 and Reactjs libraries.</p>",
            "</blockquote>",
            "<p><a href=\"https://nivo.rocks/\"><img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/nivo.gif\" alt=\"Nivo homepage\"></a></p>",
            "<p>Nivo is another attempt to give you a set of basic charting components. Comes with great interactive documentation, support for Canvas and API rendering. Plenty of basic customization.</p>",
            "<p>Here’s what it takes to implement a Barchart using Nivo. <a href=\"https://codesandbox.io/s/n1wwkvq24\">You can try it on CodeSandbox</a></p>",
            "<iframe src=\"https://codesandbox.io/embed/n1wwkvq24?codemirror=1&amp;view=split\" style=\"width:100%; height:500px; border😮; border-radius: 4px; overflow:hidden;\" sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\">",
            "</iframe>",
            "<div class=\"sourceCode\" id=\"cb19\" data-caption=\"Bar chart in Nivo\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb19-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> data <span class=\"op\" style=\"color: #666666;\">=</span> [</a>",
            "<a class=\"sourceLine\" id=\"cb19-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">quarter</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">1</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">earnings</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">13000</span> <span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb19-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">quarter</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">2</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">earnings</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">16500</span> <span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb19-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">quarter</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">3</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">earnings</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">14250</span> <span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb19-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">quarter</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">4</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">earnings</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">19000</span> <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb19-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">]<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb19-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb19-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> App <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb19-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">&lt;</span>div style<span class=\"op\" style=\"color: #666666;\">={</span>styles<span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb19-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>h1<span class=\"op\" style=\"color: #666666;\">&gt;</span>Nivo basic demo&lt;/h1<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb19-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>div style<span class=\"op\" style=\"color: #666666;\">={{</span> <span class=\"dt\">height</span><span class=\"op\">:</span> <span class=\"st\">&quot;400px&quot;</span> <span class=\"op\">}}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb19-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>ResponsiveBar data<span class=\"op\" style=\"color: #666666;\">={</span>data<span class=\"op\" style=\"color: #666666;\">}</span> keys<span class=\"op\" style=\"color: #666666;\">={</span>[<span class=\"st\" style=\"color: #4070a0;\">&quot;earnings&quot;</span>]<span class=\"op\" style=\"color: #666666;\">}</span> indexBy<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;quarter&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb19-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb19-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb19-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>Least amount of effort! You render a <code style=\"white-space: pre-wrap;\">&lt;ResponsiveBar&gt;</code> component, give it data and some params, and Nivo handles the rest.</p>",
            "<p>Wonderful! But means you have to learn a whole new language of configs and props that might make your hair stand on end. The documentation is great and shows how everything works, but I found it difficult to know which prop combinations are valid.</p>"
          ]
        },
        {
          "lectureTitle": "VX",
          "lectureLines": [
            "<h2 id=\"vx\">VX</h2>",
            "<blockquote>",
            "<p>vx is collection of reusable low-level visualization components. vx combines the power of d3 to generate your visualization with the benefits of react for updating the DOM.</p>",
            "</blockquote>",
            "<p><a href=\"https://vx-demo.now.sh/\"><img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/vx.png\" alt=\"VX\"></a></p>",
            "<p>VX is the closest to the approaches you’re learning in this book. React for rendering, D3 for calculations. When you build a set of custom components for your organization, a flavor of VX is what you often come up with.</p>",
            "<p>That’s why I recommend teams use VX when they need to get started quickly.</p>",
            "<p>Here’s what it takes to implement a Barchart using Nivo. <a href=\"https://codesandbox.io/s/k5853pryrv\">You can try it on CodeSandbox</a></p>",
            "<iframe src=\"https://codesandbox.io/embed/k5853pryrv?codemirror=1&amp;view=split\" style=\"width:100%; height:500px; border😮; border-radius: 4px; overflow:hidden;\" sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\">",
            "</iframe>",
            "<div class=\"sourceCode\" id=\"cb20\" data-caption=\"Bar chart built in VX\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb20-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> data <span class=\"op\" style=\"color: #666666;\">=</span> [</a>",
            "<a class=\"sourceLine\" id=\"cb20-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">quarter</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">1</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">earnings</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">13000</span> <span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">quarter</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">2</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">earnings</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">16500</span> <span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">quarter</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">3</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">earnings</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">14250</span> <span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">quarter</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">4</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">earnings</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">19000</span> <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">]<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb20-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> App <span class=\"op\" style=\"color: #666666;\">=</span> (<span class=\"op\" style=\"color: #666666;\">{</span> width <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"dv\" style=\"color: #40a070;\">400</span><span class=\"op\" style=\"color: #666666;\">,</span> height <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"dv\" style=\"color: #40a070;\">400</span> <span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> xMax <span class=\"op\" style=\"color: #666666;\">=</span> width<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> yMax <span class=\"op\" style=\"color: #666666;\">=</span> height <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"dv\" style=\"color: #40a070;\">120</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb20-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> x <span class=\"op\" style=\"color: #666666;\">=</span> d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">quarter</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> y <span class=\"op\" style=\"color: #666666;\">=</span> d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">earnings</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb20-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// scales</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> xScale <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">scaleBand</span>(<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">rangeRound</span><span class=\"op\" style=\"color: #666666;\">:</span> [<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> xMax]<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">domain</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">data</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(<span class=\"op\" style=\"color: #666666;\">:</span><span class=\"dt\" style=\"color: #902000;\">satisfied</span><span class=\"op\" style=\"color: #666666;\">:,</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">padding</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"fl\" style=\"color: #40a070;\">0.4</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> yScale <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">scaleLinear</span>(<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">rangeRound</span><span class=\"op\" style=\"color: #666666;\">:</span> [yMax<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">0</span>]<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">domain</span><span class=\"op\" style=\"color: #666666;\">:</span> [<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"at\" style=\"color: #7d9029;\">max</span>(data<span class=\"op\" style=\"color: #666666;\">,</span> y)]</a>",
            "<a class=\"sourceLine\" id=\"cb20-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb20-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb20-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>div style<span class=\"op\" style=\"color: #666666;\">={</span>styles<span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>h1<span class=\"op\" style=\"color: #666666;\">&gt;</span>VX basic demo&lt;/h1<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>svg width<span class=\"op\" style=\"color: #666666;\">={</span>width<span class=\"op\" style=\"color: #666666;\">}</span> height<span class=\"op\" style=\"color: #666666;\">={</span>height<span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"va\" style=\"color: #19177c;\">data</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>((d<span class=\"op\" style=\"color: #666666;\">,</span> i) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> barHeight <span class=\"op\" style=\"color: #666666;\">=</span> yMax <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"at\" style=\"color: #7d9029;\">yScale</span>(<span class=\"at\" style=\"color: #7d9029;\">y</span>(d))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb20-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>Bar</a>",
            "<a class=\"sourceLine\" id=\"cb20-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">              width<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"va\" style=\"color: #19177c;\">xScale</span>.<span class=\"at\" style=\"color: #7d9029;\">bandwidth</span>()<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">              height<span class=\"op\" style=\"color: #666666;\">={</span>barHeight<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-36\" title=\"36\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">              x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"at\" style=\"color: #7d9029;\">xScale</span>(<span class=\"at\" style=\"color: #7d9029;\">x</span>(d))<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-37\" title=\"37\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">              y<span class=\"op\" style=\"color: #666666;\">={</span>yMax <span class=\"op\" style=\"color: #666666;\">-</span> barHeight<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-38\" title=\"38\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">              data<span class=\"op\" style=\"color: #666666;\">={{</span> <span class=\"dt\">x</span><span class=\"op\">:</span> <span class=\"at\">x</span>(d)<span class=\"op\">,</span> <span class=\"dt\">y</span><span class=\"op\">:</span> <span class=\"at\">y</span>(d) <span class=\"op\">}}</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-39\" title=\"39\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb20-40\" title=\"40\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-41\" title=\"41\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-42\" title=\"42\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      &lt;/svg<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-43\" title=\"43\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-44\" title=\"44\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb20-45\" title=\"45\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">};</span></a></code></pre></div>",
            "<p>Move involved than previous examples, but means you have more control and fight the library less often. VX does the tedious stuff for you, so you can focus on the stuff that matters.</p>",
            "<p>This code creates value accessor methods, D3 scales, then iterates over an array of <code style=\"white-space: pre-wrap;\">data</code> and renders a <code style=\"white-space: pre-wrap;\">&lt;Bar</code> for each. The bar gets a bunch of props.</p>"
          ]
        },
        {
          "lectureTitle": "When you shouldn't use a library",
          "lectureLines": [
            "<h2 id=\"when-not-to-use-a-library\">When not to use a library</h2>",
            "<p>Libraries are great. Quick to get started, quick to keep using, great for common usecases.</p>",
            "<p>Now, if you want to build something custom, something that delights and astounds, something that makes your users love you … You’re gonna have to understand how combining React and D3 works under the hood. Whether you use a library or not.</p>",
            "<p>A rule of thumb you can use is to consider how custom you want to make your visualization. The more customizations, the more likely you are to benefit from rolling your own.</p>",
            "<p>Or if you’ve had a lot of practice with rolling your own and it’s literally easier than learning a library.</p>",
            "<p>If you have to customize an existing library, or build your own for the team, that’s what we’re here for today 😃</p>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "Quickly integrate any D3 code in your React project with Blackbox Components",
      "lectures": [
        {
          "lectureTitle": "The idea behind blackbox components",
          "lectureLines": [
            "<h1 id=\"blackbox-components\">Quickly integrate any D3 code in your React project with Blackbox Components</h1>",
            "<p>Blackbox components are the quickest way to integrate D3 and React. You can think of them as wrappers around D3 visualizations.</p>",
            "<p>With the blackbox approach, you can take any D3 example from the internets or your brain, wrap it in a React component, and it Just Works™. This is great when you’re in a hurry, but comes with a big caveat: You’re letting D3 control some of the DOM.</p>",
            "<p>D3 controlling the DOM is <em>okay</em>, but it means React can’t help you there. That’s why it’s called a Blackbox – React can’t see inside.</p>",
            "<p>No render engine, no tree diffing, no dev tools to inspect what’s going. Just a blob of DOM elements.</p>",
            "<p>Okay for small components or when you’re prototyping, but I’ve had people come to my workshops and say <em>“We built our whole app with the blackbox approach. It takes a few seconds to re-render when you click something. Please help”</em></p>",
            "<p>🤔</p>",
            "<p>Here’s how it works:</p>",
            "<ul>",
            "<li>React renders an anchor element</li>",
            "<li>D3 hijacks it and puts stuff in</li>",
            "</ul>",
            "<p>You manually re-render on props and state changes. Throwing away and rebuilding the entire DOM subtree on each render. With complex visualizations this becomes a huge hit on performance.</p>",
            "<p>Use this technique sparingly.</p>"
          ]
        },
        {
          "lectureTitle": "A quick blackbox example - a D3 axis",
          "lectureLines": [
            "<h2 id=\"blackbox-axis\">A quick blackbox example - a D3 axis</h2>",
            "<p>Let’s build an axis component. Axes are the perfect use-case for blackbox components. D3 comes with an axis generator bundled inside, and they’re difficult to build from scratch.</p>",
            "<p>They don’t <em>look</em> difficult, but there are many tiny details you have to get <em>just right</em>.</p>",
            "<p>D3’s axis generator takes a scale and some configuration to render an axis for us. The code looks like this:</p>",
            "<div class=\"sourceCode\" id=\"cb21\" data-caption=\"Vanilla D3 axis\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb21-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> scale <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">scaleLinear</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb21-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">domain</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">10</span>])</a>",
            "<a class=\"sourceLine\" id=\"cb21-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">range</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">200</span>])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb21-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> axis <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">axisBottom</span>(scale)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb21-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb21-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">select</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;svg&#39;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb21-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  .<span class=\"at\" style=\"color: #7d9029;\">append</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;g&#39;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb21-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;transform&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;translate(10, 30)&#39;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb21-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  .<span class=\"at\" style=\"color: #7d9029;\">call</span>(axis)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>You can <a href=\"https://codesandbox.io/s/v6ovkow8q3\">try it out on CodeSandbox</a>.</p>",
            "<iframe src=\"https://codesandbox.io/embed/v6ovkow8q3?codemirror=1&amp;view=split\" style=\"width:100%; height:500px; border😮; border-radius: 4px; overflow:hidden;\" sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\">",
            "</iframe>",
            "<p>If this code doesn’t make any sense, don’t worry. There’s a bunch of D3 to learn, and I’ll help you out. If it’s obvious, you’re a pro! This book will be much quicker to read.</p>",
            "<p>We start with a linear scale that has a domain <code style=\"white-space: pre-wrap;\">[0, 10]</code> and a range <code style=\"white-space: pre-wrap;\">[0, 200]</code>. Scales are like mathematical functions that map a domain to a range. In this case, calling <code style=\"white-space: pre-wrap;\">scale(0)</code> returns <code style=\"white-space: pre-wrap;\">0</code>, <code style=\"white-space: pre-wrap;\">scale(5)</code> returns <code style=\"white-space: pre-wrap;\">100</code>, <code style=\"white-space: pre-wrap;\">scale(10)</code> returns <code style=\"white-space: pre-wrap;\">200</code>. Just like a linear function from math class – y = kx + n.</p>",
            "<p>We create an axis generator with <code style=\"white-space: pre-wrap;\">axisBottom</code>, which takes a <code style=\"white-space: pre-wrap;\">scale</code> and creates a <code style=\"white-space: pre-wrap;\">bottom</code> oriented axis – numbers below the line. You can also change settings for the number of ticks, their sizing, spacing, and so on.</p>",
            "<p>Equipped with an <code style=\"white-space: pre-wrap;\">axis</code> generator, we <code style=\"white-space: pre-wrap;\">select</code> the <code style=\"white-space: pre-wrap;\">svg</code> element, append a grouping element, use a <code style=\"white-space: pre-wrap;\">transform</code> attribute to move it <code style=\"white-space: pre-wrap;\">10</code>px to the right and <code style=\"white-space: pre-wrap;\">30</code>px down, and invoke the generator with <code style=\"white-space: pre-wrap;\">.call()</code>.</p>",
            "<p>It creates a small axis:</p>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/simple-axis.png\" alt=\"Simple axis\"><figcaption>Simple axis</figcaption>",
            "</figure>",
            "<p>Play around with it on <a href=\"https://codepen.io/swizec/pen/YGoYBM\">Codesandbox</a>. Change the scale type, play with axis orientation. Use <code style=\"white-space: pre-wrap;\">.ticks</code> on the axis to change how many show up. Have some fun 😃</p>"
          ]
        },
        {
          "lectureTitle": "A React + D3 axis",
          "lectureLines": [
            "<h2 id=\"a-quick-blackbox-example---a-reactd3-axis\">A quick blackbox example - a React+D3 axis</h2>",
            "<p>Now let’s say we want to use that same axis code but as a React component. The simplest way is to use a blackbox component approach like this:</p>",
            "<div class=\"sourceCode\" id=\"cb22\" data-caption=\"React blackbox axis\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb22-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Axis <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> Component <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb22-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  gRef <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">createRef</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb22-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb22-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">componentDidMount</span>() <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">d3render</span>() <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb22-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">componentDidUpdate</span>() <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">d3render</span>() <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb22-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb22-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">d3render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb22-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> scale <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">scaleLinear</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb22-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    .<span class=\"at\" style=\"color: #7d9029;\">domain</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">10</span>])</a>",
            "<a class=\"sourceLine\" id=\"cb22-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    .<span class=\"at\" style=\"color: #7d9029;\">range</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">200</span>])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb22-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> axis <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">axisBottom</span>(scale)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb22-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb22-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">select</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">gRef</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb22-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">call</span>(axis)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb22-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb22-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb22-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb22-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">&lt;</span>g transform<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;translate(10, 30)&quot;</span> ref<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">gRef</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb22-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb22-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>So much code! Worth it for the other benefits of using React in your dataviz. You’ll see 😃</p>",
            "<p>We created an <code style=\"white-space: pre-wrap;\">Axis</code> component that extends React’s base <code style=\"white-space: pre-wrap;\">Component</code> class. We can’t use functional components because we need lifecycle hooks.</p>",
            "<p>Our component has a <code style=\"white-space: pre-wrap;\">render</code> method. It returns a grouping element (<code style=\"white-space: pre-wrap;\">g</code>) moved 10px to the right and 30px down using the <code style=\"white-space: pre-wrap;\">transform</code> attribute. Same as before.</p>",
            "<p>A React ref saved in <code style=\"white-space: pre-wrap;\">this.gRef</code> and passed into our <code style=\"white-space: pre-wrap;\">&lt;g&gt;</code> element with <code style=\"white-space: pre-wrap;\">ref</code> lets us talk to the DOM node directly. We need this to hand over rendering control to D3.</p>",
            "<p>The <code style=\"white-space: pre-wrap;\">d3render</code> method looks familiar. It’s the same code we used in the vanilla D3 example. Scale, axis, select, call. Only difference is that instead of selecting <code style=\"white-space: pre-wrap;\">svg</code> and appending a <code style=\"white-space: pre-wrap;\">g</code> element, we select the <code style=\"white-space: pre-wrap;\">g</code> element rendered by React and use that.</p>",
            "<p>We use <code style=\"white-space: pre-wrap;\">componentDidUpdate</code> and <code style=\"white-space: pre-wrap;\">componentDidMount</code> to keep our render up to date. Ensures that our axis re-renders every time React’s engine decides to render our component.</p>",
            "<p>That wasn’t so bad, was it?</p>",
            "<p><a href=\"https://codesandbox.io/s/3xy2jr1y5m\">Try it out on Codesandbox</a>.</p>",
            "<iframe src=\"https://codesandbox.io/embed/3xy2jr1y5m?codemirror=1&amp;view=split\" style=\"width:100%; height:500px; border😮; border-radius: 4px; overflow:hidden;\" sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\">",
            "</iframe>",
            "<p>You can make the axis more useful by getting positioning, scale, and orientation from props. We’ll do that in our big project.</p>",
            "<h3 id=\"practical-exercise\">Practical exercise</h3>",
            "<p>Try implementing those as an exercise. Make the axis more reusable with some carefully placed props.</p>",
            "<p>Here’s my solution, if you get stuck 👉 <a href=\"https://codesandbox.io/s/5ywlj6jn4l\">https://codesandbox.io/s/5ywlj6jn4l</a></p>",
            "<iframe src=\"https://codesandbox.io/embed/5ywlj6jn4l?codemirror=1&amp;view=split\" style=\"width:100%; height:500px; border😮; border-radius: 4px; overflow:hidden;\" sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\">",
            "</iframe>"
          ]
        },
        {
          "lectureTitle": "A D3 blackbox higher order component - HOC",
          "lectureLines": [
            "<h1 id=\"blackbox-hoc\">A D3 blackbox higher order component – HOC</h1>",
            "<p>After that example you might think this is hella tedious to implement every time. You’d be right!</p>",
            "<p>Good thing you can abstract it all away with a higher order component – a HOC. Now this is something I should open source (just do it already), but I want to show you how it works so you can learn about the HOC pattern.</p>",
            "<p>Higher order components are great when you see multiple React components sharing similar code. In our case, that shared code is:</p>",
            "<ul>",
            "<li>rendering an anchor element</li>",
            "<li>calling D3’s render on updates</li>",
            "</ul>",
            "<p>With a HOC, we can abstract that away into a sort of <a href=\"https://en.wikipedia.org/wiki/Factory_method_pattern\">object factory</a>. It’s an old concept making a comeback now that JavaScript has classes.</p>",
            "<p>Think of our HOC as a function that takes some params and creates a class – a React component. Another way to think about HOCs is that they’re React components wrapping other React components and a function that makes it easy.</p>",
            "<p>A HOC for D3 blackbox integration, called <code style=\"white-space: pre-wrap;\">D3blackbox</code>, looks like like this:</p>",
            "<div class=\"sourceCode\" id=\"cb23\" data-caption=\"React blackbox HOC\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb23-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span> <span class=\"at\" style=\"color: #7d9029;\">D3blackbox</span>(D3render) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb23-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Blackbox <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb23-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    anchor <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">createRef</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb23-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb23-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">componentDidMount</span>() <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"va\" style=\"color: #19177c;\">D3render</span>.<span class=\"at\" style=\"color: #7d9029;\">call</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>)<span class=\"op\" style=\"color: #666666;\">;</span> <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb23-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">componentDidUpdate</span>() <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"va\" style=\"color: #19177c;\">D3render</span>.<span class=\"at\" style=\"color: #7d9029;\">call</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>) <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb23-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb23-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb23-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb23-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">&lt;</span>g transform<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"vs\" style=\"color: #4070a0;\">`translate(</span><span class=\"sc\" style=\"color: #4070a0;\">${</span>x<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">, </span><span class=\"sc\" style=\"color: #4070a0;\">${</span>y<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">)`</span><span class=\"op\" style=\"color: #666666;\">}</span> ref<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">anchor</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb23-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb23-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb23-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>You’ll recognize most of that code from earlier.</p>",
            "<p>We have <code style=\"white-space: pre-wrap;\">componentDidMount</code> and<code style=\"white-space: pre-wrap;\">componentDidUpdate</code> lifecycle hooks that call <code style=\"white-space: pre-wrap;\">D3render</code> on component updates. <code style=\"white-space: pre-wrap;\">render</code> renders a grouping element as an anchor with a ref so D3 can use it to render stuff into.</p>",
            "<p>Because <code style=\"white-space: pre-wrap;\">D3render</code> is no longer a part of our component, we have to use <code style=\"white-space: pre-wrap;\">.call</code> to give it the scope we want: this class, or rather <code style=\"white-space: pre-wrap;\">this</code> instance of the <code style=\"white-space: pre-wrap;\">Blackbox</code> class.</p>",
            "<p>We’ve also made some changes that make <code style=\"white-space: pre-wrap;\">render</code> more flexible. Instead of hardcoding the <code style=\"white-space: pre-wrap;\">translate()</code> transformation, we take <code style=\"white-space: pre-wrap;\">x</code> and <code style=\"white-space: pre-wrap;\">y</code> props. <code style=\"white-space: pre-wrap;\">{ x, y } = this.props</code> takes <code style=\"white-space: pre-wrap;\">x</code> and <code style=\"white-space: pre-wrap;\">y</code> out of <code style=\"white-space: pre-wrap;\">this.props</code> using object decomposition, and we used ES6 string templates for the <code style=\"white-space: pre-wrap;\">transform</code> attribute.</p>",
            "<p>Consult the <a href=\"https://es6cheatsheet.com/\">ES6 cheatsheet</a> for details on the syntax.</p>",
            "<p>Using our new <code style=\"white-space: pre-wrap;\">D3blackbox</code> HOC to make an axis looks like this:</p>",
            "<div class=\"sourceCode\" id=\"cb24\" data-caption=\"React blackbox HOC\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb24-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> Axis <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">D3blackbox</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span> () <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb24-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> scale <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">scaleLinear</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb24-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">              .<span class=\"at\" style=\"color: #7d9029;\">domain</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">10</span>])</a>",
            "<a class=\"sourceLine\" id=\"cb24-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">              .<span class=\"at\" style=\"color: #7d9029;\">range</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">200</span>])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb24-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> axis <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">axisBottom</span>(scale)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb24-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb24-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">select</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">anchor</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb24-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">call</span>(axis)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb24-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>You know this code! We copy pasted our axis rendering code from before, wrapped it in a function, and passed it into <code style=\"white-space: pre-wrap;\">D3blackbox</code>. Now it’s a React component.</p>",
            "<p>Play with this example on <a href=\"https://codesandbox.io/s/5v21r0wo4x\">Codesandbox, here</a>.</p>",
            "<iframe src=\"https://codesandbox.io/embed/5v21r0wo4x?codemirror=1&amp;view=split\" style=\"width:100%; height:500px; border😮; border-radius: 4px; overflow:hidden;\" sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\">",
            "</iframe>"
          ]
        },
        {
          "lectureTitle": "D3blackbox magic trick - render anything in 30 seconds",
          "lectureLines": [
            "<h2 id=\"magic-trick\">D3blackbox magic trick – render anything in 30 seconds</h2>",
            "<p>Let me show you a magic trick. 30 seconds to take a random D3 piece of code and add it to your React project.</p>",
            "<p>We can try it on the example barchart from before.</p>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/barchart-example.png\" alt=\"An example D3 barchart\"><figcaption>An example D3 barchart</figcaption>",
            "</figure>",
            "<p>You can <a href=\"https://cdn.rawgit.com/mbostock/3885304/raw/a91f37f5f4b43269df3dbabcda0090310c05285d/index.html\">try it online</a>. When you hover on a bar, it changes color. Pretty neat.</p>",
            "<p>I recommend you follow along in a CodeSandbox. If you fork the <a href=\"https://codesandbox.io/s/5v21r0wo4x\">react-d3-axis-hoc CodeSandbox</a> that will be easiest.</p>",
            "<iframe src=\"https://codesandbox.io/embed/5v21r0wo4x?codemirror=1&amp;view=split\" style=\"width:100%; height:500px; border😮; border-radius: 4px; overflow:hidden;\" sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\">",
            "</iframe>",
            "<p>You should already have the <code style=\"white-space: pre-wrap;\">D3blackbox</code> HOC. If you don’t, make a new file and paste it in.</p>",
            "<p>With your HOC ready, create a new file in CodeSandbox. Call it <code style=\"white-space: pre-wrap;\">Barchart.js</code>.</p>",
            "<p>Add your imports:</p>",
            "<div class=\"sourceCode\" id=\"cb25\" data-caption=\"Import dependencies\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb25-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;react&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb25-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> D3blackbox <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./D3blackbox&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb25-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"im\">as</span> d3 <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;d3&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>This gives you React, our HOC, and D3.</p>",
            "<p>Now right-click view code on that barchart and copy the code. Wrap it in a <code style=\"white-space: pre-wrap;\">D3blackbox</code> call. Like this:</p>",
            "<div class=\"sourceCode\" id=\"cb26\" data-caption=\"Wrap D3 code in D3blackbox\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb26-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> Barchart <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">D3blackbox</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span> () <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb26-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">var</span> svg <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">select</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;svg&quot;</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb26-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      margin <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"dt\" style=\"color: #902000;\">top</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">20</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">right</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">20</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">bottom</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">30</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">left</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">40</span><span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb26-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      width <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">+</span><span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;width&quot;</span>) <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"va\" style=\"color: #19177c;\">margin</span>.<span class=\"at\" style=\"color: #7d9029;\">left</span> <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"va\" style=\"color: #19177c;\">margin</span>.<span class=\"at\" style=\"color: #7d9029;\">right</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb26-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      height <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">+</span><span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;height&quot;</span>) <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"va\" style=\"color: #19177c;\">margin</span>.<span class=\"at\" style=\"color: #7d9029;\">top</span> <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"va\" style=\"color: #19177c;\">margin</span>.<span class=\"at\" style=\"color: #7d9029;\">bottom</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb26-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb26-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">var</span> x <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">scaleBand</span>().<span class=\"at\" style=\"color: #7d9029;\">rangeRound</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> width]).<span class=\"at\" style=\"color: #7d9029;\">padding</span>(<span class=\"fl\" style=\"color: #40a070;\">0.1</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb26-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      y <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">scaleLinear</span>().<span class=\"at\" style=\"color: #7d9029;\">rangeRound</span>([height<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">0</span>])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb26-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb26-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">var</span> g <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">append</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;g&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb26-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;transform&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;translate(&quot;</span> <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"va\" style=\"color: #19177c;\">margin</span>.<span class=\"at\" style=\"color: #7d9029;\">left</span> <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;,&quot;</span> <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"va\" style=\"color: #19177c;\">margin</span>.<span class=\"at\" style=\"color: #7d9029;\">top</span> <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"st\" style=\"color: #4070a0;\">&quot😉&quot;</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb26-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb26-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">tsv</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;data.tsv&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb26-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">frequency</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">+</span><span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">frequency</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb26-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> d<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb26-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">},</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(error<span class=\"op\" style=\"color: #666666;\">,</span> data) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb26-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (error) <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">throw</span> error<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb26-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb26-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">x</span>.<span class=\"at\" style=\"color: #7d9029;\">domain</span>(<span class=\"va\" style=\"color: #19177c;\">data</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">letter</span><span class=\"op\" style=\"color: #666666;\">;</span> <span class=\"op\" style=\"color: #666666;\">}</span>))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb26-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">y</span>.<span class=\"at\" style=\"color: #7d9029;\">domain</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">max</span>(data<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">frequency</span><span class=\"op\" style=\"color: #666666;\">;</span> <span class=\"op\" style=\"color: #666666;\">}</span>)])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb26-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb26-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">g</span>.<span class=\"at\" style=\"color: #7d9029;\">append</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;g&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb26-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;class&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;axis axis--x&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb26-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;transform&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;translate(0,&quot;</span> <span class=\"op\" style=\"color: #666666;\">+</span> height <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"st\" style=\"color: #4070a0;\">&quot😉&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb26-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        .<span class=\"at\" style=\"color: #7d9029;\">call</span>(<span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">axisBottom</span>(x))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb26-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb26-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">g</span>.<span class=\"at\" style=\"color: #7d9029;\">append</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;g&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb26-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;class&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;axis axis--y&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb26-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        .<span class=\"at\" style=\"color: #7d9029;\">call</span>(<span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">axisLeft</span>(y).<span class=\"at\" style=\"color: #7d9029;\">ticks</span>(<span class=\"dv\" style=\"color: #40a070;\">10</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;%&quot;</span>))</a>",
            "<a class=\"sourceLine\" id=\"cb26-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">append</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;text&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb26-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;transform&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;rotate(-90)&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb26-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;y&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">6</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb26-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;dy&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;0.71em&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb26-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;text-anchor&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;end&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb26-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        .<span class=\"at\" style=\"color: #7d9029;\">text</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;Frequency&quot;</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb26-36\" title=\"36\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb26-37\" title=\"37\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">g</span>.<span class=\"at\" style=\"color: #7d9029;\">selectAll</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;.bar&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb26-38\" title=\"38\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">data</span>(data)</a>",
            "<a class=\"sourceLine\" id=\"cb26-39\" title=\"39\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">enter</span>().<span class=\"at\" style=\"color: #7d9029;\">append</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;rect&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb26-40\" title=\"40\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;class&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;bar&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb26-41\" title=\"41\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;x&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"at\" style=\"color: #7d9029;\">x</span>(<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">letter</span>)<span class=\"op\" style=\"color: #666666;\">;</span> <span class=\"op\" style=\"color: #666666;\">}</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb26-42\" title=\"42\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;y&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"at\" style=\"color: #7d9029;\">y</span>(<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">frequency</span>)<span class=\"op\" style=\"color: #666666;\">;</span> <span class=\"op\" style=\"color: #666666;\">}</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb26-43\" title=\"43\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;width&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">x</span>.<span class=\"at\" style=\"color: #7d9029;\">bandwidth</span>())</a>",
            "<a class=\"sourceLine\" id=\"cb26-44\" title=\"44\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;height&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> height <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"at\" style=\"color: #7d9029;\">y</span>(<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">frequency</span>)<span class=\"op\" style=\"color: #666666;\">;</span> <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb26-45\" title=\"45\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb26-46\" title=\"46\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb26-47\" title=\"47\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb26-48\" title=\"48\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> Barchart<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>That should throw some errors. We have to change the <code style=\"white-space: pre-wrap;\">d3.select</code> and get <code style=\"white-space: pre-wrap;\">width</code> and <code style=\"white-space: pre-wrap;\">height</code> from props.</p>",
            "<div class=\"sourceCode\" id=\"cb27\" data-caption=\"Change where D3 renders\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb27-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> Barchart <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">D3blackbox</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span> () <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb27-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Delete the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb27-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">var</span> svg <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">select</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;svg&quot;</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb27-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb27-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb27-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">var</span> svg <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">select</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">anchor</span>.<span class=\"at\" style=\"color: #7d9029;\">current</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb27-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb27-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      margin <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"dt\" style=\"color: #902000;\">top</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">20</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">right</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">20</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">bottom</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">30</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">left</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">40</span><span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb27-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Delete the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb27-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      width <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">+</span><span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;width&quot;</span>) <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"va\" style=\"color: #19177c;\">margin</span>.<span class=\"at\" style=\"color: #7d9029;\">left</span> <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"va\" style=\"color: #19177c;\">margin</span>.<span class=\"at\" style=\"color: #7d9029;\">right</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb27-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      height <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">+</span><span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;height&quot;</span>) <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"va\" style=\"color: #19177c;\">margin</span>.<span class=\"at\" style=\"color: #7d9029;\">top</span> <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"va\" style=\"color: #19177c;\">margin</span>.<span class=\"at\" style=\"color: #7d9029;\">bottom</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb27-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb27-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb27-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      width <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">+</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">width</span> <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"va\" style=\"color: #19177c;\">margin</span>.<span class=\"at\" style=\"color: #7d9029;\">left</span> <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"va\" style=\"color: #19177c;\">margin</span>.<span class=\"at\" style=\"color: #7d9029;\">right</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb27-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      height <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">+</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">height</span> <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"va\" style=\"color: #19177c;\">margin</span>.<span class=\"at\" style=\"color: #7d9029;\">top</span> <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"va\" style=\"color: #19177c;\">margin</span>.<span class=\"at\" style=\"color: #7d9029;\">bottom</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb27-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a></code></pre></div>",
            "<p>Most D3 examples use a global <code style=\"white-space: pre-wrap;\">svg</code> variable to refer to their drawing area – the SVG. Change that to the element you want, your anchor, and the whole visualization should render in there.</p>",
            "<p>We also replaced reading width and height from the SVG element to getting them from props. This makes our component more reusable and better follows best practices.</p>",
            "<p>Next step is to change where our barchart gets its data. Gotta use the public URL.</p>",
            "<div class=\"sourceCode\" id=\"cb28\" data-caption=\"Change data URL\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb28-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">//Delete the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb28-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">tsv</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;data.tsv&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb28-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb28-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb28-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">tsv</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;https://swizec.github.io/dl/barchart.tsv&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(d) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb28-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb28-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">frequency</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">+</span><span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">frequency</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb28-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> d<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb28-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Delete the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb28-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">},</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(error<span class=\"op\" style=\"color: #666666;\">,</span> data) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb28-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (error) <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">throw</span> error<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb28-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb28-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb28-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span>).<span class=\"at\" style=\"color: #7d9029;\">then</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(data) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb28-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a></code></pre></div>",
            "<p>Same link, absolute version. And we updated the callback-based code to use the D3v5 promises version. That’s the most disruptive change going from v4 to v5 I believe.</p>",
            "<p>That’s it. You now have a Barchart component that renders the example barchart from D3’s docs.</p>",
            "<p>You can use it like this 👇 I recommend adding this code to the main App component that CodeSandbox creates for you.</p>",
            "<div class=\"sourceCode\" id=\"cb29\" data-caption=\"Use the Barchart\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb29-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> Barchart <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./Barchart&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb29-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb29-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb29-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb29-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">&lt;</span>svg width<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;800&quot;</span> height<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;600&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb29-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>Barchart x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">10</span><span class=\"op\" style=\"color: #666666;\">}</span> y<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">10</span><span class=\"op\" style=\"color: #666666;\">}</span> width<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">400</span><span class=\"op\" style=\"color: #666666;\">}</span> height<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">300</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb29-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  &lt;/svg<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb29-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">)</a></code></pre></div>",
            "<p>But like I said, don’t use this in production. It’s great for quick prototypes, trying stuff out, or seeing how an existing visualization might fit your app.</p>",
            "<h2 id=\"a-note-about-d3blackbox\">A note about D3blackbox</h2>",
            "<p>To make your life easier, I have open sourced my version of the D3blackbox HOC. You can read more about it at <a href=\"https://d3blackbox.com\">d3blackbox.com</a></p>",
            "<p>Works the same as the HOC we just built together, adds the anchor ref, props, and state to function arguments so it’s easier to use. No need to mess with <code style=\"white-space: pre-wrap;\">this</code> if you don’t want to 😃</p>",
            "<p>Install it from npm:</p>",
            "<pre><code style=\"white-space: pre-wrap;\">$ npm install d3blackbox</code></pre>",
            "<p>Then use it as you would your own HOC:</p>",
            "<div class=\"sourceCode\" id=\"cb31\" data-caption=\"Open source D3blackbox HOC\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb31-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;react&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb31-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> D3blackbox <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;d3blackbox&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb31-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"im\">as</span> d3 <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;d3&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb31-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb31-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> Barchart <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">D3blackbox</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(anchor<span class=\"op\" style=\"color: #666666;\">,</span> props<span class=\"op\" style=\"color: #666666;\">,</span> state) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb31-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> svg <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">select</span>(<span class=\"va\" style=\"color: #19177c;\">anchor</span>.<span class=\"at\" style=\"color: #7d9029;\">current</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb31-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// the rest of your D3 code</span></a>",
            "<a class=\"sourceLine\" id=\"cb31-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb31-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb31-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> Barchart<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>The function you pass into <code style=\"white-space: pre-wrap;\">D3blackbox</code> is still your full D3 render. Except now you can access important values directly without using <code style=\"white-space: pre-wrap;\">this</code>.</p>",
            "<p>You can use my D3blackbox or build your own. What’s important is that you now understand how higher order components work.</p>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "Build scalable dataviz components with full integration",
      "lectures": [
        {
          "lectureTitle": "The approach",
          "lectureLines": [
            "<h1 id=\"full-feature-integration\">Build scalable dataviz components with full integration</h1>",
            "<p>As useful as blackbox components are, we need something better if we want to leverage React’s rendering engine. The blackbox approach in particular struggles with scale. The more charts and graphs and visualizations on your screen, the slower it gets.</p>",
            "<p>Someone once came to my workshop and said <em>“We used the blackbox approach and it takes several seconds to re-render our dashboard on any change. I’m here to learn how to do it better.”</em></p>",
            "<p>In our full-feature integration, React does the rendering and D3 calculates the props.</p>",
            "<p>Our goal is to build controlled components that listen to their props and reconcile that with D3’s desire to use a lot of internal state.</p>",
            "<p>There are two situations we can find ourselves in:</p>",
            "<ol type=\"1\">",
            "<li>We know for a fact our component’s props never change</li>",
            "<li>We think props could change</li>",
            "</ol>",
            "<p>It’s easiest to show you with an example.</p>",
            "<p>Let’s build a scatterplot step by step. Take a random array of two-dimensional data, render in a loop. Make magic.</p>",
            "<p>Something like this 👇</p>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/scatterplot.png\" alt=\"A simple scatterplot\"><figcaption>A simple scatterplot</figcaption>",
            "</figure>",
            "<p>You’ve already built the axes! Copy pasta time.</p>"
          ]
        },
        {
          "lectureTitle": "When props don't change - a scatterplot",
          "lectureLines": [
            "<h2 id=\"props-dont-change\">Props don’t change</h2>",
            "<p>Ignoring props changes makes our life easier, but the component less flexible and reusable. Great when you know in advance that there are features you don’t ned to support.</p>",
            "<p>Like, no filtering your data or changing component size 👉 means your D3 scales don’t have to change.</p>",
            "<p>When our props don’t change, we follow a 2-step integration process:</p>",
            "<ul>",
            "<li>set up D3 objects as class properties</li>",
            "<li>output SVG in <code style=\"white-space: pre-wrap;\">render()</code></li>",
            "</ul>",
            "<p>We don’t have to worry about updating D3 objects on prop changes. Work done 👌</p>",
            "<h3 id=\"an-unchanging-scatterplot\">An unchanging scatterplot</h3>",
            "<p>We’re building a scatterplot of random data. You can see the <a href=\"https://codesandbox.io/s/1zlp4jv494\">final solution on CodeSandbox</a></p>",
            "<iframe src=\"https://codesandbox.io/embed/1zlp4jv494?codemirror=1&amp;view=split\" style=\"width:100%; height:500px; border😮; border-radius: 4px; overflow:hidden;\" sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\">",
            "</iframe>",
            "<p>Here’s the approach 👇</p>",
            "<ul>",
            "<li>stub out the basic setup</li>",
            "<li>generate random data</li>",
            "<li>stub out Scatterplot</li>",
            "<li>set up D3 scales</li>",
            "<li>render circles for each entry</li>",
            "<li>add axes</li>",
            "</ul>",
            "<p>I recommend creating a new CodeSandbox, or starting a new app with create-react-app. They should work the same.</p>",
            "<h4 id=\"basic-setup\">Basic setup</h4>",
            "<p>Make sure you have <code style=\"white-space: pre-wrap;\">d3</code> added as a dependency. Then add imports in your <code style=\"white-space: pre-wrap;\">App.js</code> file.</p>",
            "<div class=\"sourceCode\" id=\"cb32\" data-caption=\"Import files in App.js\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb32-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ./App.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb32-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb32-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"im\">as</span> d3 <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;d3&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb32-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> Scatterplot <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;./Scatterplot&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>Add an <code style=\"white-space: pre-wrap;\">&lt;svg&gt;</code> and render a Scatterplot in the render method. This will throw an error because we haven’t defined the Scatterplot yet and that’s okay.</p>",
            "<div class=\"sourceCode\" id=\"cb33\" data-caption=\"Render Scatterplot in App.js\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb33-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ./App.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb33-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb33-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span> <span class=\"at\" style=\"color: #7d9029;\">App</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb33-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb33-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>div className<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;App&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb33-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>h1<span class=\"op\" style=\"color: #666666;\">&gt;</span>Hello CodeSandbox&lt;/h1<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb33-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>h2<span class=\"op\" style=\"color: #666666;\">&gt;</span>Start editing to see some magic happen<span class=\"op\" style=\"color: #666666;\">!</span>&lt;/h2<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb33-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>svg width<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;800&quot;</span> height<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;800&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb33-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>Scatterplot x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">50</span><span class=\"op\" style=\"color: #666666;\">}</span> y<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">50</span><span class=\"op\" style=\"color: #666666;\">}</span> width<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">300</span><span class=\"op\" style=\"color: #666666;\">}</span> height<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">300</span><span class=\"op\" style=\"color: #666666;\">}</span> data<span class=\"op\" style=\"color: #666666;\">={</span>data<span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb33-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      &lt;/svg<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb33-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb33-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb33-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>CodeSandbox adds most of that code by default. If you’re using create-react-app, your App component has different markup. That’s okay too.</p>",
            "<p>We added this part:</p>",
            "<div class=\"sourceCode\" id=\"cb34\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb34-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">&lt;</span>svg width<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;800&quot;</span> height<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;800&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb34-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">&lt;</span>Scatterplot x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">50</span><span class=\"op\" style=\"color: #666666;\">}</span> y<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">50</span><span class=\"op\" style=\"color: #666666;\">}</span> width<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">300</span><span class=\"op\" style=\"color: #666666;\">}</span> height<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">300</span><span class=\"op\" style=\"color: #666666;\">}</span> data<span class=\"op\" style=\"color: #666666;\">={</span>data<span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb34-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">&lt;/svg<span class=\"op\" style=\"color: #666666;\">&gt;</span></a></code></pre></div>",
            "<p>An <code style=\"white-space: pre-wrap;\">&lt;svg&gt;</code> drawing area with a width and a height. Inside, a <code style=\"white-space: pre-wrap;\">&lt;Scatterplot</code> that’s positioned at <code style=\"white-space: pre-wrap;\">(50, 50)</code> and is 300px tall and wide. We’ll have to listen to those props when building the Scatterplot.</p>",
            "<p>It also accepts data.</p>",
            "<h4 id=\"random-data\">Random data</h4>",
            "<p>We’re using a line of code to generate data for our scatterplot. Put it in App.js. Either globally or within the App function. Doesn’t matter because this is an example.</p>",
            "<div class=\"sourceCode\" id=\"cb35\" data-caption=\"Generate random data\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb35-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> data <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">range</span>(<span class=\"dv\" style=\"color: #40a070;\">100</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb35-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">               .<span class=\"at\" style=\"color: #7d9029;\">map</span>(_ <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> [<span class=\"va\" style=\"color: #19177c;\">Math</span>.<span class=\"at\" style=\"color: #7d9029;\">random</span>()<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">Math</span>.<span class=\"at\" style=\"color: #7d9029;\">random</span>()])<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p><code style=\"white-space: pre-wrap;\">d3.range</code> returns a counting array from 0 to 100. Think <code style=\"white-space: pre-wrap;\">[1,2,3,4 ...]</code>.</p>",
            "<p>We iterate over this array and return a pair of random numbers for each entry. These will be our X and Y coordinates.</p>",
            "<h4 id=\"scatterplot\">Scatterplot</h4>",
            "<p>Our scatterplot goes in a new <code style=\"white-space: pre-wrap;\">Scatterplot.js</code> file. Starts with imports and an empty React component.</p>",
            "<div class=\"sourceCode\" id=\"cb36\" data-caption=\"Scatterplot stub\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb36-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ./Scatterplot.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb36-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;react&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb36-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"im\">as</span> d3 <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;d3&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb36-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb36-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Scatterplot <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb36-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb36-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb36-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y<span class=\"op\" style=\"color: #666666;\">,</span> data<span class=\"op\" style=\"color: #666666;\">,</span> height <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb36-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb36-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb36-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>g transform<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"vs\" style=\"color: #4070a0;\">`translate(</span><span class=\"sc\" style=\"color: #4070a0;\">${</span>x<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">, </span><span class=\"sc\" style=\"color: #4070a0;\">${</span>y<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">)`</span><span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb36-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb36-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      &lt;/g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb36-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb36-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb36-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb36-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb36-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> Scatterplot<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>Import dependencies, create a <code style=\"white-space: pre-wrap;\">Scatterplot</code> component, render a grouping element moved to the correct <code style=\"white-space: pre-wrap;\">x</code> and <code style=\"white-space: pre-wrap;\">y</code> position. Nothing too strange yet.</p>",
            "<h4 id=\"d3-scales\">D3 scales</h4>",
            "<p>Now we define D3 scales as component properties. We’re using the class field syntax that’s common in React projects.</p>",
            "<p>Technically a Babel plugin, but comes by default with CodeSandbox React projects and create-react-app setup. As far as I can tell, it’s a common way to write React components.</p>",
            "<div class=\"sourceCode\" id=\"cb37\" data-caption=\"Add D3 scales\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb37-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ./Scatterplot.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb37-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Scatterplot <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb37-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  xScale <span class=\"op\" style=\"color: #666666;\">=</span> d3</a>",
            "<a class=\"sourceLine\" id=\"cb37-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">scaleLinear</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb37-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">domain</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">1</span>])</a>",
            "<a class=\"sourceLine\" id=\"cb37-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">range</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">width</span>])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb37-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  yScale <span class=\"op\" style=\"color: #666666;\">=</span> d3</a>",
            "<a class=\"sourceLine\" id=\"cb37-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">scaleLinear</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb37-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">domain</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">1</span>])</a>",
            "<a class=\"sourceLine\" id=\"cb37-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">range</span>([<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">height</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">0</span>])<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>We’re defining <code style=\"white-space: pre-wrap;\">this.xScale</code> and <code style=\"white-space: pre-wrap;\">this.yScale</code> as linear scales. Their domains go from 0 to 1 because that’s what Math.random returns and their ranges describe the size of our scatterplot component.</p>",
            "<p>Idea being that these two scales will help us take those tiny variations in datapoint coordinates and explode them up to the full size of our scatterplot. Without this, they’d overlap and we wouldn’t see anything.</p>",
            "<h4 id=\"circles-for-each-entry\">Circles for each entry</h4>",
            "<p>Rendering our data points is a matter of looping over the data and rendering a <code style=\"white-space: pre-wrap;\">&lt;circle&gt;</code> for each entry. Using our scales to define positioning.</p>",
            "<div class=\"sourceCode\" id=\"cb38\" data-caption=\"Loop through data and render circles\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb38-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ./Scatterplot.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb38-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb38-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb38-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">&lt;</span>g transform<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"vs\" style=\"color: #4070a0;\">`translate(</span><span class=\"sc\" style=\"color: #4070a0;\">${</span>x<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">, </span><span class=\"sc\" style=\"color: #4070a0;\">${</span>y<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">)`</span><span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb38-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"va\" style=\"color: #19177c;\">data</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(([x<span class=\"op\" style=\"color: #666666;\">,</span> y]) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb38-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>circle cx<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">xScale</span>(<span class=\"op\" style=\"color: #666666;\">:</span><span class=\"dt\" style=\"color: #902000;\">satisfied</span><span class=\"op\" style=\"color: #666666;\">:}</span> cy<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">yScale</span>(y)<span class=\"op\" style=\"color: #666666;\">}</span> r<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;5&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb38-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    ))<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb38-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  &lt;/g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb38-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>In the <code style=\"white-space: pre-wrap;\">return</code> statement of our <code style=\"white-space: pre-wrap;\">render</code> render method, we add a <code style=\"white-space: pre-wrap;\">data.map</code> with an iterator method. This method takes our datapoint, uses array destructuring to get <code style=\"white-space: pre-wrap;\">x</code> and <code style=\"white-space: pre-wrap;\">y</code> coordinates, then uses our scales to define <code style=\"white-space: pre-wrap;\">cx</code> and <code style=\"white-space: pre-wrap;\">cy</code> attributes on a <code style=\"white-space: pre-wrap;\">&lt;circle&gt;</code> element.</p>",
            "<h4 id=\"add-axes\">Add axes</h4>",
            "<p>You can reuse axes from our earlier exercise. Or copy mine from <a href=\"https://codesandbox.io/s/1zlp4jv494\">the CodeSandbox</a></p>",
            "<iframe src=\"https://codesandbox.io/embed/1zlp4jv494?codemirror=1&amp;view=split\" style=\"width:100%; height:500px; border😮; border-radius: 4px; overflow:hidden;\" sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\">",
            "</iframe>",
            "<p>Mine take a scale and orientation as props, which makes them more flexible. Means we can use the same component for both the vertical and horizontal axis on our Scatterplot.</p>",
            "<p>Put the axis code in <code style=\"white-space: pre-wrap;\">Axis.js</code>, then augment the Scatterplot like this 👇</p>",
            "<div class=\"sourceCode\" id=\"cb39\" data-caption=\"Add axes to Scatterplot\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb39-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> Axis <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;./Axis&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb39-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb39-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb39-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb39-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb39-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">&lt;</span>g transform<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"vs\" style=\"color: #4070a0;\">`translate(</span><span class=\"sc\" style=\"color: #4070a0;\">${</span>x<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">, </span><span class=\"sc\" style=\"color: #4070a0;\">${</span>y<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">)`</span><span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb39-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"va\" style=\"color: #19177c;\">data</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(([x<span class=\"op\" style=\"color: #666666;\">,</span> y]) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb39-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>circle cx<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">xScale</span>(<span class=\"op\" style=\"color: #666666;\">:</span><span class=\"dt\" style=\"color: #902000;\">satisfied</span><span class=\"op\" style=\"color: #666666;\">:}</span> cy<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">yScale</span>(y)<span class=\"op\" style=\"color: #666666;\">}</span> r<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;5&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb39-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    ))<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb39-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>Axis x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">}</span> y<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">}</span> scale<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">yScale</span><span class=\"op\" style=\"color: #666666;\">}</span> type<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;Left&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb39-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>Axis x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">}</span> y<span class=\"op\" style=\"color: #666666;\">={</span>height<span class=\"op\" style=\"color: #666666;\">}</span> scale<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">xScale</span><span class=\"op\" style=\"color: #666666;\">}</span> type<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;Bottom&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb39-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  &lt;/g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb39-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>Vertical axis takes the vertical <code style=\"white-space: pre-wrap;\">this.yScale</code> scale, orients to the <code style=\"white-space: pre-wrap;\">Left</code> and we position it top left. The horizontal axis takes the horizontal <code style=\"white-space: pre-wrap;\">this.xScale</code> scale, orients to the <code style=\"white-space: pre-wrap;\">Bottom</code>, and we render it bottom left.</p>",
            "<p>Your Scatterplot should now look like this</p>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/scatterplot-basic.png\" alt=\"Rendered basic scatterplot\"><figcaption>Rendered basic scatterplot</figcaption>",
            "</figure>"
          ]
        },
        {
          "lectureTitle": "A scatterplot When props do change",
          "lectureLines": [
            "<h2 id=\"props-might-update\">Props might update</h2>",
            "<p>The story is a little different when our props might update. Since we’re using D3 objects to calculate SVG properties, we have to make sure those objects are updated <em>before</em> we render.</p>",
            "<p>No problem in React 15: Update in <code style=\"white-space: pre-wrap;\">componentWillUpdate</code>. But since React 16.3 we’ve been told never to use that again. Causes problems for modern async rendering.</p>",
            "<p>The official recommended solution is that anything that used to go in <code style=\"white-space: pre-wrap;\">componentWillUpdate</code>, can go in <code style=\"white-space: pre-wrap;\">componentDidUpdate</code>. But not so fast!</p>",
            "<p>Updating D3 objects in <code style=\"white-space: pre-wrap;\">componentDidUpdate</code> would mean our visualization always renders one update behind. Stale renders! 😱</p>",
            "<p>The new <code style=\"white-space: pre-wrap;\">getDerivedStateFromProps</code> to the rescue. Our integration follows a 3-step pattern:</p>",
            "<ul>",
            "<li>set up D3 objects in component state</li>",
            "<li>update D3 objects in <code style=\"white-space: pre-wrap;\">getDerivedStateFromProps</code></li>",
            "<li>output SVG in <code style=\"white-space: pre-wrap;\">render()</code></li>",
            "</ul>",
            "<p><code style=\"white-space: pre-wrap;\">getDerivedStateFromProps</code> is officially discouraged, and yet the best tool we have to make sure D3 state is updated <em>before</em> we render.</p>",
            "<p>Because React calls <code style=\"white-space: pre-wrap;\">getDerivedStateFromProps</code> on every component render, not just when our props actually change, you should avoid recalculating complex things too often. Use memoization helpers, check for changes before updating, stuff like that.</p>",
            "<h3 id=\"an-updateable-scatterplot\">An updateable scatterplot</h3>",
            "<p>Let’s update our scatterplot so it can deal with resizing and updating data.</p>",
            "<p>3 steps 👇</p>",
            "<ul>",
            "<li>add an interaction that resizes the scatterplot</li>",
            "<li>move scales to state</li>",
            "<li>update scales in <code style=\"white-space: pre-wrap;\">getDerivedStateFromProps</code></li>",
            "</ul>",
            "<p>You can see <a href=\"https://codesandbox.io/s/ll9kp8or0l\">my final solution on CodeSandbox</a>. I recommend you follow along updating your existing code.</p>",
            "<iframe src=\"https://codesandbox.io/embed/ll9kp8or0l?codemirror=1&amp;view=split\" style=\"width:100%; height:500px; border😮; border-radius: 4px; overflow:hidden;\" sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\">",
            "</iframe>",
            "<h4 id=\"resize-scatterplot-on-click\">Resize scatterplot on click</h4>",
            "<p>To test our scatterplot’s adaptability, we have to add an interaction: Resize the scatterplot on click.</p>",
            "<p>That change happens in <code style=\"white-space: pre-wrap;\">App.js</code>. Click on the <code style=\"white-space: pre-wrap;\">&lt;svg&gt;</code>, reduce width and height by 30%.</p>",
            "<p>Move sizing into App state and add an <code style=\"white-space: pre-wrap;\">onClick</code> handler.</p>",
            "<div class=\"sourceCode\" id=\"cb40\" data-caption=\"Sizing into state and click handler\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb40-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// App.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb40-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> App <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb40-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  state <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb40-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">width</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">300</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb40-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">height</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">300</span></a>",
            "<a class=\"sourceLine\" id=\"cb40-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb40-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb40-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  onClick <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb40-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> width<span class=\"op\" style=\"color: #666666;\">,</span> height <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb40-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">setState</span>(<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb40-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"dt\" style=\"color: #902000;\">width</span><span class=\"op\" style=\"color: #666666;\">:</span> width <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"fl\" style=\"color: #40a070;\">0.7</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb40-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"dt\" style=\"color: #902000;\">height</span><span class=\"op\" style=\"color: #666666;\">:</span> height <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"fl\" style=\"color: #40a070;\">0.7</span></a>",
            "<a class=\"sourceLine\" id=\"cb40-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb40-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb40-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb40-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb40-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> width<span class=\"op\" style=\"color: #666666;\">,</span> height <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>We changed our App component from a function to a class, added <code style=\"white-space: pre-wrap;\">state</code> with default <code style=\"white-space: pre-wrap;\">width</code> and <code style=\"white-space: pre-wrap;\">height</code>, and an <code style=\"white-space: pre-wrap;\">onClick</code> method that reduces size by 30%. The <code style=\"white-space: pre-wrap;\">render</code> method reads <code style=\"white-space: pre-wrap;\">width</code> and <code style=\"white-space: pre-wrap;\">height</code> from state.</p>",
            "<p>Now gotta change rendering to listen to these values and fire the <code style=\"white-space: pre-wrap;\">onClick</code> handler.</p>",
            "<div class=\"sourceCode\" id=\"cb41\" data-caption=\"Use state in rendering\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb41-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// App.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb41-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb41-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">&lt;</span>svg width<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;800&quot;</span> height<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;800&quot;</span> onClick<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">onClick</span><span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb41-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">&lt;</span>Scatterplot</a>",
            "<a class=\"sourceLine\" id=\"cb41-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">50</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb41-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    y<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">50</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb41-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    width<span class=\"op\" style=\"color: #666666;\">={</span>width<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb41-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    height<span class=\"op\" style=\"color: #666666;\">={</span>height<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb41-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    data<span class=\"op\" style=\"color: #666666;\">={</span>data<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb41-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb41-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">&lt;/svg<span class=\"op\" style=\"color: #666666;\">&gt;</span></a></code></pre></div>",
            "<p>Similar rendering as before. We have an <code style=\"white-space: pre-wrap;\">&lt;svg&gt;</code> that contains a <code style=\"white-space: pre-wrap;\">&lt;Scatterplot&gt;</code>. The svg fires <code style=\"white-space: pre-wrap;\">this.onClick</code> on click events and the scatterplot uses our <code style=\"white-space: pre-wrap;\">width</code> and <code style=\"white-space: pre-wrap;\">height</code> values for its props.</p>",
            "<p>If you try this code now, you should see a funny effect where axes move, but the scatterplot doesn’t resize.</p>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/not-resizing-scatterplot.png\" alt=\"Axes move, scatterplot doesn’t resize\"><figcaption>Axes move, scatterplot doesn’t resize</figcaption>",
            "</figure>",
            "<p>Peculiar isn’t it? Try to guess why.</p>",
            "<h4 id=\"move-scales-to-state\">Move scales to state</h4>",
            "<p>The horizontal axis moves because it’s render at <code style=\"white-space: pre-wrap;\">height</code> vertical coordinate. Datapoints don’t move because the scales that position them are calculated once – on component mount.</p>",
            "<p>First step to keeping scales up to date is to move them from component values into state.</p>",
            "<div class=\"sourceCode\" id=\"cb42\" data-caption=\"Move scales into state\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb42-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Scatterplot.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb42-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Scatterplot <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb42-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  state <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb42-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">xScale</span><span class=\"op\" style=\"color: #666666;\">:</span> d3</a>",
            "<a class=\"sourceLine\" id=\"cb42-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">scaleLinear</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb42-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">domain</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">1</span>])</a>",
            "<a class=\"sourceLine\" id=\"cb42-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">range</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">width</span>])<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb42-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">yScale</span><span class=\"op\" style=\"color: #666666;\">:</span> d3</a>",
            "<a class=\"sourceLine\" id=\"cb42-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">scaleLinear</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb42-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">domain</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">1</span>])</a>",
            "<a class=\"sourceLine\" id=\"cb42-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">range</span>([<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">height</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">0</span>])</a>",
            "<a class=\"sourceLine\" id=\"cb42-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">};</span></a></code></pre></div>",
            "<p>Same scale definition code we had before. Linear scales, domain from 0 to 1, using props for ranges. But now they’re wrapped in a <code style=\"white-space: pre-wrap;\">state = {}</code> object and it’s <code style=\"white-space: pre-wrap;\">xScale: d3 ...</code> instead of <code style=\"white-space: pre-wrap;\">xScale = d3 ...</code>.</p>",
            "<p>Our render function should use these as well. Small change:</p>",
            "<div class=\"sourceCode\" id=\"cb43\" data-caption=\"Render function uses state scales\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb43-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Scatterplot.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb43-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb43-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y<span class=\"op\" style=\"color: #666666;\">,</span> data<span class=\"op\" style=\"color: #666666;\">,</span> height <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb43-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">{</span> yScale<span class=\"op\" style=\"color: #666666;\">,</span> xScale <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb43-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb43-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb43-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>g transform<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"vs\" style=\"color: #4070a0;\">`translate(</span><span class=\"sc\" style=\"color: #4070a0;\">${</span>x<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">, </span><span class=\"sc\" style=\"color: #4070a0;\">${</span>y<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">)`</span><span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb43-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"va\" style=\"color: #19177c;\">data</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(([x<span class=\"op\" style=\"color: #666666;\">,</span> y]) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">&lt;</span>circle cx<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"at\" style=\"color: #7d9029;\">xScale</span>(<span class=\"op\" style=\"color: #666666;\">:</span><span class=\"dt\" style=\"color: #902000;\">satisfied</span><span class=\"op\" style=\"color: #666666;\">:}</span> cy<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"at\" style=\"color: #7d9029;\">yScale</span>(y)<span class=\"op\" style=\"color: #666666;\">}</span> r<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;5&quot;</span> /&gt😉<span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>We use destructuring to take our scales from state, then use them when mapping over our data.</p>",
            "<p>Clicking on the SVG produces the same result as before, but we’re almost there. Just one more step.</p>",
            "<h4 id=\"update-scales-in-getderivedstatefromprops\">Update scales in <code style=\"white-space: pre-wrap;\">getDerivedStateFromProps</code></h4>",
            "<p>Last step is to update our scales’ ranges in <code style=\"white-space: pre-wrap;\">getDerivedStateFromProps</code>. This method runs every time React touches our component for any reason.</p>",
            "<div class=\"sourceCode\" id=\"cb44\" data-caption=\"Update scales\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb44-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Scatterplot.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb44-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Scatterplot <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">PureComponent</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb44-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ..</span></a>",
            "<a class=\"sourceLine\" id=\"cb44-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">static</span> <span class=\"at\" style=\"color: #7d9029;\">getDerivedStateFromProps</span>(props<span class=\"op\" style=\"color: #666666;\">,</span> state) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb44-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> yScale<span class=\"op\" style=\"color: #666666;\">,</span> xScale <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> state<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb44-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb44-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">yScale</span>.<span class=\"at\" style=\"color: #7d9029;\">range</span>([<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">height</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">0</span>])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb44-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">xScale</span>.<span class=\"at\" style=\"color: #7d9029;\">range</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">width</span>])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb44-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb44-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb44-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      ...<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb44-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      yScale<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb44-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      xScale</a>",
            "<a class=\"sourceLine\" id=\"cb44-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb44-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>Take scales from state, update ranges with new values, return new state. Nice and easy.</p>",
            "<p>Notice that <code style=\"white-space: pre-wrap;\">getDerivedStateFromProps</code> is a static method shared by all instances of our Scatterplot component. You have no reference to a <code style=\"white-space: pre-wrap;\">this</code> and have to calculate new state purely from the <code style=\"white-space: pre-wrap;\">props</code> and <code style=\"white-space: pre-wrap;\">state</code> passed into your method.</p>",
            "<p>It’s a lot like a Redux reducer, if that helps you think about it. If you don’t know what Redux reducers are, don’t worry. Just remember to return a new version of component state.</p>",
            "<p>Your Scatterplot should now update its size on every click.</p>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/scatterplot-resizes.png\" alt=\"Scatterplot resizes\"><figcaption>Scatterplot resizes</figcaption>",
            "</figure>"
          ]
        },
        {
          "lectureTitle": "Making your components more flexible with render props",
          "lectureLines": [
            "<h2 id=\"making-your-components-more-flexible-with-render-props\">Making your components more flexible with render props</h2>",
            "<p>Our scatterplot doesn’t look quite as nice as the earlier screenshot. Regular SVG circles with no styling just can’t match up.</p>",
            "<p>What if we wanted to render beautiful circles? Or stars? Or maybe something else entirely?</p>",
            "<p>We can use render props to give users of our scatterplot component the power to define how they want datapoints to render. 😱</p>",
            "<p>Think of it as a sort of inversion of control. Another common buzzword are “slots”, or renderless components. The idea is that one of our props accepts a React component.</p>",
            "<p>We then use that prop to render our datapoints.</p>",
            "<p>It looks a little like this 👇</p>",
            "<pre class=\"jsx\"><code style=\"white-space: pre-wrap;\">&lt;Scatterplot",
            "  x={10} y={10}",
            "  data={data}",
            "  datapoint={(props) =&gt; &lt;Datapoint {...props} /&gt;}",
            "&gt;</code></pre>",
            "<p>What’s more, we can add interactions and other useful stuff to our <code style=\"white-space: pre-wrap;\">&lt;Datapoint&gt;</code> and <code style=\"white-space: pre-wrap;\">&lt;Scatterplot&gt;</code> doesn’t have to know anything about it. All the scatterplot cares about is rendering two axes and a bunch of datapoints.</p>",
            "<p>Let’s use the render prop approach to make our scatterplot more reusable.</p>",
            "<p>Steps 👇</p>",
            "<ul>",
            "<li>pass in a render prop</li>",
            "<li>use it to render datapoints</li>",
            "<li>make datapoint component look nice</li>",
            "</ul>",
            "<p>You can see <a href=\"https://codesandbox.io/s/j73xlyr8v5\">my solution on CodeSandbox</a>. I recommend you follow along with your existing code.</p>",
            "<iframe src=\"https://codesandbox.io/embed/j73xlyr8v5?codemirror=1&amp;view=split\" style=\"width:100%; height:500px; border😮; border-radius: 4px; overflow:hidden;\" sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\">",
            "</iframe>",
            "<h3 id=\"pass-in-a-render-prop\">Pass in a render prop</h3>",
            "<p>React components are Just JavaScript. Either a JSX function call or a function that returns some JSX.</p>",
            "<p>That means we can pass them into components via props. Let’s do that in App.js</p>",
            "<div class=\"sourceCode\" id=\"cb46\" data-caption=\"Pass render prop into Scatterplot\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb46-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// App.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb46-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb46-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> Datapoint <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;./Datapoint&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb46-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb46-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">//..</span></a>",
            "<a class=\"sourceLine\" id=\"cb46-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">&lt;</span>svg width<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;800&quot;</span> height<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;800&quot;</span> onClick<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">onClick</span><span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb46-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">&lt;</span>Scatterplot</a>",
            "<a class=\"sourceLine\" id=\"cb46-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">50</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb46-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    y<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">50</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb46-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    width<span class=\"op\" style=\"color: #666666;\">={</span>width<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb46-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    height<span class=\"op\" style=\"color: #666666;\">={</span>height<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb46-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    data<span class=\"op\" style=\"color: #666666;\">={</span>data<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb46-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    datapoint<span class=\"op\" style=\"color: #666666;\">={</span>(<span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y <span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">&lt;</span>Datapoint x<span class=\"op\" style=\"color: #666666;\">={</span>x<span class=\"op\" style=\"color: #666666;\">}</span> y<span class=\"op\" style=\"color: #666666;\">={</span>y<span class=\"op\" style=\"color: #666666;\">}</span> /&gt;<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb46-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb46-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">&lt;/svg<span class=\"op\" style=\"color: #666666;\">&gt;</span></a></code></pre></div>",
            "<p>For extra flexibility and readability we’re wrapping our <code style=\"white-space: pre-wrap;\">&lt;Datapoint&gt;</code> component in another function that accepts <code style=\"white-space: pre-wrap;\">x</code> and <code style=\"white-space: pre-wrap;\">y</code> coordinates. This is a common pattern you’ll see with render props 👉 it gives you the ability to pass in props from both the rendering component and the component that’s setting the render prop.</p>",
            "<p>Say we wanted Datapoint to know something about our App <em>and</em> our Scatterplot. The scatterplot calls this function with coordinates. We pass those into <code style=\"white-space: pre-wrap;\">&lt;Datapoint&gt;</code>. And because the method is defined inside App, we could pass-in anything that’s defined in the App. Like perhaps <code style=\"white-space: pre-wrap;\">data</code>.</p>",
            "<p>Your code will start throwing an error now. Datapoint isn’t defined. Don’t worry, it’s coming soon.</p>",
            "<h3 id=\"use-render-prop-to-render-datapoints\">Use render prop to render datapoints</h3>",
            "<p>To use our new <code style=\"white-space: pre-wrap;\">datapoint</code> render prop, we have to change how we render the scatterplot. Instead of returning a <code style=\"white-space: pre-wrap;\">&lt;circle&gt;</code> for each iteration of the dataset, we’re calling a function passed in from props.</p>",
            "<div class=\"sourceCode\" id=\"cb47\" data-caption=\"Accept a render prop\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb47-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Scatterplot.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb47-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb47-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y<span class=\"op\" style=\"color: #666666;\">,</span> data<span class=\"op\" style=\"color: #666666;\">,</span> height<span class=\"op\" style=\"color: #666666;\">,</span> datapoint <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb47-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">{</span> yScale<span class=\"op\" style=\"color: #666666;\">,</span> xScale <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb47-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb47-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb47-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>g transform<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"vs\" style=\"color: #4070a0;\">`translate(</span><span class=\"sc\" style=\"color: #4070a0;\">${</span>x<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">, </span><span class=\"sc\" style=\"color: #4070a0;\">${</span>y<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">)`</span><span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb47-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"va\" style=\"color: #19177c;\">data</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(([x<span class=\"op\" style=\"color: #666666;\">,</span> y]) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"at\" style=\"color: #7d9029;\">datapoint</span>(<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb47-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"at\" style=\"color: #7d9029;\">xScale</span>(<span class=\"op\" style=\"color: #666666;\">:</span><span class=\"dt\" style=\"color: #902000;\">satisfied</span><span class=\"op\" style=\"color: #666666;\">:,</span></a>",
            "<a class=\"sourceLine\" id=\"cb47-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"at\" style=\"color: #7d9029;\">yScale</span>(y)</a>",
            "<a class=\"sourceLine\" id=\"cb47-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span>))<span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>We take the <code style=\"white-space: pre-wrap;\">datapoint</code> function from props and call it in <code style=\"white-space: pre-wrap;\">data.map</code> making sure to pass in <code style=\"white-space: pre-wrap;\">x</code> and <code style=\"white-space: pre-wrap;\">y</code> as an object. Calling functions with objects like this is a common JavaScript pattern to fake named arguments.</p>",
            "<h3 id=\"make-datapoint-component-look-nice\">Make datapoint component look nice</h3>",
            "<p>We’ve got all the rendering, now all we need is the <code style=\"white-space: pre-wrap;\">&lt;Datapoint</code> component itself. That goes in a new <code style=\"white-space: pre-wrap;\">Datapoint.js</code> file.</p>",
            "<div class=\"sourceCode\" id=\"cb48\" data-caption=\"Datapoint file\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb48-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;react&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb48-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> styled <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;styled-components&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb48-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb48-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> Circle <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">styled</span>.<span class=\"at\" style=\"color: #7d9029;\">circle</span><span class=\"vs\" style=\"color: #4070a0;\">`</span></a>",
            "<a class=\"sourceLine\" id=\"cb48-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"vs\" style=\"color: #4070a0;\">  fill: steelblue;</span></a>",
            "<a class=\"sourceLine\" id=\"cb48-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"vs\" style=\"color: #4070a0;\">  fill-opacity: .7;</span></a>",
            "<a class=\"sourceLine\" id=\"cb48-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"vs\" style=\"color: #4070a0;\">  stroke: steelblue;</span></a>",
            "<a class=\"sourceLine\" id=\"cb48-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"vs\" style=\"color: #4070a0;\">  stroke-width: 1.5px;</span></a>",
            "<a class=\"sourceLine\" id=\"cb48-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"vs\" style=\"color: #4070a0;\">`</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb48-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb48-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Datapoint <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb48-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb48-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb48-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb48-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb48-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>Circle</a>",
            "<a class=\"sourceLine\" id=\"cb48-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        cx<span class=\"op\" style=\"color: #666666;\">={</span>x<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb48-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        cy<span class=\"op\" style=\"color: #666666;\">={</span>y<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb48-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        r<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">3</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb48-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb48-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb48-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb48-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb48-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb48-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> Datapoint<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>I’m using styled-components to define the CSS for my Datapoint. You can use whatever you prefer. I like styled components because they’re a good balance between CSS-in-JS and normal CSS syntax.</p>",
            "<p>The component itself renders a styled circle using props for positioning and a radius of 3 pixels.</p>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/scatterplot-finished.png\" alt=\"Finished scatterplot\"><figcaption>Finished scatterplot</figcaption>",
            "</figure>",
            "<p>For an extra challenge, try rendering circle radius from state and changing datapoint size on mouse over. Make the scatterplot interactive.</p>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "You're awesome",
      "lectures": [
        {
          "lectureTitle": "💪",
          "lectureLines": [
            "<h1 id=\"youre-awesome\">You’re awesome</h1>",
            "<p>You know the basics!</p>",
            "<p>You can take any D3 example from the internets and wrap it in a React component, <em>and</em> you know how to build React+D3 components from scratch. You’re amazing. High five! 🖐</p>",
            "<p>The rest of this book is about using these concepts and pushing them to the limits of practicality. We’re going to build an interactive visualization of tech salaries compared to median household income.</p>",
            "<p>Why? Because it piqued my interest, and because it shows why you should call yourself an engineer, not a programmer or a developer. <strong>You’re an engineer</strong>. Remember that.</p>",
            "<p>Throughout the example, you’ll learn more details of D3, tidbits from React, and the animation chapter is going to blow your mind.</p>",
            "<p>Super fun!</p>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/full-dataviz.png\" alt=\"Default view\"><figcaption>Default view</figcaption>",
            "</figure>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/interaction-dataviz.png\" alt=\"After a click\"><figcaption>After a click</figcaption>",
            "</figure>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "A note about state",
      "lectures": [
        {
          "lectureTitle": "Handling state in your React app",
          "lectureLines": [
            "<h1 id=\"state-handling-architecture\">Handling state in your React app</h1>",
            "<p>Before I can set you loose on the world, we should talk about managing state. It’s where most engineers shoot themselves in the foot.</p>",
            "<p>You’ll notice you shot yourself in the foot six months ago when all of a sudden it becomes near impossible to build new features, add functionality, and know what’s going on with your app. If you find yourself spending a lot of time confused about why your UI does something, you’ve shot yourself in the foot.</p>",
            "<p>Don’t worry tho, happens to everyone!</p>",
            "<p>I shoot myself in the foot all the time. You can’t predict how your app is going to evolve. You can’t know how technology is going to improve. Can’t know how your team will grow.</p>",
            "<p>Best approach is to optimize for change.</p>",
            "<p>Otherwise you might have to do a rewrite. Rewrites are bad. One of the most infamous rewrite story is about <a href=\"https://www.joelonsoftware.com/articles/fog0000000069.html\">The Rewrite that Killed Netscape</a>. You might not even have heard of Netscape 😉</p>",
            "<p>Let’s save you from that.</p>"
          ]
        },
        {
          "lectureTitle": "Basic architecture we'll use",
          "lectureLines": [
            "<h2 id=\"basic-architecture\">Basic architecture</h2>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/unidirectionalflow.png\" alt=\"Unidirectional data flow\"><figcaption>Unidirectional data flow</figcaption>",
            "</figure>",
            "<p>We’re using a unidirectional data flow architecture with a single source of truth. That means you always know what to expect. Think of your app as a giant circle.</p>",
            "<p>Data goes from your source of truth into your components. Events go from your components into your source of truth. All in one direction</p>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/architecture.png\" alt=\"The basic architecture\"><figcaption>The basic architecture</figcaption>",
            "</figure>",
            "<p>Our main App component holds state for your entire application. Anything that multiple components should be aware of lives here. This state flows down the hierarchy via props. Changes happen via callbacks, also passed down through props.</p>",
            "<p>Like this 👇</p>",
            "<ul>",
            "<li>The Main Component – <code style=\"white-space: pre-wrap;\">App</code> – holds the truth</li>",
            "<li>Truth flows down through props</li>",
            "<li>Child components react to user events</li>",
            "<li>They announce changes using callbacks</li>",
            "<li>The Main Component updates its truth</li>",
            "<li>Updates flow back down the chain</li>",
            "<li>UI updates through re-renders</li>",
            "</ul>",
            "<p>This looks roundabout, but it’s amazing. Far better than worrying about parts of the UI growing out of sync with the rest of your app. I could talk your ear off with debugging horror stories, but I’m nice, so I won’t.</p>",
            "<p>When a user clicks one of our controls, a <code style=\"white-space: pre-wrap;\">Toggle</code>, it invokes a callback. This in turn invokes a callback on <code style=\"white-space: pre-wrap;\">ControlRow</code>, which invokes a callback on <code style=\"white-space: pre-wrap;\">Controls</code>, which invokes a callback on <code style=\"white-space: pre-wrap;\">App</code>.</p>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/architecture_callbacks.png\" alt=\"Callback chain\"><figcaption>Callback chain</figcaption>",
            "</figure>",
            "<p>With each hop, the nature of our callback changes. <code style=\"white-space: pre-wrap;\">Toggle</code> tells <code style=\"white-space: pre-wrap;\">ControlRow</code> which entry was toggled, <code style=\"white-space: pre-wrap;\">ControlRow</code> tells <code style=\"white-space: pre-wrap;\">Controls</code> how to update the data filter function, and <code style=\"white-space: pre-wrap;\">Controls</code> gives <code style=\"white-space: pre-wrap;\">App</code> a composite filter built from all the controls. You’ll see how that works in the next chapter.</p>",
            "<p>All you have to remember right now is that callbacks evolve from passing low-level information to high-level business logic. Starts with <em>“I was clicked”</em> ends with <em>“Update visualization filter”</em></p>",
            "<p>When the final callback is invoked, <code style=\"white-space: pre-wrap;\">App</code> updates its repository of truth – <code style=\"white-space: pre-wrap;\">this.state</code> – and communicates the change back down the chain via props. No additional wiring needed on your part. React’s got you covered.</p>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/architecture_dataflow.png\" alt=\"Data flows down\"><figcaption>Data flows down</figcaption>",
            "</figure>",
            "<p>You can think of it like calling functions with new arguments. Because the functions – components – render the UI, your interface updates.</p>",
            "<p>Because your components are well-made and rely on their props to render, React’s engine can optimize these changes. It compares the new and old component trees and decides which components to re-render and which to leave alone.</p>",
            "<p>Functional programming for HTML! 😎</p>",
            "<p>The functional programming concepts we’re relying on are called <a href=\"https://en.wikipedia.org/wiki/Referential_transparency\">referential transparency</a>, <a href=\"https://en.wikipedia.org/wiki/Idempotence\">idempotent functions</a>, and <a href=\"https://en.wikipedia.org/wiki/Pure_function\">functional purity</a>. I suggest Googling them if you want to learn the theory behind it all.</p>"
          ]
        },
        {
          "lectureTitle": "What about React Context? Redux? MobX?",
          "lectureLines": [
            "<h2 id=\"what-about-react-context-redux-mobx\">What about React Context? Redux? MobX?</h2>",
            "<p>You may have heard of React Context, Redux, MobX and other state handling libraries. They’re all great in different ways and the internet can’t decide which one is best. Everyone has their own little twist on the story.</p>",
            "<p>And yet the basic principles are all the same:</p>",
            "<ol type=\"1\">",
            "<li>Single source of truth</li>",
            "<li>State flows down</li>",
            "<li>Updates flow up</li>",
            "</ol>",
            "<p>Where React Context, Redux, MobX and other libraries help, is how much work it is to build this machinery and keep it running. How much flexibility you get when moving components. Basically how easy it is to change your app later.</p>",
            "<p>Remember the rewrite conundrum?</p>",
            "<p>Our basic approach binds business structure to UI structure. Your state, your props, your callbacks, they all follow the same hierarchy as your UI does.</p>",
            "<p>Want to move the buy button? Great! You have to update the entire chain of components leading from your state to that button.</p>",
            "<p>Everything needs new callbacks and new props.</p>",
            "<p>This is known as prop drilling and fast becomes super tedious. Rewiring your whole app just to move a single button is no fun.</p>",
            "<p>To solve this problem, React Context, Redux, MobX, etc. decouple your business logic from your UI architecture. Take state out of the main component and move it into its own object. Connect everything to that instead.</p>",
            "<p>[picture]</p>",
            "<p>Now it doesn’t matter where you move that button. It still triggers the same function on the same state. Every other component that cares about that state updates too.</p>",
            "<p>Different libraries have different details for how that works, but they all follow the same idea and solve the same problem.</p>",
            "<hr>",
            "<p>We’re sticking with the basic approach because it’s easier to explain, works without additional libraries, and is Good Enough™.</p>",
            "<p>You can see an approach to using Redux in dataviz in the <a href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6906668#animating-react-redux\">Animating with React, Redux, and D3 chapter</a>, and we tackle MobX in the <a href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6906696\">MobX chapter</a>.</p>"
          ]
        },
        {
          "lectureTitle": "How to structure your app",
          "lectureLines": [
            "<h1 id=\"structuring-your-app\">How to structure your app</h1>",
            "<p>Our app is built from components. You already know how components work. Where it gets tricky is deciding where one component ends and another beings.</p>",
            "<p>One of the hardest problems in software engineering I’d say. Defining the boundaries and interfaces between objects. Entire books have been written on the subject.</p>",
            "<p>You’ll learn most of it with experience. Just through trying different approaches, seeing what works, and developing your taste. Like a chef gets better at improvisation the more things they try. Or a musician.</p>",
            "<p>To get you started, here’s a rule of thumb that I like to use: if you have to use the word “and” to describe what your component does, then it should become two components. If you build the same feature multiple times, turn it into a component.</p>",
            "<p>You can then remix components into larger components where it makes sense, or you can keep them separate. It makes sense to combine when multiple small components have to work together to build a big feature.</p>",
            "<p>This architecture often mimics the design of your UI.</p>",
            "<p>For example: our tech salary visualization is going to use 1 very top level component, 5 major components, and a bunch of child components.</p>",
            "<ul>",
            "<li><code style=\"white-space: pre-wrap;\">App</code> is the very top level component; it keeps everything together</li>",
            "<li><code style=\"white-space: pre-wrap;\">Title</code> renders the dynamic title</li>",
            "<li><code style=\"white-space: pre-wrap;\">Description</code> renders the dynamic description</li>",
            "<li><code style=\"white-space: pre-wrap;\">Histogram</code> renders the histogram and has child components for the axis and histogram bars</li>",
            "<li><code style=\"white-space: pre-wrap;\">CountyMap</code> renders the choropleth map and uses child components for the counties</li>",
            "<li><code style=\"white-space: pre-wrap;\">Controls</code> renders the rows of buttons that let users explore our dataset</li>",
            "</ul>",
            "<p>Most of these are specific to our use case, but <code style=\"white-space: pre-wrap;\">Histogram</code> and <code style=\"white-space: pre-wrap;\">CountyMap</code> have potential to be used elsewhere. We’ll keep that in mind when we build them.</p>",
            "<p><code style=\"white-space: pre-wrap;\">Histogram</code>, <code style=\"white-space: pre-wrap;\">CountyMap</code>, and <code style=\"white-space: pre-wrap;\">Controls</code> are going to have their own folder inside <code style=\"white-space: pre-wrap;\">src/components/</code> to help us group major components with their children. An <code style=\"white-space: pre-wrap;\">index.js</code> file will help with imports.</p>",
            "<p>We’ll use a <code style=\"white-space: pre-wrap;\">Meta</code> folder for all our metadata components like <code style=\"white-space: pre-wrap;\">Title</code> and <code style=\"white-space: pre-wrap;\">Description</code>. We don’t <em>have</em> to do this, but <code style=\"white-space: pre-wrap;\">import { Title, Description } from './Meta'</code> looks better than separate imports for related-but-different components. Namespacing, if you will.</p>",
            "<p>We want to access every component with <code style=\"white-space: pre-wrap;\">import My Component from './MyComponent'</code> and render as <code style=\"white-space: pre-wrap;\">&lt;MyComponent {...params} /&gt;</code>. Something is wrong, if a parent component has to know details about the implementation of a child component.</p>",
            "<p>You can read more about these ideas by Googling <a href=\"https://en.wikipedia.org/wiki/Leaky_abstraction\">“leaky abstractions”</a>, <a href=\"https://en.wikipedia.org/wiki/Single_responsibility_principle\">“single responsibility principle”</a>, <a href=\"https://en.wikipedia.org/wiki/Separation_of_concerns\">“separation of concerns”</a>, and <a href=\"https://en.wikipedia.org/wiki/Structured_programming\">“structured programming”</a>. Books from the late 90’s and early 2000’s (when object-oriented programming was The Future™) have the best curated info in my experience.</p>"
          ]
        },
        {
          "lectureTitle": "Congratz!",
          "lectureLines": [
            "<p>Congratz! You know everything you need to build visualizations with React and D3. 👏</p>",
            "<p>This is the point in tech books where I run off and start building things on my own. Then I get frustrated, spend hours Googling for answers, and then remember, “Hey! Maybe I should read the rest of the book!”</p>",
            "<p>Reading the rest of the book helps. I’ll show you how all this fits together into a larger project.</p>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "Set up your local environment",
      "lectures": [
        {
          "lectureTitle": "Local environment setup",
          "lectureLines": [
            "<h1 id=\"getting-started\">Set up a local environment with create-react-app</h1>",
            "<p>Can you believe this is the third time I’m writing a <em>“How to set up all the tools and get started”</em> section? The ecosystem moves fast!</p>",
            "<p>You can see the old versions in the ebook as Appendix A – a roll-your-own environment that’s almost the same as the one I’m about to show you, and Appendix B – a browserify-based environment (if you don’t like Webpack).</p>",
            "<p>In the summer of 2016, the React team released a tool called <code style=\"white-space: pre-wrap;\">create-react-app</code>. It creates a React app so that you can get started right away. All of the code in this book runs with an app set up like this.</p>",
            "<p>Getting started with React has never been easier.</p>",
            "<ol type=\"1\">",
            "<li>Make sure you have node.js</li>",
            "<li>Install the app generator</li>",
            "<li>Run the app generator</li>",
            "</ol>"
          ]
        },
        {
          "lectureTitle": "Start with create-react-app",
          "lectureLines": [
            "<h2 id=\"make-sure-you-have-node.js\">Make sure you have node.js</h2>",
            "<p>Modern JavaScript development runs on node.js. Your code still ends up in a browser, but there are a few steps it has to go through before it gets there. Those toolchains run on node.js.</p>",
            "<p>Go to <a href=\"https://nodejs.org/en/\">nodejs.org</a>, download one of the latest versions, and run the installer. You can pick the more stable LTS (long-term-support) version, or the more gimme-all-the-features version. JavaScript toolchains run fine in both.</p>",
            "<p>Server-side rendering might be easier with the fancy-pants version. More on that later.</p>",
            "<h2 id=\"install-create-react-app\">Install create-react-app</h2>",
            "<p>Great, you have node and you’re ready to go.</p>",
            "<p>Run this command in a terminal:</p>",
            "<pre data-caption=\"Install create-react-app\"><code style=\"white-space: pre-wrap;\">$ npm install -g create-react-app</code></pre>",
            "<p>This installs a global npm package called <code style=\"white-space: pre-wrap;\">create-react-app</code>. Its job is to create a directory and install <code style=\"white-space: pre-wrap;\">react-scripts</code>.</p>",
            "<p>Confusing, I know.</p>",
            "<p>You can think of <code style=\"white-space: pre-wrap;\">create-react-app</code> and <code style=\"white-space: pre-wrap;\">react-scripts</code> as two parts of the same construction. The first is a lightweight script that you can install globally and never update; the second is where the work happens. You want this one to be fresh every time you start a new app.</p>",
            "<p>Keeping a global dependency up to date would suck, especially considering there have been six major updates since Facebook first launched <code style=\"white-space: pre-wrap;\">create-react-app</code> in July 2016.</p>",
            "<h2 id=\"run-create-react-app\">Run create-react-app</h2>",
            "<p>Superb! You have <code style=\"white-space: pre-wrap;\">create-react-app</code>. Time to create an app and get started with some coding.</p>",
            "<p>Run this in a terminal:</p>",
            "<pre data-caption=\"Create your project\"><code style=\"white-space: pre-wrap;\">$ create-react-app react-d3js-example</code></pre>",
            "<p>Congratulations! You just created a React app. <em>With</em> all the setup and the fuss that goes into using a modern JavaScript toolchain.</p>",
            "<p>Your next step is to run your app:</p>",
            "<pre data-caption=\"Start your dev server\"><code style=\"white-space: pre-wrap;\">$ cd react-d3js-example",
            "$ npm start</code></pre>",
            "<p>A browser tab should open with a page that looks like this:</p>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/initial-app.png\" alt=\"Initial React app\"><figcaption>Initial React app</figcaption>",
            "</figure>",
            "<p>If that didn’t work, then something must have gone terribly wrong. You should consult <a href=\"https://github.com/facebookincubator/create-react-app\">the official docs</a>. Maybe that will help.</p>"
          ]
        },
        {
          "lectureTitle": "What you get",
          "lectureLines": [
            "<h2 id=\"what-you-get\">What you get</h2>",
            "<p>Running <code style=\"white-space: pre-wrap;\">create-react-app</code> installs tools and libraries. There’s around 80MB of them as of October 2016. This is why using a generator is easier than slogging through on your own.</p>",
            "<p>Crucially, there is a single dependency in your project – <code style=\"white-space: pre-wrap;\">react-scripts</code>. But it gives you everything you need to build modern React apps.</p>",
            "<ul>",
            "<li><strong>Webpack</strong> - a module bundler and file loader. It turns your app into a single JavaScript file, and it even lets you import images and styles like they were code.</li>",
            "<li><strong>Babel</strong> - a JavaScript transpiler. It turns your modern JS code (ES6, ECMAScript2015, 2016, ES7, whatever you call it) into code that can run on real world browsers. It’s the ecosystem’s answer to slow browser adoption.</li>",
            "<li><strong>ESLint</strong> - linting! It annoys you when you write code that is bad. This is a good thing. 😄</li>",
            "<li><strong>Jest</strong> - a test runner. Having tests set up from the beginning of a project is a good idea. We won’t really write tests in this book, but I will show you how it’s done.</li>",
            "</ul>",
            "<p>All tools come preconfigured with sane defaults and ready to use. You have no idea how revolutionary this is. Check the appendixes to see how hard setting up an environment used to be. I’m so happy that <code style=\"white-space: pre-wrap;\">create-react-app</code> exists.</p>",
            "<hr>",
            "<p>Besides the toolchain, <code style=\"white-space: pre-wrap;\">create-react-app</code> also gives you a default directory structure and a ton of helpful docs.</p>",
            "<p>You should read the <code style=\"white-space: pre-wrap;\">README.md</code> file. It’s full of great advice, and it goes into more detail about the app generator than we can get into here. The team also makes sure it’s kept up-to-date.</p>",
            "<p>All of the code samples in this book are going to follow the default directory structure. Public assets like HTML files, datasets, and some images go into <code style=\"white-space: pre-wrap;\">public/</code>. Code goes into <code style=\"white-space: pre-wrap;\">src/</code>.</p>",
            "<p>Code is anything that we <code style=\"white-space: pre-wrap;\">import</code> or <code style=\"white-space: pre-wrap;\">require()</code>. That includes JavaScript files themselves, as well as stylesheets and images.</p>",
            "<p>You can poke around <code style=\"white-space: pre-wrap;\">src/App.js</code> to see how it’s structured and what happens when you change something. You’re going to change bits and pieces of this file as you go through the book.</p>",
            "<p>I suggest you keep <code style=\"white-space: pre-wrap;\">npm start</code> running at all times while coding. The browser will refresh on every code change, so you’ll be able to see instant results.</p>"
          ]
        },
        {
          "lectureTitle": "Install extra dependencies",
          "lectureLines": [
            "<h2 id=\"install-dependencies\">Install dependencies for React for Datavisualization</h2>",
            "<p>There are a couple of libraries we’re going to use often in this book: D3, Topojson, and Lodash. We’re using D3 to do our heavy lifting, Topojson to parse geographical data, and Lodash to make data manipulation easier.</p>",
            "<p>You can install them like this:</p>",
            "<pre data-caption=\"Install dependencies\"><code style=\"white-space: pre-wrap;\">$ npm install --save d3 topojson lodash</code></pre>",
            "<p>Additionally, we’re using Bootstrap for default styling and String for string manipulation. You should install them as well.</p>",
            "<pre data-caption=\"Styling and string manipulation\"><code style=\"white-space: pre-wrap;\">$ npm install --save bootstrap string</code></pre>",
            "<p>Now your environment is ready! You should see a default React App page in the browser without errors. Keep <code style=\"white-space: pre-wrap;\">npm start</code> running as you follow the examples in this book.</p>",
            "<p>Some examples are going to need other libraries. When that happens, I’ll remind you to install them.</p>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "176,113 tech salaries visualized – a dataviz dashboard",
      "lectures": [
        {
          "lectureTitle": "176,113 tech salaries visualized",
          "lectureLines": [
            "<h1 id=\"salary-visualization\">A big example project - 176,113 tech salaries visualized</h1>",
            "<p>We’re going to build this:</p>",
            "<p><img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/full-dataviz.png\"></p>",
            "<p>An interactive visualization dashboard app with a choropleth map and a histogram comparing tech salaries to median household income in the area. Users can filter by year, job title, or US state to get a better view.</p>",
            "<p><img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/interaction-dataviz.png\"></p>",
            "<p>It’s going to be great.</p>",
            "<p>At this point, I assume you’ve used <code style=\"white-space: pre-wrap;\">create-react-app</code> to set up your environment. Check the <a href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6888622#getting-started\">getting started</a> section if you haven’t. I’m also assuming you’ve read the <a href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6887708#the-meat-start\">basics chapter</a>. I’m still going to explain what we’re doing, but knowing the basics helps.</p>",
            "<p>I suggest you follow along, keep <code style=\"white-space: pre-wrap;\">npm start</code> running, and watch your visualization change in real time as you code. It’s rewarding as hell.</p>",
            "<p>If you get stuck, you can use my <a href=\"https://github.com/Swizec/react-d3-walkthrough-livecode\">react-d3-walkthrough-livecode</a> to jump between steps. The <a href=\"https://github.com/Swizec/react-d3-walkthrough-livecode/commits/master\">commits</a> correspond to the code at the end of each step. Check out the first commit and run <code style=\"white-space: pre-wrap;\">npm install</code> to skip the initial setup.</p>",
            "<p>If you want to see how this project evolved over 22 months, check <a href=\"https://github.com/Swizec/h1b-software-salaries\">the original repo</a>. The <a href=\"https://github.com/Swizec/h1b-software-salaries/tree/modern-code\">modern-code</a> branch has the code you’re about to build.</p>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "Show a Preloader",
      "lectures": [
        {
          "lectureTitle": "Show a Preloader",
          "lectureLines": [
            "<h1 id=\"show-a-preloader\">Show a Preloader</h1>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/preloader-screenshot.png\" alt=\"Preloader screenshot\"><figcaption>Preloader screenshot</figcaption>",
            "</figure>",
            "<p>Our preloader is a screenshot of the final result. Usually you’d have to wait until the end of the project to make that, but I’ll just give you mine. Starting with the preloader makes sense for two reasons:</p>",
            "<ol type=\"1\">",
            "<li>It’s nicer than looking at a blank screen while data loads</li>",
            "<li>It’s a good sanity check for our environment</li>",
            "</ol>",
            "<p>We’re using a screenshot of the final result because the full dataset takes a few seconds to load, parse, and render. It looks better if visitors see something informative while they wait.</p>",
            "<p>React Suspense is about to make building preloaders a whole lot better. Adapting to the user’s network speed, built-in preload functionality, stuff like that. More on that in the chapter on React Suspense and Time Slicing.</p>",
            "<p>Make sure you’ve installed <a href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6888625#install-dependencies\">all dependencies</a> and that <code style=\"white-space: pre-wrap;\">npm start</code> is running.</p>",
            "<p>We’re building our preloader in 4 steps:</p>",
            "<ol type=\"1\">",
            "<li>Get the image</li>",
            "<li>Make the <code style=\"white-space: pre-wrap;\">Preloader</code> component</li>",
            "<li>Update <code style=\"white-space: pre-wrap;\">App</code></li>",
            "<li>Load Bootstrap styles in <code style=\"white-space: pre-wrap;\">index.js</code></li>",
            "</ol>"
          ]
        },
        {
          "lectureTitle": "Step1: get image",
          "lectureLines": [
            "<h2 id=\"step-1-get-the-image\">Step 1: Get the image</h2>",
            "<p>Download <a href=\"https://github.com/Swizec/react-d3-walkthrough-livecode/raw/master/src/assets/preloading.png\">my screenshot from Github</a> and save it in <code style=\"white-space: pre-wrap;\">src/assets/preloading.png</code>. It goes in the <code style=\"white-space: pre-wrap;\">src/assets/</code> directory because we’re going to <code style=\"white-space: pre-wrap;\">import</code> it in JavaScript (which makes it part of our source code), and I like to put non-JavaScript files in <code style=\"white-space: pre-wrap;\">assets</code>. Keeps the project organized.</p>"
          ]
        },
        {
          "lectureTitle": "Step 2: make component",
          "lectureLines": [
            "<h2 id=\"step-2-preloader-component\">Step 2: Preloader component</h2>",
            "<p>Our <code style=\"white-space: pre-wrap;\">Preloader</code> is a small component that pretends it’s the <code style=\"white-space: pre-wrap;\">App</code> and renders a static title, description, and a screenshot of the end result. It goes in <code style=\"white-space: pre-wrap;\">src/components/Preloader.js</code>.</p>",
            "<p>We’ll put all of our components in <code style=\"white-space: pre-wrap;\">src/components/</code>.</p>",
            "<p>We start the component off with some imports, an export, and a functional stateless component that returns an empty div element.</p>",
            "<div class=\"sourceCode\" id=\"cb54\" data-caption=\"Preloader skeleton\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb54-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Preloader.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb54-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb54-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;react&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb54-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb54-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> PreloaderImg <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;../assets/preloading.png&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb54-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb54-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> Preloader <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb54-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>div className<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;App container&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb54-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb54-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb54-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb54-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb54-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> Preloader<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>We <code style=\"white-space: pre-wrap;\">import</code> React (which we need to make JSX syntax work) and the <code style=\"white-space: pre-wrap;\">PreloaderImg</code> for our image. We can import images because of the Webpack configuration that comes with <code style=\"white-space: pre-wrap;\">create-react-app</code>. The webpack image loader returns a URL that we put in the <code style=\"white-space: pre-wrap;\">PreloaderImg</code> constant.</p>",
            "<p>At the bottom, we <code style=\"white-space: pre-wrap;\">export default Preloader</code> so that we can use it in <code style=\"white-space: pre-wrap;\">App.js</code> as <code style=\"white-space: pre-wrap;\">import Preloader</code>. Default exports are great when your file exports a single object. Named exports when you want to export multiple items. You’ll see that play out in the rest of this project.</p>",
            "<p>The <code style=\"white-space: pre-wrap;\">Preloader</code> function takes no props (because we don’t need any) and returns an empty <code style=\"white-space: pre-wrap;\">div</code>. Let’s fill it in.</p>",
            "<div class=\"sourceCode\" id=\"cb55\" data-caption=\"Preloader content\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb55-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Preloader.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb55-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb55-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> Preloader <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb55-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>div className<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;App container&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb55-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>h1<span class=\"op\" style=\"color: #666666;\">&gt;</span>The average H1B <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">in</span> tech pays $86<span class=\"op\" style=\"color: #666666;\">,</span><span class=\"dv\" style=\"color: #40a070;\">164</span>/year&lt;/h1<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb55-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>p className<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;lead&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb55-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            Since <span class=\"dv\" style=\"color: #40a070;\">2012</span> the US tech industry has sponsored <span class=\"dv\" style=\"color: #40a070;\">176</span><span class=\"op\" style=\"color: #666666;\">,</span><span class=\"dv\" style=\"color: #40a070;\">075</span> H1B work</a>",
            "<a class=\"sourceLine\" id=\"cb55-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"va\" style=\"color: #19177c;\">visas</span>. <span class=\"at\" style=\"color: #7d9029;\">Most</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">of</span> them paid <span class=\"op\" style=\"color: #666666;\">&lt;</span>b<span class=\"op\" style=\"color: #666666;\">&gt;</span>$60<span class=\"op\" style=\"color: #666666;\">,</span><span class=\"dv\" style=\"color: #40a070;\">660</span> to $111<span class=\"op\" style=\"color: #666666;\">,</span><span class=\"dv\" style=\"color: #40a070;\">668</span>&lt;/b<span class=\"op\" style=\"color: #666666;\">&gt;</span> per <span class=\"at\" style=\"color: #7d9029;\">year</span> (<span class=\"dv\" style=\"color: #40a070;\">1</span></a>",
            "<a class=\"sourceLine\" id=\"cb55-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            standard deviation).<span class=\"op\" style=\"color: #666666;\">{</span><span class=\"st\" style=\"color: #4070a0;\">&quot; &quot;</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb55-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>span<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb55-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                The best city <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">for</span> an H1B is <span class=\"op\" style=\"color: #666666;\">&lt;</span>b<span class=\"op\" style=\"color: #666666;\">&gt;</span>Kirkland<span class=\"op\" style=\"color: #666666;\">,</span> WA&lt;/b<span class=\"op\" style=\"color: #666666;\">&gt;</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">with</span> an average</a>",
            "<a class=\"sourceLine\" id=\"cb55-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                individual salary <span class=\"op\" style=\"color: #666666;\">&lt;</span>b<span class=\"op\" style=\"color: #666666;\">&gt;</span>$39<span class=\"op\" style=\"color: #666666;\">,</span><span class=\"dv\" style=\"color: #40a070;\">465</span> above local household median&lt;/b<span class=\"op\" style=\"color: #666666;\">&gt;</span>.</a>",
            "<a class=\"sourceLine\" id=\"cb55-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                Median household salary is a good proxy <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">for</span> cost <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">of</span> living <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">in</span> an</a>",
            "<a class=\"sourceLine\" id=\"cb55-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"va\" style=\"color: #19177c;\">area</span>.</a>",
            "<a class=\"sourceLine\" id=\"cb55-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            &lt;/span<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb55-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        &lt;/p<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb55-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>img</a>",
            "<a class=\"sourceLine\" id=\"cb55-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            src<span class=\"op\" style=\"color: #666666;\">={</span>PreloaderImg<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb55-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            style<span class=\"op\" style=\"color: #666666;\">={{</span> <span class=\"dt\">width</span><span class=\"op\">:</span> <span class=\"st\">&quot;100%&quot;</span> <span class=\"op\">}}</span></a>",
            "<a class=\"sourceLine\" id=\"cb55-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            alt<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;Loading preview&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb55-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb55-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>h2 className<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;text-center&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span>Loading <span class=\"va\" style=\"color: #19177c;\">data</span> ...&lt;/h2<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb55-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb55-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>A little cheating with grabbing copy from the future, but that’s okay. In real life you’d use some temporary text, then fill it in later.</p>",
            "<p>The code itself looks like HTML. We have the usual tags - <code style=\"white-space: pre-wrap;\">h1</code>, <code style=\"white-space: pre-wrap;\">p</code>, <code style=\"white-space: pre-wrap;\">b</code>, <code style=\"white-space: pre-wrap;\">img</code>, and <code style=\"white-space: pre-wrap;\">h2</code>. That’s what I like about JSX: it’s familiar. Even if you don’t know React, you can guess what’s going on here.</p>",
            "<p>But look at the <code style=\"white-space: pre-wrap;\">img</code> tag: the <code style=\"white-space: pre-wrap;\">src</code> attribute is dynamic, defined by <code style=\"white-space: pre-wrap;\">PreloaderImg</code>, and the <code style=\"white-space: pre-wrap;\">style</code> attribute takes an object, not a string. That’s because JSX is more than HTML; it’s JavaScript. Think of props as function arguments – any valid JavaScript fits.</p>",
            "<p>That will be a cornerstone of our project.</p>"
          ]
        },
        {
          "lectureTitle": "Step 3: Update App",
          "lectureLines": [
            "<h2 id=\"step-3-update-app\">Step 3: Update App</h2>",
            "<p>We use our new Preloader component in App – <code style=\"white-space: pre-wrap;\">src/App.js</code>. Let’s remove the <code style=\"white-space: pre-wrap;\">create-react-app</code> defaults and import our <code style=\"white-space: pre-wrap;\">Preloader</code> component.</p>",
            "<div class=\"sourceCode\" id=\"cb56\" data-caption=\"Revamp App.js\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb56-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/App.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb56-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb56-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;react&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb56-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Delete the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb56-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> logo <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./logo.svg&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb56-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./App.css&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb56-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb56-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb56-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb56-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> Preloader <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./components/Preloader&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb56-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb56-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb56-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> App <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb56-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Delete the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb56-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb56-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb56-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>div className<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;App&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb56-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>div className<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;App-header&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb56-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          <span class=\"op\" style=\"color: #666666;\">&lt;</span>img src<span class=\"op\" style=\"color: #666666;\">={</span>logo<span class=\"op\" style=\"color: #666666;\">}</span> className<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;App-logo&quot;</span> alt<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;logo&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb56-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          <span class=\"op\" style=\"color: #666666;\">&lt;</span>h2<span class=\"op\" style=\"color: #666666;\">&gt;</span>Welcome to React&lt;/h2<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb56-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb56-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>p className<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;App-intro&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb56-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          To get started<span class=\"op\" style=\"color: #666666;\">,</span> edit <span class=\"op\" style=\"color: #666666;\">&lt;</span>code<span class=\"op\" style=\"color: #666666;\">&gt;</span>src/<span class=\"va\" style=\"color: #19177c;\">App</span>.<span class=\"at\" style=\"color: #7d9029;\">js</span>&lt;/code<span class=\"op\" style=\"color: #666666;\">&gt;</span> and save to <span class=\"va\" style=\"color: #19177c;\">reload</span>.</a>",
            "<a class=\"sourceLine\" id=\"cb56-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        &lt;/p<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb56-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb56-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb56-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb56-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb56-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb56-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb56-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> App<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>We removed the logo and style imports, added an import for <code style=\"white-space: pre-wrap;\">Preloader</code>, and gutted the <code style=\"white-space: pre-wrap;\">App</code> class. It’s great for a default app, but we don’t need that anymore.</p>",
            "<p>Let’s define a default <code style=\"white-space: pre-wrap;\">state</code> and a <code style=\"white-space: pre-wrap;\">render</code> method that uses our <code style=\"white-space: pre-wrap;\">Preloader</code> component when there’s no data.</p>",
            "<div class=\"sourceCode\" id=\"cb57\" data-caption=\"Render our preloader\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb57-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/App.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb57-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb57-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> App <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb57-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb57-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    state <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb57-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">techSalaries</span><span class=\"op\" style=\"color: #666666;\">:</span> []</a>",
            "<a class=\"sourceLine\" id=\"cb57-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb57-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb57-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb57-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> techSalaries <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb57-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb57-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (<span class=\"va\" style=\"color: #19177c;\">techSalaries</span>.<span class=\"at\" style=\"color: #7d9029;\">length</span> <span class=\"op\" style=\"color: #666666;\">&lt;</span> <span class=\"dv\" style=\"color: #40a070;\">1</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb57-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb57-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&lt;</span>Preloader /<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb57-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb57-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb57-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb57-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb57-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>div className<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;App&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb57-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb57-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb57-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb57-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb57-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb57-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>Nowadays we can define properties directly in the class body without a constructor method. It’s not part of the official JavaScript standard yet, but most React codebases use this pattern.</p>",
            "<p>Properties defined this way are bound to each instance of our components so they have the correct <code style=\"white-space: pre-wrap;\">this</code> value. Late you’ll see we can use this shorthand to neatly define event handlers.</p>",
            "<p>We set <code style=\"white-space: pre-wrap;\">techSalaries</code> to an empty array by default. In <code style=\"white-space: pre-wrap;\">render</code> we use object destructuring to take <code style=\"white-space: pre-wrap;\">techSalaries</code> out of component state, <code style=\"white-space: pre-wrap;\">this.state</code>, and check whether it’s empty. When <code style=\"white-space: pre-wrap;\">techSalaries</code> is empty our component renders the preloader, otherwise an empty div.</p>",
            "<p>If your <code style=\"white-space: pre-wrap;\">npm start</code> is running, the preloader should show up on your screen.</p>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/preloader-without-styles-screenshot.png\" alt=\"Preloader without Bootstrap styles\"><figcaption>Preloader without Bootstrap styles</figcaption>",
            "</figure>",
            "<p>Hmm… that’s not very pretty. Let’s fix it.</p>"
          ]
        },
        {
          "lectureTitle": "Step 4: Load styles",
          "lectureLines": [
            "<h2 id=\"step-4-load-bootstrap-styles\">Step 4: Load Bootstrap styles</h2>",
            "<p>We’re going to use Bootstrap styles to avoid reinventing the wheel. We’re ignoring their JavaScript widgets and the amazing integration built by the <a href=\"https://react-bootstrap.github.io/\">react-bootstrap</a> team. Just the stylesheets please.</p>",
            "<p>They’ll make our fonts look better, help with layouting, and make buttons look like buttons. We <em>could</em> use styled components, but writing our own styles detracts from this tutorial.</p>",
            "<p>We load stylesheets in <code style=\"white-space: pre-wrap;\">src/index.js</code>.</p>",
            "<div class=\"sourceCode\" id=\"cb58\" data-caption=\"Add Bootstrap in index.js\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb58-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/index.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb58-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb58-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;react&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb58-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> ReactDOM <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;react-dom&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb58-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> App <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./App&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb58-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb58-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;bootstrap/dist/css/bootstrap.css&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb58-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb58-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb58-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"va\" style=\"color: #19177c;\">ReactDOM</span>.<span class=\"at\" style=\"color: #7d9029;\">render</span>(</a>",
            "<a class=\"sourceLine\" id=\"cb58-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">&lt;</span>App /<span class=\"op\" style=\"color: #666666;\">&gt;,</span></a>",
            "<a class=\"sourceLine\" id=\"cb58-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">document</span>.<span class=\"at\" style=\"color: #7d9029;\">getElementById</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;root&#39;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb58-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>Another benefit of Webpack: <code style=\"white-space: pre-wrap;\">import</code>-ing stylesheets. These imports turn into <code style=\"white-space: pre-wrap;\">&lt;style&gt;</code> tags with CSS in their body at runtime.</p>",
            "<p>This is also a good opportunity to see how <code style=\"white-space: pre-wrap;\">index.js</code> works to render our app 👇</p>",
            "<ol type=\"1\">",
            "<li>loads <code style=\"white-space: pre-wrap;\">App</code> and React</li>",
            "<li>loads styles</li>",
            "<li>Uses <code style=\"white-space: pre-wrap;\">ReactDOM</code> to render <code style=\"white-space: pre-wrap;\">&lt;App /&gt;</code> into the DOM</li>",
            "</ol>",
            "<p>That’s it.</p>",
            "<p>Your preloader screen should look better now.</p>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/preloader-screenshot.png\" alt=\"Preloader screenshot\"><figcaption>Preloader screenshot</figcaption>",
            "</figure>",
            "<p>If you don’t, try comparing your changes to this <a href=\"https://github.com/Swizec/react-d3-walkthrough-livecode/commit/f068b950b7a1a75e9417e126ee53fb7925c27569\">diff on Github</a>.</p>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "Load and parse your data",
      "lectures": [
        {
          "lectureTitle": "Asynchronously load data",
          "lectureLines": [
            "<h1 id=\"asynchronously-load-data\">Asynchronously load data</h1>",
            "<p>Great! We have a preloader. Time to load some data.</p>",
            "<p>We’ll use D3’s built-in data loading methods and tie their promises into React’s component lifecycle. You could talk to a REST API in the same way. Neither D3 nor React care what the datasource is.</p>",
            "<p>First, you need some data.</p>",
            "<p>Our dataset comes from a few sources. Tech salaries are from <a href=\"https://h1bdata.info\">h1bdata.info</a>, median household incomes come from the US census data, and I got US geo map info from Mike Bostock’s github repositories. Some elbow grease and python scripts tied them all together.</p>",
            "<p>You can read about the scraping on my blog <a href=\"https://swizec.com/blog/place-names-county-names-geonames/swizec/7083\">here</a>, <a href=\"https://swizec.com/blog/facts-us-household-income/swizec/7075\">here</a>, and <a href=\"https://swizec.com/blog/livecoding-24-choropleth-react-js/swizec/7078\">here</a>. But it’s not the subject of this book.</p>"
          ]
        },
        {
          "lectureTitle": "Step 0: Get data",
          "lectureLines": [
            "<h2 id=\"step-0-get-the-data\">Step 0: Get the data</h2>",
            "<p>Download the data files from <a href=\"https://github.com/Swizec/react-d3-walkthrough-livecode/tree/fa0aa60f3f7ffeb12926553aaeb916a7fa1c4d4f/public/data\">my walkthrough repository on Github</a>. Put them in your <code style=\"white-space: pre-wrap;\">public/data</code> directory.</p>"
          ]
        },
        {
          "lectureTitle": "Step 1: Prep App.js",
          "lectureLines": [
            "<h2 id=\"step-1-prep-app.js\">Step 1: Prep App.js</h2>",
            "<p>Let’s set up our <code style=\"white-space: pre-wrap;\">App</code> component first. That way you’ll see results as soon data loading starts to work.</p>",
            "<p>Start by importing our data loading method - <code style=\"white-space: pre-wrap;\">loadAllData</code> - and both D3 and Lodash. We’ll need them later.</p>",
            "<div class=\"sourceCode\" id=\"cb59\" data-caption=\"Import D3\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb59-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/App.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb59-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;react&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb59-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb59-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"im\">as</span> d3 <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;d3&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb59-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> _ <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;lodash&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb59-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb59-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb59-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> Preloader <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./components/Preloader&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb59-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb59-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">{</span> loadAllData <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./DataHandling&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb59-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a></code></pre></div>",
            "<p>You already know about default imports. Importing with <code style=\"white-space: pre-wrap;\">{}</code> is how we import named exports. That lets us get multiple things from the same file. You’ll see the export side in Step 2.</p>",
            "<p>Don’t worry about the missing <code style=\"white-space: pre-wrap;\">DataHandling</code> file. It’s coming soon.</p>",
            "<div class=\"sourceCode\" id=\"cb60\" data-caption=\"Initiate data loading in App.js\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb60-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/App.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb60-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> App <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb60-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    state <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb60-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">techSalaries</span><span class=\"op\" style=\"color: #666666;\">:</span> []<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb60-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb60-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">medianIncomes</span><span class=\"op\" style=\"color: #666666;\">:</span> []<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb60-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">countyNames</span><span class=\"op\" style=\"color: #666666;\">:</span> []<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb60-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb60-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb60-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">componentDidMount</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb60-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"at\" style=\"color: #7d9029;\">loadAllData</span>(data <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">setState</span>(data))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb60-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb60-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a></code></pre></div>",
            "<p>We initiate data loading inside the <code style=\"white-space: pre-wrap;\">componentDidMount</code> lifecycle hook. It fires when React first mounts our component into the DOM.</p>",
            "<p>I like to tie data loading to component mounts because it means you aren’t making requests you’ll never use. In a bigger app, you’d use Redux, MobX, or similar to decouple loading from rendering. Many reasons why.</p>",
            "<p>To load our data, we call the <code style=\"white-space: pre-wrap;\">loadAllData</code> function, then use <code style=\"white-space: pre-wrap;\">this.setState</code> in the callback. This updates <code style=\"white-space: pre-wrap;\">App</code>’s state and triggers a re-render, which updates our entire visualization via props.</p>",
            "<p>Yes, it <em>would</em> be better to make <code style=\"white-space: pre-wrap;\">loadAllData</code> return a promise instead of expecting a callback. That was giving me trouble for some reason and it doesn’t matter right now anyway.</p>",
            "<p>We also add two more entries to our <code style=\"white-space: pre-wrap;\">state</code>: <code style=\"white-space: pre-wrap;\">countyNames</code>, and <code style=\"white-space: pre-wrap;\">medianIncomes</code>. Defining what’s in your component state in advance makes your code easier to read. People, including you, know what to expect.</p>",
            "<p>Let’s change the <code style=\"white-space: pre-wrap;\">render</code> method to show a message when our data finishes loading.</p>",
            "<div class=\"sourceCode\" id=\"cb61\" data-caption=\"Show when data loads\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb61-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/App.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb61-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb61-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">     <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> techSalaries <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb61-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb61-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">     <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (<span class=\"va\" style=\"color: #19177c;\">techSalaries</span>.<span class=\"at\" style=\"color: #7d9029;\">length</span> <span class=\"op\" style=\"color: #666666;\">&lt;</span> <span class=\"dv\" style=\"color: #40a070;\">1</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb61-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">         <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb61-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">             <span class=\"op\" style=\"color: #666666;\">&lt;</span>Preloader /<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb61-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">         )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb61-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb61-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb61-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb61-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Delete the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb61-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>div className<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;App&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb61-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb61-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb61-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>div className<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;App container&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb61-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>h1<span class=\"op\" style=\"color: #666666;\">&gt;</span>Loaded <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"va\" style=\"color: #19177c;\">techSalaries</span>.<span class=\"at\" style=\"color: #7d9029;\">length</span><span class=\"op\" style=\"color: #666666;\">}</span> salaries&lt;/h1<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb61-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb61-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb61-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb61-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>We added a <code style=\"white-space: pre-wrap;\">container</code> class to the main <code style=\"white-space: pre-wrap;\">&lt;div&gt;</code> and an <code style=\"white-space: pre-wrap;\">&lt;h1&gt;</code> tag that shows how many datapoints there are. You can use any valid JavaScript in curly braces <code style=\"white-space: pre-wrap;\">{}</code> and JSX will evaluate it. By convention we only use that ability to calculate display values.</p>",
            "<p>You should now get an error overlay.</p>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/datahandling-error.png\" alt=\"DataHandling.js not found error overlay\"><figcaption>DataHandling.js not found error overlay</figcaption>",
            "</figure>",
            "<p>These nice error overlays come with <code style=\"white-space: pre-wrap;\">create-react-app</code> and make your code easier to debug. No hunting around in the terminal to see compilation errors.</p>",
            "<p>Let’s build that file and fill it with our data loading logic.</p>"
          ]
        },
        {
          "lectureTitle": "Step 2: Prep data parsing functions",
          "lectureLines": [
            "<h2 id=\"step-2-prep-data-parsing-functions\">Step 2: Prep data parsing functions</h2>",
            "<p>We’re putting data loading logic in a separate file from <code style=\"white-space: pre-wrap;\">App.js</code> because it’s a bunch of functions that work together and don’t have much to do with the <code style=\"white-space: pre-wrap;\">App</code> component itself.</p>",
            "<p>We start with two imports and four data parsing functions:</p>",
            "<ul>",
            "<li><code style=\"white-space: pre-wrap;\">cleanIncome</code>, which parses each row of household income data</li>",
            "<li><code style=\"white-space: pre-wrap;\">dateParse</code>, which we use for parsing dates</li>",
            "<li><code style=\"white-space: pre-wrap;\">cleanSalary</code>, which parses each row of salary data</li>",
            "<li><code style=\"white-space: pre-wrap;\">cleanUSStateName</code>, which parses US state names</li>",
            "</ul>",
            "<div class=\"sourceCode\" id=\"cb62\" data-caption=\"Data parsing functions\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb62-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/DataHandling.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"im\">as</span> d3 <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;d3&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> _ <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;lodash&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb62-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> cleanIncome <span class=\"op\" style=\"color: #666666;\">=</span> (d) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> (<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">countyName</span><span class=\"op\" style=\"color: #666666;\">:</span> d[<span class=\"st\" style=\"color: #4070a0;\">&#39;Name&#39;</span>]<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">USstate</span><span class=\"op\" style=\"color: #666666;\">:</span> d[<span class=\"st\" style=\"color: #4070a0;\">&#39;State&#39;</span>]<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">medianIncome</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"at\" style=\"color: #7d9029;\">Number</span>(d[<span class=\"st\" style=\"color: #4070a0;\">&#39;Median Household Income&#39;</span>])<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">lowerBound</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"at\" style=\"color: #7d9029;\">Number</span>(d[<span class=\"st\" style=\"color: #4070a0;\">&#39;90% CI Lower Bound&#39;</span>])<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">upperBound</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"at\" style=\"color: #7d9029;\">Number</span>(d[<span class=\"st\" style=\"color: #4070a0;\">&#39;90% CI Upper Bound&#39;</span>])</a>",
            "<a class=\"sourceLine\" id=\"cb62-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb62-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> dateParse <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">timeParse</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;%m/%d/%Y&quot;</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb62-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> cleanSalary <span class=\"op\" style=\"color: #666666;\">=</span> (d) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (<span class=\"op\" style=\"color: #666666;\">!</span>d[<span class=\"st\" style=\"color: #4070a0;\">&#39;base salary&#39;</span>] <span class=\"op\" style=\"color: #666666;\">||</span> <span class=\"at\" style=\"color: #7d9029;\">Number</span>(d[<span class=\"st\" style=\"color: #4070a0;\">&#39;base salary&#39;</span>]) <span class=\"op\" style=\"color: #666666;\">&gt;</span> <span class=\"dv\" style=\"color: #40a070;\">300000</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">null</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb62-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"dt\" style=\"color: #902000;\">employer</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">employer</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">submit_date</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"at\" style=\"color: #7d9029;\">dateParse</span>(d[<span class=\"st\" style=\"color: #4070a0;\">&#39;submit date&#39;</span>])<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">start_date</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"at\" style=\"color: #7d9029;\">dateParse</span>(d[<span class=\"st\" style=\"color: #4070a0;\">&#39;start date&#39;</span>])<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">case_status</span><span class=\"op\" style=\"color: #666666;\">:</span> d[<span class=\"st\" style=\"color: #4070a0;\">&#39;case status&#39;</span>]<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">job_title</span><span class=\"op\" style=\"color: #666666;\">:</span> d[<span class=\"st\" style=\"color: #4070a0;\">&#39;job title&#39;</span>]<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">clean_job_title</span><span class=\"op\" style=\"color: #666666;\">:</span> d[<span class=\"st\" style=\"color: #4070a0;\">&#39;job title&#39;</span>]<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">base_salary</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"at\" style=\"color: #7d9029;\">Number</span>(d[<span class=\"st\" style=\"color: #4070a0;\">&#39;base salary&#39;</span>])<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">city</span><span class=\"op\" style=\"color: #666666;\">:</span> d[<span class=\"st\" style=\"color: #4070a0;\">&#39;city&#39;</span>]<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">USstate</span><span class=\"op\" style=\"color: #666666;\">:</span> d[<span class=\"st\" style=\"color: #4070a0;\">&#39;state&#39;</span>]<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">county</span><span class=\"op\" style=\"color: #666666;\">:</span> d[<span class=\"st\" style=\"color: #4070a0;\">&#39;county&#39;</span>]<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">countyID</span><span class=\"op\" style=\"color: #666666;\">:</span> d[<span class=\"st\" style=\"color: #4070a0;\">&#39;countyID&#39;</span>]</a>",
            "<a class=\"sourceLine\" id=\"cb62-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb62-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> cleanUSStateName <span class=\"op\" style=\"color: #666666;\">=</span> (d) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> (<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">code</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">code</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-36\" title=\"36\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">id</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"at\" style=\"color: #7d9029;\">Number</span>(<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">id</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-37\" title=\"37\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">name</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">name</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-38\" title=\"38\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-39\" title=\"39\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb62-40\" title=\"40\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> cleanCounty <span class=\"op\" style=\"color: #666666;\">=</span> d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> (<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-41\" title=\"41\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">id</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"at\" style=\"color: #7d9029;\">Number</span>(<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">id</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb62-42\" title=\"42\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">name</span><span class=\"op\" style=\"color: #666666;\">:</span> name</a>",
            "<a class=\"sourceLine\" id=\"cb62-43\" title=\"43\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>You’ll see those <code style=\"white-space: pre-wrap;\">d3</code> and <code style=\"white-space: pre-wrap;\">lodash</code> imports a lot.</p>",
            "<p>Our data parsing functions all follow the same approach: Take a row of data as <code style=\"white-space: pre-wrap;\">d</code>, return a dictionary with nicer key names, cast any numbers or dates into appropriate formats. They all start as strings.</p>",
            "<p>Doing all this parsing now, keeps the rest of our codebase clean. Handling data is always messy. You want to contain that mess as much as possible.</p>"
          ]
        },
        {
          "lectureTitle": "Step 3: Load the datasets",
          "lectureLines": [
            "<h2 id=\"step-3-load-the-datasets\">Step 3: Load the datasets</h2>",
            "<p>Now we can use D3 to load our data with fetch requests.</p>",
            "<div class=\"sourceCode\" id=\"cb63\" data-caption=\"Data loading\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb63-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/DataHandling.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb63-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> loadAllData <span class=\"op\" style=\"color: #666666;\">=</span> (callback <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">_</span>.<span class=\"at\" style=\"color: #7d9029;\">noop</span>) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb63-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">Promise</span>.<span class=\"at\" style=\"color: #7d9029;\">all</span>([</a>",
            "<a class=\"sourceLine\" id=\"cb63-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">json</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;data/us.json&quot;</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb63-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">csv</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;data/us-county-names-normalized.csv&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> cleanCounty)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb63-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">csv</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;data/county-median-incomes.csv&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> cleanIncome)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb63-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">csv</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;data/h1bs-2012-2016-shortened.csv&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> cleanSalary)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb63-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">tsv</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;data/us-state-names.tsv&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> cleanUSStateName)</a>",
            "<a class=\"sourceLine\" id=\"cb63-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    ]).<span class=\"at\" style=\"color: #7d9029;\">then</span>(([us<span class=\"op\" style=\"color: #666666;\">,</span> countyNames<span class=\"op\" style=\"color: #666666;\">,</span> medianIncomes<span class=\"op\" style=\"color: #666666;\">,</span> techSalaries<span class=\"op\" style=\"color: #666666;\">,</span> USstateNames]) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb63-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb63-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb63-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">};</span></a></code></pre></div>",
            "<p>Here you can see another ES6 trick: default argument values. If <code style=\"white-space: pre-wrap;\">callback</code> is undefined, we set it to <code style=\"white-space: pre-wrap;\">_.noop</code> - a function that does nothing. This lets us later call <code style=\"white-space: pre-wrap;\">callback()</code> without worrying whether it’s defined.</p>",
            "<p>In version 5, D3 updated its data loading methods to use promises instead of callbacks. You can load a single file using <code style=\"white-space: pre-wrap;\">d3.csv(\"filename\").then(data =&gt; ....</code>. The promise resolves with your data, or throws an error.</p>",
            "<p>If you’re on D3v4 and can’t upgrade, you’ll have to import from <code style=\"white-space: pre-wrap;\">d3-fetch</code>.</p>",
            "<p>Each <code style=\"white-space: pre-wrap;\">d3.csv</code> call makes a fetch request, parses the fetched CSV file into an array of JavaScript dictionaries, and passes each row through the provided cleanup function. We pass all median incomes through <code style=\"white-space: pre-wrap;\">cleanIncome</code>, salaries through <code style=\"white-space: pre-wrap;\">cleanSalary</code>, etc.</p>",
            "<p>To load multiple files, we use <code style=\"white-space: pre-wrap;\">Promise.all</code> with a list of unresolved promises. Once resolved, our <code style=\"white-space: pre-wrap;\">.then</code> handler gets a list of results. We use array destructuring to expand that list into our respective datasets before running some more logic to tie them together.</p>",
            "<p>D3 supports formats like <code style=\"white-space: pre-wrap;\">json</code>, <code style=\"white-space: pre-wrap;\">csv</code>, <code style=\"white-space: pre-wrap;\">tsv</code>, <code style=\"white-space: pre-wrap;\">text</code>, and <code style=\"white-space: pre-wrap;\">xml</code> out of the box. You can make it work with custom data sources through the underlying <code style=\"white-space: pre-wrap;\">request</code> API.</p>",
            "<p>PS: we’re using the shortened salary dataset to make page reloads faster while building our project.</p>"
          ]
        },
        {
          "lectureTitle": "Step 4: Tie datasets together",
          "lectureLines": [
            "<h2 id=\"tie-datasets-together\">Step 4: Tie the datasets together</h2>",
            "<p>If you add a <code style=\"white-space: pre-wrap;\">console.log</code> to the <code style=\"white-space: pre-wrap;\">.then</code> callback above, you’ll see a bunch of data. Each argument - <code style=\"white-space: pre-wrap;\">us</code>, <code style=\"white-space: pre-wrap;\">countyNames</code>, <code style=\"white-space: pre-wrap;\">medianIncomes</code>, <code style=\"white-space: pre-wrap;\">techSalaries</code>, <code style=\"white-space: pre-wrap;\">USstateNames</code> - holds a parsed dataset from the corresponding file.</p>",
            "<p>To tie them together and prepare a dictionary for <code style=\"white-space: pre-wrap;\">setState</code> back in the <code style=\"white-space: pre-wrap;\">App</code> component, we need to add some logic. We’re building a dictionary of county household incomes and removing any empty salaries.</p>",
            "<div class=\"sourceCode\" id=\"cb64\" data-caption=\"Tie our datasets together\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb64-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/DataHandling.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb64-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">]).<span class=\"at\" style=\"color: #7d9029;\">then</span>(([us<span class=\"op\" style=\"color: #666666;\">,</span> countyNames<span class=\"op\" style=\"color: #666666;\">,</span> medianIncomes<span class=\"op\" style=\"color: #666666;\">,</span> techSalaries<span class=\"op\" style=\"color: #666666;\">,</span> USstateNames]) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb64-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> medianIncomesMap <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{};</span></a>",
            "<a class=\"sourceLine\" id=\"cb64-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb64-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">medianIncomes</span>.<span class=\"at\" style=\"color: #7d9029;\">filter</span>(d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">_</span>.<span class=\"at\" style=\"color: #7d9029;\">find</span>(countyNames<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb64-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                                     <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"dt\" style=\"color: #902000;\">name</span><span class=\"op\" style=\"color: #666666;\">:</span> d[<span class=\"st\" style=\"color: #4070a0;\">&#39;countyName&#39;</span>]<span class=\"op\" style=\"color: #666666;\">}</span>))</a>",
            "<a class=\"sourceLine\" id=\"cb64-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                 .<span class=\"at\" style=\"color: #7d9029;\">forEach</span>((d) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb64-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                     d[<span class=\"st\" style=\"color: #4070a0;\">&#39;countyID&#39;</span>] <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">_</span>.<span class=\"at\" style=\"color: #7d9029;\">find</span>(countyNames<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb64-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                                            <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"dt\" style=\"color: #902000;\">name</span><span class=\"op\" style=\"color: #666666;\">:</span> d[<span class=\"st\" style=\"color: #4070a0;\">&#39;countyName&#39;</span>]<span class=\"op\" style=\"color: #666666;\">}</span>).<span class=\"at\" style=\"color: #7d9029;\">id</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb64-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                     medianIncomesMap[<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">countyID</span>] <span class=\"op\" style=\"color: #666666;\">=</span> d<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb64-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                 <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb64-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb64-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    techSalaries <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">techSalaries</span>.<span class=\"at\" style=\"color: #7d9029;\">filter</span>(d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">!</span><span class=\"va\" style=\"color: #19177c;\">_</span>.<span class=\"at\" style=\"color: #7d9029;\">isNull</span>(d))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb64-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb64-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">callback</span>(<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb64-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">usTopoJson</span><span class=\"op\" style=\"color: #666666;\">:</span> us<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb64-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">countyNames</span><span class=\"op\" style=\"color: #666666;\">:</span> countyNames<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb64-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">medianIncomes</span><span class=\"op\" style=\"color: #666666;\">:</span> medianIncomesMap<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb64-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">medianIncomesByCounty</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">_</span>.<span class=\"at\" style=\"color: #7d9029;\">groupBy</span>(medianIncomes<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;countyName&#39;</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb64-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">medianIncomesByUSState</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">_</span>.<span class=\"at\" style=\"color: #7d9029;\">groupBy</span>(medianIncomes<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;USstate&#39;</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb64-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">techSalaries</span><span class=\"op\" style=\"color: #666666;\">:</span> techSalaries<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb64-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">USstateNames</span><span class=\"op\" style=\"color: #666666;\">:</span> USstateNames</a>",
            "<a class=\"sourceLine\" id=\"cb64-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb64-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>Building the income map looks weird because of indentation, but it’s not that bad. We <code style=\"white-space: pre-wrap;\">filter</code> the <code style=\"white-space: pre-wrap;\">medianIncomes</code> array to discard any incomes whose <code style=\"white-space: pre-wrap;\">countyName</code> we can’t find. I made sure they were all unique when I built the datasets.</p>",
            "<p>We walk through the filtered array with a <code style=\"white-space: pre-wrap;\">forEach</code>, find the correct <code style=\"white-space: pre-wrap;\">countyID</code>, and add each entry to <code style=\"white-space: pre-wrap;\">medianIncomesMap</code>. When we’re done, we have a large dictionary that maps county ids to their household income data.</p>",
            "<p>Then we filter <code style=\"white-space: pre-wrap;\">techSalaries</code> to remove any empty values where the <code style=\"white-space: pre-wrap;\">cleanSalaries</code> function returned <code style=\"white-space: pre-wrap;\">null</code>. That happens when a salary is either undefined or absurdly high.</p>",
            "<p>When our data is ready, we call our <code style=\"white-space: pre-wrap;\">callback</code> with a dictionary of the new datasets. To make future access quicker, we use <code style=\"white-space: pre-wrap;\">_.groupBy</code> to build dictionary maps of counties by county name and by US state.</p>",
            "<p>You should now see how many salary entries the shortened dataset contains.</p>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/data-loaded-screenshot.png\" alt=\"Data loaded screenshot\"><figcaption>Data loaded screenshot</figcaption>",
            "</figure>",
            "<p>If that didn’t work, try comparing your changes to this <a href=\"https://github.com/Swizec/react-d3-walkthrough-livecode/commit/a170bc8e4001da95306063f55884d7575b9b7b60\">diff on Github</a>.</p>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "Render a choropleth map of the US",
      "lectures": [
        {
          "lectureTitle": "Render a choropleth map of the US",
          "lectureLines": [
            "<h1 id=\"choropleth-map\">Render a choropleth map of the US</h1>",
            "<p>With our data in hand, it’s time to draw some pictures. A choropleth map will show us the best places to be in tech.</p>",
            "<p>We’re showing the delta between median household salary in a statistical county and the average salary of an individual tech worker on a visa. The darker the blue, the higher the difference.</p>",
            "<p>The more a single salary can out-earn an entire household, the better off you are.</p>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/choropleth-map-shortened-dataset.png\" alt=\"Choropleth map with shortened dataset\"><figcaption>Choropleth map with shortened dataset</figcaption>",
            "</figure>",
            "<p>There’s a lot of gray on this map because the shortened dataset doesn’t have that many counties. Full dataset is going to look better, I promise.</p>",
            "<p>Turns out immigration visa opportunities for techies aren’t evenly distributed throughout the country. Who knew?</p>",
            "<p>Just like before, we’re going to start with changes in our <code style=\"white-space: pre-wrap;\">App</code> component, then build the new bit. This time, a <code style=\"white-space: pre-wrap;\">CountyMap</code> component spread over three files:</p>",
            "<ul>",
            "<li><code style=\"white-space: pre-wrap;\">CountyMap/index.js</code>, to make imports easier</li>",
            "<li><code style=\"white-space: pre-wrap;\">CountyMap/CountyMap.js</code>, for overall map logic</li>",
            "<li><code style=\"white-space: pre-wrap;\">CountyMap/County.js</code>, for individual county polygons</li>",
            "</ul>"
          ]
        },
        {
          "lectureTitle": "Step 1: Prep App.js",
          "lectureLines": [
            "<h2 id=\"step-1-prep-app.js-1\">Step 1: Prep App.js</h2>",
            "<p>You might guess the pattern already: add an import, add a helper method or two, update <code style=\"white-space: pre-wrap;\">render</code>.</p>",
            "<div class=\"sourceCode\" id=\"cb65\" data-caption=\"Import CountyMap component\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb65-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/App.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb65-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> Preloader <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./components/Preloader&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb65-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">{</span> loadAllData <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./DataHandling&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb65-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb65-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb65-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> CountyMap <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./components/CountyMap&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb65-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a></code></pre></div>",
            "<p>That imports the <code style=\"white-space: pre-wrap;\">CountyMap</code> component from <code style=\"white-space: pre-wrap;\">components/CountyMap/</code>. Your browser will show an error overlay about some file or another until we’re done.</p>",
            "<p>In the <code style=\"white-space: pre-wrap;\">App</code> class itself, we add a <code style=\"white-space: pre-wrap;\">countyValue</code> method. It takes a county entry and a map of tech salaries, and it returns the delta between median household income and a single tech salary.</p>",
            "<div class=\"sourceCode\" id=\"cb66\" data-caption=\"App.countyValue method\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb66-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/App.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb66-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">countyValue</span>(county<span class=\"op\" style=\"color: #666666;\">,</span> techSalariesMap) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb66-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> medianHousehold <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">medianIncomes</span>[<span class=\"va\" style=\"color: #19177c;\">county</span>.<span class=\"at\" style=\"color: #7d9029;\">id</span>]<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb66-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">              salaries <span class=\"op\" style=\"color: #666666;\">=</span> techSalariesMap[<span class=\"va\" style=\"color: #19177c;\">county</span>.<span class=\"at\" style=\"color: #7d9029;\">name</span>]<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb66-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb66-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (<span class=\"op\" style=\"color: #666666;\">!</span>medianHousehold <span class=\"op\" style=\"color: #666666;\">||</span> <span class=\"op\" style=\"color: #666666;\">!</span>salaries) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb66-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">null</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb66-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb66-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb66-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> median <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">median</span>(salaries<span class=\"op\" style=\"color: #666666;\">,</span> d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">base_salary</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb66-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb66-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb66-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">countyID</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">county</span>.<span class=\"at\" style=\"color: #7d9029;\">id</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb66-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">value</span><span class=\"op\" style=\"color: #666666;\">:</span> median <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"va\" style=\"color: #19177c;\">medianHousehold</span>.<span class=\"at\" style=\"color: #7d9029;\">medianIncome</span></a>",
            "<a class=\"sourceLine\" id=\"cb66-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb66-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>We use <code style=\"white-space: pre-wrap;\">this.state.medianIncomes</code> to get the median household salary and the <code style=\"white-space: pre-wrap;\">techSalariesMap</code> input to get salaries for a specific census area. Then we use <code style=\"white-space: pre-wrap;\">d3.median</code> to calculate the median value for salaries and return a two-element dictionary with the result.</p>",
            "<p><code style=\"white-space: pre-wrap;\">countyID</code> specifies the county and <code style=\"white-space: pre-wrap;\">value</code> is the delta that our choropleth displays.</p>",
            "<p>In the <code style=\"white-space: pre-wrap;\">render</code> method, we’ll:</p>",
            "<ul>",
            "<li>prep a list of county values</li>",
            "<li>remove the “data loaded” indicator</li>",
            "<li>render the map</li>",
            "</ul>",
            "<div class=\"sourceCode\" id=\"cb67\" data-caption=\"Render the CountyMap component\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb67-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/App.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> countyNames<span class=\"op\" style=\"color: #666666;\">,</span> usTopoJson<span class=\"op\" style=\"color: #666666;\">,</span> techSalaries<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb67-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (<span class=\"va\" style=\"color: #19177c;\">techSalaries</span>.<span class=\"at\" style=\"color: #7d9029;\">length</span> <span class=\"op\" style=\"color: #666666;\">&lt;</span> <span class=\"dv\" style=\"color: #40a070;\">1</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb67-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>Preloader /<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb67-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> filteredSalaries <span class=\"op\" style=\"color: #666666;\">=</span> techSalaries<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          filteredSalariesMap <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">_</span>.<span class=\"at\" style=\"color: #7d9029;\">groupBy</span>(filteredSalaries<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;countyID&#39;</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          countyValues <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">countyNames</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(</a>",
            "<a class=\"sourceLine\" id=\"cb67-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">              county <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">countyValue</span>(county<span class=\"op\" style=\"color: #666666;\">,</span> filteredSalariesMap)</a>",
            "<a class=\"sourceLine\" id=\"cb67-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          ).<span class=\"at\" style=\"color: #7d9029;\">filter</span>(d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">!</span><span class=\"va\" style=\"color: #19177c;\">_</span>.<span class=\"at\" style=\"color: #7d9029;\">isNull</span>(d))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb67-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> zoom <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">null</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb67-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb67-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>div className<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;App container&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Delete the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>h1<span class=\"op\" style=\"color: #666666;\">&gt;</span>Loaded <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"va\" style=\"color: #19177c;\">techSalaries</span>.<span class=\"at\" style=\"color: #7d9029;\">length</span><span class=\"op\" style=\"color: #666666;\">}</span> salaries&lt;/h1<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>svg width<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;1100&quot;</span> height<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;500&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>CountyMap usTopoJson<span class=\"op\" style=\"color: #666666;\">={</span>usTopoJson<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                       USstateNames<span class=\"op\" style=\"color: #666666;\">={</span>USstateNames<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                       values<span class=\"op\" style=\"color: #666666;\">={</span>countyValues<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                       x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                       y<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                       width<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">500</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-36\" title=\"36\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                       height<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">500</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-37\" title=\"37\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                       zoom<span class=\"op\" style=\"color: #666666;\">={</span>zoom<span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb67-38\" title=\"38\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        &lt;/svg<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-39\" title=\"39\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-40\" title=\"40\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-41\" title=\"41\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb67-42\" title=\"42\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>We call our dataset <code style=\"white-space: pre-wrap;\">filteredTechSalaries</code> because we’re going to add filtering in the <a href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6888938#user-controls\">subchapter about adding user controls</a>. Using the proper name now means less code to change later. The magic of foresight 😄</p>",
            "<p>We use <code style=\"white-space: pre-wrap;\">_.groupBy</code> to build a dictionary mapping each <code style=\"white-space: pre-wrap;\">countyID</code> to an array of salaries, and we use our <code style=\"white-space: pre-wrap;\">countyValue</code> method to build an array of counties for our map.</p>",
            "<p>We set <code style=\"white-space: pre-wrap;\">zoom</code> to <code style=\"white-space: pre-wrap;\">null</code> for now. We’ll use this later.</p>",
            "<p>In the <code style=\"white-space: pre-wrap;\">return</code> statement, we remove our “data loaded” indicator, and add an <code style=\"white-space: pre-wrap;\">&lt;svg&gt;</code> element that’s <code style=\"white-space: pre-wrap;\">1100</code> pixels wide and <code style=\"white-space: pre-wrap;\">500</code> pixels high. Inside, we place the <code style=\"white-space: pre-wrap;\">CountyMap</code> component with a bunch of properties. Some dataset stuff, some sizing and positioning stuff.</p>"
          ]
        },
        {
          "lectureTitle": "Step 2: CountyMap index.js",
          "lectureLines": [
            "<h2 id=\"step-2-countymapindex.js\">Step 2: CountyMap/index.js</h2>",
            "<p>We make <code style=\"white-space: pre-wrap;\">index.js</code> for just reason: to make imports and debugging easier. I learned this lesson the hard way so you don’t have to.</p>",
            "<div class=\"sourceCode\" id=\"cb68\" data-caption=\"CountyMap index.js\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb68-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/CountyMap/index.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb68-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb68-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"im\">default</span> <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./CountyMap&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>Re-export the default import from <code style=\"white-space: pre-wrap;\">./CountyMap.js</code>. That’s it.</p>",
            "<p>This allows us to import <code style=\"white-space: pre-wrap;\">CountyMap</code> from the directory without knowing about internal file structure. We <em>could</em> put all the code in this <code style=\"white-space: pre-wrap;\">index.js</code> file, but that makes debugging harder. You’ll have plenty of index.js files in your project.</p>",
            "<p>Having a lot of code in <code style=\"white-space: pre-wrap;\">&lt;directory&gt;/index.js</code> is a common pattern in new projects. But when you’re looking at a stack trace, source files in the browser, or filenames in your editor, you’ll wish every component lived in a file of the same name.</p>"
          ]
        },
        {
          "lectureTitle": "Step 3: CountyMap CountyMap.js",
          "lectureLines": [
            "<h2 id=\"step-3-countymapcountymap.js\">Step 3: CountyMap/CountyMap.js</h2>",
            "<p>Here comes the fun part - declaratively drawing a map. You’ll see why I love using React for dataviz.</p>",
            "<p>We’re using the <a href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6887740#full-feature-integration\">full-feature integration</a> approach and a lot of D3 maps magic. Drawing a map with D3 I’m always surprised how little code it takes.</p>",
            "<p>Start with the imports: React, D3, lodash, topojson, County component.</p>",
            "<div class=\"sourceCode\" id=\"cb69\" data-caption=\"Import CountyMap dependencies\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb69-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/CountyMap/CountyMap.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb69-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"op\" style=\"color: #666666;\">{</span> Component <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;react&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb69-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"im\">as</span> d3 <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;d3&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb69-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"im\">as</span> topojson <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;topojson&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb69-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> _ <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;lodash&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb69-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb69-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> County <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./County&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>Out of these, we haven’t built <code style=\"white-space: pre-wrap;\">County</code> yet, and you haven’t seen <code style=\"white-space: pre-wrap;\">topojson</code> before.</p>",
            "<p>TopoJSON is a geographical data format based on JSON. We’re using the <code style=\"white-space: pre-wrap;\">topojson</code> library to translate our geographical datasets into GeoJSON, which is another way of defining geo data with JSON.</p>",
            "<p>I don’t know why there are two, but TopoJSON produces smaller files, and GeoJSON can be fed directly into D3’s geo functions. ¯\\<em>(ツ)</em>/¯</p>",
            "<p>Maybe it’s a case of <a href=\"https://xkcd.com/927/\">competing standards</a>.</p>",
            "<h3 id=\"constructor\">Constructor</h3>",
            "<p>We stub out the <code style=\"white-space: pre-wrap;\">CountyMap</code> component then fill it in with logic.</p>",
            "<div class=\"sourceCode\" id=\"cb70\" data-caption=\"CountyMap stub\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb70-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/CountyMap/CountyMap.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb70-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> CountyMap <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> Component <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb70-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">constructor</span>(props) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb70-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">super</span>(props)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb70-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb70-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb70-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb70-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb70-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb70-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">static</span> <span class=\"at\" style=\"color: #7d9029;\">getDerivedStateFromProps</span>(props<span class=\"op\" style=\"color: #666666;\">,</span> state) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb70-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb70-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb70-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb70-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb70-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> usTopoJson <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb70-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb70-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (<span class=\"op\" style=\"color: #666666;\">!</span>usTopoJson) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb70-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">null</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb70-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span><span class=\"cf\" style=\"color: #007020; font-weight: bold;\">else</span><span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb70-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb70-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb70-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb70-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb70-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb70-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb70-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb70-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> CountyMap<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>We’ll set up default D3 state in <code style=\"white-space: pre-wrap;\">constructor</code> and keep it up to date with <code style=\"white-space: pre-wrap;\">getDerivedStateFromProps</code>.</p>",
            "<p>We need three D3 objects to build a choropleth map: a geographical projection, a path generator, and a quantize scale for colors.</p>",
            "<div class=\"sourceCode\" id=\"cb71\" data-caption=\"D3 objects for a map\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb71-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/CountyMap/CountyMap.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb71-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> CountyMap <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb71-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">constructor</span>(props) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb71-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">super</span>(props)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb71-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb71-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> projection <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">geoAlbersUsa</span>().<span class=\"at\" style=\"color: #7d9029;\">scale</span>(<span class=\"dv\" style=\"color: #40a070;\">1280</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb71-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb71-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb71-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">geoPath</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">geoPath</span>().<span class=\"at\" style=\"color: #7d9029;\">projection</span>(projection)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb71-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">quantize</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">scaleQuantize</span>().<span class=\"at\" style=\"color: #7d9029;\">range</span>(<span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">range</span>(<span class=\"dv\" style=\"color: #40a070;\">9</span>))<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb71-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            projection</a>",
            "<a class=\"sourceLine\" id=\"cb71-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb71-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>You might remember geographical projections from high school. They map a sphere to a flat surface. We use <code style=\"white-space: pre-wrap;\">geoAlbersUsa</code> because it’s made specifically for maps of the USA.</p>",
            "<p>D3 offers many other projections. You can see them on <a href=\"https://github.com/d3/d3-geo#projections\">d3-geo’s Github page</a>.</p>",
            "<p>A <code style=\"white-space: pre-wrap;\">geoPath</code> generator takes a projection and returns a function that generates the <code style=\"white-space: pre-wrap;\">d</code> attribute of <code style=\"white-space: pre-wrap;\">&lt;path&gt;</code> elements. This is the most general way to specify SVG shapes. I won’t go into explaining the <code style=\"white-space: pre-wrap;\">d</code> here, but it’s <a href=\"https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d\">an entire language</a> for describing shapes.</p>",
            "<p><code style=\"white-space: pre-wrap;\">quantize</code> is a D3 scale. We’ve talked about the basics of scales in the <a href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6887732#blackbox-axis\">D3 Axis example</a>. This one splits a domain into 9 quantiles and assigns them specific values from the <code style=\"white-space: pre-wrap;\">range</code>.</p>",
            "<p>Let’s say our domain goes from 0 to 90. Calling the scale with any number between 0 and 9 would return 1. 10 to 19 returns 2 and so on. We’ll use it to pick colors from an array.</p>",
            "<h3 id=\"getderivedstatefromprops\">getDerivedStateFromProps</h3>",
            "<p>Keeping our geo path and quantize scale up to date is simple, but we’ll make it harder by adding a zoom feature. It won’t work until we build the filtering, but hey, we’ll already have it by then! 😄</p>",
            "<div class=\"sourceCode\" id=\"cb72\" data-caption=\"CountyMap getDerivedStateFromProps\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb72-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/CountyMap/CountyMap.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb72-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">static</span> <span class=\"at\" style=\"color: #7d9029;\">getDerivedStateFromProps</span>(props<span class=\"op\" style=\"color: #666666;\">,</span> state) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb72-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> <span class=\"op\" style=\"color: #666666;\">{</span> projection<span class=\"op\" style=\"color: #666666;\">,</span> quantize<span class=\"op\" style=\"color: #666666;\">,</span> geoPath <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> state<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb72-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb72-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        projection</a>",
            "<a class=\"sourceLine\" id=\"cb72-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            .<span class=\"at\" style=\"color: #7d9029;\">translate</span>([<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">width</span> / <span class=\"dv\" style=\"color: #40a070;\">2</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">height</span> / <span class=\"dv\" style=\"color: #40a070;\">2</span>])</a>",
            "<a class=\"sourceLine\" id=\"cb72-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            .<span class=\"at\" style=\"color: #7d9029;\">scale</span>(<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">width</span> <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"fl\" style=\"color: #40a070;\">1.3</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb72-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb72-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">zoom</span> <span class=\"op\" style=\"color: #666666;\">&amp;&amp;</span> <span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">usTopoJson</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb72-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> us <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">usTopoJson</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb72-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                USstatePaths <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">topojson</span>.<span class=\"at\" style=\"color: #7d9029;\">feature</span>(us<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">us</span>.<span class=\"va\" style=\"color: #19177c;\">objects</span>.<span class=\"at\" style=\"color: #7d9029;\">states</span>).<span class=\"at\" style=\"color: #7d9029;\">features</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb72-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                id <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">_</span>.<span class=\"at\" style=\"color: #7d9029;\">find</span>(<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">USstateNames</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">code</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">zoom</span> <span class=\"op\" style=\"color: #666666;\">}</span>).<span class=\"at\" style=\"color: #7d9029;\">id</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb72-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb72-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"va\" style=\"color: #19177c;\">projection</span>.<span class=\"at\" style=\"color: #7d9029;\">scale</span>(<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">width</span> <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"fl\" style=\"color: #40a070;\">4.5</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb72-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb72-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> centroid <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">geoPath</span>.<span class=\"at\" style=\"color: #7d9029;\">centroid</span>(<span class=\"va\" style=\"color: #19177c;\">_</span>.<span class=\"at\" style=\"color: #7d9029;\">find</span>(USstatePaths<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">id</span><span class=\"op\" style=\"color: #666666;\">:</span> id <span class=\"op\" style=\"color: #666666;\">}</span>))<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb72-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                translate <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">projection</span>.<span class=\"at\" style=\"color: #7d9029;\">translate</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb72-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb72-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"va\" style=\"color: #19177c;\">projection</span>.<span class=\"at\" style=\"color: #7d9029;\">translate</span>([</a>",
            "<a class=\"sourceLine\" id=\"cb72-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                translate[<span class=\"dv\" style=\"color: #40a070;\">0</span>] <span class=\"op\" style=\"color: #666666;\">-</span> centroid[<span class=\"dv\" style=\"color: #40a070;\">0</span>] <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">width</span> / <span class=\"dv\" style=\"color: #40a070;\">2</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb72-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                translate[<span class=\"dv\" style=\"color: #40a070;\">1</span>] <span class=\"op\" style=\"color: #666666;\">-</span> centroid[<span class=\"dv\" style=\"color: #40a070;\">1</span>] <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">height</span> / <span class=\"dv\" style=\"color: #40a070;\">2</span></a>",
            "<a class=\"sourceLine\" id=\"cb72-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            ])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb72-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb72-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb72-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">values</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb72-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"va\" style=\"color: #19177c;\">quantize</span>.<span class=\"at\" style=\"color: #7d9029;\">domain</span>([</a>",
            "<a class=\"sourceLine\" id=\"cb72-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">quantile</span>(<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">values</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"fl\" style=\"color: #40a070;\">0.15</span><span class=\"op\" style=\"color: #666666;\">,</span> d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">value</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb72-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">quantile</span>(<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">values</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"fl\" style=\"color: #40a070;\">0.85</span><span class=\"op\" style=\"color: #666666;\">,</span> d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">value</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb72-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            ])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb72-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb72-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb72-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb72-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            ...<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb72-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            projection<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb72-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            quantize</a>",
            "<a class=\"sourceLine\" id=\"cb72-36\" title=\"36\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb72-37\" title=\"37\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>There’s a lot going on here.</p>",
            "<p>We destructure <code style=\"white-space: pre-wrap;\">projection</code>, <code style=\"white-space: pre-wrap;\">quantize</code>, and <code style=\"white-space: pre-wrap;\">geoPath</code> out of component state. These are the D3 object we’re about to update.</p>",
            "<p>First up is the projection. We translate (move) it to the center of our drawing area and set the scale property. You have to play around with this value until you get a nice result because it’s different for every projection.</p>",
            "<p>Then we do some weird stuff if <code style=\"white-space: pre-wrap;\">zoom</code> is defined.</p>",
            "<p>We get the list of all US state features in our geo data, find the one we’re <code style=\"white-space: pre-wrap;\">zoom</code>-ing on, and use the <code style=\"white-space: pre-wrap;\">geoPath.centroid</code> method to calculate its center point. This gives us a new coordinate to <code style=\"white-space: pre-wrap;\">translate</code> our projection onto.</p>",
            "<p>The calculation in <code style=\"white-space: pre-wrap;\">.translate()</code> helps us align the center point of our <code style=\"white-space: pre-wrap;\">zoom</code> US state with the center of the drawing area.</p>",
            "<p>While all of this is going on, we also tweak the <code style=\"white-space: pre-wrap;\">.scale</code> property to make the map bigger. This creates a zooming effect.</p>",
            "<p>After all that, we update the quantize scale’s domain with new values. Using <code style=\"white-space: pre-wrap;\">d3.quantile</code> lets us offset the scale to produce a more interesting map. Again, I discovered these values through experiment - they cut off the top and bottom of the range because there isn’t much there. This brings higher contrast to the richer middle of the range.</p>",
            "<p>With our D3 objects updated, we return a new derived state. <em>Technically</em> you don’t have to do this but you should. Due to how JavaScript works, you already updated D3 objects in place, but you should pretend <code style=\"white-space: pre-wrap;\">this.state</code> is immutable and return a new copy.</p>",
            "<p>Overall that makes your code easier to understand and closer to React principles.</p>",
            "<h3 id=\"render\">render</h3>",
            "<p>After all that hard work, the <code style=\"white-space: pre-wrap;\">render</code> method is a breeze. We prep our data then loop through it and render a <code style=\"white-space: pre-wrap;\">County</code> element for each entry.</p>",
            "<div class=\"sourceCode\" id=\"cb73\" data-caption=\"CountyMap render\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb73-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> geoPath<span class=\"op\" style=\"color: #666666;\">,</span> quantize <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">{</span> usTopoJson<span class=\"op\" style=\"color: #666666;\">,</span> values<span class=\"op\" style=\"color: #666666;\">,</span> zoom <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb73-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (<span class=\"op\" style=\"color: #666666;\">!</span>usTopoJson) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">null</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">else</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> us <span class=\"op\" style=\"color: #666666;\">=</span> usTopoJson<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                USstatesMesh <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">topojson</span>.<span class=\"at\" style=\"color: #7d9029;\">mesh</span>(</a>",
            "<a class=\"sourceLine\" id=\"cb73-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    us<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"va\" style=\"color: #19177c;\">us</span>.<span class=\"va\" style=\"color: #19177c;\">objects</span>.<span class=\"at\" style=\"color: #7d9029;\">states</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    (a<span class=\"op\" style=\"color: #666666;\">,</span> b) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> a <span class=\"op\" style=\"color: #666666;\">!==</span> b</a>",
            "<a class=\"sourceLine\" id=\"cb73-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                )<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                counties <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">topojson</span>.<span class=\"at\" style=\"color: #7d9029;\">feature</span>(us<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">us</span>.<span class=\"va\" style=\"color: #19177c;\">objects</span>.<span class=\"at\" style=\"color: #7d9029;\">counties</span>).<span class=\"at\" style=\"color: #7d9029;\">features</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb73-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> countyValueMap <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">_</span>.<span class=\"at\" style=\"color: #7d9029;\">fromPairs</span>(</a>",
            "<a class=\"sourceLine\" id=\"cb73-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"va\" style=\"color: #19177c;\">values</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> [<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">countyID</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">value</span>])</a>",
            "<a class=\"sourceLine\" id=\"cb73-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb73-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb73-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&lt;</span>g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"va\" style=\"color: #19177c;\">counties</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(feature <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb73-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        <span class=\"op\" style=\"color: #666666;\">&lt;</span>County</a>",
            "<a class=\"sourceLine\" id=\"cb73-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                            geoPath<span class=\"op\" style=\"color: #666666;\">={</span>geoPath<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                            feature<span class=\"op\" style=\"color: #666666;\">={</span>feature<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                            zoom<span class=\"op\" style=\"color: #666666;\">={</span>zoom<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                            key<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"va\" style=\"color: #19177c;\">feature</span>.<span class=\"at\" style=\"color: #7d9029;\">id</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                            quantize<span class=\"op\" style=\"color: #666666;\">={</span>quantize<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                            value<span class=\"op\" style=\"color: #666666;\">={</span>countyValueMap[<span class=\"va\" style=\"color: #19177c;\">feature</span>.<span class=\"at\" style=\"color: #7d9029;\">id</span>]<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb73-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    ))<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb73-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"op\" style=\"color: #666666;\">&lt;</span>path</a>",
            "<a class=\"sourceLine\" id=\"cb73-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        d<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"at\" style=\"color: #7d9029;\">geoPath</span>(USstatesMesh)<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        style<span class=\"op\" style=\"color: #666666;\">={{</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-36\" title=\"36\">                            <span class=\"dt\">fill</span><span class=\"op\">:</span> <span class=\"st\">&quot;none&quot;</span><span class=\"op\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-37\" title=\"37\">                            <span class=\"dt\">stroke</span><span class=\"op\">:</span> <span class=\"st\">&quot;#fff&quot;</span><span class=\"op\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-38\" title=\"38\">                            <span class=\"dt\">strokeLinejoin</span><span class=\"op\">:</span> <span class=\"st\">&quot;round&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-39\" title=\"39\">                        <span class=\"op\">}}</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-40\" title=\"40\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb73-41\" title=\"41\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                &lt;/g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-42\" title=\"42\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-43\" title=\"43\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb73-44\" title=\"44\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>We use destructuring to save all relevant props and state in constants, then use the TopoJSON library to grab data out of the <code style=\"white-space: pre-wrap;\">usTopoJson</code> dataset.</p>",
            "<p><code style=\"white-space: pre-wrap;\">.mesh</code> calculates a mesh for US states – a thin line around the edges. <code style=\"white-space: pre-wrap;\">.feature</code> calculates feature for each count – fill in with color.</p>",
            "<p>Mesh and feature aren’t tied to US states or counties by the way. It’s just a matter of what you get back: borders or flat areas. What you need depends on what you’re building.</p>",
            "<p>We use Lodash’s <code style=\"white-space: pre-wrap;\">_.fromPairs</code> to build a dictionary that maps county identifiers to their values. Building it beforehand makes our code faster. You can read some details about the speed optimizations <a href=\"https://swizec.com/blog/optimizing-react-choropleth-map-rendering/swizec/7302\">here</a>.</p>",
            "<p>As promised, the <code style=\"white-space: pre-wrap;\">return</code> statement loops through the list of <code style=\"white-space: pre-wrap;\">counties</code> and renders <code style=\"white-space: pre-wrap;\">County</code> components. Each gets a bunch of attributes and returns a <code style=\"white-space: pre-wrap;\">&lt;path&gt;</code> element that looks like a specific county.</p>",
            "<p>For US state borders, we render a single <code style=\"white-space: pre-wrap;\">&lt;path&gt;</code> element and use <code style=\"white-space: pre-wrap;\">geoPath</code> to generate the <code style=\"white-space: pre-wrap;\">d</code> attribute.</p>"
          ]
        },
        {
          "lectureTitle": "Step 4: CountyMap County.js",
          "lectureLines": [
            "<h2 id=\"step-4-countymapcounty.js\">Step 4: CountyMap/County.js</h2>",
            "<p>The <code style=\"white-space: pre-wrap;\">County</code> component is built from two parts: imports and color constants, and a component that returns a <code style=\"white-space: pre-wrap;\">&lt;path&gt;</code>. All the hard calculation happens in <code style=\"white-space: pre-wrap;\">CountyMap</code>.</p>",
            "<div class=\"sourceCode\" id=\"cb74\" data-caption=\"Imports and color constants\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb74-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/CountyMap/County.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb74-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"op\" style=\"color: #666666;\">{</span> Component <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;react&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb74-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> _ <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;lodash&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb74-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb74-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> ChoroplethColors <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">_</span>.<span class=\"at\" style=\"color: #7d9029;\">reverse</span>([</a>",
            "<a class=\"sourceLine\" id=\"cb74-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"st\" style=\"color: #4070a0;\">&#39;rgb(247,251,255)&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb74-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"st\" style=\"color: #4070a0;\">&#39;rgb(222,235,247)&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb74-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"st\" style=\"color: #4070a0;\">&#39;rgb(198,219,239)&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb74-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"st\" style=\"color: #4070a0;\">&#39;rgb(158,202,225)&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb74-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"st\" style=\"color: #4070a0;\">&#39;rgb(107,174,214)&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb74-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"st\" style=\"color: #4070a0;\">&#39;rgb(66,146,198)&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb74-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"st\" style=\"color: #4070a0;\">&#39;rgb(33,113,181)&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb74-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"st\" style=\"color: #4070a0;\">&#39;rgb(8,81,156)&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb74-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"st\" style=\"color: #4070a0;\">&#39;rgb(8,48,107)&#39;</span></a>",
            "<a class=\"sourceLine\" id=\"cb74-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb74-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb74-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> BlankColor <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;rgb(240,240,240)&#39;</span></a></code></pre></div>",
            "<p>We import React and Lodash, and define some color constants. I got the <code style=\"white-space: pre-wrap;\">ChoroplethColors</code> from some example online, and <code style=\"white-space: pre-wrap;\">BlankColor</code> is a pleasant gray.</p>",
            "<p>Now we need the <code style=\"white-space: pre-wrap;\">County</code> component.</p>",
            "<div class=\"sourceCode\" id=\"cb75\" data-caption=\"County component\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb75-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/CountyMap/County.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb75-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> County <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> Component <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb75-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">shouldComponentUpdate</span>(nextProps<span class=\"op\" style=\"color: #666666;\">,</span> nextState) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb75-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> zoom<span class=\"op\" style=\"color: #666666;\">,</span> value <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb75-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb75-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> zoom <span class=\"op\" style=\"color: #666666;\">!==</span> <span class=\"va\" style=\"color: #19177c;\">nextProps</span>.<span class=\"at\" style=\"color: #7d9029;\">zoom</span></a>",
            "<a class=\"sourceLine\" id=\"cb75-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">||</span> value <span class=\"op\" style=\"color: #666666;\">!==</span> <span class=\"va\" style=\"color: #19177c;\">nextProps</span>.<span class=\"at\" style=\"color: #7d9029;\">value</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb75-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb75-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb75-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb75-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> value<span class=\"op\" style=\"color: #666666;\">,</span> geoPath<span class=\"op\" style=\"color: #666666;\">,</span> feature<span class=\"op\" style=\"color: #666666;\">,</span> quantize <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb75-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb75-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> color <span class=\"op\" style=\"color: #666666;\">=</span> BlankColor<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb75-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb75-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (value) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb75-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            color <span class=\"op\" style=\"color: #666666;\">=</span> ChoroplethColors[<span class=\"at\" style=\"color: #7d9029;\">quantize</span>(value)]<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb75-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb75-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb75-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb75-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>path d<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"at\" style=\"color: #7d9029;\">geoPath</span>(feature)<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb75-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                  style<span class=\"op\" style=\"color: #666666;\">={{</span><span class=\"dt\">fill</span><span class=\"op\">:</span> color<span class=\"op\">}}</span></a>",
            "<a class=\"sourceLine\" id=\"cb75-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                  title<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"va\" style=\"color: #19177c;\">feature</span>.<span class=\"at\" style=\"color: #7d9029;\">id</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb75-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb75-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb75-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb75-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb75-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> County<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>The <code style=\"white-space: pre-wrap;\">render</code> method uses a <code style=\"white-space: pre-wrap;\">quantize</code> scale to pick the right color and returns a <code style=\"white-space: pre-wrap;\">&lt;path&gt;</code> element. <code style=\"white-space: pre-wrap;\">geoPath</code> generates the <code style=\"white-space: pre-wrap;\">d</code> attribute, we set style to <code style=\"white-space: pre-wrap;\">fill</code> the color, and we give our path a <code style=\"white-space: pre-wrap;\">title</code>.</p>",
            "<p><code style=\"white-space: pre-wrap;\">shouldComponentUpdate</code> is more interesting. It’s a React lifecycle method that lets you specify which prop changes are relevant to component re-rendering.</p>",
            "<p><code style=\"white-space: pre-wrap;\">CountyMap</code> passes complex props - <code style=\"white-space: pre-wrap;\">quantize</code>, <code style=\"white-space: pre-wrap;\">geoPath</code>, and <code style=\"white-space: pre-wrap;\">feature</code>. They’re pass-by-reference instead of pass-by-value. That means React can’t see when their output changes unless you make completely new copies.</p>",
            "<p>This can lead to all 3,220 counties re-rendering every time a user does anything. But they only have to re-render if we change the map zoom or if the county gets a new value.</p>",
            "<p>Using <code style=\"white-space: pre-wrap;\">shouldComponentUpdate</code> like this we can go from 3,220 DOM updates to a few hundred. Big speed improvement</p>"
          ]
        },
        {
          "lectureTitle": "A map appears 🗺",
          "lectureLines": [
            "<p>Your browser should now show a map.</p>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/choropleth-map-shortened-dataset.png\" alt=\"Choropleth map with shortened dataset\"><figcaption>Choropleth map with shortened dataset</figcaption>",
            "</figure>",
            "<p>Tech work visas just aren’t that evenly distributed. Even with the full dataset most counties are gray.</p>",
            "<p>If that didn’t work, consult <a href=\"https://github.com/Swizec/react-d3-walkthrough-livecode/commit/4c9ba22e4d4de2fa71d032a0b8038231c72b9b8e\">this diff on Github</a>.</p>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "Render a Histogram of salaries",
      "lectures": [
        {
          "lectureTitle": "Render a Histogram of salaries",
          "lectureLines": [
            "<h1 id=\"histogram-of-salaries\">Render a Histogram of salaries</h1>",
            "<p>Knowing median salaries is great and all, but it doesn’t tell you much about what you can expect. You need to know the distribution to see if it’s more likely you’ll get 140k or 70k.</p>",
            "<p>That’s what histograms are for. Give them a bunch of data, and they show its distribution. We’re going to build one like this:</p>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/basic-histogram.png\" alt=\"Basic histogram\"><figcaption>Basic histogram</figcaption>",
            "</figure>",
            "<p>In the shortened dataset, 35% of tech salaries fall between $60k and $80k, 26% between $80k and $100k etc. Throwing a weighed dice with this <a href=\"https://en.wikipedia.org/wiki/Probability_distribution\">random distribution</a>, you’re far more likely to get 60k-80k than 120k-140k. It’s a great way to gauge situations.</p>",
            "<p>It’s where statistics like “More people die from vending machines than shark attacks” come from. Which are you afraid of, vending machines or sharks? Stats say your answer should be <a href=\"https://www.cdc.gov/nchs/fastats/deaths.htm\">heart disease</a>. 😉</p>",
            "<p>We’ll start our histogram with some changes in <code style=\"white-space: pre-wrap;\">App.js</code>, make a <code style=\"white-space: pre-wrap;\">Histogram</code> component using the <a href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6887740#full-feature-integration\">full-feature approach</a>, add an <code style=\"white-space: pre-wrap;\">Axis</code> using the <a href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6887729#blackbox-hoc\">blackbox HOC approach</a>, and finally add some styling.</p>"
          ]
        },
        {
          "lectureTitle": "Step 1: Prep App.js",
          "lectureLines": [
            "<h2 id=\"step-1-prep-app.js-2\">Step 1: Prep App.js</h2>",
            "<p>You know the drill, don’t you? Import some stuff, add it to the <code style=\"white-space: pre-wrap;\">render()</code> method in the <code style=\"white-space: pre-wrap;\">App</code> component.</p>",
            "<div class=\"sourceCode\" id=\"cb76\" data-caption=\"Histogram imports\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb76-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/App.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb76-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> _ <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;lodash&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb76-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb76-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb76-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./style.css&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb76-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb76-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb76-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> Preloader <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./components/Preloader&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb76-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">{</span> loadAllData <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./DataHandling&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb76-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb76-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> CountyMap <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./components/CountyMap&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb76-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb76-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> Histogram <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./components/Histogram&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb76-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a></code></pre></div>",
            "<p>We import <code style=\"white-space: pre-wrap;\">style.css</code> and the <code style=\"white-space: pre-wrap;\">Histogram</code> component. That’s what I love about Webpack - you can import CSS in JavaScript. We got the setup with <code style=\"white-space: pre-wrap;\">create-react-app</code>.</p>",
            "<p>There are competing schools of thought about styling React apps. Some say each component should come with its own CSS files, some think it should be in large per-app CSS files, many think CSS-in-JS is the way to go.</p>",
            "<p>Personally I like to use CSS for general cross-component styling and styled-components for more specific styles. We’re using CSS in this project because it works and means we don’t have to learn yet another dependency.</p>",
            "<p>After the imports, we can render our <code style=\"white-space: pre-wrap;\">Histogram</code> in the <code style=\"white-space: pre-wrap;\">App</code> component.</p>",
            "<div class=\"sourceCode\" id=\"cb77\" data-caption=\"Render Histogram in App\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb77-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/App.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb77-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>div className<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;App container&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>h1<span class=\"op\" style=\"color: #666666;\">&gt;</span>Loaded <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"va\" style=\"color: #19177c;\">techSalaries</span>.<span class=\"at\" style=\"color: #7d9029;\">length</span><span class=\"op\" style=\"color: #666666;\">}</span> salaries&lt;/h1<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>svg width<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;1100&quot;</span> height<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;500&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&lt;</span>CountyMap usTopoJson<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">usTopoJson</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                           USstateNames<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">USstateNames</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                           values<span class=\"op\" style=\"color: #666666;\">={</span>countyValues<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                           x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                           y<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                           width<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">500</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                           height<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">500</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                           zoom<span class=\"op\" style=\"color: #666666;\">={</span>zoom<span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb77-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&lt;</span>Histogram bins<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">10</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                           width<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">500</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                           height<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">500</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                           x<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;500&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                           y<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;10&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                           data<span class=\"op\" style=\"color: #666666;\">={</span>filteredSalaries<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                           axisMargin<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">83</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                           bottomMargin<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">5</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                           value<span class=\"op\" style=\"color: #666666;\">={</span>d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">base_salary</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb77-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            &lt;/svg<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb77-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>We render the <code style=\"white-space: pre-wrap;\">Histogram</code> component with a bunch of props. They specify the dimensions we want, positioning, and pass data to the component. We’re using <code style=\"white-space: pre-wrap;\">filteredSalaries</code> even though we haven’t set up any filtering yet. One less line of code to change later 👌</p>",
            "<p>That’s it. <code style=\"white-space: pre-wrap;\">App</code> is ready to render our <code style=\"white-space: pre-wrap;\">Histogram</code>.</p>",
            "<p>You should now see an error about missing files. That’s normal.</p>"
          ]
        },
        {
          "lectureTitle": "Step 2: CSS changes",
          "lectureLines": [
            "<h2 id=\"histogram-css\">Step 2: CSS changes</h2>",
            "<p>As mentioned, opinions vary on the best approach to styling React apps. Some say stylesheets per component, some say styling inside JavaScript, others swear by global app styling.</p>",
            "<p>The truth is somewhere in between. Do what fits your project and your team. We’re using global stylesheets because it’s the simplest.</p>",
            "<p>Create a new file <code style=\"white-space: pre-wrap;\">src/style.css</code> and add these 29 lines:</p>",
            "<div class=\"sourceCode\" id=\"cb78\" data-caption=\"style.css stylesheet\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode css\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode css\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb78-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"fu\" style=\"color: #06287e;\">.histogram</span> <span class=\"fu\" style=\"color: #06287e;\">.bar</span> rect {</a>",
            "<a class=\"sourceLine\" id=\"cb78-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">fill</span>: <span class=\"cn\" style=\"color: #880000;\">steelblue</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb78-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    shape-rendering: crispEdges<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb78-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">}</a>",
            "<a class=\"sourceLine\" id=\"cb78-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb78-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"fu\" style=\"color: #06287e;\">.histogram</span> <span class=\"fu\" style=\"color: #06287e;\">.bar</span> text {</a>",
            "<a class=\"sourceLine\" id=\"cb78-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">fill</span>: <span class=\"cn\" style=\"color: #880000;\">#fff</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb78-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">font</span>: <span class=\"dv\" style=\"color: #40a070;\">12</span><span class=\"dt\" style=\"color: #902000;\">px</span> <span class=\"dv\" style=\"color: #40a070;\">sans-serif</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb78-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">}</a>",
            "<a class=\"sourceLine\" id=\"cb78-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb78-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">button {</a>",
            "<a class=\"sourceLine\" id=\"cb78-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">margin-right</span>: <span class=\"dv\" style=\"color: #40a070;\">.5</span><span class=\"dt\" style=\"color: #902000;\">em</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb78-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">margin-bottom</span>: <span class=\"dv\" style=\"color: #40a070;\">.3</span><span class=\"dt\" style=\"color: #902000;\">em</span> <span class=\"at\" style=\"color: #7d9029;\">!important</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb78-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">}</a>",
            "<a class=\"sourceLine\" id=\"cb78-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb78-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"fu\" style=\"color: #06287e;\">.row</span> {</a>",
            "<a class=\"sourceLine\" id=\"cb78-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">margin-top</span>: <span class=\"dv\" style=\"color: #40a070;\">1</span><span class=\"dt\" style=\"color: #902000;\">em</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb78-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">}</a>",
            "<a class=\"sourceLine\" id=\"cb78-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb78-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"fu\" style=\"color: #06287e;\">.mean</span> text {</a>",
            "<a class=\"sourceLine\" id=\"cb78-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">font</span>: <span class=\"dv\" style=\"color: #40a070;\">11</span><span class=\"dt\" style=\"color: #902000;\">px</span> <span class=\"dv\" style=\"color: #40a070;\">sans-serif</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb78-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">fill</span>: <span class=\"cn\" style=\"color: #880000;\">grey</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb78-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">}</a>",
            "<a class=\"sourceLine\" id=\"cb78-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb78-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"fu\" style=\"color: #06287e;\">.mean</span> path {</a>",
            "<a class=\"sourceLine\" id=\"cb78-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    stroke-dasharray: <span class=\"dv\" style=\"color: #40a070;\">3</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb78-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    stroke: <span class=\"cn\" style=\"color: #880000;\">grey</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb78-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    stroke-width: <span class=\"dv\" style=\"color: #40a070;\">1</span><span class=\"dt\" style=\"color: #902000;\">px</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb78-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">}</a></code></pre></div>",
            "<p>We won’t go into details about the CSS here. Many better books have been written about it.</p>",
            "<p>In broad strokes:</p>",
            "<ul>",
            "<li>we’re making <code style=\"white-space: pre-wrap;\">.histogram</code> rectangles – the bars – blue</li>",
            "<li>labels white <code style=\"white-space: pre-wrap;\">12px</code> font</li>",
            "<li><code style=\"white-space: pre-wrap;\">button</code>s and <code style=\"white-space: pre-wrap;\">.row</code>s have some spacing</li>",
            "<li>the <code style=\"white-space: pre-wrap;\">.mean</code> line is a dotted grey with gray <code style=\"white-space: pre-wrap;\">11px</code> text.</li>",
            "</ul>",
            "<p>More CSS than we need for just the histogram, but we’re already here so might as well write it now.</p>",
            "<p>Adding our CSS before building the Histogram means it’s going to look beautiful the first time around.</p>"
          ]
        },
        {
          "lectureTitle": "Step 3: Histogram component",
          "lectureLines": [
            "<h2 id=\"step-3-histogram-component\">Step 3: Histogram component</h2>",
            "<p>We’re following the <a href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6887740#full-feature-integration\">full-feature integration</a> approach for our Histogram component. React talks to the DOM, D3 calculates the props.</p>",
            "<p>We’ll use two components:</p>",
            "<ol type=\"1\">",
            "<li><code style=\"white-space: pre-wrap;\">Histogram</code> makes the general layout, dealing with D3, and translating raw data into a histogram</li>",
            "<li><code style=\"white-space: pre-wrap;\">HistogramBar</code> draws a single bar and labels it</li>",
            "</ol>",
            "<p>Let’s start with the basics: a <code style=\"white-space: pre-wrap;\">Histogram</code> directory and an <code style=\"white-space: pre-wrap;\">index.js</code> file. Keeps our code organized and imports easy. I like to use directories for components made of multiple files.</p>",
            "<div class=\"sourceCode\" id=\"cb79\" data-caption=\"Re-export Histogram\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb79-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"im\">default</span> <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;./Histogram&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>Import and re-export the histogram componenet from <code style=\"white-space: pre-wrap;\">./Histogram</code>. This way you can keep your histogram code in a file called Histogram and pretend the directory itself is exporting it.</p>",
            "<p>Great way to group files that belong together without exposing your directory’s internal structure.</p>",
            "<p>Now we need the <code style=\"white-space: pre-wrap;\">Histogram.js</code> file. Start with some imports, a default export, and a stubbed out <code style=\"white-space: pre-wrap;\">Histogram</code> class.</p>",
            "<div class=\"sourceCode\" id=\"cb80\" data-caption=\"Histogram component stub\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb80-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Histogram/Histogram.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb80-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;react&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb80-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"im\">as</span> d3 <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;d3&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb80-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb80-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Histogram <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb80-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    state <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb80-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">histogram</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">histogram</span>()<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb80-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">widthScale</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">scaleLinear</span>()<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb80-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">yScale</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">scaleLinear</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb80-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb80-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb80-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">static</span> <span class=\"at\" style=\"color: #7d9029;\">getDerivedStateFromProps</span>(props<span class=\"op\" style=\"color: #666666;\">,</span> state) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb80-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> <span class=\"op\" style=\"color: #666666;\">{</span> histogram<span class=\"op\" style=\"color: #666666;\">,</span> widthScale<span class=\"op\" style=\"color: #666666;\">,</span> yScale <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> state<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb80-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb80-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb80-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            ...<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb80-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            histogram<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb80-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            widthScale<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb80-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            yScale</a>",
            "<a class=\"sourceLine\" id=\"cb80-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb80-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb80-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb80-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    makeBar <span class=\"op\" style=\"color: #666666;\">=</span> bar <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb80-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> yScale<span class=\"op\" style=\"color: #666666;\">,</span> widthScale <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb80-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb80-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb80-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb80-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb80-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> histogram<span class=\"op\" style=\"color: #666666;\">,</span> yScale <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb80-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y<span class=\"op\" style=\"color: #666666;\">,</span> data<span class=\"op\" style=\"color: #666666;\">,</span> axisMargin <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb80-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb80-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">null</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb80-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb80-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>We import React and D3, and set up <code style=\"white-space: pre-wrap;\">Histogram</code>.</p>",
            "<p>Default <code style=\"white-space: pre-wrap;\">state</code> for our D3 objects: histogram, widthScale, and yScale. An empty <code style=\"white-space: pre-wrap;\">getDerivedStateFromProps</code> to keep them updated, <code style=\"white-space: pre-wrap;\">makeBar</code> to help us render each bar, and <code style=\"white-space: pre-wrap;\">render</code> returning null for now.</p>",
            "<h3 id=\"getderivedstatefromprops-1\">getDerivedStateFromProps</h3>",
            "<div class=\"sourceCode\" id=\"cb81\" data-caption=\"getDerivedStateFromProps in Histogram\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb81-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Histogram/Histogram.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb81-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">static</span> <span class=\"at\" style=\"color: #7d9029;\">getDerivedStateFromProps</span>(props<span class=\"op\" style=\"color: #666666;\">,</span> state) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb81-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> <span class=\"op\" style=\"color: #666666;\">{</span> histogram<span class=\"op\" style=\"color: #666666;\">,</span> widthScale<span class=\"op\" style=\"color: #666666;\">,</span> yScale <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> state<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb81-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb81-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">histogram</span>.<span class=\"at\" style=\"color: #7d9029;\">thresholds</span>(<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">bins</span>).<span class=\"at\" style=\"color: #7d9029;\">value</span>(<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">value</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb81-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb81-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> bars <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">histogram</span>(<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">data</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb81-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            counts <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">bars</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">length</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb81-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb81-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        widthScale</a>",
            "<a class=\"sourceLine\" id=\"cb81-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            .<span class=\"at\" style=\"color: #7d9029;\">domain</span>([<span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">min</span>(counts)<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">max</span>(counts)])</a>",
            "<a class=\"sourceLine\" id=\"cb81-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            .<span class=\"at\" style=\"color: #7d9029;\">range</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">width</span> <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">axisMargin</span>])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb81-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb81-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        yScale</a>",
            "<a class=\"sourceLine\" id=\"cb81-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            .<span class=\"at\" style=\"color: #7d9029;\">domain</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">max</span>(bars<span class=\"op\" style=\"color: #666666;\">,</span> d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">x1</span>)])</a>",
            "<a class=\"sourceLine\" id=\"cb81-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            .<span class=\"at\" style=\"color: #7d9029;\">range</span>([<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">height</span> <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">y</span> <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">bottomMargin</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">0</span>])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb81-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb81-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb81-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            ...<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb81-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            histogram<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb81-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            widthScale<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb81-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            yScale</a>",
            "<a class=\"sourceLine\" id=\"cb81-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb81-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>First, we configure the <code style=\"white-space: pre-wrap;\">histogram</code> generator. <code style=\"white-space: pre-wrap;\">thresholds</code> specify how many bins we want and <code style=\"white-space: pre-wrap;\">value</code> specifies the value accessor function. We get both from props passed into the <code style=\"white-space: pre-wrap;\">Histogram</code> component.</p>",
            "<p>In our case that makes 20 bins, and the value accessor returns each data point’s <code style=\"white-space: pre-wrap;\">base_salary</code>.</p>",
            "<p>We feed the data prop into our histogram generator, and count how many values are in each bin with a <code style=\"white-space: pre-wrap;\">.map</code> call. We need those to configure our scales.</p>",
            "<p>If you print the result of <code style=\"white-space: pre-wrap;\">histogram()</code>, you’ll see an array structure where each entry holds metadata about the bin and the values it contains.</p>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/histogram-data-screenshot.png\" alt=\"console.log(this.histogram())\"><figcaption>console.log(this.histogram())</figcaption>",
            "</figure>",
            "<p>Let’s use this info to set up our scales.</p>",
            "<p><code style=\"white-space: pre-wrap;\">widthScale</code> has a range from the smallest (<code style=\"white-space: pre-wrap;\">d3.min</code>) bin to the largest (<code style=\"white-space: pre-wrap;\">d3.max</code>), and a range of <code style=\"white-space: pre-wrap;\">0</code> to width less a margin. We’ll use it to calculate bar sizes.</p>",
            "<p><code style=\"white-space: pre-wrap;\">yScale</code> has a range from <code style=\"white-space: pre-wrap;\">0</code> to the largest <code style=\"white-space: pre-wrap;\">x1</code> coordinate we can find in a bin. Bins go from <code style=\"white-space: pre-wrap;\">x0</code> to <code style=\"white-space: pre-wrap;\">x1</code>, which reflects the fact that most histograms are horizontally oriented. Ours is vertical so that our labels are easier to read. The range goes from <code style=\"white-space: pre-wrap;\">0</code> to the maximum height less a margin.</p>",
            "<p>Now let’s render this puppy.</p>",
            "<h3 id=\"render-1\">render</h3>",
            "<div class=\"sourceCode\" id=\"cb82\" data-caption=\"Histogram.render\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb82-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Histogram/Histogram.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb82-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Histogram <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb82-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb82-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb82-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> histogram<span class=\"op\" style=\"color: #666666;\">,</span> yScale <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb82-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y<span class=\"op\" style=\"color: #666666;\">,</span> data<span class=\"op\" style=\"color: #666666;\">,</span> axisMargin <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb82-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb82-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> bars <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">histogram</span>(data)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb82-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb82-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb82-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>g className<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;histogram&quot;</span> transform<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"vs\" style=\"color: #4070a0;\">`translate(</span><span class=\"sc\" style=\"color: #4070a0;\">${</span>x<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">, </span><span class=\"sc\" style=\"color: #4070a0;\">${</span>y<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">)`</span><span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb82-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&lt;</span>g className<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;bars&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb82-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"va\" style=\"color: #19177c;\">bars</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">makeBar</span>))<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb82-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                &lt;/g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb82-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            &lt;/g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb82-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb82-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb82-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>We take everything we need out of <code style=\"white-space: pre-wrap;\">state</code> and <code style=\"white-space: pre-wrap;\">props</code> with destructuring, call <code style=\"white-space: pre-wrap;\">histogram()</code> on our data to get a list of bars, and render.</p>",
            "<p>Our render method returns a <code style=\"white-space: pre-wrap;\">&lt;g&gt;</code> grouping element transformed to the position given in props and walks through the <code style=\"white-space: pre-wrap;\">bars</code> array, calling <code style=\"white-space: pre-wrap;\">makeBar</code> for each. Later, we’re going to add an <code style=\"white-space: pre-wrap;\">Axis</code> as well.</p>",
            "<p>This is a great example of React’s declarativeness. We have a bunch of stuff, and all it takes to render is a loop. No worrying about how it renders, where it goes, or anything like that. Walk through data, render, done.</p>",
            "<h3 id=\"makebar\">makeBar</h3>",
            "<p><code style=\"white-space: pre-wrap;\">makeBar</code> is a function that takes a histogram bar’s metadata and returns a <code style=\"white-space: pre-wrap;\">HistogramBar</code> component. We use it to make our declarative loop more readable.</p>",
            "<div class=\"sourceCode\" id=\"cb83\" data-caption=\"Histogram.makeBar\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb83-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Histogram/Histogram.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb83-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Histogram <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb83-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb83-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    makeBar <span class=\"op\" style=\"color: #666666;\">=</span> bar <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb83-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> yScale<span class=\"op\" style=\"color: #666666;\">,</span> widthScale <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb83-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb83-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> percent <span class=\"op\" style=\"color: #666666;\">=</span> (<span class=\"va\" style=\"color: #19177c;\">bar</span>.<span class=\"at\" style=\"color: #7d9029;\">length</span> / <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"va\" style=\"color: #19177c;\">data</span>.<span class=\"at\" style=\"color: #7d9029;\">length</span>) <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"dv\" style=\"color: #40a070;\">100</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb83-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb83-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> props <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb83-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">percent</span><span class=\"op\" style=\"color: #666666;\">:</span> percent<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb83-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">axisMargin</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb83-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"at\" style=\"color: #7d9029;\">yScale</span>(<span class=\"va\" style=\"color: #19177c;\">bar</span>.<span class=\"at\" style=\"color: #7d9029;\">x1</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb83-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">width</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"at\" style=\"color: #7d9029;\">widthScale</span>(<span class=\"va\" style=\"color: #19177c;\">bar</span>.<span class=\"at\" style=\"color: #7d9029;\">length</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb83-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">height</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"at\" style=\"color: #7d9029;\">yScale</span>(<span class=\"va\" style=\"color: #19177c;\">bar</span>.<span class=\"at\" style=\"color: #7d9029;\">x0</span>) <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"at\" style=\"color: #7d9029;\">yScale</span>(<span class=\"va\" style=\"color: #19177c;\">bar</span>.<span class=\"at\" style=\"color: #7d9029;\">x1</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb83-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">key</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;histogram-bar-&quot;</span> <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"va\" style=\"color: #19177c;\">bar</span>.<span class=\"at\" style=\"color: #7d9029;\">x0</span></a>",
            "<a class=\"sourceLine\" id=\"cb83-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb83-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb83-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">&lt;</span>HistogramBar <span class=\"op\" style=\"color: #666666;\">{</span>...<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb83-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb83-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>See, we’re calculating <code style=\"white-space: pre-wrap;\">props</code> and feeding them into <code style=\"white-space: pre-wrap;\">HistogramBar</code>. Putting it in a separate function just makes the <code style=\"white-space: pre-wrap;\">.map</code> construct in <code style=\"white-space: pre-wrap;\">render</code> easier to read. There’s a lot of props to calculate.</p>",
            "<p>Some, like <code style=\"white-space: pre-wrap;\">axisMargin</code> we pass through, others like <code style=\"white-space: pre-wrap;\">width</code> and <code style=\"white-space: pre-wrap;\">height</code> we calculate using our scales.</p>",
            "<p>Setting the <code style=\"white-space: pre-wrap;\">key</code> prop is important. React uses it to tell the bars apart and only re-render those that change.</p>"
          ]
        },
        {
          "lectureTitle": "Step 4: HistogramBar (sub)component",
          "lectureLines": [
            "<h2 id=\"step-4-histogrambar-subcomponent\">Step 4: HistogramBar (sub)component</h2>",
            "<p>Before our histogram shows up, we need another component: <code style=\"white-space: pre-wrap;\">HistogramBar</code>. We <em>could</em> have shoved all of it in the <code style=\"white-space: pre-wrap;\">makeBar</code> function, but it makes sense to keep separate. Better future flexibility.</p>",
            "<p>You can write small components like this in the same file as their main component. They’re not reusable since they fit a specific use-case, and they’re small enough so your files don’t get too crazy.</p>",
            "<p>But in the interest of readability, let’s make a <code style=\"white-space: pre-wrap;\">HistogramBar</code> file.</p>",
            "<div class=\"sourceCode\" id=\"cb84\" data-caption=\"HistogramBar component\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb84-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Histogram/HistogramBar.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb84-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;react&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb84-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb84-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> HistogramBar <span class=\"op\" style=\"color: #666666;\">=</span> (<span class=\"op\" style=\"color: #666666;\">{</span> percent<span class=\"op\" style=\"color: #666666;\">,</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y<span class=\"op\" style=\"color: #666666;\">,</span> width<span class=\"op\" style=\"color: #666666;\">,</span> height <span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb84-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> translate <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"vs\" style=\"color: #4070a0;\">`translate(</span><span class=\"sc\" style=\"color: #4070a0;\">${</span>x<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">, </span><span class=\"sc\" style=\"color: #4070a0;\">${</span>y<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">)`</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb84-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        label <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">percent</span>.<span class=\"at\" style=\"color: #7d9029;\">toFixed</span>(<span class=\"dv\" style=\"color: #40a070;\">0</span>) <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;%&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb84-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb84-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (percent <span class=\"op\" style=\"color: #666666;\">&lt;</span> <span class=\"dv\" style=\"color: #40a070;\">1</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb84-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        label <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">percent</span>.<span class=\"at\" style=\"color: #7d9029;\">toFixed</span>(<span class=\"dv\" style=\"color: #40a070;\">2</span>) <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;%&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb84-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb84-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb84-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (width <span class=\"op\" style=\"color: #666666;\">&lt;</span> <span class=\"dv\" style=\"color: #40a070;\">20</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb84-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        label <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">label</span>.<span class=\"at\" style=\"color: #7d9029;\">replace</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;%&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;&quot;</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb84-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb84-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb84-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (width <span class=\"op\" style=\"color: #666666;\">&lt;</span> <span class=\"dv\" style=\"color: #40a070;\">10</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb84-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        label <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb84-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb84-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb84-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb84-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>g transform<span class=\"op\" style=\"color: #666666;\">={</span>translate<span class=\"op\" style=\"color: #666666;\">}</span> className<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;bar&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb84-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>rect</a>",
            "<a class=\"sourceLine\" id=\"cb84-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                width<span class=\"op\" style=\"color: #666666;\">={</span>width<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb84-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                height<span class=\"op\" style=\"color: #666666;\">={</span>height <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"dv\" style=\"color: #40a070;\">2</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb84-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                transform<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;translate(0, 1)&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb84-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb84-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>text textAnchor<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;end&quot;</span> x<span class=\"op\" style=\"color: #666666;\">={</span>width <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"dv\" style=\"color: #40a070;\">5</span><span class=\"op\" style=\"color: #666666;\">}</span> y<span class=\"op\" style=\"color: #666666;\">={</span>height / <span class=\"dv\" style=\"color: #40a070;\">2</span> <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"dv\" style=\"color: #40a070;\">3</span><span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb84-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">{</span>label<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb84-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            &lt;/text<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb84-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        &lt;/g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb84-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb84-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb84-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb84-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> HistogramBar<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>Pretty long for a functional component. Most of it goes into deciding how much precision to render in the label, so it’s okay.</p>",
            "<p>We start with an SVG translate and a default <code style=\"white-space: pre-wrap;\">label</code>. Then we update the label based on the bar size and its value.</p>",
            "<p>When we have a label we like, we return a <code style=\"white-space: pre-wrap;\">&lt;g&gt;</code> grouping element with a rectangle and a text. Both positioned based on the <code style=\"white-space: pre-wrap;\">width</code> and <code style=\"white-space: pre-wrap;\">height</code> of the bar.</p>",
            "<p>Make sure to import <code style=\"white-space: pre-wrap;\">HistogramBar</code> in the main <code style=\"white-space: pre-wrap;\">Histogram</code> file.</p>",
            "<div class=\"sourceCode\" id=\"cb85\" data-caption=\"HistogramBar import\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb85-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Histogram/Histogram.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb85-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb85-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> HistogramBar <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./HistogramBar&#39;</span></a></code></pre></div>",
            "<p>You should now see a histogram.</p>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/histogram-without-axis.png\" alt=\"Histogram without axis\"><figcaption>Histogram without axis</figcaption>",
            "</figure>"
          ]
        },
        {
          "lectureTitle": "Step 5: Add an axis",
          "lectureLines": [
            "<h2 id=\"step-5-axis-hoc\">Step 5: Axis HOC</h2>",
            "<p>Our histogram is pretty, but it needs an axis to be useful. You’ve already learned how to implement an axis when we talked about <a href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6887732#blackbox-axis\">blackbox integration</a>. We’re going to use the same approach and copy those concepts into the real project.</p>",
            "<h3 id=\"d3blackbox\">D3blackbox</h3>",
            "<p>We start with the D3blackbox higher order component. Same as before, except we put it in <code style=\"white-space: pre-wrap;\">src/components</code>.</p>",
            "<div class=\"sourceCode\" id=\"cb86\" data-caption=\"D3blackbox HOC\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb86-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;react&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb86-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb86-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span> <span class=\"at\" style=\"color: #7d9029;\">D3blackbox</span>(D3render) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb86-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Blackbox <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb86-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        anchorRef <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">createRef</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb86-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb86-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"at\" style=\"color: #7d9029;\">componentDidMount</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb86-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"va\" style=\"color: #19177c;\">D3render</span>.<span class=\"at\" style=\"color: #7d9029;\">call</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb86-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb86-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"at\" style=\"color: #7d9029;\">componentDidUpdate</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb86-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"va\" style=\"color: #19177c;\">D3render</span>.<span class=\"at\" style=\"color: #7d9029;\">call</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb86-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb86-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb86-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb86-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb86-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb86-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&lt;</span>g transform<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"vs\" style=\"color: #4070a0;\">`translate(</span><span class=\"sc\" style=\"color: #4070a0;\">${</span>x<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">, </span><span class=\"sc\" style=\"color: #4070a0;\">${</span>y<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">)`</span><span class=\"op\" style=\"color: #666666;\">}</span> ref<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">anchorRef</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb86-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb86-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb86-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb86-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>Take a <code style=\"white-space: pre-wrap;\">D3render</code> function, call it on <code style=\"white-space: pre-wrap;\">componentDidMount</code> and <code style=\"white-space: pre-wrap;\">componentDidUpdate</code>, and render a positioned anchor element for <code style=\"white-space: pre-wrap;\">D3render</code> to hook into.</p>",
            "<h3 id=\"axis-component\">Axis component</h3>",
            "<p>With <code style=\"white-space: pre-wrap;\">D3blackbox</code>, we can reduce the <code style=\"white-space: pre-wrap;\">Axis</code> component to a wrapped function. We’re implementing the <code style=\"white-space: pre-wrap;\">D3render</code> method.</p>",
            "<div class=\"sourceCode\" id=\"cb87\" data-caption=\"Axis component using D3blackbox\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb87-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"im\">as</span> d3 <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;d3&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb87-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> D3blackbox <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;../D3blackbox&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb87-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb87-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> Axis <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">D3blackbox</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb87-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> axis <span class=\"op\" style=\"color: #666666;\">=</span> d3</a>",
            "<a class=\"sourceLine\" id=\"cb87-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        .<span class=\"at\" style=\"color: #7d9029;\">axisLeft</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb87-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        .<span class=\"at\" style=\"color: #7d9029;\">tickFormat</span>(d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"vs\" style=\"color: #4070a0;\">`</span><span class=\"sc\" style=\"color: #4070a0;\">${</span><span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">format</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;.2s&quot;</span>)(d)<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">`</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb87-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        .<span class=\"at\" style=\"color: #7d9029;\">scale</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">scale</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb87-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        .<span class=\"at\" style=\"color: #7d9029;\">ticks</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"va\" style=\"color: #19177c;\">data</span>.<span class=\"at\" style=\"color: #7d9029;\">length</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb87-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb87-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">select</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">anchorRef</span>.<span class=\"at\" style=\"color: #7d9029;\">current</span>).<span class=\"at\" style=\"color: #7d9029;\">call</span>(axis)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb87-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb87-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb87-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> Axis<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>We use D3’s <code style=\"white-space: pre-wrap;\">axisLeft</code> generator, configure its <code style=\"white-space: pre-wrap;\">tickFormat</code>, pass in a <code style=\"white-space: pre-wrap;\">scale</code> from our props, and specify how many <code style=\"white-space: pre-wrap;\">ticks</code> we want. To render, we <code style=\"white-space: pre-wrap;\">select</code> the anchor element from <code style=\"white-space: pre-wrap;\">D3blackbox</code> and <code style=\"white-space: pre-wrap;\">call</code> the axis generator on it.</p>",
            "<p>Yes, this <code style=\"white-space: pre-wrap;\">Axis</code> works just for our specific use case and that’s okay. No need to generalize your code until you know where else you’re using it.</p>",
            "<p>Remember the <a href=\"https://en.wikipedia.org/wiki/You_aren%27t_gonna_need_it\">YAGNI principle</a>.</p>",
            "<h3 id=\"add-axis-to-histogram\">Add Axis to Histogram</h3>",
            "<p>To render our new <code style=\"white-space: pre-wrap;\">Axis</code>, we add it to the <code style=\"white-space: pre-wrap;\">Histogram</code> component. It’s a two step process:</p>",
            "<ol type=\"1\">",
            "<li>Import <code style=\"white-space: pre-wrap;\">Axis</code> component</li>",
            "<li>Render it</li>",
            "</ol>",
            "<div class=\"sourceCode\" id=\"cb88\" data-caption=\"Import and render Axis\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb88-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Histogram/Histogram.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb88-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"op\" style=\"color: #666666;\">{</span> Component <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;react&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb88-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"im\">as</span> d3 <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;d3&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb88-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb88-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb88-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> Axis <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./Axis&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb88-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb88-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb88-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb88-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Histogram <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> Component <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb88-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb88-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb88-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> histogram<span class=\"op\" style=\"color: #666666;\">,</span> yScale <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb88-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y<span class=\"op\" style=\"color: #666666;\">,</span> data<span class=\"op\" style=\"color: #666666;\">,</span> axisMargin <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb88-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb88-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> bars <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">histogram</span>(data)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb88-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb88-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb88-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>g className<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;histogram&quot;</span> transform<span class=\"op\" style=\"color: #666666;\">={</span>translate<span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb88-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&lt;</span>g className<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;bars&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb88-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"va\" style=\"color: #19177c;\">bars</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">makeBar</span>)<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb88-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                &lt;/g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb88-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb88-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&lt;</span>Axis x<span class=\"op\" style=\"color: #666666;\">={</span>axisMargin<span class=\"dv\" style=\"color: #40a070;\">-3</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb88-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                      y<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb88-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                      data<span class=\"op\" style=\"color: #666666;\">={</span>bars<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb88-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                      scale<span class=\"op\" style=\"color: #666666;\">={</span>yScale<span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb88-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb88-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            &lt;/g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb88-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb88-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>We import our <code style=\"white-space: pre-wrap;\">Axis</code> and add it to the <code style=\"white-space: pre-wrap;\">render</code> method with some props. It takes an <code style=\"white-space: pre-wrap;\">x</code> and <code style=\"white-space: pre-wrap;\">y</code> coordinate, the <code style=\"white-space: pre-wrap;\">data</code>, and a <code style=\"white-space: pre-wrap;\">scale</code>.</p>",
            "<p>An axis appears.</p>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/basic-histogram.png\" alt=\"Basic histogram with axis\"><figcaption>Basic histogram with axis</figcaption>",
            "</figure>",
            "<p>If that didn’t work, try comparing your changes to this <a href=\"https://github.com/Swizec/react-d3-walkthrough-livecode/commit/477b88a584794c3e0ea8955bf8109a40b2a3b771\">diff on Github</a>.</p>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "Make it understandable with meta info",
      "lectures": [
        {
          "lectureTitle": "Add meta info",
          "lectureLines": [
            "<h1 id=\"make-it-understandable---meta-info\">Make it understandable - meta info</h1>",
            "<p>You’ve come so far! There’s a US map and a histogram. They’re blue and shiny and you look at them and you go <em>“Huh?”</em>.</p>",
            "<p>The key to a good data visualization is telling users what it means. An easy way to do that is a good title and description. Just tell them. The picture supports the words, the words explain the picture.</p>",
            "<p>Let’s add those words.</p>",
            "<p>We’re adding a dynamic title and description, and a median line on the histogram. The text is dynamic because we’re adding user controls later, and we want the pictures and the words to stay in sync.</p>",
            "<p>At the end of this section, you’ll have a full visualization of the shortened dataset.</p>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/dataviz-without-controls.png\" alt=\"Full visualization without user controls\"><figcaption>Full visualization without user controls</figcaption>",
            "</figure>"
          ]
        },
        {
          "lectureTitle": "Dynamic title",
          "lectureLines": [
            "<h2 id=\"dynamic-title\">Dynamic title</h2>",
            "<p>We begin with the title because it shows up first.</p>",
            "<p>We start with an import in <code style=\"white-space: pre-wrap;\">App.js</code> and add it to the render method. You know the drill 😄</p>",
            "<div class=\"sourceCode\" id=\"cb89\" data-caption=\"Adding Title to main App component\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb89-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/App.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> CountyMap <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./components/CountyMap&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> Histogram <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./components/Histogram&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">{</span> Title <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./components/Meta&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb89-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> App <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> Component <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    state <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">techSalaries</span><span class=\"op\" style=\"color: #666666;\">:</span> []<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">countyNames</span><span class=\"op\" style=\"color: #666666;\">:</span> []<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">medianIncomes</span><span class=\"op\" style=\"color: #666666;\">:</span> []<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">filteredBy</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">USstate</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;*&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">year</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;*&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">jobTitle</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;*&#39;</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb89-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb89-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> filteredBy <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ..</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb89-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>div className<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;App container&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&lt;</span>Title data<span class=\"op\" style=\"color: #666666;\">={</span>filteredSalaries<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                       filteredBy<span class=\"op\" style=\"color: #666666;\">={</span>filteredBy<span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb89-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        )</a>",
            "<a class=\"sourceLine\" id=\"cb89-36\" title=\"36\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb89-37\" title=\"37\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>Ok, I lied. We did a lot more than just imports and adding to render.</p>",
            "<p>We also set up the <code style=\"white-space: pre-wrap;\">App</code> component for future user-controlled data filtering. The <code style=\"white-space: pre-wrap;\">filteredBy</code> key in <code style=\"white-space: pre-wrap;\">state</code> tells us what the user is filtering by – 3 options: <code style=\"white-space: pre-wrap;\">USstate</code>, <code style=\"white-space: pre-wrap;\">year</code>, and <code style=\"white-space: pre-wrap;\">jobTitle</code>. We set them to “everything” by default.</p>",
            "<p>We added them now so that we can immediately write our <code style=\"white-space: pre-wrap;\">Title</code> component in a filterable way. No need to make changes later.</p>",
            "<p>As you can see, <code style=\"white-space: pre-wrap;\">Title</code> takes <code style=\"white-space: pre-wrap;\">data</code> and <code style=\"white-space: pre-wrap;\">filteredBy</code> props.</p>",
            "<h3 id=\"prep-meta-component\">Prep Meta component</h3>",
            "<p>Before we begin the <code style=\"white-space: pre-wrap;\">Title</code> component, there are a few things to take care of. Our meta components work together for a common purpose – showing meta data. Grouping them in a directory makes sense.</p>",
            "<p>We make a <code style=\"white-space: pre-wrap;\">components/Meta</code> directory and add an <code style=\"white-space: pre-wrap;\">index.js</code>. It makes importing easier.</p>",
            "<div class=\"sourceCode\" id=\"cb90\" data-caption=\"Meta index.js\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb90-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Meta/index.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb90-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"im\">default</span> <span class=\"im\">as</span> Title <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./Title&#39;</span></a>",
            "<a class=\"sourceLine\" id=\"cb90-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"im\">default</span> <span class=\"im\">as</span> Description <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./Description&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>We have to name our <code style=\"white-space: pre-wrap;\">Title</code> and <code style=\"white-space: pre-wrap;\">Description</code> re-exports because you can’t have two default exports.</p>",
            "<h4 id=\"get-the-usstatesmap-file\">Get the USStatesMap file</h4>",
            "<p>You need the <code style=\"white-space: pre-wrap;\">USStatesMap</code> file.</p>",
            "<p>It’s a big dictionary that translates US state codes to full names. You can <a href=\"https://github.com/Swizec/react-d3-walkthrough-livecode/raw/3b1052fe3f70ab12142e5aac684b95ed430b12b2/src/components/Meta/USStatesMap.js\">get it from Github</a> and save it as <code style=\"white-space: pre-wrap;\">components/Meta/USStatesMap.js</code>.</p>",
            "<p>We’ll use it when creating titles and descriptions.</p>",
            "<h3 id=\"implement-title\">Implement Title</h3>",
            "<p>We’re building two types of titles based on user selection. If both <code style=\"white-space: pre-wrap;\">years</code> and <code style=\"white-space: pre-wrap;\">US state</code> were selected, we return <code style=\"white-space: pre-wrap;\">In {US state}, the average {job title} paid ${mean}/year in {year}</code>. If not, we return <code style=\"white-space: pre-wrap;\">{job title} paid ${mean}/year in {state} in {year}</code>.</p>",
            "<p>I know, it’s confusing. They look like the same sentence turned around. Notice the <em>and</em>. First option when <em>both</em> are selected, second when either/or.</p>",
            "<p>We start with imports, a stub, and a default export.</p>",
            "<div class=\"sourceCode\" id=\"cb91\" data-caption=\"Title component stub\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb91-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Meta/Title.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb91-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"op\" style=\"color: #666666;\">{</span> Component <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;react&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb91-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">{</span> scaleLinear <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;d3-scale&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb91-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">{</span> mean <span class=\"im\">as</span> d3mean<span class=\"op\" style=\"color: #666666;\">,</span> extent <span class=\"im\">as</span> d3extent <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;d3-array&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb91-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb91-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> USStatesMap <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./USStatesMap&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb91-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb91-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Title <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> Component <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb91-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    get <span class=\"at\" style=\"color: #7d9029;\">yearsFragment</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb91-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb91-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb91-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    get <span class=\"at\" style=\"color: #7d9029;\">USstateFragment</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb91-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb91-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb91-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    get <span class=\"at\" style=\"color: #7d9029;\">jobTitleFragment</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb91-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb91-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb91-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    get <span class=\"at\" style=\"color: #7d9029;\">format</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb91-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb91-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb91-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb91-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb91-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb91-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb91-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> Title<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>We import only what we need from D3’s <code style=\"white-space: pre-wrap;\">d3-scale</code> and <code style=\"white-space: pre-wrap;\">d3-array</code> packages. I consider this best practice until you’re importing so much that it gets messy to look at.</p>",
            "<p>In the <code style=\"white-space: pre-wrap;\">Title</code> component, we have 4 getters and a render. Getters are ES6 functions that work like dynamic properties. You specify a function without arguments, and you use it without <code style=\"white-space: pre-wrap;\">()</code>. It’s neat.</p>",
            "<h4 id=\"the-getters\">The getters</h4>",
            "<ol type=\"1\">",
            "<li><code style=\"white-space: pre-wrap;\">yearsFragment</code> describes the selected year</li>",
            "<li><code style=\"white-space: pre-wrap;\">USstateFragment</code> describes the selected US state</li>",
            "<li><code style=\"white-space: pre-wrap;\">jobTitleFragment</code> describes the selected job title</li>",
            "<li><code style=\"white-space: pre-wrap;\">format</code> returns a number formatter</li>",
            "</ol>",
            "<p>We can implement <code style=\"white-space: pre-wrap;\">yearsFragment</code>, <code style=\"white-space: pre-wrap;\">USstateFragment</code>, and <code style=\"white-space: pre-wrap;\">format</code> in one code sample. They’re short.</p>",
            "<div class=\"sourceCode\" id=\"cb92\" data-caption=\"3 short getters in Title\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb92-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Meta/Title.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb92-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Title <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> Component <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb92-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    get <span class=\"at\" style=\"color: #7d9029;\">yearsFragment</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb92-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> year <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"va\" style=\"color: #19177c;\">filteredBy</span>.<span class=\"at\" style=\"color: #7d9029;\">year</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb92-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb92-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> year <span class=\"op\" style=\"color: #666666;\">===</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;*&#39;</span> <span class=\"op\" style=\"color: #666666;\">?</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;&quot;</span> : <span class=\"vs\" style=\"color: #4070a0;\">`in </span><span class=\"sc\" style=\"color: #4070a0;\">${</span>year<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">`</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb92-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb92-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb92-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">getteFragment</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb92-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> USstate <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"va\" style=\"color: #19177c;\">filteredBy</span>.<span class=\"at\" style=\"color: #7d9029;\">USstate</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb92-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb92-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> USstate <span class=\"op\" style=\"color: #666666;\">===</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;*&#39;</span> <span class=\"op\" style=\"color: #666666;\">?</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;&quot;</span> : USStatesMap[<span class=\"va\" style=\"color: #19177c;\">USstate</span>.<span class=\"at\" style=\"color: #7d9029;\">toUpperCase</span>()]<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb92-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb92-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb92-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb92-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb92-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    get <span class=\"at\" style=\"color: #7d9029;\">format</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb92-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"at\" style=\"color: #7d9029;\">scaleLinear</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb92-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                 .<span class=\"at\" style=\"color: #7d9029;\">domain</span>(<span class=\"at\" style=\"color: #7d9029;\">d3extent</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">data</span><span class=\"op\" style=\"color: #666666;\">,</span> d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">base_salary</span>))</a>",
            "<a class=\"sourceLine\" id=\"cb92-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                 .<span class=\"at\" style=\"color: #7d9029;\">tickFormat</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb92-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>In both <code style=\"white-space: pre-wrap;\">yearsFragment</code> and <code style=\"white-space: pre-wrap;\">USstateFragment</code>, we get the appropriate value from Title’s <code style=\"white-space: pre-wrap;\">filteredBy</code> prop, then return a string with the value or an empty string.</p>",
            "<p>We rely on D3’s built-in number formatters to build <code style=\"white-space: pre-wrap;\">format</code>. Linear scales have the one that turns <code style=\"white-space: pre-wrap;\">10000</code> into <code style=\"white-space: pre-wrap;\">10,000</code>. Tick formatters don’t work well without a <code style=\"white-space: pre-wrap;\">domain</code>, so we define it. We don’t need a range because we never use the scale itself.</p>",
            "<p><code style=\"white-space: pre-wrap;\">format</code> returns a function, which makes it a <a href=\"https://en.wikipedia.org/wiki/Higher-order_function\">higher order function</a>. Being a getter makes it really nice to use: <code style=\"white-space: pre-wrap;\">this.format()</code>. Looks just like a normal function call 😄</p>",
            "<p>The <code style=\"white-space: pre-wrap;\">jobTitleFragment</code> getter is conceptually no harder than <code style=\"white-space: pre-wrap;\">yearsFragment</code> and <code style=\"white-space: pre-wrap;\">USstateFragment</code>, but it comes with a few more conditionals.</p>",
            "<div class=\"sourceCode\" id=\"cb93\" data-caption=\"Title.jobTitleFragment\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb93-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Meta/Title.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb93-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb93-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Title <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> Component <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb93-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb93-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    get <span class=\"at\" style=\"color: #7d9029;\">jobTitleFragment</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb93-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> jobTitle<span class=\"op\" style=\"color: #666666;\">,</span> year <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">filteredBy</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb93-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> title <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb93-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb93-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (jobTitle <span class=\"op\" style=\"color: #666666;\">===</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;*&quot;</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb93-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (year <span class=\"op\" style=\"color: #666666;\">===</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;*&quot;</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb93-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                title <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;The average H1B in tech pays&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb93-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">else</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb93-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                title <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;The average tech H1B paid&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb93-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb93-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">else</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb93-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            title <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"vs\" style=\"color: #4070a0;\">`Software </span><span class=\"sc\" style=\"color: #4070a0;\">${</span>jobTitle<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">s on an H1B`</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb93-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (year <span class=\"op\" style=\"color: #666666;\">===</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;*&quot;</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb93-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                title <span class=\"op\" style=\"color: #666666;\">+=</span> <span class=\"st\" style=\"color: #4070a0;\">&quot; make&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb93-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">else</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb93-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                title <span class=\"op\" style=\"color: #666666;\">+=</span> <span class=\"st\" style=\"color: #4070a0;\">&quot; made&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb93-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb93-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb93-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb93-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> title<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb93-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb93-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb93-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>We’re dealing with the <code style=\"white-space: pre-wrap;\">(jobTitle, year)</code> combination. Each influences the other when building the fragment for a total 4 different options.</p>",
            "<h4 id=\"the-render\">The render</h4>",
            "<p>We put all this together in the <code style=\"white-space: pre-wrap;\">render</code> method. A conditional decides which of the two situations we’re in, and we return an <code style=\"white-space: pre-wrap;\">&lt;h2&gt;</code> tag with the right text.</p>",
            "<div class=\"sourceCode\" id=\"cb94\" data-caption=\"Title.render\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb94-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Meta/Title.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb94-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Title <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> Component <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb94-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb94-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb94-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> mean <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">format</span>(<span class=\"at\" style=\"color: #7d9029;\">d3mean</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">data</span><span class=\"op\" style=\"color: #666666;\">,</span> d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">base_salary</span>))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb94-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb94-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> title<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb94-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb94-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">yearsFragment</span> <span class=\"op\" style=\"color: #666666;\">&amp;&amp;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">USstateFragment</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb94-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            title <span class=\"op\" style=\"color: #666666;\">=</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb94-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&lt;</span>h2<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb94-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    In <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">USstateFragment</span><span class=\"op\" style=\"color: #666666;\">},</span> <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">jobTitleFragment</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb94-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    $<span class=\"op\" style=\"color: #666666;\">{</span>mean<span class=\"op\" style=\"color: #666666;\">}</span><span class=\"ss\" style=\"color: #bb6688;\">/year {this.yearsFragment}</span></a>",
            "<a class=\"sourceLine\" id=\"cb94-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"ss\" style=\"color: #bb6688;\">                &lt;/h2</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb94-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb94-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span><span class=\"cf\" style=\"color: #007020; font-weight: bold;\">else</span><span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb94-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            title <span class=\"op\" style=\"color: #666666;\">=</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb94-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&lt;</span>h2<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb94-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">jobTitleFragment</span><span class=\"op\" style=\"color: #666666;\">}</span> $<span class=\"op\" style=\"color: #666666;\">{</span>mean<span class=\"op\" style=\"color: #666666;\">}</span><span class=\"ss\" style=\"color: #bb6688;\">/year</span></a>",
            "<a class=\"sourceLine\" id=\"cb94-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"ss\" style=\"color: #bb6688;\">                    {this.USstateFragment </span><span class=\"sc\" style=\"color: #4070a0;\">?</span><span class=\"ss\" style=\"color: #bb6688;\"> `in ${this.stateFragment}` : &#39;&#39;}</span></a>",
            "<a class=\"sourceLine\" id=\"cb94-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"ss\" style=\"color: #bb6688;\">                    {this.yearsFragment}</span></a>",
            "<a class=\"sourceLine\" id=\"cb94-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"ss\" style=\"color: #bb6688;\">                &lt;/h2</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb94-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb94-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb94-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb94-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> title<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb94-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb94-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>Calculate the mean value using <code style=\"white-space: pre-wrap;\">d3.mean</code> with a value accessor, turn it into a pretty number with <code style=\"white-space: pre-wrap;\">this.format</code>, then use one of two string patterns to make a <code style=\"white-space: pre-wrap;\">title</code>.</p>",
            "<p>And a title appears.</p>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/dataviz-with-title.png\" alt=\"Dataviz with title\"><figcaption>Dataviz with title</figcaption>",
            "</figure>",
            "<p>If it doesn’t, consult <a href=\"https://github.com/Swizec/react-d3-walkthrough-livecode/commit/781beba67e7b76935896fa7a3dfd4802a4d81993\">this diff on Github</a>.</p>"
          ]
        },
        {
          "lectureTitle": "Dynamic description",
          "lectureLines": [
            "<h2 id=\"dynamic-description\">Dynamic description</h2>",
            "<p>You know what? The dynamic description component is pretty much the same as the title. It’s just longer and more complex and uses more code. It’s interesting, but not super relevant to the topic of this book.</p>",
            "<p>So rather than explain it all here, I’m going to give you a link to the <a href=\"https://github.com/Swizec/react-d3-walkthrough-livecode/commit/3b1052fe3f70ab12142e5aac684b95ed430b12b2\">diff on Github</a></p>",
            "<p>We use the same approach as before:</p>",
            "<ol type=\"1\">",
            "<li>Add imports in <code style=\"white-space: pre-wrap;\">App.js</code></li>",
            "<li>Add component to <code style=\"white-space: pre-wrap;\">App</code> render</li>",
            "<li>Add re-export to <code style=\"white-space: pre-wrap;\">components/Meta/index.js</code></li>",
            "<li>Implement component in <code style=\"white-space: pre-wrap;\">components/Meta/Description.js</code></li>",
            "<li>Use getters for sentence fragments</li>",
            "<li>Play with conditionals to construct different sentences</li>",
            "</ol>",
            "<p>142 lines of mundane code.</p>",
            "<p>All the interesting complexity goes into finding the richest city and county. That part looks like this:</p>",
            "<div class=\"sourceCode\" id=\"cb95\" data-caption=\"Richest county calculation\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb95-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Meta/Description.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb95-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">get <span class=\"at\" style=\"color: #7d9029;\">countyFragment</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb95-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> byCounty <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">_</span>.<span class=\"at\" style=\"color: #7d9029;\">groupBy</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">data</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;countyID&#39;</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb95-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        medians <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">medianIncomesByCounty</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb95-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb95-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> ordered <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">_</span>.<span class=\"at\" style=\"color: #7d9029;\">sortBy</span>(</a>",
            "<a class=\"sourceLine\" id=\"cb95-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"va\" style=\"color: #19177c;\">_</span>.<span class=\"at\" style=\"color: #7d9029;\">keys</span>(byCounty)</a>",
            "<a class=\"sourceLine\" id=\"cb95-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">       .<span class=\"at\" style=\"color: #7d9029;\">map</span>(county <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> byCounty[county])</a>",
            "<a class=\"sourceLine\" id=\"cb95-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">       .<span class=\"at\" style=\"color: #7d9029;\">filter</span>(d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">length</span>/<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"va\" style=\"color: #19177c;\">data</span>.<span class=\"at\" style=\"color: #7d9029;\">length</span> <span class=\"op\" style=\"color: #666666;\">&gt;</span> <span class=\"fl\" style=\"color: #40a070;\">0.01</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb95-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      items <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"at\" style=\"color: #7d9029;\">d3mean</span>(items<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb95-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                      d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">base_salary</span>) <span class=\"op\" style=\"color: #666666;\">-</span> medians[items[<span class=\"dv\" style=\"color: #40a070;\">0</span>].<span class=\"at\" style=\"color: #7d9029;\">countyID</span>][<span class=\"dv\" style=\"color: #40a070;\">0</span>].<span class=\"at\" style=\"color: #7d9029;\">medianIncome</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb95-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb95-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> best <span class=\"op\" style=\"color: #666666;\">=</span> ordered[<span class=\"va\" style=\"color: #19177c;\">ordered</span>.<span class=\"at\" style=\"color: #7d9029;\">length</span><span class=\"dv\" style=\"color: #40a070;\">-1</span>]<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb95-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      countyMedian <span class=\"op\" style=\"color: #666666;\">=</span> medians[best[<span class=\"dv\" style=\"color: #40a070;\">0</span>].<span class=\"at\" style=\"color: #7d9029;\">countyID</span>][<span class=\"dv\" style=\"color: #40a070;\">0</span>].<span class=\"at\" style=\"color: #7d9029;\">medianIncome</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb95-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb95-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb95-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>We group the dataset by county, then sort counties by their income delta. We look only at counties that are bigger than 1% of the entire dataset. And we define income delta as the difference between a county’s median household income and the median tech salary in our dataset.</p>",
            "<p>This code is not super efficient, but it gets the job done. We could optimize by just looking for the max value, for example.</p>",
            "<p>Similar code handles finding the best city.</p>",
            "<h3 id=\"render-the-description\">Render the description</h3>",
            "<p>I recommend copying the <a href=\"https://github.com/Swizec/react-d3-walkthrough-livecode/commit/3b1052fe3f70ab12142e5aac684b95ed430b12b2\"><code style=\"white-space: pre-wrap;\">Description</code> component from GitHub</a>. Most of it has little to do with React and data visualization. It’s all about combining sentence fragments based on props.</p>",
            "<p>You then render the Description like this:</p>",
            "<div class=\"sourceCode\" id=\"cb96\" data-caption=\"Render Description component\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb96-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/App.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb96-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb96-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">{</span> Title<span class=\"op\" style=\"color: #666666;\">,</span> Description <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;./components/Meta&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb96-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb96-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ..</span></a>",
            "<a class=\"sourceLine\" id=\"cb96-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb96-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">&lt;</span>Description</a>",
            "<a class=\"sourceLine\" id=\"cb96-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    data<span class=\"op\" style=\"color: #666666;\">={</span>filteredSalaries<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb96-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    allData<span class=\"op\" style=\"color: #666666;\">={</span>techSalaries<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb96-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    filteredBy<span class=\"op\" style=\"color: #666666;\">={</span>filteredBy<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb96-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    medianIncomesByCounty<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">medianIncomesByCounty</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb96-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">/&gt;</a></code></pre></div>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/dataviz-with-description.png\" alt=\"Dataviz with Title and Description\"><figcaption>Dataviz with Title and Description</figcaption>",
            "</figure>"
          ]
        },
        {
          "lectureTitle": "Overlay a median household line",
          "lectureLines": [
            "<h2 id=\"overlay-a-median-household-line\">Overlay a median household line</h2>",
            "<p>Here’s a more interesting component: the median dotted line. It shows a direct comparison between the histogram’s distribution and the median household income in an area. I’m not sure people understand it at a glance, but I think it’s cool.</p>",
            "<p>We’re using a quick approach where everything fits into a functional React component. It’s great for small components like this.</p>",
            "<h3 id=\"step-1-app.js\">Step 1: App.js</h3>",
            "<p>Inside <code style=\"white-space: pre-wrap;\">src/App.js</code>, we first have to add an import, then extract the median household value from state, and in the end, add <code style=\"white-space: pre-wrap;\">MedianLine</code> to the render method.</p>",
            "<p>Let’s see if we can do it in a single code block 😄</p>",
            "<div class=\"sourceCode\" id=\"cb97\" data-caption=\"Adding MedianLine to App.js\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb97-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/App.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> Histogram <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./components/Histogram&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">{</span> Title<span class=\"op\" style=\"color: #666666;\">,</span> Description<span class=\"op\" style=\"color: #666666;\">,</span> GraphDescription <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./components/Meta&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> MedianLine <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./components/MedianLine&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb97-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> App <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> Component <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> zoom <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">null</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            medianHousehold <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">medianIncomesByUSState</span>[<span class=\"st\" style=\"color: #4070a0;\">&#39;US&#39;</span>][<span class=\"dv\" style=\"color: #40a070;\">0</span>]</a>",
            "<a class=\"sourceLine\" id=\"cb97-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                                  .<span class=\"at\" style=\"color: #7d9029;\">medianIncome</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb97-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb97-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>svg width<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;1100&quot;</span> height<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;500&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&lt;</span>CountyMap <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ... /&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&lt;</span>Histogram <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ... /&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&lt;</span>MedianLine data<span class=\"op\" style=\"color: #666666;\">={</span>filteredSalaries<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                            x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">500</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                            y<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">10</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                            width<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">600</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                            height<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">500</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                            bottomMargin<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">5</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                            median<span class=\"op\" style=\"color: #666666;\">={</span>medianHousehold<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                            value<span class=\"op\" style=\"color: #666666;\">={</span>d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">base_salary</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb97-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            &lt;/svg<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        )</a>",
            "<a class=\"sourceLine\" id=\"cb97-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb97-36\" title=\"36\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>You probably don’t remember <code style=\"white-space: pre-wrap;\">medianIncomesByUSState</code> anymore. We set it up way back when <a href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6888897#tie-datasets-together\">tying datasets together</a>. It groups our salary data by US state.</p>",
            "<p>See, using good names helps 😄</p>",
            "<p>When rendering <code style=\"white-space: pre-wrap;\">MedianLine</code>, we give it sizing and positioning props, the dataset, a <code style=\"white-space: pre-wrap;\">value</code> accessor, and the median value to show. We could make it smart enough to calculate the median, but the added flexibility of a prop felt right.</p>",
            "<h3 id=\"step-2-medianline\">Step 2: MedianLine</h3>",
            "<p>The <code style=\"white-space: pre-wrap;\">MedianLine</code> component looks similar to what you’ve seen so far. Some imports, a <code style=\"white-space: pre-wrap;\">constructor</code> that sets up D3 objects, an <code style=\"white-space: pre-wrap;\">updateD3</code> method that keeps them in sync, and a <code style=\"white-space: pre-wrap;\">render</code> method that outputs SVG.</p>",
            "<div class=\"sourceCode\" id=\"cb98\" data-caption=\"MedianLine component stub\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb98-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/MedianLine.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb98-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb98-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;react&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb98-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"im\">as</span> d3 <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;d3&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb98-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb98-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> MedianLine <span class=\"op\" style=\"color: #666666;\">=</span> (<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb98-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    data<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb98-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    value<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb98-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    width<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb98-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    height<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb98-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    x<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb98-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    y<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb98-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    bottomMargin<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb98-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    median</a>",
            "<a class=\"sourceLine\" id=\"cb98-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb98-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb98-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb98-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb98-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> MedianLine<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>We have some imports, a functional <code style=\"white-space: pre-wrap;\">MedianLine</code> component that takes our props, and an export. It should cause an error because it’s not returning anything.</p>",
            "<p>Everything we need to render the line, fits into this function.</p>",
            "<div class=\"sourceCode\" id=\"cb99\" data-caption=\"MedianLine render\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb99-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/MedianLine.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb99-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb99-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> MedianLine <span class=\"op\" style=\"color: #666666;\">=</span> (<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb99-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb99-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb99-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> yScale <span class=\"op\" style=\"color: #666666;\">=</span> d3</a>",
            "<a class=\"sourceLine\" id=\"cb99-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            .<span class=\"at\" style=\"color: #7d9029;\">scaleLinear</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb99-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            .<span class=\"at\" style=\"color: #7d9029;\">domain</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">max</span>(data<span class=\"op\" style=\"color: #666666;\">,</span> value)])</a>",
            "<a class=\"sourceLine\" id=\"cb99-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            .<span class=\"at\" style=\"color: #7d9029;\">range</span>([height <span class=\"op\" style=\"color: #666666;\">-</span> y <span class=\"op\" style=\"color: #666666;\">-</span> bottomMargin<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">0</span>])<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb99-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        line <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">line</span>()([[<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">5</span>]<span class=\"op\" style=\"color: #666666;\">,</span> [width<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">5</span>]])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb99-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb99-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> medianValue <span class=\"op\" style=\"color: #666666;\">=</span> median <span class=\"op\" style=\"color: #666666;\">||</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">median</span>(data<span class=\"op\" style=\"color: #666666;\">,</span> value)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb99-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb99-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> translate <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"vs\" style=\"color: #4070a0;\">`translate(</span><span class=\"sc\" style=\"color: #4070a0;\">${</span>x<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">, </span><span class=\"sc\" style=\"color: #4070a0;\">${</span><span class=\"at\" style=\"color: #7d9029;\">yScale</span>(medianValue)<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">)`</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb99-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        medianLabel <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"vs\" style=\"color: #4070a0;\">`Median Household: $</span><span class=\"sc\" style=\"color: #4070a0;\">${</span><span class=\"va\" style=\"color: #19177c;\">yScale</span>.<span class=\"at\" style=\"color: #7d9029;\">tickFormat</span>()(median)<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">`</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb99-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb99-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb99-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>g className<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;mean&quot;</span> transform<span class=\"op\" style=\"color: #666666;\">={</span>translate<span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb99-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>text</a>",
            "<a class=\"sourceLine\" id=\"cb99-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                x<span class=\"op\" style=\"color: #666666;\">={</span>width <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"dv\" style=\"color: #40a070;\">5</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb99-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                y<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;0&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb99-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                textAnchor<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;end&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb99-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                style<span class=\"op\" style=\"color: #666666;\">={{</span> <span class=\"dt\">background</span><span class=\"op\">:</span> <span class=\"st\">&quot;purple&quot;</span> <span class=\"op\">}}</span></a>",
            "<a class=\"sourceLine\" id=\"cb99-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb99-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">{</span>medianLabel<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb99-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            &lt;/text<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb99-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>path d<span class=\"op\" style=\"color: #666666;\">={</span>line<span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb99-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        &lt;/g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb99-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb99-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">};</span></a></code></pre></div>",
            "<p>We start with a scale for vertical positioning – <code style=\"white-space: pre-wrap;\">yScale</code>. It’s linear, takes values from <code style=\"white-space: pre-wrap;\">0</code> to <code style=\"white-space: pre-wrap;\">max</code>, and translates them to pixels less some margin. For the <code style=\"white-space: pre-wrap;\">medianValue</code>, we use props, or calculate our own, if needed. Just like I promised.</p>",
            "<p>A <code style=\"white-space: pre-wrap;\">translate</code> SVG transform helps us position our line and label. We use it all to return a <code style=\"white-space: pre-wrap;\">&lt;g&gt;</code> grouping element containing a <code style=\"white-space: pre-wrap;\">&lt;text&gt;</code> for our label, and a <code style=\"white-space: pre-wrap;\">&lt;path&gt;</code> for the line.</p>",
            "<p>Building the <code style=\"white-space: pre-wrap;\">d</code> attribute for the path, that’s interesting. We use a <code style=\"white-space: pre-wrap;\">line</code> generator from D3.</p>",
            "<div class=\"sourceCode\" id=\"cb100\" data-caption=\"Line generator\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb100-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">line <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">line</span>()([[<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">5</span>]<span class=\"op\" style=\"color: #666666;\">,</span> [width<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">5</span>]])<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>It comes from the <a href=\"https://github.com/d3/d3-shape#lines\">d3-shape</a> package and generates splines, or polylines. By default, it takes an array of points and builds a line through all of them. A line from <code style=\"white-space: pre-wrap;\">[0, 5]</code> to <code style=\"white-space: pre-wrap;\">[width, 5]</code> in our case.</p>",
            "<p>That makes it span the entire width and leaves 5px for the label. We’re using a <code style=\"white-space: pre-wrap;\">transform</code> on the entire group to vertically position the final element.</p>",
            "<p>Remember, we already styled <code style=\"white-space: pre-wrap;\">medianLine</code> when we built <a href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6888921#histogram-css\">histogram styles</a> earlier.</p>",
            "<div class=\"sourceCode\" id=\"cb101\" data-caption=\"Histogram css\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode css\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode css\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb101-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"fu\" style=\"color: #06287e;\">.mean</span> text {</a>",
            "<a class=\"sourceLine\" id=\"cb101-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">font</span>: <span class=\"dv\" style=\"color: #40a070;\">11</span><span class=\"dt\" style=\"color: #902000;\">px</span> <span class=\"dv\" style=\"color: #40a070;\">sans-serif</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb101-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">fill</span>: <span class=\"cn\" style=\"color: #880000;\">grey</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb101-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">}</a>",
            "<a class=\"sourceLine\" id=\"cb101-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb101-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"fu\" style=\"color: #06287e;\">.mean</span> path {</a>",
            "<a class=\"sourceLine\" id=\"cb101-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    stroke-dasharray: <span class=\"dv\" style=\"color: #40a070;\">3</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb101-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    stroke: <span class=\"cn\" style=\"color: #880000;\">grey</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb101-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    stroke-width: <span class=\"dv\" style=\"color: #40a070;\">1</span><span class=\"dt\" style=\"color: #902000;\">px</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb101-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">}</a></code></pre></div>",
            "<p>The <code style=\"white-space: pre-wrap;\">stroke-dasharray</code> is what makes it dashed. <code style=\"white-space: pre-wrap;\">3</code> means each <code style=\"white-space: pre-wrap;\">3px</code> dash is followed by a <code style=\"white-space: pre-wrap;\">3px</code> blank. You can use <a href=\"https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-dasharray\">any pattern you like</a>.</p>",
            "<p>You should see a median household salary line overlaid on your histogram.</p>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/dataviz-with-everything.png\" alt=\"Median line over histogram\"><figcaption>Median line over histogram</figcaption>",
            "</figure>",
            "<p>Almost everyone in tech makes more than an entire median household. Crazy, huh? I think it is.</p>",
            "<p>If that didn’t work, consult the <a href=\"https://github.com/Swizec/react-d3-walkthrough-livecode/commit/52b684b6441b491557a2623471cdf946c54c8959\">diff on Github</a>.</p>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "Add user controls for exploration",
      "lectures": [
        {
          "lectureTitle": "Add user controls for data slicing and dicing",
          "lectureLines": [
            "<h1 id=\"user-controls\">Add user controls for data slicing and dicing</h1>",
            "<p>Now comes the fun part. All that extra effort we put into making our components aware of filtering, and it all comes down to this: User controls.</p>",
            "<p>Here’s what we’re building:</p>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/controls.png\" alt=\"User controlled filters\"><figcaption>User controlled filters</figcaption>",
            "</figure>",
            "<p>It’s a set of filters for users to slice and dice our visualization. The shortened dataset gives you 2 years, 12 job titles, and 50 US states. You’ll get 5+ years and many more job titles with the full dataset.</p>",
            "<p>We’re using the <a href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6887770#basic-architecture\">architecture we discussed</a> earlier to make it work. Clicking buttons updates a filter function and communicates it all the way up to the <code style=\"white-space: pre-wrap;\">App</code> component. <code style=\"white-space: pre-wrap;\">App</code> then uses it to update <code style=\"white-space: pre-wrap;\">this.state.filteredSalaries</code>, which triggers a re-render and updates our dataviz.</p>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/architecture_callbacks.png\" alt=\"Architecture sketch\"><figcaption>Architecture sketch</figcaption>",
            "</figure>",
            "<p>We’re building controls in 4 steps, top to bottom:</p>",
            "<ol type=\"1\">",
            "<li>Update <code style=\"white-space: pre-wrap;\">App.js</code> with filtering and a <code style=\"white-space: pre-wrap;\">&lt;Controls&gt;</code> render</li>",
            "<li>Build a <code style=\"white-space: pre-wrap;\">Controls</code> component, which builds the filter based on inputs</li>",
            "<li>Build a <code style=\"white-space: pre-wrap;\">ControlRow</code> component, which handles a row of buttons</li>",
            "<li>Build a <code style=\"white-space: pre-wrap;\">Toggle</code> component, which is a button</li>",
            "</ol>",
            "<p>We’ll go through the files linearly. That makes them easier for me to explain and easier for you to understand, but that also means there’s going to be a long period where all you’re seeing is an error like this:</p>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/controls-error.png\" alt=\"Controls error during coding\"><figcaption>Controls error during coding</figcaption>",
            "</figure>",
            "<p>If you want to see what’s up during this process, remove an import or two and maybe a thing from render. For instance, it’s complaining about <code style=\"white-space: pre-wrap;\">ControlRow</code> in this screenshot. Remove the <code style=\"white-space: pre-wrap;\">ControlRow</code> import on top and delete <code style=\"white-space: pre-wrap;\">&lt;ControlRow ... /&gt;</code> from render. The error goes away, and you see what you’re doing.</p>"
          ]
        },
        {
          "lectureTitle": "Step 1: Update App.js",
          "lectureLines": [
            "<h2 id=\"step-1-update-app.js\">Step 1: Update App.js</h2>",
            "<p>All right, you know the drill. Add imports, tweak some things, add to render. We have to import <code style=\"white-space: pre-wrap;\">Controls</code>, set up filtering, update the map’s <code style=\"white-space: pre-wrap;\">zoom</code> prop, and render a white rectangle and <code style=\"white-space: pre-wrap;\">Controls</code>.</p>",
            "<p>The white rectangle makes it so the zoomed-in map doesn’t cover up the histogram. I’ll explain when we get there.</p>",
            "<div class=\"sourceCode\" id=\"cb102\" data-caption=\"Imports and filter updates in App.js\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb102-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/App.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> MedianLine <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./components/MedianLine&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb102-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> Controls <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./components/Controls&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb102-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> App <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    state <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">medianIncomes</span><span class=\"op\" style=\"color: #666666;\">:</span> []<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">salariesFilter</span><span class=\"op\" style=\"color: #666666;\">:</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">true</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">filteredBy</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb102-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb102-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    updateDataFilter <span class=\"op\" style=\"color: #666666;\">=</span> (filter<span class=\"op\" style=\"color: #666666;\">,</span> filteredBy) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">setState</span>(<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">salariesFilter</span><span class=\"op\" style=\"color: #666666;\">:</span> filter<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">filteredBy</span><span class=\"op\" style=\"color: #666666;\">:</span> filteredBy</a>",
            "<a class=\"sourceLine\" id=\"cb102-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb102-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb102-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>We import the <code style=\"white-space: pre-wrap;\">Controls</code> component and add a default <code style=\"white-space: pre-wrap;\">salariesFilter</code> function to <code style=\"white-space: pre-wrap;\">this.state</code>. The <code style=\"white-space: pre-wrap;\">updateDataFilter</code> method passes the filter function and <code style=\"white-space: pre-wrap;\">filteredBy</code> dictionary from arguments to App state. We’ll use it as a callback in <code style=\"white-space: pre-wrap;\">Controls</code>.</p>",
            "<p>The rest of filtering setup happens in the render method.</p>",
            "<div class=\"sourceCode\" id=\"cb103\" data-caption=\"Filtering data and updating map zoom in App render\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb103-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/App.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb103-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> App <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb103-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb103-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb103-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb103-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb103-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Delete the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb103-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> filteredSalaries <span class=\"op\" style=\"color: #666666;\">=</span> techSalaries</a>",
            "<a class=\"sourceLine\" id=\"cb103-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb103-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb103-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> filteredSalaries <span class=\"op\" style=\"color: #666666;\">=</span> techSalaries</a>",
            "<a class=\"sourceLine\" id=\"cb103-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                                     .<span class=\"at\" style=\"color: #7d9029;\">filter</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">salariesFilter</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb103-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb103-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb103-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb103-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb103-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> zoom <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">null</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb103-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            medianHousehold <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb103-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb103-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (<span class=\"va\" style=\"color: #19177c;\">filteredBy</span>.<span class=\"at\" style=\"color: #7d9029;\">USstate</span> <span class=\"op\" style=\"color: #666666;\">!==</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;*&#39;</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb103-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            zoom <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"va\" style=\"color: #19177c;\">filteredBy</span>.<span class=\"at\" style=\"color: #7d9029;\">USstate</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb103-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            medianHousehold <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">mean</span>(medianIncomesByUSState[zoom]<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb103-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                                      d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">medianIncome</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb103-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb103-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb103-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb103-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb103-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb103-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>We add a <code style=\"white-space: pre-wrap;\">.filter</code> call to <code style=\"white-space: pre-wrap;\">filteredSalaries</code>, which uses our <code style=\"white-space: pre-wrap;\">salariesFilter</code> method to throw out anything that doesn’t fit. Then we set up <code style=\"white-space: pre-wrap;\">zoom</code>, if a US state was selected.</p>",
            "<p>We built the <code style=\"white-space: pre-wrap;\">CountyMap</code> component to focus on a given US state. Finding the centroid of a polygon, re-centering the map, and increasing the sizing factor. It creates a nice zoom effect.</p>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/zoom-effect.png\" alt=\"Zoom effect\"><figcaption>Zoom effect</figcaption>",
            "</figure>",
            "<p>And here’s the downside of this approach. SVG doesn’t know about element boundaries. It just renders stuff.</p>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/zoom-without-rectangle.png\" alt=\"Zoom without white rectangle\"><figcaption>Zoom without white rectangle</figcaption>",
            "</figure>",
            "<p>See, it goes under the histogram. Let’s fix that and add the <code style=\"white-space: pre-wrap;\">Controls</code> render while we’re at it.</p>",
            "<div class=\"sourceCode\" id=\"cb104\" data-caption=\"Add opaque background to histogram\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb104-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/App.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb104-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> App <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb104-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb104-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb104-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb104-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb104-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb104-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb104-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>div <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">//...&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb104-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&lt;</span>svg <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">//...&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb104-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"op\" style=\"color: #666666;\">&lt;</span>CountyMap <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">//... /&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb104-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb104-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb104-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"op\" style=\"color: #666666;\">&lt;</span>rect x<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;500&quot;</span> y<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;0&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb104-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                          width<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;600&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb104-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                          height<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;500&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb104-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                          style<span class=\"op\" style=\"color: #666666;\">={{</span><span class=\"dt\">fill</span><span class=\"op\">:</span> <span class=\"st\">&#39;white&#39;</span><span class=\"op\">}}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb104-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb104-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb104-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"op\" style=\"color: #666666;\">&lt;</span>Histogram <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">//... /&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb104-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"op\" style=\"color: #666666;\">&lt;</span>MedianLine <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">//.. /&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb104-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                &lt;/svg<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb104-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb104-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb104-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&lt;</span>Controls data<span class=\"op\" style=\"color: #666666;\">={</span>techSalaries<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb104-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                          updateDataFilter<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">updateDataFilter</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb104-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb104-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb104-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        )</a>",
            "<a class=\"sourceLine\" id=\"cb104-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb104-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>Rectangle, <code style=\"white-space: pre-wrap;\">500</code> to the right, <code style=\"white-space: pre-wrap;\">0</code> from top, <code style=\"white-space: pre-wrap;\">600</code> wide and <code style=\"white-space: pre-wrap;\">500</code> tall, with a white background. Gives the histogram an opaque background, so it doesn’t matter what the map is doing.</p>",
            "<p>We render the <code style=\"white-space: pre-wrap;\">Controls</code> component just after <code style=\"white-space: pre-wrap;\">&lt;/svg&gt;</code> because it’s not an SVG component – it uses normal HTML. Unlike other components, it needs our entire dataset as <code style=\"white-space: pre-wrap;\">data</code>. We use the <code style=\"white-space: pre-wrap;\">updateDataFilter</code> prop to say which callback function it should call when a new filter is ready.</p>",
            "<p>If this seems roundabout … I’ve seen worse. The callbacks approach makes our app easier to componentize and keeps the code relatively unmessy. Imagine putting everything we’ve done so far in <code style=\"white-space: pre-wrap;\">App</code>! 😆</p>"
          ]
        },
        {
          "lectureTitle": "Step 2: Build Controls component",
          "lectureLines": [
            "<h2 id=\"step-2-build-controls-component\">Step 2: Build Controls component</h2>",
            "<p>The <code style=\"white-space: pre-wrap;\">Controls</code> component builds our filter function and <code style=\"white-space: pre-wrap;\">filteredBy</code> dictionary based on user choices.</p>",
            "<p><code style=\"white-space: pre-wrap;\">Controls</code> renders 3 rows of buttons and builds filtering out of the choice made on each row. That makes <code style=\"white-space: pre-wrap;\">Controls</code> kind of repetitive, but that’s okay.</p>",
            "<p>To keep this book shorter, we’re going to build everything for a <code style=\"white-space: pre-wrap;\">year</code> filter first. Then I’ll explain how to add <code style=\"white-space: pre-wrap;\">USstate</code> and <code style=\"white-space: pre-wrap;\">jobTitle</code> filters on a higher level. Once you have one working, the rest follows that same pattern.</p>",
            "<p>Make a <code style=\"white-space: pre-wrap;\">Controls</code> directory in <code style=\"white-space: pre-wrap;\">src/components/</code> and let’s begin. The main <code style=\"white-space: pre-wrap;\">Controls</code> component goes in your <code style=\"white-space: pre-wrap;\">index.js</code> file.</p>",
            "<h3 id=\"stub-controls\">Stub Controls</h3>",
            "<div class=\"sourceCode\" id=\"cb105\" data-caption=\"Controls stubbed for year filter\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb105-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Controls/index.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb105-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;react&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb105-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb105-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> ControlRow <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;./ControlRow&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb105-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb105-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Controls <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb105-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    state <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb105-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">yearFilter</span><span class=\"op\" style=\"color: #666666;\">:</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">true</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb105-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">year</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;*&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb105-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb105-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb105-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">componentDidMount</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb105-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb105-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb105-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb105-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    updateYearFilter <span class=\"op\" style=\"color: #666666;\">=</span> (year<span class=\"op\" style=\"color: #666666;\">,</span> reset) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb105-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> filter <span class=\"op\" style=\"color: #666666;\">=</span> d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"va\" style=\"color: #19177c;\">submit_date</span>.<span class=\"at\" style=\"color: #7d9029;\">getFullYear</span>() <span class=\"op\" style=\"color: #666666;\">===</span> year<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb105-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb105-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (reset <span class=\"op\" style=\"color: #666666;\">||</span> <span class=\"op\" style=\"color: #666666;\">!</span>year) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb105-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            filter <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">true</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb105-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            year <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;*&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb105-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb105-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb105-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">setState</span>(</a>",
            "<a class=\"sourceLine\" id=\"cb105-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb105-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">yearFilter</span><span class=\"op\" style=\"color: #666666;\">:</span> filter<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb105-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">year</span><span class=\"op\" style=\"color: #666666;\">:</span> year</a>",
            "<a class=\"sourceLine\" id=\"cb105-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb105-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">reportUpdateUpTheChain</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb105-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb105-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb105-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb105-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb105-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> data <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb105-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb105-36\" title=\"36\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb105-37\" title=\"37\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb105-38\" title=\"38\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> Controls<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>We start with some imports and a <code style=\"white-space: pre-wrap;\">Controls</code> class-based component. Inside, we define default <code style=\"white-space: pre-wrap;\">state</code> with an always-true <code style=\"white-space: pre-wrap;\">yearFilter</code> and an asterisk for <code style=\"white-space: pre-wrap;\">year</code>.</p>",
            "<p>We also need an <code style=\"white-space: pre-wrap;\">updateYearFilter</code> function, which we’ll use to update the filter, a <code style=\"white-space: pre-wrap;\">reportUpdateUpTheChain</code> function, and a <code style=\"white-space: pre-wrap;\">render</code> method. We’re using <code style=\"white-space: pre-wrap;\">reportUpdateUpTheChain</code> to bubble updates to our parent component. It’s a simpler alternative to using React Context or a state management library.</p>",
            "<h3 id=\"filter-logic\">Filter logic</h3>",
            "<div class=\"sourceCode\" id=\"cb106\" data-caption=\"year filtering logic in Controls\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb106-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Controls/index.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb106-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Controls <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb106-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb106-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    updateYearFilter <span class=\"op\" style=\"color: #666666;\">=</span> (year<span class=\"op\" style=\"color: #666666;\">,</span> reset) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb106-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> filter <span class=\"op\" style=\"color: #666666;\">=</span> d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"va\" style=\"color: #19177c;\">submit_date</span>.<span class=\"at\" style=\"color: #7d9029;\">getFullYear</span>() <span class=\"op\" style=\"color: #666666;\">===</span> year<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb106-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb106-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (reset <span class=\"op\" style=\"color: #666666;\">||</span> <span class=\"op\" style=\"color: #666666;\">!</span>year) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb106-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            filter <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">true</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb106-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            year <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;*&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb106-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb106-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb106-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">setState</span>(</a>",
            "<a class=\"sourceLine\" id=\"cb106-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb106-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">yearFilter</span><span class=\"op\" style=\"color: #666666;\">:</span> filter<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb106-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">year</span><span class=\"op\" style=\"color: #666666;\">:</span> year</a>",
            "<a class=\"sourceLine\" id=\"cb106-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb106-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">reportUpdateUpTheChain</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb106-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb106-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb106-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p><code style=\"white-space: pre-wrap;\">updateYearFilter</code> is a callback we pass into <code style=\"white-space: pre-wrap;\">ControlRow</code>. When a user picks a year, their action triggers this function.</p>",
            "<p>When that happens, we create a new partial filter function. The <code style=\"white-space: pre-wrap;\">App</code> component uses it inside a <code style=\"white-space: pre-wrap;\">.filter</code> call like you saw earlier. We have to return <code style=\"white-space: pre-wrap;\">true</code> for elements we want to keep and <code style=\"white-space: pre-wrap;\">false</code> for elements we don’t.</p>",
            "<p>Comparing <code style=\"white-space: pre-wrap;\">submit_date.getFullYear()</code> with <code style=\"white-space: pre-wrap;\">year</code> achieves that.</p>",
            "<p>The <code style=\"white-space: pre-wrap;\">reset</code> argument lets us reset filters back to defaults. Enables users to unselect options.</p>",
            "<p>When we have the <code style=\"white-space: pre-wrap;\">year</code> and <code style=\"white-space: pre-wrap;\">filter</code>, we update component state with <code style=\"white-space: pre-wrap;\">this.setState</code>. This triggers a re-render and calls <code style=\"white-space: pre-wrap;\">reportUpdateUpTheChain</code> afterwards. Great use-case for the little known setState callback 😃</p>",
            "<p><code style=\"white-space: pre-wrap;\">reportUpdateUpTheChain</code> then calls <code style=\"white-space: pre-wrap;\">this.props.updateDataFilter</code>, which is a callback method on <code style=\"white-space: pre-wrap;\">App</code>. We defined it earlier – it needs a new filter method and a <code style=\"white-space: pre-wrap;\">filteredBy</code> dictionary.</p>",
            "<pre data-caption=\"reportUpdateUpTheChain method\"><code style=\"white-space: pre-wrap;\">// src/components/Controls/index.js",
            "class Controls extends React.Component {",
            "// ...",
            "reportUpdateUpTheChain() {",
            "    window.location.hash = [",
            "        this.state.year || &quot;*&quot;",
            "    ].join(&quot;-&quot😉;",
            "",
            "    this.props.updateDataFilter(",
            "        (filters =&gt; {",
            "            return d =&gt;",
            "                filters.yearFilter(d)",
            "        })(this.state),",
            "        {",
            "            year: this.state.year",
            "        }",
            "    );",
            "}",
            "}</code></pre>",
            "<p>Building the filter method looks tricky because we’re composing multiple functions. The new arrow function takes a dictionary of filters as an argument and returns a new function that <code style=\"white-space: pre-wrap;\">&amp;&amp;</code>s them all. We invoke it immediately with <code style=\"white-space: pre-wrap;\">this.state</code> as the argument.</p>",
            "<p>It looks silly when there’s just one filter, but I promise it makes sense.</p>",
            "<h3 id=\"render-2\">Render</h3>",
            "<p>Great, we have the filter logic. Let’s render those rows of controls we’ve been talking about.</p>",
            "<div class=\"sourceCode\" id=\"cb108\" data-caption=\"Render the year ControlRow\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb108-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Controls/index.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb108-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Controls <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb108-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb108-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb108-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> data <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb108-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb108-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> years <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">new</span> <span class=\"at\" style=\"color: #7d9029;\">Set</span>(<span class=\"va\" style=\"color: #19177c;\">data</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"va\" style=\"color: #19177c;\">submit_date</span>.<span class=\"at\" style=\"color: #7d9029;\">getFullYear</span>()))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb108-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb108-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb108-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb108-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&lt;</span>ControlRow</a>",
            "<a class=\"sourceLine\" id=\"cb108-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    data<span class=\"op\" style=\"color: #666666;\">={</span>data<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb108-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    toggleNames<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"va\" style=\"color: #19177c;\">Array</span>.<span class=\"at\" style=\"color: #7d9029;\">from</span>(<span class=\"va\" style=\"color: #19177c;\">years</span>.<span class=\"at\" style=\"color: #7d9029;\">values</span>())<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb108-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    picked<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">year</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb108-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    updateDataFilter<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">updateYearFilter</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb108-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb108-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb108-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb108-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb108-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>Once more, this is generalized code used for a single example: the <code style=\"white-space: pre-wrap;\">year</code> filter.</p>",
            "<p>We build a <code style=\"white-space: pre-wrap;\">Set</code> of distinct years in our dataset, then render a <code style=\"white-space: pre-wrap;\">ControlRow</code> using props to give it our <code style=\"white-space: pre-wrap;\">data</code>, a set of <code style=\"white-space: pre-wrap;\">toggleNames</code>, a callback to update the filter, and which entry is <code style=\"white-space: pre-wrap;\">picked</code> right now. Also known as the controlled component pattern, it enables us to maintain the data-flows-down, events-bubble-up architecture.</p>",
            "<p>If you don’t know about <code style=\"white-space: pre-wrap;\">Set</code>s, they’re an ES6 data structure that ensures every entry is unique. Just like a mathematical set. They’re pretty fast.</p>"
          ]
        },
        {
          "lectureTitle": "Step 3: Build ControlRow component",
          "lectureLines": [
            "<h2 id=\"step-3-build-controlrow-component\">Step 3: Build ControlRow component</h2>",
            "<p>Let’s build the <code style=\"white-space: pre-wrap;\">ControlRow</code> component. It renders a row of controls and ensures only one at a time is selected.</p>",
            "<p>We’ll start with a stub and go from there.</p>",
            "<div class=\"sourceCode\" id=\"cb109\" data-caption=\"ControlRow stub\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb109-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Controls/ControlRow.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb109-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;react&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb109-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb109-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> Toggle <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;./Toggle&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb109-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb109-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> ControlRow <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb109-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    makePick <span class=\"op\" style=\"color: #666666;\">=</span> (picked<span class=\"op\" style=\"color: #666666;\">,</span> newState) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb109-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb109-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb109-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb109-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">_addToggle</span>(name) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb109-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb109-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb109-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb109-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> toggleNames <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb109-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb109-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb109-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb109-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> ControlRow<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>We start with imports, big surprise, then make a stub with 3 methods. Can you guess what they are?</p>",
            "<ul>",
            "<li><code style=\"white-space: pre-wrap;\">makePick</code> is the <code style=\"white-space: pre-wrap;\">Toggle</code> click callback</li>",
            "<li><code style=\"white-space: pre-wrap;\">_addToggle</code> is a rendering helper method</li>",
            "<li><code style=\"white-space: pre-wrap;\">render</code> renders a row of buttons</li>",
            "</ul>",
            "<div class=\"sourceCode\" id=\"cb110\" data-caption=\"makePick implementation\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb110-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Controls/ControlRow.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb110-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb110-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> ControlRow <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb110-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    makePick <span class=\"op\" style=\"color: #666666;\">=</span> (picked<span class=\"op\" style=\"color: #666666;\">,</span> newState) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb110-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// if newState is false, we want to reset</span></a>",
            "<a class=\"sourceLine\" id=\"cb110-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">updateDataFilter</span>(picked<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"op\" style=\"color: #666666;\">!</span>newState)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb110-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a></code></pre></div>",
            "<p><code style=\"white-space: pre-wrap;\">makePick</code> calls the data filter update and passes in the new value and whether we want to unselect. Pretty simple right?</p>",
            "<div class=\"sourceCode\" id=\"cb111\" data-caption=\"Render a row of controls\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb111-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Controls/ControlRow.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb111-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> ControlRow <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb111-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb111-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb111-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">_addToggle</span>(name) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb111-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> key <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"vs\" style=\"color: #4070a0;\">`toggle-</span><span class=\"sc\" style=\"color: #4070a0;\">${</span>name<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">`</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb111-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            label <span class=\"op\" style=\"color: #666666;\">=</span> name<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb111-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb111-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">capitalize</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb111-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            label <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">label</span>.<span class=\"at\" style=\"color: #7d9029;\">toUpperCase</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb111-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb111-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb111-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb111-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>Toggle</a>",
            "<a class=\"sourceLine\" id=\"cb111-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                label<span class=\"op\" style=\"color: #666666;\">={</span>label<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb111-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                name<span class=\"op\" style=\"color: #666666;\">={</span>name<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb111-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                key<span class=\"op\" style=\"color: #666666;\">={</span>key<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb111-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                value<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">picked</span> <span class=\"op\" style=\"color: #666666;\">===</span> name<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb111-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                onClick<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">makePick</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb111-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb111-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb111-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb111-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb111-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb111-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> toggleNames <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb111-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb111-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb111-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>div className<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;row&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb111-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&lt;</span>div className<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;col-md-12&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb111-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"va\" style=\"color: #19177c;\">toggleNames</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(name <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">_addToggle</span>(name))<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb111-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb111-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb111-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb111-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb111-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>Rendering comes in two functions: <code style=\"white-space: pre-wrap;\">_addToggle</code>, which is a helper, and <code style=\"white-space: pre-wrap;\">render</code>, which is the main render.</p>",
            "<p>In <code style=\"white-space: pre-wrap;\">render</code>, we set up two <code style=\"white-space: pre-wrap;\">div</code>s with Bootstrap classes. The first is a <code style=\"white-space: pre-wrap;\">row</code>, and the second is a full-width column. I tried using a column for each button, but it was annoying to manage and used too much space.</p>",
            "<p>Inside the divs, we map over all toggles and use <code style=\"white-space: pre-wrap;\">_addToggle</code> to render each of them.</p>",
            "<p><code style=\"white-space: pre-wrap;\">_addToggle</code> renders a <code style=\"white-space: pre-wrap;\">Toggle</code> component with a <code style=\"white-space: pre-wrap;\">label</code>, <code style=\"white-space: pre-wrap;\">name</code>, <code style=\"white-space: pre-wrap;\">value</code> and <code style=\"white-space: pre-wrap;\">onClick</code> callback. The label is just a prettier version of the name, which also serves as a key in our <code style=\"white-space: pre-wrap;\">toggleValues</code> dictionary. It’s going to be the <code style=\"white-space: pre-wrap;\">picked</code> attribute in <code style=\"white-space: pre-wrap;\">makePick</code>.</p>",
            "<p>Your browser should continue showing an error, but it should change to talking about the <code style=\"white-space: pre-wrap;\">Toggle</code> component instead of <code style=\"white-space: pre-wrap;\">ControlRow</code>.</p>",
            "<p><img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/toggle-error.png\"></p>",
            "<p>Let’s build it.</p>"
          ]
        },
        {
          "lectureTitle": "Step 4: Build Toggle component",
          "lectureLines": [
            "<h2 id=\"step-4-build-toggle-component\">Step 4: Build Toggle component</h2>",
            "<p>Last piece of the puzzle – the Toggle component. A button that turns on and off.</p>",
            "<div class=\"sourceCode\" id=\"cb112\" data-caption=\"Toggle component\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb112-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Controls/Toggle.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb112-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;react&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb112-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb112-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> Toggle <span class=\"op\" style=\"color: #666666;\">=</span> (<span class=\"op\" style=\"color: #666666;\">{</span> label<span class=\"op\" style=\"color: #666666;\">,</span> name<span class=\"op\" style=\"color: #666666;\">,</span> value<span class=\"op\" style=\"color: #666666;\">,</span> onClick <span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb112-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> className <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;btn btn-default&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb112-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb112-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (value) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb112-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        className <span class=\"op\" style=\"color: #666666;\">+=</span> <span class=\"st\" style=\"color: #4070a0;\">&quot; btn-primary&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb112-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb112-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb112-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb112-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>button className<span class=\"op\" style=\"color: #666666;\">={</span>className<span class=\"op\" style=\"color: #666666;\">}</span> onClick<span class=\"op\" style=\"color: #666666;\">={</span>() <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"at\" style=\"color: #7d9029;\">onClick</span>(name<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"op\" style=\"color: #666666;\">!</span>value)<span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb112-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">{</span>label<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb112-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        &lt;/button<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb112-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb112-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb112-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb112-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> Toggle<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>Import React to enable JSX and make a functional <code style=\"white-space: pre-wrap;\">Toggle</code> component. It’s fully controlled and takes event handlers as callbacks in props. No need for a class.</p>",
            "<p>We set up a Bootstrap classname: <code style=\"white-space: pre-wrap;\">btn</code> and <code style=\"white-space: pre-wrap;\">btn-default</code> make an element look like a button, the conditional <code style=\"white-space: pre-wrap;\">btn-primary</code> makes it blue. If you’re not familiar with Bootstrap classes, you should check <a href=\"https://getbootstrap.com/\">their documentation</a>.</p>",
            "<p>Then we render a <code style=\"white-space: pre-wrap;\">&lt;button&gt;</code> tag and, well, that’s it. A row of year filters appears in the browser. <code style=\"white-space: pre-wrap;\">onClick</code> passes</p>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/year-filter-row.png\" alt=\"A row of year filters\"><figcaption>A row of year filters</figcaption>",
            "</figure>",
            "<p>Click on a button and the <code style=\"white-space: pre-wrap;\">onClick</code> handler passes a toggle’d value to its parent via the <code style=\"white-space: pre-wrap;\">onClick</code> callback. This triggers an update in <code style=\"white-space: pre-wrap;\">Controls</code>, which calls <code style=\"white-space: pre-wrap;\">reportUpdateUpTheChain</code>, which in turn updates state in <code style=\"white-space: pre-wrap;\">App</code> and re-renders our button with the new value toggling its color on or off.</p>",
            "<p>If that didn’t work, consult this <a href=\"https://github.com/Swizec/react-d3-walkthrough-livecode/commit/b58981f2fd69ee34dbde52efd4917dc731fd22a4\">diff on GitHub</a>.</p>"
          ]
        },
        {
          "lectureTitle": "Step 5: Add US state and Job Title filters",
          "lectureLines": [
            "<h2 id=\"step-5-add-us-state-and-job-title-filters\">Step 5: Add US state and Job Title filters</h2>",
            "<p>With all that done, we can add two more filters: US states and job titles. Our <code style=\"white-space: pre-wrap;\">App</code> component is already set up to use them, so we just have to add them to the <code style=\"white-space: pre-wrap;\">Controls</code> component.</p>",
            "<p>We’ll start with the <code style=\"white-space: pre-wrap;\">render</code> method, then handle the parts I said earlier would look repetitive.</p>",
            "<div class=\"sourceCode\" id=\"cb113\" data-caption=\"Adding two more rows to Controls\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb113-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Controls/index.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb113-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Controls <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> Component <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb113-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb113-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb113-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> data <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb113-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb113-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> years <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">new</span> <span class=\"at\" style=\"color: #7d9029;\">Set</span>(<span class=\"va\" style=\"color: #19177c;\">data</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"va\" style=\"color: #19177c;\">submit_date</span>.<span class=\"at\" style=\"color: #7d9029;\">getFullYear</span>()))<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb113-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">              <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb113-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">              jobTitles <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">new</span> <span class=\"at\" style=\"color: #7d9029;\">Set</span>(<span class=\"va\" style=\"color: #19177c;\">data</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">clean_job_title</span>))<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb113-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">              USstates <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">new</span> <span class=\"at\" style=\"color: #7d9029;\">Set</span>(<span class=\"va\" style=\"color: #19177c;\">data</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">USstate</span>))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb113-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">              <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb113-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb113-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb113-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb113-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&lt;</span>ControlRow data<span class=\"op\" style=\"color: #666666;\">={</span>data<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb113-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                            toggleNames<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"va\" style=\"color: #19177c;\">Array</span>.<span class=\"at\" style=\"color: #7d9029;\">from</span>(<span class=\"va\" style=\"color: #19177c;\">years</span>.<span class=\"at\" style=\"color: #7d9029;\">values</span>())<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb113-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                            picked<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">year</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb113-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                            updateDataFilter<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">updateYearFilter</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb113-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                            /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb113-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb113-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb113-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&lt;</span>ControlRow data<span class=\"op\" style=\"color: #666666;\">={</span>data<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb113-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                            toggleNames<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"va\" style=\"color: #19177c;\">Array</span>.<span class=\"at\" style=\"color: #7d9029;\">from</span>(<span class=\"va\" style=\"color: #19177c;\">jobTitles</span>.<span class=\"at\" style=\"color: #7d9029;\">values</span>())<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb113-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                            picked<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">jobTitle</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb113-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                            updateDataFilter<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">updateJobTitleFilter</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb113-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb113-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&lt;</span>ControlRow data<span class=\"op\" style=\"color: #666666;\">={</span>data<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb113-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                            toggleNames<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"va\" style=\"color: #19177c;\">Array</span>.<span class=\"at\" style=\"color: #7d9029;\">from</span>(<span class=\"va\" style=\"color: #19177c;\">USstates</span>.<span class=\"at\" style=\"color: #7d9029;\">values</span>())<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb113-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                            picked<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">USstate</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb113-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                            updateDataFilter<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">updateUSstateFilter</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb113-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                            capitalize<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;true&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb113-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb113-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb113-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        )</a>",
            "<a class=\"sourceLine\" id=\"cb113-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb113-36\" title=\"36\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>Ok, this part is plenty repetitive, too.</p>",
            "<p>We created new sets for <code style=\"white-space: pre-wrap;\">jobTitles</code> and <code style=\"white-space: pre-wrap;\">USstates</code>, then rendered two more <code style=\"white-space: pre-wrap;\">ControlRow</code> elements with appropriate attributes. They get <code style=\"white-space: pre-wrap;\">toggleNames</code> for building the buttons, <code style=\"white-space: pre-wrap;\">picked</code> to know which is active, an <code style=\"white-space: pre-wrap;\">updateDataFilter</code> callback, and we tell US states to render capitalized.</p>",
            "<p>The implementations of those <code style=\"white-space: pre-wrap;\">updateDataFilter</code> callbacks follow the same pattern as <code style=\"white-space: pre-wrap;\">updateYearFilter</code>.</p>",
            "<div class=\"sourceCode\" id=\"cb114\" data-caption=\"new updateDataFilter callbacks\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb114-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Controls/index.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb114-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Controls <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    state <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">yearFilter</span><span class=\"op\" style=\"color: #666666;\">:</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">true</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">jobTitleFilter</span><span class=\"op\" style=\"color: #666666;\">:</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">true</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">USstateFilter</span><span class=\"op\" style=\"color: #666666;\">:</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">true</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">year</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;*&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">USstate</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;*&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">jobTitle</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;*&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb114-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    updateJobTitleFilter <span class=\"op\" style=\"color: #666666;\">=</span> (title<span class=\"op\" style=\"color: #666666;\">,</span> reset) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> filter <span class=\"op\" style=\"color: #666666;\">=</span> d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">clean_job_title</span> <span class=\"op\" style=\"color: #666666;\">===</span> title<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb114-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (reset <span class=\"op\" style=\"color: #666666;\">||</span> <span class=\"op\" style=\"color: #666666;\">!</span>title) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            filter <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">true</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            title <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;*&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb114-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">setState</span>(</a>",
            "<a class=\"sourceLine\" id=\"cb114-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">jobTitleFilter</span><span class=\"op\" style=\"color: #666666;\">:</span> filter<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">jobTitle</span><span class=\"op\" style=\"color: #666666;\">:</span> title</a>",
            "<a class=\"sourceLine\" id=\"cb114-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">reportUpdateUpTheChain</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb114-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb114-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    updateUSstateFilter <span class=\"op\" style=\"color: #666666;\">=</span> (USstate<span class=\"op\" style=\"color: #666666;\">,</span> reset) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> filter <span class=\"op\" style=\"color: #666666;\">=</span> d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">USstate</span> <span class=\"op\" style=\"color: #666666;\">===</span> USstate<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb114-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (reset <span class=\"op\" style=\"color: #666666;\">||</span> <span class=\"op\" style=\"color: #666666;\">!</span>USstate) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            filter <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">true</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            USstate <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;*&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-36\" title=\"36\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-37\" title=\"37\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb114-38\" title=\"38\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">setState</span>(</a>",
            "<a class=\"sourceLine\" id=\"cb114-39\" title=\"39\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-40\" title=\"40\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">USstateFilter</span><span class=\"op\" style=\"color: #666666;\">:</span> filter<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-41\" title=\"41\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">USstate</span><span class=\"op\" style=\"color: #666666;\">:</span> USstate</a>",
            "<a class=\"sourceLine\" id=\"cb114-42\" title=\"42\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-43\" title=\"43\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">reportUpdateUpTheChain</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb114-44\" title=\"44\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-45\" title=\"45\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-46\" title=\"46\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb114-47\" title=\"47\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ..</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-48\" title=\"48\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb114-49\" title=\"49\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb114-50\" title=\"50\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> Controls<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>Yes, they’re basically the same as <code style=\"white-space: pre-wrap;\">updateYearFilter</code>. The only difference is a changed <code style=\"white-space: pre-wrap;\">filter</code> function and using different keys in <code style=\"white-space: pre-wrap;\">setState()</code>.</p>",
            "<p>Why separate functions then? No need to get fancy. It would’ve made the code harder to read.</p>",
            "<p>Our last step is to add these new keys to the <code style=\"white-space: pre-wrap;\">reportUpdateUpTheChain</code> function.</p>",
            "<div class=\"sourceCode\" id=\"cb115\" data-caption=\"Add new filters to main state update\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb115-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Controls/index.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb115-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb115-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Controls <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb115-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">reportUpdateUpTheChain</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb115-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">updateDataFilter</span>(</a>",
            "<a class=\"sourceLine\" id=\"cb115-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            (filters <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb115-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb115-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"va\" style=\"color: #19177c;\">filters</span>.<span class=\"at\" style=\"color: #7d9029;\">yearFilter</span>(d) <span class=\"op\" style=\"color: #666666;\">&amp;&amp;</span></a>",
            "<a class=\"sourceLine\" id=\"cb115-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"va\" style=\"color: #19177c;\">filters</span>.<span class=\"at\" style=\"color: #7d9029;\">jobTitleFilter</span>(d) <span class=\"op\" style=\"color: #666666;\">&amp;&amp;</span></a>",
            "<a class=\"sourceLine\" id=\"cb115-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"va\" style=\"color: #19177c;\">filters</span>.<span class=\"at\" style=\"color: #7d9029;\">USstateFilter</span>(d)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb115-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">}</span>)(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb115-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb115-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">USstate</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">USstate</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb115-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">year</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">year</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb115-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">jobTitle</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">jobTitle</span></a>",
            "<a class=\"sourceLine\" id=\"cb115-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb115-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb115-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>We add them to the filter condition with <code style=\"white-space: pre-wrap;\">&amp;&amp;</code> and expand the <code style=\"white-space: pre-wrap;\">filteredBy</code> argument.</p>",
            "<p>Two more rows of filters show up.</p>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/all-filters.png\" alt=\"All the filters\"><figcaption>All the filters</figcaption>",
            "</figure>",
            "<p>👏</p>",
            "<p>Again, if it didn’t work, consult <a href=\"https://github.com/Swizec/react-d3-walkthrough-livecode/commit/813cdd496d06a38bb2816a8f973ab6c816119dca\">the diff on GitHub</a>.</p>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "Make it work in the real world",
      "lectures": [
        {
          "lectureTitle": "Add rudimentary routing",
          "lectureLines": [
            "<h1 id=\"rudimentary-routing\">Rudimentary routing</h1>",
            "<p>Imagine this. A user finds your dataviz, clicks around, and finds an interesting insight. They share it with their friends.</p>",
            "<p><em>“See! I was right! This link proves it.”</em></p>",
            "<p><em>“Wtf are you talking about?”</em></p>",
            "<p><em>“Oh… uuuuh… you have to click this and then that and then you’ll see. I’m legit winning our argument.”</em></p>",
            "<p><em>“Wow! Kim Kardashian just posted a new snap with her dog.”</em></p>",
            "<p>Let’s help our intrepid user out and make our dataviz linkable. We should store the current <code style=\"white-space: pre-wrap;\">filteredBy</code> state in the URL and be able to restore from a link.</p>",
            "<p>There are many ways to achieve this. <a href=\"https://github.com/ReactTraining/react-router\">ReactRouter</a> comes to mind, but the quickest is to implement our own rudimentary routing. We’ll add some logic to manipulate and read the URL hash.</p>",
            "<p>The easiest place to put this logic is next to the existing filter logic inside the <code style=\"white-space: pre-wrap;\">Controls</code> component. Better places exist from a “low-down components shouldn’t play with global state” perspective, but that’s okay.</p>",
            "<div class=\"sourceCode\" id=\"cb116\" data-caption=\"Add rudimentary routing\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb116-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Controls/index.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb116-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb116-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Controls <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb116-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ..</span></a>",
            "<a class=\"sourceLine\" id=\"cb116-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb116-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">componentDidMount</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb116-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> [year<span class=\"op\" style=\"color: #666666;\">,</span> USstate<span class=\"op\" style=\"color: #666666;\">,</span> jobTitle] <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">window</span>.<span class=\"va\" style=\"color: #19177c;\">location</span>.<span class=\"at\" style=\"color: #7d9029;\">hash</span></a>",
            "<a class=\"sourceLine\" id=\"cb116-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            .<span class=\"at\" style=\"color: #7d9029;\">replace</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;#&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;&quot;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb116-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            .<span class=\"at\" style=\"color: #7d9029;\">split</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;-&quot;</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb116-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb116-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (year <span class=\"op\" style=\"color: #666666;\">!==</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;*&quot;</span> <span class=\"op\" style=\"color: #666666;\">&amp;&amp;</span> year) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb116-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">updateYearFilter</span>(<span class=\"at\" style=\"color: #7d9029;\">Number</span>(year))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb116-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb116-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (USstate <span class=\"op\" style=\"color: #666666;\">!==</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;*&quot;</span> <span class=\"op\" style=\"color: #666666;\">&amp;&amp;</span> USstate) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb116-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">updateUSstateFilter</span>(USstate)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb116-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb116-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (jobTitle <span class=\"op\" style=\"color: #666666;\">!==</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;*&quot;</span> <span class=\"op\" style=\"color: #666666;\">&amp;&amp;</span> jobTitle) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb116-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">updateJobTitleFilter</span>(jobTitle)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb116-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb116-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb116-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb116-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ..</span></a>",
            "<a class=\"sourceLine\" id=\"cb116-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">reportUpdateUpTheChain</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb116-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">window</span>.<span class=\"va\" style=\"color: #19177c;\">location</span>.<span class=\"at\" style=\"color: #7d9029;\">hash</span> <span class=\"op\" style=\"color: #666666;\">=</span> [</a>",
            "<a class=\"sourceLine\" id=\"cb116-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">year</span> <span class=\"op\" style=\"color: #666666;\">||</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;*&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb116-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">USstate</span> <span class=\"op\" style=\"color: #666666;\">||</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;*&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb116-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">jobTitle</span> <span class=\"op\" style=\"color: #666666;\">||</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;*&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb116-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        ].<span class=\"at\" style=\"color: #7d9029;\">join</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;-&quot;</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb116-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb116-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ..</span></a>",
            "<a class=\"sourceLine\" id=\"cb116-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>We use the <code style=\"white-space: pre-wrap;\">componentDidMount</code> lifecycle hook to read the URL when <code style=\"white-space: pre-wrap;\">Controls</code> first render on our page. Presumably when the page loads, but it could be later. It doesn’t really matter <em>when</em>, just that we update our filter the first chance we get.</p>",
            "<p><code style=\"white-space: pre-wrap;\">window.location.hash</code> gives us the hash part of the URL. We clean it up and split it into three parts: <code style=\"white-space: pre-wrap;\">year</code>, <code style=\"white-space: pre-wrap;\">USstate</code>, and <code style=\"white-space: pre-wrap;\">jobTitle</code>. If the URL is <code style=\"white-space: pre-wrap;\">localhost:3000/#2013-CA-manager</code>, then <code style=\"white-space: pre-wrap;\">year</code> becomes <code style=\"white-space: pre-wrap;\">2013</code>, <code style=\"white-space: pre-wrap;\">USstate</code> becomes <code style=\"white-space: pre-wrap;\">CA</code>, and <code style=\"white-space: pre-wrap;\">jobTitle</code> becomes <code style=\"white-space: pre-wrap;\">manager</code>.</p>",
            "<p>We make sure each value is valid and use our existing filter update callbacks to update the visualization. Just as if it was the user clicking a button.</p>",
            "<p>In <code style=\"white-space: pre-wrap;\">reportUpdateUpTheChain</code>, we make sure to update the URL hash. Assigning a new value to <code style=\"white-space: pre-wrap;\">window.location.hash</code> takes care of that.</p>",
            "<p>You should see the URL changing as you click around.</p>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/changing-url.png\" alt=\"Changing URL hash\"><figcaption>Changing URL hash</figcaption>",
            "</figure>",
            "<p>There’s a bug with some combinations in 2013 that don’t have enough data. It will go away when we use the full dataset.</p>",
            "<p>If it doesn’t work at all, consult the <a href=\"https://github.com/Swizec/react-d3-walkthrough-livecode/commit/1132e58063d5029878c616a65fffa22d59cb080f\">diff on Github</a>.</p>"
          ]
        },
        {
          "lectureTitle": "Prep your app for launch",
          "lectureLines": [
            "<h1 id=\"prep-for-launch\">Prep for launch</h1>",
            "<p>You’ve built a great visualization. Congratz! Time to put it online and share with the world.</p>",
            "<p>To do that, we’re going to use Github Pages because our app is a glorified static website. There’s no backend, so all we need is something to serve our HTML, JavaScript, and CSV. Github Pages is perfect for that.</p>",
            "<p>It’s free, works well with <code style=\"white-space: pre-wrap;\">create-react-app</code>, and can withstand a lot of traffic. You don’t want to worry about traffic when your app gets to the top of HackerNews or Reddit.</p>",
            "<p>There are a few things we should take care of:</p>",
            "<ul>",
            "<li>setting up deployment</li>",
            "<li>adding a page title</li>",
            "<li>adding some copy</li>",
            "<li>Twitter and Facebook cards</li>",
            "<li>an SEO tweak for search engines</li>",
            "<li>use the full dataset</li>",
            "</ul>",
            "<h2 id=\"setting-up-deployment\">Setting up deployment</h2>",
            "<p>You’ll need a Github repository. If you’re like me, writing all this code without version control or off-site backup made you nervous, so you already have one.</p>",
            "<p>For everyone else, head over to Github, click the green <code style=\"white-space: pre-wrap;\">New Repository</code> button and give it a name. Then copy the commands it gives you and run them in your console.</p>",
            "<p>It should be something like this:</p>",
            "<pre data-caption=\"Put code on github\"><code style=\"white-space: pre-wrap;\">$ git init",
            "$ git commit -m &quot;My entire dataviz&quot;",
            "$ git remote add origin git://github ...",
            "$ git push origin -u master</code></pre>",
            "<p>If you’ve been git-ing locally without pushing, then you only need the <code style=\"white-space: pre-wrap;\">git remote add</code> and <code style=\"white-space: pre-wrap;\">git push origin</code> commands. This puts your code on Github. Great idea for anything you don’t want to lose if your computer craps out.</p>",
            "<p>Every Github repository comes with an optional Github Pages setup. The easiest way for us to use it is with the <code style=\"white-space: pre-wrap;\">gh-pages</code> npm module.</p>",
            "<p>Install it with this command:</p>",
            "<pre data-caption=\"Install gh-pages helper\"><code style=\"white-space: pre-wrap;\">$ npm install --save-dev gh-pages</code></pre>",
            "<p>Add two lines to package.json:</p>",
            "<div class=\"sourceCode\" id=\"cb119\" data-caption=\"Update package.json\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb119-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// package.json</span></a>",
            "<a class=\"sourceLine\" id=\"cb119-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb119-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"st\" style=\"color: #4070a0;\">&quot;homepage&quot;</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;https://&lt;your username&gt;.github.io/&lt;your repo name&gt;&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb119-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb119-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"st\" style=\"color: #4070a0;\">&quot;scripts&quot;</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb119-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"st\" style=\"color: #4070a0;\">&quot;eject&quot;</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;react-scripts eject&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb119-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb119-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"st\" style=\"color: #4070a0;\">&quot;deploy&quot;</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;npm run build &amp;&amp; gh-pages -d build&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb119-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb119-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>We’ve been ignoring the <code style=\"white-space: pre-wrap;\">package.json</code> file so far, but it’s a pretty important file. It specifies all of our project’s dependencies, meta data for npm, and scripts that we run locally. This is where <code style=\"white-space: pre-wrap;\">npm start</code> is defined, for instance.</p>",
            "<p>We add a <code style=\"white-space: pre-wrap;\">deploy</code> script that runs <code style=\"white-space: pre-wrap;\">build</code> and a <code style=\"white-space: pre-wrap;\">gh-pages</code> deploy, and we specify a <code style=\"white-space: pre-wrap;\">homepage</code> URL. The URL tells our build script how to set up URLs for static files in <code style=\"white-space: pre-wrap;\">index.html</code>.</p>",
            "<p>Github Pages URLs follow the schema:</p>",
            "<pre><code style=\"white-space: pre-wrap;\">https://&lt;your username&gt;.github.io/&lt;your repo name&gt;</code></pre>",
            "<p>For instance, mine is:</p>",
            "<pre><code style=\"white-space: pre-wrap;\">https://swizec.github.io/react-d3-walkthrough-livecode</code></pre>",
            "<p>Yours will be different.</p>",
            "<p>You can deploy with <code style=\"white-space: pre-wrap;\">npm run deploy</code>. Make sure all changes are committed. We’ll do it together when we’re done setting up.</p>"
          ]
        },
        {
          "lectureTitle": "Twitter and Facebook cards and SEO",
          "lectureLines": [
            "<h2 id=\"twitter-and-facebook-cards-and-seo\">Twitter and Facebook cards and SEO</h2>",
            "<p>How your visualization looks on social media matters more than you’d think. Does it have a nice picture, a great description, and a title, or does it look like a random URL? Those things matter.</p>",
            "<p>And they’re easy to set up. No excuse.</p>",
            "<p>We’re going to poke around <code style=\"white-space: pre-wrap;\">public/index.html</code> for the first time. Add titles, Twitter cards, Facebook Open Graph things, and so on.</p>",
            "<div class=\"sourceCode\" id=\"cb122\" data-caption=\"Basic SEO\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode html\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode html\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb122-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">&lt;!-- public/index.html --&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb122-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&lt;head&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb122-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">&lt;!-- //... --&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb122-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    // Insert the line(s) between here...</a>",
            "<a class=\"sourceLine\" id=\"cb122-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&lt;title&gt;</span>How much does an H1B in tech pay?<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&lt;/title&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb122-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb122-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&lt;link</span><span class=\"ot\" style=\"color: #007020;\"> rel=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;canonical&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb122-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"ot\" style=\"color: #007020;\">          href=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;https://swizec.github.io/react-d3-walkthrough-livecode/&quot;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">/&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb122-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    // ...and here.</a>",
            "<a class=\"sourceLine\" id=\"cb122-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&lt;/head&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb122-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&lt;body&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb122-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">&lt;!-- //... --&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb122-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&lt;div</span><span class=\"ot\" style=\"color: #007020;\"> id=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;root&quot;</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb122-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        // Insert the line(s) between here...</a>",
            "<a class=\"sourceLine\" id=\"cb122-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">         <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&lt;h2&gt;</span>The average H1B in tech pays $86,164/year<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&lt;/h2&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb122-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb122-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">   <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&lt😜</span><span class=\"ot\" style=\"color: #007020;\"> class=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;lead&quot;</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb122-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">             Since 2012 the US tech industry has sponsored 176,075</a>",
            "<a class=\"sourceLine\" id=\"cb122-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">             H1B work visas. Most of them paid <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&lt;b&gt;</span>$60,660 to $111,668<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&lt;/b&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb122-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">             per year (1 standard deviation). <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&lt;span&gt;</span>The best city for</a>",
            "<a class=\"sourceLine\" id=\"cb122-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">             an H1B is <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&lt;b&gt;</span>Kirkland, WA<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&lt;/b&gt;</span> with an average individual</a>",
            "<a class=\"sourceLine\" id=\"cb122-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">             salary <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&lt;b&gt;</span>$39,465 above local household median<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&lt;/b&gt;</span>.</a>",
            "<a class=\"sourceLine\" id=\"cb122-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">             Median household salary is a good proxy for cost of</a>",
            "<a class=\"sourceLine\" id=\"cb122-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">             living in an area.<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&lt;/span&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb122-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">         <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&lt;/p&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb122-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        // ...and here.</a>",
            "<a class=\"sourceLine\" id=\"cb122-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&lt;/div&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb122-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">&lt;/body&gt;</span></a></code></pre></div>",
            "<p>We add a <code style=\"white-space: pre-wrap;\">&lt;title&gt;</code> and a <code style=\"white-space: pre-wrap;\">canonical</code> URL. Titles configure what shows up in browser tabs, and the canonical URL is there to tell search engines that this is the main and most important URL for this piece of content. This is especially important for when people copy-paste your stuff and put it on other websites.</p>",
            "<p>In the body root tag, we add some copy-pasted text from our dataviz. You’ll recognize the default title and description.</p>",
            "<p>As soon as React loads, these get overwritten with our preloader, but it’s good to have them here for any search engines that aren’t running JavaScript yet. I think both Google and Bing are capable of running our React app and getting text from there, but you never know.</p>",
            "<p>To make social media embeds look great, we’ll use <a href=\"https://dev.twitter.com/cards/types/summary-large-image\">Twitter card</a> and <a href=\"https://developers.facebook.com/docs/sharing/webmasters\">Facebook OpenGraph</a> meta tags. I think most other websites just rely on these since most people use them. They go in the <code style=\"white-space: pre-wrap;\">&lt;head&gt;</code> of our HTML.</p>",
            "<div class=\"sourceCode\" id=\"cb123\" data-caption=\"Add FB and Twitter cards\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb123-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">&lt;!--</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">public</span><span class=\"ss\" style=\"color: #bb6688;\">/index.html --&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb123-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"ss\" style=\"color: #bb6688;\">&lt;head&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb123-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"ss\" style=\"color: #bb6688;\">    &lt;meta property=&quot;og:locale&quot; content=&quot;en_US&quot; /</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb123-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>meta property<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;og:type&quot;</span> content<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;article&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb123-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>meta property<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;og:title&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb123-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          content<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;The average H1B in tech pays $86,164/year&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb123-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>meta property<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;og:description&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb123-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          content<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;Since 2012 the US tech industry has sponsored</span></a>",
            "<a class=\"sourceLine\" id=\"cb123-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"dv\" style=\"color: #40a070;\">176</span><span class=\"op\" style=\"color: #666666;\">,</span><span class=\"dv\" style=\"color: #40a070;\">075</span> H1B work <span class=\"va\" style=\"color: #19177c;\">visas</span>. <span class=\"at\" style=\"color: #7d9029;\">With</span> an average individual salary</a>",
            "<a class=\"sourceLine\" id=\"cb123-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">up to $39<span class=\"op\" style=\"color: #666666;\">,</span><span class=\"dv\" style=\"color: #40a070;\">465</span> above median household <span class=\"va\" style=\"color: #19177c;\">income</span>.<span class=\"st\" style=\"color: #4070a0;\">&quot; /&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb123-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>meta property<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;og:url&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb123-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          content<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;https://swizec.github.io/react-d3-walkthrough-livecode&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb123-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>meta property<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;og:site_name&quot;</span> content<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;A geek with a hat&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb123-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>meta property<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;article:publisher&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb123-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          content<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;https://facebook.com/swizecpage&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb123-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>meta property<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;fb:admins&quot;</span> content<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;624156314&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb123-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>meta property<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;og:image&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb123-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          content<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;https://swizec.github.io/react-d3js-step-by-step/thumbnail.png&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb123-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb123-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>meta name<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;twitter:card&quot;</span> content<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;summary_large_image&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb123-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>meta name<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;twitter:description&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb123-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          content<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;Since 2012 the US tech industry has sponsored</span></a>",
            "<a class=\"sourceLine\" id=\"cb123-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"dv\" style=\"color: #40a070;\">176</span><span class=\"op\" style=\"color: #666666;\">,</span><span class=\"dv\" style=\"color: #40a070;\">075</span> H1B work <span class=\"va\" style=\"color: #19177c;\">visas</span>. <span class=\"at\" style=\"color: #7d9029;\">With</span> an average individual salary</a>",
            "<a class=\"sourceLine\" id=\"cb123-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">up to $39<span class=\"op\" style=\"color: #666666;\">,</span><span class=\"dv\" style=\"color: #40a070;\">465</span> above median household <span class=\"va\" style=\"color: #19177c;\">income</span>.<span class=\"st\" style=\"color: #4070a0;\">&quot; /&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb123-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>meta name<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;twitter:title&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb123-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          content<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;The average H1B in tech pays $86,164/year&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb123-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>meta name<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;twitter:site&quot;</span> content<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;@swizec&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb123-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>meta name<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;twitter:image&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb123-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          content<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;https://swizec.github.io/react-d3js-step-by-step/thumbnail.png&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb123-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>meta name<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;twitter:creator&quot;</span> content<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;@swizec&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb123-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">&lt;/head<span class=\"op\" style=\"color: #666666;\">&gt;</span></a></code></pre></div>",
            "<p>Much of this code is repetitive. Both Twitter and Facebook want the same info, but they’re stubborn and won’t read each other’s formats. You can copy all of this, but make sure to change <code style=\"white-space: pre-wrap;\">og:url</code>, <code style=\"white-space: pre-wrap;\">og:site_name</code>, <code style=\"white-space: pre-wrap;\">article:publisher</code>, <code style=\"white-space: pre-wrap;\">fb:admins</code>, <code style=\"white-space: pre-wrap;\">og:image</code>, <code style=\"white-space: pre-wrap;\">twitter:site</code>, <code style=\"white-space: pre-wrap;\">twitter:image</code>, and <code style=\"white-space: pre-wrap;\">twitter:creator</code>. They’re specific to you.</p>",
            "<p>The URLs you should change to the <code style=\"white-space: pre-wrap;\">homepage</code> URL you used above. The rest you should change to use your name and Twitter/Facebook handles. I’m not sure <em>why</em> it matters, but I’m sure it does.</p>",
            "<p>An important one is <code style=\"white-space: pre-wrap;\">fb:admin</code>. It enables admin features on your site if you add their social plugins. If you don’t, it probably doesn’t matter.</p>",
            "<p>You’re also going to need a thumbnail image. I made mine by taking a screenshot of the final visualization, then I put it in <code style=\"white-space: pre-wrap;\">public/thumbnail.png</code>.</p>",
            "<p>Now when somebody shares your dataviz on Twitter or Facebook, it’s going to look something like this:</p>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/twitter-card.png\" alt=\"Dataviz Twitter card\"><figcaption>Dataviz Twitter card</figcaption>",
            "</figure>"
          ]
        },
        {
          "lectureTitle": "Use full dataset",
          "lectureLines": [
            "<h2 id=\"full-dataset\">Full dataset</h2>",
            "<p>One more step left. Use the whole dataset!</p>",
            "<p>Go into <code style=\"white-space: pre-wrap;\">src/DataHandling.js</code> and change one line:</p>",
            "<div class=\"sourceCode\" id=\"cb124\" data-caption=\"Switch to full dataset\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb124-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Example 4</span></a>",
            "<a class=\"sourceLine\" id=\"cb124-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">//</span></a>",
            "<a class=\"sourceLine\" id=\"cb124-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/DataHandling.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb124-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> loadAllData <span class=\"op\" style=\"color: #666666;\">=</span> (callback <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">_</span>.<span class=\"at\" style=\"color: #7d9029;\">noop</span>) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb124-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">queue</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb124-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ..</span></a>",
            "<a class=\"sourceLine\" id=\"cb124-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Delete the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb124-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        .<span class=\"at\" style=\"color: #7d9029;\">defer</span>(<span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">csv</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;data/h1bs-2012-2016-shortened.csv&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> cleanSalary)</a>",
            "<a class=\"sourceLine\" id=\"cb124-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a>",
            "<a class=\"sourceLine\" id=\"cb124-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Insert the line(s) between here...</span></a>",
            "<a class=\"sourceLine\" id=\"cb124-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        .<span class=\"at\" style=\"color: #7d9029;\">defer</span>(<span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">csv</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;data/h1bs-2012-2016.csv&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> cleanSalary)</a>",
            "<a class=\"sourceLine\" id=\"cb124-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...and here.</span></a></code></pre></div>",
            "<p>We change the file name, and that’s that. Full dataset locked and loaded. Dataviz ready to go.</p>"
          ]
        },
        {
          "lectureTitle": "Launch! 🚀",
          "lectureLines": [
            "<h1 id=\"launch\">Launch!</h1>",
            "<p>To show your dataviz to the world, make sure you’ve committed all changes. Using <code style=\"white-space: pre-wrap;\">git status</code> shows you anything you missed.</p>",
            "<p>Then run:</p>",
            "<pre><code style=\"white-space: pre-wrap;\">$ npm run deploy</code></pre>",
            "<p>You’ll see a bunch of output:</p>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/npm-run-deploy.png\" alt=\"Deploy output\"><figcaption>Deploy output</figcaption>",
            "</figure>",
            "<p>And you’re ready to go. Your visualization is online. My URL is <code style=\"white-space: pre-wrap;\">https://swizec.github.io/react-d3-walkthrough-livecode/</code>, yours is different. Visit it and you’ll see what you’ve built. Share it and others will see it too.</p>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/deployed-dataviz.png\" alt=\"Deployed dataviz\"><figcaption>Deployed dataviz</figcaption>",
            "</figure>",
            "<p>Congratz! You’ve built and deployed your first React and D3 dataviz. You’re amazing \\o/</p>",
            "<p>Thanks for following along with the meaty part of my book. You’re now well equipped to build cool things.</p>",
            "<p>In the next section, we’re going to look at building animations.</p>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "Animation",
      "lectures": [
        {
          "lectureTitle": "Intro",
          "lectureLines": [
            "<h1 id=\"animation\">Animation</h1>",
            "<p>Welcome to the animation section. This is where the real fun begins. Demos that look cool, impress your friends, and sound good at the dinner table.</p>",
            "<p>At my dinner table at least …</p>",
            "<p><img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/puking-rainbows.png\"></p>",
            "<p>You already know how React and D3 work together, so these examples are going to go faster. You know that we’re using React for rendering SVG and D3 for calculating props. You know how to make your dataviz interactive and how to handle oodles of data.</p>",
            "<p>Now you’re going to learn how to make it dance. Smooth transitions between states, complex animations, interacting with users in real-time. 60 frames per second, baby!</p>",
            "<p>Animation looks like this in a nutshell:</p>",
            "<ul>",
            "<li>render something</li>",
            "<li>change it 60 times per second</li>",
            "</ul>",
            "<p>When that happens humans perceive smooth motion. You can go as low as 24 frames per second, like old TVs used to, but that often looks jaggeddy on modern monitors.</p>",
            "<p>You’re about to learn two different approaches to building these animations. Using game loops and using transitions.</p>",
            "<ol type=\"1\">",
            "<li>Game loops give you more control</li>",
            "<li>Transitions are easier to implement</li>",
            "</ol>",
            "<p>We’re starting with an example or two in CodeSandbox, then building some bigger stuff. No more big huge projects like the <a href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6888870#salary-visualization\">tech salary visualization</a>, though. Takes too long to set up and doesn’t focus on animation.</p>"
          ]
        },
        {
          "lectureTitle": "Using a game loop for rich animation",
          "lectureLines": [
            "<h1 id=\"game-loop\">Using a game loop for rich animation</h1>",
            "<p>Game loops are fun! They’re my favorite. They even sound fun: “game loop”. Doesn’t it sound fun to go build a game loop? Maybe it’s because I’ve always used game loops when building something fun to play with.</p>",
            "<p>At its core, a game loop is an infinite loop where each iteration renders the next frame of your animation.</p>",
            "<p>The concept comes from the video game industry. At some point they realized that building game engines is much easier when you think about each frame as its own static representation of your game state.</p>",
            "<p>You take every object in the game and render it. Then you throw it all away, make small adjustments, and render again.</p>",
            "<p>This turns out to be both faster to run and easier to implement than diffing scenes and figuring out what moves and what doesn’t. Of course as you get more objects on the screen it becomes silly to re-render the immovable background every time.</p>",
            "<p>But you don’t have to worry about that. That’s React’s job.</p>",
            "<p>React can figure out a diff between hierarchical representations of your scene and re-render the appropriate objects.</p>",
            "<p>That’s a hard engineering problem, but you can think of it this way:</p>",
            "<ol type=\"1\">",
            "<li>Render a DOM from state</li>",
            "<li>Change some values in state</li>",
            "<li>Trigger a re-render</li>",
            "</ol>",
            "<p>Make those state changes fast enough and you get 60 frames per second. The hard part then becomes thinking about your movement as snapshots in time.</p>",
            "<p>When something speeds up, what does that mean for changes in its position?</p>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "A bouncy ball game loop example",
      "lectures": [
        {
          "lectureTitle": "Begin bouncy ball",
          "lectureLines": [
            "<h2 id=\"a-bouncing-ball-game-loop-example\">A bouncing ball game loop example</h2>",
            "<p>Let’s get our feet wet with my favorite childhood example: a bouncing ball.</p>",
            "<p>I must have built dozens of them back in my <a href=\"https://en.wikipedia.org/wiki/Turbo_Pascal\">Turbo Pascal</a> days using <a href=\"https://en.wikipedia.org/wiki/Borland_Graphics_Interface\">BGI</a>. Endless afternoons playing with different parameters in my bouncy ball examples.</p>",
            "<p>Yes, those Turbo Pascal and BGI are from the 80’s. No, I’m not that old. I started young and with old equipment. Coding for DOS is easier when you’re a kid than coding for Windows 95.</p>",
            "<p>Here is a screenshot of our bouncing ball:</p>",
            "<figure>",
            "<img alt=\"Bouncing Ball\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQEAAADWCAYAAADRoDfeAAAKCGlDQ1BJQ0MgUHJvZmlsZQAASImFlndUVNcWxs+90xtthqH33jsMIL036VVUhgGGOsJQxY4EFYgoIiKgBCRUBaOhxoKIYiEIKGBBM0gQUJ7BAqigvAskMcl7670966zzW9/s8909Z/64HwAkd2ZiYjwsAEACJ4Xr42QrGxQcIosbBxCAAR0AoMBkJSfaeHm5Iwz+2P9eCyNIN1L3tVa9/vP7/1mCEZHJLAAgL4QZrERuCsIHEfZLT0lc5TGEaVxkKITnVpm9xjB6lcPXWXStx8/HDmFNAPBkJpPLBoDIQHTZNBYb8SEGIazLiYjhILzqb8mKZkYgfAthzaj41AyE36/2JCRsQ3SSIsKq4X/xZP/NP/xPfyaT/ScnxKeyfv9dqzdCjuT4+yK7OLIkQRTQBvEgFWQAWZAIuGAbosQgSiRy9//9HGPtnB3SmQi2IydiABtEgxTkvONfvHzXnFJAOmAiPZGI4o587Fb/x3XLd/Q1V4h+56uW1AWAaS4isr9qTAUAOl4AQF34qim8RcY5AsDlAVYqN21dW716gAFEwA9oQAxIAwWgCrSAPjAG5sAaOABX4An8QDDYAljIvAnIVOlgJ9gHckAeOAKOg1JQAc6AOnAOXABt4BK4Bm6Cu2AADIMngAcmwSswBxbAEgRBOIgCUSExSAZSgjQgfYgBWUIOkDvkAwVDYRAb4kCp0E5oP5QHFUKlUCVUD/0AdUDXoNvQIPQIGodmoLfQJxgFk2EaLAUrwzowA7aB3WA/eDPMhpPgTDgbPgyXwFXwWbgVvgbfhYdhHvwKnkcBFAlFR8mhtFAMlB3KExWCikJxUbtRuahiVBWqCdWJ6kXdR/FQs6iPaCyaipZFa6HN0c5ofzQLnYTejc5Hl6Lr0K3oHvR99Dh6Dv0FQ8FIYjQwZhgXTBCGjUnH5GCKMTWYFswNzDBmErOAxWLpWBWsCdYZG4yNxe7A5mNPYZuxXdhB7AR2HofDieE0cBY4TxwTl4LLwZ3EncVdxQ3hJnEf8CS8DF4f74gPwXPwWfhifAP+Cn4IP4VfIggQlAhmBE9CBGE7oYBQTegk3CNMEpaIgkQVogXRjxhL3EcsITYRbxDHiO9IJJI8yZTkTYoh7SWVkM6TbpHGSR/JQmR1sh05lJxKPkyuJXeRH5HfUSgUZYo1JYSSQjlMqadcpzyjfOCj8mnzufBF8O3hK+Nr5Rvie81P4Ffit+Hfwp/JX8x/kf8e/6wAQUBZwE6AKbBboEygQ2BUYF6QKqgn6CmYIJgv2CB4W3BaCCekLOQgFCGULXRG6LrQBBVFVaDaUVnU/dRq6g3qJA1LU6G50GJpebRztH7anLCQsKFwgHCGcJnwZWEeHUVXprvQ4+kF9Av0EfonESkRG5FIkUMiTSJDIouiEqLWopGiuaLNosOin8RkxRzE4sSOirWJPRVHi6uLe4uni58WvyE+K0GTMJdgSeRKXJB4LAlLqkv6SO6QPCPZJzkvJS3lJJUodVLqutSsNF3aWjpWukj6ivSMDFXGUiZGpkjmqsxLWWFZG9l42RLZHtk5OUk5Z7lUuUq5frkleRV5f/ks+Wb5pwpEBYZClEKRQrfCnKKMoofiTsVGxcdKBCWGUrTSCaVepUVlFeVA5QPKbcrTKqIqLiqZKo0qY6oUVSvVJNUq1QdqWDWGWpzaKbUBdVjdSD1avUz9ngasYawRo3FKY1ATo2mqydGs0hzVImvZaKVpNWqNa9O13bWztNu0X+so6oToHNXp1fmia6Qbr1ut+0RPSM9VL0uvU++tvro+S79M/4EBxcDRYI9Bu8EbQw3DSMPThg+NqEYeRgeMuo0+G5sYc42bjGdMFE3CTMpNRhk0hhcjn3HLFGNqa7rH9JLpRzNjsxSzC2a/mWuZx5k3mE9vUNkQuaF6w4SFvAXTotKCZylrGWb5nSXPSs6KaVVl9dxawTrCusZ6ykbNJtbmrM1rW11brm2L7aKdmd0uuy57lL2Tfa59v4OQg79DqcMzR3lHtmOj45yTkdMOpy5njLOb81HnURcpF5ZLvcucq4nrLtceN7Kbr1up23N3dXeue6cH7OHqccxjbKPSRs7GNk/g6eJ5zPOpl4pXktdP3lhvL+8y7xc+ej47fXp9qb5bfRt8F/xs/Qr8nvir+qf6dwfwB4QG1AcsBtoHFgbygnSCdgXdDRYPjgluD8GFBITUhMxvcth0fNNkqFFoTujIZpXNGZtvbxHfEr/l8lb+rcytF8MwYYFhDWHLTE9mFXM+3CW8PHyOZcc6wXoVYR1RFDETaRFZGDkVZRFVGDXNtmAfY89EW0UXR8/G2MWUxryJdY6tiF2M84yrjVuJD4xvTsAnhCV0cIQ4cZyebdLbMrYNJmok5iTyksySjifNcd24NclQ8ubk9hQa8vLsS1VN/SZ1PM0yrSztQ3pA+sUMwQxORt929e2Htk9lOmZ+vwO9g7Wje6fczn07x3fZ7KrcDe0O3929R2FP9p7JvU576/YR98Xt+zlLN6sw6/3+wP2d2VLZe7MnvnH6pjGHL4ebM3rA/EDFQfTBmIP9hwwOnTz0JTci906ebl5x3nI+K//Ot3rflny7cjjqcH+BccHpI9gjnCMjR62O1hUKFmYWThzzONZaJFuUW/T++Nbjt4sNiytOEE+knuCVuJe0n1Q8eeTkcml06XCZbVlzuWT5ofLFUxGnhk5bn26qkKrIq/j0Xcx3DyudKlurlKuKz2DPpJ15UR1Q3fs94/v6GvGavJrPtZxaXp1PXU+9SX19g2RDQSPcmNo4czb07MA5+3PtTVpNlc305rzz4Hzq+Zc/hP0wcsHtQvdFxsWmH5V+LG+htuS2Qq3bW+faott47cHtgx2uHd2d5p0tP2n/VHtJ7lLZZeHLBVeIV7KvrFzNvDrfldg1e419baJ7a/eT60HXH/R49/TfcLtx66bjzeu9Nr1Xb1ncunTb7HbHHcadtrvGd1v7jPpafjb6uaXfuL/1nsm99gHTgc7BDYNXhqyGrt23v3/zgcuDu8MbhwdH/EcejoaO8h5GPJx+FP/ozeO0x0tP9o5hxnKfCjwtfib5rOoXtV+aeca8y+P2433PfZ8/mWBNvPo1+dflyewXlBfFUzJT9dP605dmHGcGXm56Ofkq8dXSbM6/BP9V/lr19Y+/Wf/WNxc0N/mG+2blbf47sXe17w3fd897zT9bSFhYWsz9IPah7iPjY++nwE9TS+nLuOWSz2qfO7+4fRlbSVhZSWRymWtRAIUsOCoKgLe1AFCCkewwgGQhvvXM9Xuegf6SbP5g8HnoKy9vW89la2UMQK01AP57AXBHMsppZCkhTEb21YjoZw1gA4M/1++VHGWgv/4MMheJJh9WVt5JAYDrRJ7DXVlZOrWy8rkaGfYRAF1J/3e2f/B6HlwtLJKSC1Xo4viVPjIB/LP+DYgVvxTNfraPAAABnWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyI+CiAgICAgICAgIDxleGlmOlBpeGVsWERpbWVuc2lvbj4yNTc8L2V4aWY6UGl4ZWxYRGltZW5zaW9uPgogICAgICAgICA8ZXhpZjpQaXhlbFlEaW1lbnNpb24+MjE0PC9leGlmOlBpeGVsWURpbWVuc2lvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CrQ8pN4AAAbsSURBVHgB7drtTZxXFIXRIUohphOoxFCJoRLcCdAJnTh+LVmxgsiAtaNoa6/5k8gmV/ese/QEf1x8+/45+RAgMCvwx+zkBidA4IeACFgEAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYn8GcjwcvLy+nr16+n5+fnH9f/9OnT6cuXL6fjnz4ECHxM4OLb98/H/pP/96ufnp5O19fXry5xBODz58+nu7u7Vz/nBwgQeFugKgLHdwCXl5dvTnOE4PHx0XcEbwr5CQKvBap+T+D+/v71BL/8yBGJ29vbX37EvxIgcE6gKgLHLwXOfY4Q+BAg8H6Bql8OXFxcvGuyst/meNdMvojAfyVQ9Z3A1dXVWYebm5uzX+MLCBD4W6AqAsfv/p/7vOdrzp3h5wksCVRF4Pi//L/9n/74TuE93y0sPbBZCZwTqIrAMczDw8OPvxj062DHHw0ef1no+ONBHwIEPiZQ9RuD/xzt+JOAIwA+BAj8vkB1BH5/bP8lAQI/Bep+OfDz4v5JgEBGQAQyjk4hUCsgArVP5+IEMgIikHF0CoFaARGofToXJ5AREIGMo1MI1AqIQO3TuTiBjIAIZBydQqBWQARqn87FCWQERCDj6BQCtQIiUPt0Lk4gIyACGUenEKgVEIHap3NxAhkBEcg4OoVArYAI1D6dixPICIhAxtEpBGoFRKD26VycQEZABDKOTiFQKyACtU/n4gQyAiKQcXQKgVoBEah9OhcnkBEQgYyjUwjUCohA7dO5OIGMgAhkHJ1CoFZABGqfzsUJZAREIOPoFAK1AiJQ+3QuTiAjIAIZR6cQqBUQgdqnc3ECGQERyDg6hUCtgAjUPp2LE8gIiEDG0SkEagVEoPbpXJxARkAEMo5OIVArIAK1T+fiBDICIpBxdAqBWgERqH06FyeQERCBjKNTCNQKiEDt07k4gYyACGQcnUKgVkAEap/OxQlkBEQg4+gUArUCIlD7dC5OICMgAhlHpxCoFRCB2qdzcQIZARHIODqFQK2ACNQ+nYsTyAiIQMbRKQRqBUSg9ulcnEBGQAQyjk4hUCsgArVP5+IEMgIikHF0CoFaARGofToXJ5AREIGMo1MI1AqIQO3TuTiBjIAIZBydQqBWQARqn87FCWQERCDj6BQCtQIiUPt0Lk4gIyACGUenEKgVEIHap3NxAhkBEcg4OoVArYAI1D6dixPICIhAxtEpBGoFRKD26VycQEZABDKOTiFQKyACtU/n4gQyAiKQcXQKgVoBEah9OhcnkBEQgYyjUwjUCohA7dO5OIGMgAhkHJ1CoFZABGqfzsUJZAREIOPoFAK1AiJQ+3QuTiAjIAIZR6cQqBUQgdqnc3ECGQERyDg6hUCtwF8dFE4FdPS5tAAAAABJRU5ErkJggg==\"><figcaption>Bouncing Ball</figcaption>",
            "</figure>",
            "<p>Exciting, isn’t it? Took me five tries to catch it. Future examples will look better as screenshots, I promise.</p>",
            "<p>I suggest you follow along on CodeSandbox. Here’s one I prepared for you earlier: <a href=\"https://codesandbox.io/s/rrwz67jl04\">click me</a></p>"
          ]
        },
        {
          "lectureTitle": "Step 1: stub out App and Ball",
          "lectureLines": [
            "<h3 id=\"step-1-stub-out-app-and-ball\">Step 1: stub out App and Ball</h3>",
            "<p>We start with a skeleton: An <code style=\"white-space: pre-wrap;\">App</code> component rendering a <code style=\"white-space: pre-wrap;\">BouncingBall</code> component inside an SVG, and a <code style=\"white-space: pre-wrap;\">Ball</code> component.</p>",
            "<div class=\"sourceCode\" id=\"cb126\" data-caption=\"App component\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb126-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// index.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb126-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;react&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb126-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">{</span> render <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;react-dom&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb126-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb126-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> BouncingBall <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;./BouncingBall&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb126-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb126-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> App <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb126-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">&lt;</span>div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb126-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>svg width<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;800&quot;</span> height<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;600&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb126-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>BouncingBall max_h<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">600</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb126-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    &lt;/svg<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb126-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb126-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb126-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb126-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"at\" style=\"color: #7d9029;\">render</span>(<span class=\"op\" style=\"color: #666666;\">&lt;</span>App /<span class=\"op\" style=\"color: #666666;\">&gt;,</span> <span class=\"va\" style=\"color: #19177c;\">document</span>.<span class=\"at\" style=\"color: #7d9029;\">getElementById</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;root&quot;</span>))<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>App imports dependencies, imports <code style=\"white-space: pre-wrap;\">BouncingBall</code>, renders it all into a <code style=\"white-space: pre-wrap;\">root</code> DOM node. CodeSandbox gives us most of this code by default.</p>",
            "<div class=\"sourceCode\" id=\"cb127\" data-caption=\"Ball component\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb127-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Ball.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb127-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;react&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb127-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb127-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> Ball <span class=\"op\" style=\"color: #666666;\">=</span> (<span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y <span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">&lt;</span>circle cx<span class=\"op\" style=\"color: #666666;\">={</span>x<span class=\"op\" style=\"color: #666666;\">}</span> cy<span class=\"op\" style=\"color: #666666;\">={</span>y<span class=\"op\" style=\"color: #666666;\">}</span> r<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;5&quot;</span> /&gt;<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb127-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb127-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> Ball<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>We’re calling it a ball, but eh it’s a just a circle. You can make this more fun if you want. Right now it’s a black SVG circle that renders at a specified <code style=\"white-space: pre-wrap;\">x, y</code> coordinate with a radius of <code style=\"white-space: pre-wrap;\">5</code> pixels.</p>",
            "<p>It’s these coordinates that we’re going to play with to make the ball drop and bounce. Each time, React is going to re-render and move our ball to its new coordinates. Because we change them so quickly, it looks like the ball is animated. You’ll see.</p>",
            "<hr>",
            "<p>Those are the boring components. The animation game loop fun happens in <code style=\"white-space: pre-wrap;\">BouncingBall</code>.</p>"
          ]
        },
        {
          "lectureTitle": "Stub out BouncingBall",
          "lectureLines": [
            "<h3 id=\"step-2-stub-out-bouncingball\">Step 2: Stub out BouncingBall</h3>",
            "<p>We encapsulate everything in this component so that <code style=\"white-space: pre-wrap;\">App</code> doesn’t have to know about the details of our animation. App declaratively renders a bouncing ball and that’s it.</p>",
            "<div class=\"sourceCode\" id=\"cb128\" data-caption=\"BouncingBall component stub\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb128-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"op\" style=\"color: #666666;\">{</span> Component <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;react&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"im\">as</span> d3 <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;d3&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb128-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> BouncingBall <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> Component <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">constructor</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">super</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb128-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">5</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"dt\" style=\"color: #902000;\">vy</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">0</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb128-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">componentDidMount</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// start game loop</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">timer</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">timer</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">gameLoop</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb128-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">componentWillUnmount</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// stop loop</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">timer</span>.<span class=\"at\" style=\"color: #7d9029;\">stop</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb128-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  gameLoop <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// move ball by vy</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// increase vy to accelerate</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb128-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// render Ball at position y</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">&lt;</span>g /<span class=\"op\" style=\"color: #666666;\">&gt;;</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb128-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb128-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> BouncingBall<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>Nothing renders yet and we’re set up to get started.</p>",
            "<p>We start with default state: vertical position <code style=\"white-space: pre-wrap;\">y=5</code>, vertical speed <code style=\"white-space: pre-wrap;\">vy😮</code>.</p>",
            "<p><code style=\"white-space: pre-wrap;\">componentDidMount</code> fires off a d3 timer and <code style=\"white-space: pre-wrap;\">componentWillUnmount</code> stops it so we don’t have unwanted code running in the background. The timer calls <code style=\"white-space: pre-wrap;\">this.gameLoop</code> every 16 milliseconds, which translates to about 60 frames per second.</p>",
            "<p>D3 timers work like JavaScript’s own <code style=\"white-space: pre-wrap;\">setInterval</code>, but their implementation is more robust. They use <code style=\"white-space: pre-wrap;\">requestAnimationFrame</code> to save computer resources when possible, and default to <code style=\"white-space: pre-wrap;\">setInterval</code> otherwise.</p>",
            "<p>Unlike <code style=\"white-space: pre-wrap;\">setInterval</code> timers are also synced so their frames match up, can be restarted, stopped, etc. You should default to favoring <code style=\"white-space: pre-wrap;\">d3.timer</code> over <code style=\"white-space: pre-wrap;\">setInterval</code> or hacking your own <code style=\"white-space: pre-wrap;\">requestAnimationFrame</code> implementation.</p>"
          ]
        },
        {
          "lectureTitle": "Step 3: Rendering",
          "lectureLines": [
            "<h3 id=\"step-3-rendering\">Step 3: Rendering</h3>",
            "<p>To render our Ball we have to tweak BouncingBall’s <code style=\"white-space: pre-wrap;\">render</code> method. A small change. Try it yourself first.</p>",
            "<div class=\"sourceCode\" id=\"cb129\" data-caption=\"Render ball\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb129-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// BouncingBall.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb129-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> Ball <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;./Ball&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb129-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb129-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> App <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> Component <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb129-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb129-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb129-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// render Ball at position y</span></a>",
            "<a class=\"sourceLine\" id=\"cb129-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">&lt;</span>g<span class=\"op\" style=\"color: #666666;\">&gt;&lt;</span>Ball x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">10</span><span class=\"op\" style=\"color: #666666;\">}</span> y<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">y</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;&lt;/g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb129-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb129-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>Import our <code style=\"white-space: pre-wrap;\">Ball</code> component, render it at <code style=\"white-space: pre-wrap;\">x=10</code> and use <code style=\"white-space: pre-wrap;\">this.state.y</code> for the vertical coordinate.</p>",
            "<p>A black ball shows up on your screen. Like this:</p>",
            "<figure>",
            "<img alt=\"Black ball\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQEAAADWCAYAAADRoDfeAAAKCGlDQ1BJQ0MgUHJvZmlsZQAASImFlndUVNcWxs+90xtthqH33jsMIL036VVUhgGGOsJQxY4EFYgoIiKgBCRUBaOhxoKIYiEIKGBBM0gQUJ7BAqigvAskMcl7670966zzW9/s8909Z/64HwAkd2ZiYjwsAEACJ4Xr42QrGxQcIosbBxCAAR0AoMBkJSfaeHm5Iwz+2P9eCyNIN1L3tVa9/vP7/1mCEZHJLAAgL4QZrERuCsIHEfZLT0lc5TGEaVxkKITnVpm9xjB6lcPXWXStx8/HDmFNAPBkJpPLBoDIQHTZNBYb8SEGIazLiYjhILzqb8mKZkYgfAthzaj41AyE36/2JCRsQ3SSIsKq4X/xZP/NP/xPfyaT/ScnxKeyfv9dqzdCjuT4+yK7OLIkQRTQBvEgFWQAWZAIuGAbosQgSiRy9//9HGPtnB3SmQi2IydiABtEgxTkvONfvHzXnFJAOmAiPZGI4o587Fb/x3XLd/Q1V4h+56uW1AWAaS4isr9qTAUAOl4AQF34qim8RcY5AsDlAVYqN21dW716gAFEwA9oQAxIAwWgCrSAPjAG5sAaOABX4An8QDDYAljIvAnIVOlgJ9gHckAeOAKOg1JQAc6AOnAOXABt4BK4Bm6Cu2AADIMngAcmwSswBxbAEgRBOIgCUSExSAZSgjQgfYgBWUIOkDvkAwVDYRAb4kCp0E5oP5QHFUKlUCVUD/0AdUDXoNvQIPQIGodmoLfQJxgFk2EaLAUrwzowA7aB3WA/eDPMhpPgTDgbPgyXwFXwWbgVvgbfhYdhHvwKnkcBFAlFR8mhtFAMlB3KExWCikJxUbtRuahiVBWqCdWJ6kXdR/FQs6iPaCyaipZFa6HN0c5ofzQLnYTejc5Hl6Lr0K3oHvR99Dh6Dv0FQ8FIYjQwZhgXTBCGjUnH5GCKMTWYFswNzDBmErOAxWLpWBWsCdYZG4yNxe7A5mNPYZuxXdhB7AR2HofDieE0cBY4TxwTl4LLwZ3EncVdxQ3hJnEf8CS8DF4f74gPwXPwWfhifAP+Cn4IP4VfIggQlAhmBE9CBGE7oYBQTegk3CNMEpaIgkQVogXRjxhL3EcsITYRbxDHiO9IJJI8yZTkTYoh7SWVkM6TbpHGSR/JQmR1sh05lJxKPkyuJXeRH5HfUSgUZYo1JYSSQjlMqadcpzyjfOCj8mnzufBF8O3hK+Nr5Rvie81P4Ffit+Hfwp/JX8x/kf8e/6wAQUBZwE6AKbBboEygQ2BUYF6QKqgn6CmYIJgv2CB4W3BaCCekLOQgFCGULXRG6LrQBBVFVaDaUVnU/dRq6g3qJA1LU6G50GJpebRztH7anLCQsKFwgHCGcJnwZWEeHUVXprvQ4+kF9Av0EfonESkRG5FIkUMiTSJDIouiEqLWopGiuaLNosOin8RkxRzE4sSOirWJPRVHi6uLe4uni58WvyE+K0GTMJdgSeRKXJB4LAlLqkv6SO6QPCPZJzkvJS3lJJUodVLqutSsNF3aWjpWukj6ivSMDFXGUiZGpkjmqsxLWWFZG9l42RLZHtk5OUk5Z7lUuUq5frkleRV5f/ks+Wb5pwpEBYZClEKRQrfCnKKMoofiTsVGxcdKBCWGUrTSCaVepUVlFeVA5QPKbcrTKqIqLiqZKo0qY6oUVSvVJNUq1QdqWDWGWpzaKbUBdVjdSD1avUz9ngasYawRo3FKY1ATo2mqydGs0hzVImvZaKVpNWqNa9O13bWztNu0X+so6oToHNXp1fmia6Qbr1ut+0RPSM9VL0uvU++tvro+S79M/4EBxcDRYI9Bu8EbQw3DSMPThg+NqEYeRgeMuo0+G5sYc42bjGdMFE3CTMpNRhk0hhcjn3HLFGNqa7rH9JLpRzNjsxSzC2a/mWuZx5k3mE9vUNkQuaF6w4SFvAXTotKCZylrGWb5nSXPSs6KaVVl9dxawTrCusZ6ykbNJtbmrM1rW11brm2L7aKdmd0uuy57lL2Tfa59v4OQg79DqcMzR3lHtmOj45yTkdMOpy5njLOb81HnURcpF5ZLvcucq4nrLtceN7Kbr1up23N3dXeue6cH7OHqccxjbKPSRs7GNk/g6eJ5zPOpl4pXktdP3lhvL+8y7xc+ej47fXp9qb5bfRt8F/xs/Qr8nvir+qf6dwfwB4QG1AcsBtoHFgbygnSCdgXdDRYPjgluD8GFBITUhMxvcth0fNNkqFFoTujIZpXNGZtvbxHfEr/l8lb+rcytF8MwYYFhDWHLTE9mFXM+3CW8PHyOZcc6wXoVYR1RFDETaRFZGDkVZRFVGDXNtmAfY89EW0UXR8/G2MWUxryJdY6tiF2M84yrjVuJD4xvTsAnhCV0cIQ4cZyebdLbMrYNJmok5iTyksySjifNcd24NclQ8ubk9hQa8vLsS1VN/SZ1PM0yrSztQ3pA+sUMwQxORt929e2Htk9lOmZ+vwO9g7Wje6fczn07x3fZ7KrcDe0O3929R2FP9p7JvU576/YR98Xt+zlLN6sw6/3+wP2d2VLZe7MnvnH6pjGHL4ebM3rA/EDFQfTBmIP9hwwOnTz0JTci906ebl5x3nI+K//Ot3rflny7cjjqcH+BccHpI9gjnCMjR62O1hUKFmYWThzzONZaJFuUW/T++Nbjt4sNiytOEE+knuCVuJe0n1Q8eeTkcml06XCZbVlzuWT5ofLFUxGnhk5bn26qkKrIq/j0Xcx3DyudKlurlKuKz2DPpJ15UR1Q3fs94/v6GvGavJrPtZxaXp1PXU+9SX19g2RDQSPcmNo4czb07MA5+3PtTVpNlc305rzz4Hzq+Zc/hP0wcsHtQvdFxsWmH5V+LG+htuS2Qq3bW+faott47cHtgx2uHd2d5p0tP2n/VHtJ7lLZZeHLBVeIV7KvrFzNvDrfldg1e419baJ7a/eT60HXH/R49/TfcLtx66bjzeu9Nr1Xb1ncunTb7HbHHcadtrvGd1v7jPpafjb6uaXfuL/1nsm99gHTgc7BDYNXhqyGrt23v3/zgcuDu8MbhwdH/EcejoaO8h5GPJx+FP/ozeO0x0tP9o5hxnKfCjwtfib5rOoXtV+aeca8y+P2433PfZ8/mWBNvPo1+dflyewXlBfFUzJT9dP605dmHGcGXm56Ofkq8dXSbM6/BP9V/lr19Y+/Wf/WNxc0N/mG+2blbf47sXe17w3fd897zT9bSFhYWsz9IPah7iPjY++nwE9TS+nLuOWSz2qfO7+4fRlbSVhZSWRymWtRAIUsOCoKgLe1AFCCkewwgGQhvvXM9Xuegf6SbP5g8HnoKy9vW89la2UMQK01AP57AXBHMsppZCkhTEb21YjoZw1gA4M/1++VHGWgv/4MMheJJh9WVt5JAYDrRJ7DXVlZOrWy8rkaGfYRAF1J/3e2f/B6HlwtLJKSC1Xo4viVPjIB/LP+DYgVvxTNfraPAAABnWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyI+CiAgICAgICAgIDxleGlmOlBpeGVsWERpbWVuc2lvbj4yNTc8L2V4aWY6UGl4ZWxYRGltZW5zaW9uPgogICAgICAgICA8ZXhpZjpQaXhlbFlEaW1lbnNpb24+MjE0PC9leGlmOlBpeGVsWURpbWVuc2lvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CrQ8pN4AAAbsSURBVHgB7drtTZxXFIXRIUohphOoxFCJoRLcCdAJnTh+LVmxgsiAtaNoa6/5k8gmV/ese/QEf1x8+/45+RAgMCvwx+zkBidA4IeACFgEAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYnIAJ2gMC4gAiML4DxCYiAHSAwLiAC4wtgfAIiYAcIjAuIwPgCGJ+ACNgBAuMCIjC+AMYn8GcjwcvLy+nr16+n5+fnH9f/9OnT6cuXL6fjnz4ECHxM4OLb98/H/pP/96ufnp5O19fXry5xBODz58+nu7u7Vz/nBwgQeFugKgLHdwCXl5dvTnOE4PHx0XcEbwr5CQKvBap+T+D+/v71BL/8yBGJ29vbX37EvxIgcE6gKgLHLwXOfY4Q+BAg8H6Bql8OXFxcvGuyst/meNdMvojAfyVQ9Z3A1dXVWYebm5uzX+MLCBD4W6AqAsfv/p/7vOdrzp3h5wksCVRF4Pi//L/9n/74TuE93y0sPbBZCZwTqIrAMczDw8OPvxj062DHHw0ef1no+ONBHwIEPiZQ9RuD/xzt+JOAIwA+BAj8vkB1BH5/bP8lAQI/Bep+OfDz4v5JgEBGQAQyjk4hUCsgArVP5+IEMgIikHF0CoFaARGofToXJ5AREIGMo1MI1AqIQO3TuTiBjIAIZBydQqBWQARqn87FCWQERCDj6BQCtQIiUPt0Lk4gIyACGUenEKgVEIHap3NxAhkBEcg4OoVArYAI1D6dixPICIhAxtEpBGoFRKD26VycQEZABDKOTiFQKyACtU/n4gQyAiKQcXQKgVoBEah9OhcnkBEQgYyjUwjUCohA7dO5OIGMgAhkHJ1CoFZABGqfzsUJZAREIOPoFAK1AiJQ+3QuTiAjIAIZR6cQqBUQgdqnc3ECGQERyDg6hUCtgAjUPp2LE8gIiEDG0SkEagVEoPbpXJxARkAEMo5OIVArIAK1T+fiBDICIpBxdAqBWgERqH06FyeQERCBjKNTCNQKiEDt07k4gYyACGQcnUKgVkAEap/OxQlkBEQg4+gUArUCIlD7dC5OICMgAhlHpxCoFRCB2qdzcQIZARHIODqFQK2ACNQ+nYsTyAiIQMbRKQRqBUSg9ulcnEBGQAQyjk4hUCsgArVP5+IEMgIikHF0CoFaARGofToXJ5AREIGMo1MI1AqIQO3TuTiBjIAIZBydQqBWQARqn87FCWQERCDj6BQCtQIiUPt0Lk4gIyACGUenEKgVEIHap3NxAhkBEcg4OoVArYAI1D6dixPICIhAxtEpBGoFRKD26VycQEZABDKOTiFQKyACtU/n4gQyAiKQcXQKgVoBEah9OhcnkBEQgYyjUwjUCohA7dO5OIGMgAhkHJ1CoFZABGqfzsUJZAREIOPoFAK1AiJQ+3QuTiAjIAIZR6cQqBUQgdqnc3ECGQERyDg6hUCtwF8dFE4FdPS5tAAAAABJRU5ErkJggg==\"><figcaption>Black ball</figcaption>",
            "</figure>"
          ]
        },
        {
          "lectureTitle": "Step 4: The Game Loop",
          "lectureLines": [
            "<h3 id=\"step-4-the-game-loop\">Step 4: The Game Loop</h3>",
            "<p>Our game loop is already running. It’s that <code style=\"white-space: pre-wrap;\">d3.timer</code> we started on component mount.</p>",
            "<p>What do you think we should do every time <code style=\"white-space: pre-wrap;\">gameLoop</code> is called?</p>",
            "<p>Move the ball. Accelerate. Bounce it back. 🏀</p>",
            "<p>The physics is tricky to think about. Few students at my workshops figure this one out and that’s the point: Game loop gives you control. All the control.</p>",
            "<div class=\"sourceCode\" id=\"cb130\" data-caption=\"Bouncy ball at 60fps\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb130-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// BouncingBall.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb130-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">componentDidMount</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb130-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// start game loop</span></a>",
            "<a class=\"sourceLine\" id=\"cb130-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">timer</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">timer</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">gameLoop</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb130-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb130-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb130-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">componentWillUnmount</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb130-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">timer</span>.<span class=\"at\" style=\"color: #7d9029;\">stop</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb130-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb130-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb130-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  gameLoop <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb130-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> <span class=\"op\" style=\"color: #666666;\">{</span> y<span class=\"op\" style=\"color: #666666;\">,</span> vy <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb130-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb130-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (y <span class=\"op\" style=\"color: #666666;\">&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">max_h</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb130-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      vy <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">-</span>vy <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"fl\" style=\"color: #40a070;\">.87</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb130-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb130-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb130-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">setState</span>(<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb130-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> y <span class=\"op\" style=\"color: #666666;\">+</span> vy<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb130-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"dt\" style=\"color: #902000;\">vy</span><span class=\"op\" style=\"color: #666666;\">:</span> vy <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"fl\" style=\"color: #40a070;\">0.3</span></a>",
            "<a class=\"sourceLine\" id=\"cb130-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb130-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>Our <code style=\"white-space: pre-wrap;\">gameLoop</code> method is called every 16 milliseconds give or take. Sometimes more, if the computer is busy, low on batter, or the tab is left inactive for too long</p>",
            "<p>Bounce physics go like this:</p>",
            "<ul>",
            "<li>add vertical speed, <code style=\"white-space: pre-wrap;\">vy</code>, to position, <code style=\"white-space: pre-wrap;\">y</code></li>",
            "<li>increased <code style=\"white-space: pre-wrap;\">vy</code> by amount of acceleration</li>",
            "<li>if position is more than max, bounce</li>",
            "<li>bounce means invert speed</li>",
            "<li>bounce means energy loss, reduce speed by 13%</li>",
            "</ul>",
            "<p>High school physics my friend. You might not remember.</p>",
            "<p>Speed tells you how much an object moves per unit of time. Our speed starts at 5 pixels per frame.</p>",
            "<p>Acceleration tells you how much speed increases per unit of time. Gravity makes you fall 10 meters per second faster every second. Our gravity looks best at 0.3 pixels per frame.</p>",
            "<p>Bounce is what really breaks people’s brains.</p>",
            "<p>I think it’s one of Newton’s laws? Or a derivation from there. Bouncing means balls maintain the same speed, but change direction. Our wall is perpendicular to the path of travel, so the speed inverts.</p>",
            "<p>We add some energy loss to make the bounce more realistic.</p>",
            "<p>Gravity acceleration points the same downwards direction as always. Except now it’s slowing down the ball instead of speeding it up.</p>",
            "<p>Eventually speed reaches zero and the ball starts falling again.</p>",
            "<figure>",
            "<img src=\"https://media.giphy.com/media/12NUbkX6p4xOO4/giphy.gif\" alt=\"Magic\"><figcaption>Magic</figcaption>",
            "</figure>",
            "<p>Here’s a CodeSandbox with the <a href=\"https://codesandbox.io/s/o4vk8zkn96\">final bouncy ball code</a>.</p>",
            "<p>Experiment with multiple balls. Start them at different heights. Play with different factors in those equations. It’s fun if you’re a nerd like me.</p>"
          ]
        },
        {
          "lectureTitle": "Step 5: Correcting for time and frame drops",
          "lectureLines": [
            "<h3 id=\"step-5-correcting-for-time-and-frame-drops\">Step 5: Correcting for time and frame drops</h3>",
            "<p>If you run the CodeSandbox a few times, you’ll notice two bugs.</p>",
            "<ol type=\"1\">",
            "<li><p>Sometimes our ball gets trapped at the bottom of the bounce. We won’t fix this one; it’s tricky.</p></li>",
            "<li><p>When you slow down your computer, the ball lags. That’s not how things behave in real life.</p></li>",
            "</ol>",
            "<p>We’re dealing with dropped frames.</p>",
            "<p>Modern browsers slow down JavaScript in tabs that aren’t focused, on computers running off batteries, when batteries get low… many different reasons. To make our animation silky smooth, we have to take this into account.</p>",
            "<p>That involves calculating how many frames we dropped and adjusting our physics.</p>",
            "<div class=\"sourceCode\" id=\"cb131\" data-caption=\"Adjust for frame drops\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb131-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// BouncingBall.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb131-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  gameLoop <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb131-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> <span class=\"op\" style=\"color: #666666;\">{</span> y<span class=\"op\" style=\"color: #666666;\">,</span> vy<span class=\"op\" style=\"color: #666666;\">,</span> lastFrame <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb131-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb131-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> frames <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"dv\" style=\"color: #40a070;\">1</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb131-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb131-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (lastFrame) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb131-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      frames <span class=\"op\" style=\"color: #666666;\">=</span> (<span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">now</span>() <span class=\"op\" style=\"color: #666666;\">-</span> lastFrame) / (<span class=\"dv\" style=\"color: #40a070;\">1000</span> / <span class=\"dv\" style=\"color: #40a070;\">60</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb131-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb131-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb131-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">for</span> (<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> i <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">;</span> i <span class=\"op\" style=\"color: #666666;\">&lt;</span> frames<span class=\"op\" style=\"color: #666666;\">;</span> i<span class=\"op\" style=\"color: #666666;\">++</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb131-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (y <span class=\"op\" style=\"color: #666666;\">&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">max_h</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb131-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        vy <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">-</span>vy <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"fl\" style=\"color: #40a070;\">0.87</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb131-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb131-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb131-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      y <span class=\"op\" style=\"color: #666666;\">=</span> y <span class=\"op\" style=\"color: #666666;\">+</span> vy<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb131-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      vy <span class=\"op\" style=\"color: #666666;\">=</span> vy <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"fl\" style=\"color: #40a070;\">0.3</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb131-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb131-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb131-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">setState</span>(<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb131-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      y<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb131-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      vy<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb131-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"dt\" style=\"color: #902000;\">lastFrame</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">now</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb131-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb131-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">};</span></a></code></pre></div>",
            "<p>We add <code style=\"white-space: pre-wrap;\">lastFrame</code> to game state and set it with <code style=\"white-space: pre-wrap;\">d3.now()</code>. This gives us a high resolution timestamp that’s pegged to <code style=\"white-space: pre-wrap;\">requestAnimationFrame</code>. D3 guarantees that every <code style=\"white-space: pre-wrap;\">d3.now()</code> called within the same frame gets the same timestamp.</p>",
            "<p><code style=\"white-space: pre-wrap;\">(d3.now()-lastFrame)/16</code> tells us how many frames were meant to have happened since last iteration. Most of the time, this value will be <code style=\"white-space: pre-wrap;\">1</code>.</p>",
            "<p>We use <code style=\"white-space: pre-wrap;\">frames</code> to simulate as many frames as we need in a quick loop. Run the same calculations with the same height checks. This simulates the missing frames and makes our animation look smooth.</p>",
            "<p>Try it out on CodeSandbox: <a href=\"https://codesandbox.io/s/8n3p6720wl\">click me for time-fixed bouncy ball</a></p>"
          ]
        },
        {
          "lectureTitle": "Game loop recap",
          "lectureLines": [
            "<h2 id=\"game-loop-recap\">Game loop recap</h2>",
            "<p>You now know how to build a game loop and use it to run custom animations. 👏</p>",
            "<ul>",
            "<li>render from state</li>",
            "<li>change state 60 times per second</li>",
            "<li>reason about movement in snapshots</li>",
            "<li>deal with dropped frames</li>",
            "<li>complete control</li>",
            "</ul>",
            "<p>Complete control is nice, but the mental acrobatics are not. Getting game loops just right is hard.</p>",
            "<p>And that’s why I recommend transitions in most cases. Transitions can handle all of that for you out of the box.</p>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "Use transitions for simple animation",
      "lectures": [
        {
          "lectureTitle": "Transition basics",
          "lectureLines": [
            "<h1 id=\"using-transitions-for-simple-animation\">Using transitions for simple animation</h1>",
            "<p>Game loops are great for fine-grained control. And when all you need is a little flourish on user action, that’s where transitions shine.</p>",
            "<p>No details, just keyframes.</p>",
            "<p>Transitions let you animate SVG elements by saying <em>“I want this property to change to this new value and take this long to do so”</em>.</p>",
            "<p>Start-end keyframes are the simplest. You define the starting position. Start a transition. Define the end position. D3 figures out the rest. Everything from calculating the perfect rate of change to match your start and end values and your duration, to <em>what</em> to change and handling dropped frames.</p>",
            "<p>Quite magical.</p>",
            "<p>You can also sequence transitions to create complex keyframe-based animation. Each new transition definition is like a new keyframe. D3 figures out the rest.</p>",
            "<p>Better yet, you can use easing functions to make your animation look more natural. Make rate of change follow a mathematical curve to create smooth natural movement.</p>",
            "<p>You can read more about the <em>why</em> of easing functions in Disney’s <a href=\"https://en.wikipedia.org/wiki/12_basic_principles_of_animation\">12 Basic Principles of Animation</a>. Bottom line is that it makes your animation feel natural.</p>",
            "<p><em>How</em> they work is hard to explain. You can grok part of it in my <a href=\"https://swizec.com/blog/silky-smooth-piechart-transitions-react-d3js/swizec/8258\">Custom transition tweens</a> article.</p>",
            "<p>But don’t worry about it. All you have to know is that many easing functions exist. <a href=\"https://easings.net/\">easings.net</a> lists the common ones. D3 implements everything on that list.</p>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/easings.net.png\" alt=\"Common easing functions\"><figcaption>Common easing functions</figcaption>",
            "</figure>",
            "<p>Let’s try an example: A swipe transition.</p>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "Build a simple transition component",
      "lectures": [
        {
          "lectureTitle": "A swipe transition component",
          "lectureLines": [
            "<h2 id=\"swipe-transition\">Swipe transition</h2>",
            "<p>Our goal is to build a declarative component fully controlled by props. We pass in the <code style=\"white-space: pre-wrap;\">x</code> coordinate and the coordinate figures out the rest.</p>",
            "<p>We shouldn’t care about the transition or how long it takes. That’s up to the component. We just change <code style=\"white-space: pre-wrap;\">x</code>.</p>",
            "<p>You can see it in action <a href=\"https://codesandbox.io/s/618mr9r6nr\">on CodeSandbox, here</a>. Tweak params, see what happens. Follow along as I explain how it works.</p>",
            "<p><img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/ball-swipe-left.png\" alt=\"Ball on the left before you click\"> <img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/ball-swipe-right.png\" alt=\"Ball on the right before you click\"></p>"
          ]
        },
        {
          "lectureTitle": "App.js",
          "lectureLines": [
            "<h3 id=\"app.js\">App.js</h3>",
            "<p>Like we said: the hard stuff happens inside our Ball component. That means App has render our Ball and implement a mechanism to toggle the <code style=\"white-space: pre-wrap;\">x</code> coordinate between two states: Left and right.</p>",
            "<div class=\"sourceCode\" id=\"cb132\" data-caption=\"Rendering a declarative transitionable component\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb132-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> App <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb132-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  state <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb132-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">ballLeft</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">true</span></a>",
            "<a class=\"sourceLine\" id=\"cb132-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb132-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  ballJump <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb132-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">setState</span>(<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb132-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"dt\" style=\"color: #902000;\">ballLeft</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"op\" style=\"color: #666666;\">!</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">ballLeft</span></a>",
            "<a class=\"sourceLine\" id=\"cb132-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb132-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb132-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb132-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> ballLeft <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb132-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb132-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>div style<span class=\"op\" style=\"color: #666666;\">={</span>styles<span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb132-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>h1<span class=\"op\" style=\"color: #666666;\">&gt;</span>D3 transitions <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">in</span> React <span class=\"fl\" style=\"color: #40a070;\">16.3</span> <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"st\" style=\"color: #4070a0;\">&quot;</span><span class=\"sc\" style=\"color: #4070a0;\">\\u2728</span><span class=\"st\" style=\"color: #4070a0;\">&quot;</span><span class=\"op\" style=\"color: #666666;\">}</span>&lt;/h1<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb132-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>p<span class=\"op\" style=\"color: #666666;\">&gt;</span>Click the <span class=\"dt\" style=\"color: #902000;\">ball </span><span class=\"op\" style=\"color: #666666;\">:</span><span class=\"dt\" style=\"color: #902000;\">point_down</span><span class=\"op\" style=\"color: #666666;\">:</span>&lt;/p<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb132-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>svg style<span class=\"op\" style=\"color: #666666;\">={{</span> <span class=\"dt\">width</span><span class=\"op\">:</span> <span class=\"st\">&quot;300&quot;</span><span class=\"op\">,</span> <span class=\"dt\">height</span><span class=\"op\">:</span> <span class=\"st\">&quot;300px&quot;</span> <span class=\"op\">}}</span> onClick<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">ballJump</span><span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb132-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          <span class=\"op\" style=\"color: #666666;\">&lt;</span>Ball x<span class=\"op\" style=\"color: #666666;\">={</span>ballLeft <span class=\"op\" style=\"color: #666666;\">?</span> <span class=\"dv\" style=\"color: #40a070;\">15</span> : <span class=\"dv\" style=\"color: #40a070;\">250</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb132-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        &lt;/svg<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb132-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb132-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb132-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb132-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>Typical class based component:</p>",
            "<ol type=\"1\">",
            "<li>State holding a <code style=\"white-space: pre-wrap;\">ballLeft</code> boolean</li>",
            "<li>A method to toggle said boolean</li>",
            "<li>A render method that renders an SVG with an <code style=\"white-space: pre-wrap;\">onClick</code> event</li>",
            "</ol>",
            "<p>When <code style=\"white-space: pre-wrap;\">state.ballLeft</code> is true, ball renders on the left. When it’s false, on the right. Left and right are hardcoded <code style=\"white-space: pre-wrap;\">x</code> coordinates.</p>",
            "<p>Ball component handles the rest.</p>"
          ]
        },
        {
          "lectureTitle": "Ball.js",
          "lectureLines": [
            "<h3 id=\"ball.js\">Ball.js</h3>",
            "<p>You’ve rendered a ball before: It’s an SVG circle. You can make it fancier, but that’s not the point. The point are transitions.</p>",
            "<p>The way D3 transitions work with React feels like combining the blackbox and full integration approaches. Full integration for rendering, switch to blackbox for the transition, release control back to React. 🤯</p>",
            "<div class=\"sourceCode\" id=\"cb133\" data-caption=\"Rendering a ball\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb133-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Ball <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">PureComponent</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb133-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">constructor</span>(props) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb133-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">super</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb133-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb133-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">x</span></a>",
            "<a class=\"sourceLine\" id=\"cb133-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb133-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb133-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb133-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  circleRef <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">createRef</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb133-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb133-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb133-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb133-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb133-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb133-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">&lt;</span>circle r<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;10&quot;</span> cx<span class=\"op\" style=\"color: #666666;\">={</span>x<span class=\"op\" style=\"color: #666666;\">}</span> cy<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">10</span><span class=\"op\" style=\"color: #666666;\">}</span> ref<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">circleRef</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb133-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb133-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>We render a <code style=\"white-space: pre-wrap;\">circle</code> at <code style=\"white-space: pre-wrap;\">x</code> coordinate and a random <code style=\"white-space: pre-wrap;\">y</code> and give it a React ref. We’ll use this ref to give control of the DOM node to D3. Just like blackbox components.</p>",
            "<p>The interesting part is that we use a constructor to copy our <code style=\"white-space: pre-wrap;\">x</code> prop into state. That’s because we’re going to use props as a sort of staging area for what we <em>want</em> <code style=\"white-space: pre-wrap;\">x</code> to be, not what it currently is.</p>",
            "<p>Props change, state stays the same. React doesn’t move our ball.</p>"
          ]
        },
        {
          "lectureTitle": "Ball.js state transition",
          "lectureLines": [
            "<h3 id=\"ball.js-state-transition\">Ball.js state transition</h3>",
            "<p>What does move our ball, is our transition. We do that in <code style=\"white-space: pre-wrap;\">componentDidUpdate</code>.</p>",
            "<div class=\"sourceCode\" id=\"cb134\" data-caption=\"D3 transition our ball\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb134-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">componentDidUpdate</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb134-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> el <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">select</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">circleRef</span>.<span class=\"at\" style=\"color: #7d9029;\">current</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb134-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb134-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">el</span>.<span class=\"at\" style=\"color: #7d9029;\">transition</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb134-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">duration</span>(<span class=\"dv\" style=\"color: #40a070;\">800</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb134-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">ease</span>(<span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">easeBounceOut</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb134-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;cx&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"op\" style=\"color: #666666;\">:</span><span class=\"dt\" style=\"color: #902000;\">satisfied</span><span class=\"op\" style=\"color: #666666;\">:</span></a>",
            "<a class=\"sourceLine\" id=\"cb134-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">on</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;end&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb134-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">setState</span>(<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb134-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">x</span></a>",
            "<a class=\"sourceLine\" id=\"cb134-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb134-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb134-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>React calls <code style=\"white-space: pre-wrap;\">componentDidUpdate</code> when props or state change. We use this as an opportunity to run a D3 transition on our DOM node.</p>",
            "<p>Here’s what happens:</p>",
            "<ol type=\"1\">",
            "<li>Take the node with <code style=\"white-space: pre-wrap;\">d3.select</code></li>",
            "<li>Start a transition with <code style=\"white-space: pre-wrap;\">.transition</code></li>",
            "<li>Specify 800ms duration with <code style=\"white-space: pre-wrap;\">.duration</code></li>",
            "<li>Add an easing function for that beautiful bounce effect with <code style=\"white-space: pre-wrap;\">.ease</code></li>",
            "<li>Define which attributes are changing with <code style=\"white-space: pre-wrap;\">.attr</code></li>",
            "<li>Use <code style=\"white-space: pre-wrap;\">.on(\"end\")</code> to sync React worldview with reality after transition ends</li>",
            "</ol>",
            "<p>What’s great about D3 transitions is that D3 figures everything for you. You can throw as many attributes at a transition as you want. The attributes can be as complex as you can imagine.</p>",
            "<p>D3’s interpolation methods will figure it out for you. Numbers, strings, colors, it all works great.</p>",
            "<p>After a transition is done, I like to sync React’s worldview with what the transition changed. It’s not strictly required but it can sometimes lead to React freaking out that you moved an element.</p>",
            "<p>Play around. Try adding some more transitions. Make the ball move diagonally. Make it go right then down. It’s fun. 😊</p>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "Enter-update-exit animation",
      "lectures": [
        {
          "lectureTitle": "Enter-update-exit animation intro",
          "lectureLines": [
            "<h1 id=\"enter-exit-animation\">Enter/update/exit animation</h1>",
            "<p>Now that you know how to use transitions, it’s time to take it up a notch. Enter/exit animations.</p>",
            "<p>Enter/exit animations are the most common use of transitions. They’re what happens when a new element enters or exits the picture. For example: in visualizations like this famous <a href=\"https://www.youtube.com/watch?v=LLCF7vPanrY\">Nuclear Detonation Timeline</a> by Isao Hashimoto. Each new Boom! flashes to look like an explosion.</p>",
            "<p>I don’t know how Hashimoto did it, but with React &amp; D3, you’d do it with enter/exit transitions.</p>",
            "<p>Another favorite of mine is this <a href=\"https://bl.ocks.org/mbostock/3808234\">animated alphabet</a> example by Mike Bostock, the creator of D3, that showcases enter/update/exit transitions.</p>",
            "<p>That’s what we’re going to build: An animated alphabet. New letters fall down and are green, updated letters move right or left, deleted letters are red and fall down.</p>",
            "<p>You can play with a more advanced version <a href=\"https://swizec.github.io/react-d3-enter-exit-transitions/\">here</a>. Same principle as the alphabet, but it animates what you type.</p>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/typing-screenshot.png\" alt=\"Typing animation screenshot\"><figcaption>Typing animation screenshot</figcaption>",
            "</figure>",
            "<p>We’re building the alphabet version because the <a href=\"https://swizec.com/blog/animated-string-diffing-with-react-and-d3/swizec/6952\">string diffing algorithm</a> is a pain to explain. I learned that the hard way when giving workshops on React and D3…</p>",
            "<figure>",
            "<img src=\"https://cdn.staticaly.com/gh/hsribei/react-d3js-es6-ebook/024f7e0ae8547f5288f61bc442370f0f689d84eb/manuscript/resources/images/es6v2/string-diffing.jpg\" alt=\"String diffing algorithm sketch\"><figcaption>String diffing algorithm sketch</figcaption>",
            "</figure>",
            "<p>See?</p>",
            "<p>Easy on paper, but the code is long and weird. That, or I’m bad at implementing it. Either way, it’s too tangential to explain here. You can <a href=\"https://swizec.com/blog/animated-string-diffing-with-react-and-d3/swizec/6952\">read the article about it</a>.</p>"
          ]
        },
        {
          "lectureTitle": "Build a declarative animated alphabet",
          "lectureLines": [
            "<h2 id=\"animated-alphabet\">Animated alphabet</h2>",
            "<p>Our goal is to render a random subset of the alphabet. Every time the set updates, old letters transition out, new letters transition in, and updated letters transition into a new position.</p>",
            "<p>We need two components:</p>",
            "<ul>",
            "<li><code style=\"white-space: pre-wrap;\">Alphabet</code>, which creates random lists of letters every 1.5 seconds, then maps through them to render <code style=\"white-space: pre-wrap;\">Letter</code> components</li>",
            "<li><code style=\"white-space: pre-wrap;\">Letter</code>, which renders an SVG text element and takes care of its own enter/update/exit transitions</li>",
            "</ul>",
            "<p>You can see the full code on GitHub <a href=\"https://github.com/Swizec/react-d3-enter-exit-transitions/blob/master/src/components/Alphabet.jsx\">here</a>.</p>"
          ]
        },
        {
          "lectureTitle": "Project setup",
          "lectureLines": [
            "<h3 id=\"project-setup\">Project setup</h3>",
            "<p>To get started you’ll need a project. Either start one with <code style=\"white-space: pre-wrap;\">create-react-app</code> or in CodeSandbox. Either will work.</p>",
            "<p>You’ll need a base App component that renders an SVG with an <code style=\"white-space: pre-wrap;\">&lt;Alphabet&gt;</code> child. Our component is self-contained so that’s all you need.</p>",
            "<p>Something like this 👇</p>",
            "<div class=\"sourceCode\" id=\"cb135\" data-caption=\"Base App component\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb135-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> Alphabet <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./components/Alphabet`;</span></a>",
            "<a class=\"sourceLine\" id=\"cb135-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb135-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> App <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb135-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">&lt;</span>svg width<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;100%&quot;</span> height<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;600&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb135-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>Alphabet x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">32</span><span class=\"op\" style=\"color: #666666;\">}</span> y<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">300</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb135-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  &lt;/svg<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb135-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">)</a></code></pre></div>",
            "<p>I follow the convention of putting components in a <code style=\"white-space: pre-wrap;\">src/components</code> directory. You don’t have to.</p>",
            "<p>Remember to install dependencies: d3 and react-transition-group</p>"
          ]
        },
        {
          "lectureTitle": "The Alphabet component",
          "lectureLines": [
            "<h3 id=\"the-alphabet-component\">The Alphabet component</h3>",
            "<p>The <code style=\"white-space: pre-wrap;\">Alphabet</code> component holds a list of letters in component state and renders a collection of <code style=\"white-space: pre-wrap;\">Letter</code> components in a loop.</p>",
            "<p>We start with a skeleton like this:</p>",
            "<div class=\"sourceCode\" id=\"cb136\" data-caption=\"Alphabet skeleton\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb136-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Alphabet.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb136-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;react&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb136-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"im\">as</span> d3 <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;d3&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb136-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">{</span> TransitionGroup <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;react-transition-group&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb136-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb136-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> Letter <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;./Letter&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb136-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb136-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Alphabet <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb136-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">static</span> letters <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;abcdefghijklmnopqrstuvwxyz&quot;</span>.<span class=\"at\" style=\"color: #7d9029;\">split</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;&quot;</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb136-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    state <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">alphabet</span><span class=\"op\" style=\"color: #666666;\">:</span> [] <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb136-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb136-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">componentDidMount</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb136-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// start interval</span></a>",
            "<a class=\"sourceLine\" id=\"cb136-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb136-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb136-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    shuffleAlphabet <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb136-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">       <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// generate new alphabet</span></a>",
            "<a class=\"sourceLine\" id=\"cb136-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb136-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb136-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb136-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> transform <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"vs\" style=\"color: #4070a0;\">`translate(</span><span class=\"sc\" style=\"color: #4070a0;\">${</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">x</span><span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">, </span><span class=\"sc\" style=\"color: #4070a0;\">${</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">y</span><span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">)`</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb136-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb136-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb136-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// spit out letters</span></a>",
            "<a class=\"sourceLine\" id=\"cb136-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb136-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb136-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb136-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb136-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> Alphabet<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>We import dependencies and define the <code style=\"white-space: pre-wrap;\">Alphabet</code> component. It keeps a list of available letters in a static <code style=\"white-space: pre-wrap;\">letters</code> property and an empty <code style=\"white-space: pre-wrap;\">alphabet</code> in component state.</p>",
            "<p>We’ll start a <code style=\"white-space: pre-wrap;\">d3.interval</code> on <code style=\"white-space: pre-wrap;\">componentDidMount</code> and use <code style=\"white-space: pre-wrap;\">shuffleAlphabet</code> to generate alphabet subsets.</p>",
            "<p>To showcase enter-update-exit transitions, we create a new alphabet every second and a half. Using <code style=\"white-space: pre-wrap;\">d3.interval</code> lets us do that in a browser friendly way.</p>",
            "<div class=\"sourceCode\" id=\"cb137\" data-caption=\"Alphabet game loop\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb137-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Alphabet/index.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb137-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">componentDidMount</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb137-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">interval</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">shuffleAlphabet</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">1500</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb137-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb137-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb137-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    shuffleAlphabet <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb137-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> alphabet <span class=\"op\" style=\"color: #666666;\">=</span> d3</a>",
            "<a class=\"sourceLine\" id=\"cb137-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            .<span class=\"at\" style=\"color: #7d9029;\">shuffle</span>(<span class=\"va\" style=\"color: #19177c;\">Alphabet</span>.<span class=\"at\" style=\"color: #7d9029;\">letters</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb137-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            .<span class=\"at\" style=\"color: #7d9029;\">slice</span>(<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">Math</span>.<span class=\"at\" style=\"color: #7d9029;\">floor</span>(<span class=\"va\" style=\"color: #19177c;\">Math</span>.<span class=\"at\" style=\"color: #7d9029;\">random</span>() <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"va\" style=\"color: #19177c;\">Alphabet</span>.<span class=\"va\" style=\"color: #19177c;\">letters</span>.<span class=\"at\" style=\"color: #7d9029;\">length</span>))</a>",
            "<a class=\"sourceLine\" id=\"cb137-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            .<span class=\"at\" style=\"color: #7d9029;\">sort</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb137-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb137-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">setState</span>(<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb137-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            alphabet</a>",
            "<a class=\"sourceLine\" id=\"cb137-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb137-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a></code></pre></div>",
            "<p>Think of this as our game loop: Change alphabet state in consistent time intervals.</p>",
            "<p>We use <code style=\"white-space: pre-wrap;\">d3.interval( //.., 1500)</code> to call <code style=\"white-space: pre-wrap;\">shuffleAlphabet</code> every 1.5 seconds. Same as <code style=\"white-space: pre-wrap;\">setInterval</code>, but friendlier to batteries and CPUs because it pegs to <code style=\"white-space: pre-wrap;\">requestAnimationFrame</code>. On each period, we use <code style=\"white-space: pre-wrap;\">shuffleAlphabet</code> to shuffle available letters, slice out a random amount, sort them, and update component state with <code style=\"white-space: pre-wrap;\">setState</code>.</p>",
            "<p>This process ensures our alphabet is both random and in alphabetical order.</p>",
            "<p>Starting the interval in <code style=\"white-space: pre-wrap;\">componentDidMount</code> ensures it only runs when our Alphabet is on the page. In real life you should stop it on <code style=\"white-space: pre-wrap;\">componentWillUnmount</code>. Since this is a tiny experiment and we know <code style=\"white-space: pre-wrap;\">&lt;Alphabet&gt;</code> never unmounts without a page refresh, it’s okay to skip that step.</p>"
          ]
        },
        {
          "lectureTitle": "Declarative render for enter-exit transitions",
          "lectureLines": [
            "<h4 id=\"declarative-render-for-enterexit-transitions\">Declarative render for enter/exit transitions</h4>",
            "<p>Our declarative enter/exit transitions start in the <code style=\"white-space: pre-wrap;\">render</code> method.</p>",
            "<div class=\"sourceCode\" id=\"cb138\" data-caption=\"Letter rendering\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb138-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Alphabet/index.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb138-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb138-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> transform <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"vs\" style=\"color: #4070a0;\">`translate(</span><span class=\"sc\" style=\"color: #4070a0;\">${</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">x</span><span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">, </span><span class=\"sc\" style=\"color: #4070a0;\">${</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">y</span><span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">)`</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb138-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb138-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb138-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>g transform<span class=\"op\" style=\"color: #666666;\">={</span>transform<span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb138-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&lt;</span>TransitionGroup enter<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">true</span><span class=\"op\" style=\"color: #666666;\">}</span> exit<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">true</span><span class=\"op\" style=\"color: #666666;\">}</span> component<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;g&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb138-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"va\" style=\"color: #19177c;\">alphabet</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>((d<span class=\"op\" style=\"color: #666666;\">,</span> i) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb138-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        <span class=\"op\" style=\"color: #666666;\">&lt;</span>Letter letter<span class=\"op\" style=\"color: #666666;\">={</span>d<span class=\"op\" style=\"color: #666666;\">}</span> index<span class=\"op\" style=\"color: #666666;\">={</span>i<span class=\"op\" style=\"color: #666666;\">}</span> key<span class=\"op\" style=\"color: #666666;\">={</span>d<span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb138-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    ))<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb138-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                &lt;/TransitionGroup<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb138-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            &lt;/g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb138-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb138-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>An SVG transformation moves our alphabet into the specified <code style=\"white-space: pre-wrap;\">(x, y)</code> position. We map through <code style=\"white-space: pre-wrap;\">this.state.alphabet</code> inside a <code style=\"white-space: pre-wrap;\">&lt;TransitionGroup&gt;</code> component and render a <code style=\"white-space: pre-wrap;\">&lt;Letter&gt;</code> component for every letter. Each <code style=\"white-space: pre-wrap;\">Letter</code> gets a <code style=\"white-space: pre-wrap;\">letter</code> prop for the text, an <code style=\"white-space: pre-wrap;\">index</code> prop to know where it stands, and a <code style=\"white-space: pre-wrap;\">key</code> so React can tell them apart.</p>",
            "<h4 id=\"the-key-property\">The key property</h4>",
            "<p>The key property is how React identifies components. Pick wrong, and you’re gonna have a bad time. I spent many hours debugging and writing workarounds before I realized that basing my key on the index was a Bad Move™. <em>Obviously</em>, you want the letter to stay constant in each component and the index to change.</p>",
            "<p>That’s how x-axis transitions work.</p>",
            "<p>You move the letter into a specific place in the alphabet. You’ll see what I mean when we look at the <code style=\"white-space: pre-wrap;\">Letter</code> component.</p>"
          ]
        },
        {
          "lectureTitle": "TransitionGroup",
          "lectureLines": [
            "<h4 id=\"transitiongroup\">TransitionGroup</h4>",
            "<p>React TransitionGroup gives us coordinated control over a set of transitionable components. Each Letter is going to be a <code style=\"white-space: pre-wrap;\">&lt;Transition&gt;</code>, you’ll see.</p>",
            "<p>We need TransitionGroup to gain declarative control over the enter/exit cycle. Transition components can handle transitions themselves, but they need an <code style=\"white-space: pre-wrap;\">in</code> prop to say whether they’re in or out of the visualization.</p>",
            "<p>Flip from <code style=\"white-space: pre-wrap;\">false</code> to <code style=\"white-space: pre-wrap;\">true</code>, run an enter transition.</p>",
            "<p><code style=\"white-space: pre-wrap;\">true</code> to <code style=\"white-space: pre-wrap;\">false</code>, run an exit transition.</p>",
            "<p>We can make this change from within our component, of course. When responding to user events for example. In our case we need that control to come from outside based on which letters exist in the <code style=\"white-space: pre-wrap;\">alphabet</code> array.</p>",
            "<p><code style=\"white-space: pre-wrap;\">TransitionGroup</code> handles that for us. It automatically passes the correct <code style=\"white-space: pre-wrap;\">in</code> prop to its children based on who is and isn’t being rendered.</p>",
            "<p>As an added bonus, we can use TransitionGroup to set a bunch of default parameters for child Transitions. Whether to use <code style=\"white-space: pre-wrap;\">enter</code> animations, <code style=\"white-space: pre-wrap;\">exit</code> animations, stuff like that. You can read <a href=\"https://github.com/reactjs/react-transition-group\">a full list in the docs</a>.</p>"
          ]
        },
        {
          "lectureTitle": "The Letter component",
          "lectureLines": [
            "<h3 id=\"the-letter-component\">The Letter component</h3>",
            "<p>We’re ready for the component that can transition itself into and out of a visualization. Without consumers having to worry about what’s going on behind the scenes 👌</p>",
            "<p>The skeleton for our <code style=\"white-space: pre-wrap;\">Letter</code> component looks like this:</p>",
            "<div class=\"sourceCode\" id=\"cb139\" data-caption=\"Letter component skeleton\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb139-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Letter.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb139-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;react&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"im\">as</span> d3 <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;d3&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> Transition <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;react-transition-group/Transition&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb139-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> ExitColor <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;brown&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    UpdateColor <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;#333&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    EnterColor <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;green&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb139-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Letter <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    defaultState <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">-60</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">index</span> <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"dv\" style=\"color: #40a070;\">32</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">color</span><span class=\"op\" style=\"color: #666666;\">:</span> EnterColor<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">fillOpacity</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"fl\" style=\"color: #40a070;\">1e-6</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    state <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">defaultState</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    letterRef <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">createRef</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb139-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    onEnter <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Letter enters the visualization</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb139-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    onExit <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Letter drops out transition</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb139-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">componentDidUpdate</span>(prevProps<span class=\"op\" style=\"color: #666666;\">,</span> prevState) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// update transition</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb139-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y<span class=\"op\" style=\"color: #666666;\">,</span> fillOpacity<span class=\"op\" style=\"color: #666666;\">,</span> color <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">{</span> letter <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-36\" title=\"36\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb139-37\" title=\"37\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb139-38\" title=\"38\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// render Transition with text</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-39\" title=\"39\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-40\" title=\"40\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-41\" title=\"41\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb139-42\" title=\"42\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb139-43\" title=\"43\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> Letter<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>We start with some imports and define a <code style=\"white-space: pre-wrap;\">Letter</code> component with a default state. We keep <code style=\"white-space: pre-wrap;\">defaultState</code> in a separate value because we’re going to manually reset state in some cases.</p>",
            "<p>A <code style=\"white-space: pre-wrap;\">letterRef</code> helps us hand over control to D3 during transitions, the <code style=\"white-space: pre-wrap;\">onEnter</code> callback handles enter transitions, <code style=\"white-space: pre-wrap;\">onExit</code> exit transitions, and <code style=\"white-space: pre-wrap;\">componentDidUpdate</code> update transitions. Render is where it call comes together.</p>",
            "<p>Each of these transition methods is going to follow the same approach you learned about in the swipe transition example. Render from state, transition with D3, update state to match.</p>",
            "<p>You can make this component more flexible by moving the various magic numbers we use into props. Default <code style=\"white-space: pre-wrap;\">y</code> offset, transition duration, colors, stuff like that. The world is your oyster my friend.</p>"
          ]
        },
        {
          "lectureTitle": "onEnter",
          "lectureLines": [
            "<h4 id=\"onenter\">onEnter</h4>",
            "<p>We start with the enter transition in the <code style=\"white-space: pre-wrap;\">onEnter</code> callback.</p>",
            "<div class=\"sourceCode\" id=\"cb140\" data-caption=\"Enter transition\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb140-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Letter.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb140-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    onEnter <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb140-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Letter is entering the visualization</span></a>",
            "<a class=\"sourceLine\" id=\"cb140-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> node <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">select</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">letterRef</span>.<span class=\"at\" style=\"color: #7d9029;\">current</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb140-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb140-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">node</span>.<span class=\"at\" style=\"color: #7d9029;\">transition</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb140-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            .<span class=\"at\" style=\"color: #7d9029;\">duration</span>(<span class=\"dv\" style=\"color: #40a070;\">750</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb140-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            .<span class=\"at\" style=\"color: #7d9029;\">ease</span>(<span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">easeCubicInOut</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb140-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;y&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">0</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb140-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            .<span class=\"at\" style=\"color: #7d9029;\">style</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;fill-opacity&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">1</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb140-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            .<span class=\"at\" style=\"color: #7d9029;\">on</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;end&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb140-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">setState</span>(<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb140-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb140-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"dt\" style=\"color: #902000;\">fillOpacity</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">1</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb140-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"dt\" style=\"color: #902000;\">color</span><span class=\"op\" style=\"color: #666666;\">:</span> UpdateColor</a>",
            "<a class=\"sourceLine\" id=\"cb140-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb140-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb140-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a></code></pre></div>",
            "<p>We use <code style=\"white-space: pre-wrap;\">d3.select</code> to grab our DOM node and take control with D3. Start a new transition with <code style=\"white-space: pre-wrap;\">.transition()</code>, specify a duration, an easing function, and specify the changes. Vertical position moves to <code style=\"white-space: pre-wrap;\">0</code>, opacity changes to <code style=\"white-space: pre-wrap;\">1</code>.</p>",
            "<p>This creates a drop-in fade-in effect.</p>",
            "<p>When our transition ends, we update state with the new <code style=\"white-space: pre-wrap;\">y</code> coordinate, <code style=\"white-space: pre-wrap;\">fillOpacity</code>, and <code style=\"white-space: pre-wrap;\">color</code>.</p>",
            "<p>The result is an invisible letter that starts at -60px and moves into 0px and full visibility over 750 milliseconds.</p>"
          ]
        },
        {
          "lectureTitle": "onExit",
          "lectureLines": [
            "<h4 id=\"onexit\">onExit</h4>",
            "<p>Our exit transition goes in the <code style=\"white-space: pre-wrap;\">onExit</code> callback.</p>",
            "<div class=\"sourceCode\" id=\"cb141\" data-caption=\"Leave transition\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb141-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Alphabet/</span></a>",
            "<a class=\"sourceLine\" id=\"cb141-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    onExit <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb141-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Letter is dropping out</span></a>",
            "<a class=\"sourceLine\" id=\"cb141-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> node <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">select</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">letterRef</span>.<span class=\"at\" style=\"color: #7d9029;\">current</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb141-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb141-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">node</span>.<span class=\"at\" style=\"color: #7d9029;\">style</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;fill&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> ExitColor)</a>",
            "<a class=\"sourceLine\" id=\"cb141-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            .<span class=\"at\" style=\"color: #7d9029;\">transition</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">transition</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb141-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;y&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">60</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb141-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            .<span class=\"at\" style=\"color: #7d9029;\">style</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;fill-opacity&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"fl\" style=\"color: #40a070;\">1e-6</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb141-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            .<span class=\"at\" style=\"color: #7d9029;\">on</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;end&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">setState</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">defaultState</span>))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb141-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a></code></pre></div>",
            "<p>Same as before, we take control of the DOM, run a transition, and update state when we’re done. We start with forcing our letter into a new color, then move it 60px down, transition to invisible, and reset state.</p>",
            "<p>But why are we resetting state instead of updating to current reality?</p>",
            "<p>Our components never unmount.</p>",
            "<p>We avoid unmounts to keep transitions smoother. Instead of unmounting, we have to reset state back to its default values.</p>",
            "<p>That moves the letter back into its enter state and ensures even re-used letters drop down from the top. Took me a while to tinker that one out.</p>"
          ]
        },
        {
          "lectureTitle": "componentDidUpdate",
          "lectureLines": [
            "<h4 id=\"componentdidupdate\">componentDidUpdate</h4>",
            "<p><code style=\"white-space: pre-wrap;\">componentDidUpdate</code> is our trickiest transition yet. It has two jobs:</p>",
            "<ul>",
            "<li>jump existing components to correct horizontal position when a new <code style=\"white-space: pre-wrap;\">enter</code> transition begins</li>",
            "<li>transition components into new horizontal positions based on changing indexes</li>",
            "</ul>",
            "<p>It goes like this 👇</p>",
            "<div class=\"sourceCode\" id=\"cb142\" data-caption=\"Update transition\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb142-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Alphabet/Letter.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb142-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">componentDidUpdate</span>(prevProps<span class=\"op\" style=\"color: #666666;\">,</span> prevState) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb142-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (<span class=\"va\" style=\"color: #19177c;\">prevProps</span>.<span class=\"at\" style=\"color: #7d9029;\">in</span> <span class=\"op\" style=\"color: #666666;\">!==</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">in</span> <span class=\"op\" style=\"color: #666666;\">&amp;&amp;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">in</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb142-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// A new enter transition has begun</span></a>",
            "<a class=\"sourceLine\" id=\"cb142-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">setState</span>(<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb142-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">index</span> <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"dv\" style=\"color: #40a070;\">32</span></a>",
            "<a class=\"sourceLine\" id=\"cb142-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb142-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">else</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (<span class=\"va\" style=\"color: #19177c;\">prevProps</span>.<span class=\"at\" style=\"color: #7d9029;\">index</span> <span class=\"op\" style=\"color: #666666;\">!==</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">index</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb142-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Letter is moving to a new location</span></a>",
            "<a class=\"sourceLine\" id=\"cb142-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> node <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">select</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">letterRef</span>.<span class=\"at\" style=\"color: #7d9029;\">current</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb142-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                targetX <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">index</span> <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"dv\" style=\"color: #40a070;\">32</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb142-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb142-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"va\" style=\"color: #19177c;\">node</span>.<span class=\"at\" style=\"color: #7d9029;\">style</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;fill&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> UpdateColor)</a>",
            "<a class=\"sourceLine\" id=\"cb142-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                .<span class=\"at\" style=\"color: #7d9029;\">transition</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb142-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                .<span class=\"at\" style=\"color: #7d9029;\">duration</span>(<span class=\"dv\" style=\"color: #40a070;\">750</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb142-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                .<span class=\"at\" style=\"color: #7d9029;\">ease</span>(<span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">easeCubicInOut</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb142-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;x&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> targetX)</a>",
            "<a class=\"sourceLine\" id=\"cb142-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                .<span class=\"at\" style=\"color: #7d9029;\">on</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;end&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb142-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">setState</span>(<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb142-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> targetX<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb142-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        <span class=\"dt\" style=\"color: #902000;\">color</span><span class=\"op\" style=\"color: #666666;\">:</span> UpdateColor</a>",
            "<a class=\"sourceLine\" id=\"cb142-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"op\" style=\"color: #666666;\">}</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb142-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb142-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb142-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>When the <code style=\"white-space: pre-wrap;\">in</code> prop changes to <code style=\"white-space: pre-wrap;\">true</code>, we’re starting a new enter transition on an existing component. We already moved it to the top of the visualization after exiting, but we couldn’t have known its future index.</p>",
            "<p>A quick <code style=\"white-space: pre-wrap;\">setState</code> makes sure our letter is in the right place and <code style=\"white-space: pre-wrap;\">onEnter</code> takes care of the rest.</p>",
            "<p>Otherwise we check if index changed and if it has, we run a transition in much the same way as we have so far:</p>",
            "<ul>",
            "<li>calculate new <code style=\"white-space: pre-wrap;\">targetX</code></li>",
            "<li>update letter color</li>",
            "<li>start a transition with the usual parameters</li>",
            "<li>update <code style=\"white-space: pre-wrap;\">x</code> coordinate</li>",
            "<li>update state when transition ends</li>",
            "</ul>",
            "<p>You now have a component that knows how to run its own enter/update/exit transitions. Time to wire it all up in the <code style=\"white-space: pre-wrap;\">render</code> method.</p>"
          ]
        },
        {
          "lectureTitle": "render",
          "lectureLines": [
            "<h4 id=\"render-3\">render</h4>",
            "<p>Hard work is done. Here’s how you render:</p>",
            "<div class=\"sourceCode\" id=\"cb143\" data-caption=\"Letter render method\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb143-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Alphabet/Letter.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb143-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb143-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y<span class=\"op\" style=\"color: #666666;\">,</span> fillOpacity<span class=\"op\" style=\"color: #666666;\">,</span> color <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb143-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">{</span> letter <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb143-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb143-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb143-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>Transition</a>",
            "<a class=\"sourceLine\" id=\"cb143-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">in</span><span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">in</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb143-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                unmountOnExit<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">false</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb143-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                timeout<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">750</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb143-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                onEnter<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">onEnter</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb143-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                onExit<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">onExit</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb143-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb143-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&lt;</span>text</a>",
            "<a class=\"sourceLine\" id=\"cb143-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    dy<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;.35em&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb143-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    x<span class=\"op\" style=\"color: #666666;\">={</span>x<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb143-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    y<span class=\"op\" style=\"color: #666666;\">={</span>y<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb143-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    style<span class=\"op\" style=\"color: #666666;\">={{</span></a>",
            "<a class=\"sourceLine\" id=\"cb143-19\" title=\"19\">                        <span class=\"dt\">fillOpacity</span><span class=\"op\">:</span> fillOpacity<span class=\"op\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb143-20\" title=\"20\">                        <span class=\"dt\">fill</span><span class=\"op\">:</span> color<span class=\"op\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb143-21\" title=\"21\">                        <span class=\"dt\">font</span><span class=\"op\">:</span> <span class=\"st\">&quot;bold 48px monospace&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb143-22\" title=\"22\">                    <span class=\"op\">}}</span></a>",
            "<a class=\"sourceLine\" id=\"cb143-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    ref<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">letterRef</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb143-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb143-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"op\" style=\"color: #666666;\">{</span>letter<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb143-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                &lt;/text<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb143-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            &lt;/Transition<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb143-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb143-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>We render a <code style=\"white-space: pre-wrap;\">Transition</code> element, which gives us the transition super powers we need to run enter/exit transitions. Update transitions work on all React components.</p>",
            "<p>The outside <code style=\"white-space: pre-wrap;\">TransitionGroup</code> gives us the correct <code style=\"white-space: pre-wrap;\">in</code> prop value, we just have to pass it into <code style=\"white-space: pre-wrap;\">Transition</code>. We disable <code style=\"white-space: pre-wrap;\">unmountOnExit</code> to make transitions smoother, define a <code style=\"white-space: pre-wrap;\">timeout</code> which has to match what we’re using in our transitions, and define <code style=\"white-space: pre-wrap;\">onEnter</code> and <code style=\"white-space: pre-wrap;\">onExit</code> callbacks.</p>",
            "<p>There’s a lot more to the API that we can use and you should check that out in the docs. Docs don’t go into detail on everything, but if you experiment I’m sure you’ll figure it out.</p>",
            "<p>Inside the transition we render an SVG <code style=\"white-space: pre-wrap;\">&lt;text&gt;</code> element rendered at an <code style=\"white-space: pre-wrap;\">(x, y)</code> position with a <code style=\"white-space: pre-wrap;\">color</code> and <code style=\"white-space: pre-wrap;\">fillOpacity</code> style. It shows a single letter taken from the <code style=\"white-space: pre-wrap;\">letter</code> prop.</p>"
          ]
        },
        {
          "lectureTitle": "That's it 👍",
          "lectureLines": [
            "<h3 id=\"thats-it-thumbsup\">That’s it 👍</h3>",
            "<p>Boom. We’re done.</p>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/alphabet-transitions.png\" alt=\"Alphabet transitions are hard to screenshot\"><figcaption>Alphabet transitions are hard to screenshot</figcaption>",
            "</figure>",
            "<p>You can play with a more complex version of this example here: <a href=\"https://swizec.github.io/react-d3-enter-exit-transitions/\">https://swizec.github.io/react-d3-enter-exit-transitions/</a>. Try typing different strings and see how the visualization reacts.</p>",
            "<p>The typing example uses the same Letter components to declaratively render its string, but it drives the input through your typing instead of an automatic shuffler.</p>"
          ]
        },
        {
          "lectureTitle": "Key transition takeaways",
          "lectureLines": [
            "<h3 id=\"key-takeaways-for-transitions-are\">Key takeaways for transitions are:</h3>",
            "<ul>",
            "<li>use d3 for transitions</li>",
            "<li>use React to manage SVG elements</li>",
            "<li>use TransitionGroup and Transition for the enter/update/exit pattern</li>",
            "</ul>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "Animating with React, Redux, and D3",
      "lectures": [
        {
          "lectureTitle": "Redux animation intro",
          "lectureLines": [
            "<h1 id=\"animating-react-redux\">Animating with React, Redux, and d3</h1>",
            "<p>And now for some pure nerdy fun: A particle generator… or, well, as close as you can get with React and D3. You’d need WebGL for a <em>real</em> particle generator.</p>",
            "<p>We’re making tiny circles fly out of your mouse cursor. Works on mobile with your finger, too.</p>",
            "<p>To see the particle generator in action, <a href=\"https://swizec.github.io/react-particles-experiment/\">go here</a>. Github won’t let me host different branches, so you’ll see the advanced 20,000 particle version from next chapter.</p>",
            "<p>We’re using the <a href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6906604#game-loop\">game loop</a> approach to animation and Redux to store the state tree and drive changes for each frame.</p>",
            "<p>You can see the full code <a href=\"https://github.com/Swizec/react-particles-experiment\">on GitHub</a>. I’ve merged the SVG and Canvas branches. Redux part is the same, some parameters differ. We’re focusing on the Redux part because that’s what’s new.</p>",
            "<p>It’s going to be great.</p>",
            "<p>{aside} Code in this example uses the <code style=\"white-space: pre-wrap;\">.jsx</code> file extension. I originally wrote it back when that was still a thing, and while I did update everything to React 16+, I felt that changing filenames was unnecessary. {/aside}</p>"
          ]
        },
        {
          "lectureTitle": "Here's how it works",
          "lectureLines": [
            "<h2 id=\"heres-how-it-works\">Here’s how it works</h2>",
            "<p>We use <strong>React to render everything</strong>: the page, the SVG element, the particles inside. This lets us tap into React’s algorithms that decide which nodes to update and when to garbage collect old nodes.</p>",
            "<p>Then we use some <strong>d3 calculations and event detection</strong>. D3 has great random generators, so we take advantage of that. D3’s mouse and touch event handlers calculate coordinates relative to our SVG. We need those, but React’s click handlers are based on DOM nodes, which don’t correspond to <code style=\"white-space: pre-wrap;\">(x, y)</code> coordinates. D3 looks at real cursor position on screen.</p>",
            "<p>All <strong>particle coordinates are in a Redux store</strong>. Each particle also has a movement vector. The store holds some useful flags and general parameters, as well. This lets us treat animation as data transformations. I’ll show you what that means.</p>",
            "<p>We use <strong>actions to communicate user events</strong> like creating particles, starting the animation, changing mouse position, and so on. On each requestAnimationFrame, we <strong>dispatch an “advance animation” action</strong>.</p>",
            "<p>On each action, the <strong>reducer calculates a new state</strong> for the whole app. This includes <strong>new particle positions</strong> for each step of the animation.</p>",
            "<p>When the store updates, <strong>React flushes changes</strong> via props and because <strong>coordinates are state, the particles move</strong>.</p>",
            "<p>The result is smooth animation. Just like the game loop example from before.</p>"
          ]
        },
        {
          "lectureTitle": "Some basic terminology",
          "lectureLines": [
            "<h2 id=\"some-basic-terminology\">Some basic terminology</h2>",
            "<p>We’re about to throw around some terms. You’ll understand what they mean in detail after this chapter.</p>",
            "<p>Until then, here’s a quick glossary so you don’t feel lost:</p>",
            "<p><strong>The store, or the state</strong>, is Redux state. Held globally and shared by all components. It’s like the App local state from earlier chapters.</p>",
            "<p><strong>Actions</strong> are packets of information that tell us what happened.</p>",
            "<p><strong>Reducers</strong> are functions that take the current state and an action, and use that information to generate a new state.</p>",
            "<p>Got it? No worries. You will soon 😃</p>"
          ]
        },
        {
          "lectureTitle": "3 presentation components",
          "lectureLines": [
            "<h2 id=\"presentation-components\">3 presentation components</h2>",
            "<p>We start with the presentation components because they’re the simplest. To render a collection of particles, we need:</p>",
            "<ul>",
            "<li>a stateless <code style=\"white-space: pre-wrap;\">Particle</code></li>",
            "<li>a stateless <code style=\"white-space: pre-wrap;\">Particles</code></li>",
            "<li>a class-based <code style=\"white-space: pre-wrap;\">App</code></li>",
            "</ul>",
            "<p>None of them contain state, but <code style=\"white-space: pre-wrap;\">App</code> has to be a class-based component so that we can use <code style=\"white-space: pre-wrap;\">componentDidMount</code>. We need it to attach D3 event listeners.</p>",
            "<h3 id=\"particle\">Particle</h3>",
            "<p>The <code style=\"white-space: pre-wrap;\">Particle</code> component is a circle. It looks like this:</p>",
            "<div class=\"sourceCode\" id=\"cb144\" data-caption=\"Particle component\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb144-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Particles/Particle.jsx</span></a>",
            "<a class=\"sourceLine\" id=\"cb144-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;react&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb144-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb144-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> Particle <span class=\"op\" style=\"color: #666666;\">=</span> (<span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y <span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb144-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">&lt;</span>circle cx<span class=\"op\" style=\"color: #666666;\">={</span>x<span class=\"op\" style=\"color: #666666;\">}</span> cy<span class=\"op\" style=\"color: #666666;\">={</span>y<span class=\"op\" style=\"color: #666666;\">}</span> r<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;1.8&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb144-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb144-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb144-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> Particle<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>It takes <code style=\"white-space: pre-wrap;\">x</code> and <code style=\"white-space: pre-wrap;\">y</code> coordinates and returns an SVG circle.</p>",
            "<h3 id=\"svg-particles\">Particles</h3>",
            "<p>The <code style=\"white-space: pre-wrap;\">Particles</code> component isn’t much smarter – it returns a list of circles wrapped in a grouping element, like this:</p>",
            "<div class=\"sourceCode\" id=\"cb145\" data-caption=\"Particles list\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb145-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Particles/index.jsx</span></a>",
            "<a class=\"sourceLine\" id=\"cb145-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;react&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb145-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> Particle <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./Particle&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb145-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb145-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> Particles <span class=\"op\" style=\"color: #666666;\">=</span> (<span class=\"op\" style=\"color: #666666;\">{</span> particles <span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb145-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">&lt;</span>g<span class=\"op\" style=\"color: #666666;\">&gt;{</span><span class=\"va\" style=\"color: #19177c;\">particles</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(particle <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb145-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>Particle key<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"va\" style=\"color: #19177c;\">particle</span>.<span class=\"at\" style=\"color: #7d9029;\">id</span><span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">{</span>...<span class=\"at\" style=\"color: #7d9029;\">particle</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb145-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    )<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb145-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  &lt;/g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb145-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb145-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb145-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> Particles<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>Walk through the array of particles, render a Particle component for each. Declarative rendering that you’ve seen before 😃</p>",
            "<p>We can take an array of <code style=\"white-space: pre-wrap;\">{id, x, y}</code> objects and render SVG circles. Now comes our first fun component: the <code style=\"white-space: pre-wrap;\">App</code>.</p>",
            "<h3 id=\"app\">App</h3>",
            "<p><code style=\"white-space: pre-wrap;\">App</code> takes care of rendering the scene and attaching d3 event listeners. It gets actions via props and ties them to mouse events. You can think of actions as callbacks that work on the global data store directly. No need to pass them through many levels of props.</p>",
            "<p>The rendering part looks like this:</p>",
            "<div class=\"sourceCode\" id=\"cb146\" data-caption=\"App component\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb146-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/index.jsx</span></a>",
            "<a class=\"sourceLine\" id=\"cb146-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb146-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"op\" style=\"color: #666666;\">{</span> Component <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;react&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb146-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">{</span> select <span class=\"im\">as</span> d3Select<span class=\"op\" style=\"color: #666666;\">,</span> mouse <span class=\"im\">as</span> d3Mouse<span class=\"op\" style=\"color: #666666;\">,</span> touches <span class=\"im\">as</span> d3Touches <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;d3&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb146-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb146-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> Particles <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./Particles&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb146-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> Footer <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./Footer&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb146-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> Header <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./Header&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb146-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb146-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> App <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> Component <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb146-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ..</span></a>",
            "<a class=\"sourceLine\" id=\"cb146-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb146-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb146-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>div onMouseDown<span class=\"op\" style=\"color: #666666;\">={</span>e <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">startTicker</span>()<span class=\"op\" style=\"color: #666666;\">}</span> style<span class=\"op\" style=\"color: #666666;\">={{</span><span class=\"dt\">overflow</span><span class=\"op\">:</span> <span class=\"st\">&#39;hidden&#39;</span><span class=\"op\">}}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb146-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">           <span class=\"op\" style=\"color: #666666;\">&lt;</span>Header /<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb146-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">           <span class=\"op\" style=\"color: #666666;\">&lt;</span>svg width<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">svgWidth</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb146-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                height<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">svgHeight</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb146-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                ref<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;svg&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb146-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                style<span class=\"op\" style=\"color: #666666;\">={{</span><span class=\"dt\">background</span><span class=\"op\">:</span> <span class=\"st\">&#39;rgba(124, 224, 249, .3)&#39;</span><span class=\"op\">}}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb146-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">               <span class=\"op\" style=\"color: #666666;\">&lt;</span>Particles particles<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">particles</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb146-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">           &lt;/svg<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb146-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">           <span class=\"op\" style=\"color: #666666;\">&lt;</span>Footer N<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"va\" style=\"color: #19177c;\">particles</span>.<span class=\"at\" style=\"color: #7d9029;\">length</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb146-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">       &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb146-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb146-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb146-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb146-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb146-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> App<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>There’s more going on, but the gist is that we return a <code style=\"white-space: pre-wrap;\">&lt;div&gt;</code> with a <code style=\"white-space: pre-wrap;\">Header</code>, a <code style=\"white-space: pre-wrap;\">Footer</code>, and an <code style=\"white-space: pre-wrap;\">&lt;svg&gt;</code>. Inside <code style=\"white-space: pre-wrap;\">&lt;svg&gt;</code>, we use <code style=\"white-space: pre-wrap;\">Particles</code> to render many circles. The Header and Footer components are just some helpful text.</p>",
            "<p>Notice that the core of our rendering function only says <em>“Put all Particles here, please”</em>. There’s nothing about what’s moved, what’s new, or what’s no longer needed. We don’t have to worry about that.</p>",
            "<p>We get a list of coordinates and naively render some circles. React takes care of the rest.</p>",
            "<p>Oh, and we call <code style=\"white-space: pre-wrap;\">startTicker()</code> when a user clicks on our scene. No reason to have the clock running <em>before</em> any particles exist.</p>",
            "<h4 id=\"d3-event-listeners\">D3 event listeners</h4>",
            "<p>To let users generate particles, we have to wire up some functions in <code style=\"white-space: pre-wrap;\">componentDidMount</code>. That looks like this:</p>",
            "<div class=\"sourceCode\" id=\"cb147\" data-caption=\"Event listeners\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb147-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/index.jsx</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb147-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> App <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> Component <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    svgWrap <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">createRef</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb147-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">componentDidMount</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> svg <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">d3Select</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">svgWrap</span>.<span class=\"at\" style=\"color: #7d9029;\">current</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb147-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">on</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;mousedown&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">updateMousePos</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">startParticles</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">on</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;touchstart&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">updateTouchPos</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">startParticles</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">on</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;mousemove&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">updateMousePos</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">on</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;touchmove&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">updateTouchPos</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">on</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;mouseup&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">stopParticles</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">on</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;touchend&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">stopParticles</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">on</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;mouseleave&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">stopParticles</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb147-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">updateMousePos</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> [x<span class=\"op\" style=\"color: #666666;\">,</span> y] <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">d3Mouse</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">svgWrap</span>.<span class=\"at\" style=\"color: #7d9029;\">current</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-36\" title=\"36\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">updateMousePos</span>(x<span class=\"op\" style=\"color: #666666;\">,</span> y)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-37\" title=\"37\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-38\" title=\"38\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb147-39\" title=\"39\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">updateTouchPos</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-40\" title=\"40\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> [x<span class=\"op\" style=\"color: #666666;\">,</span> y] <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">d3Touches</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">svgWrap</span>.<span class=\"at\" style=\"color: #7d9029;\">current</span>)[<span class=\"dv\" style=\"color: #40a070;\">0</span>]<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-41\" title=\"41\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">updateMousePos</span>(x<span class=\"op\" style=\"color: #666666;\">,</span> y)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb147-42\" title=\"42\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>There are several events we take into account:</p>",
            "<ul>",
            "<li><code style=\"white-space: pre-wrap;\">mousedown</code> and <code style=\"white-space: pre-wrap;\">touchstart</code> turn on particle generation</li>",
            "<li><code style=\"white-space: pre-wrap;\">mousemove</code> and <code style=\"white-space: pre-wrap;\">touchmove</code> update the mouse location</li>",
            "<li><code style=\"white-space: pre-wrap;\">mouseup</code>, <code style=\"white-space: pre-wrap;\">touchend</code>, and <code style=\"white-space: pre-wrap;\">mouseleave</code> turn off particle generation</li>",
            "</ul>",
            "<p>Inside our event callbacks, we use <code style=\"white-space: pre-wrap;\">updateMousePos</code> and <code style=\"white-space: pre-wrap;\">updateTouchPos</code> to update Redux state. They use <code style=\"white-space: pre-wrap;\">d3Mouse</code> and <code style=\"white-space: pre-wrap;\">d3Touches</code> to get <code style=\"white-space: pre-wrap;\">(x, y)</code> coordinates for new particles relative to our SVG element and call Redux actions passed-in via props. The particle generation step uses this data as each particle’s initial position.</p>",
            "<p>You’ll see that in the next section. I agree, it smells kind of convoluted, but it’s for good reason: We need a reference to a mouse event to get the cursor position, and we want to decouple particle generation from event handling.</p>",
            "<p>Remember, React isn’t smart enough to figure out mouse position relative to our drawing area. React knows that we clicked a DOM node. <a href=\"https://github.com/d3/d3-selection/blob/master/src/mouse.js\">D3 does some magic</a> to find exact coordinates.</p>",
            "<p>Touch events return lists of coordinates. One for each finger. We use only the first coordinate because shooting particles out of multiple fingers would make this example too hard.</p>",
            "<p>That’s it for rendering and user events. <a href=\"https://github.com/Swizec/react-particles-experiment/blob/svg-based-branch/src/components/index.jsx\">107 lines of code</a>.</p>"
          ]
        },
        {
          "lectureTitle": "6 Redux Actions",
          "lectureLines": [
            "<h2 id=\"redux-actions\">6 Redux Actions</h2>",
            "<p>Redux actions are a fancy way of saying <em>“Yo, a thing happened!”</em>. They’re functions you call to get structured metadata that’s passed into Redux reducers.</p>",
            "<p>Our particle generator uses 6 actions:</p>",
            "<ol type=\"1\">",
            "<li><code style=\"white-space: pre-wrap;\">tickTime</code> steps our animation to the next frame</li>",
            "<li><code style=\"white-space: pre-wrap;\">tickerStarted</code> fires when everything begins</li>",
            "<li><code style=\"white-space: pre-wrap;\">startParticles</code> fires when we hold down the mouse</li>",
            "<li><code style=\"white-space: pre-wrap;\">stopParticles</code> fires when we release</li>",
            "<li><code style=\"white-space: pre-wrap;\">updateMousePos</code> keeps mouse position saved in state</li>",
            "<li><code style=\"white-space: pre-wrap;\">resizeScreen</code> saves new screen size so we know where edges lie</li>",
            "</ol>",
            "<p>Our actions look something like this:</p>",
            "<div class=\"sourceCode\" id=\"cb148\" data-caption=\"A Redux action\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb148-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span> <span class=\"at\" style=\"color: #7d9029;\">updateMousePos</span>(x<span class=\"op\" style=\"color: #666666;\">,</span> y) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb148-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb148-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">type</span><span class=\"op\" style=\"color: #666666;\">:</span> UPDATE_MOUSE_POS<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb148-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> x<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb148-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> y</a>",
            "<a class=\"sourceLine\" id=\"cb148-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb148-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>A function that accepts params and returns an object with a type and meta data. Technically this is an action generator and the object is an action, but that distinction has long since been lost in the community.</p>",
            "<p>Actions <em>must</em> have a <code style=\"white-space: pre-wrap;\">type</code>. Reducers use the type to decide what to do. The rest is optional.</p>",
            "<p>You can see <a href=\"https://github.com/Swizec/react-particles-experiment/blob/master/src/actions/index.js\">all the actions on GitHub</a>.</p>",
            "<p>I find this to be the least elegant part of Redux. Makes sense in large applications, but way too convoluted for small apps. Simpler alternatives exist like doing it yourself with React Context.</p>"
          ]
        },
        {
          "lectureTitle": "1 Container component",
          "lectureLines": [
            "<h2 id=\"container-component\">1 Container component</h2>",
            "<p>Containers are React components that talk to the Redux data store.</p>",
            "<p>You can think of presentation components as templates that render stuff and containers as smart-ish views that talk to controllers. Or maybe they’re the controllers.</p>",
            "<p>Sometimes it’s hard to tell. In theory presentation components render and don’t think, containers communicate and don’t render. Redux reducers and actions do the thinking.</p>",
            "<p>I’m not sure this separation is necessary in small projects.</p>",
            "<p>Maintaining it can be awkward and sometimes cumbersome in mid-size projects, but I’m sure it makes total sense at Facebook scale. We’re using it in this project because the community has decided that’s the way to go.</p>",
            "<p>We use the idiomatic <code style=\"white-space: pre-wrap;\">connect()</code> approach. Like this:</p>",
            "<div class=\"sourceCode\" id=\"cb149\" data-caption=\"Main container component\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb149-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/containers/AppContainer.jsx</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb149-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">{</span> connect <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;react-redux&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"op\" style=\"color: #666666;\">{</span> Component <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;react&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"im\">as</span> d3 <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;d3&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb149-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> App <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;../components&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    tickTime<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    tickerStarted<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    startParticles<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    stopParticles<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    updateMousePos</a>",
            "<a class=\"sourceLine\" id=\"cb149-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;../actions&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb149-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> AppContainer <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> Component <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    startTicker <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> isTickerStarted <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb149-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (<span class=\"op\" style=\"color: #666666;\">!</span>isTickerStarted) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"va\" style=\"color: #19177c;\">console</span>.<span class=\"at\" style=\"color: #7d9029;\">log</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;Starting ticker&quot;</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">tickerStarted</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">timer</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">tickTime</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb149-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> svgWidth<span class=\"op\" style=\"color: #666666;\">,</span> svgHeight<span class=\"op\" style=\"color: #666666;\">,</span> particles <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb149-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb149-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>App</a>",
            "<a class=\"sourceLine\" id=\"cb149-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                svgWidth<span class=\"op\" style=\"color: #666666;\">={</span>svgWidth<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                svgHeight<span class=\"op\" style=\"color: #666666;\">={</span>svgHeight<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                particles<span class=\"op\" style=\"color: #666666;\">={</span>particles<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                startTicker<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">startTicker</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-36\" title=\"36\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                startParticles<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">startParticles</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-37\" title=\"37\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                stopParticles<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">stopParticles</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-38\" title=\"38\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                updateMousePos<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">updateMousePos</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-39\" title=\"39\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb149-40\" title=\"40\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-41\" title=\"41\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-42\" title=\"42\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-43\" title=\"43\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb149-44\" title=\"44\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> mapStateToProps <span class=\"op\" style=\"color: #666666;\">=</span> (<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-45\" title=\"45\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    generateParticles<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-46\" title=\"46\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    mousePos<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-47\" title=\"47\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    particlesPerTick<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-48\" title=\"48\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    isTickerStarted<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-49\" title=\"49\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    svgWidth<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-50\" title=\"50\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    svgHeight<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-51\" title=\"51\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    particles</a>",
            "<a class=\"sourceLine\" id=\"cb149-52\" title=\"52\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> (<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-53\" title=\"53\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    generateParticles<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-54\" title=\"54\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    mousePos<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-55\" title=\"55\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    particlesPerTick<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-56\" title=\"56\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    isTickerStarted<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-57\" title=\"57\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    svgWidth<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-58\" title=\"58\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    svgHeight<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-59\" title=\"59\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    particles</a>",
            "<a class=\"sourceLine\" id=\"cb149-60\" title=\"60\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-61\" title=\"61\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb149-62\" title=\"62\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> mapDispatchToProps <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-63\" title=\"63\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    tickTime<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-64\" title=\"64\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    tickerStarted<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-65\" title=\"65\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    startParticles<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-66\" title=\"66\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    stopParticles<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-67\" title=\"67\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    updateMousePos</a>",
            "<a class=\"sourceLine\" id=\"cb149-68\" title=\"68\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-69\" title=\"69\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb149-70\" title=\"70\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> <span class=\"at\" style=\"color: #7d9029;\">connect</span>(</a>",
            "<a class=\"sourceLine\" id=\"cb149-71\" title=\"71\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    mapStateToProps<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb149-72\" title=\"72\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    mapDispatchToProps</a>",
            "<a class=\"sourceLine\" id=\"cb149-73\" title=\"73\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">)(AppContainer)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>I love the smell of boilerplate in the morning. 👃</p>",
            "<p>We import dependencies and define <code style=\"white-space: pre-wrap;\">AppContainer</code> as a class-based React <code style=\"white-space: pre-wrap;\">Component</code> so we have somewhere to put the D3 interval. The render method outputs our <code style=\"white-space: pre-wrap;\">&lt;App&gt;</code> component using a bunch of props to pass relevant actions and values.</p>",
            "<p>The <code style=\"white-space: pre-wrap;\">startTicker</code> method is a callback we pass into App. It runs on first click and starts the D3 interval if necessary. Each interval iteration triggers the <code style=\"white-space: pre-wrap;\">tickTime</code> action.</p>",
            "<h3 id=\"appcontainer-talks-to-the-store\">AppContainer talks to the store</h3>",
            "<div class=\"sourceCode\" id=\"cb150\" data-caption=\"The Reduxy part\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb150-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/containers/AppContainer.jsx</span></a>",
            "<a class=\"sourceLine\" id=\"cb150-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb150-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> mapStateToProps <span class=\"op\" style=\"color: #666666;\">=</span> (<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb150-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    generateParticles<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb150-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    mousePos<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb150-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    particlesPerTick<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb150-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    isTickerStarted<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb150-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    svgWidth<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb150-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    svgHeight<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb150-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    particles</a>",
            "<a class=\"sourceLine\" id=\"cb150-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> (<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb150-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    generateParticles<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb150-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    mousePos<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb150-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    particlesPerTick<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb150-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    isTickerStarted<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb150-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    svgWidth<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb150-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    svgHeight<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb150-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    particles</a>",
            "<a class=\"sourceLine\" id=\"cb150-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb150-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb150-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> mapDispatchToProps <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb150-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    tickTime<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb150-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    tickerStarted<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb150-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    startParticles<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb150-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    stopParticles<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb150-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    updateMousePos</a>",
            "<a class=\"sourceLine\" id=\"cb150-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb150-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb150-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> <span class=\"at\" style=\"color: #7d9029;\">connect</span>(</a>",
            "<a class=\"sourceLine\" id=\"cb150-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    mapStateToProps<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb150-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    mapDispatchToProps</a>",
            "<a class=\"sourceLine\" id=\"cb150-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">)(AppContainer)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>We’re using the <code style=\"white-space: pre-wrap;\">connect()</code> idiom to connect our AppContainer to the Redux store. It’s a higher order component that handles all the details of connection to the store and staying in sync.</p>",
            "<p>We pass two arguments into connect. This returns a higher order component function, which we wrap around AppContainer.</p>",
            "<p>The first argument is <strong>mapStateToProps</strong>. It accepts current state as an argument, which we immediately deconstruct into interesting parts, and returns a key:value dictionary. Each key becomes a component prop with the corresponding value.</p>",
            "<p>You’d often use this opportunity to run ad-hoc calculations, or combine parts of state into single props. No need for that in our case, just pass it through.</p>",
            "<h4 id=\"dispatching-actions\">Dispatching actions</h4>",
            "<p><strong>mapDispatchToProps</strong> is a dictionary that maps props to actions. Each prop turns into an action generator wrapped in a <code style=\"white-space: pre-wrap;\">store.dispatch()</code> call. To fire an action inside a component we just call the function in that prop.</p>",
            "<p>But Swiz, we’re not writing key:value dictionaries, we’re just listing stuff!</p>",
            "<p>That’s a syntax supported in most modern JavaScript environments, called object literal property value shorthand. Our build system expands that <code style=\"white-space: pre-wrap;\">mapDispatchToProps</code> dictionary into something like this:</p>",
            "<div class=\"sourceCode\" id=\"cb151\" data-caption=\"Compiler expands our dictionaries\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb151-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> mapDispatchToProps <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb151-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">tickTime</span><span class=\"op\" style=\"color: #666666;\">:</span> tickTime<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb151-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">tickerStarted</span><span class=\"op\" style=\"color: #666666;\">:</span> tickerStarted<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb151-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">startParticles</span><span class=\"op\" style=\"color: #666666;\">:</span> startParticles<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb151-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">stopParticles</span><span class=\"op\" style=\"color: #666666;\">:</span> stopParticles<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb151-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">updateMousePos</span><span class=\"op\" style=\"color: #666666;\">:</span> updateMousePos</a>",
            "<a class=\"sourceLine\" id=\"cb151-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">};</span></a></code></pre></div>",
            "<p>And you thought previous code had a lot of boilerplate … imagine if this was how you’d do it in real life 😛</p>",
            "<p><code style=\"white-space: pre-wrap;\">connect</code> wraps each of these action generators in <code style=\"white-space: pre-wrap;\">store.dispatch()</code> calls. You can pass the resulting function into any component and fire actions by calling that method.</p>",
            "<h4 id=\"the-redux-loop\">The Redux loop</h4>",
            "<p>To make a change therefore, a Redux loop unfolds:</p>",
            "<ol type=\"1\">",
            "<li>Call our action triggerer, passed in through props</li>",
            "<li>Calls the generator, gets a <code style=\"white-space: pre-wrap;\">{type: ...}</code> object</li>",
            "<li>Dispatches that object on the store</li>",
            "<li>Redux calls the reducer</li>",
            "<li>Reducer creates new state</li>",
            "<li>Store updates triggering React’s engine to flow updates through the props</li>",
            "</ol>",
            "<p>So that’s the container. 71 lines of boilerplate pretty code.</p>",
            "<p>The remaining piece of the puzzle is our reducer. Two reducers in fact.</p>"
          ]
        },
        {
          "lectureTitle": "2 Redux Reducers",
          "lectureLines": [
            "<h2 id=\"redux-reducers\">2 Redux Reducers</h2>",
            "<p>With the actions firing and the drawing done, it’s time to look at the business logic of our particle generator. We’ll get it done in just 33 lines of code and some change.</p>",
            "<p>Well, it’s a bunch of change. But the 33 lines that make up <code style=\"white-space: pre-wrap;\">CREATE_PARTICLES</code> and <code style=\"white-space: pre-wrap;\">TIME_TICK</code> changes are the most interesting. The rest just flips various flags.</p>",
            "<p>All our logic and physics goes in the reducer. <a href=\"https://redux.js.org/docs/basics/Reducers.html\">Dan Abramov says</a> to think of reducers as the function you’d put in <code style=\"white-space: pre-wrap;\">.reduce()</code>. Given a state and a set of changes, how do I create the new state?</p>",
            "<p>A “sum numbers” example would look like this:</p>",
            "<div class=\"sourceCode\" id=\"cb152\" data-caption=\"Reducer concept\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb152-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> sum <span class=\"op\" style=\"color: #666666;\">=</span> [<span class=\"dv\" style=\"color: #40a070;\">1</span><span class=\"op\" style=\"color: #666666;\">,</span><span class=\"dv\" style=\"color: #40a070;\">2</span><span class=\"op\" style=\"color: #666666;\">,</span><span class=\"dv\" style=\"color: #40a070;\">3</span><span class=\"op\" style=\"color: #666666;\">,</span><span class=\"dv\" style=\"color: #40a070;\">4</span>].<span class=\"at\" style=\"color: #7d9029;\">reduce</span>((sum<span class=\"op\" style=\"color: #666666;\">,</span> n) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> sum<span class=\"op\" style=\"color: #666666;\">+</span>n<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">0</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>For each number, take the previous sum and add the number.</p>",
            "<p>Our particle generator is a more advanced version of the same concept: Takes current application state, incorporates an action, and returns new application state.</p>",
            "<p>Start with a default state and some D3 random number helpers.</p>",
            "<div class=\"sourceCode\" id=\"cb153\" data-caption=\"Default state and constants\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb153-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">{</span> randomNormal <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;d3&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb153-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb153-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> Gravity <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"fl\" style=\"color: #40a070;\">0.5</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb153-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    randNormal <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">randomNormal</span>(<span class=\"fl\" style=\"color: #40a070;\">0.3</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">2</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb153-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    randNormal2 <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">randomNormal</span>(<span class=\"fl\" style=\"color: #40a070;\">0.5</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"fl\" style=\"color: #40a070;\">1.</span><span class=\"op\" style=\"color: #666666;\">:</span>sunglasses<span class=\"op\" style=\"color: #666666;\">:;</span></a>",
            "<a class=\"sourceLine\" id=\"cb153-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb153-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> initialState <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb153-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">particles</span><span class=\"op\" style=\"color: #666666;\">:</span> []<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb153-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">particleIndex</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb153-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">particlesPerTick</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">30</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb153-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">svgWidth</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">800</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb153-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">svgHeight</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">600</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb153-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">isTickerStarted</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">false</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb153-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">generateParticles</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">false</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb153-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">mousePos</span><span class=\"op\" style=\"color: #666666;\">:</span> [<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">null</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">null</span>]<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb153-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">lastFrameTime</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">null</span></a>",
            "<a class=\"sourceLine\" id=\"cb153-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">};</span></a></code></pre></div>",
            "<p>Using D3’s <code style=\"white-space: pre-wrap;\">randomNormal</code> random number generator creates a better random distribution than using JavaScript’s own <code style=\"white-space: pre-wrap;\">Math.random</code>. The rest is a bunch of default state 👇</p>",
            "<ul>",
            "<li><code style=\"white-space: pre-wrap;\">particles</code> holds an array of particles to draw</li>",
            "<li><code style=\"white-space: pre-wrap;\">particleIndex</code> defines the ID of the next generated particle</li>",
            "<li><code style=\"white-space: pre-wrap;\">particlesPerTick</code> defines how many particles we create on each requestAnimationFrame</li>",
            "<li><code style=\"white-space: pre-wrap;\">svgWidth</code> is the width of our drawing area</li>",
            "<li><code style=\"white-space: pre-wrap;\">svgHeigh</code> is the height</li>",
            "<li><code style=\"white-space: pre-wrap;\">isTickerStarted</code> specifies whether the animation is running</li>",
            "<li><code style=\"white-space: pre-wrap;\">generateParticles</code> turns particle generation on and off</li>",
            "<li><code style=\"white-space: pre-wrap;\">mousePos</code> defines the origination point for new particles</li>",
            "<li><code style=\"white-space: pre-wrap;\">lastFrameTime</code> helps us compensate for dropped frames</li>",
            "</ul>",
            "<p>To manipulate all this state, we use two reducers and manually combine them. Redux does come with a <code style=\"white-space: pre-wrap;\">combineReducers</code> function, but I wanted to keep our state flat and that doesn’t fit <code style=\"white-space: pre-wrap;\">combineReducers</code>’s view of how life should work.</p>",
            "<div class=\"sourceCode\" id=\"cb154\" data-caption=\"Combining two reducers\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb154-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/reducers/index.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb154-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb154-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Manually combineReducers</span></a>",
            "<a class=\"sourceLine\" id=\"cb154-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(state <span class=\"op\" style=\"color: #666666;\">=</span> initialState<span class=\"op\" style=\"color: #666666;\">,</span> action) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb154-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb154-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        ...<span class=\"at\" style=\"color: #7d9029;\">appReducer</span>(state<span class=\"op\" style=\"color: #666666;\">,</span> action)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb154-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        ...<span class=\"at\" style=\"color: #7d9029;\">particlesReducer</span>(state<span class=\"op\" style=\"color: #666666;\">,</span> action)</a>",
            "<a class=\"sourceLine\" id=\"cb154-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb154-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>This is our reducer. It takes current <code style=\"white-space: pre-wrap;\">state</code>, sets it to <code style=\"white-space: pre-wrap;\">initialState</code> if undefined, and an action. To create new state, it spreads the object returned from <code style=\"white-space: pre-wrap;\">appReducer</code> and from <code style=\"white-space: pre-wrap;\">particlesReducer</code> into a new object. You can combine as many reducers as you want in this way.</p>",
            "<p>The usual <code style=\"white-space: pre-wrap;\">combineReducers</code> approach leads to nested hierarchical state. That often works great, but I wanted to keep our state flat.</p>",
            "<p>Lesson here is that there are no rules. You can make your reducers whatever you want. Combine them whichever way fits your use case. As long as you take a state object and an action and return a new state object.</p>",
            "<p><code style=\"white-space: pre-wrap;\">appReducer</code> will handle the constants and booleans and drive the metadata for our animation. <code style=\"white-space: pre-wrap;\">particlesReducer</code> will do the hard work of generating and animating particles.</p>",
            "<h3 id=\"driving-the-basics-with-appreducer\">Driving the basics with appReducer</h3>",
            "<p>Our <code style=\"white-space: pre-wrap;\">appReducer</code> handles the boring actions with a big switch statement. These are common in the Redux world. They help us decide what to do based on action type.</p>",
            "<div class=\"sourceCode\" id=\"cb155\" data-caption=\"appReducer big switch\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb155-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/reducers/index.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb155-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span> <span class=\"at\" style=\"color: #7d9029;\">appReducer</span>(state<span class=\"op\" style=\"color: #666666;\">,</span> action) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb155-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">switch</span> (<span class=\"va\" style=\"color: #19177c;\">action</span>.<span class=\"at\" style=\"color: #7d9029;\">type</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb155-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">case</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;TICKER_STARTED&quot;</span><span class=\"op\" style=\"color: #666666;\">:</span></a>",
            "<a class=\"sourceLine\" id=\"cb155-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"va\" style=\"color: #19177c;\">Object</span>.<span class=\"at\" style=\"color: #7d9029;\">assign</span>(<span class=\"op\" style=\"color: #666666;\">{},</span> state<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb155-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">isTickerStarted</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">true</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb155-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">lastFrameTime</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">new</span> <span class=\"at\" style=\"color: #7d9029;\">Date</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb155-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb155-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">case</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;START_PARTICLES&quot;</span><span class=\"op\" style=\"color: #666666;\">:</span></a>",
            "<a class=\"sourceLine\" id=\"cb155-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"va\" style=\"color: #19177c;\">Object</span>.<span class=\"at\" style=\"color: #7d9029;\">assign</span>(<span class=\"op\" style=\"color: #666666;\">{},</span> state<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb155-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">generateParticles</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">true</span></a>",
            "<a class=\"sourceLine\" id=\"cb155-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb155-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">case</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;STOP_PARTICLES&quot;</span><span class=\"op\" style=\"color: #666666;\">:</span></a>",
            "<a class=\"sourceLine\" id=\"cb155-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"va\" style=\"color: #19177c;\">Object</span>.<span class=\"at\" style=\"color: #7d9029;\">assign</span>(<span class=\"op\" style=\"color: #666666;\">{},</span> state<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb155-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">generateParticles</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">false</span></a>",
            "<a class=\"sourceLine\" id=\"cb155-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb155-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">case</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;UPDATE_MOUSE_POS&quot;</span><span class=\"op\" style=\"color: #666666;\">:</span></a>",
            "<a class=\"sourceLine\" id=\"cb155-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"va\" style=\"color: #19177c;\">Object</span>.<span class=\"at\" style=\"color: #7d9029;\">assign</span>(<span class=\"op\" style=\"color: #666666;\">{},</span> state<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb155-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">mousePos</span><span class=\"op\" style=\"color: #666666;\">:</span> [<span class=\"va\" style=\"color: #19177c;\">action</span>.<span class=\"at\" style=\"color: #7d9029;\">x</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">action</span>.<span class=\"at\" style=\"color: #7d9029;\">y</span>]</a>",
            "<a class=\"sourceLine\" id=\"cb155-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb155-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">case</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;RESIZE_SCREEN&quot;</span><span class=\"op\" style=\"color: #666666;\">:</span></a>",
            "<a class=\"sourceLine\" id=\"cb155-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"va\" style=\"color: #19177c;\">Object</span>.<span class=\"at\" style=\"color: #7d9029;\">assign</span>(<span class=\"op\" style=\"color: #666666;\">{},</span> state<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb155-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">svgWidth</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">action</span>.<span class=\"at\" style=\"color: #7d9029;\">width</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb155-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">svgHeight</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">action</span>.<span class=\"at\" style=\"color: #7d9029;\">height</span></a>",
            "<a class=\"sourceLine\" id=\"cb155-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb155-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">default</span><span class=\"op\" style=\"color: #666666;\">:</span></a>",
            "<a class=\"sourceLine\" id=\"cb155-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> state<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb155-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb155-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>Gotta love that boilerplate 😛</p>",
            "<p>Even though we’re only changing values of boolean flags and two-digit arrays, <em>we have to create a new state</em>. Redux relies on application state being immutable.</p>",
            "<p>Well, JavaScript doesn’t have real immutability. We pretend and make sure to never change state without making a new copy first. There are libraries that give you proper immutable data structures, but that’s a whole different course.</p>",
            "<p>We use <code style=\"white-space: pre-wrap;\">Object.assign({}, ...</code> to create a new empty object, fill it with the current state, then overwrite specific values with new ones. This is fast enough even with large state trees thanks to modern JavaScript engines.</p>",
            "<p>Note that when a reducer doesn’t recognize an action, it has to return the same state it received. Otherwise you end up wiping state. 😅</p>",
            "<p>So that’s the boilerplatey state updates. Manages starting and stopping the animation, flipping the particle generation switch, and resizing our viewport.</p>",
            "<p>The fun stuff happens in <code style=\"white-space: pre-wrap;\">particleReducer</code>.</p>",
            "<h3 id=\"driving-particles-with-particlereducer\">Driving particles with particleReducer</h3>",
            "<p>Our particles live in an array. Each particle has an id, a position, and a vector. That tells us where to draw the particle and how to move it to its future position.</p>",
            "<p>On each tick of the animation we have to:</p>",
            "<ol type=\"1\">",
            "<li>Generate new particles</li>",
            "<li>Remove particles outside the viewport</li>",
            "<li>Move every particle by its vector</li>",
            "</ol>",
            "<p>We can do all that in one big reducer, like this:</p>",
            "<div class=\"sourceCode\" id=\"cb156\" data-caption=\"The particles logic\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb156-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/reducers/index.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span> <span class=\"at\" style=\"color: #7d9029;\">particlesReducer</span>(state<span class=\"op\" style=\"color: #666666;\">,</span> action) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">switch</span> (<span class=\"va\" style=\"color: #19177c;\">action</span>.<span class=\"at\" style=\"color: #7d9029;\">type</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">case</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;TIME_TICK&quot;</span><span class=\"op\" style=\"color: #666666;\">:</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    svgWidth<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    svgHeight<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    lastFrameTime<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    generateParticles<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    particlesPerTick<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    particleIndex<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    mousePos</a>",
            "<a class=\"sourceLine\" id=\"cb156-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> state<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                newFrameTime <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">new</span> <span class=\"at\" style=\"color: #7d9029;\">Date</span>()<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                multiplier <span class=\"op\" style=\"color: #666666;\">=</span> (newFrameTime <span class=\"op\" style=\"color: #666666;\">-</span> lastFrameTime) / (<span class=\"dv\" style=\"color: #40a070;\">1000</span> / <span class=\"dv\" style=\"color: #40a070;\">60</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                newParticles <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"va\" style=\"color: #19177c;\">particles</span>.<span class=\"at\" style=\"color: #7d9029;\">slice</span>(<span class=\"dv\" style=\"color: #40a070;\">0</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb156-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (generateParticles) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">for</span> (<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> i <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">;</span> i <span class=\"op\" style=\"color: #666666;\">&lt;</span> particlesPerTick<span class=\"op\" style=\"color: #666666;\">;</span> i<span class=\"op\" style=\"color: #666666;\">++</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> particle <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        <span class=\"dt\" style=\"color: #902000;\">id</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">particleIndex</span> <span class=\"op\" style=\"color: #666666;\">+</span> i<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> mousePos[<span class=\"dv\" style=\"color: #40a070;\">0</span>]<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> mousePos[<span class=\"dv\" style=\"color: #40a070;\">1</span>]</a>",
            "<a class=\"sourceLine\" id=\"cb156-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb156-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"va\" style=\"color: #19177c;\">particle</span>.<span class=\"at\" style=\"color: #7d9029;\">vector</span> <span class=\"op\" style=\"color: #666666;\">=</span> [</a>",
            "<a class=\"sourceLine\" id=\"cb156-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        <span class=\"va\" style=\"color: #19177c;\">particle</span>.<span class=\"at\" style=\"color: #7d9029;\">id</span> <span class=\"op\" style=\"color: #666666;\">%</span> <span class=\"dv\" style=\"color: #40a070;\">2</span> <span class=\"op\" style=\"color: #666666;\">?</span> <span class=\"op\" style=\"color: #666666;\">-</span><span class=\"at\" style=\"color: #7d9029;\">randNormal</span>() : <span class=\"at\" style=\"color: #7d9029;\">randNormal</span>()<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        <span class=\"op\" style=\"color: #666666;\">-</span><span class=\"at\" style=\"color: #7d9029;\">randNormal2</span>() <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"fl\" style=\"color: #40a070;\">3.3</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    ]<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb156-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"va\" style=\"color: #19177c;\">newParticles</span>.<span class=\"at\" style=\"color: #7d9029;\">unshift</span>(particle)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb156-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                particleIndex <span class=\"op\" style=\"color: #666666;\">=</span> particleIndex <span class=\"op\" style=\"color: #666666;\">+</span> particlesPerTick <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"dv\" style=\"color: #40a070;\">1</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-36\" title=\"36\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb156-37\" title=\"37\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> movedParticles <span class=\"op\" style=\"color: #666666;\">=</span> newParticles</a>",
            "<a class=\"sourceLine\" id=\"cb156-38\" title=\"38\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                .<span class=\"at\" style=\"color: #7d9029;\">filter</span>(p <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-39\" title=\"39\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">!</span>(<span class=\"va\" style=\"color: #19177c;\">p</span>.<span class=\"at\" style=\"color: #7d9029;\">y</span> <span class=\"op\" style=\"color: #666666;\">&gt;</span> svgHeight <span class=\"op\" style=\"color: #666666;\">||</span> <span class=\"va\" style=\"color: #19177c;\">p</span>.<span class=\"at\" style=\"color: #7d9029;\">x</span> <span class=\"op\" style=\"color: #666666;\">&lt;</span> <span class=\"dv\" style=\"color: #40a070;\">0</span> <span class=\"op\" style=\"color: #666666;\">||</span> <span class=\"va\" style=\"color: #19177c;\">p</span>.<span class=\"at\" style=\"color: #7d9029;\">x</span> <span class=\"op\" style=\"color: #666666;\">&gt;</span> svgWidth)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-40\" title=\"40\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">}</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb156-41\" title=\"41\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                .<span class=\"at\" style=\"color: #7d9029;\">map</span>(p <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-42\" title=\"42\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> [vx<span class=\"op\" style=\"color: #666666;\">,</span> vy] <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">p</span>.<span class=\"at\" style=\"color: #7d9029;\">vector</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-43\" title=\"43\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"va\" style=\"color: #19177c;\">p</span>.<span class=\"at\" style=\"color: #7d9029;\">x</span> <span class=\"op\" style=\"color: #666666;\">+=</span> vx <span class=\"op\" style=\"color: #666666;\">*</span> multiplier<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-44\" title=\"44\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"va\" style=\"color: #19177c;\">p</span>.<span class=\"at\" style=\"color: #7d9029;\">y</span> <span class=\"op\" style=\"color: #666666;\">+=</span> vy <span class=\"op\" style=\"color: #666666;\">*</span> multiplier<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-45\" title=\"45\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"va\" style=\"color: #19177c;\">p</span>.<span class=\"at\" style=\"color: #7d9029;\">vector</span>[<span class=\"dv\" style=\"color: #40a070;\">1</span>] <span class=\"op\" style=\"color: #666666;\">+=</span> Gravity <span class=\"op\" style=\"color: #666666;\">*</span> multiplier<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-46\" title=\"46\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> p<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-47\" title=\"47\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-48\" title=\"48\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb156-49\" title=\"49\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-50\" title=\"50\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">particles</span><span class=\"op\" style=\"color: #666666;\">:</span> movedParticles<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-51\" title=\"51\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">lastFrameTime</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">new</span> <span class=\"at\" style=\"color: #7d9029;\">Date</span>()<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-52\" title=\"52\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                particleIndex</a>",
            "<a class=\"sourceLine\" id=\"cb156-53\" title=\"53\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-54\" title=\"54\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">default</span><span class=\"op\" style=\"color: #666666;\">:</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-55\" title=\"55\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-56\" title=\"56\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">particles</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">particles</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-57\" title=\"57\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">lastFrameTime</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">lastFrameTime</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-58\" title=\"58\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">particleIndex</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">particleIndex</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-59\" title=\"59\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-60\" title=\"60\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb156-61\" title=\"61\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>That’s a lot of code, I know. Let me explain 😃</p>",
            "<p>The first part takes important values out of <code style=\"white-space: pre-wrap;\">state</code>, calculates the dropped frame multiplier, and makes a new copy of the particles array with <code style=\"white-space: pre-wrap;\">.slice(0)</code>. That was the fastest way I could find.</p>",
            "<p>Then we generate new particles.</p>",
            "<p>We loop through <code style=\"white-space: pre-wrap;\">particlesPerTick</code> particles, create them at <code style=\"white-space: pre-wrap;\">mousePos</code> coordinates, and insert at the beginning of the array. In my tests that performed best. Particles get random movement vectors.</p>",
            "<p>This randomness is a Redux faux pas. Reducers are supposed to be functionally pure: produce the same result every time they are called with the same argument values. Randomness is impure.</p>",
            "<p>We don’t need our particle vectors to be deterministic, so I think this is fine. Let’s say our universe is stochastic instead 😄</p>",
            "<p>{aside} Stochastic means that our universe/physic simulation is governed by probabilities. You can still model such a universe and reason about its behavior. A lot of real world physics is stochastic in nature. {/aside}</p>",
            "<p>We now have an array full of old and new particles. We remove all out-of-bounds particles with a <code style=\"white-space: pre-wrap;\">filter</code>, then walk through what’s left to move each particle by its vector.</p>",
            "<p>To simulate gravity, we update vectors’ vertical component using our <code style=\"white-space: pre-wrap;\">Gravity</code> constant. That makes particles fall down faster and faster creating a nice parabola.</p>",
            "<p>Our reducer is done. Our particle generator works. Our thing animates smoothly. \\o/</p>"
          ]
        },
        {
          "lectureTitle": "What we learned",
          "lectureLines": [
            "<h2 id=\"what-we-learned\">What we learned</h2>",
            "<p>Building a particle generator in React and Redux, we made three important discoveries:</p>",
            "<ol type=\"1\">",
            "<li><strong>Redux is much faster than you’d think</strong>. Creating a new copy of the state tree on each animation loop sounds crazy, but it works. Most of our code creates shallow copies, which explains the speed.</li>",
            "<li><strong>Adding to JavaScript arrays is slow</strong>. Once we hit about 300 particles, adding new ones becomes slow. Stop adding particles and you get smooth animation. This indicates that something about creating particles is slow: either adding to the array, or creating React component instances, or creating SVG DOM nodes.</li>",
            "<li><strong>SVG is also slow</strong>. To test the above hypothesis, I made the generator create 3000 particles on first click. The animation speed is <em>terrible</em> at first and becomes okayish at around 1000 particles. This suggests that making shallow copies of big arrays and moving existing SVG nodes around is faster than adding new DOM nodes and array elements. <a href=\"https://i.imgur.com/ug478Me.gif\">Here’s a gif</a></li>",
            "</ol>",
            "<hr>",
            "<p>There you go: Animating with React, Redux, and D3. Kind of a new superpower 😉</p>",
            "<p>Here’s the recap:</p>",
            "<ul>",
            "<li>React handles rendering</li>",
            "<li>D3 calculates stuff, detects mouse positions</li>",
            "<li>Redux handles state</li>",
            "<li>element coordinates are state</li>",
            "<li>change coordinates on every <code style=\"white-space: pre-wrap;\">requestAnimationFrame</code></li>",
            "<li>animation!</li>",
            "</ul>",
            "<p>Now let’s render to canvas and push this sucker to 20,000 smoothly animated elements. Even on a mobile phone.</p>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "Speed optimizations",
      "lectures": [
        {
          "lectureTitle": "Speed intro",
          "lectureLines": [
            "<h1 id=\"speed-optimizations\">Speed optimizations</h1>",
            "<p>Welcome to the speed optimization chapter. This is where we make our code harder to read and faster to run.</p>",
            "<p>You might never need any techniques discussed here.</p>",
            "<p>You already know how to build performant data visualization components. For 99% of applications, plain code that’s easy to read and understand is faster than fast code that’s hard to read.</p>",
            "<p>You and your team spend most of your time reading code. Optimize for that. The faster you can code, the faster your system can evolve. Leave runtime optimization to React and its ecosystem of library authors for as long as you can get away with.</p>",
            "<p>Do you really need to save that tenth of a second at runtime if it means an extra hour of head scratching every time there’s a bug?</p>",
            "<p>Be honest. 😉</p>",
            "<p>That said, there <em>are</em> cases where faster code is also easier to read. And there are cases where your visualization is so massive, that you need every ounce of oomph you can get.</p>",
            "<p>For the most part, we’re going to talk about three things:</p>",
            "<ul>",
            "<li>using Canvas to speed up rendering</li>",
            "<li>using React-like libraries to speed up the core rendering engine</li>",
            "<li>avoiding unnecessary computation and redraws</li>",
            "<li>reaching for WebGL when even Canvas isn’t fast enough</li>",
            "</ul>",
            "<p>We’ll start with Canvas because it’s the best bang for buck improvement you can make.</p>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "Using canvas",
      "lectures": [
        {
          "lectureTitle": "Intro",
          "lectureLines": [
            "<h1 id=\"using-canvas\">Using canvas</h1>",
            "<p>So far we’ve been rendering our visualizations with SVG. SVG is great because it follows a familiar structure, offers infinitely scalable vector graphics, and works everywhere. There are <em>some</em> advanced SVG features you can’t use everywhere, but the core is solid.</p>",
            "<p>However, SVG has a big flaw: it’s slow.</p>",
            "<p>Anything more than a few hundred SVG nodes and your browser starts to struggle. Especially if those thousands of elements move around.</p>",
            "<p>A web animation panel moderator at ForwardJS once asked me, <em>“But why would you want thousands of SVG elements?”</em>.</p>",
            "<p>It was my first time participating in a panel, stage lights shining upon me, a mildly disinterested audience staring into their phones … I bombed: <em>“Errr … because you can?”</em>.</p>",
            "<p><img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/stage_lights.jpg\"></p>",
            "<p>What I <em>should</em> have said was: <em>“Because there have been thousands of UFO sightings, there are thousands of counties in the US, millions of taxi rides, hundreds of millions of people having this or that datapoint. And you want to show change over time.”</em></p>",
            "<p>That’s the real answer.</p>",
            "<p>Sometimes, when you’re visualizing data, you have a lot of data. The data changes over time. Animation is the best way to show change over time.</p>",
            "<p>Once upon a time, I worked on a <a href=\"https://www.packtpub.com/web-development/mastering-d3js-video\">D3 video course</a> for Packt and used UFO sightings as an example. At peak UFO sighting, right before smartphones become a thing, the animation takes up to 2 seconds to redraw a single frame.</p>",
            "<p>Terrible.</p>",
            "<p>So if SVG is slow and you need to animate thousands of elements, what are you to do? HTML5 Canvas.</p>"
          ]
        },
        {
          "lectureTitle": "Why canvas",
          "lectureLines": [
            "<h2 id=\"why-canvas\">Why Canvas</h2>",
            "<p>Unlike SVG, HTML5 Canvas lets you draw rasterized images. This means you’re no longer operating at the level of shapes because you’re working with pixels on the screen.</p>",
            "<p>With SVG and other vector formats, you tell the browser <em>what</em> you want to render. With Canvas and other raster formats, you tell the browser <em>how</em> you want to render. The browser doesn’t know what you’re doing; it gets a field of pixel colors and renders them as an image.</p>",
            "<p>That’s much faster for computers to handle. In some cases browsers can even use hardware acceleration – the GPU – to render HTML5 Canvas elements. With a bit of care, you can do almost anything you want, even on a mobile phone.</p>",
            "<p>Phones these days have amazing GPUs and kind of terrible CPUs in comparison. The CPU burns more battery, works slower, warms up your phone more, etc.</p>",
            "<p>If SVG wasn’t so easy to use, I’d almost suggest going straight to Canvas for any sort of complex animation. Mobile traffic is, what, 60% to 70% of web traffic these days?</p>"
          ]
        },
        {
          "lectureTitle": "Isn't canvas too hard?",
          "lectureLines": [
            "<h2 id=\"isnt-that-too-hard\">Isn’t that too hard?</h2>",
            "<p>You might think all this pixel stuff sounds complicated. We’ve stayed in shape and component land so far. We didn’t care about any pixels or rendering details. Draw a rectangle and a wild rectangle appears.</p>",
            "<p>How do you know which pixel should do what when you render with Canvas?</p>",
            "<p>HTML5 Canvas does offer some shape primitives. It has circles and rectangles and things like that, but they suffer from the same problem that SVG does. The browser has to use your CPU to calculate those, and at around 10,000 elements, things break down.</p>",
            "<p>10,000 elements is still a hell of a lot more than the 3,000 or so that SVG gives you.</p>",
            "<p>If your app allows it, you can use sprites: Tiny images copy-pasted on the Canvas as bytestreams. I have yet to find an upper bound for those. My JavaScript became the bottleneck 😄</p>",
            "<p>But I’m getting ahead of myself. We’ll talk about sprites later.</p>"
          ]
        },
        {
          "lectureTitle": "The trouble with Canvas",
          "lectureLines": [
            "<h2 id=\"the-trouble-with-html5-canvas\">The trouble with HTML5 Canvas</h2>",
            "<p>The tricky thing with HTML5 Canvas is that the API is low level and that canvas is flat. As far as your JavaScript and React code are concerned, it’s a flat image. It could be anything.</p>",
            "<p>The lack of structure makes it difficult to detect clicks on elements, interactions between shapes, when something covers something else, how the user interacts with your stuff and so on Anything that requires understanding what’s rendered.</p>",
            "<p>You have to move most of that logic into your data store and manually keep track.</p>",
            "<p>As you can imagine, this becomes cumbersome. And you still can’t detect user interaction because all you get is <em>“User clicked on coordinate (x, y). Have fun.”</em></p>",
            "<p>At the same time, the low level API makes abstractions difficult. You can’t create components for “this is a map” or “histogram goes here”. You’re always down to circles and rectangles and basic shapes.</p>",
            "<p>Your code soon looks like the D3.js spaghetti we tried to avoid in the first place.</p>"
          ]
        },
        {
          "lectureTitle": "Declarative Canvas with Konva and react-konva",
          "lectureLines": [
            "<h1 id=\"declarative-html5-canvas-with-konva-and-react-konva\">Declarative HTML5 Canvas with Konva and react-konva</h1>",
            "<p>Enter <a href=\"https://konvajs.github.io\">Konva</a> and react-konva. All the benefits of declarative code, but rendered on the canvas.</p>",
            "<p>I’m gonna let Anton Lavrenov, the author of Konva, explain:</p>",
            "<blockquote>",
            "<p>Konva is an HTML5 Canvas JavaScript framework that enables high performance animations, transitions, node nesting, layering, filtering, caching, event handling for desktop and mobile applications, and much more.</p>",
            "</blockquote>",
            "<blockquote>",
            "<p>You can draw things onto the stage, add event listeners to them, move them, scale them, and rotate them independently from other shapes to support high performance animations, even if your application uses thousands of shapes. Served hot with a side of awesomeness.</p>",
            "</blockquote>",
            "<p>That.</p>",
            "<p>It’s exactly what we need to push our animated React apps to thousands of elements without spending too much time thinking about the <em>how</em> of rendering. Best leave the hairy details to somebody else.</p>",
            "<p>Let’s try out two examples:</p>",
            "<ol type=\"1\">",
            "<li>Pushing our particle generator to 20,000 elements</li>",
            "<li>An n-body collision simulator built with MobX</li>",
            "</ol>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "Smooth animation with 20,000+ elements",
      "lectures": [
        {
          "lectureTitle": "A particle generator pushed to the max",
          "lectureLines": [
            "<h2 id=\"canvas-react-redux\">A particle generator pushed to 20,000 elements with Canvas</h2>",
            "<p>Our <a href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6906668#animating-react-redux\">SVG-based particle generator</a> caps out at a few thousand elements. Animation becomes slow as times between iterations of our game loop increase.</p>",
            "<p>Old elements leave the screen and get pruned faster than we can create new ones. This creates a natural upper limit to how many elements we can push into the page.</p>",
            "<p>We can render many more elements if we take out SVG and use HTML5 Canvas instead. I was able to push the code up to almost 20,000 smoothly animated elements. Then JavaScript became the bottleneck.</p>",
            "<p>Well, I say JavaScript was the bottleneck, but monitor size plays a role too. It goes up to 20,000 on my laptop screen, juuuust grazes 30,000 on my large desktop monitor, and averages about 17,000 on my iPhone 5SE.</p>",
            "<p>Friends with newer laptops got it up to 35,000.</p>",
            "<p>You can see it in action hosted on <a href=\"https://swizec.github.io/react-particles-experiment/\">Github pages</a>.</p>",
            "<p>We’re keeping most of our existing code. The real changes happen in <code style=\"white-space: pre-wrap;\">src/components/index.jsx</code>, where a Konva stage replaces the <code style=\"white-space: pre-wrap;\">&lt;svg&gt;</code> element, and in <code style=\"white-space: pre-wrap;\">src/components/Particles.jsx</code>, where we change what we render. There’s a small tweak in the reducer to generate more particles per tick.</p>",
            "<p>You should go into your particle generator directory, install Konva and react-konva, and then make the changes below. Trying things out is better than just reading my code 😉</p>",
            "<pre data-caption=\"Install Konva\"><code style=\"white-space: pre-wrap;\">$ npm install --save konva react-konva</code></pre>",
            "<p>{aside} react-konva is a thin wrapper on Konva itself. There’s no need to think about it as its own thing. For the most part, you can go into the Konva docs, read about something, and it Just Works™ in react-konva. {/aside}</p>"
          ]
        },
        {
          "lectureTitle": "Prepare canvas layer",
          "lectureLines": [
            "<h3 id=\"preparing-a-canvas-layer\">Preparing a canvas layer</h3>",
            "<p>Our changes start in <code style=\"white-space: pre-wrap;\">src/components/index.jsx</code>. We have to throw away the <code style=\"white-space: pre-wrap;\">&lt;svg&gt;</code> element and replace it with a Konva stage.</p>",
            "<p>You can think of a Konva stage as a Canvas element with a bunch of helper methods attached. Some of them Konva uses internally; others are exposed as an API. Functions like exporting to an image file, detecting intersections, etc.</p>",
            "<div class=\"sourceCode\" id=\"cb158\" data-caption=\"Import Konva and set the stage\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb158-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/index.jsx</span></a>",
            "<a class=\"sourceLine\" id=\"cb158-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb158-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb158-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">{</span> Stage <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;react-konva&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb158-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb158-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb158-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> App <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> Component <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb158-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ..</span></a>",
            "<a class=\"sourceLine\" id=\"cb158-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb158-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb158-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ..</span></a>",
            "<a class=\"sourceLine\" id=\"cb158-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                     <span class=\"op\" style=\"color: #666666;\">&lt;</span>Stage width<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">svgWidth</span><span class=\"op\" style=\"color: #666666;\">}</span> height<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">svgHeight</span><span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb158-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                         <span class=\"op\" style=\"color: #666666;\">&lt;</span>Particles particles<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">particles</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb158-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb158-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                     &lt;/Stage<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb158-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb158-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                 &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb158-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                 <span class=\"op\" style=\"color: #666666;\">&lt;</span>Footer N<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"va\" style=\"color: #19177c;\">particles</span>.<span class=\"at\" style=\"color: #7d9029;\">length</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb158-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">             &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb158-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb158-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb158-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>We import <code style=\"white-space: pre-wrap;\">Stage</code> from <code style=\"white-space: pre-wrap;\">react-konva</code>, then use it instead of the <code style=\"white-space: pre-wrap;\">&lt;svg&gt;</code> element in the <code style=\"white-space: pre-wrap;\">render</code> method. It gets a <code style=\"white-space: pre-wrap;\">width</code> and a <code style=\"white-space: pre-wrap;\">height</code>.</p>",
            "<p>Inside, we render the <code style=\"white-space: pre-wrap;\">Particles</code> component. It’s going to create a Konva layer and use low-level Canvas methods to render particles as sprites.</p>"
          ]
        },
        {
          "lectureTitle": "Use sprites for max redraw speed",
          "lectureLines": [
            "<h3 id=\"using-sprites-for-max-redraw-speed\">Using sprites for max redraw speed</h3>",
            "<p>Our <a href=\"https://swizec1.teachable.com/courses/react-for-data-visualization/lectures/6906670#svg-particles\">SVG-based Particles</a> component was simple. Iterate through a list of particles, render a <code style=\"white-space: pre-wrap;\">&lt;Particle&gt;</code> component for each.</p>",
            "<p>We’re going to completely rewrite that. Our new approach goes like this:</p>",
            "<ol start=\"0\" type=\"1\">",
            "<li>Cache a sprite on <code style=\"white-space: pre-wrap;\">componentDidMount</code></li>",
            "<li>Clear canvas</li>",
            "<li>Redraw all particles</li>",
            "<li>Repeat</li>",
            "</ol>",
            "<p>Because the new approach renders a flat image, and because we don’t care about interaction with individual particles, we can get rid of the <code style=\"white-space: pre-wrap;\">Particle</code> component. The unnecessary layer of nesting was slowing us down.</p>",
            "<p>The new <code style=\"white-space: pre-wrap;\">Particles</code> component looks like this:</p>",
            "<div class=\"sourceCode\" id=\"cb159\" data-caption=\"Sprite-based Particles component\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb159-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Particles.jsx</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb159-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"op\" style=\"color: #666666;\">{</span> Component <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;react&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">{</span> FastLayer <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;react-konva&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb159-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Particles <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> Component <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    layerRef <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">createRef</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb159-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">componentDidMount</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">canvas</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">layerRef</span>.<span class=\"va\" style=\"color: #19177c;\">current</span>.<span class=\"va\" style=\"color: #19177c;\">canvas</span>.<span class=\"at\" style=\"color: #7d9029;\">_canvas</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">canvasContext</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">canvas</span>.<span class=\"at\" style=\"color: #7d9029;\">getContext</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;2d&#39;</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb159-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">sprite</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">new</span> <span class=\"at\" style=\"color: #7d9029;\">Image</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">sprite</span>.<span class=\"at\" style=\"color: #7d9029;\">src</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;https://i.imgur.com/m5l6lhr.png&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb159-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">drawParticle</span>(particle) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> <span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> particle<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb159-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">canvasContext</span>.<span class=\"at\" style=\"color: #7d9029;\">drawImage</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">sprite</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">128</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">128</span><span class=\"op\" style=\"color: #666666;\">,</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">15</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">15</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb159-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">componentDidUpdate</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> particles <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">particles</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb159-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">console</span>.<span class=\"at\" style=\"color: #7d9029;\">time</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;drawing&#39;</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">canvasContext</span>.<span class=\"at\" style=\"color: #7d9029;\">clearRect</span>(<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">canvas</span>.<span class=\"at\" style=\"color: #7d9029;\">width</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">canvas</span>.<span class=\"at\" style=\"color: #7d9029;\">height</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb159-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">for</span> (<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> i <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">;</span> i <span class=\"op\" style=\"color: #666666;\">&lt;</span> <span class=\"va\" style=\"color: #19177c;\">particles</span>.<span class=\"at\" style=\"color: #7d9029;\">length</span><span class=\"op\" style=\"color: #666666;\">;</span> i<span class=\"op\" style=\"color: #666666;\">++</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">drawParticle</span>(particles[i])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">console</span>.<span class=\"at\" style=\"color: #7d9029;\">timeEnd</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;drawing&#39;</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb159-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-36\" title=\"36\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb159-37\" title=\"37\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>FastLayer ref<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">layerRef</span><span class=\"op\" style=\"color: #666666;\">}</span> listening<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;false&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb159-38\" title=\"38\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-39\" title=\"39\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-40\" title=\"40\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb159-41\" title=\"41\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb159-42\" title=\"42\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> Particles<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>40 lines of code is a lot all at once. Let’s walk through step by step.</p>",
            "<h4 id=\"componentdidmount\">componentDidMount</h4>",
            "<div class=\"sourceCode\" id=\"cb160\" data-caption=\"componentDidMount method\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb160-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Particles.jsx</span></a>",
            "<a class=\"sourceLine\" id=\"cb160-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb160-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb160-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"at\" style=\"color: #7d9029;\">componentDidMount</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb160-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">canvas</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">refs</span>.<span class=\"va\" style=\"color: #19177c;\">layer</span>.<span class=\"va\" style=\"color: #19177c;\">canvas</span>.<span class=\"at\" style=\"color: #7d9029;\">_canvas</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb160-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">canvasContext</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">canvas</span>.<span class=\"at\" style=\"color: #7d9029;\">getContext</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;2d&#39;</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb160-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb160-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">sprite</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">new</span> <span class=\"at\" style=\"color: #7d9029;\">Image</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb160-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">sprite</span>.<span class=\"at\" style=\"color: #7d9029;\">src</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;https://i.imgur.com/m5l6lhr.png&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb160-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>React calls <code style=\"white-space: pre-wrap;\">componentDidMount</code> when our component first renders. We use it to set up 3 instance properties.</p>",
            "<p><code style=\"white-space: pre-wrap;\">this.canvas</code> is a reference to the HTML5 Canvas element. We get it through a ref to the Konva layer, then spelunk through Konva internals to get the canvas itself. As the <code style=\"white-space: pre-wrap;\">_</code> prefix indicates, Anton Lavrenov did not intend this to be a public API.</p>",
            "<p>Thanks to JavaScript’s permissiveness, we can use it anyway. 🙌</p>",
            "<p><code style=\"white-space: pre-wrap;\">this.canvasContext</code> is a reference to our canvas’s <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D\">CanvasRenderingContext2D</a>. It’s the interface we use to draw basic shapes, perform transformations, and so on. Context is the only part of canvas you ever interact with as a developer.</p>",
            "<p>Why it’s not just Canvas, I don’t know.</p>",
            "<p><code style=\"white-space: pre-wrap;\">this.sprite</code> is a cached image. A small minion that we are going to copy-paste all over as our particle. Creating a new image object with <code style=\"white-space: pre-wrap;\">new Image()</code> and setting the <code style=\"white-space: pre-wrap;\">src</code> property downloads our sprite from the internet into browser memory.</p>",
            "<p>It looks like this:</p>",
            "<figure>",
            "<img src=\"https://i.imgur.com/m5l6lhr.png\" alt=\"Our minion particle\"><figcaption>Our minion particle</figcaption>",
            "</figure>",
            "<p>You might think it’s unsafe to copy references to rendered elements into component properties like that, but it’s okay. Our render function always renders the same thing, so the reference never changes. It just makes our code cleaner.</p>",
            "<p>Should our component unmount and re-mount, React will call <code style=\"white-space: pre-wrap;\">componentDidMount</code> again and update our reference.</p>",
            "<h4 id=\"drawparticle\">drawParticle</h4>",
            "<div class=\"sourceCode\" id=\"cb161\" data-caption=\"drawParticle code\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb161-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Particles.jsx</span></a>",
            "<a class=\"sourceLine\" id=\"cb161-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb161-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb161-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"at\" style=\"color: #7d9029;\">drawParticle</span>(particle) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb161-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> <span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> particle<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb161-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb161-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">canvasContext</span>.<span class=\"at\" style=\"color: #7d9029;\">drawImage</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">sprite</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">128</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">128</span><span class=\"op\" style=\"color: #666666;\">,</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">15</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">15</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb161-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p><code style=\"white-space: pre-wrap;\">drawParticle</code> draws a single particle on the canvas. It gets coordinates from the <code style=\"white-space: pre-wrap;\">particle</code> argument and uses <code style=\"white-space: pre-wrap;\">drawImage</code> to copy our sprite into position.</p>",
            "<p>We use the whole sprite, corner <code style=\"white-space: pre-wrap;\">(0, 0)</code> to corner <code style=\"white-space: pre-wrap;\">(128, 128)</code>. That’s how big our sprite is. And we copy it to position <code style=\"white-space: pre-wrap;\">(x, y)</code> with a width and height of <code style=\"white-space: pre-wrap;\">15</code> pixels.</p>",
            "<p><code style=\"white-space: pre-wrap;\">drawImage</code> is the fastest method I’ve found to put pixels on canvas. I don’t know why it’s so fast, but here’s a <a href=\"https://jsperf.com/canvas-drawimage-vs-putimagedata/3\">helpful benchmark</a> so you can see for yourself.</p>",
            "<h4 id=\"componentdidupdate-1\">componentDidUpdate</h4>",
            "<div class=\"sourceCode\" id=\"cb162\" data-caption=\"componentDidUpdate code\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb162-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Particles.jsx</span></a>",
            "<a class=\"sourceLine\" id=\"cb162-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb162-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb162-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"at\" style=\"color: #7d9029;\">componentDidUpdate</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb162-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> particles <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">particles</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb162-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb162-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">console</span>.<span class=\"at\" style=\"color: #7d9029;\">time</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;drawing&#39;</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb162-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">canvasContext</span>.<span class=\"at\" style=\"color: #7d9029;\">clearRect</span>(<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">canvas</span>.<span class=\"at\" style=\"color: #7d9029;\">width</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">canvas</span>.<span class=\"at\" style=\"color: #7d9029;\">height</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb162-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb162-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">for</span> (<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> i <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">;</span> i <span class=\"op\" style=\"color: #666666;\">&lt;</span> <span class=\"va\" style=\"color: #19177c;\">particles</span>.<span class=\"at\" style=\"color: #7d9029;\">length</span><span class=\"op\" style=\"color: #666666;\">;</span> i<span class=\"op\" style=\"color: #666666;\">++</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb162-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">drawParticle</span>(particles[i])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb162-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb162-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">console</span>.<span class=\"at\" style=\"color: #7d9029;\">timeEnd</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;drawing&#39;</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb162-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p><code style=\"white-space: pre-wrap;\">componentDidUpdate</code> is where the magic happens. React calls this lifecycle method every time our list of particles changes. <em>After</em> the <code style=\"white-space: pre-wrap;\">render</code> method.</p>",
            "<p>Just like the D3 blackbox approach, we move rendering out of the <code style=\"white-space: pre-wrap;\">render</code> method and into <code style=\"white-space: pre-wrap;\">componentDidUpdate</code>.</p>",
            "<p>Here’s how it works:</p>",
            "<ol type=\"1\">",
            "<li><code style=\"white-space: pre-wrap;\">this.canvasContext.clearRect</code> clears the entire canvas from coordinate <code style=\"white-space: pre-wrap;\">(0, 0)</code> to coordinate <code style=\"white-space: pre-wrap;\">(width, height)</code>. We delete everything and make the canvas transparent.</li>",
            "<li>We iterate our <code style=\"white-space: pre-wrap;\">particles</code> list with a <code style=\"white-space: pre-wrap;\">for</code> loop and call <code style=\"white-space: pre-wrap;\">drawParticle</code> on each element.</li>",
            "</ol>",
            "<p>Clearing and redrawing the canvas is faster than moving individual particles. For loops are faster than <code style=\"white-space: pre-wrap;\">.map</code> or any other form of iteration. I tested. A lot.</p>",
            "<p>Open your browser console and see how long each frame takes to draw. The <code style=\"white-space: pre-wrap;\">console.time</code> - <code style=\"white-space: pre-wrap;\">console.timeEnd</code> pair measures how long it takes your code to get from <code style=\"white-space: pre-wrap;\">time</code> to <code style=\"white-space: pre-wrap;\">timeEnd</code>. You can have as many of these timers running as you want as long as you give them different names.</p>",
            "<h4 id=\"render-4\">render</h4>",
            "<div class=\"sourceCode\" id=\"cb163\" data-caption=\"render code\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb163-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Particles.jsx</span></a>",
            "<a class=\"sourceLine\" id=\"cb163-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb163-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb163-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb163-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb163-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>FastLayer ref<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">layerRef</span><span class=\"op\" style=\"color: #666666;\">}</span> listening<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;false&quot;</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb163-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb163-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>After all that work, our <code style=\"white-space: pre-wrap;\">render</code> method is quite short.</p>",
            "<p>We render a Konva <code style=\"white-space: pre-wrap;\">FastLayer</code>, give it a <code style=\"white-space: pre-wrap;\">ref</code> and turn off <code style=\"white-space: pre-wrap;\">listening</code> for mouse events. That makes the fast layer even faster.</p>",
            "<p>Ideas for this combination of settings came from Konva’s official <a href=\"https://konvajs.github.io/docs/performance/All_Performance_Tips.html\">performance tips</a> documentation. This makes sense when you think about it.</p>",
            "<p>A <code style=\"white-space: pre-wrap;\">FastLayer</code> is faster than a <code style=\"white-space: pre-wrap;\">Layer</code>. It’s in the name. Ignoring mouse events means you don’t have to keep track of elements. It reduces computation.</p>",
            "<p>This was empirically the fastest solution with the most particles on screen.</p>"
          ]
        },
        {
          "lectureTitle": "But why so many elements?",
          "lectureLines": [
            "<h3 id=\"but-why-swizec\">But why, Swizec?</h3>",
            "<p>I’m glad you asked. This was a silly example. I devised the experiment because at my first React+D3 workshop somebody asked, <em>“What if we have thousands of datapoints, and we want to animate all of them?”</em>. I didn’t have a good answer.</p>",
            "<p>Now I do. You put them in Canvas. You drive the animation with a game loop. You’re good.</p>",
            "<p>You can even do it as an overlay. Have an SVG for your graphs and charts, overlay with a transparent canvas for your high speed animation.</p>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "Build a small interactive canvas game",
      "lectures": [
        {
          "lectureTitle": "Simulating billiards with MobX, Canvas, and Konva",
          "lectureLines": [
            "<h2 id=\"build-a-declarative-billiards-simulation-with-mobx-canvas-and-konva\">Build a declarative billiards simulation with MobX, Canvas, and Konva</h2>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/billiards-start.png\" alt=\"Billiards game\"><figcaption>Billiards game</figcaption>",
            "</figure>",
            "<p>We’re building a small game. You have 11 glass balls – marbles, if you will. Grab one, throw it at the others, watch them bounce around. There is no score, but it looks cool, and it’s a fun way to explore how Konva and React give you interactive Canvas features.</p>",
            "<p>We’re using React and Konva to render our 11 marbles on an HTML5 Canvas element, MobX to drive the animation loop, and D3 to help with collision detection. Because this example is declarative, we can split it into two parts:</p>",
            "<ul>",
            "<li>Part 1: Rendering the marbles</li>",
            "<li>Part 2: Building the physics</li>",
            "</ul>",
            "<p>You can see the finished <a href=\"https://github.com/Swizec/declarative-canvas-react-konva\">code on Github</a> and play around with a <a href=\"https://swizec.github.io/declarative-canvas-react-konva/\">hosted version</a> of the code you’re about to build.</p>",
            "<p>I know this example comes late in the book, and you’re feeling like you know all there is to React and visualizations. You can think of this example as practice. Plus it’s a good way to learn the basics of MobX.</p>"
          ]
        },
        {
          "lectureTitle": "Decorators",
          "lectureLines": [
            "<h3 id=\"decorators\">Decorators</h3>",
            "<p>Before we begin, let me tell you about decorators.</p>",
            "<p>MobX embraces them to make its API easier to use. You can use MobX without decorators, but decorators make it better.</p>",
            "<p>A couple years ago, decorators got very close to becoming an official spec, then got held back. I don’t know <em>why</em>, but they’re a great feature whose syntax is unlikely to change. So even if MobX has to change its implementation when decorators do land in the JavaScript spec, you’re not likely to have to change anything.</p>",
            "<p>You can think of decorators as function wrappers. Instead of code like this:</p>",
            "<div class=\"sourceCode\" id=\"cb164\" data-caption=\"Decoratorless function wrapping\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb164-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"at\" style=\"color: #7d9029;\">inject</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;store&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> (<span class=\"op\" style=\"color: #666666;\">{</span> store <span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">&lt;</span>div<span class=\"op\" style=\"color: #666666;\">&gt;</span>A thing <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">with</span> <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"va\" style=\"color: #19177c;\">store</span>.<span class=\"at\" style=\"color: #7d9029;\">value</span><span class=\"op\" style=\"color: #666666;\">}</span>&lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>You can write the same code like this:</p>",
            "<div class=\"sourceCode\" id=\"cb165\" data-caption=\"Function wrapping with decorators\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb165-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">@<span class=\"at\" style=\"color: #7d9029;\">inject</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;store&#39;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb165-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">(<span class=\"op\" style=\"color: #666666;\">{</span> store <span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">&lt;</span>div<span class=\"op\" style=\"color: #666666;\">&gt;</span>A thing <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">with</span> <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"va\" style=\"color: #19177c;\">store</span>.<span class=\"at\" style=\"color: #7d9029;\">value</span><span class=\"op\" style=\"color: #666666;\">}</span>&lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a></code></pre></div>",
            "<p>Not much of a difference, but it becomes better looking when you work with classes or combine multiple decorators. That’s when they shine. No more <code style=\"white-space: pre-wrap;\">})))}))</code> at the end of your functions.</p>",
            "<p>By the way, <code style=\"white-space: pre-wrap;\">inject</code> is to MobX much like <code style=\"white-space: pre-wrap;\">connect</code> is to Redux. I’ll explain in a bit.</p>"
          ]
        },
        {
          "lectureTitle": "Part 0: Some setup",
          "lectureLines": [
            "<h3 id=\"part-0-some-setup\">Part 0: Some setup</h3>",
            "<p>Because decorators aren’t in the JavaScript spec, we have to tweak how we start our project. We can still use <code style=\"white-space: pre-wrap;\">create-react-app</code>, but there’s an additional step.</p>",
            "<p>You should start a new project like this:</p>",
            "<pre data-caption=\"Create the billiards game project\"><code style=\"white-space: pre-wrap;\">$ create-react-app billiards-game --scripts-version custom-react-scripts</code></pre>",
            "<p>This creates a new directory with a full setup for React. Just like you’re used to.</p>",
            "<p>The addition of <code style=\"white-space: pre-wrap;\">--scripts-version custom-react-scripts</code> employs <span class=\"citation\" data-cites=\"kitze\">@kitze</span>’s <a href=\"https://github.com/kitze/custom-react-scripts\">custom-react-scripts</a> project to give us more configuration options. Like the ability to enable decorators.</p>",
            "<p>We enable them in the <code style=\"white-space: pre-wrap;\">.env</code> file. Add this line:</p>",
            "<pre data-caption=\"Add to .env settings\"><code style=\"white-space: pre-wrap;\">// billiards-game/.env",
            "// ...",
            "REACT_APP_DECORATORS=true</code></pre>",
            "<p>No installation necessary. I think <code style=\"white-space: pre-wrap;\">custom-react-scripts</code> uses the <code style=\"white-space: pre-wrap;\">transform-decorators-legacy</code> Babel plugin behind the scenes. It’s pre-installed, and we enable it with that <code style=\"white-space: pre-wrap;\">.env</code> change.</p>",
            "<p>Before we begin, you should install some other dependencies as well:</p>",
            "<pre data-caption=\"Install libraries\"><code style=\"white-space: pre-wrap;\">$ npm install --save konva react-konva mobx mobx-react \\",
            "d3-timer d3-scale d3-quadtree</code></pre>",
            "<p>This gives you Konva, MobX, and the parts of D3 that we need. You’re now ready to build the billiards game.</p>"
          ]
        },
        {
          "lectureTitle": "A quick MobX primer",
          "lectureLines": [
            "<h3 id=\"a-quick-mobx-primer\">A quick MobX primer</h3>",
            "<p>Explaining MobX in detail is beyond the scope of this book. You can learn it by osmosis as you follow the code in our billiards example.</p>",
            "<p>That said, here’s a quick rundown of the concepts we’re using.</p>",
            "<p>MobX is based on reactive programming. There are values that are observable and functions that react when those values change. MobX ensures only the minimal possible set of observers is triggered on every change.</p>",
            "<p>So, we have:</p>",
            "<p><code style=\"white-space: pre-wrap;\">@observable</code> – a property whose changes observers subscribe to <code style=\"white-space: pre-wrap;\">@observer</code> – a component whose <code style=\"white-space: pre-wrap;\">render()</code> method observes values <code style=\"white-space: pre-wrap;\">@computed</code> – a method whose value can be fully derived from observables <code style=\"white-space: pre-wrap;\">@action</code> – a method that changes state, analogous to a Redux reducer <code style=\"white-space: pre-wrap;\">@inject</code> – a decorator that injects global stores into a component’s props</p>",
            "<p>That’s all you need to know. Once your component is an <code style=\"white-space: pre-wrap;\">@observer</code>, you never have to worry about <em>what</em> it’s observing. MobX ensures it reacts to changes in values used during rendering.</p>",
            "<p>Making your component an observer and injecting the global store is the same as using <code style=\"white-space: pre-wrap;\">connect</code> in Redux. It gives your component access to your state, and it triggers a re-render when something changes.</p>",
            "<p>Importantly, it <em>doesn’t</em> trigger a re-render when something that the component isn’t using changes. That little tidbit is what makes many other reactive libraries difficult to use.</p>"
          ]
        },
        {
          "lectureTitle": "Part 1: Rendering our marbles",
          "lectureLines": [
            "<h3 id=\"part-1-rendering-our-marbles\">Part 1: Rendering our marbles</h3>",
            "<p>Our marbles render on Canvas using Konva. Each marble is its own sprite rendered as a Konva element. This makes it easier to implement user and marble interactions.</p>",
            "<p>Rendering happens in 3 components:</p>",
            "<ul>",
            "<li><code style=\"white-space: pre-wrap;\">App</code> holds everything together</li>",
            "<li><code style=\"white-space: pre-wrap;\">MarbleList</code> renders a list of marbles</li>",
            "<li><code style=\"white-space: pre-wrap;\">Marble</code> renders an individual marble</li>",
            "</ul>",
            "<p>We’re also using 2 MobX stores:</p>",
            "<ul>",
            "<li><code style=\"white-space: pre-wrap;\">Sprite</code> to load the marble sprite and define coordinates within</li>",
            "<li><code style=\"white-space: pre-wrap;\">Physics</code> as our physics engine</li>",
            "</ul>",
            "<p><code style=\"white-space: pre-wrap;\">Sprite</code> and <code style=\"white-space: pre-wrap;\">Physics</code> are hold almost all of our game logic. A bit of drag &amp; drop logic goes in the <code style=\"white-space: pre-wrap;\">Marble</code> component. Other than that, all our components are presentational. They get props and render stuff.</p>",
            "<p>Let’s start with <code style=\"white-space: pre-wrap;\">App</code> and work our way down.</p>",
            "<h4 id=\"app-1\">App</h4>",
            "<p>Our <code style=\"white-space: pre-wrap;\">App</code> component doesn’t do much. It imports MobX stores, triggers sprite loading, and starts the game loop.</p>",
            "<div class=\"sourceCode\" id=\"cb169\" data-caption=\"The App component\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb169-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/App.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb169-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb169-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"op\" style=\"color: #666666;\">{</span> Component <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;react&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb169-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">{</span> Provider <span class=\"im\">as</span> MobXProvider<span class=\"op\" style=\"color: #666666;\">,</span> observer <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;mobx-react&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb169-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb169-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> Physics <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;../logic/Physics&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb169-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> Sprite <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;../logic/Sprite&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb169-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> MarbleList <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./MarbleList&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb169-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb169-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">@observer</a>",
            "<a class=\"sourceLine\" id=\"cb169-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> App <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> Component <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb169-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">componentDidMount</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb169-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">Sprite</span>.<span class=\"at\" style=\"color: #7d9029;\">loadSprite</span>(() <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">Physics</span>.<span class=\"at\" style=\"color: #7d9029;\">startGameLoop</span>())<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb169-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb169-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb169-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb169-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb169-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>div className<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;App&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb169-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&lt;</span>div className<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;App-header&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb169-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"op\" style=\"color: #666666;\">&lt;</span>h2<span class=\"op\" style=\"color: #666666;\">&gt;</span>Elastic collisions&lt;/h2<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb169-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"op\" style=\"color: #666666;\">&lt;</span>p<span class=\"op\" style=\"color: #666666;\">&gt;</span>Rendered on canvas<span class=\"op\" style=\"color: #666666;\">,</span> built <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">with</span> React and Konva&lt;/p<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb169-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb169-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&lt;</span>div className<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;App-intro&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb169-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"op\" style=\"color: #666666;\">&lt;</span>MobXProvider physics<span class=\"op\" style=\"color: #666666;\">={</span>Physics<span class=\"op\" style=\"color: #666666;\">}</span> sprite<span class=\"op\" style=\"color: #666666;\">={</span>Sprite<span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb169-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        <span class=\"op\" style=\"color: #666666;\">&lt;</span>MarbleList /<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb169-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    &lt;/MobXProvider<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb169-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb169-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            &lt;/div<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb169-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb169-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb169-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb169-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb169-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> App<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>We import our dependencies: React itself, a <code style=\"white-space: pre-wrap;\">MobXProvider</code> that’s similar to the Redux provider (puts stuff in react context), both of our MobX stores which export singleton instances, and the main <code style=\"white-space: pre-wrap;\">MarbleList</code> component.</p>",
            "<p><code style=\"white-space: pre-wrap;\">App</code> itself is a full featured component that initiates sprite loading in <code style=\"white-space: pre-wrap;\">componentDidMount</code> and calls <code style=\"white-space: pre-wrap;\">startGameLoop</code> when the sprite is ready. We know the sprite is ready because it calls a callback. You’ll see how that works in a bit.</p>",
            "<p>The <code style=\"white-space: pre-wrap;\">render</code> method outputs some descriptive text and the <code style=\"white-space: pre-wrap;\">MarbleList</code> component wrapped in a <code style=\"white-space: pre-wrap;\">MobXProvider</code>. The provider puts instances of our stores – <code style=\"white-space: pre-wrap;\">sprite</code> and <code style=\"white-space: pre-wrap;\">physics</code> – in React context.</p>",
            "<p>This makes them available to all child components via the <code style=\"white-space: pre-wrap;\">inject</code> decorator.</p>",
            "<h4 id=\"marblelist\">MarbleList</h4>",
            "<p><code style=\"white-space: pre-wrap;\">MarbleList</code> is an important component that renders the whole game, yet it can still be small and functional. Every prop it needs comes from our two stores.</p>",
            "<p>Like this:</p>",
            "<div class=\"sourceCode\" id=\"cb170\" data-caption=\"MarbleList component\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb170-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/MarbleList.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb170-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb170-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;react&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb170-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">{</span> inject<span class=\"op\" style=\"color: #666666;\">,</span> observer <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;mobx-react&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb170-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">{</span> Stage<span class=\"op\" style=\"color: #666666;\">,</span> Layer<span class=\"op\" style=\"color: #666666;\">,</span> Group <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;react-konva&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb170-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb170-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> Marble <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./Marble&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb170-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb170-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> MarbleList <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">inject</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;physics&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;sprite&#39;</span>)(<span class=\"at\" style=\"color: #7d9029;\">observer</span>((<span class=\"op\" style=\"color: #666666;\">{</span> physics<span class=\"op\" style=\"color: #666666;\">,</span> sprite <span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb170-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> width<span class=\"op\" style=\"color: #666666;\">,</span> height<span class=\"op\" style=\"color: #666666;\">,</span> marbles <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> physics<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb170-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> marbleTypes <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> sprite<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb170-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb170-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb170-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>Stage width<span class=\"op\" style=\"color: #666666;\">={</span>width<span class=\"op\" style=\"color: #666666;\">}</span> height<span class=\"op\" style=\"color: #666666;\">={</span>height<span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb170-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>Layer<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb170-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">&lt;</span>Group<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb170-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"va\" style=\"color: #19177c;\">marbles</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>((<span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y<span class=\"op\" style=\"color: #666666;\">,</span> id <span class=\"op\" style=\"color: #666666;\">},</span> i) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb170-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        <span class=\"op\" style=\"color: #666666;\">&lt;</span>Marble x<span class=\"op\" style=\"color: #666666;\">={</span>x<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb170-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                                y<span class=\"op\" style=\"color: #666666;\">={</span>y<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb170-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                                type<span class=\"op\" style=\"color: #666666;\">={</span>marbleTypes[i<span class=\"op\" style=\"color: #666666;\">%</span><span class=\"va\" style=\"color: #19177c;\">marbleTypes</span>.<span class=\"at\" style=\"color: #7d9029;\">length</span>]<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb170-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                                draggable<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;true&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb170-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                                id<span class=\"op\" style=\"color: #666666;\">={</span>id<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb170-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                                key<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"vs\" style=\"color: #4070a0;\">`marble-</span><span class=\"sc\" style=\"color: #4070a0;\">${</span>id<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">`</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb170-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    ))<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb170-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                &lt;/Group<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb170-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            &lt;/Layer<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb170-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        &lt;/Stage<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb170-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb170-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span>))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb170-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb170-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> MarbleList<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>We import dependencies and create a <code style=\"white-space: pre-wrap;\">MarbleList</code> component. Instead of decorators, we’re using with functional composition.</p>",
            "<p>This shows you that MobX <em>can</em> work without decorators, but there’s no deep reason behind this choice. Over time, I’ve developed a preference for composition for functional components and decorators for class-based components.</p>",
            "<p><code style=\"white-space: pre-wrap;\">inject</code> takes values out of context and puts them in component props. <code style=\"white-space: pre-wrap;\">observer</code> declares that our component observes those props and reacts to them.</p>",
            "<p>It’s generally a good idea to use both <code style=\"white-space: pre-wrap;\">inject</code> and <code style=\"white-space: pre-wrap;\">observer</code> together. I have yet to find a case where you need just one or the other.</p>",
            "<p>The rendering itself takes values out of our stores and returns a Konva <code style=\"white-space: pre-wrap;\">Stage</code> with a single <code style=\"white-space: pre-wrap;\">Layer</code>, which contains a <code style=\"white-space: pre-wrap;\">Group</code>. Inside this group is our list of marbles.</p>",
            "<p>Each marble gets a position, a <code style=\"white-space: pre-wrap;\">type</code> that defines how it looks, an <code style=\"white-space: pre-wrap;\">id</code>, and a <code style=\"white-space: pre-wrap;\">key</code>. We set <code style=\"white-space: pre-wrap;\">draggable</code> to <code style=\"white-space: pre-wrap;\">true</code> so Konva knows that this element is draggable.</p>",
            "<p>Yes, that means we get draggability on an HTML5 Canvas without any extra effort. I like that.</p>",
            "<h4 id=\"marble\">Marble</h4>",
            "<p>Each <code style=\"white-space: pre-wrap;\">Marble</code> component renders a single marble and handles dragging and dropping. That’s how you “shoot” marbles.</p>",
            "<p>Dragging and dropping creates a vector that accelerates, or shoots, the marble in a certain direction with a certain speed. Putting this logic in the component itself makes sense because the rest of our game only cares about that final vector.</p>",
            "<p>The Marble component looks like this:</p>",
            "<div class=\"sourceCode\" id=\"cb171\" data-caption=\"Marble component\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb171-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Marble.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb171-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> React<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"op\" style=\"color: #666666;\">{</span> Component <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;react&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">{</span> Circle <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;react-konva&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">{</span> inject<span class=\"op\" style=\"color: #666666;\">,</span> observer <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;mobx-react&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb171-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">@<span class=\"at\" style=\"color: #7d9029;\">inject</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;physics&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;sprite&#39;</span>) @observer</a>",
            "<a class=\"sourceLine\" id=\"cb171-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Marble <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> Component <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    onDragStart <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// set drag starting position</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb171-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    onDragMove <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// update marble position</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb171-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    onDragEnd <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// shoot the marble</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb171-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> sprite<span class=\"op\" style=\"color: #666666;\">,</span> type<span class=\"op\" style=\"color: #666666;\">,</span> draggable<span class=\"op\" style=\"color: #666666;\">,</span> id<span class=\"op\" style=\"color: #666666;\">,</span> physics <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> MarbleDefinitions <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">sprite</span>.<span class=\"at\" style=\"color: #7d9029;\">marbleDefinitions</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y<span class=\"op\" style=\"color: #666666;\">,</span> r <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">physics</span>.<span class=\"at\" style=\"color: #7d9029;\">marbles</span>[id]<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb171-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb171-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>Circle x<span class=\"op\" style=\"color: #666666;\">={</span>x<span class=\"op\" style=\"color: #666666;\">}</span> y<span class=\"op\" style=\"color: #666666;\">={</span>y<span class=\"op\" style=\"color: #666666;\">}</span> radius<span class=\"op\" style=\"color: #666666;\">={</span>r<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    fillPatternImage<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"va\" style=\"color: #19177c;\">sprite</span>.<span class=\"at\" style=\"color: #7d9029;\">sprite</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    fillPatternOffset<span class=\"op\" style=\"color: #666666;\">={</span>MarbleDefinitions[type]<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    fillPatternScale<span class=\"op\" style=\"color: #666666;\">={{</span> <span class=\"dt\">x</span><span class=\"op\">:</span> r<span class=\"op\">*</span><span class=\"dv\">2</span>/<span class=\"dv\">111</span><span class=\"op\">,</span> <span class=\"dt\">y</span><span class=\"op\">:</span> r<span class=\"op\">*</span><span class=\"dv\">2</span>/<span class=\"dv\">111</span> <span class=\"op\">}}</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    shadowColor<span class=\"op\" style=\"color: #666666;\">={</span>MarbleDefinitions[type].<span class=\"at\" style=\"color: #7d9029;\">c</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    shadowBlur<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;15&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    shadowOpacity<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;1&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    draggable<span class=\"op\" style=\"color: #666666;\">={</span>draggable<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    onDragStart<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">onDragStart</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-36\" title=\"36\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    onDragEnd<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">onDragEnd</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-37\" title=\"37\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    onDragMove<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">onDragMove</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-38\" title=\"38\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    ref<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;circle&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-39\" title=\"39\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb171-40\" title=\"40\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-41\" title=\"41\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-42\" title=\"42\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb171-43\" title=\"43\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb171-44\" title=\"44\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> Marble<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>We <code style=\"white-space: pre-wrap;\">@inject</code> both stores into our component and make it an <code style=\"white-space: pre-wrap;\">@observer</code>. The <code style=\"white-space: pre-wrap;\">render</code> method takes values out of our stores and renders a Konva <code style=\"white-space: pre-wrap;\">Circle</code>. The circle uses a chunk of our sprite as its background, has a colorful shadow, and has a bunch of drag callbacks.</p>",
            "<p>Those callbacks make our game playable.</p>",
            "<p>In <code style=\"white-space: pre-wrap;\">onDragStart</code>, we store the starting position of the dragged marble. In <code style=\"white-space: pre-wrap;\">onDragMove</code>, we update the marble’s position in the store, which makes it possible for other marbles to bounce off of ours while it’s moving, and in <code style=\"white-space: pre-wrap;\">onDragEnd</code>, we shoot the marble.</p>",
            "<p>Shoot direction depends on how we dragged. That’s why we need the starting positions.</p>",
            "<p>Drag callbacks double as MobX actions. Makes our code simpler. Instead of specifying an extra <code style=\"white-space: pre-wrap;\">@action</code> in the MobX store, we manipulate the values directly.</p>",
            "<p>MobX makes this okay. It keeps everything in sync and our state easy to understand. MobX even batches value changes before triggering re-renders.</p>",
            "<p>The code inside those callbacks is pretty mathsy.</p>",
            "<div class=\"sourceCode\" id=\"cb172\" data-caption=\"Dragging callbacks\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb172-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/components/Marble.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb172-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Marble <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> Component <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    onDragStart <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> physics<span class=\"op\" style=\"color: #666666;\">,</span> id <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb172-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">setState</span>(<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">origX</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">physics</span>.<span class=\"at\" style=\"color: #7d9029;\">marbles</span>[id].<span class=\"at\" style=\"color: #7d9029;\">x</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">origY</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">physics</span>.<span class=\"at\" style=\"color: #7d9029;\">marbles</span>[id].<span class=\"at\" style=\"color: #7d9029;\">y</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">startTime</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">new</span> <span class=\"at\" style=\"color: #7d9029;\">Date</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb172-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb172-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    onDragMove <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> physics<span class=\"op\" style=\"color: #666666;\">,</span> id <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">refs</span>.<span class=\"va\" style=\"color: #19177c;\">circle</span>.<span class=\"at\" style=\"color: #7d9029;\">attrs</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb172-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">physics</span>.<span class=\"at\" style=\"color: #7d9029;\">marbles</span>[id].<span class=\"at\" style=\"color: #7d9029;\">x</span> <span class=\"op\" style=\"color: #666666;\">=</span> x<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">physics</span>.<span class=\"at\" style=\"color: #7d9029;\">marbles</span>[id].<span class=\"at\" style=\"color: #7d9029;\">y</span> <span class=\"op\" style=\"color: #666666;\">=</span> y<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb172-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    onDragEnd <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> physics <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">              circle <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">refs</span>.<span class=\"at\" style=\"color: #7d9029;\">circle</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">              <span class=\"op\" style=\"color: #666666;\">{</span> origX<span class=\"op\" style=\"color: #666666;\">,</span> origY <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">              <span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">circle</span>.<span class=\"at\" style=\"color: #7d9029;\">attrs</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb172-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb172-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> delta_t <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">new</span> <span class=\"at\" style=\"color: #7d9029;\">Date</span>() <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">startTime</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">              dist <span class=\"op\" style=\"color: #666666;\">=</span> (x <span class=\"op\" style=\"color: #666666;\">-</span> origX) <span class=\"op\" style=\"color: #666666;\">**</span> <span class=\"dv\" style=\"color: #40a070;\">2</span> <span class=\"op\" style=\"color: #666666;\">+</span> (y <span class=\"op\" style=\"color: #666666;\">-</span> origY) <span class=\"op\" style=\"color: #666666;\">**</span> <span class=\"dv\" style=\"color: #40a070;\">2</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">              v <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">Math</span>.<span class=\"at\" style=\"color: #7d9029;\">sqrt</span>(dist)/(delta_t/<span class=\"dv\" style=\"color: #40a070;\">16</span>)<span class=\"op\" style=\"color: #666666;\">;</span> <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// distance per frame (= 16ms)</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb172-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">physics</span>.<span class=\"at\" style=\"color: #7d9029;\">shoot</span>(<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">           <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> x<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">           <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> y<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-36\" title=\"36\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">           <span class=\"dt\" style=\"color: #902000;\">vx</span><span class=\"op\" style=\"color: #666666;\">:</span> (x <span class=\"op\" style=\"color: #666666;\">-</span> origX)/(v/<span class=\"dv\" style=\"color: #40a070;\">3</span>)<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// /3 is a speedup factor</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-37\" title=\"37\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">           <span class=\"dt\" style=\"color: #902000;\">vy</span><span class=\"op\" style=\"color: #666666;\">:</span> (y <span class=\"op\" style=\"color: #666666;\">-</span> origY)/(v/<span class=\"dv\" style=\"color: #40a070;\">3</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb172-38\" title=\"38\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">           <span class=\"op\" style=\"color: #666666;\">},</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">id</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-39\" title=\"39\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-40\" title=\"40\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb172-41\" title=\"41\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb172-42\" title=\"42\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>In <code style=\"white-space: pre-wrap;\">onDragStart</code>, we store original coordinates and start time in local state. These are temporary values that nothing outside this user action cares about. Local state makes sense.</p>",
            "<p>We’ll use them to determine how far the user dragged our marble.</p>",
            "<p>In <code style=\"white-space: pre-wrap;\">onDragMove</code> we update the MobX store with new coordinates for this particular marble. You might think we’re messing with mutable state here, and we <em>might</em> be, but these are MobX observables. They’re wrapped in setters that ensure everything is kept in sync, changes logged, observers notified, etc.</p>",
            "<p><code style=\"white-space: pre-wrap;\">onDragEnd</code> shoots the marble. We calculate drag speed and direction, then we call the <code style=\"white-space: pre-wrap;\">shoot()</code> action on the <code style=\"white-space: pre-wrap;\">physics</code> store.</p>",
            "<p>The math we’re doing is called <a href=\"https://en.wikipedia.org/wiki/Euclidean_distance\">euclidean distance</a> by the way. Distance between two points is the root of the sum of squares of distance on each axis.</p>",
            "<h4 id=\"sprite-store\">Sprite store</h4>",
            "<p>Now that we know how rendering works, we need to load our sprite. It’s an icon set I bought online. Can’t remember where or who from.</p>",
            "<p>Here’s what it looks like:</p>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/monster-marbles-sprite-sheets.jpg\" alt=\"Marbles sprite\"><figcaption>Marbles sprite</figcaption>",
            "</figure>",
            "<p>To use this sprite, we need two things:</p>",
            "<ol type=\"1\">",
            "<li>A way to tell where on the image each marble lies</li>",
            "<li>A MobX store that loads the image into memory</li>",
            "</ol>",
            "<p>The first is a <code style=\"white-space: pre-wrap;\">MarbleDefinitions</code> dictionary. We used it in <code style=\"white-space: pre-wrap;\">Marble</code> component’s render method. If you’re playing along, you should copy paste this. Too much typing 😃</p>",
            "<div class=\"sourceCode\" id=\"cb173\" data-caption=\"MarbleDefinitions dictionary\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb173-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/logic/Sprite.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb173-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb173-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> MarbleDefinitions <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb173-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">dino</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">-222</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">-177</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">c</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;#8664d5&#39;</span> <span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb173-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">redHeart</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">-222</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">-299</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">c</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;#e47178&#39;</span> <span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb173-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">sun</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">-222</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">-420</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">c</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;#5c96ac&#39;</span> <span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb173-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb173-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">yellowHeart</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">-400</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">-177</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">c</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;#c8b405&#39;</span> <span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb173-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">mouse</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">-400</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">-299</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">c</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;#7d7e82&#39;</span> <span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb173-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">pumpkin</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">-400</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">-420</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">c</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;#fa9801&#39;</span> <span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb173-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb173-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">frog</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">-576</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">-177</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">c</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;#98b42b&#39;</span> <span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb173-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">moon</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">-575</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">-299</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">c</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;#b20717&#39;</span> <span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb173-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">bear</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">-576</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">-421</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">c</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;#a88534&#39;</span> <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb173-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb173-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb173-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"op\" style=\"color: #666666;\">{</span> MarbleDefinitions <span class=\"op\" style=\"color: #666666;\">};</span></a></code></pre></div>",
            "<p>Each type of marble has a name, a coordinate, and a color. The coordinate tells us where on the sprite image it is, and the color helps us create a nice shadow.</p>",
            "<p>All values painstakingly assembled by hand. You’re welcome. 😌</p>",
            "<p>The MobX store that loads our sprite into memory and helps us use it looks like this:</p>",
            "<div class=\"sourceCode\" id=\"cb174\" data-caption=\"Sprite store\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb174-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/logic/Sprite.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb174-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb174-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">{</span> observable<span class=\"op\" style=\"color: #666666;\">,</span> action<span class=\"op\" style=\"color: #666666;\">,</span> computed <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;mobx&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb174-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> MarbleSprite <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;../monster-marbles-sprite-sheets.jpg&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb174-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb174-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Sprite <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb174-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    @observable sprite <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">null</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb174-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb174-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    @action <span class=\"at\" style=\"color: #7d9029;\">loadSprite</span>(callback <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">null</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb174-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> sprite <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">new</span> <span class=\"at\" style=\"color: #7d9029;\">Image</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb174-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">sprite</span>.<span class=\"at\" style=\"color: #7d9029;\">src</span> <span class=\"op\" style=\"color: #666666;\">=</span> MarbleSprite<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb174-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb174-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">sprite</span>.<span class=\"at\" style=\"color: #7d9029;\">onload</span> <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb174-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">sprite</span> <span class=\"op\" style=\"color: #666666;\">=</span> sprite<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb174-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb174-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"at\" style=\"color: #7d9029;\">callback</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb174-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb174-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb174-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb174-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    @computed get <span class=\"at\" style=\"color: #7d9029;\">marbleTypes</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb174-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"va\" style=\"color: #19177c;\">Object</span>.<span class=\"at\" style=\"color: #7d9029;\">keys</span>(MarbleDefinitions)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb174-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb174-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb174-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    @computed get <span class=\"at\" style=\"color: #7d9029;\">marbleDefinitions</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb174-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> MarbleDefinitions<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb174-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb174-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb174-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb174-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">new</span> <span class=\"at\" style=\"color: #7d9029;\">Sprite</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>A MobX store is a JavaScript object. It has <code style=\"white-space: pre-wrap;\">@observable</code> values, <code style=\"white-space: pre-wrap;\">@actions</code>, and <code style=\"white-space: pre-wrap;\">@computed</code> getters. That’s all there is to it.</p>",
            "<p>No complicated reducers and action generators. Just JavaScript functions and properties. There’s plenty going on behind the scenes, but we don’t have to think about it.</p>",
            "<p>That’s why I like MobX more than Redux. Feels easier to use 🤫</p>",
            "<p>In the <code style=\"white-space: pre-wrap;\">Sprite</code> store, we have an <code style=\"white-space: pre-wrap;\">@observable sprite</code>. Changing this value triggers a re-render in al <code style=\"white-space: pre-wrap;\">@observer</code> components that rely on it. In our case that’s every marble.</p>",
            "<p>Then we have a <code style=\"white-space: pre-wrap;\">loadSprite</code> action. It creates a new <code style=\"white-space: pre-wrap;\">Image</code> object and loads the sprite. After the image loads, we set <code style=\"white-space: pre-wrap;\">this.sprite</code>.</p>",
            "<p>The <code style=\"white-space: pre-wrap;\">@computed</code> getters make it easier to access <code style=\"white-space: pre-wrap;\">MarbleDefinitions</code>. <code style=\"white-space: pre-wrap;\">marbleTypes</code> gives us a list of available types of marbles and <code style=\"white-space: pre-wrap;\">marbleDefinitions</code> returns the definitions object.</p>",
            "<p>Running your code won’t work just yet. We need the physics store first because it defines marble positions.</p>"
          ]
        },
        {
          "lectureTitle": "Part 2: Building the physics",
          "lectureLines": [
            "<h3 id=\"part-2-building-the-physics\">Part 2: Building the physics</h3>",
            "<p>Our whole physics engine fits into a single MobX store. It contains the collision detection, marble movement calculations, and drives the game loop itself.</p>",
            "<p>The general approach goes like this:</p>",
            "<ol type=\"1\">",
            "<li>Have an observable array of marbles</li>",
            "<li>Run a <code style=\"white-space: pre-wrap;\">simulationStep</code> on each <code style=\"white-space: pre-wrap;\">requestAnimationFrame</code> using <code style=\"white-space: pre-wrap;\">d3.timer</code></li>",
            "<li>Change marble positions and speed</li>",
            "<li>MobX observables and observers trigger re-renders of marbles that move</li>",
            "</ol>",
            "<p>The <a href=\"https://github.com/Swizec/declarative-canvas-react-konva/blob/master/src/logic/Physics.js\">whole Physics store</a> is some 120 lines of code. We’ll go slow. Here’s the skeleton:</p>",
            "<div class=\"sourceCode\" id=\"cb175\" data-caption=\"Physics skeleton\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb175-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/logic/Physics.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb175-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb175-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Physics <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb175-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    @observable MarbleR <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"dv\" style=\"color: #40a070;\">25</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb175-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    @observable width <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"dv\" style=\"color: #40a070;\">800</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb175-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    @observable height <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"dv\" style=\"color: #40a070;\">600</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb175-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    @observable marbles <span class=\"op\" style=\"color: #666666;\">=</span> []<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb175-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    timer <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">null</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb175-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb175-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    @computed get <span class=\"at\" style=\"color: #7d9029;\">initialPositions</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb175-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb175-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb175-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb175-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    @action <span class=\"at\" style=\"color: #7d9029;\">startGameLoop</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb175-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb175-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb175-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb175-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    @action <span class=\"at\" style=\"color: #7d9029;\">simulationStep</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb175-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb175-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb175-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb175-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    @action <span class=\"at\" style=\"color: #7d9029;\">shoot</span>(<span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y<span class=\"op\" style=\"color: #666666;\">,</span> vx<span class=\"op\" style=\"color: #666666;\">,</span> vy <span class=\"op\" style=\"color: #666666;\">},</span> i) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb175-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb175-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb175-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>We have four observable properties, a <code style=\"white-space: pre-wrap;\">timer</code>, a <code style=\"white-space: pre-wrap;\">@computed</code> property for initial positions, and 3 actions. <code style=\"white-space: pre-wrap;\">startGameLoop</code> starts our game, <code style=\"white-space: pre-wrap;\">simulationStep</code> holds the main logic, and <code style=\"white-space: pre-wrap;\">shoot</code> shoots a particular marble.</p>",
            "<p>Let’s walk through.</p>",
            "<h4 id=\"initialpositions\">initialPositions</h4>",
            "<div class=\"sourceCode\" id=\"cb176\" data-caption=\"initialPositions function\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb176-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/logic/Physics.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Physics <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ..</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    @computed get <span class=\"at\" style=\"color: #7d9029;\">initialPositions</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> width<span class=\"op\" style=\"color: #666666;\">,</span> height<span class=\"op\" style=\"color: #666666;\">,</span> MarbleR <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">              center <span class=\"op\" style=\"color: #666666;\">=</span> width/<span class=\"dv\" style=\"color: #40a070;\">2</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb176-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> lines <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"dv\" style=\"color: #40a070;\">4</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">              maxY <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"dv\" style=\"color: #40a070;\">200</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb176-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> marbles <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">range</span>(lines<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">-1</span>).<span class=\"at\" style=\"color: #7d9029;\">map</span>(y <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (y <span class=\"op\" style=\"color: #666666;\">===</span> lines) <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> [<span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> center<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> maxY<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                                       <span class=\"dt\" style=\"color: #902000;\">vx</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">vy</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dt\" style=\"color: #902000;\">r</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">MarbleR</span><span class=\"op\" style=\"color: #666666;\">}</span>]<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb176-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> left <span class=\"op\" style=\"color: #666666;\">=</span> center <span class=\"op\" style=\"color: #666666;\">-</span> y<span class=\"op\" style=\"color: #666666;\">*</span>(MarbleR<span class=\"op\" style=\"color: #666666;\">+</span><span class=\"dv\" style=\"color: #40a070;\">5</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                  right <span class=\"op\" style=\"color: #666666;\">=</span> center <span class=\"op\" style=\"color: #666666;\">+</span> y<span class=\"op\" style=\"color: #666666;\">*</span>(MarbleR<span class=\"op\" style=\"color: #666666;\">+</span><span class=\"dv\" style=\"color: #40a070;\">5</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb176-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"at\" style=\"color: #7d9029;\">range</span>(left<span class=\"op\" style=\"color: #666666;\">,</span> right<span class=\"op\" style=\"color: #666666;\">,</span> MarbleR<span class=\"op\" style=\"color: #666666;\">*</span><span class=\"dv\" style=\"color: #40a070;\">2</span><span class=\"op\" style=\"color: #666666;\">+</span><span class=\"dv\" style=\"color: #40a070;\">5</span>).<span class=\"at\" style=\"color: #7d9029;\">map</span>(x <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> (<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> x<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> maxY<span class=\"op\" style=\"color: #666666;\">-</span>y<span class=\"op\" style=\"color: #666666;\">*</span>(MarbleR<span class=\"op\" style=\"color: #666666;\">*</span><span class=\"dv\" style=\"color: #40a070;\">2</span><span class=\"op\" style=\"color: #666666;\">+</span><span class=\"dv\" style=\"color: #40a070;\">5</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">vx</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">vy</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">r</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">MarbleR</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">}</span>))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span>).<span class=\"at\" style=\"color: #7d9029;\">reduce</span>((acc<span class=\"op\" style=\"color: #666666;\">,</span> pos) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">acc</span>.<span class=\"at\" style=\"color: #7d9029;\">concat</span>(pos)<span class=\"op\" style=\"color: #666666;\">,</span> [])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb176-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        marbles <span class=\"op\" style=\"color: #666666;\">=</span> [].<span class=\"at\" style=\"color: #7d9029;\">concat</span>(marbles<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> width/<span class=\"dv\" style=\"color: #40a070;\">2</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> height<span class=\"dv\" style=\"color: #40a070;\">-150</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">vx</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">vy</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">r</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">MarbleR</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb176-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">marbles</span>.<span class=\"at\" style=\"color: #7d9029;\">forEach</span>((m<span class=\"op\" style=\"color: #666666;\">,</span> i) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> marbles[i].<span class=\"at\" style=\"color: #7d9029;\">id</span> <span class=\"op\" style=\"color: #666666;\">=</span> i)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-36\" title=\"36\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb176-37\" title=\"37\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> marbles<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-38\" title=\"38\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-39\" title=\"39\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ..</span></a>",
            "<a class=\"sourceLine\" id=\"cb176-40\" title=\"40\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>Believe it or not, this is like one of those <em>“Arrange things in a triangle”</em> puzzles you’d see in an old Learn How To Program book. Or a whiteboard interview.</p>",
            "<p>It took me 3 hours to build. Easy to get wrong, fiddly to implement.</p>",
            "<p>We start with a <code style=\"white-space: pre-wrap;\">range</code> of numbers. From <code style=\"white-space: pre-wrap;\">lines</code> to <code style=\"white-space: pre-wrap;\">0</code> in descending order. We iterate through this list of rows and change each into a list of marbles.</p>",
            "<p>4 marbles in the first row, 3 in the next, all the way down to 1 in last row.</p>",
            "<p>For each row, we calculate how much space we have on the <code style=\"white-space: pre-wrap;\">left</code> and <code style=\"white-space: pre-wrap;\">right</code> of the center and make a <code style=\"white-space: pre-wrap;\">range</code> of horizontal positions from <code style=\"white-space: pre-wrap;\">left</code> to <code style=\"white-space: pre-wrap;\">right</code> with a step of “1 marble size”. Using these positions and the known row, we create marbles as needed.</p>",
            "<p>We use a <code style=\"white-space: pre-wrap;\">.reduce</code> to flatten nested arrays and add the last marble. That’s a corner case I couldn’t solve elegantly, but I’m sure it’s possible.</p>",
            "<p>In the end, we add an <code style=\"white-space: pre-wrap;\">id</code> to each marble. We’re using index as the id, that’s true, but that still ensures we use consistent values throughout our app. Positions in the array may change.</p>",
            "<h4 id=\"shoot-and-startgameloop\">shoot and startGameLoop</h4>",
            "<div class=\"sourceCode\" id=\"cb177\" data-caption=\"shoot and startGameLoop functions\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb177-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/logic/Physics.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb177-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Physics <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb177-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb177-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb177-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    @action <span class=\"at\" style=\"color: #7d9029;\">startGameLoop</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb177-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">marbles</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">initialPositions</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb177-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb177-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">timer</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">timer</span>(() <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">simulationStep</span>())<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb177-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb177-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb177-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb177-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb177-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    @action <span class=\"at\" style=\"color: #7d9029;\">shoot</span>(<span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y<span class=\"op\" style=\"color: #666666;\">,</span> vx<span class=\"op\" style=\"color: #666666;\">,</span> vy <span class=\"op\" style=\"color: #666666;\">},</span> i) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb177-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> maxSpeed <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"dv\" style=\"color: #40a070;\">20</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb177-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb177-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">marbles</span>[i].<span class=\"at\" style=\"color: #7d9029;\">x</span> <span class=\"op\" style=\"color: #666666;\">=</span> x<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb177-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">marbles</span>[i].<span class=\"at\" style=\"color: #7d9029;\">y</span> <span class=\"op\" style=\"color: #666666;\">=</span> y<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb177-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">marbles</span>[i].<span class=\"at\" style=\"color: #7d9029;\">vx</span> <span class=\"op\" style=\"color: #666666;\">=</span> vx <span class=\"op\" style=\"color: #666666;\">&lt;</span> maxSpeed <span class=\"op\" style=\"color: #666666;\">?</span> vx : maxSpeed<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb177-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">marbles</span>[i].<span class=\"at\" style=\"color: #7d9029;\">vy</span> <span class=\"op\" style=\"color: #666666;\">=</span> vy <span class=\"op\" style=\"color: #666666;\">&lt;</span> maxSpeed <span class=\"op\" style=\"color: #666666;\">?</span> vy : maxSpeed<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb177-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb177-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p><code style=\"white-space: pre-wrap;\">shoot</code> and <code style=\"white-space: pre-wrap;\">startGameLoop</code> are the simplest functions in our physics engine. <code style=\"white-space: pre-wrap;\">startGameLoop</code> gets the initial <code style=\"white-space: pre-wrap;\">marbles</code> array and starts a D3 timer. <code style=\"white-space: pre-wrap;\">shoot</code> updates a specific marble’s coordinates and speed vector.</p>",
            "<p>👌</p>"
          ]
        },
        {
          "lectureTitle": "Collision detection",
          "lectureLines": [
            "<h4 id=\"simulationstep-where-collisions-collision\">simulationStep – where collisions collision</h4>",
            "<p>Here comes the fun part. The one with our game loop.</p>",
            "<p>There’s also a video explaining how this works 👉 <a href=\"https://www.youtube.com/watch?v=H84fmXjTElM\">Watch it on YouTube</a>. With hand-drawn sketches that explain the math, and I think that’s neat.</p>",
            "<div class=\"sourceCode\" id=\"cb178\" data-caption=\"Full simulationStep function\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb178-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb178-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">@action <span class=\"at\" style=\"color: #7d9029;\">simulationStep</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> width<span class=\"op\" style=\"color: #666666;\">,</span> height<span class=\"op\" style=\"color: #666666;\">,</span> MarbleR <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb178-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> moveMarble <span class=\"op\" style=\"color: #666666;\">=</span> (<span class=\"op\" style=\"color: #666666;\">{</span>x<span class=\"op\" style=\"color: #666666;\">,</span> y<span class=\"op\" style=\"color: #666666;\">,</span> vx<span class=\"op\" style=\"color: #666666;\">,</span> vy<span class=\"op\" style=\"color: #666666;\">,</span> id<span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> _vx <span class=\"op\" style=\"color: #666666;\">=</span> ((x<span class=\"op\" style=\"color: #666666;\">+</span>vx <span class=\"op\" style=\"color: #666666;\">&lt;</span> MarbleR) <span class=\"op\" style=\"color: #666666;\">?</span> <span class=\"op\" style=\"color: #666666;\">-</span>vx : (x<span class=\"op\" style=\"color: #666666;\">+</span>vx <span class=\"op\" style=\"color: #666666;\">&gt;</span> width<span class=\"op\" style=\"color: #666666;\">-</span>MarbleR) <span class=\"op\" style=\"color: #666666;\">?</span> <span class=\"op\" style=\"color: #666666;\">-</span>vx : vx)<span class=\"op\" style=\"color: #666666;\">*</span>.<span class=\"dv\" style=\"color: #40a070;\">99</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            _vy <span class=\"op\" style=\"color: #666666;\">=</span> ((y<span class=\"op\" style=\"color: #666666;\">+</span>vy <span class=\"op\" style=\"color: #666666;\">&lt;</span> MarbleR) <span class=\"op\" style=\"color: #666666;\">?</span> <span class=\"op\" style=\"color: #666666;\">-</span>vy : (y<span class=\"op\" style=\"color: #666666;\">+</span>vy <span class=\"op\" style=\"color: #666666;\">&gt;</span> height<span class=\"op\" style=\"color: #666666;\">-</span>MarbleR) <span class=\"op\" style=\"color: #666666;\">?</span> <span class=\"op\" style=\"color: #666666;\">-</span>vy : vy)<span class=\"op\" style=\"color: #666666;\">*</span>.<span class=\"dv\" style=\"color: #40a070;\">99</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb178-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// nearest marble is a collision candidate</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> subdividedSpace <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">quadtree</span>().<span class=\"at\" style=\"color: #7d9029;\">extent</span>([[<span class=\"op\" style=\"color: #666666;\">-</span><span class=\"dv\" style=\"color: #40a070;\">1</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">-1</span>]<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                                                   [<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">width</span><span class=\"op\" style=\"color: #666666;\">+</span><span class=\"dv\" style=\"color: #40a070;\">1</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">height</span><span class=\"op\" style=\"color: #666666;\">+</span><span class=\"dv\" style=\"color: #40a070;\">1</span>]])</a>",
            "<a class=\"sourceLine\" id=\"cb178-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                                          .<span class=\"at\" style=\"color: #7d9029;\">x</span>(d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"op\" style=\"color: #666666;\">:</span><span class=\"dt\" style=\"color: #902000;\">satisfied</span><span class=\"op\" style=\"color: #666666;\">:</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                                          .<span class=\"at\" style=\"color: #7d9029;\">y</span>(d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">y</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb178-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                                          .<span class=\"at\" style=\"color: #7d9029;\">addAll</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">marbles</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                                                      .<span class=\"at\" style=\"color: #7d9029;\">filter</span>(m <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> id <span class=\"op\" style=\"color: #666666;\">!==</span> <span class=\"va\" style=\"color: #19177c;\">m</span>.<span class=\"at\" style=\"color: #7d9029;\">id</span>))<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">              candidate <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">subdividedSpace</span>.<span class=\"at\" style=\"color: #7d9029;\">find</span>(x<span class=\"op\" style=\"color: #666666;\">,</span> y<span class=\"op\" style=\"color: #666666;\">,</span> MarbleR<span class=\"op\" style=\"color: #666666;\">*</span><span class=\"dv\" style=\"color: #40a070;\">2</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb178-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (candidate) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb178-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// borrowing @air_hadoken&#39;s implementation from here:</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// github.com/airhadoken/game_of_circles/</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">//   blob/master/circles.js#L64</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> cx <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">candidate</span>.<span class=\"at\" style=\"color: #7d9029;\">x</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                  cy <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">candidate</span>.<span class=\"at\" style=\"color: #7d9029;\">y</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                  normx <span class=\"op\" style=\"color: #666666;\">=</span> cx <span class=\"op\" style=\"color: #666666;\">-</span> x<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                  normy <span class=\"op\" style=\"color: #666666;\">=</span> cy <span class=\"op\" style=\"color: #666666;\">-</span> y<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                  dist <span class=\"op\" style=\"color: #666666;\">=</span> (normx <span class=\"op\" style=\"color: #666666;\">**</span> <span class=\"dv\" style=\"color: #40a070;\">2</span> <span class=\"op\" style=\"color: #666666;\">+</span> normy <span class=\"op\" style=\"color: #666666;\">**</span> <span class=\"dv\" style=\"color: #40a070;\">2</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                  c <span class=\"op\" style=\"color: #666666;\">=</span> (_vx <span class=\"op\" style=\"color: #666666;\">*</span> normx <span class=\"op\" style=\"color: #666666;\">+</span> _vy <span class=\"op\" style=\"color: #666666;\">*</span> normy) / dist <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"fl\" style=\"color: #40a070;\">2.3</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb178-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            _vx <span class=\"op\" style=\"color: #666666;\">=</span> (_vx <span class=\"op\" style=\"color: #666666;\">-</span> c <span class=\"op\" style=\"color: #666666;\">*</span> normx)/<span class=\"fl\" style=\"color: #40a070;\">2.3</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            _vy <span class=\"op\" style=\"color: #666666;\">=</span> (_vy <span class=\"op\" style=\"color: #666666;\">-</span> c <span class=\"op\" style=\"color: #666666;\">*</span> normy)/<span class=\"fl\" style=\"color: #40a070;\">2.3</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb178-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"va\" style=\"color: #19177c;\">candidate</span>.<span class=\"at\" style=\"color: #7d9029;\">vx</span> <span class=\"op\" style=\"color: #666666;\">+=</span> <span class=\"op\" style=\"color: #666666;\">-</span>_vx<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"va\" style=\"color: #19177c;\">candidate</span>.<span class=\"at\" style=\"color: #7d9029;\">vy</span> <span class=\"op\" style=\"color: #666666;\">+=</span> <span class=\"op\" style=\"color: #666666;\">-</span>_vy<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"va\" style=\"color: #19177c;\">candidate</span>.<span class=\"at\" style=\"color: #7d9029;\">x</span> <span class=\"op\" style=\"color: #666666;\">+=</span> <span class=\"op\" style=\"color: #666666;\">-</span>_vx<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-36\" title=\"36\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"va\" style=\"color: #19177c;\">candidate</span>.<span class=\"at\" style=\"color: #7d9029;\">y</span> <span class=\"op\" style=\"color: #666666;\">+=</span> <span class=\"op\" style=\"color: #666666;\">-</span>_vy<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-37\" title=\"37\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-38\" title=\"38\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb178-39\" title=\"39\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-40\" title=\"40\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> x <span class=\"op\" style=\"color: #666666;\">+</span> _vx<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-41\" title=\"41\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> y <span class=\"op\" style=\"color: #666666;\">+</span> _vy<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-42\" title=\"42\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">vx</span><span class=\"op\" style=\"color: #666666;\">:</span> _vx<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-43\" title=\"43\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"dt\" style=\"color: #902000;\">vy</span><span class=\"op\" style=\"color: #666666;\">:</span> _vy</a>",
            "<a class=\"sourceLine\" id=\"cb178-44\" title=\"44\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-45\" title=\"45\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-46\" title=\"46\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb178-47\" title=\"47\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">marbles</span>.<span class=\"at\" style=\"color: #7d9029;\">forEach</span>((marble<span class=\"op\" style=\"color: #666666;\">,</span> i) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-48\" title=\"48\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y<span class=\"op\" style=\"color: #666666;\">,</span> vx<span class=\"op\" style=\"color: #666666;\">,</span> vy <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">moveMarble</span>(marble)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-49\" title=\"49\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb178-50\" title=\"50\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">marbles</span>[i].<span class=\"at\" style=\"color: #7d9029;\">x</span> <span class=\"op\" style=\"color: #666666;\">=</span> x<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-51\" title=\"51\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">marbles</span>[i].<span class=\"at\" style=\"color: #7d9029;\">y</span> <span class=\"op\" style=\"color: #666666;\">=</span> y<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-52\" title=\"52\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">marbles</span>[i].<span class=\"at\" style=\"color: #7d9029;\">vx</span> <span class=\"op\" style=\"color: #666666;\">=</span> vx<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-53\" title=\"53\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">marbles</span>[i].<span class=\"at\" style=\"color: #7d9029;\">vy</span> <span class=\"op\" style=\"color: #666666;\">=</span> vy<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-54\" title=\"54\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb178-55\" title=\"55\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>That’s a lot of code 😅. Let’s break it down.</p>",
            "<p>You can think of <code style=\"white-space: pre-wrap;\">simulationStep</code> as a function and a loop. At the bottom, there is a <code style=\"white-space: pre-wrap;\">.forEach</code> that applies a <code style=\"white-space: pre-wrap;\">moveMarble</code> function to each marble.</p>",
            "<div class=\"sourceCode\" id=\"cb179\" data-caption=\"Loop through marbles\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb179-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">marbles</span>.<span class=\"at\" style=\"color: #7d9029;\">forEach</span>((marble<span class=\"op\" style=\"color: #666666;\">,</span> i) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb179-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y<span class=\"op\" style=\"color: #666666;\">,</span> vx<span class=\"op\" style=\"color: #666666;\">,</span> vy <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">moveMarble</span>(marble)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb179-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb179-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">marbles</span>[i].<span class=\"at\" style=\"color: #7d9029;\">x</span> <span class=\"op\" style=\"color: #666666;\">=</span> x<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb179-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">marbles</span>[i].<span class=\"at\" style=\"color: #7d9029;\">y</span> <span class=\"op\" style=\"color: #666666;\">=</span> y<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb179-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">marbles</span>[i].<span class=\"at\" style=\"color: #7d9029;\">vx</span> <span class=\"op\" style=\"color: #666666;\">=</span> vx<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb179-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">marbles</span>[i].<span class=\"at\" style=\"color: #7d9029;\">vy</span> <span class=\"op\" style=\"color: #666666;\">=</span> vy<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb179-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>We iterate over the list of marbles, feed them into <code style=\"white-space: pre-wrap;\">moveMarble</code>, get new properties, and save them in the main marbles array. MobX <em>should</em> allows us to change these values inside <code style=\"white-space: pre-wrap;\">moveMarble</code> and let MobX observables do the heavy lifting, but more explicit code is easier to read.</p>",
            "<h5 id=\"movemarble\">moveMarble</h5>",
            "<p><code style=\"white-space: pre-wrap;\">moveMarble</code> is itself a hairy function. Stuff happens in 3 steps:</p>",
            "<ol type=\"1\">",
            "<li>Handle collisions with walls</li>",
            "<li>Find collision with closest other marble</li>",
            "<li>Handle collision with marble</li>",
            "</ol>",
            "<p><strong>Handling collisions with walls</strong> happens in two lines of code. One per axis.</p>",
            "<div class=\"sourceCode\" id=\"cb180\" data-caption=\"Detecting wall collisions\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb180-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> _vx <span class=\"op\" style=\"color: #666666;\">=</span> ((x<span class=\"op\" style=\"color: #666666;\">+</span>vx <span class=\"op\" style=\"color: #666666;\">&lt;</span> MarbleR) <span class=\"op\" style=\"color: #666666;\">?</span> <span class=\"op\" style=\"color: #666666;\">-</span>vx : (x<span class=\"op\" style=\"color: #666666;\">+</span>vx <span class=\"op\" style=\"color: #666666;\">&gt;</span> width<span class=\"op\" style=\"color: #666666;\">-</span>MarbleR) <span class=\"op\" style=\"color: #666666;\">?</span> <span class=\"op\" style=\"color: #666666;\">-</span>vx : vx)<span class=\"op\" style=\"color: #666666;\">*</span>.<span class=\"dv\" style=\"color: #40a070;\">99</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb180-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    _vy <span class=\"op\" style=\"color: #666666;\">=</span> ((y<span class=\"op\" style=\"color: #666666;\">+</span>vy <span class=\"op\" style=\"color: #666666;\">&lt;</span> MarbleR) <span class=\"op\" style=\"color: #666666;\">?</span> <span class=\"op\" style=\"color: #666666;\">-</span>vy : (y<span class=\"op\" style=\"color: #666666;\">+</span>vy <span class=\"op\" style=\"color: #666666;\">&gt;</span> height<span class=\"op\" style=\"color: #666666;\">-</span>MarbleR) <span class=\"op\" style=\"color: #666666;\">?</span> <span class=\"op\" style=\"color: #666666;\">-</span>vy : vy)<span class=\"op\" style=\"color: #666666;\">*</span>.<span class=\"dv\" style=\"color: #40a070;\">99</span><span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>Nested ternary expressions are kinda messy, but good enough. If a marble is beyond any boundary, we reverse its direction. We <em>always</em> apply a <code style=\"white-space: pre-wrap;\">.99</code> friction coefficient so that marbles slow down.</p>",
            "<p><strong>Finding collisions</strong> with the next closest marble happens using a quadtree. Since we don’t have too many marbles, we can build a new quadtree every time.</p>",
            "<p>{aside} A quadtree is a way to subdivide space into areas. It lets us answer the question of “What’s close enough to me to possibly touch me?” without making too many position comparisons.</p>",
            "<p>Checking every marble with every other marble produces 81 comparisons. Versus 2 comparisons using a quadtree. {/aside}</p>",
            "<div class=\"sourceCode\" id=\"cb181\" data-caption=\"Finding collision candidates\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb181-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// nearest marble is a collision candidate</span></a>",
            "<a class=\"sourceLine\" id=\"cb181-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> subdividedSpace <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">quadtree</span>().<span class=\"at\" style=\"color: #7d9029;\">extent</span>([[<span class=\"op\" style=\"color: #666666;\">-</span><span class=\"dv\" style=\"color: #40a070;\">1</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">-1</span>]<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb181-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                                           [<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">width</span><span class=\"op\" style=\"color: #666666;\">+</span><span class=\"dv\" style=\"color: #40a070;\">1</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">height</span><span class=\"op\" style=\"color: #666666;\">+</span><span class=\"dv\" style=\"color: #40a070;\">1</span>]])</a>",
            "<a class=\"sourceLine\" id=\"cb181-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                                  .<span class=\"at\" style=\"color: #7d9029;\">x</span>(d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"op\" style=\"color: #666666;\">:</span>satisfied<span class=\"op\" style=\"color: #666666;\">:</span></a>",
            "<a class=\"sourceLine\" id=\"cb181-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                                  .<span class=\"at\" style=\"color: #7d9029;\">y</span>(d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">y</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb181-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                                  .<span class=\"at\" style=\"color: #7d9029;\">addAll</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">marbles</span></a>",
            "<a class=\"sourceLine\" id=\"cb181-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                                              .<span class=\"at\" style=\"color: #7d9029;\">filter</span>(m <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> id <span class=\"op\" style=\"color: #666666;\">!==</span> <span class=\"va\" style=\"color: #19177c;\">m</span>.<span class=\"at\" style=\"color: #7d9029;\">id</span>))<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb181-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      candidate <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">subdividedSpace</span>.<span class=\"at\" style=\"color: #7d9029;\">find</span>(x<span class=\"op\" style=\"color: #666666;\">,</span> y<span class=\"op\" style=\"color: #666666;\">,</span> MarbleR<span class=\"op\" style=\"color: #666666;\">*</span><span class=\"dv\" style=\"color: #40a070;\">2</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>We’re using <a href=\"https://github.com/d3/d3-quadtree\"><code style=\"white-space: pre-wrap;\">d3-quadtree</code></a> for the quadtree implementation. It takes an <code style=\"white-space: pre-wrap;\">extent</code>, which tells it how big our space is. An <code style=\"white-space: pre-wrap;\">x</code> and <code style=\"white-space: pre-wrap;\">y</code> accessor tells it how to get coordinates out of our marble objects, and we use <code style=\"white-space: pre-wrap;\">addAll</code> to fill the quadtree with marbles.</p>",
            "<p>To avoid detecting each marble as colliding with itself, we take each marble out of our list before feeding the quadtree.</p>",
            "<p>Once we have a quadtree, we use <code style=\"white-space: pre-wrap;\">.find</code> to look for the nearest marble within two radiuses – <code style=\"white-space: pre-wrap;\">MarbleR*2</code> – of the current marble. That’s exactly the one we’re colliding with! 😄</p>",
            "<p><strong>Handling collisions with marbles</strong> involves math. The sort of thing you think you remember from high school, and suddenly realize you don’t when the time comes to use it.</p>",
            "<p>Code looks like this:</p>",
            "<div class=\"sourceCode\" id=\"cb182\" data-caption=\"Handling marble collisions\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb182-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (candidate) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb182-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb182-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// borrowing @air_hadoken&#39;s implementation from here:</span></a>",
            "<a class=\"sourceLine\" id=\"cb182-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// github.com/airhadoken/game_of_circles/</span></a>",
            "<a class=\"sourceLine\" id=\"cb182-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">//   blob/master/circles.js#L64</span></a>",
            "<a class=\"sourceLine\" id=\"cb182-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> cx <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">candidate</span>.<span class=\"at\" style=\"color: #7d9029;\">x</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb182-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          cy <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">candidate</span>.<span class=\"at\" style=\"color: #7d9029;\">y</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb182-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          normx <span class=\"op\" style=\"color: #666666;\">=</span> cx <span class=\"op\" style=\"color: #666666;\">-</span> x<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb182-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          normy <span class=\"op\" style=\"color: #666666;\">=</span> cy <span class=\"op\" style=\"color: #666666;\">-</span> y<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb182-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          dist <span class=\"op\" style=\"color: #666666;\">=</span> (normx <span class=\"op\" style=\"color: #666666;\">**</span> <span class=\"dv\" style=\"color: #40a070;\">2</span> <span class=\"op\" style=\"color: #666666;\">+</span> normy <span class=\"op\" style=\"color: #666666;\">**</span> <span class=\"dv\" style=\"color: #40a070;\">2</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb182-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          c <span class=\"op\" style=\"color: #666666;\">=</span> (_vx <span class=\"op\" style=\"color: #666666;\">*</span> normx <span class=\"op\" style=\"color: #666666;\">+</span> _vy <span class=\"op\" style=\"color: #666666;\">*</span> normy) / dist <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"fl\" style=\"color: #40a070;\">2.3</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb182-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb182-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    _vx <span class=\"op\" style=\"color: #666666;\">=</span> (_vx <span class=\"op\" style=\"color: #666666;\">-</span> c <span class=\"op\" style=\"color: #666666;\">*</span> normx)/<span class=\"fl\" style=\"color: #40a070;\">2.3</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb182-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    _vy <span class=\"op\" style=\"color: #666666;\">=</span> (_vy <span class=\"op\" style=\"color: #666666;\">-</span> c <span class=\"op\" style=\"color: #666666;\">*</span> normy)/<span class=\"fl\" style=\"color: #40a070;\">2.3</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb182-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb182-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">candidate</span>.<span class=\"at\" style=\"color: #7d9029;\">vx</span> <span class=\"op\" style=\"color: #666666;\">+=</span> <span class=\"op\" style=\"color: #666666;\">-</span>_vx<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb182-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">candidate</span>.<span class=\"at\" style=\"color: #7d9029;\">vy</span> <span class=\"op\" style=\"color: #666666;\">+=</span> <span class=\"op\" style=\"color: #666666;\">-</span>_vy<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb182-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">candidate</span>.<span class=\"at\" style=\"color: #7d9029;\">x</span> <span class=\"op\" style=\"color: #666666;\">+=</span> <span class=\"op\" style=\"color: #666666;\">-</span>_vx<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb182-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">candidate</span>.<span class=\"at\" style=\"color: #7d9029;\">y</span> <span class=\"op\" style=\"color: #666666;\">+=</span> <span class=\"op\" style=\"color: #666666;\">-</span>_vy<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb182-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb182-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb182-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb182-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> x <span class=\"op\" style=\"color: #666666;\">+</span> _vx<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb182-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> y <span class=\"op\" style=\"color: #666666;\">+</span> _vy<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb182-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">vx</span><span class=\"op\" style=\"color: #666666;\">:</span> _vx<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb182-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">vy</span><span class=\"op\" style=\"color: #666666;\">:</span> _vy</a>",
            "<a class=\"sourceLine\" id=\"cb182-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>Ok, the <code style=\"white-space: pre-wrap;\">return</code> statement isn’t about handling collisions. It updates the current marble.</p>",
            "<p>The rest looks like magic. I implemented it and it still looks like magic.</p>",
            "<p>You can think of <code style=\"white-space: pre-wrap;\">[normx, normy]</code> as a vector that points from current marble to collision candidate. It gives us bounce direction. We use the <a href=\"https://en.wikipedia.org/wiki/Euclidean_distance\">euclidean distance</a> formula to calculate the length of this vector. The distance between the centers of both marbles.</p>",
            "<p>Then we calculate the <a href=\"https://en.wikipedia.org/wiki/Dot_product\">dot product</a> between our marble’s speed vector and the collision direction vector. And we normalize it by distance. Multiplying distance by <code style=\"white-space: pre-wrap;\">2</code> accounts for there being two marbles in the collision. That extra <code style=\"white-space: pre-wrap;\">.3</code> made the simulation look better.</p>",
            "<p>Fiddling and experimentation are your best tools for magic values like that 😉</p>",
            "<p>Then we use the dot product scalar to adjust the marble’s speed vector. Dividing by <code style=\"white-space: pre-wrap;\">2</code> takes into account that half the energy goes to the other marble. This is true because we assume their masses are equal.</p>",
            "<p>Finally, we update the <code style=\"white-space: pre-wrap;\">candidate</code> marble and make sure it bounces off as well. We do it additively because that’s how it happens in real life.</p>",
            "<p>Two marbles traveling towards each other in exactly opposite directions with exactly the same speed, will stop dead and stay there. As soon as there’s any misalignment, deflection happens. If one is stationary, it starts moving. If it’s moving in the same direction, it speeds up… etc.</p>",
            "<p>The end result is <a href=\"https://swizec.github.io/declarative-canvas-react-konva/\">a decent-looking simulation of billiards</a>.</p>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "Speedy React alternatives",
      "lectures": [
        {
          "lectureTitle": "Using a React alternative like Preact or Inferno",
          "lectureLines": [
            "<h1 id=\"fractal-tree\">Using a React alternative like Preact or Inferno</h1>",
            "<p>We’ve been using React so far, and that’s worked great. React is fast, easy to use, and not too hard to understand. However, two alternative frameworks promise the ease of React, but faster with a smaller footprint.</p>",
            "<p><a href=\"https://github.com/developit/preact\"><strong>Preact</strong></a> looks just like React when you’re using it, but the smaller code footprint means your apps open faster. Performing fewer sanity checks at runtime makes it faster to run too. Async rendering can make your apps feel even faster.</p>",
            "<p><a href=\"https://github.com/infernojs/inferno\"><strong>Inferno</strong></a> also promises to look just like React when you’re using it, but its sole purpose in life is to be faster. According to its maintainers, converting to Inferno can improve performance of your real-world app by up to 110%.</p>",
            "<p>Both Preact and Inferno have a <code style=\"white-space: pre-wrap;\">-compat</code> project that lets you convert existing React projects without any code modifications. While React has gotten much faster in recent years, so have Preact and Inferno. You should give them a try.</p>",
            "<p>I know Uber uses Preact for their Uber lite mobile app.</p>"
          ]
        },
        {
          "lectureTitle": "Stress test your framework with a recursive fractal",
          "lectureLines": [
            "<h2 id=\"stress-test-your-framework-with-a-recursive-fractal\">Stress test your framework with a recursive fractal</h2>",
            "<p>To show you how these speed improvements look in real life, I’ve devised a stress test. A <a href=\"https://en.wikipedia.org/wiki/Pythagoras_tree_(fractal)\">pythagorean fractal tree</a> that moves around when you move your mouse.</p>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/pythagorean-tree.png\" alt=\"Pythagorean tree\"><figcaption>Pythagorean tree</figcaption>",
            "</figure>",
            "<p>It’s a great stress test because a render like this is the worst case scenario for tree-based rendering. You have 2048 SVG nodes, deeply nested, that all change props and re-render with every change.</p>",
            "<p>You can see <a href=\"https://github.com/Swizec/react-fractals\">the full code on Github</a>. We’re going to focus on the recursive <code style=\"white-space: pre-wrap;\">&lt;Pythagoras&gt;</code> component.</p>",
            "<h3 id=\"how-you-too-can-build-a-dancing-tree-fractal\">How you too can build a dancing tree fractal</h3>",
            "<p>Equipped with basic trigonometry, you need 3 ingredients to build a dancing tree:</p>",
            "<ul>",
            "<li>a recursive <code style=\"white-space: pre-wrap;\">&lt;Pythagoras&gt;</code> component</li>",
            "<li>a mousemove listener</li>",
            "<li>a memoized next-step-props calculation function</li>",
            "</ul>",
            "<p>We’re using a <code style=\"white-space: pre-wrap;\">&lt;Pythagoras&gt;</code> component for each square and its two children, a D3 mouse listener, and some math that a reader helped me with. We need D3 because its mouse listeners automatically calculate mouse position relative to SVG coordinates. <a href=\"https://en.wikipedia.org/wiki/Memoization\">Memoization</a> in the math function helps us keep our code faster.</p>",
            "<p>The <code style=\"white-space: pre-wrap;\">&lt;Pythagoras&gt;</code> component looks like this:</p>",
            "<div class=\"sourceCode\" id=\"cb183\" data-caption=\"Recursive &lt;Pythagoras&gt; component\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb183-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> Pythagoras <span class=\"op\" style=\"color: #666666;\">=</span> (<span class=\"op\" style=\"color: #666666;\">{</span> w<span class=\"op\" style=\"color: #666666;\">,</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y<span class=\"op\" style=\"color: #666666;\">,</span> heightFactor<span class=\"op\" style=\"color: #666666;\">,</span> lean<span class=\"op\" style=\"color: #666666;\">,</span> left<span class=\"op\" style=\"color: #666666;\">,</span> right<span class=\"op\" style=\"color: #666666;\">,</span> lvl<span class=\"op\" style=\"color: #666666;\">,</span> maxlvl <span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (lvl <span class=\"op\" style=\"color: #666666;\">&gt;=</span> maxlvl <span class=\"op\" style=\"color: #666666;\">||</span> w <span class=\"op\" style=\"color: #666666;\">&lt;</span> <span class=\"dv\" style=\"color: #40a070;\">1</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">null</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb183-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> nextRight<span class=\"op\" style=\"color: #666666;\">,</span> nextLeft<span class=\"op\" style=\"color: #666666;\">,</span> A<span class=\"op\" style=\"color: #666666;\">,</span> B <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">memoizedCalc</span>(<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">w</span><span class=\"op\" style=\"color: #666666;\">:</span> w<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">heightFactor</span><span class=\"op\" style=\"color: #666666;\">:</span> heightFactor<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">lean</span><span class=\"op\" style=\"color: #666666;\">:</span> lean</a>",
            "<a class=\"sourceLine\" id=\"cb183-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb183-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> rotate <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb183-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (left) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        rotate <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"vs\" style=\"color: #4070a0;\">`rotate(</span><span class=\"sc\" style=\"color: #4070a0;\">${</span><span class=\"op\" style=\"color: #666666;\">-</span>A<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\"> 0 </span><span class=\"sc\" style=\"color: #4070a0;\">${</span>w<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">)`</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span><span class=\"cf\" style=\"color: #007020; font-weight: bold;\">else</span> <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (right) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        rotate <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"vs\" style=\"color: #4070a0;\">`rotate(</span><span class=\"sc\" style=\"color: #4070a0;\">${</span>B<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\"> </span><span class=\"sc\" style=\"color: #4070a0;\">${</span>w<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\"> </span><span class=\"sc\" style=\"color: #4070a0;\">${</span>w<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">)`</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb183-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb183-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>g transform<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"vs\" style=\"color: #4070a0;\">`translate(</span><span class=\"sc\" style=\"color: #4070a0;\">${</span>x<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\"> </span><span class=\"sc\" style=\"color: #4070a0;\">${</span>y<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">) </span><span class=\"sc\" style=\"color: #4070a0;\">${</span>rotate<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">`</span><span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>rect width<span class=\"op\" style=\"color: #666666;\">={</span>w<span class=\"op\" style=\"color: #666666;\">}</span> height<span class=\"op\" style=\"color: #666666;\">={</span>w<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                  x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">}</span> y<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                  style<span class=\"op\" style=\"color: #666666;\">={{</span><span class=\"dt\">fill</span><span class=\"op\">:</span> <span class=\"at\">interpolateViridis</span>(lvl/maxlvl)<span class=\"op\">}}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb183-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb183-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>Pythagoras w<span class=\"op\" style=\"color: #666666;\">={</span>nextLeft<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">}</span> y<span class=\"op\" style=\"color: #666666;\">={-</span>nextLeft<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        lvl<span class=\"op\" style=\"color: #666666;\">={</span>lvl<span class=\"op\" style=\"color: #666666;\">+</span><span class=\"dv\" style=\"color: #40a070;\">1</span><span class=\"op\" style=\"color: #666666;\">}</span> maxlvl<span class=\"op\" style=\"color: #666666;\">={</span>maxlvl<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        heightFactor<span class=\"op\" style=\"color: #666666;\">={</span>heightFactor<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        lean<span class=\"op\" style=\"color: #666666;\">={</span>lean<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        left /<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb183-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>Pythagoras w<span class=\"op\" style=\"color: #666666;\">={</span>nextRight<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        x<span class=\"op\" style=\"color: #666666;\">={</span>w<span class=\"op\" style=\"color: #666666;\">-</span>nextRight<span class=\"op\" style=\"color: #666666;\">}</span> y<span class=\"op\" style=\"color: #666666;\">={-</span>nextRight<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        lvl<span class=\"op\" style=\"color: #666666;\">={</span>lvl<span class=\"op\" style=\"color: #666666;\">+</span><span class=\"dv\" style=\"color: #40a070;\">1</span><span class=\"op\" style=\"color: #666666;\">}</span> maxlvl<span class=\"op\" style=\"color: #666666;\">={</span>maxlvl<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-36\" title=\"36\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        heightFactor<span class=\"op\" style=\"color: #666666;\">={</span>heightFactor<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-37\" title=\"37\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        lean<span class=\"op\" style=\"color: #666666;\">={</span>lean<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-38\" title=\"38\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        right /<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-39\" title=\"39\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb183-40\" title=\"40\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        &lt;/g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-41\" title=\"41\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb183-42\" title=\"42\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">};</span></a></code></pre></div>",
            "<p>We break out of recursion when we get too deep or try to draw an invisible square. Otherwise we:</p>",
            "<ul>",
            "<li>use <code style=\"white-space: pre-wrap;\">memoizedCalc</code> to do the mathematics</li>",
            "<li>define different <code style=\"white-space: pre-wrap;\">rotate()</code> transforms for the <code style=\"white-space: pre-wrap;\">left</code> and <code style=\"white-space: pre-wrap;\">right</code> branches</li>",
            "<li>return an SVG <code style=\"white-space: pre-wrap;\">&lt;rect&gt;</code> for the current rectangle, and two <code style=\"white-space: pre-wrap;\">&lt;Pythagoras&gt;</code> elements for each branch.</li>",
            "</ul>",
            "<p>Most of this code deals with passing props to children, which isn’t the most elegant approach, but it works. The rest is about positioning branches so corners match up.</p>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/pythagoras-corners-match-up.png\" alt=\"Corners matching up\"><figcaption>Corners matching up</figcaption>",
            "</figure>",
            "<h4 id=\"the-math\">The math</h4>",
            "<p>I don’t <em>really</em> understand this math, but I sort of know where it’s coming from. It’s the <a href=\"https://en.wikipedia.org/wiki/Law_of_sines\">sine law</a> applied correctly. The part I failed at <a href=\"https://swizec.com/blog/fractals-react/swizec/7233\">when I tried</a> to do it myself.</p>",
            "<div class=\"sourceCode\" id=\"cb184\" data-caption=\"Trigonometry that moves our fractal\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb184-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> memoizedCalc <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span> () <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb184-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> memo <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{};</span></a>",
            "<a class=\"sourceLine\" id=\"cb184-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb184-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> key <span class=\"op\" style=\"color: #666666;\">=</span> (<span class=\"op\" style=\"color: #666666;\">{</span> w<span class=\"op\" style=\"color: #666666;\">,</span> heightFactor<span class=\"op\" style=\"color: #666666;\">,</span> lean <span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> [w<span class=\"op\" style=\"color: #666666;\">,</span>heightFactor<span class=\"op\" style=\"color: #666666;\">,</span> lean].<span class=\"at\" style=\"color: #7d9029;\">join</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;-&#39;</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb184-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb184-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (args) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb184-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> memoKey <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">key</span>(args)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb184-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb184-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (memo[memoKey]) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb184-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> memo[memoKey]<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb184-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span><span class=\"cf\" style=\"color: #007020; font-weight: bold;\">else</span><span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb184-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> w<span class=\"op\" style=\"color: #666666;\">,</span> heightFactor<span class=\"op\" style=\"color: #666666;\">,</span> lean <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> args<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb184-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb184-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> trigH <span class=\"op\" style=\"color: #666666;\">=</span> heightFactor<span class=\"op\" style=\"color: #666666;\">*</span>w<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb184-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb184-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> result <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb184-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">nextRight</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">Math</span>.<span class=\"at\" style=\"color: #7d9029;\">sqrt</span>(trigH<span class=\"op\" style=\"color: #666666;\">**</span><span class=\"dv\" style=\"color: #40a070;\">2</span> <span class=\"op\" style=\"color: #666666;\">+</span> (w <span class=\"op\" style=\"color: #666666;\">*</span> (.<span class=\"dv\" style=\"color: #40a070;\">5</span><span class=\"op\" style=\"color: #666666;\">+</span>lean))<span class=\"op\" style=\"color: #666666;\">**</span><span class=\"dv\" style=\"color: #40a070;\">2</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb184-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">nextLeft</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">Math</span>.<span class=\"at\" style=\"color: #7d9029;\">sqrt</span>(trigH<span class=\"op\" style=\"color: #666666;\">**</span><span class=\"dv\" style=\"color: #40a070;\">2</span> <span class=\"op\" style=\"color: #666666;\">+</span> (w <span class=\"op\" style=\"color: #666666;\">*</span> (.<span class=\"dv\" style=\"color: #40a070;\">5</span><span class=\"op\" style=\"color: #666666;\">-</span>lean))<span class=\"op\" style=\"color: #666666;\">**</span><span class=\"dv\" style=\"color: #40a070;\">2</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb184-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">A</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">Math</span>.<span class=\"at\" style=\"color: #7d9029;\">deg</span>(<span class=\"va\" style=\"color: #19177c;\">Math</span>.<span class=\"at\" style=\"color: #7d9029;\">atan</span>(trigH / ((.<span class=\"dv\" style=\"color: #40a070;\">5</span><span class=\"op\" style=\"color: #666666;\">-</span>lean) <span class=\"op\" style=\"color: #666666;\">*</span> w)))<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb184-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"dt\" style=\"color: #902000;\">B</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">Math</span>.<span class=\"at\" style=\"color: #7d9029;\">deg</span>(<span class=\"va\" style=\"color: #19177c;\">Math</span>.<span class=\"at\" style=\"color: #7d9029;\">atan</span>(trigH / ((.<span class=\"dv\" style=\"color: #40a070;\">5</span><span class=\"op\" style=\"color: #666666;\">+</span>lean) <span class=\"op\" style=\"color: #666666;\">*</span> w)))</a>",
            "<a class=\"sourceLine\" id=\"cb184-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb184-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb184-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            memo[memoKey] <span class=\"op\" style=\"color: #666666;\">=</span> result<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb184-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> result<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb184-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb184-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb184-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>We expanded the basic law of sines with a dynamic <code style=\"white-space: pre-wrap;\">heightFactor</code> and <code style=\"white-space: pre-wrap;\">lean</code> adjustment. We’ll control those with mouse movement.</p>",
            "<p>To improve performance our <code style=\"white-space: pre-wrap;\">memoizedCalc</code> function has an internal data store that maintains a hash of every argument tuple and its result. So when we call <code style=\"white-space: pre-wrap;\">memoizedCalc</code> with the same arguments multiple times, it reads from cache instead of recalculating.</p>",
            "<p>At 11 levels of recursion, <code style=\"white-space: pre-wrap;\">memoizedCalc</code> is called 2,048 times and only returns 11 different results. Great candidate for memoization if I ever saw one.</p>",
            "<p>Of course, a benchmark would be great here. Maybe <code style=\"white-space: pre-wrap;\">sqrt</code>, <code style=\"white-space: pre-wrap;\">atan</code>, and <code style=\"white-space: pre-wrap;\">**</code> aren’t <em>that</em> slow, and our real bottleneck is redrawing all those nodes on every mouse move. Hint: it totally is.</p>",
            "<p>Our ability to memoize calculation also means that we could, in theory, flatten our rendering. Instead of recursion, we could use iteration and render in layers. Squares at each level are the same, just at different <code style=\"white-space: pre-wrap;\">(x, y)</code> coordinates.</p>",
            "<p>This, however, would be far too tricky to implement.</p>",
            "<h4 id=\"the-mouse-listener\">The mouse listener</h4>",
            "<p>Inside <a href=\"https://github.com/Swizec/react-fractals/blob/master/src/App.js\"><code style=\"white-space: pre-wrap;\">App.js</code></a>, we add a mouse event listener. We use D3’s because it gives us SVG-relative position calculation out of the box. With React’s, we’d have to do the hard work ourselves.</p>",
            "<div class=\"sourceCode\" id=\"cb185\" data-caption=\"Reacting to mouse movement\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb185-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// App.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">state <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">currentMax</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">baseW</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">80</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">heightFactor</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">lean</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">0</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb185-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"at\" style=\"color: #7d9029;\">componentDidMount</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">d3select</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">refs</span>.<span class=\"at\" style=\"color: #7d9029;\">svg</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb185-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">     .<span class=\"at\" style=\"color: #7d9029;\">on</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;mousemove&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">onMouseMove</span>.<span class=\"at\" style=\"color: #7d9029;\">bind</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb185-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"at\" style=\"color: #7d9029;\">onMouseMove</span>(event) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> [x<span class=\"op\" style=\"color: #666666;\">,</span> y] <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">d3mouse</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">refs</span>.<span class=\"at\" style=\"color: #7d9029;\">svg</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb185-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  scaleFactor <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">scaleLinear</span>().<span class=\"at\" style=\"color: #7d9029;\">domain</span>([<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">height</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">0</span>])</a>",
            "<a class=\"sourceLine\" id=\"cb185-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                             .<span class=\"at\" style=\"color: #7d9029;\">range</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> .<span class=\"op\" style=\"color: #666666;\">:</span><span class=\"dt\" style=\"color: #902000;\">sunglasses</span><span class=\"op\" style=\"color: #666666;\">:</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb185-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  scaleLean <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">scaleLinear</span>().<span class=\"at\" style=\"color: #7d9029;\">domain</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">width</span>/<span class=\"dv\" style=\"color: #40a070;\">2</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">width</span>])</a>",
            "<a class=\"sourceLine\" id=\"cb185-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                           .<span class=\"at\" style=\"color: #7d9029;\">range</span>([.<span class=\"dv\" style=\"color: #40a070;\">5</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"fl\" style=\"color: #40a070;\">-.5</span>])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb185-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">setState</span>(<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">heightFactor</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"at\" style=\"color: #7d9029;\">scaleFactor</span>(y)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">lean</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"at\" style=\"color: #7d9029;\">scaleLean</span>(<span class=\"op\" style=\"color: #666666;\">:</span><span class=\"dt\" style=\"color: #902000;\">satisfied</span><span class=\"op\" style=\"color: #666666;\">:</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb185-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb185-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">&lt;</span>svg ref<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;svg&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span> <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">//...</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">&lt;</span>Pythagoras w<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">baseW</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">              h<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">baseW</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-36\" title=\"36\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">              heightFactor<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">heightFactor</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-37\" title=\"37\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">             lean<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">lean</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-38\" title=\"38\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">             x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">width</span>/<span class=\"dv\" style=\"color: #40a070;\">2-40</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-39\" title=\"39\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">             y<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">height</span><span class=\"op\" style=\"color: #666666;\">-</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">baseW</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-40\" title=\"40\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">             lvl<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb185-41\" title=\"41\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">             maxlvl<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">currentMax</span><span class=\"op\" style=\"color: #666666;\">}</span>/&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb185-42\" title=\"42\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>A few things happen here:</p>",
            "<ul>",
            "<li>we set initial <code style=\"white-space: pre-wrap;\">lean</code> and <code style=\"white-space: pre-wrap;\">heightFactor</code> to <code style=\"white-space: pre-wrap;\">0</code></li>",
            "<li>in <code style=\"white-space: pre-wrap;\">componentDidMount</code>, we use <code style=\"white-space: pre-wrap;\">d3.select</code> and <code style=\"white-space: pre-wrap;\">.on</code> to add a mouse listener</li>",
            "<li>we define an <code style=\"white-space: pre-wrap;\">onMouseMove</code> method as the listener</li>",
            "<li>render the first <code style=\"white-space: pre-wrap;\">&lt;Pythagoras&gt;</code> using values from <code style=\"white-space: pre-wrap;\">state</code></li>",
            "</ul>",
            "<p>The <code style=\"white-space: pre-wrap;\">lean</code> parameter tells us which way the tree is leaning and how much, the <code style=\"white-space: pre-wrap;\">heightFactor</code> tells us how high those triangles should be. We control both with the mouse position.</p>",
            "<p>That happens in <code style=\"white-space: pre-wrap;\">onMouseMove</code>:</p>",
            "<div class=\"sourceCode\" id=\"cb186\" data-caption=\"Moving the fractal as user moves mouse\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb186-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"at\" style=\"color: #7d9029;\">onMouseMove</span>(event) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb186-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> [x<span class=\"op\" style=\"color: #666666;\">,</span> y] <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">d3mouse</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">refs</span>.<span class=\"at\" style=\"color: #7d9029;\">svg</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb186-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb186-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  scaleFactor <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">scaleLinear</span>().<span class=\"at\" style=\"color: #7d9029;\">domain</span>([<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">height</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">0</span>])</a>",
            "<a class=\"sourceLine\" id=\"cb186-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                             .<span class=\"at\" style=\"color: #7d9029;\">range</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> .<span class=\"op\" style=\"color: #666666;\">:</span><span class=\"dt\" style=\"color: #902000;\">sunglasses</span><span class=\"op\" style=\"color: #666666;\">:</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb186-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb186-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  scaleLean <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">scaleLinear</span>().<span class=\"at\" style=\"color: #7d9029;\">domain</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">width</span>/<span class=\"dv\" style=\"color: #40a070;\">2</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">width</span>])</a>",
            "<a class=\"sourceLine\" id=\"cb186-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                           .<span class=\"at\" style=\"color: #7d9029;\">range</span>([.<span class=\"dv\" style=\"color: #40a070;\">5</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"fl\" style=\"color: #40a070;\">-.5</span>])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb186-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb186-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">setState</span>(<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb186-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">heightFactor</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"at\" style=\"color: #7d9029;\">scaleFactor</span>(y)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb186-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">lean</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"at\" style=\"color: #7d9029;\">scaleLean</span>(<span class=\"op\" style=\"color: #666666;\">:</span><span class=\"dt\" style=\"color: #902000;\">satisfied</span><span class=\"op\" style=\"color: #666666;\">:</span></a>",
            "<a class=\"sourceLine\" id=\"cb186-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb186-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p><code style=\"white-space: pre-wrap;\">d3mouse</code> - an imported <code style=\"white-space: pre-wrap;\">mouse</code> function from <code style=\"white-space: pre-wrap;\">d3-selection</code> - gives us cursor position relative to the SVG element. Two linear scales give us <code style=\"white-space: pre-wrap;\">scaleFactor</code> and <code style=\"white-space: pre-wrap;\">scaleLean</code> values, which we put into component state.</p>",
            "<p>When we feed a change to <code style=\"white-space: pre-wrap;\">this.setState</code>, it triggers a re-render of the entire tree, our <code style=\"white-space: pre-wrap;\">memoizedCalc</code> function returns new values, and the final result is a dancing tree.</p>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/pythagoras-dancing.gif\" alt=\"Dancing Pythagoras tree\"><figcaption>Dancing Pythagoras tree</figcaption>",
            "</figure>",
            "<p>Beautious. 😍</p>"
          ]
        },
        {
          "lectureTitle": "Stress testing Preact and Inferno",
          "lectureLines": [
            "<h2 id=\"trying-the-stress-test-in-preact-and-inferno\">Trying the stress test in Preact and Inferno</h2>",
            "<p>The Pythagoras tree example got converted into 6 different UI libraries: React, Preact, Inferno, Vue, Angular 2, and CycleJS.</p>",
            "<p>Mostly by the creators of those libraries themselves because they’re awesome and much smarter than I am. You can see the result, in gifs, on <a href=\"https://swizec.com/blog/animating-svg-nodes-react-preact-inferno-vue/swizec/7311\">my blog here</a>.</p>",
            "<p>We’re focusing on React-like libraries, so here’s a rundown of changes required for Preact and Inferno with links to full code.</p>",
            "<h3 id=\"preact\">Preact</h3>",
            "<p>Implemented by Jason Miller, creator of Preact. <a href=\"https://github.com/developit/preact-fractals\">Full code on Github</a></p>",
            "<p><img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/preact-pythagora.gif\"></p>",
            "<p>Jason used the <code style=\"white-space: pre-wrap;\">preact-compat</code> layer to make Preact pretend that it’s React. This might impact performance.</p>",
            "<p>What I love about the Preact example is that it uses async rendering to look smoother. You can see the redraw cycle lag behind the mouse movement producing curious effects.</p>",
            "<p>I like it.</p>",
            "<p>Here’s how he did it: <a href=\"https://github.com/Swizec/react-fractals/compare/master...developit:master\">full diff on github</a></p>",
            "<p>In <code style=\"white-space: pre-wrap;\">package.json</code>, he added <code style=\"white-space: pre-wrap;\">preact</code>, <code style=\"white-space: pre-wrap;\">preact-compat</code>, and preact -compat clones for React libraries. I guess you need the latter so you don’t have to change your imports.</p>",
            "<p>He changed the functional <code style=\"white-space: pre-wrap;\">Pythagoras</code> component into a stateful component to enable async rendering.</p>",
            "<div class=\"sourceCode\" id=\"cb187\" data-caption=\"Change &lt;Pythagoras&gt; to a class\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb187-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/Pythagoras.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb187-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb187-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">render</span>(props) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb187-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"at\" style=\"color: #7d9029;\">Pythagoras</span>(props)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb187-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb187-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>And enabled debounced asynchronous rendering:</p>",
            "<div class=\"sourceCode\" id=\"cb188\" data-caption=\"Debounce rendering\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb188-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/index.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb188-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">{</span> options <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;preact&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb188-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"va\" style=\"color: #19177c;\">options</span>.<span class=\"at\" style=\"color: #7d9029;\">syncComponentUpdates</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">false</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb188-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb188-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">//option 1:  rIC + setTimeout fallback</span></a>",
            "<a class=\"sourceLine\" id=\"cb188-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> timer<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb188-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"va\" style=\"color: #19177c;\">options</span>.<span class=\"at\" style=\"color: #7d9029;\">debounceRendering</span> <span class=\"op\" style=\"color: #666666;\">=</span> f <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb188-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">clearTimeout</span>(timer)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb188-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    timer <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">setTimeout</span>(f<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">100</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb188-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">requestIdleCallback</span>(f)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb188-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">};</span></a></code></pre></div>",
            "<p>My favorite part is that you can use Preact as a drop-in replacement for React and it Just Works™ <em>and</em> works well. This is promising for anyone who wants a quick win in their codebase.</p>",
            "<h3 id=\"inferno\">Inferno</h3>",
            "<p>Implemented by Dominic Gannaway, creator of Inferno. <a href=\"https://github.com/trueadm/inferno-fractals\">Full code on Github</a></p>",
            "<p>You <em>can</em> use Inferno as a drop-in replacement for React, and I did when I tried to build this myself. Dominic says that impacts performance, though, so he made a proper fork. You can see the <a href=\"https://github.com/Swizec/react-fractals/compare/master...trueadm:master\">full diff on Github</a></p>",
            "<p>Dominic changed all <code style=\"white-space: pre-wrap;\">react-scripts</code> references to <code style=\"white-space: pre-wrap;\">inferno-scripts</code>, and it’s a good sign that such a thing exists. He also changed the <code style=\"white-space: pre-wrap;\">react</code> dependency to <code style=\"white-space: pre-wrap;\">inferno-beta36</code>, but I’m sure it’s out of beta by the time you’re reading this. The experiment was done in December 2016.</p>",
            "<p>From there, the main changes are to the imports – React becomes Inferno – and he changed some class methods to bound fat arrow functions. Probably a stylistic choice.</p>",
            "<p>He also had to change a string-based ref into a callback ref. Inferno doesn’t do string-based refs for performance reasons, and we need refs so we can use D3 to detect mouse position on SVG.</p>",
            "<div class=\"sourceCode\" id=\"cb189\" data-caption=\"Change ref to callback\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb189-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// src/App.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb189-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb189-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> App <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> Component <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb189-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb189-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  svgElemeRef <span class=\"op\" style=\"color: #666666;\">=</span> (domNode) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb189-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">svgElement</span> <span class=\"op\" style=\"color: #666666;\">=</span> domNode<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb189-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb189-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb189-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb189-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ..</span></a>",
            "<a class=\"sourceLine\" id=\"cb189-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>svg width<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">width</span><span class=\"op\" style=\"color: #666666;\">}</span> height<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">svg</span>.<span class=\"at\" style=\"color: #7d9029;\">height</span><span class=\"op\" style=\"color: #666666;\">}</span> ref<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">svgElemeRef</span> <span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb189-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>In the core <code style=\"white-space: pre-wrap;\">Pythagoras</code> component, he added two Inferno-specific props: <code style=\"white-space: pre-wrap;\">noNormalize</code> and <code style=\"white-space: pre-wrap;\">hasNonKeyedChildren</code>.</p>",
            "<p>According to <a href=\"https://github.com/trueadm/inferno/issues/565\">this issue</a>, <code style=\"white-space: pre-wrap;\">noNormalize</code> is a benchmark-focused flag that improves performance, and I can’t figure out what <code style=\"white-space: pre-wrap;\">hasNonKeyedChildren</code> does. I assume both are performance optimizations for the Virtual DOM diffing algorithm.</p>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "Refactor your components with React Hooks",
      "lectures": [
        {
          "lectureTitle": "An intro to hooks",
          "lectureLines": [
            "<h1 id=\"refactor-your-components-with-react-hooks\">Refactor your components with React Hooks</h1>",
            "<p>Hooks launched with great fanfare and community excitement in February 2019. A whole new way to write React components.</p>",
            "<p>Not a fundamental change, the React team would say, but a mind shift after all. A change in how you think about state, side effects, and component structure. You might not like hooks at first. With a little practice they’re going to feel more natural than the component lifecycle model you’re used to now.</p>",
            "<p>Hooks exist to:</p>",
            "<ul>",
            "<li>help you write less code for little bits of logic</li>",
            "<li>help you move logic out of your components</li>",
            "<li>help you reuse logic between components</li>",
            "</ul>",
            "<p>Some say it removes complexity around the <code style=\"white-space: pre-wrap;\">this</code> keyword in JavaScript and I’m not sure that it does. Yes, there’s no more <code style=\"white-space: pre-wrap;\">this</code> because everything is a function, that’s true. But you replace that with passing a lot of function arguments around and being careful about function scope.</p>",
            "<p>My favorite React Hooks magic trick is that you can and should write your own. Reusable or not, a custom hook almost always cleans up your code.</p>",
            "<p>Oh and good news! Hooks are backwards compatible. You can write new stuff with hooks and keep your old stuff unchanged. 👌</p>",
            "<p>In this section we’re going to look at the core React hooks, talk about the most important hook for dataviz, then refactor our big example from earlier to use hooks.</p>",
            "<p>You’ll need to upgrade React to at least version <code style=\"white-space: pre-wrap;\">16.8.0</code> to use hooks.</p>"
          ]
        },
        {
          "lectureTitle": "useState, useEffect, and useContext",
          "lectureLines": [
            "<h2 id=\"usestate-useeffect-and-usecontext\">useState, useEffect, and useContext</h2>",
            "<p>React comes with <a href=\"https://reactjs.org/docs/hooks-reference.html\">a bunch of basic and advanced hooks</a>. The core hooks are:</p>",
            "<ul>",
            "<li><code style=\"white-space: pre-wrap;\">useState</code> for managing state</li>",
            "<li><code style=\"white-space: pre-wrap;\">useEffect</code> for side-effects</li>",
            "<li><code style=\"white-space: pre-wrap;\">useContext</code> for React’s context API</li>",
            "</ul>",
            "<p>Here’s how to think about them in a nutshell 👇</p>",
            "<h3 id=\"usestate\">useState</h3>",
            "<p>The <code style=\"white-space: pre-wrap;\">useState</code> hook replaces pairs of state getters and setters.</p>",
            "<div class=\"sourceCode\" id=\"cb190\" data-caption=\"State without hooks\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb190-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> myComponent <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb190-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    state <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb190-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"dt\" style=\"color: #902000;\">value</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;default&#39;</span></a>",
            "<a class=\"sourceLine\" id=\"cb190-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb190-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb190-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    handleChange <span class=\"op\" style=\"color: #666666;\">=</span> (e) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">setState</span>(<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb190-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"dt\" style=\"color: #902000;\">value</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">e</span>.<span class=\"va\" style=\"color: #19177c;\">target</span>.<span class=\"at\" style=\"color: #7d9029;\">value</span></a>",
            "<a class=\"sourceLine\" id=\"cb190-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb190-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb190-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb190-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> value <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb190-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb190-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">&lt;</span>input value<span class=\"op\" style=\"color: #666666;\">={</span>value<span class=\"op\" style=\"color: #666666;\">}</span> onChange<span class=\"op\" style=\"color: #666666;\">={</span>handleChange<span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb190-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb190-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>👇</p>",
            "<div class=\"sourceCode\" id=\"cb191\" data-caption=\"useState hook\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb191-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> myComponent <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb191-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> [value<span class=\"op\" style=\"color: #666666;\">,</span> setValue] <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">useState</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;default&#39;</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb191-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb191-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> handleChange <span class=\"op\" style=\"color: #666666;\">=</span> (e) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"at\" style=\"color: #7d9029;\">setValue</span>(<span class=\"va\" style=\"color: #19177c;\">e</span>.<span class=\"va\" style=\"color: #19177c;\">target</span>.<span class=\"at\" style=\"color: #7d9029;\">value</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb191-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb191-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">&lt;</span>input value<span class=\"op\" style=\"color: #666666;\">={</span>value<span class=\"op\" style=\"color: #666666;\">}</span> onChange<span class=\"op\" style=\"color: #666666;\">={</span>handleChange<span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb191-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>Less code to write and understand.</p>",
            "<p>In a class component you:</p>",
            "<ul>",
            "<li>set a default value</li>",
            "<li>create an <code style=\"white-space: pre-wrap;\">onChange</code> callback that fires <code style=\"white-space: pre-wrap;\">setState</code></li>",
            "<li>read value from state before rendering etc.</li>",
            "</ul>",
            "<p>Without modern fat arrow syntax you might run into trouble with binds.</p>",
            "<p>The hook approach moves that boilerplate to React’s plate. You call <code style=\"white-space: pre-wrap;\">useState</code>. It takes a default value and returns a getter and a setter.</p>",
            "<p>You call that setter in your change handler.</p>",
            "<p>Behind the scenes React subscribes your component to that change. Your component re-renders.</p>",
            "<h3 id=\"useeffect\">useEffect</h3>",
            "<p><code style=\"white-space: pre-wrap;\">useEffect</code> replaces the <code style=\"white-space: pre-wrap;\">componentDidMount</code>, <code style=\"white-space: pre-wrap;\">componentDidUpdate</code>, <code style=\"white-space: pre-wrap;\">shouldComponentUpdate</code>, <code style=\"white-space: pre-wrap;\">componentWillUnmount</code> quadfecta. It’s like a trifecta, but four.</p>",
            "<p>Say you want a side-effect when your component updates, like make an API call. Gotta run it on mount and update. Want to subscribe to a DOM event? Gotta unsubscribe on unmount.</p>",
            "<p>Wanna do all this only when certain props change? Gotta check for that.</p>",
            "<p>Class:</p>",
            "<div class=\"sourceCode\" id=\"cb192\" data-caption=\"Side-effects without hooks\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb192-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> myComp <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> Component <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb192-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  state <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb192-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"dt\" style=\"color: #902000;\">value</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;default&#39;</span></a>",
            "<a class=\"sourceLine\" id=\"cb192-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb192-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb192-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    handleChange <span class=\"op\" style=\"color: #666666;\">=</span> (e) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">setState</span>(<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb192-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"dt\" style=\"color: #902000;\">value</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">e</span>.<span class=\"va\" style=\"color: #19177c;\">target</span>.<span class=\"at\" style=\"color: #7d9029;\">value</span></a>",
            "<a class=\"sourceLine\" id=\"cb192-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb192-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb192-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    saveValue <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"at\" style=\"color: #7d9029;\">fetch</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;/my/endpoint&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb192-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">method</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;POST&#39;</span></a>",
            "<a class=\"sourceLine\" id=\"cb192-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">body</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">value</span></a>",
            "<a class=\"sourceLine\" id=\"cb192-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb192-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb192-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">componentDidMount</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb192-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">saveValue</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb192-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb192-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb192-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">componentDidUpdate</span>(prevProps<span class=\"op\" style=\"color: #666666;\">,</span> prevState) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb192-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (<span class=\"va\" style=\"color: #19177c;\">prevState</span>.<span class=\"at\" style=\"color: #7d9029;\">value</span> <span class=\"op\" style=\"color: #666666;\">!==</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">value</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb192-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">saveValue</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb192-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb192-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb192-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb192-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb192-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> value <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb192-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb192-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">&lt;</span>input value<span class=\"op\" style=\"color: #666666;\">={</span>value<span class=\"op\" style=\"color: #666666;\">}</span> onChange<span class=\"op\" style=\"color: #666666;\">={</span>handleChange<span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb192-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb192-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>👇</p>",
            "<div class=\"sourceCode\" id=\"cb193\" data-caption=\"useEffect hook\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb193-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> myComponent <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb193-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> [value<span class=\"op\" style=\"color: #666666;\">,</span> setValue] <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">useState</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;default&#39;</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb193-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb193-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> handleChange <span class=\"op\" style=\"color: #666666;\">=</span> (e) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"at\" style=\"color: #7d9029;\">setValue</span>(<span class=\"va\" style=\"color: #19177c;\">e</span>.<span class=\"va\" style=\"color: #19177c;\">target</span>.<span class=\"at\" style=\"color: #7d9029;\">value</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb193-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> saveValue <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"at\" style=\"color: #7d9029;\">fetch</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;/my/endpoint&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb193-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">method</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;POST&#39;</span></a>",
            "<a class=\"sourceLine\" id=\"cb193-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">body</span><span class=\"op\" style=\"color: #666666;\">:</span> value</a>",
            "<a class=\"sourceLine\" id=\"cb193-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb193-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb193-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">useEffect</span>(saveValue<span class=\"op\" style=\"color: #666666;\">,</span> [value])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb193-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb193-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">&lt;</span>input value<span class=\"op\" style=\"color: #666666;\">={</span>value<span class=\"op\" style=\"color: #666666;\">}</span> onChange<span class=\"op\" style=\"color: #666666;\">={</span>handleChange<span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb193-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>So much less code!</p>",
            "<p><code style=\"white-space: pre-wrap;\">useEffect</code> runs your function on <code style=\"white-space: pre-wrap;\">componentDidMount</code> and <code style=\"white-space: pre-wrap;\">componentDidUpdate</code>. And that second argument, the <code style=\"white-space: pre-wrap;\">[value]</code> part, tells it to run only when <code style=\"white-space: pre-wrap;\">value</code> changes.</p>",
            "<p>No need to double check with a conditional. If your effect updates the component itself through a state setter, the second argument acts as a <code style=\"white-space: pre-wrap;\">shouldComponentUpdate</code> of sorts.</p>",
            "<p>When you return a method from <code style=\"white-space: pre-wrap;\">useEffect</code>, it acts as a <code style=\"white-space: pre-wrap;\">componentWillUnmount</code>. Listening to, say, your mouse position looks like this:</p>",
            "<div class=\"sourceCode\" id=\"cb194\" data-caption=\"A mouse listener hook\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb194-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> [mouseX<span class=\"op\" style=\"color: #666666;\">,</span> setMouseX] <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">useState</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb194-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> handleMouse <span class=\"op\" style=\"color: #666666;\">=</span> (e) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"at\" style=\"color: #7d9029;\">setMouseX</span>(<span class=\"va\" style=\"color: #19177c;\">e</span>.<span class=\"at\" style=\"color: #7d9029;\">screenX</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb194-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb194-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"at\" style=\"color: #7d9029;\">useEffect</span>(() <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb194-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">window</span>.<span class=\"at\" style=\"color: #7d9029;\">addEventListener</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;mousemove&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> handleMouse)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb194-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">window</span>.<span class=\"at\" style=\"color: #7d9029;\">removeEventListener</span>(handleMouse)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb194-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span>)</a></code></pre></div>",
            "<p>Neat :okay_hand:</p>",
            "<h3 id=\"usecontext\">useContext</h3>",
            "<p><code style=\"white-space: pre-wrap;\">useContext</code> cleans up your render prop callbacky hell.</p>",
            "<div class=\"sourceCode\" id=\"cb195\" data-caption=\"Context without hooks\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb195-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> SomeContext <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">createContext</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb195-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb195-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb195-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb195-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">&lt;</span><span class=\"va\" style=\"color: #19177c;\">SomeContext</span>.<span class=\"at\" style=\"color: #7d9029;\">Consumer</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb195-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">{</span>state <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> ...<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb195-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">&lt;/<span class=\"va\" style=\"color: #19177c;\">SomeContext</span>.<span class=\"at\" style=\"color: #7d9029;\">Consumer</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a></code></pre></div>",
            "<p>👇</p>",
            "<div class=\"sourceCode\" id=\"cb196\" data-caption=\"Context with hooks\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb196-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> state <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">useContext</span>(SomeContext)</a></code></pre></div>",
            "<p>Context state becomes just a value in your function. React auto subscribes to all updates.</p>",
            "<p>And those are the core hooks. useState, useEffect, and useContext. You can use them to build almost everything. :okay_hand:</p>"
          ]
        },
        {
          "lectureTitle": "useMemo is your new best friend",
          "lectureLines": [
            "<h2 id=\"usememo-is-your-new-best-dataviz-friend\">useMemo is your new best dataviz friend</h2>",
            "<p>My favorite hook for making React and D3 work together is <code style=\"white-space: pre-wrap;\">useMemo</code>. It’s like a combination of <code style=\"white-space: pre-wrap;\">useEffect</code> and <code style=\"white-space: pre-wrap;\">useState</code>.</p>",
            "<p>Remember how the rest of this course focused on syncing D3’s internal state with React’s internal state and complications around large datasets and speeding up your D3 code to avoid recomputing on every render?</p>",
            "<p>All that goes away with <code style=\"white-space: pre-wrap;\">useMemo</code> – it memoizes values returned from a function and recomputes them when particular props change. Think of it like a cache.</p>",
            "<p>Say you have a D3 linear scale. You want to update its range when your component’s width changes.</p>",
            "<div class=\"sourceCode\" id=\"cb197\" data-caption=\"useMemo for a scale\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb197-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span> <span class=\"at\" style=\"color: #7d9029;\">MyComponent</span>(<span class=\"op\" style=\"color: #666666;\">{</span> data<span class=\"op\" style=\"color: #666666;\">,</span> width <span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb197-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> scale <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">useMemo</span>(() <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb197-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">scaleLinear</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb197-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            .<span class=\"at\" style=\"color: #7d9029;\">domain</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">1</span>])</a>",
            "<a class=\"sourceLine\" id=\"cb197-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            .<span class=\"at\" style=\"color: #7d9029;\">range</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> width])</a>",
            "<a class=\"sourceLine\" id=\"cb197-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    )<span class=\"op\" style=\"color: #666666;\">,</span> [width])</a>",
            "<a class=\"sourceLine\" id=\"cb197-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb197-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">&lt;</span>g<span class=\"op\" style=\"color: #666666;\">&gt;</span> ... &lt;/g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb197-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p><code style=\"white-space: pre-wrap;\">useMemo</code> takes a function that returns a value to be memoized. In this case that’s the linear scale.</p>",
            "<p>You create the scale same way you always would. Initiate a scale, set the domain, update the range. No fancypants trickery.</p>",
            "<p><code style=\"white-space: pre-wrap;\">useMemo</code>’s second argument works much like useEffect’s does: It tells React which values to observe for change. When that value changes, <code style=\"white-space: pre-wrap;\">useMemo</code> reruns your function and gets a new scale.</p>",
            "<p>Don’t rely on <code style=\"white-space: pre-wrap;\">useMemo</code> running only once however. Memoization is meant as a performance optimization, a hint if you will, not as a syntactical guarantee of uniqueness.</p>",
            "<p>And that’s exactly what we want. No more futzing around with <code style=\"white-space: pre-wrap;\">getDerivedStateFromProps</code> and <code style=\"white-space: pre-wrap;\">this.state</code>. Just <code style=\"white-space: pre-wrap;\">useMemo</code> and leave the rest to React. ✌️</p>"
          ]
        },
        {
          "lectureTitle": "my useD3 hook",
          "lectureLines": [
            "<h2 id=\"my-used3-hook\">my useD3 hook</h2>",
            "<p>Remember when we talked about D3 blackbox rendering? I built a hook for that so you don’t have to mess around with HOCs anymore 😃</p>",
            "<p>Read the full docs at <a href=\"https://d3blackbox.com/\">d3blackbox.com</a></p>",
            "<p>It works as a combination of <code style=\"white-space: pre-wrap;\">useRef</code> and <code style=\"white-space: pre-wrap;\">useEffect</code>. Hooks into component re-renders, gives you control of the anchor element, and re-runs your D3 render function on every component render.</p>",
            "<p>You use it like this:</p>",
            "<div class=\"sourceCode\" id=\"cb198\" data-caption=\"useD3 for quick integrations\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb198-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">{</span> useD3 <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;d3blackbox&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb198-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span> <span class=\"at\" style=\"color: #7d9029;\">renderSomeD3</span>(anchor) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb198-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">select</span>(anchor)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb198-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb198-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb198-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb198-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> MyD3Component <span class=\"op\" style=\"color: #666666;\">=</span> (<span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y <span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb198-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> refAnchor <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">useD3</span>(anchor <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"at\" style=\"color: #7d9029;\">renderSomeD3</span>(anchor))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb198-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">&lt;</span>g ref<span class=\"op\" style=\"color: #666666;\">={</span>refAnchor<span class=\"op\" style=\"color: #666666;\">}</span> transform<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"vs\" style=\"color: #4070a0;\">`translate(</span><span class=\"sc\" style=\"color: #4070a0;\">${</span>x<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">, </span><span class=\"sc\" style=\"color: #4070a0;\">${</span>y<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">)`</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb198-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">};</span></a></code></pre></div>",
            "<p>You’ll see how this works in more detail when we refactor the big example to hooks. We’ll use <code style=\"white-space: pre-wrap;\">useD3</code> to build axes.</p>"
          ]
        },
        {
          "lectureTitle": "Refactoring our big example to hooks",
          "lectureLines": [
            "<h2 id=\"refactoring-our-big-example-to-hooks\">Refactoring our big example to hooks</h2>",
            "<p>I considered writing this section out as text, but I don’t think that’s the best way to learn about refactoring. Too many moving pieces. You should watch the videos 😃</p>",
            "<p>As always, they’re cut so you can enjoy bitesized pieces.</p>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "Powerful animation with transitions and game loops combined",
      "lectures": [
        {
          "lectureTitle": "Merging transitions and game loops",
          "lectureLines": [
            "<p>Check this out!</p>",
            "<p><img src=\"https://i.imgur.com/hzKOMXi.gif\"></p>",
            "<p>It’s a donut chart that transitions to a bar chart. Same component, same React code, different radius. 29,905px instead of 728px. 🤯</p>",
            "<p>I <em>actually</em> got the idea from that flat earth documentary on Netflix. Behind the Curve. No joke.</p>",
            "<p>Why do flat earth people believe the earth is flat?</p>",
            "<p>It’s because the curve is soooooooo big that it looks flat.</p>",
            "<p>That gave me an idea for a client project. They asked me to build a smooth transition from a donut-shaped visualization to a bar chart shape.</p>",
            "<p>No idea how to do that so I stalled for weeks by building everything else first. Until one day I had an idea</p>",
            "<blockquote class=\"twitter-tweet\" data-lang=\"en\">",
            "<p lang=\"en\" dir=\"ltr\">",
            "I just discovered a new approach to React + D3 transitions 🤯 Of course this happens juuuust when I think React for Data Visualization is complete<br><br>Check this out, it combines the “game loop via state changes” with the “D3 runs transitions” approach <a href=\"https://t.co/mMglR4hDwp\">pic.twitter.com/mMglR4hDwp</a>",
            "</p>",
            "— Swizec Teller (<span class=\"citation\" data-cites=\"Swizec\">@Swizec</span>) <a href=\"https://twitter.com/Swizec/status/1102818340991430656?ref_src=twsrc%5Etfw\">March 5, 2019</a>",
            "</blockquote>",
            "<script async charset=\"utf-8\">",
            "Function&&Function.prototype&&Function.prototype.bind&&(/MSIE ([6789]|10)/.test(navigator.userAgent)||(window.__twttr&&window.__twttr.widgets&&window.__twttr.widgets.loaded&&window.twttr.widgets.load&&window.twttr.widgets.load(),window.__twttr&&window.__twttr.widgets&&window.__twttr.widgets.init||function(t){function e(e){for(var n,i,o=e[0],s=e[1],a😮,c😦];a<o.length;a++)i😮[a],r[i]&&c.push(r[i][0]),r[i]😮;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]😒[n]);for(u&&u(e);c.length😉c.shift()()}var n={},r={1😮};function i(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(t){var e😦],n=r[t];if(0!==n)if(n)e.push(n[2]);else{var o=new Promise(function(e,i){n=r[t👿e,i]});e.push(n[2]😮);var s,a=document.getElementsByTagName(\"head\")[0],u=document.createElement(\"script\");u.charset=\"utf-8\",u.timeout=120,i.nc&&u.setAttribute(\"nonce\",i.nc),u.src=function(t){return i.p+\"js/\"+({0:\"moment~timeline~tweet\",2:\"dm_button\",3:\"button\",4:\"moment\",5:\"periscope_on_air\",6:\"timeline\",7:\"tweet\"}[t]||t)+\".\"+{0:\"a20574004ea824b1c047f200045ffa1e\",2:\"b573518d7182437fcff1973b0098d272\",3:\"509719336ca39171c37a321231ccaf83\",4:\"f261877d67dc45f3972d303d6b32c138\",5:\"04369ab165b401d73b183f97ed7153fd\",6:\"49693ebcd57b08708ebca7502c7c343d\",7:\"73b7ab8a56ad3263cad8d36ba66467fc\"}[t]+\".js\"}(t),s=function(e){u.onerror=u.onload=null,clearTimeout(c);var n=r[t];if(0!==n){if(n){var i=e&&(\"load\"===e.type?\"missing\":e.type),o=e&&e.target&&e.target.src,s=new Error(\"Loading chunk \"+t+\" failed.\\n(\"+i+\": \"+o+\")\");s.type=i,s.request😮,n[1](s)}r[t]=void 0}};var c=setTimeout(function(){s({type:\"timeout\",target:u})},12e4);u.onerror=u.onload😒,a.appendChild(u)}return Promise.all(e)},i.m=t,i.c=n,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,\"a\",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p=\"https://platform.twitter.com/\",i.oe=function(t){throw console.error(t),t};var o=window.__twttrll=window.__twttrll||[],s😮.push.bind(o);o.push=e,o😮.slice();for(var a😮;a<o.length;a++)e(o[a]);var u😒;i(i.s=91)}([function(t,e,n){var r=n(1);function i(t,e){var n;for(n in t)t.hasOwnProperty&&!t.hasOwnProperty(n)||e(n,t[n]);return t}function o(t){return{}.toString.call(t).match(/\\s([a-zA-Z]+)/)[1].toLowerCase()}function s(t){return t===Object(t)}function a(t){var e;if(!s(t))return!1;if(Object.keys)return!Object.keys(t).length;for(e in t)if(t.hasOwnProperty(e))return!1;return!0}function u(t){return t?Array.prototype.slice.call(t)😦]}t.exports={aug:function(t){return u(arguments).slice(1).forEach(function(e){i(e,function(e,n){t[e]=n})}),t},async:function(t,e){r.setTimeout(function(){t.call(e||null)},0)},compact:function t(e){return i(e,function(n,r){s(r)&&(t(r),a(r)&&delete e[n]),void 0!==r&&null!==r&&\"\"!==r||delete e[n]}),e},contains:function(t,e){return!(!t||!t.indexOf)&&t.indexOf(e)>-1},forIn:i,isObject😒,isEmptyObject:a,toType😮,isType:function(t,e){return t==o(e)},toRealArray:u}},function(t,e){t.exports=window},function(t,e,n){var r=n(6);t.exports=function(){var t=this;this.promise=new r(function(e,n){t.resolve=e,t.reject=n})}},function(t,e,n){var r=n(11),i😕(?:^|(?:https?😃?\\/\\/(?:www\\.)?twitter\\.com(?::\\d+)?(?😕/intent\\/(?:follow|user)\\/?\\?screen_name😐(?😕/#!)?\\/))@?([\\w]+)(?😕?|&|$)/i,o😕(?:^|(?:https?😃?\\/\\/(?:www\\.)?twitter\\.com(?::\\d+)?\\/(?:#!\\/)?[\\w_]+\\/status(?:es)?\\/)(\\d+)/i,s😕^http(s?)😕/\\/(\\w+\\.)*twitter\\.com([😕]|$)/i,a😕^http(s?)😕/\\/pbs\\.twimg\\.com\\//,u😕^#?([^.,<>!\\s/#\\-()'\"]+)$/,c😕twitter\\.com(?::\\d{2,4})?\\/intent\\/(\\w+)/,d😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/\\w+\\/timelines\\/(\\d+)/i,l😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/i\\/moments\\/(\\d+)/i,f😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/(\\w+)\\/(?:likes|favorites)/i,h😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/(\\w+)\\/lists\\/([\\w-%]+)/i,p😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/i\\/live\\/(\\d+)/i,m😕^https?😕/\\/syndication\\.twitter\\.com\\/settings/i,v😕^https?😕/\\/(localhost|platform)\\.twitter\\.com(?::\\d+)?\\/widgets\\/widget_iframe\\.(.+)/i,g😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/search\\?q😦\\w+)/i;function w(t){return\"string\"==typeof t&&i.test(t)&&RegExp.$1.length<=20}function y(t){if(w(t))return RegExp.$1}function b(t,e){var n=r.decodeURL(t);if(e=e||!1,n.screen_name=y(t),n.screen_name)return r.url(\"https://twitter.com/intent/\"+(e?\"follow\":\"user\"),n)}function _(t){return\"string\"==typeof t&&u.test(t)}function E(t){return\"string\"==typeof t&&o.test(t)}t.exports={isHashTag:_,hashTag:function(t,e){if(e=void 0===e||e,_(t))return(e?\"#\":\"\")+RegExp.$1},isScreenName:w,screenName:y,isStatus:E,status:function(t){return E(t)&&RegExp.$1},intentForProfileURL:b,intentForFollowURL:function(t){return b(t,!0)},isTwitterURL:function(t){return s.test(t)},isTwimgURL:function(t){return a.test(t)},isIntentURL:function(t){return c.test(t)},isSettingsURL:function(t){return m.test(t)},isWidgetIframeURL:function(t){return v.test(t)},isSearchUrl:function(t){return g.test(t)},regexen:{profile:i},momentId:function(t){return l.test(t)&&RegExp.$1},collectionId:function(t){return d.test(t)&&RegExp.$1},intentType:function(t){return c.test(t)&&RegExp.$1},likesScreenName:function(t){return f.test(t)&&RegExp.$1},listScreenNameAndSlug:function(t){var e,n,r;if(h.test(t)){e=RegExp.$1,n=RegExp.$2;try{r=decodeURIComponent(n)}catch(t){}return{ownerScreenName:e,slug:r||n}}return!1},eventId:function(t){return p.test(t)&&RegExp.$1}}},function(t,e,n){var r=n(0),i😦!0,1,\"1\",\"on\",\"ON\",\"true\",\"TRUE\",\"yes\",\"YES\"],o😦!1,0,\"0\",\"off\",\"OFF\",\"false\",\"FALSE\",\"no\",\"NO\"];function s(t){return void 0!==t&&null!==t&&\"\"!==t}function a(t){return c(t)&&t%1==0}function u(t){return c(t)&&!a(t)}function c(t){return s(t)&&!isNaN(t)}function d(t){return r.contains(o,t)}function l(t){return r.contains(i,t)}t.exports={hasValue😒,isInt:a,isFloat:u,isNumber:c,isString:function(t){return\"string\"===r.toType(t)},isArray:function(t){return s(t)&&\"array\"==r.toType(t)},isTruthValue:l,isFalseValue😛,asInt:function(t){if(a(t))return parseInt(t,10)},asFloat:function(t){if(u(t))return t},asNumber:function(t){if(c(t))return t},asBoolean:function(t){return!(!s(t)||!l(t)&&(d(t)||!t))}}},function(t,e){t.exports=document},function(t,e,n){var r=n(1),i=n(20),o=n(45);i.hasPromiseSupport()||(r.Promise😮),t.exports=r.Promise},function(t,e,n){var r=n(0);t.exports=function(t,e){var n=Array.prototype.slice.call(arguments,2);return function(){var i=r.toRealArray(arguments);return t.apply(e,n.concat(i))}}},function(t,e){t.exports=location},function(t,e,n){var r=n(47);t.exports=new r(\"__twttr\")},function(t,e,n){var r=n(0),i😕\\b([\\w-_]+)\\b/g;function o(t){return new RegExp(\"\\\\b\"+t+\"\\\\b\",\"g\")}function s(t,e){t.classList?t.classList.add(e)😮(e).test(t.className)||(t.className+=\" \"+e)}function a(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(o(e),\" \")}function u(t,e){return t.classList?t.classList.contains(e):r.contains(c(t),e)}function c(t){return r.toRealArray(t.classList?t.classList:t.className.match(i))}t.exports={add😒,remove:a,replace:function(t,e,n){if(t.classList&&u(t,e))return a(t,e),void s(t,n);t.className=t.className.replace(o(e),n)},toggle:function(t,e,n){return void 0===n&&t.classList&&t.classList.toggle?t.classList.toggle(e,n)😦n?s(t,e):a(t,e),n)},present:u,list:c}},function(t,e,n){var r=n(4),i=n(0);function o(t){return encodeURIComponent(t).replace(/\\+/g,\"%2B\").replace(/'/g,\"%27\")}function s(t){return decodeURIComponent(t)}function a(t){var e😦];return i.forIn(t,function(t,n){var s😮(t);i.isType(\"array\",n)||(n😦n]),n.forEach(function(t){r.hasValue(t)&&e.push(s+\"=\"+o(t))})}),e.sort().join(\"&\")}function u(t){var e={};return t?(t.split(\"&\").forEach(function(t){var n=t.split(\"😊,r😒(n[0]),o😒(n[1]);if(2==n.length){if(!i.isType(\"array\",e[r]))return r in e?(e[r👿e[r]],void e[r].push(o)):void(e[r]😮);e[r].push(o)}}),e):{}}t.exports={url:function(t,e){return a(e).length>0?i.contains(t,\"?\")?t+\"&\"+a(e):t+\"?\"+a(e):t},decodeURL:function(t){var e=t&&t.split(\"?\");return 2==e.length?u(e[1]):{}},decode:u,encode:a,encodePart😮,decodePart😒}},function(t,e,n){var r=n(😎,i=n(1),o=n(0),s={},a😮.contains(r.href,\"tw_debug=true\");function u(){}function c(){}function d(){return i.performance&&+i.performance.now()||+new Date}function l(t,e){if(i.console&&i.console[t])switch(e.length){case 1:i.console[t](e[0]);break;case 2:i.console[t](e[0],e[1]);break;case 3:i.console[t](e[0],e[1],e[2]);break;case 4:i.console[t](e[0],e[1],e[2],e[3]);break;case 5:i.console[t](e[0],e[1],e[2],e[3],e[4]);break;default😮!==e.length&&i.console.warn&&i.console.warn(\"too many params passed to logger.\"+t)}}t.exports={devError:u,devInfo:c,devObject:function(t,e){},publicError:function(){l(\"error\",o.toRealArray(arguments))},publicLog:function(){l(\"info\",o.toRealArray(arguments))},time:function(t){a&&(s[t]😛())},timeEnd:function(t){a&&s[t]&&(d(),s[t])}}},function(t,e,n){var r=n(19),i=n(4),o=n(11),s=n(0),a=n(116);t.exports=function(t){var e=t.href&&t.href.split(\"?\")[1],n=e?o.decode(e):{},u={lang:a(t),width:t.getAttribute(\"data-width\")||t.getAttribute(\"width\"),height:t.getAttribute(\"data-height\")||t.getAttribute(\"height\"),related:t.getAttribute(\"data-related\"),partner:t.getAttribute(\"data-partner\")};return i.asBoolean(t.getAttribute(\"data-dnt\"))&&r.setOn(),s.forIn(u,function(t,e){var r=n[t];n[t]=i.hasValue(r)?r:e}),s.compact(n)}},function(t,e,n){var r=n(79),i=n(22);t.exports=function(){var t=\"data-twitter-extracted-\"+i.generate();return function(e,n){return r(e,n).filter(function(e){return!e.hasAttribute(t)}).map(function(e){return e.setAttribute(t,\"true\"),e})}}},function(t,e){function n(t,e,n,r,i,o){this.factory=t,this.Sandbox=e,this.srcEl😮,this.targetEl=i,this.parameters=r,this.className=n}n.prototype.destroy=function(){this.srcEl=this.targetEl=null},t.exports=n},function(t,e,n){var r=n(6),i=n(49),o=n(19),s=n(4),a=n(0);t.exports=function(t,e,n){var u;return t=t||[],e=e||{},u=\"ƒ(\"+t.join(\", \")+\", target, [options]);\",function(){var c,d,l,f,h=Array.prototype.slice.apply(arguments,[0,t.length]),p=Array.prototype.slice.apply(arguments,[t.length]);return p.forEach(function(t){t&&(t.nodeType!==Node.ELEMENT_NODE?a.isType(\"function\",t)?c=t:a.isType(\"object\",t)&&(d=t):l=t)}),h.length!==t.length||0===p.length?(c&&a.async(function(){c(!1)}),r.reject(new Error(\"Not enough parameters. Expected: \"+u))):l?(d=a.aug({},d||{},e),t.forEach(function(t){d[t]=h.shift()}),s.asBoolean(d.dnt)&&o.setOn(),f=i.addWidget(n(d,l)),c&&f.then(c,function(){c(!1)}),f)😦c&&a.async(function(){c(!1)}),r.reject(new Error(\"No target element specified. Expected: \"+u)))}}},function(t,e,n){var r=n(99),i=n(2),o=n(0);function s(t,e){return function(){try{e.resolve(t.call(this))}catch(t){e.reject(t)}}}t.exports={sync:function(t,e){t.call(e)},read:function(t,e){var n=new i;return r.read(s(t,n),e),n.promise},write:function(t,e){var n=new i;return r.write(s(t,n),e),n.promise},defer:function(t,e,n){var a=new i;return o.isType(\"function\",t)&&(n=e,e=t,t=1),r.defer(t,s(e,a),n),a.promise}}},function(t,e,n){var r=n(9),i😦\"https://syndication.twitter.com\",\"https://cdn.syndication.twimg.com\",\"https://localhost.twitter.com:8444\"],o😦\"https://syndication.twitter.com\",\"https://localhost.twitter.com:8445\"],s=function(t,e){return t.indexOf(e)>-1},a=function(){var t=r.get(\"backendHost\");return t&&s(i,t)?t:\"https://cdn.syndication.twimg.com\"},u=function(){var t=r.get(\"settingsSvcHost\");return t&&s(o,t)?t:\"https://syndication.twitter.com\"};function c(t,e){var n😦t];return e.forEach(function(t){n.push(function(t){var e😦t||\"\").toString(),n=\"/\"===e.slice(0,1)?1😮,r=function(t){return\"/\"===t.slice(-1)}(e)?-1:void 0;return e.slice(n,r)}(t))}),n.join(\"/\")}t.exports={cookieConsent:function(t){var e=t||[];return e.unshift(\"cookie/consent\"),c(u(),e)},eventVideo:function(t){var e=t||[];return e.unshift(\"video/event\"),c(a(),e)},grid:function(t){var e=t||[];return e.unshift(\"grid/collection\"),c(a(),e)},moment:function(t){var e=t||[];return e.unshift(\"moments\"),c(a(),e)},settings:function(t){var e=t||[];return e.unshift(\"settings\"),c(u(),e)},timeline:function(t){var e=t||[];return e.unshift(\"timeline\"),c(a(),e)},tweetBatch:function(t){var e=t||[];return e.unshift(\"tweets.json\"),c(a(),e)},video:function(t){var e=t||[];return e.unshift(\"widgets/video\"),c(a(),e)}}},function(t,e,n){var r=n(5),i=n(😎,o=n(35),s=n(77),a=n(4),u=n(32),c=!1,d😕https?😕/\\/([^/]+).*/i;t.exports={setOn:function(){c=!0},enabled:function(t,e){return!!(c||a.asBoolean(u.val(\"dnt\"))||s.isUrlSensitive(e||i.host)||o.isFramed()&&s.isUrlSensitive(o.rootDocumentLocation())||(t😛.test(t||r.referrer)&&RegExp.$1)&&s.isUrlSensitive(t))}}},function(t,e,n){var r=n(5),i=n(12),o=n(92),s=n(1),a=n(0),u😮.userAgent;function c(t){return/(Trident|MSIE|Edge[/ ]?\\d)/.test(t=t||u)}t.exports={retina:function(t){return(t=t||s).devicePixelRatio?t.devicePixelRatio>=1.5:!!t.matchMedia&&t.matchMedia(\"only screen and (min-resolution: 144dpi)\").matches},anyIE:c,ie9:function(t){return/MSIE 9/.test(t=t||u)},ie10:function(t){return/MSIE 10/.test(t=t||u)},ios:function(t){return/(iPad|iPhone|iPod)/.test(t=t||u)},android:function(t){return/^Mozilla\\/5\\.0 \\(Linux; (U; )?Android/.test(t=t||u)},canPostMessage:function(t,e){return t=t||s,e=e||u,t.postMessage&&!(c(e)&&t.opener)},touch:function(t,e,n){return t=t||s,e=e||o,n=n||u,\"ontouchstart\"in t||/Opera Mini/.test(n)||e.msMaxTouchPoints>0},cssTransitions:function(){var t=r.body.style;return void 0!==t.transition||void 0!==t.webkitTransition||void 0!==t.mozTransition||void 0!==t.oTransition||void 0!==t.msTransition},hasPromiseSupport:function(){return!!(s.Promise&&s.Promise.resolve&&s.Promise.reject&&s.Promise.all&&s.Promise.race&&(new s.Promise(function(e){t=e}),a.isType(\"function\",t)));var t},hasIntersectionObserverSupport:function(){return!!s.IntersectionObserver},hasPerformanceInformation:function(){return s.performance&&s.performance.getEntriesByType},hasLocalStorageSupport:function(){try{return s.localStorage.setItem(\"local_storage_support_test\",\"true\"),void 0!==s.localStorage}catch(t){return i.devError(\"window.localStorage is not supported:\",t),!1}}}},function(t,e,n){var r=n(6),i=n(2);function o(t,e){return t.then(e,e)}function s(t){return t instanceof r}t.exports={always😮,allResolved:function(t){var e;return void 0===t?r.reject(new Error(\"undefined is not an object\")):Array.isArray(t)?(e=t.length)?new r(function(n,r){var i😮,o😦];function a(){(i+=1)===e&&(0===o.length?r():n(o))}function u(t){o.push(t),a()}t.forEach(function(t){s(t)?t.then(u,a):u(t)})}):r.resolve([]):r.reject(new Error(\"Type error\"))},some:function(t){var e;return e😦t=t||[]).length,t=t.filter(s),e?e!==t.length?r.reject(\"non-Promise passed to .some\"):new r(function(e,n){var r😮;function i(){(r+=1)===t.length&&n()}t.forEach(function(t){t.then(e,i)})}):r.reject(\"no promises passed to .some\")},isPromise😒,allSettled:function(t){function e(){}return r.all((t||[]).map(function(t){return o(t,e)}))},timeout:function(t,e){var n=new i;return setTimeout(function(){n.reject(new Error(\"Promise timed out\"))},e),t.then(function(t){n.resolve(t)},function(t){n.reject(t)}),n.promise}}},function(t,e){var n=\"i\",r😮,i😮;t.exports={generate:function(){return n+String(+new Date)+Math.floor(1e5*Math.random())+r++},deterministic:function(){return n+String(i++)}}},function(t,e,n){var r=n(46),i=n(48),o=n(0);t.exports😮.aug(r.get(\"events\")||{},i.Emitter)},function(t,e,n){var r=n(25),i=n(107);t.exports=r.build([i])},function(t,e,n){var r=n(37),i=n(104),o=n(7);(r=Object.create(r)).build😮(r.build,null,i),t.exports=r},function(t,e,n){var r=n(37),i=n(38),o=n(7);(r=Object.create(r)).build😮(r.build,null,i),t.exports=r},function(t,e,n){var r=n(81),i=n(73),o=n(82),s=n(😎,a=n(68),u=n(72),c=n(19),d=n(4),l=n(22),f=n(0);function h(t){if(!t||!t.headers)throw new Error(\"unexpected response schema\");return{html:t.body,config:t.config,pollInterval:1e3*parseInt(t.headers.xPolling,10)||null,maxCursorPosition:t.headers.maxPosition,minCursorPosition:t.headers.minPosition}}function p(t){if(t&&t.headers)throw new Error(t.headers.status);throw t instanceof Error?t:new Error(t)}t.exports=function(t){t.params({instanceId:{required:!0,fallback:l.deterministic},lang:{required:!0,transform:a.matchLanguage,fallback:\"en\"},tweetLimit:{transform😛.asInt}}),t.defineProperty(\"endpoint\",{get:function(){throw new Error(\"endpoint not specified\")}}),t.defineProperty(\"pollEndpoint\",{get:function(){return this.endpoint}}),t.define(\"cbId\",function(t){var e=t?\"_new\":\"_old\";return\"tl_\"+this.params.instanceId+\"_\"+this.id+e}),t.define(\"queryParams\",function(){return{lang:this.params.lang,tz:u.getTimezoneOffset(),t:r(),domain😒.host,tweet_limit:this.params.tweetLimit,dnt:c.enabled()}}),t.define(\"fetch\",function(){return i.fetch(this.endpoint,this.queryParams(),o,this.cbId()).then(h,p)}),t.define(\"poll\",function(t,e){var n,r;return n={since_id😦t=t||{}).sinceId,max_id:t.maxId,min_position:t.minPosition,max_position:t.maxPosition},r=f.aug(this.queryParams(),n),i.fetch(this.pollEndpoint,r,o,this.cbId(e)).then(h,p)})}},function(t,e,n){var r=n(48).makeEmitter();t.exports={emitter:r,START:\"start\",ALL_WIDGETS_RENDER_START:\"all_widgets_render_start\",ALL_WIDGETS_RENDER_END:\"all_widgets_render_end\",ALL_WIDGETS_AND_IMAGES_LOADED:\"all_widgets_and_images_loaded\"}},function(t,e,n){var r=n(5),i=n(0);t.exports=function(t,e,n){var o;if(n=n||r,t=t||{},e=e||{},t.name){try{o=n.createElement('<iframe name=\"'+t.name+'\"></iframe>')}catch(e){(o=n.createElement(\"iframe\")).name=t.name}delete t.name}else o=n.createElement(\"iframe\");return t.id&&(o.id=t.id,delete t.id),o.allowtransparency=\"true\",o.scrolling=\"no\",o.setAttribute(\"frameBorder\",0),o.setAttribute(\"allowTransparency\",!0),i.forIn(t,function(t,e){o.setAttribute(t,e)}),i.forIn(e,function(t,e){o.style[t]=e}),o}},function(t,e,n){var r=n(1).JSON;t.exports={stringify:r.stringify||r.encode,parse:r.parse||r.decode}},function(t,e,n){var r=n(0),i=n(40);t.exports={closest:function t(e,n,o){var s;if(n)return o😮||n&&n.ownerDocument,s=r.isType(\"function\",e)?e:function(t){return function(e){return!!e.tagName&&i(e,t)}}(e),n===o?s(n)?n:void 0😒(n)?n:t(s,n.parentNode,o)}}},function(t,e,n){var r,i=n(5);function o(t){var e,n,o,s😮;for(r={},e😦t=t||i).getElementsByTagName(\"meta\");e[s];s++){if(n=e[s],/^twitter😕.test(n.getAttribute(\"name\")))o=n.getAttribute(\"name\").replace(/^twitter😕,\"\");else{if(!/^twitter😕.test(n.getAttribute(\"property\")))continue;o=n.getAttribute(\"property\").replace(/^twitter😕,\"\")}r[o]=n.getAttribute(\"content\")||n.getAttribute(\"value\")}}o(),t.exports={init😮,val:function(t){return r[t]}}},function(t,e,n){var r=n(5),i=n(30),o=n(19),s=n(0),a=n(41),u=n(9),c=n(3),d=n(31),l=a.version,f=u.get(\"clientEventEndpoint\")||\"https://syndication.twitter.com/i/jot\",h=1;function p(t){return s.aug({client:\"tfw\"},t||{})}function m(t,e,n){return e=e||{},s.aug({},e,{_category_:t,triggered_on:e.triggered_on||+new Date,dnt😮.enabled(n)})}t.exports={extractTermsFromDOM:function t(e,n){var r;return n=n||{},e&&e.nodeType===Node.ELEMENT_NODE?((r=e.getAttribute(\"data-scribe\"))&&r.split(\" \").forEach(function(t){var e=t.trim().split(\"😊,r=e[0],i=e[1];r&&i&&!n[r]&&(n[r]=i)}),t(e.parentNode,n)):n},clickEventElement:function(t){var e😛.closest(\"[data-expanded-url]\",t),n=e&&e.getAttribute(\"data-expanded-url\");return n&&c.isTwitterURL(n)?\"twitter_url\":\"url\"},flattenClientEventPayload:function(t,e){return s.aug({},e,{event_namespace:t})},formatGenericEventData:m,formatClientEventData:function(t,e,n){var i=t&&t.widget_origin||r.referrer;return(t=m(\"tfw_client_event\",t,i)).client_version=l,t.format_version=void 0!==n?n:1,e||(t.widget_origin=i),t},formatClientEventNamespace😛,formatTweetAssociation:function(t,e){var n={};return(e=e||{}).association_namespace😛(t),n[h]=e,n},noticeSeen:function(t){return\"notice\"===t.element&&\"seen\"===t.action},splitLogEntry:function(t){var e,n,r,i,o;return t.item_ids&&t.item_ids.length>1?(e=Math.floor(t.item_ids.length/2),n=t.item_ids.slice(0,e),r={},i=t.item_ids.slice(e),o={},n.forEach(function(e){r[e]=t.item_details[e]}),i.forEach(function(e){o[e]=t.item_details[e]}),[s.aug({},t,{item_ids:n,item_details:r}),s.aug({},t,{item_ids:i,item_details😮})])😦t]},stringify:function(t){var e,n=Array.prototype.toJSON;return delete Array.prototype.toJSON,e=i.stringify(t),n&&(Array.prototype.toJSON=n),e},AUDIENCE_ENDPOINT:\"https://syndication.twitter.com/i/jot/syndication\",CLIENT_EVENT_ENDPOINT:f,RUFOUS_REDIRECT:\"https://platform.twitter.com/jot.html\"}},function(t,e,n){var r=n(10),i={},o=-1,s={};function a(t){var e=t.getAttribute(\"data-twitter-event-id\");return e||(t.setAttribute(\"data-twitter-event-id\",++o),o)}function u(t,e,n){var r😮,i=t&&t.length||0;for(r😮;r<i;r++)if(t[r].call(e,n,e),n.ceaseImmediately)return!1}function c(t,e,n){for(var i=n||t.target||t.srcElement,o=r.list(i).map(function(t){return\".\"+t}).concat(i.tagName),s😮,a😮.length;s<a;s++)if(!1===u(e[o[s]],i,t))return;t.cease||i!==this&&c.call(this,t,e,i.parentElement||i.parentNode)}function d(t,e,n,r){function i(r){c.call(t,r,n[e])}!function(t,e,n,r){t.id&&(s[t.id]😒[t.id]||[],s[t.id].push({el:t,listener:e,type:n,rootId:r}))}(t,i,e,r),t.addEventListener(e,i,!1)}function l(t){t&&t.preventDefault?t.preventDefault():t.returnValue=!1}function f(t){t&&(t.cease=!0)&&t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}t.exports={stop:function(t){return f(t),l(t),!1},stopPropagation:f,stopImmediatePropagation:function(t){t&&(t.ceaseImmediately=!0,f(t),t.stopImmediatePropagation())},preventDefault:l,delegate:function(t,e,n,r){var o=a(t);i[o]=i[o]||{},i[o][e]||(i[o][e]={},d(t,e,i[o],o)),i[o][e][n]=i[o][e][n]||[],i[o][e][n].push(r)},simulate:function(t,e,n){var r=a(e),o=i[r]&&i[r];c.call(e,{target:n},o[t])},removeDelegatesForWidget:function(t){var e😒[t];e&&(e.forEach(function(t){t.el.removeEventListener(t.type,t.listener,!1),delete i[t.rootId]}),delete s[t])}}},function(t,e,n){var r=n(😎,i=n(76),o=n(0),s=i.getCanonicalURL()||r.href,a😒;t.exports={isFramed:function(){return s!==a},rootDocumentLocation:function(t){return t&&o.isType(\"string\",t)&&(s=t),s},currentDocumentLocation:function(){return a}}},function(t,e,n){var r=n(75),i=n(101),o=n(78),s=n(33),a=new(n(109))(function(t){var e,n,a;if(0!==t.length){if(u(t))return c(t);e=r(t,function(t){return s.noticeSeen(t.input.namespace)}),n=e.true,a=e.false,n&&n.length>0&&(n=n.slice(0,1),o.canFlushOneItem(n[0])||(n[0].input.data.message=\"\"),c(n)),a&&(u(a)?c:function(t){i.init(),t.forEach(function(t){var e=t.input.namespace,n=t.input.data,r=t.input.offsite,o=t.input.version;i.clientEvent(e,n,r,o)}),i.flush().then(function(){t.forEach(function(t){t.taskDoneDeferred.resolve()})},function(){t.forEach(function(t){t.taskDoneDeferred.reject()})})})(a)}});function u(t){return 1===t.length&&o.canFlushOneItem(t[0])}function c(t){t.forEach(function(t){var e=t.input.namespace,n=t.input.data,r=t.input.offsite,i=t.input.version;o.clientEvent(e,n,r,i),t.taskDoneDeferred.resolve()})}t.exports={scribe:function(t,e,n,r){return a.add({namespace:t,data:e,offsite:n,version:r})},pause:function(){a.pause()},resume:function(){a.resume()}}},function(t,e,n){var r=n(102),i=n(103),o=n(0);t.exports={couple:function(){return o.toRealArray(arguments)},build:function(t,e,n){var o=new t;return(e=i(r(e||[]))).forEach(function(t){t.call(null,o)}),o.build(n)}}},function(t,e,n){var r=n(105),i=n(0),o=n(39);function s(){this.Component=this.factory(),this._adviceArgs😦],this._lastArgs😦]}i.aug(s.prototype,{factory😮,build:function(t){var e=this;return this.Component,i.aug(this.Component.prototype.boundParams,t),this._adviceArgs.concat(this._lastArgs).forEach(function(t){(function(t,e,n){var r=this[e];if(!r)throw new Error(e+\" does not exist\");this[e]=t(r,n)}).apply(e.Component.prototype,t)}),delete this._lastArgs,delete this._adviceArgs,this.Component},params:function(t){var e=this.Component.prototype.paramConfigs;t=t||{},this.Component.prototype.paramConfigs=i.aug({},t,e)},define:function(t,e){if(t in this.Component.prototype)throw new Error(t+\" has previously been defined\");this.override(t,e)},defineStatic:function(t,e){this.Component[t]=e},override:function(t,e){this.Component.prototype[t]=e},defineProperty:function(t,e){if(t in this.Component.prototype)throw new Error(t+\" has previously been defined\");this.overrideProperty(t,e)},overrideProperty:function(t,e){var n=i.aug({configurable:!0},e);Object.defineProperty(this.Component.prototype,t,n)},before:function(t,e){this._adviceArgs.push([r.before,t,e])},after:function(t,e){this._adviceArgs.push([r.after,t,e])},around:function(t,e){this._adviceArgs.push([r.around,t,e])},last:function(t,e){this._lastArgs.push([r.after,t,e])}}),t.exports😒},function(t,e,n){var r=n(0);function i(){return!0}function o(t){return t}t.exports=function(){function t(t){var e=this;t=t||{},this.params=Object.keys(this.paramConfigs).reduce(function(n,s){var a😦],u=e.boundParams,c=e.paramConfigs[s],d=c.validate||i,l=c.transform||o;if(s in u&&a.push(u[s]),s in t&&a.push(t[s]),a=\"fallback\"in c?a.concat(c.fallback):a,n[s]=function(t,e,n){var i=null;return t.some(function(t){if(t=r.isType(\"function\",t)?t():t,e(t))return i=n(t),!0}),i}(a,d,l),c.required&&null==n[s])throw new Error(s+\" is a required parameter\");return n},{}),this.initialize()}return r.aug(t.prototype,{paramConfigs:{},boundParams:{},initialize:function(){}}),t}},function(t,e,n){var r=n(1).HTMLElement,i=r.prototype.matches||r.prototype.matchesSelector||r.prototype.webkitMatchesSelector||r.prototype.mozMatchesSelector||r.prototype.msMatchesSelector||r.prototype.oMatchesSelector;t.exports=function(t,e){if(i)return i.call(t,e)}},function(t){t.exports={version:\"7e980dd:1559715853415\"}},function(t,e,n){var r,i=n(10),o=n(5),s=n(1),a=n(32),u=n(50),c=n(4),d=n(22),l=\"csptest\";t.exports={inlineStyle:function(){var t=l+d.generate(),e😮.createElement(\"div\"),n😮.createElement(\"style\"),f=\".\"+t+\" { visibility: hidden; }\";return!!o.body&&(c.asBoolean(a.val(\"widgets:csp\"))&&(r=!1),void 0!==r?r😦e.style.display=\"none\",i.add(e,t),n.type=\"text/css\",n.appendChild(o.createTextNode(f)),o.body.appendChild(n),o.body.appendChild(e),r=\"hidden\"===s.getComputedStyle(e).visibility,u(e),u(n),r))}}},function(t,e,n){var r=n(1);t.exports=function(t,e,n){var i,o😮;return n=n||null,function s(){var a=n||this,u=arguments,c=+new Date;if(r.clearTimeout(i),c-o>e)return o=c,void t.apply(a,u);i=r.setTimeout(function(){s.apply(a,u)},e)}}},function(t,e){t.exports=function(t){var e=t.getBoundingClientRect();return{width:e.width,height:e.height}}},function(t,e,n){",
            "/*!",
            " * @overview es6-promise - a tiny implementation of Promises/A+.",
            " * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)",
            " * @license   Licensed under MIT license",
            " *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE",
            " * @version   v4.2.5+7f2b526d",
            " */var r;r=function(){\"use strict\";function t(t){return\"function\"==typeof t}var e=Array.isArray?Array.isArray:function(t){return\"[object Array]\"===Object.prototype.toString.call(t)},n😮,r=void 0,i=void 0,o=function(t,e){f[n]=t,f[n+1]=e,2===(n+=2)&&(i?i(h):w())},s=\"undefined\"!=typeof window?window:void 0,a😒||{},u=a.MutationObserver||a.WebKitMutationObserver,c=\"undefined\"==typeof self&&\"undefined\"!=typeof process&&\"[object process]\"==={}.toString.call(process),d=\"undefined\"!=typeof Uint8ClampedArray&&\"undefined\"!=typeof importScripts&&\"undefined\"!=typeof MessageChannel;function l(){var t=setTimeout;return function(){return t(h,1)}}var f=new Array(1e3);function h(){for(var t😮;t<n;t+=2)(0,f[t])(f[t+1]),f[t]=void 0,f[t+1]=void 0;n😮}var p,m,v,g,w=void 0;function y(t,e){var n=this,r=new this.constructor(E);void 0===r[_]&&k(r);var i=n._state;if(i){var s=arguments[i-1];o(function(){return O(i,r,s,n._result)})}else I(n,r,t,e);return r}function b(t){if(t&&\"object\"==typeof t&&t.constructor===this)return t;var e=new this(E);return N(e,t),e}c?w=function(){return process.nextTick(h)}:u?(m😮,v=new u(h),g=document.createTextNode(\"\"),v.observe(g,{characterData:!0}),w=function(){g.data=m=++m%2})😛?((p=new MessageChannel).port1.onmessage=h,w=function(){return p.port2.postMessage(0)}):w=void 0===s?function(){try{var t=Function(\"return this\")().require(\"vertx\");return void 0!==(r=t.runOnLoop||t.runOnContext)?function(){r(h)}:l()}catch(t){return l()}}():l();var _=Math.random().toString(36).substring(2);function E(){}var x=void 0,A=1,T=2,S={error:null};function R(t){try{return t.then}catch(t){return S.error=t,S}}function C(e,n,r){n.constructor===e.constructor&&r===y&&n.constructor.resolve===b?function(t,e){e._state===A?j(t,e._result):e._state===T?L(t,e._result):I(e,void 0,function(e){return N(t,e)},function(e){return L(t,e)})}(e,n):r===S?(L(e,S.error),S.error=null):void 0===r?j(e,n):t(r)?function(t,e,n){o(function(t){var r=!1,i=function(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}(n,e,function(n){r||(r=!0,e!==n?N(t,n):j(t,n))},function(e){r||(r=!0,L(t,e))},t._label);!r&&i&&(r=!0,L(t,i))},t)}(e,n,r):j(e,n)}function N(t,e){var n,r;t===e?L(t,new TypeError(\"You cannot resolve a promise with itself\"))😦r=typeof(n=e),null===n||\"object\"!==r&&\"function\"!==r?j(t,e):C(t,e,R(e)))}function P(t){t._onerror&&t._onerror(t._result),D(t)}function j(t,e){t._state===x&&(t._result=e,t._state=A,0!==t._subscribers.length&&o(D,t))}function L(t,e){t._state===x&&(t._state=T,t._result=e,o(P,t))}function I(t,e,n,r){var i=t._subscribers,s=i.length;t._onerror=null,i[s]=e,i[s+A]=n,i[s+T]=r,0===s&&t._state&&o(D,t)}function D(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,i=void 0,o=t._result,s😮;s<e.length;s+👨)r=e[s],i=e[s+n],r?O(n,r,i,o):i(o);t._subscribers.length😮}}function O(e,n,r,i){var o=t(r),s=void 0,a=void 0,u=void 0,c=void 0;if(o){if((s=function(t,e){try{return t(e)}catch(t){return S.error=t,S}}(r,i))===S?(c=!0,a😒.error,s.error=null):u=!0,n===s)return void L(n,new TypeError(\"A promises callback cannot return that same promise.\"))}else s=i,u=!0;n._state!==x||(o&&u?N(n,s):c?L(n,a):e===A?j(n,s):e===T&&L(n,s))}var z😮;function k(t){t[_]😒++,t._state=void 0,t._result=void 0,t._subscribers😦]}var M=function(){function t(t,n){this._instanceConstructor=t,this.promise=new t(E),this.promise[_]||k(this.promise),e(n)?(this.length=n.length,this._remaining=n.length,this._result=new Array(this.length),0===this.length?j(this.promise,this._result)😦this.length=this.length||0,this._enumerate(n),0===this._remaining&&j(this.promise,this._result))):L(this.promise,new Error(\"Array Methods must be provided an Array\"))}return t.prototype._enumerate=function(t){for(var e😮;this._state===x&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===b){var i=R(t);if(i===y&&t._state!==😆this._settledAt(t._state,e,t._result);else if(\"function\"!=typeof i)this._remaining--,this._result[e]=t;else if(n===U){var o=new n(E);C(o,t,i),this._willSettleAt(o,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},t.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===x&&(this._remaining--,t===T?L(r,n):this._result[e]=n),0===this._remaining&&j(r,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;I(t,void 0,function(t){return n._settledAt(A,e,t)},function(t){return n._settledAt(T,e,t)})},t}(),U=function(){function e(t){this[_]😒++,this._result=this._state=void 0,this._subscribers😦],E!==t&&(\"function\"!=typeof t&&function(){throw new TypeError(\"You must pass a resolver function as the first argument to the promise constructor\")}(),this instanceof e?function(t,e){try{e(function(e){N(t,e)},function(e){L(t,e)})}catch(e){L(t,e)}}(this,t):function(){throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\")}())}return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.finally=function(e){var n=this.constructor;return t(e)?this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})}):this.then(e,e)},e}();return U.prototype.then=y,U.all=function(t){return new M(this,t).promise},U.race=function(t){var n=this;return e(t)?new n(function(e,r){for(var i=t.length,o😮;o<i;o++)n.resolve(t[o]).then(e,r)}):new n(function(t,e){return e(new TypeError(\"You must pass an array to race.\"))})},U.resolve=b,U.reject=function(t){var e=new this(E);return L(e,t),e},U._setScheduler=function(t){i=t},U._setAsap=function(t){o=t},U._asap😮,U.polyfill=function(){var t=void 0;if(\"undefined\"!=typeof global)t=global;else if(\"undefined\"!=typeof self)t=self;else try{t=Function(\"return this\")()}catch(t){throw new Error(\"polyfill failed because global object is unavailable in this environment\")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if(\"[object Promise]\"===n&&!e.cast)return}t.Promise=U},U.Promise=U,U},t.exports=r()},function(t,e,n){var r=n(47);t.exports=new r(\"twttr\")},function(t,e,n){var r=n(1),i=n(0);function o(t){return i.isType(\"string\",t)?t.split(\".\"):i.isType(\"array\",t)?t😦]}function s(t,e){(e=e||r)[t]=e[t]||{},Object.defineProperty(this,\"base\",{value:e[t]}),Object.defineProperty(this,\"name\",{value:t})}i.aug(s.prototype,{get:function(t){return o(t).reduce(function(t,e){if(i.isObject(t))return t[e]},this.base)},set:function(t,e,n){var r😮(t),s=function(t,e){var n😮(e).slice(0,-1);return n.reduce(function(t,e,r){if(t[e]=t[e]||{},!i.isObject(t[e]))throw new Error(n.slice(0,r+1).join(\".\")+\" is already defined with a value.\");return t[e]},t)}(this.base,t),a=r.slice(-1);return n&&a in s?s[a]😒[a]=e},init:function(t,e){return this.set(t,e,!0)},unset:function(t){var e😮(t),n=this.get(e.slice(0,-1));n&&delete n[e.slice(-1)]},aug:function(t){var e=this.get(t),n=i.toRealArray(arguments).slice(1);if(e=void 0!==e?e:{},n.unshift(e),!n.every(i.isObject))throw new Error(\"Cannot augment non-object.\");return this.set(t,i.aug.apply(null,n))},call:function(t){var e=this.get(t),n=i.toRealArray(arguments).slice(1);if(!i.isType(\"function\",e))throw new Error(\"Function \"+t+\"does not exist.\");return e.apply(null,n)},fullPath:function(t){var e😮(t);return e.unshift(this.name),e.join(\".\")}}),t.exports😒},function(t,e,n){var r=n(0),i=n(7),o={bind:function(t,e){return this._handlers=this._handlers||{},this._handlers[t]=this._handlers[t]||[],this._handlers[t].push(e)},unbind:function(t,e){var n;this._handlers&&this._handlers[t]&&(e?(n=this._handlers[t].indexOf(e))>😮&&this._handlers[t].splice(n,1):this._handlers[t👿])},trigger:function(t,e){var n=this._handlers&&this._handlers[t];(e=e||{}).type=t,n&&n.forEach(function(t){r.async(i(t,this,e))})}};t.exports={Emitter😮,makeEmitter:function(){return r.aug(function(){},o)}}},function(t,e,n){var r=n(98),i=n(74),o=n(6),s=n(21),a=n(7),u=n(0),c=new i(function(t){var e=function(t){return t.reduce(function(t,e){return t[e.className]=t[e.className]||[],t[e.className].push(e),t},{})}(t.map(r.fromRawTask));u.forIn(e,function(t,e){s.allSettled(e.map(function(t){return t.initialize()})).then(function(){e.forEach(function(t){o.all([t.hydrate(),t.insertIntoDom()]).then(a(t.render,t)).then(a(t.success,t),a(t.fail,t))})})})});t.exports={addWidget:function(t){return c.add(t)}}},function(t,e,n){var r=n(17);t.exports=function(t){return r.write(function(){t&&t.parentNode&&t.parentNode.removeChild(t)})}},function(t,e,n){n(12),t.exports={log:function(t,e){}}},function(t,e,n){var r=n(1);function i(t){return(t=t||r).getSelection&&t.getSelection()}t.exports={getSelection:i,getSelectedText:function(t){var e=i(t);return e?e.toString():\"\"}}},function(t,e,n){var r=n(5),i=n(1),o=n(2),s=2e4;t.exports=function(t){var e=new o,n=r.createElement(\"img\");return n.onload=n.onerror=function(){i.setTimeout(e.resolve,50)},n.src=t,i.setTimeout(e.reject,s),e.promise}},function(t,e,n){var r=n(108);t.exports=function(t){t.define(\"createElement\",r),t.define(\"createFragment\",r),t.define(\"htmlToElement\",r),t.define(\"hasSelectedText\",r),t.define(\"addRootClass\",r),t.define(\"removeRootClass\",r),t.define(\"hasRootClass\",r),t.define(\"prependStyleSheet\",r),t.define(\"appendStyleSheet\",r),t.define(\"prependCss\",r),t.define(\"appendCss\",r),t.define(\"makeVisible\",r),t.define(\"injectWidgetEl\",r),t.define(\"matchHeightToContent\",r),t.define(\"matchWidthToContent\",r)}},function(t,e){t.exports=function(t){var e,n=!1;return function(){return n?e😦n=!0,e=t.apply(this,arguments))}}},function(t,e,n){var r=n(15),i=n(117),o=n(57);t.exports=function(t,e,n){return new r(i,o,\"twitter-dm-button\",t,e,n)}},function(t,e,n){var r=n(58),i=n(24);t.exports=r.isSupported()?r:i},function(t,e,n){var r=n(25),i=n(118);t.exports=r.build([i])},function(t,e,n){var r=n(15),i=n(121),o=n(60);t.exports=function(t,e,n){return new r(i,o,\"twitter-follow-button\",t,e,n)}},function(t,e,n){var r=n(25),i=n(122);t.exports=r.build([i])},function(t,e,n){var r=n(15),i=n(129),o=n(24);t.exports=function(t,e,n){return new r(i,o,\"twitter-moment\",t,e,n)}},function(t,e,n){var r=n(15),i=n(131),o=n(24);t.exports=function(t,e,n){return new r(i,o,\"periscope-on-air\",t,e,n)}},function(t,e,n){var r=n(80),i=n(133),o=n(137),s=n(139),a=n(141),u=n(143),c={collection:i,event😮,likes😒,list:a,profile:u,url:l},d😦u,s,i,a,o];function l(t){return r(d,function(e){try{return new e(t)}catch(t){}})}t.exports=function(t){return t?function(t){var e,n;return e😦t.sourceType+\"\").toLowerCase(),(n=c[e])?new n(t):null}(t)||l(t):null}},function(t,e,n){var r=n(15),i=n(145),o=n(24);t.exports=function(t,e,n){return new r(i,o,\"twitter-timeline\",t,e,n)}},function(t,e,n){var r=n(15),i=n(147),o=n(57);t.exports=function(t,e,n){return new r(i,o,\"twitter-tweet\",t,e,n)}},function(t,e,n){var r=n(15),i=n(149),o=n(60);t.exports=function(t,e,n){var s=t&&t.type||\"share\";return new r(i,o,\"hashtag\"==s?\"twitter-hashtag-button\":\"mention\"==s?\"twitter-mention-button\":\"twitter-share-button\",t,e,n)}},function(t,e,n){var r=n(36),i=n(35),o=n(0);t.exports=function(t){var e={widget_origin:i.rootDocumentLocation(),widget_frame:i.isFramed()?i.currentDocumentLocation():null,duration_ms:t.duration,item_ids:t.widgetIds||[]},n😮.aug(t.namespace,{page:\"page\",component:\"performance\"});r.scribe(n,e)}},function(t,e,n){var r=n(0),i=n(134),o😦\"ar\",\"fa\",\"he\",\"ur\"];t.exports={isRtlLang:function(t){return t=String(t).toLowerCase(),r.contains(o,t)},matchLanguage:function(t){return t😦t😦t||\"\").toLowerCase()).replace(\"_\",\"-\"),i(t)?t😦t=t.replace(/-.*/,\"\"),i(t)?t:\"en\")}}},function(t,e,n){var r=n(110),i=n(113);function o(t){return r.settingsLoaded().then(function(e){return e[t]})}function s(){return o(\"experiments\")}t.exports={shouldObtainCookieConsent:function(){return o(\"shouldObtainCookieConsent\")},getExperiments😒,getExperiment:function(t){return s().then(function(e){if(!e[t])throw new Error(\"Experiment not found\");return e[t]})},getActiveExperimentDataString:function(){return s().then(function(t){var e=Object.keys(t).reduce(function(e,n){var r;return t[n].version&&(r=n.split(\"_\").slice(-1)[0],e.push(r+\";\"+t[n].bucket)),e},[]);return i(e.join(\",\"))})},getExperimentKeys:function(){return s().then(function(t){return Object.keys(t)})},load:function(){r.load()}}},function(t){t.exports={tweetButtonHtmlPath:\"/widgets/tweet_button.d753e00c3e838c1b2558149bd3f6ecb8.{{lang}}.html\",followButtonHtmlPath:\"/widgets/follow_button.d753e00c3e838c1b2558149bd3f6ecb8.{{lang}}.html\",hubHtmlPath:\"/widgets/hub.html\",widgetIframeHtmlPath:\"/widgets/widget_iframe.d753e00c3e838c1b2558149bd3f6ecb8.html\",resourceBaseUrl:\"https://platform.twitter.com\"}},function(t,e,n){var r=n(3),i=n(95),o=n(23),s=n(11),a={favorite😦\"favorite\",\"like\"],follow😦\"follow\"],like😦\"favorite\",\"like\"],retweet😦\"retweet\"],tweet😦\"tweet\"]};function u(t){this.srcEl😦],this.element=t}u.open=function(t,e,n){var u😦r.intentType(t)||\"\").toLowerCase();r.isTwitterURL(t)&&(function(t,e){i.open(t,{},e)}(t,n),e&&o.trigger(\"click\",{target:e,region:\"intent\",type:\"click\",data:{}}),e&&a[u]&&a[u].forEach(function(n){o.trigger(n,{target:e,region:\"intent\",type:n,data:function(t,e){var n😒.decodeURL(e);switch(t){case\"favorite\":case\"like\":return{tweet_id:n.tweet_id};case\"follow\":return{screen_name:n.screen_name,user_id:n.user_id};case\"retweet\":return{source_tweet_id:n.tweet_id};default:return{}}}(u,t)})}))},t.exports=u},function(t,e){t.exports={getTimezoneOffset:function(){var t😦new Date).toString().match(/(GMT[+-]?\\d+)/);return t&&t[0]||\"GMT\"}}},function(t,e,n){var r=n(5),i=n(9),o=n(2),s=n(0),a=n(11),u=\"cb\",c😮;t.exports={fetch:function(t,e,n,d){var l,f,h;return d=function(t){if(t)return t.replace(/[^\\w$]/g,\"_\")}(d||u+c++),l=i.fullPath([\"callbacks\",d]),f=r.createElement(\"script\"),h=new o,e😒.aug({},e,{callback:l,suppress_response_codes:!0}),i.set([\"callbacks\",d],function(t){var e;t😦e=n(t||!1)).resp,e.success?h.resolve(t):h.reject(t),f.onload=f.onreadystatechange=null,f.parentNode&&f.parentNode.removeChild(f),i.unset([\"callbacks\",d])}),f.onerror=function(){h.reject(new Error(\"failed to fetch \"+f.src))},f.src=a.url(t,e),f.async=\"async\",r.body.appendChild(f),h.promise}}},function(t,e,n){var r=n(2),i=n(100),o=n(7);function s(t){this._inputsQueue😦],this._task=t,this._hasFlushBeenScheduled=!1}s.prototype.add=function(t){var e=new r;return this._inputsQueue.push({input:t,taskDoneDeferred:e}),this._hasFlushBeenScheduled||(this._hasFlushBeenScheduled=!0,i(o(this._flush,this))),e.promise},s.prototype._flush=function(){try{this._task.call(null,this._inputsQueue)}catch(t){this._inputsQueue.forEach(function(e){e.taskDoneDeferred.reject(t)})}this._inputsQueue😦],this._hasFlushBeenScheduled=!1},t.exports😒},function(t,e){t.exports=function(t,e){return t.reduce(function(t,n){var r=e(n);return t[r]=t[r]||[],t[r].push(n),t},{})}},function(t,e,n){var r=n(5),i=n(😎,o=n(3);function s(t,e){var n,r;return e=e||i,/^https?😕/\\//.test(t)?t😕^\\/\\//.test(t)?e.protocol+t😦n=e.host+(e.port.length?\":\"+e.port:\"\"),0!==t.indexOf(\"/\")&&((r=e.pathname.split(\"/\")).pop(),r.push(t),t=\"/\"+r.join(\"/\")),[e.protocol,\"//\",n,t].join(\"\"))}t.exports={absolutize😒,getCanonicalURL:function(){for(var t,e=r.getElementsByTagName(\"link\"),n😮;e[n];n++)if(\"canonical\"==(t=e[n]).rel)return s(t.href)},getScreenNameFromPage:function(){for(var t,e,n,i😦r.getElementsByTagName(\"a\"),r.getElementsByTagName(\"link\")],s😮,a😮,u😕\\bme\\b/;t=i[s];s++)for(a😮;e=t[a];a++)if(u.test(e.rel)&&(n😮.screenName(e.href)))return n}}},function(t,e,n){var r=n(😎,i😕^[^#?]*\\.(gov|mil)(😕d+)?([#?].*)?$/i,o={};function s(t){return t in o?o[t]😮[t]=i.test(t)}t.exports={isUrlSensitive😒,isHostPageSensitive:function(){return s(r.host)}}},function(t,e,n){var r=n(19),i=n(51),o=n(11),s=n(33),a=n(0),u=n(9).get(\"scribeCallback\"),c=2083,d😦],l😮.url(s.CLIENT_EVENT_ENDPOINT,{dnt😮,l:\"\"}),f=encodeURIComponent(l).length;function h(t,e,n,r){var i=!a.isObject(t),o=!!e&&!a.isObject(e);i||o||(u&&u(arguments),p(s.formatClientEventNamespace(t),s.formatClientEventData(e,n,r),s.CLIENT_EVENT_ENDPOINT))}function p(t,e,n){var r,u;n&&a.isObject(t)&&a.isObject(e)&&(i.log(t,e),r😒.flattenClientEventPayload(t,e),u={l😒.stringify(r)},s.noticeSeen(t)&&(u.notice_seen=!0),r.dnt&&(u.dnt=1),w(o.url(n,u)))}function m(t,e,n,r){var i=!a.isObject(t),o=!!e&&!a.isObject(e);if(!i&&!o)return v(s.flattenClientEventPayload(s.formatClientEventNamespace(t),s.formatClientEventData(e,n,r)))}function v(t){return d.push(t),d}function g(t){return encodeURIComponent(t).length+3}function w(t){return(new Image).src=t}t.exports={canFlushOneItem:function(t){var e=g(s.stringify(t));return f+e<c},_enqueueRawObject:v,scribe😛,clientEvent:h,clientEvent2:function(t,e,n){return h(t,e,n,2)},enqueueClientEvent:m,flushClientEvents:function(){var t;return d.length>1&&m({page:\"widgets_js\",component:\"scribe_pixel\",action:\"batch_log\"},{}),t😛,d😦],t.reduce(function(e,n,r){var i=e.length,o=i&&e[i-1];return r+1==t.length&&n.event_namespace&&\"batch_log\"==n.event_namespace.action&&(n.message😦\"entries:\"+r,\"requests:\"+i].join(\"/\")),function t(e){return Array.isArray(e)||(e😦e]),e.reduce(function(e,n){var r,i😒.stringify(n),o=g(i);return f+o<c?e=e.concat(i)😦r😒.splitLogEntry(n)).length>1&&(e=e.concat(t(r))),e},[])}(n).forEach(function(t){var n=g(t);(!o||o.urlLength+n>c)&&(o={urlLength:f,items😦]},e.push(o)),o.urlLength+=n,o.items.push(t)}),e},[]).map(function(t){var e={l:t.items};return r.enabled()&&(e.dnt=1),w(o.url(s.CLIENT_EVENT_ENDPOINT,e))})},interaction:function(t,e,n,r){var i😒.extractTermsFromDOM(t.target||t.srcElement);i.action=r||\"click\",h(i,e,n)}}},function(t,e,n){var r=n(0),i=n(40);t.exports=function(t,e){return i(t,e)?[t]:r.toRealArray(t.querySelectorAll(e))}},function(t,e){t.exports=function(t,e,n){for(var r,i😮;i<t.length;i++)if(r=e.call(n,t[i],i,t))return r}},function(t,e){t.exports=function(){return Math.floor(+new Date/9e5)}},function(t,e,n){var r=n(12);t.exports=function(t){var e,n;return e=t.headers&&t.headers.status,!(n=t&&!t.error&&200===e)&&t.headers&&t.headers.message&&r.publicError(t.headers.message),{success:n,resp:t}}},function(t,e,n){var r,i=n(28),o😮;function s(){r&&r.length===o&&(i.emitter.trigger(i.ALL_WIDGETS_AND_IMAGES_LOADED,r),r=null)}i.emitter.bind(i.ALL_WIDGETS_RENDER_END,function(t){r=t.widgets,s()}),t.exports={reportImagesLoadForAWidget:function(){o++,s()}}},,,,,,,,function(t,e,n){var r,i=n(2),o=n(5),s=n(93),a=n(46),u=n(9),c=n(94),d=n(23),l=n(97),f=n(150),h=n(158),p=n(159),m=n(28);n(160),m.emitter.trigger(m.START),u.set(\"widgets.init\",!0),a.set(\"init\",!0),p(),r=new i,s.exposeReadyPromise(r.promise,a.base,\"_e\"),a.set(\"widgets\",f),a.set(\"widgets.load\",l.load),a.set(\"events\",d),h(function(){r.resolve(a.base),c.attachTo(o),l.loadPage()})},function(t,e){t.exports=navigator},function(t,e,n){var r=n(7);t.exports={exposeReadyPromise:function(t,e,n){e.ready=r(t.then,t),n&&Array.isArray(e[n])&&(e[n].forEach(r(t.then,t)),delete e[n])}}},function(t,e,n){var r=n(😎,i=n(34),o=n(31),s=n(71),a=n(3);function u(t){var e,n,u;t.altKey||t.metaKey||t.shiftKey||(e😮.closest(function(t){return\"A\"===t.tagName||\"AREA\"===t.tagName},t.target))&&a.isIntentURL(e.href)&&(n😦n😦n😦u=e.href,\"original_referer=\"+r.href].join(-1==u.indexOf(\"?\")?\"?\":\"&\")).replace(/^http[😃/,\"https:\")).replace(/^\\/\\//,\"https://\"),s.open(n,e),i.preventDefault(t))}t.exports={attachTo:function(t){t.addEventListener(\"click\",u,!1)}}},function(t,e,n){var r,i=n(1),o=n(96),s=n(34),a=n(31),u=n(20),c=n(3),d=n(22),l=n(0),f=\"intent_\",h=i.screen.width,p=i.screen.height;function m(t,e){function n(t){return Math.round(t/2)}return t>e?{coordinate😮,size:e}:{coordinate:n(e)-n(t),size:t}}function v(t,e,n){var i,o;e=r.parse(e),n=n||{},i=m(e.width,n.width||h),e.left=i.coordinate,e.width=i.size,o=m(e.height,n.height||p),e.top😮.coordinate,e.height😮.size,this.win=t,this.features=function(t){var e😦];return l.forIn(t,function(t,n){e.push(t+\"=\"+n)}),e.join(\",\")}(e)}r😦new o).defaults({width:550,height:520,personalbar:\"0\",toolbar:\"0\",location:\"1\",scrollbars:\"1\",resizable:\"1\"}),v.prototype.open=function(t,e){var n=e&&\"click\"==e.type&&a.closest(\"a\",e.target),r=e&&(e.altKey||e.metaKey||e.shiftKey),i=n&&(u.ios()||u.android());if(c.isTwitterURL(t))return r||i?this😦this.name=f+d.generate(),this.popup=this.win.open(t,this.name,this.features),e&&s.preventDefault(e),this)},v.open=function(t,e,n){return new v(i,e).open(t,n)},t.exports=v},function(t,e,n){var r=n(4),i=n(0);function o(){this.assertions😦],this._defaults={}}o.prototype.assert=function(t,e){return this.assertions.push({fn:t,msg:e||\"assertion failed\"}),this},o.prototype.defaults=function(t){return this._defaults=t||this._defaults,this},o.prototype.require=function(t){var e=this;return(t=Array.isArray(t)?t:i.toRealArray(arguments)).forEach(function(t){e.assert(function(t){return function(e){return r.hasValue(e[t])}}(t),\"required: \"+t)}),this},o.prototype.parse=function(t){var e,n;if(e=i.aug({},this._defaults,t||{}),(n=this.assertions.reduce(function(t,n){return n.fn(e)||t.push(n.msg),t},[])).length>0)throw new Error(n.join(\"\\n\"));return e},t.exports😮},function(t,e,n){var r=n(5),i=n(6),o=n(21),s=n(49),a=n(32),u=n(9),c=n(36),d=n(23),l=n(4),f=n(0),h=n(69),p=n(114),m=n(28);function v(){var t=a.val(\"widgets:autoload\")||!0;return!l.isFalseValue(t)&&(l.isTruthValue(t)?r.body:r.querySelectorAll(t))}function g(t){var e,n;return t😦t=t||r.body).length?f.toRealArray(t)😦t],c.pause(),n=t.reduce(function(t,e){return t.concat(p.reduce(function(t,n){return t.concat(n(e))},[]))},[]),m.emitter.trigger(m.ALL_WIDGETS_RENDER_START,{widgets:n}),e😮.allResolved(n.map(function(t){return s.addWidget(t)})).then(function(t){d.trigger(\"loaded\",{widgets:t}),t&&t.length&&m.emitter.trigger(m.ALL_WIDGETS_RENDER_END,{widgets:t})}),o.always(e,function(){c.resume()}),e}t.exports={load:g,loadPage:function(){var t=v();return h.load(),!1===t?i.resolve()😦u.set(\"widgets.loaded\",!0),g(t))},_getPageLoadTarget:v}},function(t,e,n){var r=n(10),i=n(17),o=n(23),s=n(50),a=n(6),u=n(21);function c(t,e){this._widget=null,this._sandbox=null,this._hydrated=!1,this._insertedIntoDom=!1,this._Sandbox=t.Sandbox,this._factory=t.factory,this._widgetParams=t.parameters,this._resolve=e,this._className=t.className,this._renderedClassName=t.className+\"-rendered\",this._errorClassName=t.className+\"-error\",this._srcEl=t.srcEl,this._targetGlobal=function(t){return(t.srcEl||t.targetEl).ownerDocument.defaultView}(t),this._insertionStrategy=function(e){var n=t.srcEl,r=t.targetEl;n?r.insertBefore(e,n):r.appendChild(e)}}c.fromRawTask=function(t){return new c(t.input,t.taskDoneDeferred.resolve)},c.prototype.initialize=function(){var t=this,e=new this._Sandbox(this._targetGlobal);return this._factory(this._widgetParams,e).then(function(n){return t._widget=n,t._sandbox=e,n})},c.prototype.insertIntoDom=function(){var t=this;return this._widget?this._sandbox.insert(this._widget.id,{class😦this._className,this._renderedClassName].join(\" \")},null,this._insertionStrategy).then(function(){t._insertedIntoDom=!0}):a.reject(new Error(\"cannot insert widget into DOM before it is initialized\"))},c.prototype.hydrate=function(){var t=this;return this._widget?this._widget.hydrate().then(function(){t._hydrated=!0}):a.reject(new Error(\"cannot hydrate widget before it is initialized\"))},c.prototype.render=function(){var t=this;function e(e){return s(t._sandbox.sandboxEl).then(function(){return a.reject(e)})}return this._hydrated?this._insertedIntoDom?t._widget.render(t._sandbox).then(function(){return t._sandbox.onResize(function(){return t._widget.resize().then(function(){o.trigger(\"resize\",{target:t._sandbox.sandboxEl})})}),t._widget.show()}).then(function(){return s(t._srcEl).then(function(){return t._sandbox.sandboxEl})},e):e(new Error(\"cannot render widget before DOM insertion\")):e(new Error(\"cannot render widget before hydration\"))},c.prototype.fail=function(){var t=this;return this._srcEl?u.always(i.write(function(){r.add(t._srcEl,t._errorClassName)}),function(){o.trigger(\"rendered\",{target:t._srcEl}),t._resolve(t._srcEl)})😦t._resolve(),a.resolve())},c.prototype.success=function(){o.trigger(\"rendered\",{target:this._sandbox.sandboxEl}),this._resolve(this._sandbox.sandboxEl)},t.exports=c},function(t,e,n){var r;!function(){\"use strict\";var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)};function o(){this.frames😦],this.lastId😮,this.raf=i,this.batch={hash:{},read😦],write😦],mode:null}}o.prototype.read=function(t,e){var n=this.add(\"read\",t,e),r=n.id;return this.batch.read.push(n.id),\"reading\"===this.batch.mode||this.batch.scheduled?r😦this.scheduleBatch(),r)},o.prototype.write=function(t,e){var n=this.add(\"write\",t,e),r=this.batch.mode,i=n.id;return this.batch.write.push(n.id),\"writing\"===r||\"reading\"===r||this.batch.scheduled?i😦this.scheduleBatch(),i)},o.prototype.defer=function(t,e,n){\"function\"==typeof t&&(n=e,e=t,t=1);var r=this,i=t-1;return this.schedule(i,function(){r.run({fn:e,ctx:n})})},o.prototype.clear=function(t){if(\"function\"==typeof t)return this.clearFrame(t);t=Number(t);var e=this.batch.hash[t];if(e){var n=this.batch[e.type],r=n.indexOf(t);delete this.batch.hash[t],~r&&n.splice(r,1)}},o.prototype.clearFrame=function(t){var e=this.frames.indexOf(t);~e&&this.frames.splice(e,1)},o.prototype.scheduleBatch=function(){var t=this;this.schedule(0,function(){t.batch.scheduled=!1,t.runBatch()}),this.batch.scheduled=!0},o.prototype.uniqueId=function(){return++this.lastId},o.prototype.flush=function(t){for(var e;e=t.shift()😉this.run(this.batch.hash[e])},o.prototype.runBatch=function(){try{this.batch.mode=\"reading\",this.flush(this.batch.read),this.batch.mode=\"writing\",this.flush(this.batch.write),this.batch.mode=null}catch(t){throw this.runBatch(),t}},o.prototype.add=function(t,e,n){var r=this.uniqueId();return this.batch.hash[r]={id:r,fn:e,ctx:n,type:t}},o.prototype.run=function(t){var e=t.ctx||this,n=t.fn;if(delete this.batch.hash[t.id],!this.onError)return n.call(e);try{n.call(e)}catch(t){this.onError(t)}},o.prototype.loop=function(){var t,e=this,n=this.raf,r=!1;function i(){var t=e.frames.shift();e.frames.length?n(i):e.looping=!1,t&&t()}this.looping||(t=setTimeout(function(){r=!0,i()},500),n(function(){r||(clearTimeout(t),i())}),this.looping=!0)},o.prototype.schedule=function(t,e){return this.frames[t]?this.schedule(t+1,e)😦this.loop(),this.frames[t]=e)};var s=new o;void 0!==t&&t.exports?t.exports😒:void 0===(r=function(){return s}.call(e,n,e,t))||(t.exports=r)}()},function(t,e,n){var r=n(45).Promise;t.exports=r._asap},function(t,e,n){var r,i,o,s=n(5),a=n(1),u=n(29),c=n(19),d=n(2),l=n(6),f=n(51),h=n(33),p=n(0),m=n(24),v=n(9).get(\"scribeCallback\"),g=Math.floor(1e3*Math.random())+\"_\",w=\"rufous-frame-\"+g+\"-\",y=\"rufous-form-\"+g+\"-\",b😮,_=!1,E=new d;function x(){var t😮.createElement(\"form\"),e😮.createElement(\"input\"),n😮.createElement(\"input\");return b++,t.action=h.CLIENT_EVENT_ENDPOINT,t.method=\"POST\",t.target=w+b,t.id=y+b,e.type=\"hidden\",e.name=\"dnt\",e.value=c.enabled(),n.type=\"hidden\",n.name=\"tfw_redirect\",n.value=h.RUFOUS_REDIRECT,t.appendChild(e),t.appendChild(n),t}function A(){var t=w+b;return u({id:t,name:t,width😮,height😮,border😮},{display:\"none\"},o.doc)}t.exports={clientEvent:function(t,e,n,i){(function(t,e){var n=!p.isObject(t),r=!!e&&!p.isObject(e),i=n||r;return i})(t,e)||(v&&v(arguments),E.promise.then(function(){!function(t,e){var n,i,s😜.isObject(t)&&p.isObject(e)&&(f.log(t,e),s=h.flattenClientEventPayload(t,e),(n=r.firstChild).value=+(+n.value||s.dnt||0),(i😮.createElement(\"input\")).type=\"hidden\",i.name=\"l\",i.value=h.stringify(s),r.appendChild(i))}(h.formatClientEventNamespace(t),h.formatClientEventData(e,n,i))}))},flush:function(){return E.promise.then(function(){var t;return r.children.length<=2?l.reject()😦t=l.all([o.doc.body.appendChild(r),o.doc.body.appendChild(i)]).then(function(t){var e=t[0],n=t[1];return n.addEventListener(\"load\",function(){!function(t,e){return function(){var n=t.parentNode;n&&(n.removeChild(t),n.removeChild(e))}}(e,n)()}),e.submit(),t}),r=x(),i=A(),t)})},init:function(){return _?E.promise:((o=new m(a)).insert(\"rufous-sandbox\",null,{display:\"none\"},function(t){s.body.appendChild(t)}).then(function(){o.setTitle(\"Twitter analytics iframe\"),r=x(),i=A(),E.resolve([r,i])}),_=!0,E.promise)}}},function(t,e,n){var r=n(0);t.exports=function t(e){var n😦];return e.forEach(function(e){var i=r.isType(\"array\",e)?t(e)😦e];n=n.concat(i)}),n}},function(t,e){t.exports=function(t){return t.filter(function(e,n){return t.indexOf(e)===n})}},function(t,e,n){var r=n(38),i=n(0),o=n(106);function s(){r.apply(this,arguments)}s.prototype=Object.create(r.prototype),i.aug(s.prototype,{factory😮}),t.exports😒},function(t,e,n){var r=n(21),i=n(0),o=n(7);t.exports={before:function(t,e){return function(){var n,i=this,o=arguments;return n=e.apply(this,arguments),r.isPromise(n)?n.then(function(){return t.apply(i,o)}):t.apply(this,arguments)}},after:function(t,e){return function(){var n,i=this,o=arguments;function s(t,e){return r.isPromise(e)?e.then(function(){return t}):t}return n=t.apply(this,arguments),r.isPromise(n)?n.then(function(t){return s(t,e.apply(i,o))})😒(n,e.apply(this,arguments))}},around:function(t,e){return function(){var n=i.toRealArray(arguments);return n.unshift(o(t,this)),e.apply(this,n)}}}},function(t,e,n){var r=n(10),i=n(17),o=n(39),s=n(6),a=n(0);t.exports=function(){var t😮();function e(e){t.apply(this,arguments),Object.defineProperty(this,\"targetGlobal\",{value:e})}return e.prototype=Object.create(t.prototype),a.aug(e.prototype,{id:null,initialized:!1,width😮,height😮,sandboxEl:null,insert:function(){return s.reject()},onResize:function(){},addClass:function(t){var e=this.sandboxEl;return t=Array.isArray(t)?t😦t],i.write(function(){t.forEach(function(t){r.add(e,t)})})},removeClass:function(t){var e=this.sandboxEl;return t=Array.isArray(t)?t😦t],i.write(function(){t.forEach(function(t){r.remove(e,t)})})},styleSelf:function(t){var e=this;return i.write(function(){a.forIn(t,function(t,n){e.sandboxEl.style[t]=n})})}}),e}},function(t,e,n){var r=n(5),i=n(10),o=n(17),s=n(52),a=n(25),u=n(53),c=n(42),d=n(43),l=n(29),f=n(12),h=n(44),p=n(2),m=n(6),v=n(0),g=n(9),w=n(22),y=n(7),b={allowfullscreen:\"true\"},_={position:\"absolute\",visibility:\"hidden\",display:\"block\",width:\"0px\",height:\"0px\",padding:\"0\",border:\"none\"},E={position:\"static\",visibility:\"visible\"},x=\"SandboxRoot\",A=\".SandboxRoot { display: none; }\",T=50;function S(t,e,n,r){return e=v.aug({id:t},b,e),n=v.aug({},_,n),l(e,n,r)}function R(t,e,n,i,s){var a=new p,u=w.generate(),c😒(t,e,n,s);return g.set([\"sandbox\",u],function(){var t=c.contentWindow.document;o.write(function(){t.write(\"<!DOCTYPE html><html><head></head><body></body></html>\")}).then(function(){t.close(),a.resolve(c)})}),c.src😦\"javascript:\",'document.write(\"\");',\"try { window.parent.document; }\",'catch (e) { document.domain=\"'+r.domain+'\"; }',\"window.parent.\"+g.fullPath([\"sandbox\",u])+\"();\"].join(\"\"),c.addEventListener(\"error\",a.reject,!1),o.write(function(){i.parentNode.replaceChild(c,i)}),a.promise}t.exports=a.couple(n(54),function(t){t.overrideProperty(\"id\",{get:function(){return this.sandboxEl&&this.sandboxEl.id}}),t.overrideProperty(\"initialized\",{get:function(){return!!this.win}}),t.overrideProperty(\"width\",{get:function(){return this._width}}),t.overrideProperty(\"height\",{get:function(){return this._height}}),t.overrideProperty(\"sandboxEl\",{get:function(){return this.iframeEl}}),t.defineProperty(\"iframeEl\",{get:function(){return this._iframe}}),t.defineProperty(\"rootEl\",{get:function(){return this.doc&&this.doc.documentElement}}),t.defineProperty(\"widgetEl\",{get:function(){return this.doc&&this.doc.body.firstElementChild}}),t.defineProperty(\"win\",{get:function(){return this.iframeEl&&this.iframeEl.contentWindow}}),t.defineProperty(\"doc\",{get:function(){return this.win&&this.win.document}}),t.define(\"_updateCachedDimensions\",function(){var t=this;return o.read(function(){var e,n=h(t.sandboxEl);\"visible\"==t.sandboxEl.style.visibility?t._width=n.width😦e=h(t.sandboxEl.parentElement).width,t._width=Math.min(n.width,e)),t._height=n.height})}),t.define(\"_setTargetToBlank\",function(){var t=this.createElement(\"base\");t.target=\"_blank\",this.doc.head.appendChild(t)}),t.define(\"_didResize\",function(){var t=this,e=this._resizeHandlers.slice(0);return this._updateCachedDimensions().then(function(){e.forEach(function(e){e(t)})})}),t.define(\"setTitle\",function(t){this.iframeEl.title=t}),t.override(\"createElement\",function(t){return this.doc.createElement(t)}),t.override(\"createFragment\",function(){return this.doc.createDocumentFragment()}),t.override(\"htmlToElement\",function(t){var e;return(e=this.createElement(\"div\")).innerHTML=t,e.firstElementChild}),t.override(\"hasSelectedText\",function(){return!!s.getSelectedText(this.win)}),t.override(\"addRootClass\",function(t){var e=this.rootEl;return t=Array.isArray(t)?t😦t],this.initialized?o.write(function(){t.forEach(function(t){i.add(e,t)})}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"removeRootClass\",function(t){var e=this.rootEl;return t=Array.isArray(t)?t😦t],this.initialized?o.write(function(){t.forEach(function(t){i.remove(e,t)})}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"hasRootClass\",function(t){return i.present(this.rootEl,t)}),t.define(\"addStyleSheet\",function(t,e){var n,r=new p;return this.initialized?((n=this.createElement(\"link\")).type=\"text/css\",n.rel=\"stylesheet\",n.href=t,n.addEventListener(\"load\",r.resolve,!1),n.addEventListener(\"error\",r.reject,!1),o.write(y(e,null,n)).then(function(){return u(t).then(r.resolve,r.reject),r.promise})):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"prependStyleSheet\",function(t){var e=this.doc;return this.addStyleSheet(t,function(t){var n=e.head.firstElementChild;return n?e.head.insertBefore(t,n):e.head.appendChild(t)})}),t.override(\"appendStyleSheet\",function(t){var e=this.doc;return this.addStyleSheet(t,function(t){return e.head.appendChild(t)})}),t.define(\"addCss\",function(t,e){var n;return c.inlineStyle()?((n=this.createElement(\"style\")).type=\"text/css\",n.appendChild(this.doc.createTextNode(t)),o.write(y(e,null,n)))😦f.devError(\"CSP enabled; cannot embed inline styles\"),m.resolve())}),t.override(\"prependCss\",function(t){var e=this.doc;return this.addCss(t,function(t){var n=e.head.firstElementChild;return n?e.head.insertBefore(t,n):e.head.appendChild(t)})}),t.override(\"appendCss\",function(t){var e=this.doc;return this.addCss(t,function(t){return e.head.appendChild(t)})}),t.override(\"makeVisible\",function(){var t=this;return this.styleSelf(E).then(function(){t._updateCachedDimensions()})}),t.override(\"injectWidgetEl\",function(t){var e=this;return this.initialized?this.widgetEl?m.reject(new Error(\"widget already injected\"))😮.write(function(){e.doc.body.appendChild(t)}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"matchHeightToContent\",function(){var t,e=this;return o.read(function(){t=e.widgetEl?h(e.widgetEl).height😮}),o.write(function(){e.sandboxEl.style.height=t+\"px\"}).then(function(){return e._updateCachedDimensions()})}),t.override(\"matchWidthToContent\",function(){var t,e=this;return o.read(function(){t=e.widgetEl?h(e.widgetEl).width😮}),o.write(function(){e.sandboxEl.style.width=t+\"px\"}).then(function(){return e._updateCachedDimensions()})}),t.after(\"initialize\",function(){this._iframe=null,this._width=this._height😮,this._resizeHandlers😦]}),t.override(\"insert\",function(t,e,n,r){var i=this,s=new p,a=this.targetGlobal.document,u😒(t,e,n,a);return o.write(y(r,null,u)),u.addEventListener(\"load\",function(){(function(t){try{t.contentWindow.document}catch(t){return m.reject(t)}return m.resolve(t)})(u).then(null,y(R,null,t,e,n,u,a)).then(s.resolve,s.reject)},!1),u.addEventListener(\"error\",s.reject,!1),s.promise.then(function(t){var e😛(i._didResize,T,i);return i._iframe=t,i.win.addEventListener(\"resize\",e,!1),m.all([i._setTargetToBlank(),i.addRootClass(😆,i.prependCss(A)])})}),t.override(\"onResize\",function(t){this._resizeHandlers.push(t)}),t.after(\"styleSelf\",function(){return this._updateCachedDimensions()})})},function(t,e){t.exports=function(){throw new Error(\"unimplemented method\")}},function(t,e,n){var r=n(2),i=n(7),o=100,s=3e3;function a(t,e){this._inputsQueue😦],this._task=t,this._isPaused=!1,this._flushDelay=e&&e.flushDelay||o,this._pauseLength=e&&e.pauseLength||s,this._flushTimeout=void 0}a.prototype.add=function(t){var e=new r;return this._inputsQueue.push({input:t,taskDoneDeferred:e}),this._scheduleFlush(),e.promise},a.prototype._scheduleFlush=function(){this._isPaused||(clearTimeout(this._flushTimeout),this._flushTimeout=setTimeout(i(this._flush,this),this._flushDelay))},a.prototype._flush=function(){try{this._task.call(null,this._inputsQueue)}catch(t){this._inputsQueue.forEach(function(e){e.taskDoneDeferred.reject(t)})}this._inputsQueue😦],this._flushTimeout=void 0},a.prototype.pause=function(t){clearTimeout(this._flushTimeout),this._isPaused=!0,!t&&this._pauseLength&&setTimeout(i(this.resume,this),this._pauseLength)},a.prototype.resume=function(){this._isPaused=!1,this._scheduleFlush()},t.exports=a},function(t,e,n){var r,i=n(70),o=n(29),s=n(2),a=n(5),u=n(18),c=n(20),d=n(30),l=n(😎,f=n(12),h=n(111),p=n(55),m=n(9),v=n(11),g=n(112),w=n(0),y=n(1),b😛(function(){return new s});function _(t){var e=t||{should_obtain_cookie_consent:!0,experiments:{}};return new g(e.should_obtain_cookie_consent,e.experiments)}t.exports={load:function(){var t,e,n,s;if(c.ie9()||c.ie10()||\"http:\"!==l.protocol&&\"https:\"!==l.protocol)return f.devError(\"Using default settings due to unsupported browser or protocol.\"),r=_(),void b().resolve();t={origin:l.origin},u.settings().indexOf(\"localhost\")>-1&&(t.localSettings=!0),e=v.url(i.resourceBaseUrl+i.widgetIframeHtmlPath,t),n=function(t){var n;if(e.substr(0,t.origin.length)===t.origin)try{(n=\"string\"==typeof t.data?d.parse(t.data):t.data).namespace===h.settings&&(r=_(n.settings),b().resolve())}catch(t){f.devError(t)}},y.addEventListener(\"message\",n),s😮({src:e,title:\"Twitter settings iframe\"},{display:\"none\"}),a.body.appendChild(s)},settingsLoaded:function(){var t,e,n;return t=new s,e=m.get(\"experimentOverride\"),b().promise.then(function(){e&&e.name&&e.assignment&&((n={})[e.name]={bucket:e.assignment},r.experiments=w.aug(r.experiments,n)),t.resolve(r)}).catch(function(e){t.reject(e)}),t.promise}}},function(t,e){t.exports={settings:\"twttr.settings\"}},function(t,e){t.exports=function(t,e){this.shouldObtainCookieConsent=t,this.experiments=e||{}}},function(t,e){t.exports=function(t){return t.split(\"\").map(function(t){return t.charCodeAt(0).toString(16)}).join(\"\")}},function(t,e,n){t.exports😦n(115),n(120),n(128),n(130),n(132),n(146),n(148)]},function(t,e,n){var r=n(11),i=n(4),o=n(0),s=n(13),a=n(14)(),u=n(56),c=\"a.twitter-dm-button\";t.exports=function(t){return a(t,c).map(function(t){return u(function(t){var e=t.getAttribute(\"data-show-screen-name\"),n😒(t),a=t.getAttribute(\"href\"),u=t.getAttribute(\"data-screen-name\"),c=e?i.asBoolean(e):null,d=t.getAttribute(\"data-size\"),l=r.decodeURL(a),f=l.recipient_id,h=t.getAttribute(\"data-text\")||l.text,p=t.getAttribute(\"data-welcome-message-id\")||l.welcomeMessageId;return o.aug(n,{screenName:u,showScreenName:c,size😛,text:h,userId:f,welcomeMessageId😛})}(t),t.parentNode,t)})}},function(t,e,n){var r=n(0);t.exports=function t(e){var n;if(e)return n=e.lang||e.getAttribute(\"data-lang\"),r.isType(\"string\",n)?n:t(e.parentElement)}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return n.e(2).then(function(r){var o;try{o=n(84),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(119),i=n(1),o=n(10),s=n(34),a=n(17),u=n(52),c=n(25),d=n(53),l=n(42),f=n(44),h=n(7),p=n(43),m=n(6),v=n(0),g=50,w={position:\"absolute\",visibility:\"hidden\",display:\"block\",transform:\"rotate(0deg)\"},y={position:\"static\",visibility:\"visible\"},b=\"twitter-widget\",_=\"open\",E=\"SandboxRoot\",x=\".SandboxRoot { display: none; max-height: 10000px; }\";t.exports=c.couple(n(54),function(t){t.defineStatic(\"isSupported\",function(){return!!i.HTMLElement.prototype.attachShadow&&l.inlineStyle()}),t.overrideProperty(\"id\",{get:function(){return this.sandboxEl&&this.sandboxEl.id}}),t.overrideProperty(\"initialized\",{get:function(){return!!this._shadowHost}}),t.overrideProperty(\"width\",{get:function(){return this._width}}),t.overrideProperty(\"height\",{get:function(){return this._height}}),t.overrideProperty(\"sandboxEl\",{get:function(){return this._shadowHost}}),t.define(\"_updateCachedDimensions\",function(){var t=this;return a.read(function(){var e,n=f(t.sandboxEl);\"visible\"==t.sandboxEl.style.visibility?t._width=n.width😦e=f(t.sandboxEl.parentElement).width,t._width=Math.min(n.width,e)),t._height=n.height})}),t.define(\"_didResize\",function(){var t=this,e=this._resizeHandlers.slice(0);return this._updateCachedDimensions().then(function(){e.forEach(function(e){e(t)})})}),t.override(\"createElement\",function(t){return this.targetGlobal.document.createElement(t)}),t.override(\"createFragment\",function(){return this.targetGlobal.document.createDocumentFragment()}),t.override(\"htmlToElement\",function(t){var e;return(e=this.createElement(\"div\")).innerHTML=t,e.firstElementChild}),t.override(\"hasSelectedText\",function(){return!!u.getSelectedText(this.targetGlobal)}),t.override(\"addRootClass\",function(t){var e=this._shadowRootBody;return t=Array.isArray(t)?t😦t],this.initialized?a.write(function(){t.forEach(function(t){o.add(e,t)})}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"removeRootClass\",function(t){var e=this._shadowRootBody;return t=Array.isArray(t)?t😦t],this.initialized?a.write(function(){t.forEach(function(t){o.remove(e,t)})}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"hasRootClass\",function(t){return o.present(this._shadowRootBody,t)}),t.override(\"addStyleSheet\",function(t,e){return this.addCss('@import url(\"'+t+'\");',e).then(function(){return d(t)})}),t.override(\"prependStyleSheet\",function(t){var e=this._shadowRoot;return this.addStyleSheet(t,function(t){var n=e.firstElementChild;return n?e.insertBefore(t,n):e.appendChild(t)})}),t.override(\"appendStyleSheet\",function(t){var e=this._shadowRoot;return this.addStyleSheet(t,function(t){return e.appendChild(t)})}),t.override(\"addCss\",function(t,e){var n;return this.initialized?l.inlineStyle()?((n=this.createElement(\"style\")).type=\"text/css\",n.appendChild(this.targetGlobal.document.createTextNode(t)),a.write(h(e,null,n))):m.resolve():m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"prependCss\",function(t){var e=this._shadowRoot;return this.addCss(t,function(t){var n=e.firstElementChild;return n?e.insertBefore(t,n):e.appendChild(t)})}),t.override(\"appendCss\",function(t){var e=this._shadowRoot;return this.addCss(t,function(t){return e.appendChild(t)})}),t.override(\"makeVisible\",function(){return this.styleSelf(y)}),t.override(\"injectWidgetEl\",function(t){var e=this;return this.initialized?this._shadowRootBody.firstElementChild?m.reject(new Error(\"widget already injected\")):a.write(function(){e._shadowRootBody.appendChild(t)}).then(function(){return e._updateCachedDimensions()}).then(function(){var t😛(e._didResize,g,e);new r(e._shadowRootBody,t)}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"matchHeightToContent\",function(){return m.resolve()}),t.override(\"matchWidthToContent\",function(){return m.resolve()}),t.override(\"insert\",function(t,e,n,r){var i=this.targetGlobal.document,o=this._shadowHost=i.createElement(b),u=this._shadowRoot😮.attachShadow({mode:_}),c=this._shadowRootBody=i.createElement(\"div\");return v.forIn(e||{},function(t,e){o.setAttribute(t,e)}),o.id=t,u.appendChild(c),s.delegate(c,\"click\",\"A\",function(t,e){e.hasAttribute(\"target\")||e.setAttribute(\"target\",\"_blank\")}),m.all([this.styleSelf(w),this.addRootClass(E),this.prependCss(😆,a.write(r.bind(null,o))])}),t.override(\"onResize\",function(t){this._resizeHandlers.push(t)}),t.after(\"initialize\",function(){this._shadowHost=this._shadowRoot=this._shadowRootBody=null,this._width=this._height😮,this._resizeHandlers😦]}),t.after(\"styleSelf\",function(){return this._updateCachedDimensions()})})},function(t,e){var n;(n=function(t,e){function r(t,e){if(t.resizedAttached){if(t.resizedAttached)return void t.resizedAttached.add(e)}else t.resizedAttached=new function(){var t,e;this.q😦],this.add=function(t){this.q.push(t)},this.call=function(){for(t😮,e=this.q.length;t<e;t++)this.q[t].call()}},t.resizedAttached.add(e);t.resizeSensor=document.createElement(\"div\"),t.resizeSensor.className=\"resize-sensor\";var n=\"position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;\",r=\"position: absolute; left: 0; top: 0; transition: 0s;\";t.resizeSensor.style.cssText=n,t.resizeSensor.innerHTML='<div class=\"resize-sensor-expand\" style=\"'+n+'\"><div style=\"'+r+'\"></div></div><div class=\"resize-sensor-shrink\" style=\"'+n+'\"><div style=\"'+r+' width: 200%; height: 200%\"></div></div>',t.appendChild(t.resizeSensor),{fixed:1,absolute:1}[function(t,e){return t.currentStyle?t.currentStyle[e]:window.getComputedStyle?window.getComputedStyle(t,null).getPropertyValue(e):t.style[e]}(t,\"position\")]||(t.style.position=\"relative\");var i,o,s=t.resizeSensor.childNodes[0],a😒.childNodes[0],u=t.resizeSensor.childNodes[1],c😦u.childNodes[0],function(){a.style.width😒.offsetWidth+10+\"px\",a.style.height😒.offsetHeight+10+\"px\",s.scrollLeft😒.scrollWidth,s.scrollTop😒.scrollHeight,u.scrollLeft=u.scrollWidth,u.scrollTop=u.scrollHeight,i=t.offsetWidth,o=t.offsetHeight});c();var d=function(t,e,n){t.attachEvent?t.attachEvent(\"on\"+e,n):t.addEventListener(e,n)},l=function(){t.offsetWidth==i&&t.offsetHeight==o||t.resizedAttached&&t.resizedAttached.call(),c()}😜(s,\"scroll\",l),d(u,\"scroll\",l)}var i=Object.prototype.toString.call(t),o=\"[object Array]\"===i||\"[object NodeList]\"===i||\"[object HTMLCollection]\"===i||\"undefined\"!=typeof jQuery&&t instanceof jQuery||\"undefined\"!=typeof Elements&&t instanceof Elements;if(o)for(var s😮,a=t.length;s<a;s++)r(t[s],e);else r(t,e);this.detach=function(){if(o)for(var e😮,r=t.length;e<r;e++)n.detach(t[e]);else n.detach(t)}}).detach=function(t){t.resizeSensor&&(t.removeChild(t.resizeSensor),delete t.resizeSensor,delete t.resizedAttached)},void 0!==t&&void 0!==t.exports?t.exports=n:window.ResizeSensor=n},function(t,e,n){var r=n(3),i=n(0),o=n(13),s=n(14)(),a=n(59),u=n(4),c=\"a.twitter-follow-button\";t.exports=function(t){return s(t,c).map(function(t){return a(function(t){var e😮(t),n={screenName:r.screenName(t.href),showScreenName:\"false\"!==t.getAttribute(\"data-show-screen-name\"),showCount:\"false\"!==t.getAttribute(\"data-show-count\"),size:t.getAttribute(\"data-size\"),count:t.getAttribute(\"data-count\"),preview:t.getAttribute(\"data-preview\")};return i.forIn(n,function(t,n){var r=e[t];e[t]=u.hasValue(r)?r:n}),e.screenName=e.screenName||e.screen_name,e}(t),t.parentNode,t)})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return n.e(3).then(function(r){var o;try{o=n(85),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(17),i=n(123),o=n(55),s=n(29),a=n(2),u=n(6),c=n(7),d=n(0),l={position:\"absolute\",visibility:\"hidden\",width:\"0px\",height:\"0px\"},f={position:\"static\",visibility:\"visible\"},h={};i(function(t,e,n){var r=h[t];if(r)return e=e||1,n=n||1,r.styleSelf({width:e+\"px\",height:n+\"px\"}).then(function(){r.didResize()})}),t.exports=function(t){t.overrideProperty(\"id\",{get:function(){return this.sandboxEl&&this.sandboxEl.id}}),t.overrideProperty(\"initialized\",{get:function(){return!!this.iframeEl}}),t.overrideProperty(\"width\",{get:function(){return this._width}}),t.overrideProperty(\"height\",{get:function(){return this._height}}),t.overrideProperty(\"sandboxEl\",{get:function(){return this.iframeEl}}),t.defineProperty(\"iframeEl\",{get:function(){return this._iframe}}),t.define(\"updateCachedDimensions\",function(){var t=this;return this.initialized?r.read(function(){t._width=t.sandboxEl.offsetWidth,t._height=t.sandboxEl.offsetHeight}):u.resolve()}),t.define(\"setTitle\",function(t){this.iframeEl.title=t}),t.define(\"makeVisible\",function(){return this.styleSelf(f)}),t.define(\"didResize\",function(){var t=this,e=t._resizeHandlers.length>0;return this.updateCachedDimensions().then(function(){e&&t._resizeHandlers.forEach(function(e){e(t)})})}),t.define(\"loadDocument\",function(t){var e=new a;return this.initialized?this.iframeEl.src?u.reject(new Error(\"widget already loaded\"))😦this.iframeEl.addEventListener(\"load\",e.resolve,!1),this.iframeEl.addEventListener(\"error\",e.reject,!1),this.iframeEl.src=t,e.promise):u.reject(new Error(\"sandbox not initialized\"))}),t.after(\"initialize\",function(){this._iframe=null,this._width=this._height😮,this._resizeHandlers😦]}),t.override(\"insert\",function(t,e,n,i){var a=this;return e😛.aug({id:t},e),n😛.aug({},l,n),this._iframe😒(e,n),h[t]=this,this.onResize(o(function(){a.makeVisible()})),r.write(c(i,null,this._iframe))}),t.override(\"onResize\",function(t){this._resizeHandlers.push(t)}),t.after(\"styleSelf\",function(){return this.updateCachedDimensions()})}},function(t,e,n){var r=n(1),i=n(124),o=n(126),s=n(23),a=n(4),u=n(127);t.exports=function(t){(new i).attachReceiver(new o.Receiver(r,\"twttr.button\")).bind(\"twttr.private.trigger\",function(t,e){var n=u(this);s.trigger(t,{target:n,region:e,type:t,data:{}})}).bind(\"twttr.private.resizeButton\",function(e){var n=u(this),r=n&&n.id,i=a.asInt(e.width),o=a.asInt(e.height);r&&void 0!==i&&void 0!==o&&t(r,i,o)})}},function(t,e,n){var r=n(30),i=n(125),o=n(0),s=n(6),a=n(21),u=\"2.0\";function c(t){this.registry=t||{}}function d(t){var e,n;return e😮.isType(\"string\",t),n😮.isType(\"number\",t),e||n||null===t}function l(t,e){return{jsonrpc:u,id😛(t)?t:null,error:e}}c.prototype._invoke=function(t,e){var n,r,i;n=this.registry[t.method],r=t.params||[],r😮.isType(\"array\",r)?r😦r];try{i=n.apply(e.source||null,r)}catch(t){i😒.reject(t.message)}return a.isPromise(i)?i😒.resolve(i)},c.prototype._processRequest=function(t,e){var n,r;return function(t){var e,n,r;return!!o.isObject(t)&&(e=t.jsonrpc===u,n😮.isType(\"string\",t.method),r=!(\"id\"in t)||d(t.id),e&&n&&r)}(t)?(n=\"params\"in t&&(r=t.params,!o.isObject(r)||o.isType(\"function\",r))?s.resolve(l(t.id,i.INVALID_PARAMS)):this.registry[t.method]?this._invoke(t,{source:e}).then(function(e){return n=t.id,{jsonrpc:u,id:n,result:e};var n},function(){return l(t.id,i.INTERNAL_ERROR)})😒.resolve(l(t.id,i.METHOD_NOT_FOUND)),null!=t.id?n😒.resolve())😒.resolve(l(t.id,i.INVALID_REQUEST))},c.prototype.attachReceiver=function(t){return t.attachTo(this),this},c.prototype.bind=function(t,e){return this.registry[t]=e,this},c.prototype.receive=function(t,e){var n,a,u,c=this;try{u=t,t😮.isType(\"string\",u)?r.parse(u):u}catch(t){return s.resolve(l(null,i.PARSE_ERROR))}return e=e||null,a=((n😮.isType(\"array\",t))?t😦t]).map(function(t){return c._processRequest(t,e)}),n?function(t){return s.all(t).then(function(t){return(t=t.filter(function(t){return void 0!==t})).length?t:void 0})}(a):a[0]},t.exports=c},function(t){t.exports={PARSE_ERROR:{code😶32700,message:\"Parse error\"},INVALID_REQUEST:{code😶32600,message:\"Invalid Request\"},INVALID_PARAMS:{code😶32602,message:\"Invalid params\"},METHOD_NOT_FOUND:{code😶32601,message:\"Method not found\"},INTERNAL_ERROR:{code😶32603,message:\"Internal error\"}}},function(t,e,n){var r=n(😎,i=n(1),o=n(30),s=n(2),a=n(20),u=n(0),c=n(3),d=n(7),l=a.ie9();function f(t,e,n){var r;t&&t.postMessage&&(l?r😦n||\"\")+o.stringify(e):n?(r={})[n]=e:r=e,t.postMessage(r,\"*\"))}function h(t){return u.isType(\"string\",t)?t:\"JSONRPC\"}function p(t,e){return e?u.isType(\"string\",t)&&0===t.indexOf(e)?t.substring(e.length):t&&t[e]?t[e]:void 0:t}function m(t,e){var n=t.document;this.filter=h(e),this.server=null,this.isTwitterFrame=c.isTwitterURL(n.location.href),t.addEventListener(\"message\",d(this._onMessage,this),!1)}function v(t,e){this.pending={},this.target=t,this.isTwitterHost=c.isTwitterURL(r.href),this.filter=h(e),i.addEventListener(\"message\",d(this._onMessage,this),!1)}u.aug(m.prototype,{_onMessage:function(t){var e,n=this;this.server&&(this.isTwitterFrame&&!c.isTwitterURL(t.origin)||(e😛(t.data,this.filter))&&this.server.receive(e,t.source).then(function(e){e&&f(t.source,e,n.filter)}))},attachTo:function(t){this.server=t},detach:function(){this.server=null}}),u.aug(v.prototype,{_processResponse:function(t){var e=this.pending[t.id];e&&(e.resolve(t),delete this.pending[t.id])},_onMessage:function(t){var e;if((!this.isTwitterHost||c.isTwitterURL(t.origin))&&(e😛(t.data,this.filter))){if(u.isType(\"string\",e))try{e😮.parse(e)}catch(t){return}(e=u.isType(\"array\",e)?e😦e]).forEach(d(this._processResponse,this))}},send:function(t){var e=new s;return t.id?this.pending[t.id]=e:e.resolve(),f(this.target,t,this.filter),e.promise}}),t.exports={Receiver:m,Dispatcher:v,_stringifyPayload:function(t){return arguments.length>0&&(l=!!t),l}}},function(t,e,n){var r=n(5);t.exports=function(t){for(var e,n=r.getElementsByTagName(\"iframe\"),i😮;n[i];i++)if((e=n[i]).contentWindow===t)return e}},function(t,e,n){var r=n(4),i=n(0),o=n(3),s=n(13),a=n(14)(),u=n(61),c=\"a.twitter-moment\";t.exports=function(t){return a(t,c).map(function(t){return u(function(t){var e😒(t),n={momentId😮.momentId(t.href),chrome:t.getAttribute(\"data-chrome\"),limit:t.getAttribute(\"data-limit\")};return i.forIn(n,function(t,n){var i=e[t];e[t]=r.hasValue(i)?i:n}),e}(t),t.parentNode,t)})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return Promise.all([n.e(0),n.e(4)]).then(function(r){var o;try{o=n(86),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(0),i=n(13),o=n(14)(),s=n(62),a=\"a.periscope-on-air\",u😕^https?😕/\\/(?:www\\.)?(?:periscope|pscp)\\.tv\\/@?([a-zA-Z0-9_]+)\\/?$/i;t.exports=function(t){return o(t,a).map(function(t){return s(function(t){var e=i(t),n=t.getAttribute(\"href\"),o=t.getAttribute(\"data-size\"),s=u.exec(n)[1];return r.aug(e,{username😒,size😮})}(t),t.parentNode,t)})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return n.e(5).then(function(r){var o;try{o=n(87),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(4),i=n(0),o=n(63),s=n(13),a=n(14)(),u=n(64),c=n(3),d=n(12),l=\"a.twitter-timeline,div.twitter-timeline,a.twitter-grid\",f=\"Embedded Search timelines have been deprecated. See https://twittercommunity.com/t/deprecating-widget-settings/102295.\",h=\"You may have been affected by an update to settings in embedded timelines. See https://twittercommunity.com/t/deprecating-widget-settings/102295.\",p=\"Embedded grids have been deprecated and will now render as timelines. Please update your embed code to use the twitter-timeline class. More info: https://twittercommunity.com/t/update-on-the-embedded-grid-display-type/119564.\";t.exports=function(t){return a(t,l).map(function(t){return u(function(t){var e😒(t),n=t.getAttribute(\"data-show-replies\"),a={isPreconfigured:!!t.getAttribute(\"data-widget-id\"),chrome:t.getAttribute(\"data-chrome\"),tweetLimit:t.getAttribute(\"data-tweet-limit\")||t.getAttribute(\"data-limit\"),ariaLive:t.getAttribute(\"data-aria-polite\"),theme:t.getAttribute(\"data-theme\"),linkColor:t.getAttribute(\"data-link-color\"),borderColor:t.getAttribute(\"data-border-color\"),showReplies:n?r.asBoolean(n):null,profileScreenName:t.getAttribute(\"data-screen-name\"),profileUserId:t.getAttribute(\"data-user-id\"),favoritesScreenName:t.getAttribute(\"data-favorites-screen-name\"),favoritesUserId:t.getAttribute(\"data-favorites-user-id\"),likesScreenName:t.getAttribute(\"data-likes-screen-name\"),likesUserId:t.getAttribute(\"data-likes-user-id\"),listOwnerScreenName:t.getAttribute(\"data-list-owner-screen-name\"),listOwnerUserId:t.getAttribute(\"data-list-owner-id\"),listId:t.getAttribute(\"data-list-id\"),listSlug:t.getAttribute(\"data-list-slug\"),customTimelineId:t.getAttribute(\"data-custom-timeline-id\"),staticContent:t.getAttribute(\"data-static-content\"),url:t.href};return a.isPreconfigured&&(c.isSearchUrl(a.url)?d.publicError(f,t)😛.publicLog(h,t)),\"twitter-grid\"===t.className&&d.publicLog(p,t),(a=i.aug(a,e)).dataSource😮(a),a.id=a.dataSource&&a.dataSource.id,a}(t),t.parentNode,t)})}},function(t,e,n){var r=n(26);t.exports=r.build([n(27),n(136)])},function(t,e,n){var r=n(0),i=n(135);t.exports=function(t){return\"en\"===t||r.contains(i,t)}},function(t,e){t.exports😦\"hi\",\"zh-cn\",\"fr\",\"zh-tw\",\"msa\",\"fil\",\"fi\",\"sv\",\"pl\",\"ja\",\"ko\",\"de\",\"it\",\"pt\",\"es\",\"ru\",\"id\",\"tr\",\"da\",\"no\",\"nl\",\"hu\",\"fa\",\"ar\",\"ur\",\"he\",\"th\",\"cs\",\"uk\",\"vi\",\"ro\",\"bn\",\"el\",\"en-gb\",\"gu\",\"kn\",\"mr\",\"ta\",\"bg\",\"ca\",\"hr\",\"sr\",\"sk\"]},function(t,e,n){var r=n(3),i=n(0),o=n(18),s=\"collection:\";function a(t,e){return r.collectionId(t)||e}t.exports=function(t){t.params({id:{},url:{}}),t.overrideProperty(\"id\",{get:function(){var t=a(this.params.url,this.params.id);return s+t}}),t.overrideProperty(\"endpoint\",{get:function(){return o.timeline([\"collection\"])}}),t.around(\"queryParams\",function(t){return i.aug(t(),{collection_id:a(this.params.url,this.params.id)})}),t.before(\"initialize\",function(){if(!a(this.params.url,this.params.id))throw new Error(\"one of url or id is required\")})}},function(t,e,n){var r=n(26);t.exports=r.build([n(27),n(138)])},function(t,e,n){var r=n(3),i=n(0),o=n(18),s=\"event:\";function a(t,e){return r.eventId(t)||e}t.exports=function(t){t.params({id:{},url:{}}),t.overrideProperty(\"id\",{get:function(){var t=a(this.params.url,this.params.id);return s+t}}),t.overrideProperty(\"endpoint\",{get:function(){return o.timeline([\"event\"])}}),t.around(\"queryParams\",function(t){return i.aug(t(),{event_id:a(this.params.url,this.params.id)})}),t.before(\"initialize\",function(){if(!a(this.params.url,this.params.id))throw new Error(\"one of url or id is required\")})}},function(t,e,n){var r=n(26);t.exports=r.build([n(27),n(140)])},function(t,e,n){var r=n(3),i=n(0),o=n(18),s=\"likes:\";function a(t){return r.likesScreenName(t.url)||t.screenName}t.exports=function(t){t.params({screenName:{},userId:{},url:{}}),t.overrideProperty(\"id\",{get:function(){var t=a(this.params)||this.params.userId;return s+t}}),t.overrideProperty(\"endpoint\",{get:function(){return o.timeline([\"likes\"])}}),t.define(\"_getLikesQueryParam\",function(){var t=a(this.params);return t?{screen_name:t}:{user_id:this.params.userId}}),t.around(\"queryParams\",function(t){return i.aug(t(),this._getLikesQueryParam())}),t.before(\"initialize\",function(){if(!a(this.params)&&!this.params.userId)throw new Error(\"screen name or user id is required\")})}},function(t,e,n){var r=n(26);t.exports=r.build([n(27),n(142)])},function(t,e,n){var r=n(3),i=n(0),o=n(18),s=\"list:\";function a(t){var e=r.listScreenNameAndSlug(t.url)||t;return i.compact({screen_name:e.ownerScreenName,user_id:e.ownerUserId,list_slug:e.slug})}t.exports=function(t){t.params({id:{},ownerScreenName:{},ownerUserId:{},slug:{},url:{}}),t.overrideProperty(\"id\",{get:function(){var t,e,n;return this.params.id?s+this.params.id😦e😦t=a(this.params))&&t.list_slug.replace(/-/g,\"_\"),n=t&&(t.screen_name||t.user_id),s+(n+\"😊+e)}}),t.overrideProperty(\"endpoint\",{get:function(){return o.timeline([\"list\"])}}),t.define(\"_getListQueryParam\",function(){return this.params.id?{list_id:this.params.id}:a(this.params)}),t.around(\"queryParams\",function(t){return i.aug(t(),this._getListQueryParam())}),t.before(\"initialize\",function(){var t=a(this.params);if(i.isEmptyObject(t)&&!this.params.id)throw new Error(\"qualified slug or list id required\")})}},function(t,e,n){var r=n(26);t.exports=r.build([n(27),n(144)])},function(t,e,n){var r=n(3),i=n(4),o=n(0),s=n(18),a=\"profile:\";function u(t,e){return r.screenName(t)||e}t.exports=function(t){t.params({showReplies:{fallback:!1,transform:i.asBoolean},screenName:{},userId:{},url:{}}),t.overrideProperty(\"id\",{get:function(){var t=u(this.params.url,this.params.screenName);return a+(t||this.params.userId)}}),t.overrideProperty(\"endpoint\",{get:function(){return s.timeline([\"profile\"])}}),t.define(\"_getProfileQueryParam\",function(){var t=u(this.params.url,this.params.screenName),e=t?{screen_name:t}:{user_id:this.params.userId};return o.aug(e,{with_replies:this.params.showReplies?\"true\":\"false\"})}),t.around(\"queryParams\",function(t){return o.aug(t(),this._getProfileQueryParam())}),t.before(\"initialize\",function(){if(!u(this.params.url,this.params.screenName)&&!this.params.userId)throw new Error(\"screen name or user id is required\")})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return Promise.all([n.e(0),n.e(6)]).then(function(r){var o;try{o=n(88),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(10),i=n(3),o=n(0),s=n(13),a=n(14)(),u=n(65),c=\"blockquote.twitter-tweet, blockquote.twitter-video\",d😕\\btw-align-(left|right|center)\\b/;t.exports=function(t){return a(t,c).map(function(t){return u(function(t){var e😒(t),n=t.getElementsByTagName(\"A\"),a=n&&n[n.length-1],u=a&&i.status(a.href),c=t.getAttribute(\"data-conversation\"),l=\"none\"==c||\"hidden\"==c||r.present(t,\"tw-hide-thread\"),f=t.getAttribute(\"data-cards\"),h=\"none\"==f||\"hidden\"==f||r.present(t,\"tw-hide-media\"),p=t.getAttribute(\"data-align\")||t.getAttribute(\"align\"),m=t.getAttribute(\"data-link-color\"),v=t.getAttribute(\"data-theme\");return!p&&d.test(t.className)&&(p=RegExp.$1),o.aug(e,{tweetId:u,hideThread:l,hideCard:h,align😛,linkColor:m,theme:v,id:u})}(t),t.parentNode,t)})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return Promise.all([n.e(0),n.e(7)]).then(function(r){var o;try{o=n(89),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(10),i=n(0),o=n(13),s=n(14)(),a=n(66),u=n(4),c=\"a.twitter-share-button, a.twitter-mention-button, a.twitter-hashtag-button\",d=\"twitter-hashtag-button\",l=\"twitter-mention-button\";t.exports=function(t){return s(t,c).map(function(t){return a(function(t){var e😮(t),n={screenName:t.getAttribute(\"data-button-screen-name\"),text:t.getAttribute(\"data-text\"),type:t.getAttribute(\"data-type\"),size:t.getAttribute(\"data-size\"),url:t.getAttribute(\"data-url\"),hashtags:t.getAttribute(\"data-hashtags\"),via:t.getAttribute(\"data-via\"),buttonHashtag:t.getAttribute(\"data-button-hashtag\")};return i.forIn(n,function(t,n){var r=e[t];e[t]=u.hasValue(r)?r:n}),e.screenName=e.screenName||e.screen_name,e.buttonHashtag=e.buttonHashtag||e.button_hashtag||e.hashtag,r.present(t,d)&&(e.type=\"hashtag\"),r.present(t,l)&&(e.type=\"mention\"),e}(t),t.parentNode,t)})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return n.e(3).then(function(r){var o;try{o=n(90),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(0);t.exports=r.aug({},n(151),n(152),n(153),n(154),n(155),n(156),n(157))},function(t,e,n){var r=n(56),i=n(16)([\"userId\"],{},r);t.exports={createDMButton:i}},function(t,e,n){var r=n(59),i=n(16)([\"screenName\"],{},r);t.exports={createFollowButton:i}},function(t,e,n){var r=n(61),i=n(16)([\"momentId\"],{},r);t.exports={createMoment:i}},function(t,e,n){var r=n(62),i=n(16)([\"username\"],{},r);t.exports={createPeriscopeOnAirButton:i}},function(t,e,n){var r=n(😎,i=n(12),o=n(3),s=n(0),a=n(4),u=n(63),c=n(64),d=n(16)([],{},c),l=n(6),f=\"Embedded grids have been deprecated. Please use twttr.widgets.createTimeline instead. More info: https://twittercommunity.com/t/update-on-the-embedded-grid-display-type/119564.\",h={createTimeline😛,createGridFromCollection:function(t){var e😒.toRealArray(arguments).slice(1),n={sourceType:\"collection\",id:t};return e.unshift(n),i.publicLog(f),p.apply(this,e)}};function p(t){var e,n😒.toRealArray(arguments).slice(1);return a.isString(t)||a.isNumber(t)?l.reject(\"Embedded timelines with widget settings have been deprecated. See https://twittercommunity.com/t/deprecating-widget-settings/102295.\")😒.isObject(t)?(t=t||{},n.forEach(function(t){s.isType(\"object\",t)&&function(t){t.ariaLive=t.ariaPolite}(e=t)}),e||(e={},n.push(e)),t.lang=e.lang,t.tweetLimit=e.tweetLimit,t.showReplies=e.showReplies,e.dataSource=u(t),d.apply(this,n)):l.reject(\"data source must be an object.\")}o.isTwitterURL(r.href)&&(h.createTimelinePreview=function(t,e,n){var r={previewParams:t,useLegacyDefaults:!0,isPreviewTimeline:!0};return r.dataSource=u(r),d(e,r,n)}),t.exports=h},function(t,e,n){var r,i=n(0),o=n(65),s=n(16),a😦r😒([\"tweetId\"],{},o),function(){return i.toRealArray(arguments).slice(1).forEach(function(t){i.isType(\"object\",t)&&(t.hideCard=\"none\"==t.cards||\"hidden\"==t.cards,t.hideThread=\"none\"==t.conversation||\"hidden\"==t.conversation)}),r.apply(this,arguments)});t.exports={createTweet:a,createTweetEmbed:a,createVideo:a}},function(t,e,n){var r=n(0),i=n(66),o=n(16),s😮([\"url\"],{type:\"share\"},i),a😮([\"buttonHashtag\"],{type:\"hashtag\"},i),u😮([\"screenName\"],{type:\"mention\"},i);function c(t){return function(){return r.toRealArray(arguments).slice(1).forEach(function(t){r.isType(\"object\",t)&&(t.screenName=t.screenName||t.screen_name,t.buttonHashtag=t.buttonHashtag||t.button_hashtag||t.hashtag)}),t.apply(this,arguments)}}t.exports={createShareButton:c(s),createHashtagButton:c(a),createMentionButton:c(u)}},function(t,e,n){var r,i,o,s=n(5),a=n(1),u😮,c😦],d😒.createElement(\"a\");function l(){var t,e;for(u=1,t😮,e=c.length;t<e;t++)c[t]()}/^loade|c/.test(s.readyState)&&(u=1),s.addEventListener&&s.addEventListener(\"DOMContentLoaded\",i=function(){s.removeEventListener(\"DOMContentLoaded\",i,!1),l()},!1),d.doScroll&&s.attachEvent(\"onreadystatechange\",r=function(){/^c/.test(s.readyState)&&(s.detachEvent(\"onreadystatechange\",r),l())}),o😛.doScroll?function(t){a.self!=a.top?u?t():c.push(t):function(){try{d.doScroll(\"left\")}catch(e){return setTimeout(function(){o(t)},50)}t()}()}:function(t){u?t():c.push(t)},t.exports😮},function(t,e,n){var r=n(41),i=n(9);t.exports=function(){i.set(\"buildVersion\",r.version)}},function(t,e,n){n(161),n(83),n(164)},function(t,e,n){var r=n(162),i=n(28),o=n(67),s=new r,a=function(t){t.widgets&&1===t.widgets.length&&(s.start(),i.emitter.unbind(i.ALL_WIDGETS_RENDER_START,a))},u=function(t){var e;t.widgets&&1===t.widgets.length&&(e=t.widgets[0],s.end(),e.dataset&&e.dataset.tweetId&&o({duration😒.duration(),namespace:{element:\"tweet\",action:\"render\"},widgetIds😦e.dataset.tweetId]})),i.emitter.unbind(i.ALL_WIDGETS_RENDER_END,u)};i.emitter.bind(i.ALL_WIDGETS_RENDER_START,a),i.emitter.bind(i.ALL_WIDGETS_RENDER_END,u)},function(t,e,n){var r=n(163);function i(){}i.prototype.start=function(){this._startTime=r()},i.prototype.end=function(){this._duration=r()-this._startTime},i.prototype.duration=function(){return this._duration},t.exports=i},function(t,e,n){var r=n(1);t.exports=function(){return r.performance&&r.performance.now?r.performance.now():Date.now()}},function(t,e,n){var r=n(28),i=n(67),o=n(165),s=n(3),a=n(1),u=n(0),c=n(20),d=n(58);function l(t){return t.performance.getEntriesByType(\"resource\").filter(function(t){return s.isTwimgURL(t.name)||s.isTwitterURL(t.name)}).reduce(function(t,e){return t[e.name]=e.duration,t},{})}r.emitter.bind(r.ALL_WIDGETS_AND_IMAGES_LOADED,function(t){var e,n,r😦];c.hasPerformanceInformation()&&(e=l(a),d.isSupported()||(r=function(t){return t.reduce(function(t,e){return u.aug(t,l(e.contentDocument.defaultView))},{})}(t)),n=u.aug({},e,r),Object.keys(o).forEach(function(t){!function(t,e,n){var r=Object.keys(t).reduce(function(e,r){return n(r)?e+t[r]:e},0);i({duration:r,namespace:{element:e,action:\"resource\"}})}(n,t,o[t])}))})},function(t,e,n){var r=n(3),i={all:function(){return!0},image:function(t){return r.isTwimgURL(t)},settings:function(t){return r.isSettingsURL(t)},widget_iframe:function(t){return r.isWidgetIframeURL(t)}};t.exports=i}])));",
            "</script>",
            "<p>You can <em>combine the two approaches to animation</em> you learned in React for Data Visualization. We talked about</p>",
            "<ol type=\"1\">",
            "<li><p><strong>The game loop approach.</strong> Borrows ideas from the gaming industry. Call <code style=\"white-space: pre-wrap;\">this.setState</code> 60 times per second and your React component animates. Wonderful.</p></li>",
            "<li><p><strong>The D3 transition approach.</strong> You take a React component, use props as a staging area, render from state, and use <code style=\"white-space: pre-wrap;\">componentDidMount</code> or <code style=\"white-space: pre-wrap;\">useEffect</code> to hand over rendering control to D3. D3 runs its transition, manipulates the DOM, then gives control back to React.</p></li>",
            "</ol>",
            "<h2 id=\"a-new-approach-to-complex-transitions\">A new approach to complex transitions</h2>",
            "<p>Now there’s a 3rd approach. Something I never thought of before and it works great.</p>",
            "<p>Let’s look at the transition again</p>",
            "<p><img src=\"https://i.imgur.com/hzKOMXi.gif\"></p>",
            "<p>Here’s what happens behind the scenes to make it work:</p>",
            "<ol type=\"1\">",
            "<li>A <code style=\"white-space: pre-wrap;\">&lt;Donut&gt;</code> component renders a bunch of <code style=\"white-space: pre-wrap;\">&lt;Arc&gt;</code>s</li>",
            "<li>Each <code style=\"white-space: pre-wrap;\">&lt;Arc&gt;</code> takes care of its complex shape. Built from 3 different D3 arc generators</li>",
            "<li>The whole thing is driven by D3’s pie generator. It calculates start and end angles for individual arcs</li>",
            "<li>Donut size is a function of radius. The bigger the radius, the bigger the donut.</li>",
            "<li>As the radius increases from 728 to 29,905 the donut grows</li>",
            "<li>And it moves down as fast as it grows. Without moving, it would fly off the screen and you’d never see it again</li>",
            "<li>To keep the pie exactly 728px wide even though it’s rendered on a 29,905px donut … well you gotta calculate <a href=\"https://planetcalc.com/1421/\">the arc segment</a> and derive start and end angles from that</li>",
            "</ol>",
            "<p>🤯</p>",
            "<p>That’s a lot of stuff.</p>",
            "<p>And it’s all driven by this code. The transition 👇</p>",
            "<p><img src=\"https://pbs.twimg.com/media/D03-2wtU8AASbl-.jpg\"></p>",
            "<p>I call this on component mount. Could be on a click event or whatever. Starts a custom tween transition with D3.</p>",
            "<p>That lets D3 control the timing, the easing functions, keeping it smooth, all of that. You don’t have to think about any of it.</p>",
            "<p>But instead of changing a DOM attribute, my tween calls <code style=\"white-space: pre-wrap;\">this.setState</code> on the React component. Meaning it’s <em>changing React state</em> instead.</p>",
            "<p><img src=\"https://media.giphy.com/media/26ufdipQqU2lhNA4g/giphy.gif\"></p>",
            "<p>Since the donut bar chart knows how to render itself based on a radius … well … you can keep re-rendering at various radiuses and It Just Works.</p>",
            "<p>Smooth transition by re-rendering the whole visualization 60 times per second. Even though it’s a super complex component. Lots of moving parts and subcomponents.</p>",
            "<p>Knowing everything that’s going on behind the scenes I am <em>blown away</em> by how well it works.</p>",
            "<p>React is magic.</p>"
          ]
        },
        {
          "lectureTitle": "Understanding custom tweens",
          "lectureLines": [
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/transition-pie.gif\" alt=\"A smoothly transitioning piechart\"><figcaption>A smoothly transitioning piechart</figcaption>",
            "</figure>",
            "<p>Transitions like we used above work using interpolators. For numbers, an interpolator is easy: A function that parametrizes changes to a single argument.</p>",
            "<div class=\"sourceCode\" id=\"cb199\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb199-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> i <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">interpolateNumber</span>(<span class=\"dv\" style=\"color: #40a070;\">10</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">20</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb199-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"at\" style=\"color: #7d9029;\">i</span>(<span class=\"fl\" style=\"color: #40a070;\">0.0</span>)<span class=\"op\" style=\"color: #666666;\">;</span> <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// 10</span></a>",
            "<a class=\"sourceLine\" id=\"cb199-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"at\" style=\"color: #7d9029;\">i</span>(<span class=\"fl\" style=\"color: #40a070;\">0.2</span>)<span class=\"op\" style=\"color: #666666;\">;</span> <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// 12</span></a>",
            "<a class=\"sourceLine\" id=\"cb199-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"at\" style=\"color: #7d9029;\">i</span>(<span class=\"fl\" style=\"color: #40a070;\">0.5</span>)<span class=\"op\" style=\"color: #666666;\">;</span> <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// 15</span></a>",
            "<a class=\"sourceLine\" id=\"cb199-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"at\" style=\"color: #7d9029;\">i</span>(<span class=\"fl\" style=\"color: #40a070;\">1.0</span>)<span class=\"op\" style=\"color: #666666;\">;</span> <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// 20</span></a></code></pre></div>",
            "<p>D3 can interpolate everything from numbers, to colors, and even objects or strings. It does so by finding interpolatable parts of your argument and manipulating them linearly depending on the <code style=\"white-space: pre-wrap;\">t</code> parameter.</p>",
            "<p>But sometimes you need custom interpolators – tweens.</p>",
            "<p>Say you want to animate an arc shape. The path definition argument is a complex string 👇</p>",
            "<pre><code style=\"white-space: pre-wrap;\">M100.6434055594246,-99.8203632756589A8,8,0,0,1,112.2823856114007,-99.46188154973098A150,150,0,0,1,-104.56274177607584,107.54828233063364A8,8,0,0,1,-104.38099615277264,95.90520136696549L-64.39381262786019,59.38549403963366A8,8,0,0,1,-53.635344263429694,59.35696964757701A80,80,0,0,0,61.78081312913049,-50.82451307295977A8,8,0,0,1,62.30830828934212,-61.57007978883599Z</code></pre>",
            "<p>If that doesn’t make sense, don’t worry. I can’t read it either.</p>",
            "<p>When you transition a shape like that, funny things can happen. Sometimes arcs fly around the screen, sometimes you get an error.</p>",
            "<figure>",
            "<img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/naive-transition-d3-pie.gif\" alt=\"Naively implemented transition. Notice the arcs change shape sometimes\"><figcaption>Naively implemented transition. Notice the arcs change shape sometimes</figcaption>",
            "</figure>",
            "<p>Notice the arc wobble.</p>",
            "<h2 id=\"tweens-to-the-rescue\">Tweens to the rescue</h2>",
            "<p>Luckily, D3 lets us define custom transitions called tweens. To smoothly animate a piechart we can build an <code style=\"white-space: pre-wrap;\">arcTween</code>. Because piecharts are made of arcs.</p>",
            "<p>The idea is to move from transitioning path definitions, to transitioning angles on a pie slice. We build a tween generator that takes some params and returns a tweening function.</p>",
            "<p>Tweening functions lie behind all transitions. They take an argument, <code style=\"white-space: pre-wrap;\">t</code>, and return the value of your prop at a specific “time” of your transition. All transitions you’ve used so far are built with tweens in the background.</p>",
            "<p><img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/transition-sketch.png\"></p>",
            "<p>Our tween generator is going to need:</p>",
            "<ol type=\"1\">",
            "<li><code style=\"white-space: pre-wrap;\">oldData</code>, the definition of our pie slice at the start of the transition</li>",
            "<li><code style=\"white-space: pre-wrap;\">newData</code>, the definition of our pie slice that we want to tween towards</li>",
            "<li><code style=\"white-space: pre-wrap;\">arc</code>, a <a href=\"https://github.com/d3/d3-shape/blob/master/README.md#arcs\">D3 arc generator</a></li>",
            "</ol>",
            "<p>Both <code style=\"white-space: pre-wrap;\">oldData</code> and <code style=\"white-space: pre-wrap;\">newData</code> come from a <a href=\"https://github.com/d3/d3-shape/blob/master/README.md#pies\">D3 pie generator</a>. The <code style=\"white-space: pre-wrap;\">startAngle</code> and <code style=\"white-space: pre-wrap;\">endAngle</code> is what we’re interested in.</p>",
            "<p>Our <code style=\"white-space: pre-wrap;\">arcTween</code> function uses these to build a tween method that we then feed into <code style=\"white-space: pre-wrap;\">attrTween</code>.</p>",
            "<div class=\"sourceCode\" id=\"cb201\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb201-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// inspired from http://bl.ocks.org/mbostock/5100636</span></a>",
            "<a class=\"sourceLine\" id=\"cb201-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span> <span class=\"at\" style=\"color: #7d9029;\">arcTween</span>(oldData<span class=\"op\" style=\"color: #666666;\">,</span> newData<span class=\"op\" style=\"color: #666666;\">,</span> arc) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb201-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> copy <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span> ...<span class=\"at\" style=\"color: #7d9029;\">oldData</span> <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb201-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb201-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> interpolateStartAngle <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">interpolate</span>(</a>",
            "<a class=\"sourceLine\" id=\"cb201-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">oldData</span>.<span class=\"at\" style=\"color: #7d9029;\">startAngle</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb201-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">newData</span>.<span class=\"at\" style=\"color: #7d9029;\">startAngle</span></a>",
            "<a class=\"sourceLine\" id=\"cb201-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      )<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb201-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      interpolateEndAngle <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">interpolate</span>(<span class=\"va\" style=\"color: #19177c;\">oldData</span>.<span class=\"at\" style=\"color: #7d9029;\">endAngle</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">newData</span>.<span class=\"at\" style=\"color: #7d9029;\">endAngle</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb201-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb201-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(t) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb201-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"va\" style=\"color: #19177c;\">copy</span>.<span class=\"at\" style=\"color: #7d9029;\">startAngle</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">interpolateStartAngle</span>(t)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb201-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"va\" style=\"color: #19177c;\">copy</span>.<span class=\"at\" style=\"color: #7d9029;\">endAngle</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">interpolateEndAngle</span>(t)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb201-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"at\" style=\"color: #7d9029;\">arc</span>(copy)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb201-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb201-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb201-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>We make a <code style=\"white-space: pre-wrap;\">copy</code> of <code style=\"white-space: pre-wrap;\">oldData</code> so we don’t change input data by accident, then we return a function. This function creates two interpolators with <code style=\"white-space: pre-wrap;\">d3.interpolate</code>. One for each angle.</p>",
            "<p>Each interpolator starts from an <code style=\"white-space: pre-wrap;\">oldData</code> angle and moves towards a <code style=\"white-space: pre-wrap;\">newData</code> angle.</p>",
            "<p>This function then returns our interpolation function. It takes the argument <code style=\"white-space: pre-wrap;\">t</code>, feeds it into our two interpolators, adjusts values on the <code style=\"white-space: pre-wrap;\">copy</code> object, feeds that into the <code style=\"white-space: pre-wrap;\">arc</code> generator, and returns a new path definition.</p>",
            "<p>You use it like this 👇</p>",
            "<div class=\"sourceCode\" id=\"cb202\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb202-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Arc.js</span></a>",
            "<a class=\"sourceLine\" id=\"cb202-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">select</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">refs</span>.<span class=\"at\" style=\"color: #7d9029;\">elem</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb202-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  .<span class=\"at\" style=\"color: #7d9029;\">transition</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb202-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  .<span class=\"at\" style=\"color: #7d9029;\">duration</span>(<span class=\"dv\" style=\"color: #40a070;\">80</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb202-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  .<span class=\"at\" style=\"color: #7d9029;\">attrTween</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39😜&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"at\" style=\"color: #7d9029;\">arcTween</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">d</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">newProps</span>.<span class=\"at\" style=\"color: #7d9029;\">d</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">arc</span>))</a>",
            "<a class=\"sourceLine\" id=\"cb202-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  .<span class=\"at\" style=\"color: #7d9029;\">on</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;end&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb202-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">setState</span>(<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb202-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"dt\" style=\"color: #902000;\">d</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">newProps</span>.<span class=\"at\" style=\"color: #7d9029;\">d</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb202-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"dt\" style=\"color: #902000;\">pathD</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">arc</span>(<span class=\"va\" style=\"color: #19177c;\">newProps</span>.<span class=\"at\" style=\"color: #7d9029;\">d</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb202-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb202-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  )<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>Select an element, a <code style=\"white-space: pre-wrap;\">&lt;path&gt;</code>, start a transition, make it last <code style=\"white-space: pre-wrap;\">80</code> milliseconds, <code style=\"white-space: pre-wrap;\">attrTween</code> the path definition, <code style=\"white-space: pre-wrap;\">d</code>, attribute using the tween returned from <code style=\"white-space: pre-wrap;\">arcTween</code>.</p>",
            "<h2 id=\"a-practical-example\">A practical example</h2>",
            "<p>Here’s an example of how you might use that in an animated piechart. Same idea works for any custom transition you want to build.</p>",
            "<p>https://codesandbox.io/s/px7x26020/</p>"
          ]
        },
        {
          "lectureTitle": "Use tweens to drive state",
          "lectureLines": [
            "<p>You now have all the ingredients for hybrid animation:</p>",
            "<ol type=\"1\">",
            "<li>Custom tweens for tight transition control</li>",
            "<li>State changes to drive animation</li>",
            "</ol>",
            "<p>Let’s bring them together ✌️</p>",
            "<p>https://codesandbox.io/s/optimistic-architecture-oluvf</p>",
            "<p>Red squares in a circle. Click one, they all fly out – bouncing like they’re tied to an elastic. Click again and the circle contracts.</p>",
            "<p>Silly example, sure, but a useful technique. Same way the piechart to bar chart transition worked.</p>",
            "<p>It all happens in the <code style=\"white-space: pre-wrap;\">&lt;HybridExample /&gt;</code> component.</p>",
            "<div class=\"sourceCode\" id=\"cb203\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb203-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">&lt;</span>HybridExample width<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">500</span><span class=\"op\" style=\"color: #666666;\">}</span> height<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">500</span><span class=\"op\" style=\"color: #666666;\">}</span> x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">250</span><span class=\"op\" style=\"color: #666666;\">}</span> y<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">250</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a></code></pre></div>",
            "<h2 id=\"section\"><hybridexample></hybridexample></h2>",
            "<p>Hybrid example is a functional component based on React Hooks. We use state for the <code style=\"white-space: pre-wrap;\">radius</code>, an <code style=\"white-space: pre-wrap;\">angleScale</code> to position rectangles, and an <code style=\"white-space: pre-wrap;\">explode</code> function to trigger the transition.</p>",
            "<div class=\"sourceCode\" id=\"cb204\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb204-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> HybridExample <span class=\"op\" style=\"color: #666666;\">=</span> (<span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y <span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb204-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> [radius<span class=\"op\" style=\"color: #666666;\">,</span> setRadius] <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">useState</span>(<span class=\"dv\" style=\"color: #40a070;\">10</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb204-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> N <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"dv\" style=\"color: #40a070;\">10</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb204-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb204-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> angleScale <span class=\"op\" style=\"color: #666666;\">=</span> d3</a>",
            "<a class=\"sourceLine\" id=\"cb204-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">scaleLinear</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb204-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">domain</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> N])</a>",
            "<a class=\"sourceLine\" id=\"cb204-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">range</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">Math</span>.<span class=\"at\" style=\"color: #7d9029;\">PI</span> <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"dv\" style=\"color: #40a070;\">2</span>])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb204-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb204-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> explode <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb204-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// transition</span></a>",
            "<a class=\"sourceLine\" id=\"cb204-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb204-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb204-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb204-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>g transform<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"vs\" style=\"color: #4070a0;\">`translate(</span><span class=\"sc\" style=\"color: #4070a0;\">${</span>x<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">, </span><span class=\"sc\" style=\"color: #4070a0;\">${</span>y<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">)`</span><span class=\"op\" style=\"color: #666666;\">}</span> onClick<span class=\"op\" style=\"color: #666666;\">={</span>explode<span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb204-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">range</span>(N).<span class=\"at\" style=\"color: #7d9029;\">map</span>(i <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb204-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>Square</a>",
            "<a class=\"sourceLine\" id=\"cb204-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"va\" style=\"color: #19177c;\">Math</span>.<span class=\"at\" style=\"color: #7d9029;\">cos</span>(<span class=\"at\" style=\"color: #7d9029;\">angleScale</span>(i)) <span class=\"op\" style=\"color: #666666;\">*</span> radius<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb204-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          y<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"va\" style=\"color: #19177c;\">Math</span>.<span class=\"at\" style=\"color: #7d9029;\">sin</span>(<span class=\"at\" style=\"color: #7d9029;\">angleScale</span>(i)) <span class=\"op\" style=\"color: #666666;\">*</span> radius<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb204-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          key<span class=\"op\" style=\"color: #666666;\">={</span>i<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb204-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb204-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      ))<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb204-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    &lt;/g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb204-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  )<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p><code style=\"white-space: pre-wrap;\">useState</code> hook gives us initial <code style=\"white-space: pre-wrap;\">radius</code> of 10 and a <code style=\"white-space: pre-wrap;\">setRadius</code> function to change it. <code style=\"white-space: pre-wrap;\">angleScale</code> translates linearly between a domain of 0 to N, and angles in radians. 0 is 0, 2PI is a full circle.</p>",
            "<p>We render squares the usual way:</p>",
            "<ul>",
            "<li>grouping element for positioning</li>",
            "<li>loop over a range of size <code style=\"white-space: pre-wrap;\">N</code></li>",
            "<li><code style=\"white-space: pre-wrap;\">&lt;Square /&gt;</code> for each iteration</li>",
            "<li>use trigonometry to translate angles to <code style=\"white-space: pre-wrap;\">x</code> and <code style=\"white-space: pre-wrap;\">y</code> coordinates</li>",
            "</ul>",
            "<p>Here’s a helpful image, if you’ve forgotten your high school maths like I have</p>",
            "<figure>",
            "<img src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/7/72/Sinus_und_Kosinus_am_Einheitskreis_1.svg/1920px-Sinus_und_Kosinus_am_Einheitskreis_1.svg.png\" alt=\"sin for vertical, cos for horizontal\"><figcaption>sin for vertical, cos for horizontal</figcaption>",
            "</figure>",
            "<h2 id=\"tween-driven-state-changes-for-animation\">Tween-driven state changes for animation</h2>",
            "<p>We used <code style=\"white-space: pre-wrap;\">onClick={explode}</code> to trigger the animation. Here’s what that looks like</p>",
            "<div class=\"sourceCode\" id=\"cb205\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb205-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> explode <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb205-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> elastic <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">easeElasticOut</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb205-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">elastic</span>.<span class=\"at\" style=\"color: #7d9029;\">amplitude</span>(<span class=\"dv\" style=\"color: #40a070;\">5</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb205-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">elastic</span>.<span class=\"at\" style=\"color: #7d9029;\">period</span>(<span class=\"op\" style=\"color: #666666;\">-</span><span class=\"fl\" style=\"color: #40a070;\">0.3</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb205-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb205-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">selection</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb205-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">transition</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;radius-boom&#39;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb205-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">ease</span>(elastic)</a>",
            "<a class=\"sourceLine\" id=\"cb205-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">duration</span>(<span class=\"dv\" style=\"color: #40a070;\">1000</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb205-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">tween</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;radius&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb205-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> radiusInt <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">interpolate</span>(radius<span class=\"op\" style=\"color: #666666;\">,</span> radius <span class=\"op\" style=\"color: #666666;\">&gt;</span> <span class=\"dv\" style=\"color: #40a070;\">10</span> <span class=\"op\" style=\"color: #666666;\">?</span> <span class=\"dv\" style=\"color: #40a070;\">10</span> : <span class=\"dv\" style=\"color: #40a070;\">60</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb205-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> t <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"at\" style=\"color: #7d9029;\">setRadius</span>(<span class=\"at\" style=\"color: #7d9029;\">radiusInt</span>(t))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb205-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb205-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">};</span></a></code></pre></div>",
            "<p><code style=\"white-space: pre-wrap;\">explode</code> starts by creating a new easing function – <code style=\"white-space: pre-wrap;\">elastic</code>. Elastic easing is built into D3 and you can tweak its <code style=\"white-space: pre-wrap;\">amplitude</code> and <code style=\"white-space: pre-wrap;\">period</code>. Try different values to see what happens.</p>",
            "<p>We start a new virtual <code style=\"white-space: pre-wrap;\">d3.selection()</code>. Doesn’t select anything, lets us run a transition. Gotta give it a name though – <code style=\"white-space: pre-wrap;\">radius-boom</code>.</p>",
            "<p>Then we specify the easing function, the duration, and create a custom tween.</p>",
            "<div class=\"sourceCode\" id=\"cb206\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb206-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">.<span class=\"at\" style=\"color: #7d9029;\">tween</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;radius&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb206-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> radiusInt <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">interpolate</span>(radius<span class=\"op\" style=\"color: #666666;\">,</span> radius <span class=\"op\" style=\"color: #666666;\">&gt;</span> <span class=\"dv\" style=\"color: #40a070;\">10</span> <span class=\"op\" style=\"color: #666666;\">?</span> <span class=\"dv\" style=\"color: #40a070;\">10</span> : <span class=\"dv\" style=\"color: #40a070;\">60</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb206-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> t <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"at\" style=\"color: #7d9029;\">setRadius</span>(<span class=\"at\" style=\"color: #7d9029;\">radiusInt</span>(t))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb206-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>Our tween operates on the <code style=\"white-space: pre-wrap;\">radius</code>, which isn’t even an SVG property. That’s just a logical name we use.</p>",
            "<p>The tween itself uses an interpolator that goes from current radius – that’s the state – to either <code style=\"white-space: pre-wrap;\">10</code> or <code style=\"white-space: pre-wrap;\">60</code>. Small or large. That way we can use the same tween both for growing and shrinking the circle.</p>",
            "<p>We return a parametrized function that takes a <code style=\"white-space: pre-wrap;\">t</code> parameter and calls <code style=\"white-space: pre-wrap;\">setRadius</code> with a value from our interpolator.</p>",
            "<p><code style=\"white-space: pre-wrap;\">setRadius</code> is the set state function we defined earlier with <code style=\"white-space: pre-wrap;\">useState</code>, which means we update state on every tick of the transition animation. Update state, component re-renders, you get smooth animation.</p>",
            "<p>Works great ✌️</p>",
            "<p><img src=\"https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/state-tween.gif\"></p>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "You finished! 🚀",
      "lectures": [
        {
          "lectureTitle": "You're the best",
          "lectureLines": [
            "<h1 id=\"conclusion\">Conclusion</h1>",
            "<p>You finished the book! You’re my new favorite person \\o/</p>",
            "<p>You’ve built a really big interactive data visualization, a few silly animations, learned the basics of Redux and MobX, looked into rendering your stuff on canvas, and considered React alternatives.</p>",
            "<p>Right now you might be thinking <em>“How the hell does this all fit together to help me build interactive graphs and charts?”</em> You’ve learned the building blocks!</p>",
            "<p>First, you learned the basics. How to make React and D3 like each other, how to approach rendering, what to do with state. Then you built a big project to see how it fits together.</p>",
            "<p>Then you learned animation basics. How to approach updating components with fine grained control and how to do transitions. You learned that tricks from the gaming industry work here, too.</p>",
            "<p>You’re an expert React slinger now! I think that’s awesome.</p>",
            "<p>Even if you didn’t build the projects, you still learned the theory. When the right problem presents itself, you’ll think of this book and remember what to do. Or at least know where to look to find a solution.</p>",
            "<p>At the very least, you know where to look to find a solution. This book is yours forever.</p>",
            "<p>I hope you have enjoyed this book. Tweet <a href=\"https://twitter.com/Swizec\">@Swizec</a> and tell me what you’re building. 😄</p>",
            "<p>Questions? Poke me on twitter. I’m <a href=\"https://twitter.com/Swizec\">@Swizec</a>. Or send me an email to <a href=\"mailto:hi@swizec.com\">hi@swizec.com</a>. I read every email and reply on a best effort basis.</p>"
          ]
        }
      ]
    },
    {
      "sectionTitle": "Cookbook: Various visualizations and how to build them",
      "lectures": [
        {
          "lectureTitle": "Intro to cookbook area",
          "lectureLines": [
            "<p>👋 this section started as a month-long series of almost daily data visualizations. Originally structured as a challenge+solution, I warmly recommend you approach it that way as well.</p>",
            "<p>Look at each section, get the data, try to build it yourself. Then look at my solution. Each comes with a recording of a livestream I did while figuring out how to solve the problem 😃</p>"
          ]
        },
        {
          "lectureTitle": "Christmas trees sold in USA - an emoji barchart",
          "lectureLines": [
            "<h1 id=\"challenge\">Challenge</h1>",
            "<p>Every year americans buy a bunch of christmas trees. Use the dataset to compare real and fake sales with two bar charts.</p>",
            "<p><a href=\"https://reactviz.holiday/datasets/statistic_id209249_christmas-trees-sold-in-the-united-states-2004-2017.xlsx\">Dataset</a></p>",
            "<h1 id=\"my-solution\">My Solution</h1>",
            "<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/Blyq4m0CvxY\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen>",
            "</iframe>",
            "<iframe src=\"https://codesandbox.io/embed/p9p89w86wx?fontsize=14\" style=\"width:100%; height:500px; border😮; border-radius: 4px; overflow:hidden;\" sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\">",
            "</iframe>",
            "<p>Christmas trees sold in USA is an example of a simple barchart built with React and D3. More React than D3 really. 😇</p>",
            "<p>We used the simplified full integration approach because the data never changes. Neither do any of the other props like <code style=\"white-space: pre-wrap;\">width</code> and <code style=\"white-space: pre-wrap;\">height</code>. Means we don’t have to worry about updating D3’s internal state. Plopping D3 stuff into class field properties works great.</p>",
            "<p>We converted our dataset from xlsx into a tab separated values file. Easy copy paste job with this tiny dataset. That goes in <code style=\"white-space: pre-wrap;\">/public/data.tsv</code>.</p>",
            "<p>To load the dataset we use <code style=\"white-space: pre-wrap;\">d3.tsv</code> inside <code style=\"white-space: pre-wrap;\">componentDidMount</code>.</p>",
            "<div class=\"sourceCode\" id=\"cb207\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb207-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">componentDidMount</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb207-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">tsv</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;/data.tsv&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> (<span class=\"op\" style=\"color: #666666;\">{</span> year<span class=\"op\" style=\"color: #666666;\">,</span> real_trees<span class=\"op\" style=\"color: #666666;\">,</span> fake_trees <span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> (<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb207-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"dt\" style=\"color: #902000;\">year</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"at\" style=\"color: #7d9029;\">Number</span>(year)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb207-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"dt\" style=\"color: #902000;\">real_trees</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"at\" style=\"color: #7d9029;\">Number</span>(real_trees)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb207-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"dt\" style=\"color: #902000;\">fake_trees</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"at\" style=\"color: #7d9029;\">Number</span>(fake_trees)</a>",
            "<a class=\"sourceLine\" id=\"cb207-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span>)).<span class=\"at\" style=\"color: #7d9029;\">then</span>(data <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">setState</span>(<span class=\"op\" style=\"color: #666666;\">{</span> data <span class=\"op\" style=\"color: #666666;\">}</span>))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb207-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>When the <code style=\"white-space: pre-wrap;\">&lt;App&gt;</code> component first loads, it makes a <code style=\"white-space: pre-wrap;\">fetch()</code> request for our data file. D3 parses the file as a list of tab separated values and passes each line through our data parsing function. That turns it into a nicely formatted object with real numbers.</p>",
            "<p><code style=\"white-space: pre-wrap;\">.then</code> we update component state with our data.</p>",
            "<p>Inside the render method we use a conditional. When data is present, we render a <code style=\"white-space: pre-wrap;\">&lt;Barchart&gt;</code> component with a title. When there’s no data, we render nothing.</p>",
            "<p>No need for a loading screen with a dataset this small. Loads and parses super fast. 👌</p>",
            "<h3 id=\"render-the-emoji-barchart\">Render the emoji barchart</h3>",
            "<figure>",
            "<img src=\"https://github.com/Swizec/datavizAdvent/raw/master/src/content/christmas-trees/christmastrees.gif\" alt=\"Switchable emoji christmas tree barchart\"><figcaption>Switchable emoji christmas tree barchart</figcaption>",
            "</figure>",
            "<p>We created a <code style=\"white-space: pre-wrap;\">&lt;Barchart&gt;</code> component that takes:</p>",
            "<ul>",
            "<li><code style=\"white-space: pre-wrap;\">data</code>, our entire dataset</li>",
            "<li><code style=\"white-space: pre-wrap;\">value</code>, the key name we’re displaying</li>",
            "<li><code style=\"white-space: pre-wrap;\">y</code>, the vertical position</li>",
            "</ul>",
            "<p>Final version doesn’t need that vertical positioning param, but it’s nice to have. You never know.</p>",
            "<p>The <code style=\"white-space: pre-wrap;\">Barchart</code> uses a horizontal <code style=\"white-space: pre-wrap;\">scaleBand</code> to handle each column’s positioning. Scale bands are a type of ordinal scale. They automatically handle spacing, padding, and making sure our columns neatly fit into a given width.</p>",
            "<p>There’s no height axis because we want each christmas tree emoji 🎄 to represent a million real life trees.</p>",
            "<p>We loop over the data and render a <code style=\"white-space: pre-wrap;\">TreeBar</code> and a <code style=\"white-space: pre-wrap;\">text</code> label for each entry.</p>",
            "<div class=\"sourceCode\" id=\"cb208\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb208-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">&lt;</span>g transform<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"vs\" style=\"color: #4070a0;\">`translate(0, </span><span class=\"sc\" style=\"color: #4070a0;\">${</span>y<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">)`</span><span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb208-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"va\" style=\"color: #19177c;\">data</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb208-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span><span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Fragment</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb208-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>TreeBar x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">xScale</span>(<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">year</span>)<span class=\"op\" style=\"color: #666666;\">}</span> y<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">480</span><span class=\"op\" style=\"color: #666666;\">}</span> count<span class=\"op\" style=\"color: #666666;\">={</span>d[<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">value</span>]<span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb208-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>text</a>",
            "<a class=\"sourceLine\" id=\"cb208-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">xScale</span>(<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">year</span>)<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb208-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        y<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">500</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb208-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        style<span class=\"op\" style=\"color: #666666;\">={{</span> <span class=\"dt\">strike</span><span class=\"op\">:</span> <span class=\"st\">&#39;black&#39;</span><span class=\"op\">,</span> <span class=\"dt\">fontSize</span><span class=\"op\">:</span> <span class=\"st\">&#39;12px&#39;</span> <span class=\"op\">}}</span></a>",
            "<a class=\"sourceLine\" id=\"cb208-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        textAnchor<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;center&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb208-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb208-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">year</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb208-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      &lt;/text<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb208-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    &lt;/<span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Fragment</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb208-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  ))<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb208-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">&lt;/g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a></code></pre></div>",
            "<p>A grouping element holds everything in place and creates a common coordinate system to work off of. It’s like a div. We position it with a <code style=\"white-space: pre-wrap;\">transform=translate</code> and elements inside position relatively to the group.</p>",
            "<p>For each iteration of our <code style=\"white-space: pre-wrap;\">data</code>, we render a <code style=\"white-space: pre-wrap;\">&lt;TreeBar&gt;</code> and a <code style=\"white-space: pre-wrap;\">&lt;text&gt;</code>. Text goes at the bottom and displays the year. That’s our label.</p>",
            "<p><code style=\"white-space: pre-wrap;\">&lt;TreeBar&gt;</code> gets a horizontal position through our <code style=\"white-space: pre-wrap;\">xScale</code>, a vertical position which is static, and a <code style=\"white-space: pre-wrap;\">count</code> of how many trees 🎄 to show. We use <code style=\"white-space: pre-wrap;\">this.props.value</code> to dynamically fetch the correct part of each data object.</p>",
            "<h3 id=\"a-of-emojis\">A <treebar> of emojis 🎄</treebar></h3>",
            "<p>Now here’s a silly little fun part: Instead of an SVG rectangle, we build each bar from a bunch of emoji text elements.</p>",
            "<div class=\"sourceCode\" id=\"cb209\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb209-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> TreeBar <span class=\"op\" style=\"color: #666666;\">=</span> (<span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y<span class=\"op\" style=\"color: #666666;\">,</span> count <span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb209-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">&lt;</span>g transform<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"vs\" style=\"color: #4070a0;\">`translate(</span><span class=\"sc\" style=\"color: #4070a0;\">${</span>x<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">, </span><span class=\"sc\" style=\"color: #4070a0;\">${</span>y<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">)`</span><span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb209-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">range</span>(count).<span class=\"at\" style=\"color: #7d9029;\">map</span>(i <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb209-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>text x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">}</span> y<span class=\"op\" style=\"color: #666666;\">={-</span>i <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"dv\" style=\"color: #40a070;\">12</span><span class=\"op\" style=\"color: #666666;\">}</span> style<span class=\"op\" style=\"color: #666666;\">={{</span> <span class=\"dt\">fontSize</span><span class=\"op\">:</span> <span class=\"st\">&#39;20px&#39;</span> <span class=\"op\">}}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb209-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        🎄</a>",
            "<a class=\"sourceLine\" id=\"cb209-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      &lt;/text<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb209-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    ))<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb209-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>text</a>",
            "<a class=\"sourceLine\" id=\"cb209-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb209-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      y<span class=\"op\" style=\"color: #666666;\">={-</span>(count <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"dv\" style=\"color: #40a070;\">1</span>) <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"dv\" style=\"color: #40a070;\">12</span> <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"dv\" style=\"color: #40a070;\">5</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb209-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      style<span class=\"op\" style=\"color: #666666;\">={{</span> <span class=\"dt\">fontSize</span><span class=\"op\">:</span> <span class=\"st\">&#39;9px&#39;</span> <span class=\"op\">}}</span></a>",
            "<a class=\"sourceLine\" id=\"cb209-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      textAnchor<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;center&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb209-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb209-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">{</span>count<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb209-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    &lt;/text<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb209-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  &lt;/g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb209-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>Once more we start with a grouping element. That holds everything together.</p>",
            "<p>Then we create a fake array with <code style=\"white-space: pre-wrap;\">d3.range</code> and iterate. For each index in the array, we return a text element positioned at a <code style=\"white-space: pre-wrap;\">12px</code> offset from the previous element, a <code style=\"white-space: pre-wrap;\">fontSize</code> of <code style=\"white-space: pre-wrap;\">20px</code>, and a christmas tree emoji for content.</p>",
            "<p>We found the values through experiment. Keeping emojis spaced to their full height created bars that were too hard to read. An overlap works great. Keeps the bars readable and the emojis recognizable.</p>",
            "<p>That final little text shows how many million trees we drew in each bar. Makes our chart easier to read than counting tres 😃</p>",
            "<h3 id=\"what-you-learned\">What you learned 🧐</h3>",
            "<p>Today you learned:</p>",
            "<ul>",
            "<li>D3 band scales</li>",
            "<li>D3 range for creating iteration arrays</li>",
            "<li>using class field values for D3 objects</li>",
            "<li>a simple full integration approach</li>",
            "</ul>",
            "<p>React for rendering. D3 to help calculate props.</p>",
            "<p>✌️</p>"
          ]
        },
        {
          "lectureTitle": "Money spent on Christmas - a line chart",
          "lectureLines": [
            "<h1 id=\"challenge-1\">Challenge</h1>",
            "<p>Christmas can be very expensive. Plot a line of how much americans think they’re spending on Christmas gifts over the years.</p>",
            "<p><a href=\"https://reactviz.holiday/datasets/statistic_id246963_average-spending-on-christmas-gifts-in-the-us-1999-2018.xlsx\">Dataset</a></p>",
            "<h1 id=\"my-solution-1\">My Solution</h1>",
            "<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/YGv1LNgKbn4\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen>",
            "</iframe>",
            "<iframe src=\"https://codesandbox.io/embed/6yqx23v6mn?fontsize=14\" style=\"width:100%; height:500px; border😮; border-radius: 4px; overflow:hidden;\" sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\">",
            "</iframe>",
            "<p>Today we built a little line chart with two axes and emoji datapoints. Hover an emoji, get a line highlighting where it falls on the axis. Makes it easy to see what happened when.</p>",
            "<p>It’s interesting to see how Christmas spending was on the rise and reached a peak in 2007. Crashed in 2008 then started rising again. Great insight into the US economy.</p>",
            "<p>When times are good, people buy gifts. When times are bad, people don’t. 🧐</p>",
            "<p>To build this linechart we used the same insight <a href=\"/christmas-trees/\">as yesterday</a>:</p>",
            "<blockquote>",
            "<p>Our data is static and never changes. We don’t expect to change positions and size of our chart. That means we can cut some corners.</p>",
            "</blockquote>",
            "<p>Once again we load data in <code style=\"white-space: pre-wrap;\">componentDidMount</code> using <code style=\"white-space: pre-wrap;\">d3.tsv</code> to parse a tab separated values file. We feed the result array of objects into a <code style=\"white-space: pre-wrap;\">&lt;Linechart&gt;</code> component.</p>",
            "<h2 id=\"the-basic-linechart\">The basic linechart</h2>",
            "<p>Rendering a basic linechart was pretty quick: D3’s got a line generator 🤙</p>",
            "<figure>",
            "<img src=\"https://github.com/Swizec/datavizAdvent/raw/master/src/content/money-spent/justline.png\" alt=\"Just the line\"><figcaption>Just the line</figcaption>",
            "</figure>",
            "<p>That’s an SVG <code style=\"white-space: pre-wrap;\">&lt;path&gt;</code> using <code style=\"white-space: pre-wrap;\">d3.line</code> to create the <code style=\"white-space: pre-wrap;\">d</code> shape attribute. Wrapped into a React component it looks like this:</p>",
            "<div class=\"sourceCode\" id=\"cb210\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb210-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Linechart <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb210-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  x <span class=\"op\" style=\"color: #666666;\">=</span> d3</a>",
            "<a class=\"sourceLine\" id=\"cb210-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">scalePoint</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb210-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">domain</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"va\" style=\"color: #19177c;\">data</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">year</span>))</a>",
            "<a class=\"sourceLine\" id=\"cb210-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">range</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">width</span>])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb210-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  y <span class=\"op\" style=\"color: #666666;\">=</span> d3</a>",
            "<a class=\"sourceLine\" id=\"cb210-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">scaleLinear</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb210-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">domain</span>([<span class=\"dv\" style=\"color: #40a070;\">500</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">max</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">data</span><span class=\"op\" style=\"color: #666666;\">,</span> d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">avg_spend</span>)])</a>",
            "<a class=\"sourceLine\" id=\"cb210-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">range</span>([<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">height</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">0</span>])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb210-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb210-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  line <span class=\"op\" style=\"color: #666666;\">=</span> d3</a>",
            "<a class=\"sourceLine\" id=\"cb210-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">line</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb210-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">x</span>(d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">x</span>(<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">year</span>))</a>",
            "<a class=\"sourceLine\" id=\"cb210-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">y</span>(d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">y</span>(<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">avg_spend</span>))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb210-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb210-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb210-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y<span class=\"op\" style=\"color: #666666;\">,</span> data <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb210-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb210-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb210-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>g transform<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"vs\" style=\"color: #4070a0;\">`translate(</span><span class=\"sc\" style=\"color: #4070a0;\">${</span>x<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">, </span><span class=\"sc\" style=\"color: #4070a0;\">${</span>y<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">)`</span><span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb210-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>Line d<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">line</span>(data)<span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb210-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      &lt;/g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb210-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb210-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb210-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>We define two scales, <code style=\"white-space: pre-wrap;\">x</code> and <code style=\"white-space: pre-wrap;\">y</code> to help us translate between datapoints and coordinates on the screen. Without those year 2018 would render 2018 pixels to the right and that’s too much.</p>",
            "<p><code style=\"white-space: pre-wrap;\">x</code> is a point scale, which like <a href=\"/christmas-trees/\">yesterday’s band scale</a> neatly arranges datapoints along a axis. Unlike a band scale it places them in points at the middle of each ragne.</p>",
            "<p><code style=\"white-space: pre-wrap;\">y</code> is a boring old liear scale. Americans spend so much on gifts that we cut off the domain at $500. Makes the graph more readable and less tall.</p>",
            "<p>Then we have the line generator. We define it with <code style=\"white-space: pre-wrap;\">d3.line</code>, tell it how to get <code style=\"white-space: pre-wrap;\">x</code> and <code style=\"white-space: pre-wrap;\">y</code> coordinates with our scales and leave the rest as defaults.</p>",
            "<p>Rendering is a matter of creating a wrapping <code style=\"white-space: pre-wrap;\">&lt;g&gt;</code> element to position our graph and group all future additions. Inside, we render a styled <code style=\"white-space: pre-wrap;\">&lt;Line&gt;</code> component and feed data into the line generator. That handles the rest.</p>",
            "<p>You have to style lines or they come out invisible.</p>",
            "<div class=\"sourceCode\" id=\"cb211\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb211-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> Line <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">styled</span>.<span class=\"at\" style=\"color: #7d9029;\">path</span><span class=\"vs\" style=\"color: #4070a0;\">`</span></a>",
            "<a class=\"sourceLine\" id=\"cb211-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"vs\" style=\"color: #4070a0;\">  stroke-width: 3px;</span></a>",
            "<a class=\"sourceLine\" id=\"cb211-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"vs\" style=\"color: #4070a0;\">  stroke: </span><span class=\"sc\" style=\"color: #4070a0;\">${</span><span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">color</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;green&#39;</span>).<span class=\"at\" style=\"color: #7d9029;\">brighter</span>(<span class=\"fl\" style=\"color: #40a070;\">1.5</span>)<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb211-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"vs\" style=\"color: #4070a0;\">  fill: none;</span></a>",
            "<a class=\"sourceLine\" id=\"cb211-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"vs\" style=\"color: #4070a0;\">  stroke-linejoin: round;</span></a>",
            "<a class=\"sourceLine\" id=\"cb211-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"vs\" style=\"color: #4070a0;\">`</span><span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>Give it a nice thickness, some light green color, remove the default black fill, and make edges round. Lovely.</p>",
            "<p>Note the <code style=\"white-space: pre-wrap;\">d3.color('green').brighter(1.5)</code> trick. We can use D3 to manipulate colors 🎨</p>",
            "<h2 id=\"the-axes\">The axes</h2>",
            "<figure>",
            "<img src=\"https://github.com/Swizec/datavizAdvent/raw/master/src/content/money-spent/withaxes.png\" alt=\"Line with axes\"><figcaption>Line with axes</figcaption>",
            "</figure>",
            "<p>Because axes are a tricky best to build, we used a trick from <a href=\"https://swizec1.teachable.com/p/react-for-data-visualization/\">React for Data Visualization</a> - blackbox rendering.</p>",
            "<p>That’s when you take pure D3 code, wrap it in a React component, and let D3 handle the rendering. It’s less efficient and doesn’t scale as well, but perfect for little things like this.</p>",
            "<p>You can use my <a href=\"https://d3blackbox.com\">d3blackbox</a> library or make your own. I used the lib 😛</p>",
            "<div class=\"sourceCode\" id=\"cb212\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb212-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> BottomAxis <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">d3blackbox</span>((anchor<span class=\"op\" style=\"color: #666666;\">,</span> props) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb212-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> axis <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">axisBottom</span>().<span class=\"at\" style=\"color: #7d9029;\">scale</span>(<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">scale</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb212-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">select</span>(<span class=\"va\" style=\"color: #19177c;\">anchor</span>.<span class=\"at\" style=\"color: #7d9029;\">current</span>).<span class=\"at\" style=\"color: #7d9029;\">call</span>(axis)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb212-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb212-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb212-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> LeftAxis <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">d3blackbox</span>((anchor<span class=\"op\" style=\"color: #666666;\">,</span> props) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb212-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> axis <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">axisLeft</span>().<span class=\"at\" style=\"color: #7d9029;\">scale</span>(<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">scale</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb212-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">select</span>(<span class=\"va\" style=\"color: #19177c;\">anchor</span>.<span class=\"at\" style=\"color: #7d9029;\">current</span>).<span class=\"at\" style=\"color: #7d9029;\">call</span>(axis)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb212-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p><code style=\"white-space: pre-wrap;\">BottomAxis</code> and <code style=\"white-space: pre-wrap;\">LeftAxis</code> are both tiny. Two lines of code is all you need to render a axis with D3.</p>",
            "<ol type=\"1\">",
            "<li>Define the axis generator and give it a scale. We took it from props.</li>",
            "<li>Select the element you want to render into and call your generator</li>",
            "</ol>",
            "<p><code style=\"white-space: pre-wrap;\">d3blackbox</code> handles the rest.</p>",
            "<p>It’s a higher order component (hook version called <code style=\"white-space: pre-wrap;\">useD3</code> is also in the package). Takes your render function whatever it is, renders an anchor element, positions it with <code style=\"white-space: pre-wrap;\">x</code> and <code style=\"white-space: pre-wrap;\">y</code> props, and makes sure to call your render function on any update.</p>",
            "<p>Quickest way to slap some D3 into some React 👌</p>",
            "<h2 id=\"the-money-emojis\">The 💸 money emojis</h2>",
            "<p>How do you make a linechart more fun? You add money-flying-away emojis.</p>",
            "<figure>",
            "<img src=\"https://github.com/Swizec/datavizAdvent/raw/master/src/content/money-spent/moneymoji.png\" alt=\"Line with emojis\"><figcaption>Line with emojis</figcaption>",
            "</figure>",
            "<p>Interactive points on each edge of a linechart are pretty common after all. Makes it easier to spot where the line breaks and shows actual data and where it’s just a line.</p>",
            "<p>Adding emojis happens in a loop:</p>",
            "<div class=\"sourceCode\" id=\"cb213\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb213-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb213-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">data</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb213-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>Money x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">x</span>(<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">year</span>)<span class=\"op\" style=\"color: #666666;\">}</span> y<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">y</span>(<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">avg_spend</span>)<span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb213-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      💸</a>",
            "<a class=\"sourceLine\" id=\"cb213-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>title<span class=\"op\" style=\"color: #666666;\">&gt;</span>$<span class=\"op\" style=\"color: #666666;\">{</span><span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">avg_spend</span><span class=\"op\" style=\"color: #666666;\">}</span>&lt;/title<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb213-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    &lt;/Money<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb213-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  ))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb213-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>Iterate through our data and render a styled <code style=\"white-space: pre-wrap;\">text</code> component called <code style=\"white-space: pre-wrap;\">Money</code> for each datapoint. Using the same scales as we did for the linechart gives us correct positioning out of the box.</p>",
            "<p>One of the many benefits of scales 😉</p>",
            "<p>Styling deals with setting emoji font size and centering text on the <code style=\"white-space: pre-wrap;\">(x, y)</code> anchor point.</p>",
            "<div class=\"sourceCode\" id=\"cb214\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb214-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> Money <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">styled</span>.<span class=\"at\" style=\"color: #7d9029;\">text</span><span class=\"vs\" style=\"color: #4070a0;\">`</span></a>",
            "<a class=\"sourceLine\" id=\"cb214-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"vs\" style=\"color: #4070a0;\">  font-size: 20px;</span></a>",
            "<a class=\"sourceLine\" id=\"cb214-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"vs\" style=\"color: #4070a0;\">  cursor: pointer;</span></a>",
            "<a class=\"sourceLine\" id=\"cb214-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"vs\" style=\"color: #4070a0;\">  text-anchor: middle;</span></a>",
            "<a class=\"sourceLine\" id=\"cb214-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"vs\" style=\"color: #4070a0;\">  alignment-baseline: central;</span></a>",
            "<a class=\"sourceLine\" id=\"cb214-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"vs\" style=\"color: #4070a0;\">`</span><span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>Oh and adding a <code style=\"white-space: pre-wrap;\">&lt;title&gt;</code> tag to our text creates a default browser tooltip. Hover over an emoji for a few seconds and it shows some extra info.</p>",
            "<h2 id=\"a-highlight-for-easy-reading\">A highlight for easy reading</h2>",
            "<figure>",
            "<img src=\"https://github.com/Swizec/datavizAdvent/raw/master/src/content/money-spent/highlight.png\" alt=\"A highlight to make life easier\"><figcaption>A highlight to make life easier</figcaption>",
            "</figure>",
            "<p>Linecharts can be hard to read. With datapoints so far from the axes it can be hard to see how everything lines up.</p>",
            "<p>So we added a line to help our users out.</p>",
            "<p>We keep track of what’s currently highlighted in component state. When a value exists, we use it to render a vertical line.</p>",
            "<div class=\"sourceCode\" id=\"cb215\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb215-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Linechart <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb215-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  state <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb215-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">highlightYear</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">null</span></a>",
            "<a class=\"sourceLine\" id=\"cb215-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb215-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb215-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb215-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb215-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  highlight <span class=\"op\" style=\"color: #666666;\">=</span> year <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">setState</span>(<span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">highlightYear</span><span class=\"op\" style=\"color: #666666;\">:</span> year <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb215-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  unhighlight <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">setState</span>(<span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">highlightYear</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">null</span> <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb215-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb215-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb215-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb215-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">{</span>highlightYear <span class=\"op\" style=\"color: #666666;\">?</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb215-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>Highlight</a>",
            "<a class=\"sourceLine\" id=\"cb215-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      x1<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">x</span>(highlightYear)<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb215-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      y1<span class=\"op\" style=\"color: #666666;\">={-</span><span class=\"dv\" style=\"color: #40a070;\">20</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb215-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      x2<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">x</span>(highlightYear)<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb215-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      y2<span class=\"op\" style=\"color: #666666;\">={</span>height <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"dv\" style=\"color: #40a070;\">20</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb215-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb215-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  ) : <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">null</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb215-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb215-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb215-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb215-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">&lt;</span>Money</a>",
            "<a class=\"sourceLine\" id=\"cb215-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">x</span>(<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">year</span>)<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb215-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    y<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">y</span>(<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">avg_spend</span>)<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb215-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    onMouseOver<span class=\"op\" style=\"color: #666666;\">={</span>() <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">highlight</span>(<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">year</span>)<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb215-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    onMouseOut<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">unhighlight</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb215-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">&gt;</span></a></code></pre></div>",
            "<p>Nothing too crazy.</p>",
            "<p>We have a <code style=\"white-space: pre-wrap;\">highlightYear</code> state. This gets set on <code style=\"white-space: pre-wrap;\">onMouseOver</code> in the <code style=\"white-space: pre-wrap;\">&lt;Money&gt;</code> emoji. On <code style=\"white-space: pre-wrap;\">onMouseOut</code>, we reset the highlight year back to <code style=\"white-space: pre-wrap;\">null</code>.</p>",
            "<p>In the render method we then check whether <code style=\"white-space: pre-wrap;\">highlightYear</code> is set. If it is, we render a vertical line that’s styled to be thin and lightgrey. If it isn’t, we don’t.</p>",
            "<p>There’s a lot we could do with that highlight to make it look smoother, but time was up and this is good enough.</p>",
            "<h2 id=\"what-you-learned-1\">What you learned 🧐</h2>",
            "<p>Today you learned:</p>",
            "<ul>",
            "<li>D3 point scales</li>",
            "<li>using class field values for D3 objects</li>",
            "<li>d3blackbox for simple D3 integrations</li>",
            "<li>the <code style=\"white-space: pre-wrap;\">&lt;title&gt;</code> trick on text tags</li>",
            "<li>using D3 axes</li>",
            "<li>adding a little interactivity</li>",
            "</ul>",
            "<p>Enjoy ✌️</p>"
          ]
        },
        {
          "lectureTitle": "Christmas movies at the box office - horizontal bar chart",
          "lectureLines": [
            "<h1 id=\"challenge-2\">Challenge</h1>",
            "<p>Christmas movies are the best movies. How much do they make at the box office? Show the power distribution curve with a vertical barchart.</p>",
            "<p><a href=\"https://reactviz.holiday/datasets/statistic_id209295_box-office-revenue-of-the-most-successful-christmas-movies.xlsx\">Dataset</a></p>",
            "<h1 id=\"my-solution-2\">My Solution</h1>",
            "<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/qD6i9h66LbI\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen>",
            "</iframe>",
            "<iframe src=\"https://codesandbox.io/embed/6v6zvx8zjk?fontsize=14\" style=\"width:100%; height:500px; border😮; border-radius: 4px; overflow:hidden;\" sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\">",
            "</iframe>",
            "<p>We built this one with React hooks because we can. Not a class-based component in sight ✌️</p>",
            "<p>Styled components for styling, D3 for scales and data loading and parsing, hooks to hook it all together.</p>",
            "<h2 id=\"loading-data-with-react-hooks\">Loading data with React hooks</h2>",
            "<p>I looked around for a good data loading hook. None could be found. So we made our own 💪</p>",
            "<p>Not that hard as it turns out. You need a dash of <code style=\"white-space: pre-wrap;\">useState</code> to save the data you load, a bit of <code style=\"white-space: pre-wrap;\">useEffect</code> to run data loading on component mount aaaand … that’s it. Goes in your <code style=\"white-space: pre-wrap;\">App</code> function.</p>",
            "<div class=\"sourceCode\" id=\"cb216\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb216-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span> <span class=\"at\" style=\"color: #7d9029;\">App</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb216-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> [data<span class=\"op\" style=\"color: #666666;\">,</span> setData] <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">useState</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">null</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb216-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb216-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">useEffect</span>(</a>",
            "<a class=\"sourceLine\" id=\"cb216-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb216-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">tsv</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;/data.tsv&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb216-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> year <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">Number</span>(<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"va\" style=\"color: #19177c;\">movie</span>.<span class=\"at\" style=\"color: #7d9029;\">match</span>(<span class=\"ss\" style=\"color: #bb6688;\">/</span><span class=\"sc\" style=\"color: #4070a0;\">\\((\\d+)\\)</span><span class=\"ss\" style=\"color: #bb6688;\">/</span>)[<span class=\"dv\" style=\"color: #40a070;\">1</span>])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb216-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb216-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          <span class=\"dt\" style=\"color: #902000;\">movie</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"va\" style=\"color: #19177c;\">movie</span>.<span class=\"at\" style=\"color: #7d9029;\">replace</span>(<span class=\"ss\" style=\"color: #bb6688;\">/</span><span class=\"sc\" style=\"color: #4070a0;\">\\(\\d+\\)</span><span class=\"ss\" style=\"color: #bb6688;\">/</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;&quot;</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb216-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          <span class=\"dt\" style=\"color: #902000;\">year</span><span class=\"op\" style=\"color: #666666;\">:</span> year<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb216-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          <span class=\"dt\" style=\"color: #902000;\">per_year</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"at\" style=\"color: #7d9029;\">Number</span>(<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">box_office</span>) / (<span class=\"dv\" style=\"color: #40a070;\">2018</span> <span class=\"op\" style=\"color: #666666;\">-</span> year)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb216-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          <span class=\"dt\" style=\"color: #902000;\">box_office</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"at\" style=\"color: #7d9029;\">Number</span>(<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">box_office</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb216-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb216-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">}</span>).<span class=\"at\" style=\"color: #7d9029;\">then</span>(setData)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb216-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb216-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    [<span class=\"op\" style=\"color: #666666;\">!</span>data]</a>",
            "<a class=\"sourceLine\" id=\"cb216-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  )<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>The <code style=\"white-space: pre-wrap;\">useState</code> hook takes a default value, and always returns current state - <code style=\"white-space: pre-wrap;\">data</code> - and a setter - <code style=\"white-space: pre-wrap;\">setData</code>.</p>",
            "<p><code style=\"white-space: pre-wrap;\">useEffect</code> runs our function on every component render. After committing to the DOM, I believe. We use <code style=\"white-space: pre-wrap;\">d3.tsv</code> to load and parse our christmas movie dataset, use a parsing function to transform each row into an object with all the info we need, then call <code style=\"white-space: pre-wrap;\">setData</code> when he have it.</p>",
            "<p>Each datapoint holds</p>",
            "<ul>",
            "<li>a <code style=\"white-space: pre-wrap;\">movie</code> name</li>",
            "<li>the <code style=\"white-space: pre-wrap;\">year</code> a movie was produced parsed from the movie name with a regex</li>",
            "<li>the <code style=\"white-space: pre-wrap;\">per_year</code> revenue of the movie as a fraction</li>",
            "<li>the total <code style=\"white-space: pre-wrap;\">box_office</code> revenue</li>",
            "</ul>",
            "<h2 id=\"switch-display-modes-with-react-hooks\">Switch display modes with React hooks</h2>",
            "<p>Movie box office revenue follows a pretty clear power law distribution. The highest grossing movie or two make a lot more than the next best. Which makes way more than next one down the list, etc.</p>",
            "<p>But how does age factor into this?</p>",
            "<p>Home Alone has had 28 years to make its revenue. Daddy’s Home 2 is only a year old.</p>",
            "<p>I decided to add a button to switch modes. From total <code style=\"white-space: pre-wrap;\">box_office</code> to <code style=\"white-space: pre-wrap;\">per_year</code> revenue. And boy does it change the story. Altho maybe I’m being unfair because how long are theater runs anyway? 🤔</p>",
            "<p>Driving that logic with React hooks looks like this 👇</p>",
            "<div class=\"sourceCode\" id=\"cb217\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb217-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> [perYear<span class=\"op\" style=\"color: #666666;\">,</span> setPerYear] <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">useState</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">false</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb217-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> valueFunction <span class=\"op\" style=\"color: #666666;\">=</span> perYear <span class=\"op\" style=\"color: #666666;\">?</span> d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">per_year</span> : d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">box_office</span></a>",
            "<a class=\"sourceLine\" id=\"cb217-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb217-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb217-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb217-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">&lt;</span>Button onClick<span class=\"op\" style=\"color: #666666;\">={</span>() <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"at\" style=\"color: #7d9029;\">setPerYear</span>(<span class=\"op\" style=\"color: #666666;\">!</span>perYear)<span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb217-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">{</span>perYear <span class=\"op\" style=\"color: #666666;\">?</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;Show Total Box Office&quot;</span> : <span class=\"st\" style=\"color: #4070a0;\">&quot;Show Box Office Per Year&quot;</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb217-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">&lt;/Button<span class=\"op\" style=\"color: #666666;\">&gt;</span></a></code></pre></div>",
            "<p>A <code style=\"white-space: pre-wrap;\">useState</code> hook gives us current state and a setter. We use the state, <code style=\"white-space: pre-wrap;\">perYear</code>, to define a value accessor function, and a butto’s <code style=\"white-space: pre-wrap;\">onClick</code> method to toggle the value.</p>",
            "<p>We’re going to use that value accessor to render our graph. Makes the switch feel seamless.</p>",
            "<h2 id=\"render-5\">Render</h2>",
            "<p>First you need this bit in your <code style=\"white-space: pre-wrap;\">App</code> function. It renders <code style=\"white-space: pre-wrap;\">&lt;VerticalBarchart&gt;</code> in an SVG, if <code style=\"white-space: pre-wrap;\">data</code> exists.</p>",
            "<div class=\"sourceCode\" id=\"cb218\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb218-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">&lt;</span>Svg width<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;800&quot;</span> height<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;600&quot;</span> showKevin<span class=\"op\" style=\"color: #666666;\">={</span>perYear<span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb218-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">{</span>data <span class=\"op\" style=\"color: #666666;\">&amp;&amp;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb218-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>VerticalBarchart</a>",
            "<a class=\"sourceLine\" id=\"cb218-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      data<span class=\"op\" style=\"color: #666666;\">={</span>data<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb218-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      width<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">600</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb218-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      height<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">600</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb218-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      value<span class=\"op\" style=\"color: #666666;\">={</span>valueFunction<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb218-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb218-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  )<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb218-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">&lt;/Svg<span class=\"op\" style=\"color: #666666;\">&gt;</span></a></code></pre></div>",
            "<p>That <code style=\"white-space: pre-wrap;\">data &amp;&amp; ...</code> is a common trick. The return value of <code style=\"white-space: pre-wrap;\">true &amp;&amp; something</code> is something, return value of <code style=\"white-space: pre-wrap;\">false &amp;&amp; something</code> is nothing. Means when <code style=\"white-space: pre-wrap;\">data</code> is defined, we render, otherwise we don’t.</p>",
            "<p>Oh and <code style=\"white-space: pre-wrap;\">Svg</code> is a styled SVG component. Gets a nice gif background when <code style=\"white-space: pre-wrap;\">showKevin</code> is set to true 😛</p>",
            "<p>The <code style=\"white-space: pre-wrap;\">VerticalBarchart</code> itself is a functional component. We said no classes right?</p>",
            "<div class=\"sourceCode\" id=\"cb219\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb219-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> VerticalBarchart <span class=\"op\" style=\"color: #666666;\">=</span> (<span class=\"op\" style=\"color: #666666;\">{</span> data<span class=\"op\" style=\"color: #666666;\">,</span> width<span class=\"op\" style=\"color: #666666;\">,</span> height<span class=\"op\" style=\"color: #666666;\">,</span> value <span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb219-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> yScale <span class=\"op\" style=\"color: #666666;\">=</span> d3</a>",
            "<a class=\"sourceLine\" id=\"cb219-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">scaleBand</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb219-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">paddingInner</span>(<span class=\"fl\" style=\"color: #40a070;\">0.1</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb219-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">domain</span>(<span class=\"va\" style=\"color: #19177c;\">data</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">movie</span>))</a>",
            "<a class=\"sourceLine\" id=\"cb219-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">range</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> height])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb219-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> widthScale <span class=\"op\" style=\"color: #666666;\">=</span> d3</a>",
            "<a class=\"sourceLine\" id=\"cb219-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">scaleLinear</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb219-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">domain</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">max</span>(data<span class=\"op\" style=\"color: #666666;\">,</span> value)])</a>",
            "<a class=\"sourceLine\" id=\"cb219-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">range</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> width])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb219-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb219-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb219-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb219-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"va\" style=\"color: #19177c;\">data</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb219-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span><span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Fragment</span> key<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">movie</span><span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb219-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          <span class=\"op\" style=\"color: #666666;\">&lt;</span>Bar</a>",
            "<a class=\"sourceLine\" id=\"cb219-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb219-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            y<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"at\" style=\"color: #7d9029;\">yScale</span>(<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">movie</span>)<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb219-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            height<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"va\" style=\"color: #19177c;\">yScale</span>.<span class=\"at\" style=\"color: #7d9029;\">bandwidth</span>()<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb219-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            width<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"at\" style=\"color: #7d9029;\">widthScale</span>(<span class=\"at\" style=\"color: #7d9029;\">value</span>(d))<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb219-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb219-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          <span class=\"op\" style=\"color: #666666;\">&lt;</span>Label x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">10</span><span class=\"op\" style=\"color: #666666;\">}</span> y<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"at\" style=\"color: #7d9029;\">yScale</span>(<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">movie</span>) <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"va\" style=\"color: #19177c;\">yScale</span>.<span class=\"at\" style=\"color: #7d9029;\">bandwidth</span>() / <span class=\"dv\" style=\"color: #40a070;\">2</span><span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb219-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">movie</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb219-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          &lt;/Label<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb219-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        &lt;/<span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Fragment</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb219-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      ))<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb219-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    &lt;/g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb219-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb219-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">};</span></a></code></pre></div>",
            "<p>We can define our D3 scales right in the render function. Means we re-define them from scratch on every render and sometimes that’s okay. Particularly when data is small and calculating domains and ranges is easy.</p>",
            "<p>Once we have a <code style=\"white-space: pre-wrap;\">scaleBand</code> for the vertical axis and a <code style=\"white-space: pre-wrap;\">scaleLinear</code> for widths, it’s a matter of iterating over our data and rendering styled <code style=\"white-space: pre-wrap;\">&lt;Bar&gt;</code> and <code style=\"white-space: pre-wrap;\">&lt;Label&gt;</code> components.</p>",
            "<p>Notice that we use the <code style=\"white-space: pre-wrap;\">value</code> accessor function every time we need the value of a datapoint. To find the max value for our domain and to grab each individual width.</p>",
            "<p>Makes our chart automatically adapt to flicking that <code style=\"white-space: pre-wrap;\">perYear</code> toggle 👌</p>",
            "<video src=\"https://i.imgur.com/hJaR7e8.mp4\" autoplay muted loop>",
            "<p>That smooth width transition effect? That’s just CSS.</p>",
            "<div class=\"sourceCode\" id=\"cb220\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb220-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> Bar <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">styled</span>.<span class=\"at\" style=\"color: #7d9029;\">rect</span><span class=\"vs\" style=\"color: #4070a0;\">`</span></a>",
            "<a class=\"sourceLine\" id=\"cb220-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"vs\" style=\"color: #4070a0;\">  fill: green;</span></a>",
            "<a class=\"sourceLine\" id=\"cb220-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"vs\" style=\"color: #4070a0;\">  transition: width 500ms;</span></a>",
            "<a class=\"sourceLine\" id=\"cb220-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"vs\" style=\"color: #4070a0;\">`</span><span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>React hooks really do make life easy 🎣</p>",
            "<h2 id=\"what-you-learned-today\">What you learned today</h2>",
            "<ul>",
            "<li>the <code style=\"white-space: pre-wrap;\">useState</code> React hook</li>",
            "<li>the <code style=\"white-space: pre-wrap;\">useEffect</code> React hook</li>",
            "<li>that it’s okay to define D3 stuff in the render method</li>",
            "</ul>"
          ]
        },
        {
          "lectureTitle": "What Americans want for Christmas - horizontal stack chart",
          "lectureLines": [
            "<h1 id=\"challenge-3\">Challenge</h1>",
            "<p>Different ages want different things. Create a horizontal stack chart showing what everyone wants for Christmas.</p>",
            "<p><a href=\"https://reactviz.holiday/datasets/statistic_id643714_christmas-gifts-desired-by-us-consumers-2017-by-age-group.xlsx\">Dataset</a></p>",
            "<h1 id=\"my-solution-3\">My Solution</h1>",
            "<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/pn45HcG1faM\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen>",
            "</iframe>",
            "<iframe src=\"https://codesandbox.io/embed/v874323625?fontsize=14\" style=\"width:100%; height:500px; border😮; border-radius: 4px; overflow:hidden;\" sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\">",
            "</iframe>",
            "<p>Today’s challenge is a perfect example of how <a href=\"https://gka.github.io/chroma.js/\">chroma-js</a> automatically makes your dataviz beautiful. Best magic trick I ever learned from Shirley Wu.</p>",
            "<p>We used <a href=\"https://d3-legend.susielu.com/\">Susie Lu’s d3-legend</a> for the color legend, D3’s stack layout to calculate coordinates for stacking those bar charts, D3 axis for the axis, and the rest was React. Similar code to the bar chart in <a href=\"/christmas-movies/\">Christmas movies at the box office</a>.</p>",
            "<h2 id=\"load-the-data\">Load the data</h2>",
            "<p>We begin once more by loading the data. If you’ve been following along so far, this code will look familiar.</p>",
            "<div class=\"sourceCode\" id=\"cb221\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb221-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">componentDidMount</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb221-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">tsv</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;/data.tsv&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> (<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb221-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"dt\" style=\"color: #902000;\">category</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">category</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb221-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"dt\" style=\"color: #902000;\">young</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"at\" style=\"color: #7d9029;\">Number</span>(<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">young</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb221-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"dt\" style=\"color: #902000;\">mid</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"at\" style=\"color: #7d9029;\">Number</span>(<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">mid</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb221-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"dt\" style=\"color: #902000;\">old</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"at\" style=\"color: #7d9029;\">Number</span>(<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">old</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb221-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span>)).<span class=\"at\" style=\"color: #7d9029;\">then</span>(data <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">setState</span>(<span class=\"op\" style=\"color: #666666;\">{</span> data <span class=\"op\" style=\"color: #666666;\">}</span>))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb221-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p><code style=\"white-space: pre-wrap;\">d3.tsv</code> loads our tab separated values file with data, a parsing function turns each line into nice objects we can use, and then we save it into component local state.</p>",
            "<h2 id=\"an-axis-and-a-legend\">An axis and a legend</h2>",
            "<p>Building axes and legends from scratch is not hard, but it is fiddly and time consuming and fraught with tiny little traps for you to fall into. No time for that on a daily challenge!</p>",
            "<p><a href=\"https://d3blackbox.com\">d3blackbox</a> to the rescue! &lt;supermanemoji&gt;</p>",
            "<div class=\"sourceCode\" id=\"cb222\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb222-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> VerticalAxis <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">d3blackbox</span>((anchor<span class=\"op\" style=\"color: #666666;\">,</span> props) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb222-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> axis <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">axisLeft</span>().<span class=\"at\" style=\"color: #7d9029;\">scale</span>(<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">scale</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb222-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">select</span>(<span class=\"va\" style=\"color: #19177c;\">anchor</span>.<span class=\"at\" style=\"color: #7d9029;\">current</span>).<span class=\"at\" style=\"color: #7d9029;\">call</span>(axis)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb222-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb222-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb222-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> Legend <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">d3blackbox</span>((anchor<span class=\"op\" style=\"color: #666666;\">,</span> props) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb222-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">select</span>(<span class=\"va\" style=\"color: #19177c;\">anchor</span>.<span class=\"at\" style=\"color: #7d9029;\">current</span>).<span class=\"at\" style=\"color: #7d9029;\">call</span>(</a>",
            "<a class=\"sourceLine\" id=\"cb222-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    legend</a>",
            "<a class=\"sourceLine\" id=\"cb222-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">legendColor</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb222-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">scale</span>(<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">scale</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb222-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">title</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;Age group&#39;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb222-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb222-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>Here you can see just how flexible the blackbox rendering approach I teach in <a href=\"https://swizec1.teachable.com/p/react-for-data-visualization\">React for Data Visualization</a> can be. You can take just about any D3 code and turn it into a React component.</p>",
            "<p>Means you don’t have to write your own fiddly stuff 👌</p>",
            "<p><code style=\"white-space: pre-wrap;\">d3blackbox</code> ensures our render functions are called on every component render and creates a positionable grouping, <code style=\"white-space: pre-wrap;\">&lt;g&gt;</code>, SVG element for us to move around.</p>",
            "<h2 id=\"each-categorys-barchart\">Each category’s barchart</h2>",
            "<p>You can think a stacked bar chart as a series of barcharts. Each category gets its own.</p>",
            "<div class=\"sourceCode\" id=\"cb223\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb223-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> BarChart <span class=\"op\" style=\"color: #666666;\">=</span> (<span class=\"op\" style=\"color: #666666;\">{</span> entries<span class=\"op\" style=\"color: #666666;\">,</span> y<span class=\"op\" style=\"color: #666666;\">,</span> width<span class=\"op\" style=\"color: #666666;\">,</span> marginLeft<span class=\"op\" style=\"color: #666666;\">,</span> color <span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb223-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">&lt;</span><span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Fragment</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb223-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"va\" style=\"color: #19177c;\">entries</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(([min<span class=\"op\" style=\"color: #666666;\">,</span> max]<span class=\"op\" style=\"color: #666666;\">,</span> i) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb223-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>rect</a>",
            "<a class=\"sourceLine\" id=\"cb223-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        x<span class=\"op\" style=\"color: #666666;\">={</span>marginLeft <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"at\" style=\"color: #7d9029;\">width</span>(min)<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb223-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        width<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"at\" style=\"color: #7d9029;\">width</span>(max) <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"at\" style=\"color: #7d9029;\">width</span>(min)<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb223-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        y<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"at\" style=\"color: #7d9029;\">y</span>(<span class=\"va\" style=\"color: #19177c;\">y</span>.<span class=\"at\" style=\"color: #7d9029;\">domain</span>()[i])<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb223-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        height<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"va\" style=\"color: #19177c;\">y</span>.<span class=\"at\" style=\"color: #7d9029;\">bandwidth</span>()<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb223-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        key<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"va\" style=\"color: #19177c;\">y</span>.<span class=\"at\" style=\"color: #7d9029;\">domain</span>()[i]<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb223-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        fill<span class=\"op\" style=\"color: #666666;\">={</span>color<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb223-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb223-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>title<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb223-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          <span class=\"op\" style=\"color: #666666;\">{</span>min<span class=\"op\" style=\"color: #666666;\">},</span> <span class=\"op\" style=\"color: #666666;\">{</span>max<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb223-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        &lt;/title<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb223-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      &lt;/rect<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb223-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    ))<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb223-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  &lt;/<span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Fragment</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb223-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>These barchart subcomponents are fully controled components. They help us clean up the rendering and don’t need any logic of their own.</p>",
            "<p>Takes a list of <code style=\"white-space: pre-wrap;\">entries</code> to render, a <code style=\"white-space: pre-wrap;\">y</code> scale for vertical positioning, a <code style=\"white-space: pre-wrap;\">width</code> scale to calculate widths, some margin on the left for the big axis, and a <code style=\"white-space: pre-wrap;\">color</code> to use.</p>",
            "<p>Renders a React Fragment with a bunch of rectangles. Loop over the entries, return a positioned rectangle for each.</p>",
            "<p>Our entries are pairs of <code style=\"white-space: pre-wrap;\">min</code> and <code style=\"white-space: pre-wrap;\">max</code> values as calculated by the stack layout. We use them to decide the horizontal, <code style=\"white-space: pre-wrap;\">x</code> position of our rectangle, and its width. Using the <code style=\"white-space: pre-wrap;\">width</code> scale both times. That takes care of proper sizing for us.</p>",
            "<p>That <code style=\"white-space: pre-wrap;\">key</code> prop is a little funny though.</p>",
            "<p>The <code style=\"white-space: pre-wrap;\">y</code> scale is an ordinal scale. Its domain is a list of categories, which means we can get the name of each bar’s category by picking the right index out of that array. Perfect for identifying our elements 😃</p>",
            "<h2 id=\"a-stack-chart-built-with-react-and-d3\">A stack chart built with React and D3</h2>",
            "<p>Here’s how all of that ties together 👇</p>",
            "<div class=\"sourceCode\" id=\"cb224\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb224-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> StackChart <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb224-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  y <span class=\"op\" style=\"color: #666666;\">=</span> d3</a>",
            "<a class=\"sourceLine\" id=\"cb224-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">scaleBand</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb224-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">domain</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"va\" style=\"color: #19177c;\">data</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">category</span>))</a>",
            "<a class=\"sourceLine\" id=\"cb224-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">range</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">height</span>])</a>",
            "<a class=\"sourceLine\" id=\"cb224-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">paddingInner</span>(<span class=\"fl\" style=\"color: #40a070;\">0.1</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb224-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  stack <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">stack</span>().<span class=\"at\" style=\"color: #7d9029;\">keys</span>([<span class=\"st\" style=\"color: #4070a0;\">&#39;young&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;mid&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;old&#39;</span>])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb224-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  color <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">chroma</span>.<span class=\"va\" style=\"color: #19177c;\">brewer</span>.<span class=\"at\" style=\"color: #7d9029;\">pastel1</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb224-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  colorScale <span class=\"op\" style=\"color: #666666;\">=</span> d3</a>",
            "<a class=\"sourceLine\" id=\"cb224-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">scaleOrdinal</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb224-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">domain</span>([<span class=\"st\" style=\"color: #4070a0;\">&#39;🧒 18 to 29 years&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;🙍‍♂️ 30 to 59 years&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;🧓 60 years or older&#39;</span>])</a>",
            "<a class=\"sourceLine\" id=\"cb224-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">range</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">color</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb224-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb224-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb224-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> data <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb224-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb224-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> stack <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">stack</span>(data)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb224-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb224-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> width <span class=\"op\" style=\"color: #666666;\">=</span> d3</a>",
            "<a class=\"sourceLine\" id=\"cb224-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">scaleLinear</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb224-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">domain</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">max</span>(stack[<span class=\"dv\" style=\"color: #40a070;\">2</span>]<span class=\"op\" style=\"color: #666666;\">,</span> d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> d[<span class=\"dv\" style=\"color: #40a070;\">1</span>])])</a>",
            "<a class=\"sourceLine\" id=\"cb224-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">range</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">400</span>])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb224-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb224-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb224-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb224-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>VerticalAxis scale<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">y</span><span class=\"op\" style=\"color: #666666;\">}</span> x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">220</span><span class=\"op\" style=\"color: #666666;\">}</span> y<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb224-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">stack</span>(data).<span class=\"at\" style=\"color: #7d9029;\">map</span>((entries<span class=\"op\" style=\"color: #666666;\">,</span> i) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb224-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          <span class=\"op\" style=\"color: #666666;\">&lt;</span>BarChart</a>",
            "<a class=\"sourceLine\" id=\"cb224-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            entries<span class=\"op\" style=\"color: #666666;\">={</span>entries<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb224-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            y<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">y</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb224-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            key<span class=\"op\" style=\"color: #666666;\">={</span>i<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb224-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            marginLeft<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">223</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb224-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            color<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">color</span>[i]<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb224-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            width<span class=\"op\" style=\"color: #666666;\">={</span>width<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb224-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb224-36\" title=\"36\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        ))<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb224-37\" title=\"37\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>Legend scale<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">colorScale</span><span class=\"op\" style=\"color: #666666;\">}</span> x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">500</span><span class=\"op\" style=\"color: #666666;\">}</span> y<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">height</span> <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"dv\" style=\"color: #40a070;\">100</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb224-38\" title=\"38\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      &lt;/g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb224-39\" title=\"39\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb224-40\" title=\"40\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb224-41\" title=\"41\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>Okay that’s a longer code snippet 😅</p>",
            "<h3 id=\"d3-setup\">D3 setup</h3>",
            "<p>In the beginning, we have some D3 objects.</p>",
            "<ol type=\"1\">",
            "<li>A <code style=\"white-space: pre-wrap;\">y</code> band scale. Handles vertical positioning, sizing, spacing, and all</li>",
            "<li>A <code style=\"white-space: pre-wrap;\">stack</code> generator with hardcoded keys. We know what we want and there’s no need to be fancy</li>",
            "<li>A <code style=\"white-space: pre-wrap;\">color</code> list. Chroma’s <code style=\"white-space: pre-wrap;\">brewer.pastel1</code> looked Best</li>",
            "<li>A <code style=\"white-space: pre-wrap;\">colorScale</code> with a more verbose domain and our list of colors as the range</li>",
            "</ol>",
            "<p>Having a separate list of colors and color scale is important. Our individual bars want a specific color, our legend wants a color scale. They use different domains and unifying them would be fiddly. Easier to keep apart.</p>",
            "<h3 id=\"render-6\">render</h3>",
            "<p>We do a little cheating in our <code style=\"white-space: pre-wrap;\">render</code> method. That <code style=\"white-space: pre-wrap;\">stack</code> should be generated in a <code style=\"white-space: pre-wrap;\">componentDidUpdate</code> of some sort and so should the <code style=\"white-space: pre-wrap;\">width</code> linear scale.</p>",
            "<p>But our data is small so it’s okay to recalculate all this every time.</p>",
            "<p>The <code style=\"white-space: pre-wrap;\">stack</code> generator creates a list of lists of entries. 3 lists, one for each category (age group). Each list contains pairs of numbers representing how they should stack.</p>",
            "<p>Like this</p>",
            "<pre><code style=\"white-space: pre-wrap;\">[",
            "  [[0, 5], [0, 10]],",
            "  [[5, 7], [10, 16]],",
            "  [[13, 20], [26, 31]]",
            "]</code></pre>",
            "<p>Entries in the first list all begin at <code style=\"white-space: pre-wrap;\">0</code>. Second list begins where the previous list ends. Third list begins where the second list ended. Stacking up as far as you need.</p>",
            "<p>Your job is then to take these numbers, feed them into some sort of scale to help with sizing, and render.</p>",
            "<p>That was our <code style=\"white-space: pre-wrap;\">&lt;BarChart&gt;</code> sub component up above. It takes each list, feeds its values into a <code style=\"white-space: pre-wrap;\">width</code> scale, and renders.</p>",
            "<p>Making sure we render 3 of them, one for each age group, is this part:</p>",
            "<div class=\"sourceCode\" id=\"cb226\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb226-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb226-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">&lt;</span>g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb226-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>VerticalAxis scale<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">y</span><span class=\"op\" style=\"color: #666666;\">}</span> x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">220</span><span class=\"op\" style=\"color: #666666;\">}</span> y<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb226-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"va\" style=\"color: #19177c;\">stack</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>((entries<span class=\"op\" style=\"color: #666666;\">,</span> i) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb226-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>BarChart</a>",
            "<a class=\"sourceLine\" id=\"cb226-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        entries<span class=\"op\" style=\"color: #666666;\">={</span>entries<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb226-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        y<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">y</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb226-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        key<span class=\"op\" style=\"color: #666666;\">={</span>i<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb226-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        marginLeft<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">223</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb226-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        color<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">color</span>[i]<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb226-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        width<span class=\"op\" style=\"color: #666666;\">={</span>width<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb226-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb226-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    ))<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb226-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>Legend scale<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">colorScale</span><span class=\"op\" style=\"color: #666666;\">}</span> x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">500</span><span class=\"op\" style=\"color: #666666;\">}</span> y<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">height</span> <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"dv\" style=\"color: #40a070;\">100</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb226-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  &lt;/g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb226-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>Starts by rendering an axis, followed by a loop through our stack, rendering a <code style=\"white-space: pre-wrap;\">&lt;BarChart&gt;</code> for each, and then the <code style=\"white-space: pre-wrap;\">&lt;Legend&gt;</code> component neatly positioned to look good.</p>",
            "<p>A beautiful chart pops out.</p>",
            "<figure>",
            "<img src=\"https://github.com/Swizec/datavizAdvent/raw/master/src/content/christmas-gifts/what-americas-want.png\" alt=\"Beautiful chart\"><figcaption>Beautiful chart</figcaption>",
            "</figure>",
            "<h2 id=\"today-you-learned\">Today you learned 🧐</h2>",
            "<ul>",
            "<li>chroma-js exist and is amazing</li>",
            "<li>d3-legend for easy legends</li>",
            "<li>d3blackbox still saving the day</li>",
            "<li>D3 stack generator</li>",
            "</ul>",
            "<p>🤓</p>"
          ]
        },
        {
          "lectureTitle": "Christmas carols and their words - a word cloud",
          "lectureLines": [
            "<h1 id=\"challenge-4\">Challenge</h1>",
            "<p>Christmas carols are a time honored tradition. Draw a heatmap of their most popular words.</p>",
            "<p><a href=\"https://reactviz.holiday/datasets/christmas_carols_data.csv\">Dataset</a></p>",
            "<h1 id=\"my-solution-4\">My Solution</h1>",
            "<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/x141XrIuP50\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen>",
            "</iframe>",
            "<iframe src=\"https://codesandbox.io/embed/2nv1j4mwr?fontsize=14\" style=\"width:100%; height:500px; border😮; border-radius: 4px; overflow:hidden;\" sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\">",
            "</iframe>",
            "<p>Building these word clouds kicked my ass. Even had to ask the three wise men for help.</p>",
            "<blockquote class=\"twitter-tweet\" data-conversation=\"none\" data-lang=\"en\">",
            "<p lang=\"en\" dir=\"ltr\">",
            "So apparently combining useState and useMemo and promises makes your JavaScript crash hard.<br><br>What am I doing wrong? <a href=\"https://twitter.com/ryanflorence?ref_src=twsrc%5Etfw\"><span class=\"citation\" data-cites=\"ryanflorence\">@ryanflorence</span></a> <a href=\"https://twitter.com/kentcdodds?ref_src=twsrc%5Etfw\"><span class=\"citation\" data-cites=\"kentcdodds\">@kentcdodds</span></a> <a href=\"https://twitter.com/dan_abramov?ref_src=twsrc%5Etfw\"><span class=\"citation\" data-cites=\"dan_abramov\">@dan_abramov</span></a> ? I thought useMemo was supposed to only run once and not infinite loop on me <a href=\"https://t.co/29OVRXxhuz\">pic.twitter.com/29OVRXxhuz</a>",
            "</p>",
            "— Swizec Teller (<span class=\"citation\" data-cites=\"Swizec\">@Swizec</span>) <a href=\"https://twitter.com/Swizec/status/1071456819107622913?ref_src=twsrc%5Etfw\">December 8, 2018</a>",
            "</blockquote>",
            "<script async charset=\"utf-8\">",
            "Function&&Function.prototype&&Function.prototype.bind&&(/MSIE ([6789]|10)/.test(navigator.userAgent)||(window.__twttr&&window.__twttr.widgets&&window.__twttr.widgets.loaded&&window.twttr.widgets.load&&window.twttr.widgets.load(),window.__twttr&&window.__twttr.widgets&&window.__twttr.widgets.init||function(t){function e(e){for(var n,i,o=e[0],s=e[1],a😮,c😦];a<o.length;a++)i😮[a],r[i]&&c.push(r[i][0]),r[i]😮;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]😒[n]);for(u&&u(e);c.length😉c.shift()()}var n={},r={1😮};function i(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(t){var e😦],n=r[t];if(0!==n)if(n)e.push(n[2]);else{var o=new Promise(function(e,i){n=r[t👿e,i]});e.push(n[2]😮);var s,a=document.getElementsByTagName(\"head\")[0],u=document.createElement(\"script\");u.charset=\"utf-8\",u.timeout=120,i.nc&&u.setAttribute(\"nonce\",i.nc),u.src=function(t){return i.p+\"js/\"+({0:\"moment~timeline~tweet\",2:\"dm_button\",3:\"button\",4:\"moment\",5:\"periscope_on_air\",6:\"timeline\",7:\"tweet\"}[t]||t)+\".\"+{0:\"a20574004ea824b1c047f200045ffa1e\",2:\"b573518d7182437fcff1973b0098d272\",3:\"509719336ca39171c37a321231ccaf83\",4:\"f261877d67dc45f3972d303d6b32c138\",5:\"04369ab165b401d73b183f97ed7153fd\",6:\"49693ebcd57b08708ebca7502c7c343d\",7:\"73b7ab8a56ad3263cad8d36ba66467fc\"}[t]+\".js\"}(t),s=function(e){u.onerror=u.onload=null,clearTimeout(c);var n=r[t];if(0!==n){if(n){var i=e&&(\"load\"===e.type?\"missing\":e.type),o=e&&e.target&&e.target.src,s=new Error(\"Loading chunk \"+t+\" failed.\\n(\"+i+\": \"+o+\")\");s.type=i,s.request😮,n[1](s)}r[t]=void 0}};var c=setTimeout(function(){s({type:\"timeout\",target:u})},12e4);u.onerror=u.onload😒,a.appendChild(u)}return Promise.all(e)},i.m=t,i.c=n,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,\"a\",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p=\"https://platform.twitter.com/\",i.oe=function(t){throw console.error(t),t};var o=window.__twttrll=window.__twttrll||[],s😮.push.bind(o);o.push=e,o😮.slice();for(var a😮;a<o.length;a++)e(o[a]);var u😒;i(i.s=91)}([function(t,e,n){var r=n(1);function i(t,e){var n;for(n in t)t.hasOwnProperty&&!t.hasOwnProperty(n)||e(n,t[n]);return t}function o(t){return{}.toString.call(t).match(/\\s([a-zA-Z]+)/)[1].toLowerCase()}function s(t){return t===Object(t)}function a(t){var e;if(!s(t))return!1;if(Object.keys)return!Object.keys(t).length;for(e in t)if(t.hasOwnProperty(e))return!1;return!0}function u(t){return t?Array.prototype.slice.call(t)😦]}t.exports={aug:function(t){return u(arguments).slice(1).forEach(function(e){i(e,function(e,n){t[e]=n})}),t},async:function(t,e){r.setTimeout(function(){t.call(e||null)},0)},compact:function t(e){return i(e,function(n,r){s(r)&&(t(r),a(r)&&delete e[n]),void 0!==r&&null!==r&&\"\"!==r||delete e[n]}),e},contains:function(t,e){return!(!t||!t.indexOf)&&t.indexOf(e)>-1},forIn:i,isObject😒,isEmptyObject:a,toType😮,isType:function(t,e){return t==o(e)},toRealArray:u}},function(t,e){t.exports=window},function(t,e,n){var r=n(6);t.exports=function(){var t=this;this.promise=new r(function(e,n){t.resolve=e,t.reject=n})}},function(t,e,n){var r=n(11),i😕(?:^|(?:https?😃?\\/\\/(?:www\\.)?twitter\\.com(?::\\d+)?(?😕/intent\\/(?:follow|user)\\/?\\?screen_name😐(?😕/#!)?\\/))@?([\\w]+)(?😕?|&|$)/i,o😕(?:^|(?:https?😃?\\/\\/(?:www\\.)?twitter\\.com(?::\\d+)?\\/(?:#!\\/)?[\\w_]+\\/status(?:es)?\\/)(\\d+)/i,s😕^http(s?)😕/\\/(\\w+\\.)*twitter\\.com([😕]|$)/i,a😕^http(s?)😕/\\/pbs\\.twimg\\.com\\//,u😕^#?([^.,<>!\\s/#\\-()'\"]+)$/,c😕twitter\\.com(?::\\d{2,4})?\\/intent\\/(\\w+)/,d😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/\\w+\\/timelines\\/(\\d+)/i,l😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/i\\/moments\\/(\\d+)/i,f😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/(\\w+)\\/(?:likes|favorites)/i,h😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/(\\w+)\\/lists\\/([\\w-%]+)/i,p😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/i\\/live\\/(\\d+)/i,m😕^https?😕/\\/syndication\\.twitter\\.com\\/settings/i,v😕^https?😕/\\/(localhost|platform)\\.twitter\\.com(?::\\d+)?\\/widgets\\/widget_iframe\\.(.+)/i,g😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/search\\?q😦\\w+)/i;function w(t){return\"string\"==typeof t&&i.test(t)&&RegExp.$1.length<=20}function y(t){if(w(t))return RegExp.$1}function b(t,e){var n=r.decodeURL(t);if(e=e||!1,n.screen_name=y(t),n.screen_name)return r.url(\"https://twitter.com/intent/\"+(e?\"follow\":\"user\"),n)}function _(t){return\"string\"==typeof t&&u.test(t)}function E(t){return\"string\"==typeof t&&o.test(t)}t.exports={isHashTag:_,hashTag:function(t,e){if(e=void 0===e||e,_(t))return(e?\"#\":\"\")+RegExp.$1},isScreenName:w,screenName:y,isStatus:E,status:function(t){return E(t)&&RegExp.$1},intentForProfileURL:b,intentForFollowURL:function(t){return b(t,!0)},isTwitterURL:function(t){return s.test(t)},isTwimgURL:function(t){return a.test(t)},isIntentURL:function(t){return c.test(t)},isSettingsURL:function(t){return m.test(t)},isWidgetIframeURL:function(t){return v.test(t)},isSearchUrl:function(t){return g.test(t)},regexen:{profile:i},momentId:function(t){return l.test(t)&&RegExp.$1},collectionId:function(t){return d.test(t)&&RegExp.$1},intentType:function(t){return c.test(t)&&RegExp.$1},likesScreenName:function(t){return f.test(t)&&RegExp.$1},listScreenNameAndSlug:function(t){var e,n,r;if(h.test(t)){e=RegExp.$1,n=RegExp.$2;try{r=decodeURIComponent(n)}catch(t){}return{ownerScreenName:e,slug:r||n}}return!1},eventId:function(t){return p.test(t)&&RegExp.$1}}},function(t,e,n){var r=n(0),i😦!0,1,\"1\",\"on\",\"ON\",\"true\",\"TRUE\",\"yes\",\"YES\"],o😦!1,0,\"0\",\"off\",\"OFF\",\"false\",\"FALSE\",\"no\",\"NO\"];function s(t){return void 0!==t&&null!==t&&\"\"!==t}function a(t){return c(t)&&t%1==0}function u(t){return c(t)&&!a(t)}function c(t){return s(t)&&!isNaN(t)}function d(t){return r.contains(o,t)}function l(t){return r.contains(i,t)}t.exports={hasValue😒,isInt:a,isFloat:u,isNumber:c,isString:function(t){return\"string\"===r.toType(t)},isArray:function(t){return s(t)&&\"array\"==r.toType(t)},isTruthValue:l,isFalseValue😛,asInt:function(t){if(a(t))return parseInt(t,10)},asFloat:function(t){if(u(t))return t},asNumber:function(t){if(c(t))return t},asBoolean:function(t){return!(!s(t)||!l(t)&&(d(t)||!t))}}},function(t,e){t.exports=document},function(t,e,n){var r=n(1),i=n(20),o=n(45);i.hasPromiseSupport()||(r.Promise😮),t.exports=r.Promise},function(t,e,n){var r=n(0);t.exports=function(t,e){var n=Array.prototype.slice.call(arguments,2);return function(){var i=r.toRealArray(arguments);return t.apply(e,n.concat(i))}}},function(t,e){t.exports=location},function(t,e,n){var r=n(47);t.exports=new r(\"__twttr\")},function(t,e,n){var r=n(0),i😕\\b([\\w-_]+)\\b/g;function o(t){return new RegExp(\"\\\\b\"+t+\"\\\\b\",\"g\")}function s(t,e){t.classList?t.classList.add(e)😮(e).test(t.className)||(t.className+=\" \"+e)}function a(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(o(e),\" \")}function u(t,e){return t.classList?t.classList.contains(e):r.contains(c(t),e)}function c(t){return r.toRealArray(t.classList?t.classList:t.className.match(i))}t.exports={add😒,remove:a,replace:function(t,e,n){if(t.classList&&u(t,e))return a(t,e),void s(t,n);t.className=t.className.replace(o(e),n)},toggle:function(t,e,n){return void 0===n&&t.classList&&t.classList.toggle?t.classList.toggle(e,n)😦n?s(t,e):a(t,e),n)},present:u,list:c}},function(t,e,n){var r=n(4),i=n(0);function o(t){return encodeURIComponent(t).replace(/\\+/g,\"%2B\").replace(/'/g,\"%27\")}function s(t){return decodeURIComponent(t)}function a(t){var e😦];return i.forIn(t,function(t,n){var s😮(t);i.isType(\"array\",n)||(n😦n]),n.forEach(function(t){r.hasValue(t)&&e.push(s+\"=\"+o(t))})}),e.sort().join(\"&\")}function u(t){var e={};return t?(t.split(\"&\").forEach(function(t){var n=t.split(\"😊,r😒(n[0]),o😒(n[1]);if(2==n.length){if(!i.isType(\"array\",e[r]))return r in e?(e[r👿e[r]],void e[r].push(o)):void(e[r]😮);e[r].push(o)}}),e):{}}t.exports={url:function(t,e){return a(e).length>0?i.contains(t,\"?\")?t+\"&\"+a(e):t+\"?\"+a(e):t},decodeURL:function(t){var e=t&&t.split(\"?\");return 2==e.length?u(e[1]):{}},decode:u,encode:a,encodePart😮,decodePart😒}},function(t,e,n){var r=n(😎,i=n(1),o=n(0),s={},a😮.contains(r.href,\"tw_debug=true\");function u(){}function c(){}function d(){return i.performance&&+i.performance.now()||+new Date}function l(t,e){if(i.console&&i.console[t])switch(e.length){case 1:i.console[t](e[0]);break;case 2:i.console[t](e[0],e[1]);break;case 3:i.console[t](e[0],e[1],e[2]);break;case 4:i.console[t](e[0],e[1],e[2],e[3]);break;case 5:i.console[t](e[0],e[1],e[2],e[3],e[4]);break;default😮!==e.length&&i.console.warn&&i.console.warn(\"too many params passed to logger.\"+t)}}t.exports={devError:u,devInfo:c,devObject:function(t,e){},publicError:function(){l(\"error\",o.toRealArray(arguments))},publicLog:function(){l(\"info\",o.toRealArray(arguments))},time:function(t){a&&(s[t]😛())},timeEnd:function(t){a&&s[t]&&(d(),s[t])}}},function(t,e,n){var r=n(19),i=n(4),o=n(11),s=n(0),a=n(116);t.exports=function(t){var e=t.href&&t.href.split(\"?\")[1],n=e?o.decode(e):{},u={lang:a(t),width:t.getAttribute(\"data-width\")||t.getAttribute(\"width\"),height:t.getAttribute(\"data-height\")||t.getAttribute(\"height\"),related:t.getAttribute(\"data-related\"),partner:t.getAttribute(\"data-partner\")};return i.asBoolean(t.getAttribute(\"data-dnt\"))&&r.setOn(),s.forIn(u,function(t,e){var r=n[t];n[t]=i.hasValue(r)?r:e}),s.compact(n)}},function(t,e,n){var r=n(79),i=n(22);t.exports=function(){var t=\"data-twitter-extracted-\"+i.generate();return function(e,n){return r(e,n).filter(function(e){return!e.hasAttribute(t)}).map(function(e){return e.setAttribute(t,\"true\"),e})}}},function(t,e){function n(t,e,n,r,i,o){this.factory=t,this.Sandbox=e,this.srcEl😮,this.targetEl=i,this.parameters=r,this.className=n}n.prototype.destroy=function(){this.srcEl=this.targetEl=null},t.exports=n},function(t,e,n){var r=n(6),i=n(49),o=n(19),s=n(4),a=n(0);t.exports=function(t,e,n){var u;return t=t||[],e=e||{},u=\"ƒ(\"+t.join(\", \")+\", target, [options]);\",function(){var c,d,l,f,h=Array.prototype.slice.apply(arguments,[0,t.length]),p=Array.prototype.slice.apply(arguments,[t.length]);return p.forEach(function(t){t&&(t.nodeType!==Node.ELEMENT_NODE?a.isType(\"function\",t)?c=t:a.isType(\"object\",t)&&(d=t):l=t)}),h.length!==t.length||0===p.length?(c&&a.async(function(){c(!1)}),r.reject(new Error(\"Not enough parameters. Expected: \"+u))):l?(d=a.aug({},d||{},e),t.forEach(function(t){d[t]=h.shift()}),s.asBoolean(d.dnt)&&o.setOn(),f=i.addWidget(n(d,l)),c&&f.then(c,function(){c(!1)}),f)😦c&&a.async(function(){c(!1)}),r.reject(new Error(\"No target element specified. Expected: \"+u)))}}},function(t,e,n){var r=n(99),i=n(2),o=n(0);function s(t,e){return function(){try{e.resolve(t.call(this))}catch(t){e.reject(t)}}}t.exports={sync:function(t,e){t.call(e)},read:function(t,e){var n=new i;return r.read(s(t,n),e),n.promise},write:function(t,e){var n=new i;return r.write(s(t,n),e),n.promise},defer:function(t,e,n){var a=new i;return o.isType(\"function\",t)&&(n=e,e=t,t=1),r.defer(t,s(e,a),n),a.promise}}},function(t,e,n){var r=n(9),i😦\"https://syndication.twitter.com\",\"https://cdn.syndication.twimg.com\",\"https://localhost.twitter.com:8444\"],o😦\"https://syndication.twitter.com\",\"https://localhost.twitter.com:8445\"],s=function(t,e){return t.indexOf(e)>-1},a=function(){var t=r.get(\"backendHost\");return t&&s(i,t)?t:\"https://cdn.syndication.twimg.com\"},u=function(){var t=r.get(\"settingsSvcHost\");return t&&s(o,t)?t:\"https://syndication.twitter.com\"};function c(t,e){var n😦t];return e.forEach(function(t){n.push(function(t){var e😦t||\"\").toString(),n=\"/\"===e.slice(0,1)?1😮,r=function(t){return\"/\"===t.slice(-1)}(e)?-1:void 0;return e.slice(n,r)}(t))}),n.join(\"/\")}t.exports={cookieConsent:function(t){var e=t||[];return e.unshift(\"cookie/consent\"),c(u(),e)},eventVideo:function(t){var e=t||[];return e.unshift(\"video/event\"),c(a(),e)},grid:function(t){var e=t||[];return e.unshift(\"grid/collection\"),c(a(),e)},moment:function(t){var e=t||[];return e.unshift(\"moments\"),c(a(),e)},settings:function(t){var e=t||[];return e.unshift(\"settings\"),c(u(),e)},timeline:function(t){var e=t||[];return e.unshift(\"timeline\"),c(a(),e)},tweetBatch:function(t){var e=t||[];return e.unshift(\"tweets.json\"),c(a(),e)},video:function(t){var e=t||[];return e.unshift(\"widgets/video\"),c(a(),e)}}},function(t,e,n){var r=n(5),i=n(😎,o=n(35),s=n(77),a=n(4),u=n(32),c=!1,d😕https?😕/\\/([^/]+).*/i;t.exports={setOn:function(){c=!0},enabled:function(t,e){return!!(c||a.asBoolean(u.val(\"dnt\"))||s.isUrlSensitive(e||i.host)||o.isFramed()&&s.isUrlSensitive(o.rootDocumentLocation())||(t😛.test(t||r.referrer)&&RegExp.$1)&&s.isUrlSensitive(t))}}},function(t,e,n){var r=n(5),i=n(12),o=n(92),s=n(1),a=n(0),u😮.userAgent;function c(t){return/(Trident|MSIE|Edge[/ ]?\\d)/.test(t=t||u)}t.exports={retina:function(t){return(t=t||s).devicePixelRatio?t.devicePixelRatio>=1.5:!!t.matchMedia&&t.matchMedia(\"only screen and (min-resolution: 144dpi)\").matches},anyIE:c,ie9:function(t){return/MSIE 9/.test(t=t||u)},ie10:function(t){return/MSIE 10/.test(t=t||u)},ios:function(t){return/(iPad|iPhone|iPod)/.test(t=t||u)},android:function(t){return/^Mozilla\\/5\\.0 \\(Linux; (U; )?Android/.test(t=t||u)},canPostMessage:function(t,e){return t=t||s,e=e||u,t.postMessage&&!(c(e)&&t.opener)},touch:function(t,e,n){return t=t||s,e=e||o,n=n||u,\"ontouchstart\"in t||/Opera Mini/.test(n)||e.msMaxTouchPoints>0},cssTransitions:function(){var t=r.body.style;return void 0!==t.transition||void 0!==t.webkitTransition||void 0!==t.mozTransition||void 0!==t.oTransition||void 0!==t.msTransition},hasPromiseSupport:function(){return!!(s.Promise&&s.Promise.resolve&&s.Promise.reject&&s.Promise.all&&s.Promise.race&&(new s.Promise(function(e){t=e}),a.isType(\"function\",t)));var t},hasIntersectionObserverSupport:function(){return!!s.IntersectionObserver},hasPerformanceInformation:function(){return s.performance&&s.performance.getEntriesByType},hasLocalStorageSupport:function(){try{return s.localStorage.setItem(\"local_storage_support_test\",\"true\"),void 0!==s.localStorage}catch(t){return i.devError(\"window.localStorage is not supported:\",t),!1}}}},function(t,e,n){var r=n(6),i=n(2);function o(t,e){return t.then(e,e)}function s(t){return t instanceof r}t.exports={always😮,allResolved:function(t){var e;return void 0===t?r.reject(new Error(\"undefined is not an object\")):Array.isArray(t)?(e=t.length)?new r(function(n,r){var i😮,o😦];function a(){(i+=1)===e&&(0===o.length?r():n(o))}function u(t){o.push(t),a()}t.forEach(function(t){s(t)?t.then(u,a):u(t)})}):r.resolve([]):r.reject(new Error(\"Type error\"))},some:function(t){var e;return e😦t=t||[]).length,t=t.filter(s),e?e!==t.length?r.reject(\"non-Promise passed to .some\"):new r(function(e,n){var r😮;function i(){(r+=1)===t.length&&n()}t.forEach(function(t){t.then(e,i)})}):r.reject(\"no promises passed to .some\")},isPromise😒,allSettled:function(t){function e(){}return r.all((t||[]).map(function(t){return o(t,e)}))},timeout:function(t,e){var n=new i;return setTimeout(function(){n.reject(new Error(\"Promise timed out\"))},e),t.then(function(t){n.resolve(t)},function(t){n.reject(t)}),n.promise}}},function(t,e){var n=\"i\",r😮,i😮;t.exports={generate:function(){return n+String(+new Date)+Math.floor(1e5*Math.random())+r++},deterministic:function(){return n+String(i++)}}},function(t,e,n){var r=n(46),i=n(48),o=n(0);t.exports😮.aug(r.get(\"events\")||{},i.Emitter)},function(t,e,n){var r=n(25),i=n(107);t.exports=r.build([i])},function(t,e,n){var r=n(37),i=n(104),o=n(7);(r=Object.create(r)).build😮(r.build,null,i),t.exports=r},function(t,e,n){var r=n(37),i=n(38),o=n(7);(r=Object.create(r)).build😮(r.build,null,i),t.exports=r},function(t,e,n){var r=n(81),i=n(73),o=n(82),s=n(😎,a=n(68),u=n(72),c=n(19),d=n(4),l=n(22),f=n(0);function h(t){if(!t||!t.headers)throw new Error(\"unexpected response schema\");return{html:t.body,config:t.config,pollInterval:1e3*parseInt(t.headers.xPolling,10)||null,maxCursorPosition:t.headers.maxPosition,minCursorPosition:t.headers.minPosition}}function p(t){if(t&&t.headers)throw new Error(t.headers.status);throw t instanceof Error?t:new Error(t)}t.exports=function(t){t.params({instanceId:{required:!0,fallback:l.deterministic},lang:{required:!0,transform:a.matchLanguage,fallback:\"en\"},tweetLimit:{transform😛.asInt}}),t.defineProperty(\"endpoint\",{get:function(){throw new Error(\"endpoint not specified\")}}),t.defineProperty(\"pollEndpoint\",{get:function(){return this.endpoint}}),t.define(\"cbId\",function(t){var e=t?\"_new\":\"_old\";return\"tl_\"+this.params.instanceId+\"_\"+this.id+e}),t.define(\"queryParams\",function(){return{lang:this.params.lang,tz:u.getTimezoneOffset(),t:r(),domain😒.host,tweet_limit:this.params.tweetLimit,dnt:c.enabled()}}),t.define(\"fetch\",function(){return i.fetch(this.endpoint,this.queryParams(),o,this.cbId()).then(h,p)}),t.define(\"poll\",function(t,e){var n,r;return n={since_id😦t=t||{}).sinceId,max_id:t.maxId,min_position:t.minPosition,max_position:t.maxPosition},r=f.aug(this.queryParams(),n),i.fetch(this.pollEndpoint,r,o,this.cbId(e)).then(h,p)})}},function(t,e,n){var r=n(48).makeEmitter();t.exports={emitter:r,START:\"start\",ALL_WIDGETS_RENDER_START:\"all_widgets_render_start\",ALL_WIDGETS_RENDER_END:\"all_widgets_render_end\",ALL_WIDGETS_AND_IMAGES_LOADED:\"all_widgets_and_images_loaded\"}},function(t,e,n){var r=n(5),i=n(0);t.exports=function(t,e,n){var o;if(n=n||r,t=t||{},e=e||{},t.name){try{o=n.createElement('<iframe name=\"'+t.name+'\"></iframe>')}catch(e){(o=n.createElement(\"iframe\")).name=t.name}delete t.name}else o=n.createElement(\"iframe\");return t.id&&(o.id=t.id,delete t.id),o.allowtransparency=\"true\",o.scrolling=\"no\",o.setAttribute(\"frameBorder\",0),o.setAttribute(\"allowTransparency\",!0),i.forIn(t,function(t,e){o.setAttribute(t,e)}),i.forIn(e,function(t,e){o.style[t]=e}),o}},function(t,e,n){var r=n(1).JSON;t.exports={stringify:r.stringify||r.encode,parse:r.parse||r.decode}},function(t,e,n){var r=n(0),i=n(40);t.exports={closest:function t(e,n,o){var s;if(n)return o😮||n&&n.ownerDocument,s=r.isType(\"function\",e)?e:function(t){return function(e){return!!e.tagName&&i(e,t)}}(e),n===o?s(n)?n:void 0😒(n)?n:t(s,n.parentNode,o)}}},function(t,e,n){var r,i=n(5);function o(t){var e,n,o,s😮;for(r={},e😦t=t||i).getElementsByTagName(\"meta\");e[s];s++){if(n=e[s],/^twitter😕.test(n.getAttribute(\"name\")))o=n.getAttribute(\"name\").replace(/^twitter😕,\"\");else{if(!/^twitter😕.test(n.getAttribute(\"property\")))continue;o=n.getAttribute(\"property\").replace(/^twitter😕,\"\")}r[o]=n.getAttribute(\"content\")||n.getAttribute(\"value\")}}o(),t.exports={init😮,val:function(t){return r[t]}}},function(t,e,n){var r=n(5),i=n(30),o=n(19),s=n(0),a=n(41),u=n(9),c=n(3),d=n(31),l=a.version,f=u.get(\"clientEventEndpoint\")||\"https://syndication.twitter.com/i/jot\",h=1;function p(t){return s.aug({client:\"tfw\"},t||{})}function m(t,e,n){return e=e||{},s.aug({},e,{_category_:t,triggered_on:e.triggered_on||+new Date,dnt😮.enabled(n)})}t.exports={extractTermsFromDOM:function t(e,n){var r;return n=n||{},e&&e.nodeType===Node.ELEMENT_NODE?((r=e.getAttribute(\"data-scribe\"))&&r.split(\" \").forEach(function(t){var e=t.trim().split(\"😊,r=e[0],i=e[1];r&&i&&!n[r]&&(n[r]=i)}),t(e.parentNode,n)):n},clickEventElement:function(t){var e😛.closest(\"[data-expanded-url]\",t),n=e&&e.getAttribute(\"data-expanded-url\");return n&&c.isTwitterURL(n)?\"twitter_url\":\"url\"},flattenClientEventPayload:function(t,e){return s.aug({},e,{event_namespace:t})},formatGenericEventData:m,formatClientEventData:function(t,e,n){var i=t&&t.widget_origin||r.referrer;return(t=m(\"tfw_client_event\",t,i)).client_version=l,t.format_version=void 0!==n?n:1,e||(t.widget_origin=i),t},formatClientEventNamespace😛,formatTweetAssociation:function(t,e){var n={};return(e=e||{}).association_namespace😛(t),n[h]=e,n},noticeSeen:function(t){return\"notice\"===t.element&&\"seen\"===t.action},splitLogEntry:function(t){var e,n,r,i,o;return t.item_ids&&t.item_ids.length>1?(e=Math.floor(t.item_ids.length/2),n=t.item_ids.slice(0,e),r={},i=t.item_ids.slice(e),o={},n.forEach(function(e){r[e]=t.item_details[e]}),i.forEach(function(e){o[e]=t.item_details[e]}),[s.aug({},t,{item_ids:n,item_details:r}),s.aug({},t,{item_ids:i,item_details😮})])😦t]},stringify:function(t){var e,n=Array.prototype.toJSON;return delete Array.prototype.toJSON,e=i.stringify(t),n&&(Array.prototype.toJSON=n),e},AUDIENCE_ENDPOINT:\"https://syndication.twitter.com/i/jot/syndication\",CLIENT_EVENT_ENDPOINT:f,RUFOUS_REDIRECT:\"https://platform.twitter.com/jot.html\"}},function(t,e,n){var r=n(10),i={},o=-1,s={};function a(t){var e=t.getAttribute(\"data-twitter-event-id\");return e||(t.setAttribute(\"data-twitter-event-id\",++o),o)}function u(t,e,n){var r😮,i=t&&t.length||0;for(r😮;r<i;r++)if(t[r].call(e,n,e),n.ceaseImmediately)return!1}function c(t,e,n){for(var i=n||t.target||t.srcElement,o=r.list(i).map(function(t){return\".\"+t}).concat(i.tagName),s😮,a😮.length;s<a;s++)if(!1===u(e[o[s]],i,t))return;t.cease||i!==this&&c.call(this,t,e,i.parentElement||i.parentNode)}function d(t,e,n,r){function i(r){c.call(t,r,n[e])}!function(t,e,n,r){t.id&&(s[t.id]😒[t.id]||[],s[t.id].push({el:t,listener:e,type:n,rootId:r}))}(t,i,e,r),t.addEventListener(e,i,!1)}function l(t){t&&t.preventDefault?t.preventDefault():t.returnValue=!1}function f(t){t&&(t.cease=!0)&&t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}t.exports={stop:function(t){return f(t),l(t),!1},stopPropagation:f,stopImmediatePropagation:function(t){t&&(t.ceaseImmediately=!0,f(t),t.stopImmediatePropagation())},preventDefault:l,delegate:function(t,e,n,r){var o=a(t);i[o]=i[o]||{},i[o][e]||(i[o][e]={},d(t,e,i[o],o)),i[o][e][n]=i[o][e][n]||[],i[o][e][n].push(r)},simulate:function(t,e,n){var r=a(e),o=i[r]&&i[r];c.call(e,{target:n},o[t])},removeDelegatesForWidget:function(t){var e😒[t];e&&(e.forEach(function(t){t.el.removeEventListener(t.type,t.listener,!1),delete i[t.rootId]}),delete s[t])}}},function(t,e,n){var r=n(😎,i=n(76),o=n(0),s=i.getCanonicalURL()||r.href,a😒;t.exports={isFramed:function(){return s!==a},rootDocumentLocation:function(t){return t&&o.isType(\"string\",t)&&(s=t),s},currentDocumentLocation:function(){return a}}},function(t,e,n){var r=n(75),i=n(101),o=n(78),s=n(33),a=new(n(109))(function(t){var e,n,a;if(0!==t.length){if(u(t))return c(t);e=r(t,function(t){return s.noticeSeen(t.input.namespace)}),n=e.true,a=e.false,n&&n.length>0&&(n=n.slice(0,1),o.canFlushOneItem(n[0])||(n[0].input.data.message=\"\"),c(n)),a&&(u(a)?c:function(t){i.init(),t.forEach(function(t){var e=t.input.namespace,n=t.input.data,r=t.input.offsite,o=t.input.version;i.clientEvent(e,n,r,o)}),i.flush().then(function(){t.forEach(function(t){t.taskDoneDeferred.resolve()})},function(){t.forEach(function(t){t.taskDoneDeferred.reject()})})})(a)}});function u(t){return 1===t.length&&o.canFlushOneItem(t[0])}function c(t){t.forEach(function(t){var e=t.input.namespace,n=t.input.data,r=t.input.offsite,i=t.input.version;o.clientEvent(e,n,r,i),t.taskDoneDeferred.resolve()})}t.exports={scribe:function(t,e,n,r){return a.add({namespace:t,data:e,offsite:n,version:r})},pause:function(){a.pause()},resume:function(){a.resume()}}},function(t,e,n){var r=n(102),i=n(103),o=n(0);t.exports={couple:function(){return o.toRealArray(arguments)},build:function(t,e,n){var o=new t;return(e=i(r(e||[]))).forEach(function(t){t.call(null,o)}),o.build(n)}}},function(t,e,n){var r=n(105),i=n(0),o=n(39);function s(){this.Component=this.factory(),this._adviceArgs😦],this._lastArgs😦]}i.aug(s.prototype,{factory😮,build:function(t){var e=this;return this.Component,i.aug(this.Component.prototype.boundParams,t),this._adviceArgs.concat(this._lastArgs).forEach(function(t){(function(t,e,n){var r=this[e];if(!r)throw new Error(e+\" does not exist\");this[e]=t(r,n)}).apply(e.Component.prototype,t)}),delete this._lastArgs,delete this._adviceArgs,this.Component},params:function(t){var e=this.Component.prototype.paramConfigs;t=t||{},this.Component.prototype.paramConfigs=i.aug({},t,e)},define:function(t,e){if(t in this.Component.prototype)throw new Error(t+\" has previously been defined\");this.override(t,e)},defineStatic:function(t,e){this.Component[t]=e},override:function(t,e){this.Component.prototype[t]=e},defineProperty:function(t,e){if(t in this.Component.prototype)throw new Error(t+\" has previously been defined\");this.overrideProperty(t,e)},overrideProperty:function(t,e){var n=i.aug({configurable:!0},e);Object.defineProperty(this.Component.prototype,t,n)},before:function(t,e){this._adviceArgs.push([r.before,t,e])},after:function(t,e){this._adviceArgs.push([r.after,t,e])},around:function(t,e){this._adviceArgs.push([r.around,t,e])},last:function(t,e){this._lastArgs.push([r.after,t,e])}}),t.exports😒},function(t,e,n){var r=n(0);function i(){return!0}function o(t){return t}t.exports=function(){function t(t){var e=this;t=t||{},this.params=Object.keys(this.paramConfigs).reduce(function(n,s){var a😦],u=e.boundParams,c=e.paramConfigs[s],d=c.validate||i,l=c.transform||o;if(s in u&&a.push(u[s]),s in t&&a.push(t[s]),a=\"fallback\"in c?a.concat(c.fallback):a,n[s]=function(t,e,n){var i=null;return t.some(function(t){if(t=r.isType(\"function\",t)?t():t,e(t))return i=n(t),!0}),i}(a,d,l),c.required&&null==n[s])throw new Error(s+\" is a required parameter\");return n},{}),this.initialize()}return r.aug(t.prototype,{paramConfigs:{},boundParams:{},initialize:function(){}}),t}},function(t,e,n){var r=n(1).HTMLElement,i=r.prototype.matches||r.prototype.matchesSelector||r.prototype.webkitMatchesSelector||r.prototype.mozMatchesSelector||r.prototype.msMatchesSelector||r.prototype.oMatchesSelector;t.exports=function(t,e){if(i)return i.call(t,e)}},function(t){t.exports={version:\"7e980dd:1559715853415\"}},function(t,e,n){var r,i=n(10),o=n(5),s=n(1),a=n(32),u=n(50),c=n(4),d=n(22),l=\"csptest\";t.exports={inlineStyle:function(){var t=l+d.generate(),e😮.createElement(\"div\"),n😮.createElement(\"style\"),f=\".\"+t+\" { visibility: hidden; }\";return!!o.body&&(c.asBoolean(a.val(\"widgets:csp\"))&&(r=!1),void 0!==r?r😦e.style.display=\"none\",i.add(e,t),n.type=\"text/css\",n.appendChild(o.createTextNode(f)),o.body.appendChild(n),o.body.appendChild(e),r=\"hidden\"===s.getComputedStyle(e).visibility,u(e),u(n),r))}}},function(t,e,n){var r=n(1);t.exports=function(t,e,n){var i,o😮;return n=n||null,function s(){var a=n||this,u=arguments,c=+new Date;if(r.clearTimeout(i),c-o>e)return o=c,void t.apply(a,u);i=r.setTimeout(function(){s.apply(a,u)},e)}}},function(t,e){t.exports=function(t){var e=t.getBoundingClientRect();return{width:e.width,height:e.height}}},function(t,e,n){",
            "/*!",
            " * @overview es6-promise - a tiny implementation of Promises/A+.",
            " * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)",
            " * @license   Licensed under MIT license",
            " *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE",
            " * @version   v4.2.5+7f2b526d",
            " */var r;r=function(){\"use strict\";function t(t){return\"function\"==typeof t}var e=Array.isArray?Array.isArray:function(t){return\"[object Array]\"===Object.prototype.toString.call(t)},n😮,r=void 0,i=void 0,o=function(t,e){f[n]=t,f[n+1]=e,2===(n+=2)&&(i?i(h):w())},s=\"undefined\"!=typeof window?window:void 0,a😒||{},u=a.MutationObserver||a.WebKitMutationObserver,c=\"undefined\"==typeof self&&\"undefined\"!=typeof process&&\"[object process]\"==={}.toString.call(process),d=\"undefined\"!=typeof Uint8ClampedArray&&\"undefined\"!=typeof importScripts&&\"undefined\"!=typeof MessageChannel;function l(){var t=setTimeout;return function(){return t(h,1)}}var f=new Array(1e3);function h(){for(var t😮;t<n;t+=2)(0,f[t])(f[t+1]),f[t]=void 0,f[t+1]=void 0;n😮}var p,m,v,g,w=void 0;function y(t,e){var n=this,r=new this.constructor(E);void 0===r[_]&&k(r);var i=n._state;if(i){var s=arguments[i-1];o(function(){return O(i,r,s,n._result)})}else I(n,r,t,e);return r}function b(t){if(t&&\"object\"==typeof t&&t.constructor===this)return t;var e=new this(E);return N(e,t),e}c?w=function(){return process.nextTick(h)}:u?(m😮,v=new u(h),g=document.createTextNode(\"\"),v.observe(g,{characterData:!0}),w=function(){g.data=m=++m%2})😛?((p=new MessageChannel).port1.onmessage=h,w=function(){return p.port2.postMessage(0)}):w=void 0===s?function(){try{var t=Function(\"return this\")().require(\"vertx\");return void 0!==(r=t.runOnLoop||t.runOnContext)?function(){r(h)}:l()}catch(t){return l()}}():l();var _=Math.random().toString(36).substring(2);function E(){}var x=void 0,A=1,T=2,S={error:null};function R(t){try{return t.then}catch(t){return S.error=t,S}}function C(e,n,r){n.constructor===e.constructor&&r===y&&n.constructor.resolve===b?function(t,e){e._state===A?j(t,e._result):e._state===T?L(t,e._result):I(e,void 0,function(e){return N(t,e)},function(e){return L(t,e)})}(e,n):r===S?(L(e,S.error),S.error=null):void 0===r?j(e,n):t(r)?function(t,e,n){o(function(t){var r=!1,i=function(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}(n,e,function(n){r||(r=!0,e!==n?N(t,n):j(t,n))},function(e){r||(r=!0,L(t,e))},t._label);!r&&i&&(r=!0,L(t,i))},t)}(e,n,r):j(e,n)}function N(t,e){var n,r;t===e?L(t,new TypeError(\"You cannot resolve a promise with itself\"))😦r=typeof(n=e),null===n||\"object\"!==r&&\"function\"!==r?j(t,e):C(t,e,R(e)))}function P(t){t._onerror&&t._onerror(t._result),D(t)}function j(t,e){t._state===x&&(t._result=e,t._state=A,0!==t._subscribers.length&&o(D,t))}function L(t,e){t._state===x&&(t._state=T,t._result=e,o(P,t))}function I(t,e,n,r){var i=t._subscribers,s=i.length;t._onerror=null,i[s]=e,i[s+A]=n,i[s+T]=r,0===s&&t._state&&o(D,t)}function D(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,i=void 0,o=t._result,s😮;s<e.length;s+👨)r=e[s],i=e[s+n],r?O(n,r,i,o):i(o);t._subscribers.length😮}}function O(e,n,r,i){var o=t(r),s=void 0,a=void 0,u=void 0,c=void 0;if(o){if((s=function(t,e){try{return t(e)}catch(t){return S.error=t,S}}(r,i))===S?(c=!0,a😒.error,s.error=null):u=!0,n===s)return void L(n,new TypeError(\"A promises callback cannot return that same promise.\"))}else s=i,u=!0;n._state!==x||(o&&u?N(n,s):c?L(n,a):e===A?j(n,s):e===T&&L(n,s))}var z😮;function k(t){t[_]😒++,t._state=void 0,t._result=void 0,t._subscribers😦]}var M=function(){function t(t,n){this._instanceConstructor=t,this.promise=new t(E),this.promise[_]||k(this.promise),e(n)?(this.length=n.length,this._remaining=n.length,this._result=new Array(this.length),0===this.length?j(this.promise,this._result)😦this.length=this.length||0,this._enumerate(n),0===this._remaining&&j(this.promise,this._result))):L(this.promise,new Error(\"Array Methods must be provided an Array\"))}return t.prototype._enumerate=function(t){for(var e😮;this._state===x&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===b){var i=R(t);if(i===y&&t._state!==😆this._settledAt(t._state,e,t._result);else if(\"function\"!=typeof i)this._remaining--,this._result[e]=t;else if(n===U){var o=new n(E);C(o,t,i),this._willSettleAt(o,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},t.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===x&&(this._remaining--,t===T?L(r,n):this._result[e]=n),0===this._remaining&&j(r,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;I(t,void 0,function(t){return n._settledAt(A,e,t)},function(t){return n._settledAt(T,e,t)})},t}(),U=function(){function e(t){this[_]😒++,this._result=this._state=void 0,this._subscribers😦],E!==t&&(\"function\"!=typeof t&&function(){throw new TypeError(\"You must pass a resolver function as the first argument to the promise constructor\")}(),this instanceof e?function(t,e){try{e(function(e){N(t,e)},function(e){L(t,e)})}catch(e){L(t,e)}}(this,t):function(){throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\")}())}return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.finally=function(e){var n=this.constructor;return t(e)?this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})}):this.then(e,e)},e}();return U.prototype.then=y,U.all=function(t){return new M(this,t).promise},U.race=function(t){var n=this;return e(t)?new n(function(e,r){for(var i=t.length,o😮;o<i;o++)n.resolve(t[o]).then(e,r)}):new n(function(t,e){return e(new TypeError(\"You must pass an array to race.\"))})},U.resolve=b,U.reject=function(t){var e=new this(E);return L(e,t),e},U._setScheduler=function(t){i=t},U._setAsap=function(t){o=t},U._asap😮,U.polyfill=function(){var t=void 0;if(\"undefined\"!=typeof global)t=global;else if(\"undefined\"!=typeof self)t=self;else try{t=Function(\"return this\")()}catch(t){throw new Error(\"polyfill failed because global object is unavailable in this environment\")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if(\"[object Promise]\"===n&&!e.cast)return}t.Promise=U},U.Promise=U,U},t.exports=r()},function(t,e,n){var r=n(47);t.exports=new r(\"twttr\")},function(t,e,n){var r=n(1),i=n(0);function o(t){return i.isType(\"string\",t)?t.split(\".\"):i.isType(\"array\",t)?t😦]}function s(t,e){(e=e||r)[t]=e[t]||{},Object.defineProperty(this,\"base\",{value:e[t]}),Object.defineProperty(this,\"name\",{value:t})}i.aug(s.prototype,{get:function(t){return o(t).reduce(function(t,e){if(i.isObject(t))return t[e]},this.base)},set:function(t,e,n){var r😮(t),s=function(t,e){var n😮(e).slice(0,-1);return n.reduce(function(t,e,r){if(t[e]=t[e]||{},!i.isObject(t[e]))throw new Error(n.slice(0,r+1).join(\".\")+\" is already defined with a value.\");return t[e]},t)}(this.base,t),a=r.slice(-1);return n&&a in s?s[a]😒[a]=e},init:function(t,e){return this.set(t,e,!0)},unset:function(t){var e😮(t),n=this.get(e.slice(0,-1));n&&delete n[e.slice(-1)]},aug:function(t){var e=this.get(t),n=i.toRealArray(arguments).slice(1);if(e=void 0!==e?e:{},n.unshift(e),!n.every(i.isObject))throw new Error(\"Cannot augment non-object.\");return this.set(t,i.aug.apply(null,n))},call:function(t){var e=this.get(t),n=i.toRealArray(arguments).slice(1);if(!i.isType(\"function\",e))throw new Error(\"Function \"+t+\"does not exist.\");return e.apply(null,n)},fullPath:function(t){var e😮(t);return e.unshift(this.name),e.join(\".\")}}),t.exports😒},function(t,e,n){var r=n(0),i=n(7),o={bind:function(t,e){return this._handlers=this._handlers||{},this._handlers[t]=this._handlers[t]||[],this._handlers[t].push(e)},unbind:function(t,e){var n;this._handlers&&this._handlers[t]&&(e?(n=this._handlers[t].indexOf(e))>😮&&this._handlers[t].splice(n,1):this._handlers[t👿])},trigger:function(t,e){var n=this._handlers&&this._handlers[t];(e=e||{}).type=t,n&&n.forEach(function(t){r.async(i(t,this,e))})}};t.exports={Emitter😮,makeEmitter:function(){return r.aug(function(){},o)}}},function(t,e,n){var r=n(98),i=n(74),o=n(6),s=n(21),a=n(7),u=n(0),c=new i(function(t){var e=function(t){return t.reduce(function(t,e){return t[e.className]=t[e.className]||[],t[e.className].push(e),t},{})}(t.map(r.fromRawTask));u.forIn(e,function(t,e){s.allSettled(e.map(function(t){return t.initialize()})).then(function(){e.forEach(function(t){o.all([t.hydrate(),t.insertIntoDom()]).then(a(t.render,t)).then(a(t.success,t),a(t.fail,t))})})})});t.exports={addWidget:function(t){return c.add(t)}}},function(t,e,n){var r=n(17);t.exports=function(t){return r.write(function(){t&&t.parentNode&&t.parentNode.removeChild(t)})}},function(t,e,n){n(12),t.exports={log:function(t,e){}}},function(t,e,n){var r=n(1);function i(t){return(t=t||r).getSelection&&t.getSelection()}t.exports={getSelection:i,getSelectedText:function(t){var e=i(t);return e?e.toString():\"\"}}},function(t,e,n){var r=n(5),i=n(1),o=n(2),s=2e4;t.exports=function(t){var e=new o,n=r.createElement(\"img\");return n.onload=n.onerror=function(){i.setTimeout(e.resolve,50)},n.src=t,i.setTimeout(e.reject,s),e.promise}},function(t,e,n){var r=n(108);t.exports=function(t){t.define(\"createElement\",r),t.define(\"createFragment\",r),t.define(\"htmlToElement\",r),t.define(\"hasSelectedText\",r),t.define(\"addRootClass\",r),t.define(\"removeRootClass\",r),t.define(\"hasRootClass\",r),t.define(\"prependStyleSheet\",r),t.define(\"appendStyleSheet\",r),t.define(\"prependCss\",r),t.define(\"appendCss\",r),t.define(\"makeVisible\",r),t.define(\"injectWidgetEl\",r),t.define(\"matchHeightToContent\",r),t.define(\"matchWidthToContent\",r)}},function(t,e){t.exports=function(t){var e,n=!1;return function(){return n?e😦n=!0,e=t.apply(this,arguments))}}},function(t,e,n){var r=n(15),i=n(117),o=n(57);t.exports=function(t,e,n){return new r(i,o,\"twitter-dm-button\",t,e,n)}},function(t,e,n){var r=n(58),i=n(24);t.exports=r.isSupported()?r:i},function(t,e,n){var r=n(25),i=n(118);t.exports=r.build([i])},function(t,e,n){var r=n(15),i=n(121),o=n(60);t.exports=function(t,e,n){return new r(i,o,\"twitter-follow-button\",t,e,n)}},function(t,e,n){var r=n(25),i=n(122);t.exports=r.build([i])},function(t,e,n){var r=n(15),i=n(129),o=n(24);t.exports=function(t,e,n){return new r(i,o,\"twitter-moment\",t,e,n)}},function(t,e,n){var r=n(15),i=n(131),o=n(24);t.exports=function(t,e,n){return new r(i,o,\"periscope-on-air\",t,e,n)}},function(t,e,n){var r=n(80),i=n(133),o=n(137),s=n(139),a=n(141),u=n(143),c={collection:i,event😮,likes😒,list:a,profile:u,url:l},d😦u,s,i,a,o];function l(t){return r(d,function(e){try{return new e(t)}catch(t){}})}t.exports=function(t){return t?function(t){var e,n;return e😦t.sourceType+\"\").toLowerCase(),(n=c[e])?new n(t):null}(t)||l(t):null}},function(t,e,n){var r=n(15),i=n(145),o=n(24);t.exports=function(t,e,n){return new r(i,o,\"twitter-timeline\",t,e,n)}},function(t,e,n){var r=n(15),i=n(147),o=n(57);t.exports=function(t,e,n){return new r(i,o,\"twitter-tweet\",t,e,n)}},function(t,e,n){var r=n(15),i=n(149),o=n(60);t.exports=function(t,e,n){var s=t&&t.type||\"share\";return new r(i,o,\"hashtag\"==s?\"twitter-hashtag-button\":\"mention\"==s?\"twitter-mention-button\":\"twitter-share-button\",t,e,n)}},function(t,e,n){var r=n(36),i=n(35),o=n(0);t.exports=function(t){var e={widget_origin:i.rootDocumentLocation(),widget_frame:i.isFramed()?i.currentDocumentLocation():null,duration_ms:t.duration,item_ids:t.widgetIds||[]},n😮.aug(t.namespace,{page:\"page\",component:\"performance\"});r.scribe(n,e)}},function(t,e,n){var r=n(0),i=n(134),o😦\"ar\",\"fa\",\"he\",\"ur\"];t.exports={isRtlLang:function(t){return t=String(t).toLowerCase(),r.contains(o,t)},matchLanguage:function(t){return t😦t😦t||\"\").toLowerCase()).replace(\"_\",\"-\"),i(t)?t😦t=t.replace(/-.*/,\"\"),i(t)?t:\"en\")}}},function(t,e,n){var r=n(110),i=n(113);function o(t){return r.settingsLoaded().then(function(e){return e[t]})}function s(){return o(\"experiments\")}t.exports={shouldObtainCookieConsent:function(){return o(\"shouldObtainCookieConsent\")},getExperiments😒,getExperiment:function(t){return s().then(function(e){if(!e[t])throw new Error(\"Experiment not found\");return e[t]})},getActiveExperimentDataString:function(){return s().then(function(t){var e=Object.keys(t).reduce(function(e,n){var r;return t[n].version&&(r=n.split(\"_\").slice(-1)[0],e.push(r+\";\"+t[n].bucket)),e},[]);return i(e.join(\",\"))})},getExperimentKeys:function(){return s().then(function(t){return Object.keys(t)})},load:function(){r.load()}}},function(t){t.exports={tweetButtonHtmlPath:\"/widgets/tweet_button.d753e00c3e838c1b2558149bd3f6ecb8.{{lang}}.html\",followButtonHtmlPath:\"/widgets/follow_button.d753e00c3e838c1b2558149bd3f6ecb8.{{lang}}.html\",hubHtmlPath:\"/widgets/hub.html\",widgetIframeHtmlPath:\"/widgets/widget_iframe.d753e00c3e838c1b2558149bd3f6ecb8.html\",resourceBaseUrl:\"https://platform.twitter.com\"}},function(t,e,n){var r=n(3),i=n(95),o=n(23),s=n(11),a={favorite😦\"favorite\",\"like\"],follow😦\"follow\"],like😦\"favorite\",\"like\"],retweet😦\"retweet\"],tweet😦\"tweet\"]};function u(t){this.srcEl😦],this.element=t}u.open=function(t,e,n){var u😦r.intentType(t)||\"\").toLowerCase();r.isTwitterURL(t)&&(function(t,e){i.open(t,{},e)}(t,n),e&&o.trigger(\"click\",{target:e,region:\"intent\",type:\"click\",data:{}}),e&&a[u]&&a[u].forEach(function(n){o.trigger(n,{target:e,region:\"intent\",type:n,data:function(t,e){var n😒.decodeURL(e);switch(t){case\"favorite\":case\"like\":return{tweet_id:n.tweet_id};case\"follow\":return{screen_name:n.screen_name,user_id:n.user_id};case\"retweet\":return{source_tweet_id:n.tweet_id};default:return{}}}(u,t)})}))},t.exports=u},function(t,e){t.exports={getTimezoneOffset:function(){var t😦new Date).toString().match(/(GMT[+-]?\\d+)/);return t&&t[0]||\"GMT\"}}},function(t,e,n){var r=n(5),i=n(9),o=n(2),s=n(0),a=n(11),u=\"cb\",c😮;t.exports={fetch:function(t,e,n,d){var l,f,h;return d=function(t){if(t)return t.replace(/[^\\w$]/g,\"_\")}(d||u+c++),l=i.fullPath([\"callbacks\",d]),f=r.createElement(\"script\"),h=new o,e😒.aug({},e,{callback:l,suppress_response_codes:!0}),i.set([\"callbacks\",d],function(t){var e;t😦e=n(t||!1)).resp,e.success?h.resolve(t):h.reject(t),f.onload=f.onreadystatechange=null,f.parentNode&&f.parentNode.removeChild(f),i.unset([\"callbacks\",d])}),f.onerror=function(){h.reject(new Error(\"failed to fetch \"+f.src))},f.src=a.url(t,e),f.async=\"async\",r.body.appendChild(f),h.promise}}},function(t,e,n){var r=n(2),i=n(100),o=n(7);function s(t){this._inputsQueue😦],this._task=t,this._hasFlushBeenScheduled=!1}s.prototype.add=function(t){var e=new r;return this._inputsQueue.push({input:t,taskDoneDeferred:e}),this._hasFlushBeenScheduled||(this._hasFlushBeenScheduled=!0,i(o(this._flush,this))),e.promise},s.prototype._flush=function(){try{this._task.call(null,this._inputsQueue)}catch(t){this._inputsQueue.forEach(function(e){e.taskDoneDeferred.reject(t)})}this._inputsQueue😦],this._hasFlushBeenScheduled=!1},t.exports😒},function(t,e){t.exports=function(t,e){return t.reduce(function(t,n){var r=e(n);return t[r]=t[r]||[],t[r].push(n),t},{})}},function(t,e,n){var r=n(5),i=n(😎,o=n(3);function s(t,e){var n,r;return e=e||i,/^https?😕/\\//.test(t)?t😕^\\/\\//.test(t)?e.protocol+t😦n=e.host+(e.port.length?\":\"+e.port:\"\"),0!==t.indexOf(\"/\")&&((r=e.pathname.split(\"/\")).pop(),r.push(t),t=\"/\"+r.join(\"/\")),[e.protocol,\"//\",n,t].join(\"\"))}t.exports={absolutize😒,getCanonicalURL:function(){for(var t,e=r.getElementsByTagName(\"link\"),n😮;e[n];n++)if(\"canonical\"==(t=e[n]).rel)return s(t.href)},getScreenNameFromPage:function(){for(var t,e,n,i😦r.getElementsByTagName(\"a\"),r.getElementsByTagName(\"link\")],s😮,a😮,u😕\\bme\\b/;t=i[s];s++)for(a😮;e=t[a];a++)if(u.test(e.rel)&&(n😮.screenName(e.href)))return n}}},function(t,e,n){var r=n(😎,i😕^[^#?]*\\.(gov|mil)(😕d+)?([#?].*)?$/i,o={};function s(t){return t in o?o[t]😮[t]=i.test(t)}t.exports={isUrlSensitive😒,isHostPageSensitive:function(){return s(r.host)}}},function(t,e,n){var r=n(19),i=n(51),o=n(11),s=n(33),a=n(0),u=n(9).get(\"scribeCallback\"),c=2083,d😦],l😮.url(s.CLIENT_EVENT_ENDPOINT,{dnt😮,l:\"\"}),f=encodeURIComponent(l).length;function h(t,e,n,r){var i=!a.isObject(t),o=!!e&&!a.isObject(e);i||o||(u&&u(arguments),p(s.formatClientEventNamespace(t),s.formatClientEventData(e,n,r),s.CLIENT_EVENT_ENDPOINT))}function p(t,e,n){var r,u;n&&a.isObject(t)&&a.isObject(e)&&(i.log(t,e),r😒.flattenClientEventPayload(t,e),u={l😒.stringify(r)},s.noticeSeen(t)&&(u.notice_seen=!0),r.dnt&&(u.dnt=1),w(o.url(n,u)))}function m(t,e,n,r){var i=!a.isObject(t),o=!!e&&!a.isObject(e);if(!i&&!o)return v(s.flattenClientEventPayload(s.formatClientEventNamespace(t),s.formatClientEventData(e,n,r)))}function v(t){return d.push(t),d}function g(t){return encodeURIComponent(t).length+3}function w(t){return(new Image).src=t}t.exports={canFlushOneItem:function(t){var e=g(s.stringify(t));return f+e<c},_enqueueRawObject:v,scribe😛,clientEvent:h,clientEvent2:function(t,e,n){return h(t,e,n,2)},enqueueClientEvent:m,flushClientEvents:function(){var t;return d.length>1&&m({page:\"widgets_js\",component:\"scribe_pixel\",action:\"batch_log\"},{}),t😛,d😦],t.reduce(function(e,n,r){var i=e.length,o=i&&e[i-1];return r+1==t.length&&n.event_namespace&&\"batch_log\"==n.event_namespace.action&&(n.message😦\"entries:\"+r,\"requests:\"+i].join(\"/\")),function t(e){return Array.isArray(e)||(e😦e]),e.reduce(function(e,n){var r,i😒.stringify(n),o=g(i);return f+o<c?e=e.concat(i)😦r😒.splitLogEntry(n)).length>1&&(e=e.concat(t(r))),e},[])}(n).forEach(function(t){var n=g(t);(!o||o.urlLength+n>c)&&(o={urlLength:f,items😦]},e.push(o)),o.urlLength+=n,o.items.push(t)}),e},[]).map(function(t){var e={l:t.items};return r.enabled()&&(e.dnt=1),w(o.url(s.CLIENT_EVENT_ENDPOINT,e))})},interaction:function(t,e,n,r){var i😒.extractTermsFromDOM(t.target||t.srcElement);i.action=r||\"click\",h(i,e,n)}}},function(t,e,n){var r=n(0),i=n(40);t.exports=function(t,e){return i(t,e)?[t]:r.toRealArray(t.querySelectorAll(e))}},function(t,e){t.exports=function(t,e,n){for(var r,i😮;i<t.length;i++)if(r=e.call(n,t[i],i,t))return r}},function(t,e){t.exports=function(){return Math.floor(+new Date/9e5)}},function(t,e,n){var r=n(12);t.exports=function(t){var e,n;return e=t.headers&&t.headers.status,!(n=t&&!t.error&&200===e)&&t.headers&&t.headers.message&&r.publicError(t.headers.message),{success:n,resp:t}}},function(t,e,n){var r,i=n(28),o😮;function s(){r&&r.length===o&&(i.emitter.trigger(i.ALL_WIDGETS_AND_IMAGES_LOADED,r),r=null)}i.emitter.bind(i.ALL_WIDGETS_RENDER_END,function(t){r=t.widgets,s()}),t.exports={reportImagesLoadForAWidget:function(){o++,s()}}},,,,,,,,function(t,e,n){var r,i=n(2),o=n(5),s=n(93),a=n(46),u=n(9),c=n(94),d=n(23),l=n(97),f=n(150),h=n(158),p=n(159),m=n(28);n(160),m.emitter.trigger(m.START),u.set(\"widgets.init\",!0),a.set(\"init\",!0),p(),r=new i,s.exposeReadyPromise(r.promise,a.base,\"_e\"),a.set(\"widgets\",f),a.set(\"widgets.load\",l.load),a.set(\"events\",d),h(function(){r.resolve(a.base),c.attachTo(o),l.loadPage()})},function(t,e){t.exports=navigator},function(t,e,n){var r=n(7);t.exports={exposeReadyPromise:function(t,e,n){e.ready=r(t.then,t),n&&Array.isArray(e[n])&&(e[n].forEach(r(t.then,t)),delete e[n])}}},function(t,e,n){var r=n(😎,i=n(34),o=n(31),s=n(71),a=n(3);function u(t){var e,n,u;t.altKey||t.metaKey||t.shiftKey||(e😮.closest(function(t){return\"A\"===t.tagName||\"AREA\"===t.tagName},t.target))&&a.isIntentURL(e.href)&&(n😦n😦n😦u=e.href,\"original_referer=\"+r.href].join(-1==u.indexOf(\"?\")?\"?\":\"&\")).replace(/^http[😃/,\"https:\")).replace(/^\\/\\//,\"https://\"),s.open(n,e),i.preventDefault(t))}t.exports={attachTo:function(t){t.addEventListener(\"click\",u,!1)}}},function(t,e,n){var r,i=n(1),o=n(96),s=n(34),a=n(31),u=n(20),c=n(3),d=n(22),l=n(0),f=\"intent_\",h=i.screen.width,p=i.screen.height;function m(t,e){function n(t){return Math.round(t/2)}return t>e?{coordinate😮,size:e}:{coordinate:n(e)-n(t),size:t}}function v(t,e,n){var i,o;e=r.parse(e),n=n||{},i=m(e.width,n.width||h),e.left=i.coordinate,e.width=i.size,o=m(e.height,n.height||p),e.top😮.coordinate,e.height😮.size,this.win=t,this.features=function(t){var e😦];return l.forIn(t,function(t,n){e.push(t+\"=\"+n)}),e.join(\",\")}(e)}r😦new o).defaults({width:550,height:520,personalbar:\"0\",toolbar:\"0\",location:\"1\",scrollbars:\"1\",resizable:\"1\"}),v.prototype.open=function(t,e){var n=e&&\"click\"==e.type&&a.closest(\"a\",e.target),r=e&&(e.altKey||e.metaKey||e.shiftKey),i=n&&(u.ios()||u.android());if(c.isTwitterURL(t))return r||i?this😦this.name=f+d.generate(),this.popup=this.win.open(t,this.name,this.features),e&&s.preventDefault(e),this)},v.open=function(t,e,n){return new v(i,e).open(t,n)},t.exports=v},function(t,e,n){var r=n(4),i=n(0);function o(){this.assertions😦],this._defaults={}}o.prototype.assert=function(t,e){return this.assertions.push({fn:t,msg:e||\"assertion failed\"}),this},o.prototype.defaults=function(t){return this._defaults=t||this._defaults,this},o.prototype.require=function(t){var e=this;return(t=Array.isArray(t)?t:i.toRealArray(arguments)).forEach(function(t){e.assert(function(t){return function(e){return r.hasValue(e[t])}}(t),\"required: \"+t)}),this},o.prototype.parse=function(t){var e,n;if(e=i.aug({},this._defaults,t||{}),(n=this.assertions.reduce(function(t,n){return n.fn(e)||t.push(n.msg),t},[])).length>0)throw new Error(n.join(\"\\n\"));return e},t.exports😮},function(t,e,n){var r=n(5),i=n(6),o=n(21),s=n(49),a=n(32),u=n(9),c=n(36),d=n(23),l=n(4),f=n(0),h=n(69),p=n(114),m=n(28);function v(){var t=a.val(\"widgets:autoload\")||!0;return!l.isFalseValue(t)&&(l.isTruthValue(t)?r.body:r.querySelectorAll(t))}function g(t){var e,n;return t😦t=t||r.body).length?f.toRealArray(t)😦t],c.pause(),n=t.reduce(function(t,e){return t.concat(p.reduce(function(t,n){return t.concat(n(e))},[]))},[]),m.emitter.trigger(m.ALL_WIDGETS_RENDER_START,{widgets:n}),e😮.allResolved(n.map(function(t){return s.addWidget(t)})).then(function(t){d.trigger(\"loaded\",{widgets:t}),t&&t.length&&m.emitter.trigger(m.ALL_WIDGETS_RENDER_END,{widgets:t})}),o.always(e,function(){c.resume()}),e}t.exports={load:g,loadPage:function(){var t=v();return h.load(),!1===t?i.resolve()😦u.set(\"widgets.loaded\",!0),g(t))},_getPageLoadTarget:v}},function(t,e,n){var r=n(10),i=n(17),o=n(23),s=n(50),a=n(6),u=n(21);function c(t,e){this._widget=null,this._sandbox=null,this._hydrated=!1,this._insertedIntoDom=!1,this._Sandbox=t.Sandbox,this._factory=t.factory,this._widgetParams=t.parameters,this._resolve=e,this._className=t.className,this._renderedClassName=t.className+\"-rendered\",this._errorClassName=t.className+\"-error\",this._srcEl=t.srcEl,this._targetGlobal=function(t){return(t.srcEl||t.targetEl).ownerDocument.defaultView}(t),this._insertionStrategy=function(e){var n=t.srcEl,r=t.targetEl;n?r.insertBefore(e,n):r.appendChild(e)}}c.fromRawTask=function(t){return new c(t.input,t.taskDoneDeferred.resolve)},c.prototype.initialize=function(){var t=this,e=new this._Sandbox(this._targetGlobal);return this._factory(this._widgetParams,e).then(function(n){return t._widget=n,t._sandbox=e,n})},c.prototype.insertIntoDom=function(){var t=this;return this._widget?this._sandbox.insert(this._widget.id,{class😦this._className,this._renderedClassName].join(\" \")},null,this._insertionStrategy).then(function(){t._insertedIntoDom=!0}):a.reject(new Error(\"cannot insert widget into DOM before it is initialized\"))},c.prototype.hydrate=function(){var t=this;return this._widget?this._widget.hydrate().then(function(){t._hydrated=!0}):a.reject(new Error(\"cannot hydrate widget before it is initialized\"))},c.prototype.render=function(){var t=this;function e(e){return s(t._sandbox.sandboxEl).then(function(){return a.reject(e)})}return this._hydrated?this._insertedIntoDom?t._widget.render(t._sandbox).then(function(){return t._sandbox.onResize(function(){return t._widget.resize().then(function(){o.trigger(\"resize\",{target:t._sandbox.sandboxEl})})}),t._widget.show()}).then(function(){return s(t._srcEl).then(function(){return t._sandbox.sandboxEl})},e):e(new Error(\"cannot render widget before DOM insertion\")):e(new Error(\"cannot render widget before hydration\"))},c.prototype.fail=function(){var t=this;return this._srcEl?u.always(i.write(function(){r.add(t._srcEl,t._errorClassName)}),function(){o.trigger(\"rendered\",{target:t._srcEl}),t._resolve(t._srcEl)})😦t._resolve(),a.resolve())},c.prototype.success=function(){o.trigger(\"rendered\",{target:this._sandbox.sandboxEl}),this._resolve(this._sandbox.sandboxEl)},t.exports=c},function(t,e,n){var r;!function(){\"use strict\";var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)};function o(){this.frames😦],this.lastId😮,this.raf=i,this.batch={hash:{},read😦],write😦],mode:null}}o.prototype.read=function(t,e){var n=this.add(\"read\",t,e),r=n.id;return this.batch.read.push(n.id),\"reading\"===this.batch.mode||this.batch.scheduled?r😦this.scheduleBatch(),r)},o.prototype.write=function(t,e){var n=this.add(\"write\",t,e),r=this.batch.mode,i=n.id;return this.batch.write.push(n.id),\"writing\"===r||\"reading\"===r||this.batch.scheduled?i😦this.scheduleBatch(),i)},o.prototype.defer=function(t,e,n){\"function\"==typeof t&&(n=e,e=t,t=1);var r=this,i=t-1;return this.schedule(i,function(){r.run({fn:e,ctx:n})})},o.prototype.clear=function(t){if(\"function\"==typeof t)return this.clearFrame(t);t=Number(t);var e=this.batch.hash[t];if(e){var n=this.batch[e.type],r=n.indexOf(t);delete this.batch.hash[t],~r&&n.splice(r,1)}},o.prototype.clearFrame=function(t){var e=this.frames.indexOf(t);~e&&this.frames.splice(e,1)},o.prototype.scheduleBatch=function(){var t=this;this.schedule(0,function(){t.batch.scheduled=!1,t.runBatch()}),this.batch.scheduled=!0},o.prototype.uniqueId=function(){return++this.lastId},o.prototype.flush=function(t){for(var e;e=t.shift()😉this.run(this.batch.hash[e])},o.prototype.runBatch=function(){try{this.batch.mode=\"reading\",this.flush(this.batch.read),this.batch.mode=\"writing\",this.flush(this.batch.write),this.batch.mode=null}catch(t){throw this.runBatch(),t}},o.prototype.add=function(t,e,n){var r=this.uniqueId();return this.batch.hash[r]={id:r,fn:e,ctx:n,type:t}},o.prototype.run=function(t){var e=t.ctx||this,n=t.fn;if(delete this.batch.hash[t.id],!this.onError)return n.call(e);try{n.call(e)}catch(t){this.onError(t)}},o.prototype.loop=function(){var t,e=this,n=this.raf,r=!1;function i(){var t=e.frames.shift();e.frames.length?n(i):e.looping=!1,t&&t()}this.looping||(t=setTimeout(function(){r=!0,i()},500),n(function(){r||(clearTimeout(t),i())}),this.looping=!0)},o.prototype.schedule=function(t,e){return this.frames[t]?this.schedule(t+1,e)😦this.loop(),this.frames[t]=e)};var s=new o;void 0!==t&&t.exports?t.exports😒:void 0===(r=function(){return s}.call(e,n,e,t))||(t.exports=r)}()},function(t,e,n){var r=n(45).Promise;t.exports=r._asap},function(t,e,n){var r,i,o,s=n(5),a=n(1),u=n(29),c=n(19),d=n(2),l=n(6),f=n(51),h=n(33),p=n(0),m=n(24),v=n(9).get(\"scribeCallback\"),g=Math.floor(1e3*Math.random())+\"_\",w=\"rufous-frame-\"+g+\"-\",y=\"rufous-form-\"+g+\"-\",b😮,_=!1,E=new d;function x(){var t😮.createElement(\"form\"),e😮.createElement(\"input\"),n😮.createElement(\"input\");return b++,t.action=h.CLIENT_EVENT_ENDPOINT,t.method=\"POST\",t.target=w+b,t.id=y+b,e.type=\"hidden\",e.name=\"dnt\",e.value=c.enabled(),n.type=\"hidden\",n.name=\"tfw_redirect\",n.value=h.RUFOUS_REDIRECT,t.appendChild(e),t.appendChild(n),t}function A(){var t=w+b;return u({id:t,name:t,width😮,height😮,border😮},{display:\"none\"},o.doc)}t.exports={clientEvent:function(t,e,n,i){(function(t,e){var n=!p.isObject(t),r=!!e&&!p.isObject(e),i=n||r;return i})(t,e)||(v&&v(arguments),E.promise.then(function(){!function(t,e){var n,i,s😜.isObject(t)&&p.isObject(e)&&(f.log(t,e),s=h.flattenClientEventPayload(t,e),(n=r.firstChild).value=+(+n.value||s.dnt||0),(i😮.createElement(\"input\")).type=\"hidden\",i.name=\"l\",i.value=h.stringify(s),r.appendChild(i))}(h.formatClientEventNamespace(t),h.formatClientEventData(e,n,i))}))},flush:function(){return E.promise.then(function(){var t;return r.children.length<=2?l.reject()😦t=l.all([o.doc.body.appendChild(r),o.doc.body.appendChild(i)]).then(function(t){var e=t[0],n=t[1];return n.addEventListener(\"load\",function(){!function(t,e){return function(){var n=t.parentNode;n&&(n.removeChild(t),n.removeChild(e))}}(e,n)()}),e.submit(),t}),r=x(),i=A(),t)})},init:function(){return _?E.promise:((o=new m(a)).insert(\"rufous-sandbox\",null,{display:\"none\"},function(t){s.body.appendChild(t)}).then(function(){o.setTitle(\"Twitter analytics iframe\"),r=x(),i=A(),E.resolve([r,i])}),_=!0,E.promise)}}},function(t,e,n){var r=n(0);t.exports=function t(e){var n😦];return e.forEach(function(e){var i=r.isType(\"array\",e)?t(e)😦e];n=n.concat(i)}),n}},function(t,e){t.exports=function(t){return t.filter(function(e,n){return t.indexOf(e)===n})}},function(t,e,n){var r=n(38),i=n(0),o=n(106);function s(){r.apply(this,arguments)}s.prototype=Object.create(r.prototype),i.aug(s.prototype,{factory😮}),t.exports😒},function(t,e,n){var r=n(21),i=n(0),o=n(7);t.exports={before:function(t,e){return function(){var n,i=this,o=arguments;return n=e.apply(this,arguments),r.isPromise(n)?n.then(function(){return t.apply(i,o)}):t.apply(this,arguments)}},after:function(t,e){return function(){var n,i=this,o=arguments;function s(t,e){return r.isPromise(e)?e.then(function(){return t}):t}return n=t.apply(this,arguments),r.isPromise(n)?n.then(function(t){return s(t,e.apply(i,o))})😒(n,e.apply(this,arguments))}},around:function(t,e){return function(){var n=i.toRealArray(arguments);return n.unshift(o(t,this)),e.apply(this,n)}}}},function(t,e,n){var r=n(10),i=n(17),o=n(39),s=n(6),a=n(0);t.exports=function(){var t😮();function e(e){t.apply(this,arguments),Object.defineProperty(this,\"targetGlobal\",{value:e})}return e.prototype=Object.create(t.prototype),a.aug(e.prototype,{id:null,initialized:!1,width😮,height😮,sandboxEl:null,insert:function(){return s.reject()},onResize:function(){},addClass:function(t){var e=this.sandboxEl;return t=Array.isArray(t)?t😦t],i.write(function(){t.forEach(function(t){r.add(e,t)})})},removeClass:function(t){var e=this.sandboxEl;return t=Array.isArray(t)?t😦t],i.write(function(){t.forEach(function(t){r.remove(e,t)})})},styleSelf:function(t){var e=this;return i.write(function(){a.forIn(t,function(t,n){e.sandboxEl.style[t]=n})})}}),e}},function(t,e,n){var r=n(5),i=n(10),o=n(17),s=n(52),a=n(25),u=n(53),c=n(42),d=n(43),l=n(29),f=n(12),h=n(44),p=n(2),m=n(6),v=n(0),g=n(9),w=n(22),y=n(7),b={allowfullscreen:\"true\"},_={position:\"absolute\",visibility:\"hidden\",display:\"block\",width:\"0px\",height:\"0px\",padding:\"0\",border:\"none\"},E={position:\"static\",visibility:\"visible\"},x=\"SandboxRoot\",A=\".SandboxRoot { display: none; }\",T=50;function S(t,e,n,r){return e=v.aug({id:t},b,e),n=v.aug({},_,n),l(e,n,r)}function R(t,e,n,i,s){var a=new p,u=w.generate(),c😒(t,e,n,s);return g.set([\"sandbox\",u],function(){var t=c.contentWindow.document;o.write(function(){t.write(\"<!DOCTYPE html><html><head></head><body></body></html>\")}).then(function(){t.close(),a.resolve(c)})}),c.src😦\"javascript:\",'document.write(\"\");',\"try { window.parent.document; }\",'catch (e) { document.domain=\"'+r.domain+'\"; }',\"window.parent.\"+g.fullPath([\"sandbox\",u])+\"();\"].join(\"\"),c.addEventListener(\"error\",a.reject,!1),o.write(function(){i.parentNode.replaceChild(c,i)}),a.promise}t.exports=a.couple(n(54),function(t){t.overrideProperty(\"id\",{get:function(){return this.sandboxEl&&this.sandboxEl.id}}),t.overrideProperty(\"initialized\",{get:function(){return!!this.win}}),t.overrideProperty(\"width\",{get:function(){return this._width}}),t.overrideProperty(\"height\",{get:function(){return this._height}}),t.overrideProperty(\"sandboxEl\",{get:function(){return this.iframeEl}}),t.defineProperty(\"iframeEl\",{get:function(){return this._iframe}}),t.defineProperty(\"rootEl\",{get:function(){return this.doc&&this.doc.documentElement}}),t.defineProperty(\"widgetEl\",{get:function(){return this.doc&&this.doc.body.firstElementChild}}),t.defineProperty(\"win\",{get:function(){return this.iframeEl&&this.iframeEl.contentWindow}}),t.defineProperty(\"doc\",{get:function(){return this.win&&this.win.document}}),t.define(\"_updateCachedDimensions\",function(){var t=this;return o.read(function(){var e,n=h(t.sandboxEl);\"visible\"==t.sandboxEl.style.visibility?t._width=n.width😦e=h(t.sandboxEl.parentElement).width,t._width=Math.min(n.width,e)),t._height=n.height})}),t.define(\"_setTargetToBlank\",function(){var t=this.createElement(\"base\");t.target=\"_blank\",this.doc.head.appendChild(t)}),t.define(\"_didResize\",function(){var t=this,e=this._resizeHandlers.slice(0);return this._updateCachedDimensions().then(function(){e.forEach(function(e){e(t)})})}),t.define(\"setTitle\",function(t){this.iframeEl.title=t}),t.override(\"createElement\",function(t){return this.doc.createElement(t)}),t.override(\"createFragment\",function(){return this.doc.createDocumentFragment()}),t.override(\"htmlToElement\",function(t){var e;return(e=this.createElement(\"div\")).innerHTML=t,e.firstElementChild}),t.override(\"hasSelectedText\",function(){return!!s.getSelectedText(this.win)}),t.override(\"addRootClass\",function(t){var e=this.rootEl;return t=Array.isArray(t)?t😦t],this.initialized?o.write(function(){t.forEach(function(t){i.add(e,t)})}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"removeRootClass\",function(t){var e=this.rootEl;return t=Array.isArray(t)?t😦t],this.initialized?o.write(function(){t.forEach(function(t){i.remove(e,t)})}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"hasRootClass\",function(t){return i.present(this.rootEl,t)}),t.define(\"addStyleSheet\",function(t,e){var n,r=new p;return this.initialized?((n=this.createElement(\"link\")).type=\"text/css\",n.rel=\"stylesheet\",n.href=t,n.addEventListener(\"load\",r.resolve,!1),n.addEventListener(\"error\",r.reject,!1),o.write(y(e,null,n)).then(function(){return u(t).then(r.resolve,r.reject),r.promise})):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"prependStyleSheet\",function(t){var e=this.doc;return this.addStyleSheet(t,function(t){var n=e.head.firstElementChild;return n?e.head.insertBefore(t,n):e.head.appendChild(t)})}),t.override(\"appendStyleSheet\",function(t){var e=this.doc;return this.addStyleSheet(t,function(t){return e.head.appendChild(t)})}),t.define(\"addCss\",function(t,e){var n;return c.inlineStyle()?((n=this.createElement(\"style\")).type=\"text/css\",n.appendChild(this.doc.createTextNode(t)),o.write(y(e,null,n)))😦f.devError(\"CSP enabled; cannot embed inline styles\"),m.resolve())}),t.override(\"prependCss\",function(t){var e=this.doc;return this.addCss(t,function(t){var n=e.head.firstElementChild;return n?e.head.insertBefore(t,n):e.head.appendChild(t)})}),t.override(\"appendCss\",function(t){var e=this.doc;return this.addCss(t,function(t){return e.head.appendChild(t)})}),t.override(\"makeVisible\",function(){var t=this;return this.styleSelf(E).then(function(){t._updateCachedDimensions()})}),t.override(\"injectWidgetEl\",function(t){var e=this;return this.initialized?this.widgetEl?m.reject(new Error(\"widget already injected\"))😮.write(function(){e.doc.body.appendChild(t)}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"matchHeightToContent\",function(){var t,e=this;return o.read(function(){t=e.widgetEl?h(e.widgetEl).height😮}),o.write(function(){e.sandboxEl.style.height=t+\"px\"}).then(function(){return e._updateCachedDimensions()})}),t.override(\"matchWidthToContent\",function(){var t,e=this;return o.read(function(){t=e.widgetEl?h(e.widgetEl).width😮}),o.write(function(){e.sandboxEl.style.width=t+\"px\"}).then(function(){return e._updateCachedDimensions()})}),t.after(\"initialize\",function(){this._iframe=null,this._width=this._height😮,this._resizeHandlers😦]}),t.override(\"insert\",function(t,e,n,r){var i=this,s=new p,a=this.targetGlobal.document,u😒(t,e,n,a);return o.write(y(r,null,u)),u.addEventListener(\"load\",function(){(function(t){try{t.contentWindow.document}catch(t){return m.reject(t)}return m.resolve(t)})(u).then(null,y(R,null,t,e,n,u,a)).then(s.resolve,s.reject)},!1),u.addEventListener(\"error\",s.reject,!1),s.promise.then(function(t){var e😛(i._didResize,T,i);return i._iframe=t,i.win.addEventListener(\"resize\",e,!1),m.all([i._setTargetToBlank(),i.addRootClass(😆,i.prependCss(A)])})}),t.override(\"onResize\",function(t){this._resizeHandlers.push(t)}),t.after(\"styleSelf\",function(){return this._updateCachedDimensions()})})},function(t,e){t.exports=function(){throw new Error(\"unimplemented method\")}},function(t,e,n){var r=n(2),i=n(7),o=100,s=3e3;function a(t,e){this._inputsQueue😦],this._task=t,this._isPaused=!1,this._flushDelay=e&&e.flushDelay||o,this._pauseLength=e&&e.pauseLength||s,this._flushTimeout=void 0}a.prototype.add=function(t){var e=new r;return this._inputsQueue.push({input:t,taskDoneDeferred:e}),this._scheduleFlush(),e.promise},a.prototype._scheduleFlush=function(){this._isPaused||(clearTimeout(this._flushTimeout),this._flushTimeout=setTimeout(i(this._flush,this),this._flushDelay))},a.prototype._flush=function(){try{this._task.call(null,this._inputsQueue)}catch(t){this._inputsQueue.forEach(function(e){e.taskDoneDeferred.reject(t)})}this._inputsQueue😦],this._flushTimeout=void 0},a.prototype.pause=function(t){clearTimeout(this._flushTimeout),this._isPaused=!0,!t&&this._pauseLength&&setTimeout(i(this.resume,this),this._pauseLength)},a.prototype.resume=function(){this._isPaused=!1,this._scheduleFlush()},t.exports=a},function(t,e,n){var r,i=n(70),o=n(29),s=n(2),a=n(5),u=n(18),c=n(20),d=n(30),l=n(😎,f=n(12),h=n(111),p=n(55),m=n(9),v=n(11),g=n(112),w=n(0),y=n(1),b😛(function(){return new s});function _(t){var e=t||{should_obtain_cookie_consent:!0,experiments:{}};return new g(e.should_obtain_cookie_consent,e.experiments)}t.exports={load:function(){var t,e,n,s;if(c.ie9()||c.ie10()||\"http:\"!==l.protocol&&\"https:\"!==l.protocol)return f.devError(\"Using default settings due to unsupported browser or protocol.\"),r=_(),void b().resolve();t={origin:l.origin},u.settings().indexOf(\"localhost\")>-1&&(t.localSettings=!0),e=v.url(i.resourceBaseUrl+i.widgetIframeHtmlPath,t),n=function(t){var n;if(e.substr(0,t.origin.length)===t.origin)try{(n=\"string\"==typeof t.data?d.parse(t.data):t.data).namespace===h.settings&&(r=_(n.settings),b().resolve())}catch(t){f.devError(t)}},y.addEventListener(\"message\",n),s😮({src:e,title:\"Twitter settings iframe\"},{display:\"none\"}),a.body.appendChild(s)},settingsLoaded:function(){var t,e,n;return t=new s,e=m.get(\"experimentOverride\"),b().promise.then(function(){e&&e.name&&e.assignment&&((n={})[e.name]={bucket:e.assignment},r.experiments=w.aug(r.experiments,n)),t.resolve(r)}).catch(function(e){t.reject(e)}),t.promise}}},function(t,e){t.exports={settings:\"twttr.settings\"}},function(t,e){t.exports=function(t,e){this.shouldObtainCookieConsent=t,this.experiments=e||{}}},function(t,e){t.exports=function(t){return t.split(\"\").map(function(t){return t.charCodeAt(0).toString(16)}).join(\"\")}},function(t,e,n){t.exports😦n(115),n(120),n(128),n(130),n(132),n(146),n(148)]},function(t,e,n){var r=n(11),i=n(4),o=n(0),s=n(13),a=n(14)(),u=n(56),c=\"a.twitter-dm-button\";t.exports=function(t){return a(t,c).map(function(t){return u(function(t){var e=t.getAttribute(\"data-show-screen-name\"),n😒(t),a=t.getAttribute(\"href\"),u=t.getAttribute(\"data-screen-name\"),c=e?i.asBoolean(e):null,d=t.getAttribute(\"data-size\"),l=r.decodeURL(a),f=l.recipient_id,h=t.getAttribute(\"data-text\")||l.text,p=t.getAttribute(\"data-welcome-message-id\")||l.welcomeMessageId;return o.aug(n,{screenName:u,showScreenName:c,size😛,text:h,userId:f,welcomeMessageId😛})}(t),t.parentNode,t)})}},function(t,e,n){var r=n(0);t.exports=function t(e){var n;if(e)return n=e.lang||e.getAttribute(\"data-lang\"),r.isType(\"string\",n)?n:t(e.parentElement)}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return n.e(2).then(function(r){var o;try{o=n(84),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(119),i=n(1),o=n(10),s=n(34),a=n(17),u=n(52),c=n(25),d=n(53),l=n(42),f=n(44),h=n(7),p=n(43),m=n(6),v=n(0),g=50,w={position:\"absolute\",visibility:\"hidden\",display:\"block\",transform:\"rotate(0deg)\"},y={position:\"static\",visibility:\"visible\"},b=\"twitter-widget\",_=\"open\",E=\"SandboxRoot\",x=\".SandboxRoot { display: none; max-height: 10000px; }\";t.exports=c.couple(n(54),function(t){t.defineStatic(\"isSupported\",function(){return!!i.HTMLElement.prototype.attachShadow&&l.inlineStyle()}),t.overrideProperty(\"id\",{get:function(){return this.sandboxEl&&this.sandboxEl.id}}),t.overrideProperty(\"initialized\",{get:function(){return!!this._shadowHost}}),t.overrideProperty(\"width\",{get:function(){return this._width}}),t.overrideProperty(\"height\",{get:function(){return this._height}}),t.overrideProperty(\"sandboxEl\",{get:function(){return this._shadowHost}}),t.define(\"_updateCachedDimensions\",function(){var t=this;return a.read(function(){var e,n=f(t.sandboxEl);\"visible\"==t.sandboxEl.style.visibility?t._width=n.width😦e=f(t.sandboxEl.parentElement).width,t._width=Math.min(n.width,e)),t._height=n.height})}),t.define(\"_didResize\",function(){var t=this,e=this._resizeHandlers.slice(0);return this._updateCachedDimensions().then(function(){e.forEach(function(e){e(t)})})}),t.override(\"createElement\",function(t){return this.targetGlobal.document.createElement(t)}),t.override(\"createFragment\",function(){return this.targetGlobal.document.createDocumentFragment()}),t.override(\"htmlToElement\",function(t){var e;return(e=this.createElement(\"div\")).innerHTML=t,e.firstElementChild}),t.override(\"hasSelectedText\",function(){return!!u.getSelectedText(this.targetGlobal)}),t.override(\"addRootClass\",function(t){var e=this._shadowRootBody;return t=Array.isArray(t)?t😦t],this.initialized?a.write(function(){t.forEach(function(t){o.add(e,t)})}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"removeRootClass\",function(t){var e=this._shadowRootBody;return t=Array.isArray(t)?t😦t],this.initialized?a.write(function(){t.forEach(function(t){o.remove(e,t)})}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"hasRootClass\",function(t){return o.present(this._shadowRootBody,t)}),t.override(\"addStyleSheet\",function(t,e){return this.addCss('@import url(\"'+t+'\");',e).then(function(){return d(t)})}),t.override(\"prependStyleSheet\",function(t){var e=this._shadowRoot;return this.addStyleSheet(t,function(t){var n=e.firstElementChild;return n?e.insertBefore(t,n):e.appendChild(t)})}),t.override(\"appendStyleSheet\",function(t){var e=this._shadowRoot;return this.addStyleSheet(t,function(t){return e.appendChild(t)})}),t.override(\"addCss\",function(t,e){var n;return this.initialized?l.inlineStyle()?((n=this.createElement(\"style\")).type=\"text/css\",n.appendChild(this.targetGlobal.document.createTextNode(t)),a.write(h(e,null,n))):m.resolve():m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"prependCss\",function(t){var e=this._shadowRoot;return this.addCss(t,function(t){var n=e.firstElementChild;return n?e.insertBefore(t,n):e.appendChild(t)})}),t.override(\"appendCss\",function(t){var e=this._shadowRoot;return this.addCss(t,function(t){return e.appendChild(t)})}),t.override(\"makeVisible\",function(){return this.styleSelf(y)}),t.override(\"injectWidgetEl\",function(t){var e=this;return this.initialized?this._shadowRootBody.firstElementChild?m.reject(new Error(\"widget already injected\")):a.write(function(){e._shadowRootBody.appendChild(t)}).then(function(){return e._updateCachedDimensions()}).then(function(){var t😛(e._didResize,g,e);new r(e._shadowRootBody,t)}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"matchHeightToContent\",function(){return m.resolve()}),t.override(\"matchWidthToContent\",function(){return m.resolve()}),t.override(\"insert\",function(t,e,n,r){var i=this.targetGlobal.document,o=this._shadowHost=i.createElement(b),u=this._shadowRoot😮.attachShadow({mode:_}),c=this._shadowRootBody=i.createElement(\"div\");return v.forIn(e||{},function(t,e){o.setAttribute(t,e)}),o.id=t,u.appendChild(c),s.delegate(c,\"click\",\"A\",function(t,e){e.hasAttribute(\"target\")||e.setAttribute(\"target\",\"_blank\")}),m.all([this.styleSelf(w),this.addRootClass(E),this.prependCss(😆,a.write(r.bind(null,o))])}),t.override(\"onResize\",function(t){this._resizeHandlers.push(t)}),t.after(\"initialize\",function(){this._shadowHost=this._shadowRoot=this._shadowRootBody=null,this._width=this._height😮,this._resizeHandlers😦]}),t.after(\"styleSelf\",function(){return this._updateCachedDimensions()})})},function(t,e){var n;(n=function(t,e){function r(t,e){if(t.resizedAttached){if(t.resizedAttached)return void t.resizedAttached.add(e)}else t.resizedAttached=new function(){var t,e;this.q😦],this.add=function(t){this.q.push(t)},this.call=function(){for(t😮,e=this.q.length;t<e;t++)this.q[t].call()}},t.resizedAttached.add(e);t.resizeSensor=document.createElement(\"div\"),t.resizeSensor.className=\"resize-sensor\";var n=\"position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;\",r=\"position: absolute; left: 0; top: 0; transition: 0s;\";t.resizeSensor.style.cssText=n,t.resizeSensor.innerHTML='<div class=\"resize-sensor-expand\" style=\"'+n+'\"><div style=\"'+r+'\"></div></div><div class=\"resize-sensor-shrink\" style=\"'+n+'\"><div style=\"'+r+' width: 200%; height: 200%\"></div></div>',t.appendChild(t.resizeSensor),{fixed:1,absolute:1}[function(t,e){return t.currentStyle?t.currentStyle[e]:window.getComputedStyle?window.getComputedStyle(t,null).getPropertyValue(e):t.style[e]}(t,\"position\")]||(t.style.position=\"relative\");var i,o,s=t.resizeSensor.childNodes[0],a😒.childNodes[0],u=t.resizeSensor.childNodes[1],c😦u.childNodes[0],function(){a.style.width😒.offsetWidth+10+\"px\",a.style.height😒.offsetHeight+10+\"px\",s.scrollLeft😒.scrollWidth,s.scrollTop😒.scrollHeight,u.scrollLeft=u.scrollWidth,u.scrollTop=u.scrollHeight,i=t.offsetWidth,o=t.offsetHeight});c();var d=function(t,e,n){t.attachEvent?t.attachEvent(\"on\"+e,n):t.addEventListener(e,n)},l=function(){t.offsetWidth==i&&t.offsetHeight==o||t.resizedAttached&&t.resizedAttached.call(),c()}😜(s,\"scroll\",l),d(u,\"scroll\",l)}var i=Object.prototype.toString.call(t),o=\"[object Array]\"===i||\"[object NodeList]\"===i||\"[object HTMLCollection]\"===i||\"undefined\"!=typeof jQuery&&t instanceof jQuery||\"undefined\"!=typeof Elements&&t instanceof Elements;if(o)for(var s😮,a=t.length;s<a;s++)r(t[s],e);else r(t,e);this.detach=function(){if(o)for(var e😮,r=t.length;e<r;e++)n.detach(t[e]);else n.detach(t)}}).detach=function(t){t.resizeSensor&&(t.removeChild(t.resizeSensor),delete t.resizeSensor,delete t.resizedAttached)},void 0!==t&&void 0!==t.exports?t.exports=n:window.ResizeSensor=n},function(t,e,n){var r=n(3),i=n(0),o=n(13),s=n(14)(),a=n(59),u=n(4),c=\"a.twitter-follow-button\";t.exports=function(t){return s(t,c).map(function(t){return a(function(t){var e😮(t),n={screenName:r.screenName(t.href),showScreenName:\"false\"!==t.getAttribute(\"data-show-screen-name\"),showCount:\"false\"!==t.getAttribute(\"data-show-count\"),size:t.getAttribute(\"data-size\"),count:t.getAttribute(\"data-count\"),preview:t.getAttribute(\"data-preview\")};return i.forIn(n,function(t,n){var r=e[t];e[t]=u.hasValue(r)?r:n}),e.screenName=e.screenName||e.screen_name,e}(t),t.parentNode,t)})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return n.e(3).then(function(r){var o;try{o=n(85),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(17),i=n(123),o=n(55),s=n(29),a=n(2),u=n(6),c=n(7),d=n(0),l={position:\"absolute\",visibility:\"hidden\",width:\"0px\",height:\"0px\"},f={position:\"static\",visibility:\"visible\"},h={};i(function(t,e,n){var r=h[t];if(r)return e=e||1,n=n||1,r.styleSelf({width:e+\"px\",height:n+\"px\"}).then(function(){r.didResize()})}),t.exports=function(t){t.overrideProperty(\"id\",{get:function(){return this.sandboxEl&&this.sandboxEl.id}}),t.overrideProperty(\"initialized\",{get:function(){return!!this.iframeEl}}),t.overrideProperty(\"width\",{get:function(){return this._width}}),t.overrideProperty(\"height\",{get:function(){return this._height}}),t.overrideProperty(\"sandboxEl\",{get:function(){return this.iframeEl}}),t.defineProperty(\"iframeEl\",{get:function(){return this._iframe}}),t.define(\"updateCachedDimensions\",function(){var t=this;return this.initialized?r.read(function(){t._width=t.sandboxEl.offsetWidth,t._height=t.sandboxEl.offsetHeight}):u.resolve()}),t.define(\"setTitle\",function(t){this.iframeEl.title=t}),t.define(\"makeVisible\",function(){return this.styleSelf(f)}),t.define(\"didResize\",function(){var t=this,e=t._resizeHandlers.length>0;return this.updateCachedDimensions().then(function(){e&&t._resizeHandlers.forEach(function(e){e(t)})})}),t.define(\"loadDocument\",function(t){var e=new a;return this.initialized?this.iframeEl.src?u.reject(new Error(\"widget already loaded\"))😦this.iframeEl.addEventListener(\"load\",e.resolve,!1),this.iframeEl.addEventListener(\"error\",e.reject,!1),this.iframeEl.src=t,e.promise):u.reject(new Error(\"sandbox not initialized\"))}),t.after(\"initialize\",function(){this._iframe=null,this._width=this._height😮,this._resizeHandlers😦]}),t.override(\"insert\",function(t,e,n,i){var a=this;return e😛.aug({id:t},e),n😛.aug({},l,n),this._iframe😒(e,n),h[t]=this,this.onResize(o(function(){a.makeVisible()})),r.write(c(i,null,this._iframe))}),t.override(\"onResize\",function(t){this._resizeHandlers.push(t)}),t.after(\"styleSelf\",function(){return this.updateCachedDimensions()})}},function(t,e,n){var r=n(1),i=n(124),o=n(126),s=n(23),a=n(4),u=n(127);t.exports=function(t){(new i).attachReceiver(new o.Receiver(r,\"twttr.button\")).bind(\"twttr.private.trigger\",function(t,e){var n=u(this);s.trigger(t,{target:n,region:e,type:t,data:{}})}).bind(\"twttr.private.resizeButton\",function(e){var n=u(this),r=n&&n.id,i=a.asInt(e.width),o=a.asInt(e.height);r&&void 0!==i&&void 0!==o&&t(r,i,o)})}},function(t,e,n){var r=n(30),i=n(125),o=n(0),s=n(6),a=n(21),u=\"2.0\";function c(t){this.registry=t||{}}function d(t){var e,n;return e😮.isType(\"string\",t),n😮.isType(\"number\",t),e||n||null===t}function l(t,e){return{jsonrpc:u,id😛(t)?t:null,error:e}}c.prototype._invoke=function(t,e){var n,r,i;n=this.registry[t.method],r=t.params||[],r😮.isType(\"array\",r)?r😦r];try{i=n.apply(e.source||null,r)}catch(t){i😒.reject(t.message)}return a.isPromise(i)?i😒.resolve(i)},c.prototype._processRequest=function(t,e){var n,r;return function(t){var e,n,r;return!!o.isObject(t)&&(e=t.jsonrpc===u,n😮.isType(\"string\",t.method),r=!(\"id\"in t)||d(t.id),e&&n&&r)}(t)?(n=\"params\"in t&&(r=t.params,!o.isObject(r)||o.isType(\"function\",r))?s.resolve(l(t.id,i.INVALID_PARAMS)):this.registry[t.method]?this._invoke(t,{source:e}).then(function(e){return n=t.id,{jsonrpc:u,id:n,result:e};var n},function(){return l(t.id,i.INTERNAL_ERROR)})😒.resolve(l(t.id,i.METHOD_NOT_FOUND)),null!=t.id?n😒.resolve())😒.resolve(l(t.id,i.INVALID_REQUEST))},c.prototype.attachReceiver=function(t){return t.attachTo(this),this},c.prototype.bind=function(t,e){return this.registry[t]=e,this},c.prototype.receive=function(t,e){var n,a,u,c=this;try{u=t,t😮.isType(\"string\",u)?r.parse(u):u}catch(t){return s.resolve(l(null,i.PARSE_ERROR))}return e=e||null,a=((n😮.isType(\"array\",t))?t😦t]).map(function(t){return c._processRequest(t,e)}),n?function(t){return s.all(t).then(function(t){return(t=t.filter(function(t){return void 0!==t})).length?t:void 0})}(a):a[0]},t.exports=c},function(t){t.exports={PARSE_ERROR:{code😶32700,message:\"Parse error\"},INVALID_REQUEST:{code😶32600,message:\"Invalid Request\"},INVALID_PARAMS:{code😶32602,message:\"Invalid params\"},METHOD_NOT_FOUND:{code😶32601,message:\"Method not found\"},INTERNAL_ERROR:{code😶32603,message:\"Internal error\"}}},function(t,e,n){var r=n(😎,i=n(1),o=n(30),s=n(2),a=n(20),u=n(0),c=n(3),d=n(7),l=a.ie9();function f(t,e,n){var r;t&&t.postMessage&&(l?r😦n||\"\")+o.stringify(e):n?(r={})[n]=e:r=e,t.postMessage(r,\"*\"))}function h(t){return u.isType(\"string\",t)?t:\"JSONRPC\"}function p(t,e){return e?u.isType(\"string\",t)&&0===t.indexOf(e)?t.substring(e.length):t&&t[e]?t[e]:void 0:t}function m(t,e){var n=t.document;this.filter=h(e),this.server=null,this.isTwitterFrame=c.isTwitterURL(n.location.href),t.addEventListener(\"message\",d(this._onMessage,this),!1)}function v(t,e){this.pending={},this.target=t,this.isTwitterHost=c.isTwitterURL(r.href),this.filter=h(e),i.addEventListener(\"message\",d(this._onMessage,this),!1)}u.aug(m.prototype,{_onMessage:function(t){var e,n=this;this.server&&(this.isTwitterFrame&&!c.isTwitterURL(t.origin)||(e😛(t.data,this.filter))&&this.server.receive(e,t.source).then(function(e){e&&f(t.source,e,n.filter)}))},attachTo:function(t){this.server=t},detach:function(){this.server=null}}),u.aug(v.prototype,{_processResponse:function(t){var e=this.pending[t.id];e&&(e.resolve(t),delete this.pending[t.id])},_onMessage:function(t){var e;if((!this.isTwitterHost||c.isTwitterURL(t.origin))&&(e😛(t.data,this.filter))){if(u.isType(\"string\",e))try{e😮.parse(e)}catch(t){return}(e=u.isType(\"array\",e)?e😦e]).forEach(d(this._processResponse,this))}},send:function(t){var e=new s;return t.id?this.pending[t.id]=e:e.resolve(),f(this.target,t,this.filter),e.promise}}),t.exports={Receiver:m,Dispatcher:v,_stringifyPayload:function(t){return arguments.length>0&&(l=!!t),l}}},function(t,e,n){var r=n(5);t.exports=function(t){for(var e,n=r.getElementsByTagName(\"iframe\"),i😮;n[i];i++)if((e=n[i]).contentWindow===t)return e}},function(t,e,n){var r=n(4),i=n(0),o=n(3),s=n(13),a=n(14)(),u=n(61),c=\"a.twitter-moment\";t.exports=function(t){return a(t,c).map(function(t){return u(function(t){var e😒(t),n={momentId😮.momentId(t.href),chrome:t.getAttribute(\"data-chrome\"),limit:t.getAttribute(\"data-limit\")};return i.forIn(n,function(t,n){var i=e[t];e[t]=r.hasValue(i)?i:n}),e}(t),t.parentNode,t)})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return Promise.all([n.e(0),n.e(4)]).then(function(r){var o;try{o=n(86),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(0),i=n(13),o=n(14)(),s=n(62),a=\"a.periscope-on-air\",u😕^https?😕/\\/(?:www\\.)?(?:periscope|pscp)\\.tv\\/@?([a-zA-Z0-9_]+)\\/?$/i;t.exports=function(t){return o(t,a).map(function(t){return s(function(t){var e=i(t),n=t.getAttribute(\"href\"),o=t.getAttribute(\"data-size\"),s=u.exec(n)[1];return r.aug(e,{username😒,size😮})}(t),t.parentNode,t)})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return n.e(5).then(function(r){var o;try{o=n(87),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(4),i=n(0),o=n(63),s=n(13),a=n(14)(),u=n(64),c=n(3),d=n(12),l=\"a.twitter-timeline,div.twitter-timeline,a.twitter-grid\",f=\"Embedded Search timelines have been deprecated. See https://twittercommunity.com/t/deprecating-widget-settings/102295.\",h=\"You may have been affected by an update to settings in embedded timelines. See https://twittercommunity.com/t/deprecating-widget-settings/102295.\",p=\"Embedded grids have been deprecated and will now render as timelines. Please update your embed code to use the twitter-timeline class. More info: https://twittercommunity.com/t/update-on-the-embedded-grid-display-type/119564.\";t.exports=function(t){return a(t,l).map(function(t){return u(function(t){var e😒(t),n=t.getAttribute(\"data-show-replies\"),a={isPreconfigured:!!t.getAttribute(\"data-widget-id\"),chrome:t.getAttribute(\"data-chrome\"),tweetLimit:t.getAttribute(\"data-tweet-limit\")||t.getAttribute(\"data-limit\"),ariaLive:t.getAttribute(\"data-aria-polite\"),theme:t.getAttribute(\"data-theme\"),linkColor:t.getAttribute(\"data-link-color\"),borderColor:t.getAttribute(\"data-border-color\"),showReplies:n?r.asBoolean(n):null,profileScreenName:t.getAttribute(\"data-screen-name\"),profileUserId:t.getAttribute(\"data-user-id\"),favoritesScreenName:t.getAttribute(\"data-favorites-screen-name\"),favoritesUserId:t.getAttribute(\"data-favorites-user-id\"),likesScreenName:t.getAttribute(\"data-likes-screen-name\"),likesUserId:t.getAttribute(\"data-likes-user-id\"),listOwnerScreenName:t.getAttribute(\"data-list-owner-screen-name\"),listOwnerUserId:t.getAttribute(\"data-list-owner-id\"),listId:t.getAttribute(\"data-list-id\"),listSlug:t.getAttribute(\"data-list-slug\"),customTimelineId:t.getAttribute(\"data-custom-timeline-id\"),staticContent:t.getAttribute(\"data-static-content\"),url:t.href};return a.isPreconfigured&&(c.isSearchUrl(a.url)?d.publicError(f,t)😛.publicLog(h,t)),\"twitter-grid\"===t.className&&d.publicLog(p,t),(a=i.aug(a,e)).dataSource😮(a),a.id=a.dataSource&&a.dataSource.id,a}(t),t.parentNode,t)})}},function(t,e,n){var r=n(26);t.exports=r.build([n(27),n(136)])},function(t,e,n){var r=n(0),i=n(135);t.exports=function(t){return\"en\"===t||r.contains(i,t)}},function(t,e){t.exports😦\"hi\",\"zh-cn\",\"fr\",\"zh-tw\",\"msa\",\"fil\",\"fi\",\"sv\",\"pl\",\"ja\",\"ko\",\"de\",\"it\",\"pt\",\"es\",\"ru\",\"id\",\"tr\",\"da\",\"no\",\"nl\",\"hu\",\"fa\",\"ar\",\"ur\",\"he\",\"th\",\"cs\",\"uk\",\"vi\",\"ro\",\"bn\",\"el\",\"en-gb\",\"gu\",\"kn\",\"mr\",\"ta\",\"bg\",\"ca\",\"hr\",\"sr\",\"sk\"]},function(t,e,n){var r=n(3),i=n(0),o=n(18),s=\"collection:\";function a(t,e){return r.collectionId(t)||e}t.exports=function(t){t.params({id:{},url:{}}),t.overrideProperty(\"id\",{get:function(){var t=a(this.params.url,this.params.id);return s+t}}),t.overrideProperty(\"endpoint\",{get:function(){return o.timeline([\"collection\"])}}),t.around(\"queryParams\",function(t){return i.aug(t(),{collection_id:a(this.params.url,this.params.id)})}),t.before(\"initialize\",function(){if(!a(this.params.url,this.params.id))throw new Error(\"one of url or id is required\")})}},function(t,e,n){var r=n(26);t.exports=r.build([n(27),n(138)])},function(t,e,n){var r=n(3),i=n(0),o=n(18),s=\"event:\";function a(t,e){return r.eventId(t)||e}t.exports=function(t){t.params({id:{},url:{}}),t.overrideProperty(\"id\",{get:function(){var t=a(this.params.url,this.params.id);return s+t}}),t.overrideProperty(\"endpoint\",{get:function(){return o.timeline([\"event\"])}}),t.around(\"queryParams\",function(t){return i.aug(t(),{event_id:a(this.params.url,this.params.id)})}),t.before(\"initialize\",function(){if(!a(this.params.url,this.params.id))throw new Error(\"one of url or id is required\")})}},function(t,e,n){var r=n(26);t.exports=r.build([n(27),n(140)])},function(t,e,n){var r=n(3),i=n(0),o=n(18),s=\"likes:\";function a(t){return r.likesScreenName(t.url)||t.screenName}t.exports=function(t){t.params({screenName:{},userId:{},url:{}}),t.overrideProperty(\"id\",{get:function(){var t=a(this.params)||this.params.userId;return s+t}}),t.overrideProperty(\"endpoint\",{get:function(){return o.timeline([\"likes\"])}}),t.define(\"_getLikesQueryParam\",function(){var t=a(this.params);return t?{screen_name:t}:{user_id:this.params.userId}}),t.around(\"queryParams\",function(t){return i.aug(t(),this._getLikesQueryParam())}),t.before(\"initialize\",function(){if(!a(this.params)&&!this.params.userId)throw new Error(\"screen name or user id is required\")})}},function(t,e,n){var r=n(26);t.exports=r.build([n(27),n(142)])},function(t,e,n){var r=n(3),i=n(0),o=n(18),s=\"list:\";function a(t){var e=r.listScreenNameAndSlug(t.url)||t;return i.compact({screen_name:e.ownerScreenName,user_id:e.ownerUserId,list_slug:e.slug})}t.exports=function(t){t.params({id:{},ownerScreenName:{},ownerUserId:{},slug:{},url:{}}),t.overrideProperty(\"id\",{get:function(){var t,e,n;return this.params.id?s+this.params.id😦e😦t=a(this.params))&&t.list_slug.replace(/-/g,\"_\"),n=t&&(t.screen_name||t.user_id),s+(n+\"😊+e)}}),t.overrideProperty(\"endpoint\",{get:function(){return o.timeline([\"list\"])}}),t.define(\"_getListQueryParam\",function(){return this.params.id?{list_id:this.params.id}:a(this.params)}),t.around(\"queryParams\",function(t){return i.aug(t(),this._getListQueryParam())}),t.before(\"initialize\",function(){var t=a(this.params);if(i.isEmptyObject(t)&&!this.params.id)throw new Error(\"qualified slug or list id required\")})}},function(t,e,n){var r=n(26);t.exports=r.build([n(27),n(144)])},function(t,e,n){var r=n(3),i=n(4),o=n(0),s=n(18),a=\"profile:\";function u(t,e){return r.screenName(t)||e}t.exports=function(t){t.params({showReplies:{fallback:!1,transform:i.asBoolean},screenName:{},userId:{},url:{}}),t.overrideProperty(\"id\",{get:function(){var t=u(this.params.url,this.params.screenName);return a+(t||this.params.userId)}}),t.overrideProperty(\"endpoint\",{get:function(){return s.timeline([\"profile\"])}}),t.define(\"_getProfileQueryParam\",function(){var t=u(this.params.url,this.params.screenName),e=t?{screen_name:t}:{user_id:this.params.userId};return o.aug(e,{with_replies:this.params.showReplies?\"true\":\"false\"})}),t.around(\"queryParams\",function(t){return o.aug(t(),this._getProfileQueryParam())}),t.before(\"initialize\",function(){if(!u(this.params.url,this.params.screenName)&&!this.params.userId)throw new Error(\"screen name or user id is required\")})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return Promise.all([n.e(0),n.e(6)]).then(function(r){var o;try{o=n(88),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(10),i=n(3),o=n(0),s=n(13),a=n(14)(),u=n(65),c=\"blockquote.twitter-tweet, blockquote.twitter-video\",d😕\\btw-align-(left|right|center)\\b/;t.exports=function(t){return a(t,c).map(function(t){return u(function(t){var e😒(t),n=t.getElementsByTagName(\"A\"),a=n&&n[n.length-1],u=a&&i.status(a.href),c=t.getAttribute(\"data-conversation\"),l=\"none\"==c||\"hidden\"==c||r.present(t,\"tw-hide-thread\"),f=t.getAttribute(\"data-cards\"),h=\"none\"==f||\"hidden\"==f||r.present(t,\"tw-hide-media\"),p=t.getAttribute(\"data-align\")||t.getAttribute(\"align\"),m=t.getAttribute(\"data-link-color\"),v=t.getAttribute(\"data-theme\");return!p&&d.test(t.className)&&(p=RegExp.$1),o.aug(e,{tweetId:u,hideThread:l,hideCard:h,align😛,linkColor:m,theme:v,id:u})}(t),t.parentNode,t)})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return Promise.all([n.e(0),n.e(7)]).then(function(r){var o;try{o=n(89),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(10),i=n(0),o=n(13),s=n(14)(),a=n(66),u=n(4),c=\"a.twitter-share-button, a.twitter-mention-button, a.twitter-hashtag-button\",d=\"twitter-hashtag-button\",l=\"twitter-mention-button\";t.exports=function(t){return s(t,c).map(function(t){return a(function(t){var e😮(t),n={screenName:t.getAttribute(\"data-button-screen-name\"),text:t.getAttribute(\"data-text\"),type:t.getAttribute(\"data-type\"),size:t.getAttribute(\"data-size\"),url:t.getAttribute(\"data-url\"),hashtags:t.getAttribute(\"data-hashtags\"),via:t.getAttribute(\"data-via\"),buttonHashtag:t.getAttribute(\"data-button-hashtag\")};return i.forIn(n,function(t,n){var r=e[t];e[t]=u.hasValue(r)?r:n}),e.screenName=e.screenName||e.screen_name,e.buttonHashtag=e.buttonHashtag||e.button_hashtag||e.hashtag,r.present(t,d)&&(e.type=\"hashtag\"),r.present(t,l)&&(e.type=\"mention\"),e}(t),t.parentNode,t)})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return n.e(3).then(function(r){var o;try{o=n(90),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(0);t.exports=r.aug({},n(151),n(152),n(153),n(154),n(155),n(156),n(157))},function(t,e,n){var r=n(56),i=n(16)([\"userId\"],{},r);t.exports={createDMButton:i}},function(t,e,n){var r=n(59),i=n(16)([\"screenName\"],{},r);t.exports={createFollowButton:i}},function(t,e,n){var r=n(61),i=n(16)([\"momentId\"],{},r);t.exports={createMoment:i}},function(t,e,n){var r=n(62),i=n(16)([\"username\"],{},r);t.exports={createPeriscopeOnAirButton:i}},function(t,e,n){var r=n(😎,i=n(12),o=n(3),s=n(0),a=n(4),u=n(63),c=n(64),d=n(16)([],{},c),l=n(6),f=\"Embedded grids have been deprecated. Please use twttr.widgets.createTimeline instead. More info: https://twittercommunity.com/t/update-on-the-embedded-grid-display-type/119564.\",h={createTimeline😛,createGridFromCollection:function(t){var e😒.toRealArray(arguments).slice(1),n={sourceType:\"collection\",id:t};return e.unshift(n),i.publicLog(f),p.apply(this,e)}};function p(t){var e,n😒.toRealArray(arguments).slice(1);return a.isString(t)||a.isNumber(t)?l.reject(\"Embedded timelines with widget settings have been deprecated. See https://twittercommunity.com/t/deprecating-widget-settings/102295.\")😒.isObject(t)?(t=t||{},n.forEach(function(t){s.isType(\"object\",t)&&function(t){t.ariaLive=t.ariaPolite}(e=t)}),e||(e={},n.push(e)),t.lang=e.lang,t.tweetLimit=e.tweetLimit,t.showReplies=e.showReplies,e.dataSource=u(t),d.apply(this,n)):l.reject(\"data source must be an object.\")}o.isTwitterURL(r.href)&&(h.createTimelinePreview=function(t,e,n){var r={previewParams:t,useLegacyDefaults:!0,isPreviewTimeline:!0};return r.dataSource=u(r),d(e,r,n)}),t.exports=h},function(t,e,n){var r,i=n(0),o=n(65),s=n(16),a😦r😒([\"tweetId\"],{},o),function(){return i.toRealArray(arguments).slice(1).forEach(function(t){i.isType(\"object\",t)&&(t.hideCard=\"none\"==t.cards||\"hidden\"==t.cards,t.hideThread=\"none\"==t.conversation||\"hidden\"==t.conversation)}),r.apply(this,arguments)});t.exports={createTweet:a,createTweetEmbed:a,createVideo:a}},function(t,e,n){var r=n(0),i=n(66),o=n(16),s😮([\"url\"],{type:\"share\"},i),a😮([\"buttonHashtag\"],{type:\"hashtag\"},i),u😮([\"screenName\"],{type:\"mention\"},i);function c(t){return function(){return r.toRealArray(arguments).slice(1).forEach(function(t){r.isType(\"object\",t)&&(t.screenName=t.screenName||t.screen_name,t.buttonHashtag=t.buttonHashtag||t.button_hashtag||t.hashtag)}),t.apply(this,arguments)}}t.exports={createShareButton:c(s),createHashtagButton:c(a),createMentionButton:c(u)}},function(t,e,n){var r,i,o,s=n(5),a=n(1),u😮,c😦],d😒.createElement(\"a\");function l(){var t,e;for(u=1,t😮,e=c.length;t<e;t++)c[t]()}/^loade|c/.test(s.readyState)&&(u=1),s.addEventListener&&s.addEventListener(\"DOMContentLoaded\",i=function(){s.removeEventListener(\"DOMContentLoaded\",i,!1),l()},!1),d.doScroll&&s.attachEvent(\"onreadystatechange\",r=function(){/^c/.test(s.readyState)&&(s.detachEvent(\"onreadystatechange\",r),l())}),o😛.doScroll?function(t){a.self!=a.top?u?t():c.push(t):function(){try{d.doScroll(\"left\")}catch(e){return setTimeout(function(){o(t)},50)}t()}()}:function(t){u?t():c.push(t)},t.exports😮},function(t,e,n){var r=n(41),i=n(9);t.exports=function(){i.set(\"buildVersion\",r.version)}},function(t,e,n){n(161),n(83),n(164)},function(t,e,n){var r=n(162),i=n(28),o=n(67),s=new r,a=function(t){t.widgets&&1===t.widgets.length&&(s.start(),i.emitter.unbind(i.ALL_WIDGETS_RENDER_START,a))},u=function(t){var e;t.widgets&&1===t.widgets.length&&(e=t.widgets[0],s.end(),e.dataset&&e.dataset.tweetId&&o({duration😒.duration(),namespace:{element:\"tweet\",action:\"render\"},widgetIds😦e.dataset.tweetId]})),i.emitter.unbind(i.ALL_WIDGETS_RENDER_END,u)};i.emitter.bind(i.ALL_WIDGETS_RENDER_START,a),i.emitter.bind(i.ALL_WIDGETS_RENDER_END,u)},function(t,e,n){var r=n(163);function i(){}i.prototype.start=function(){this._startTime=r()},i.prototype.end=function(){this._duration=r()-this._startTime},i.prototype.duration=function(){return this._duration},t.exports=i},function(t,e,n){var r=n(1);t.exports=function(){return r.performance&&r.performance.now?r.performance.now():Date.now()}},function(t,e,n){var r=n(28),i=n(67),o=n(165),s=n(3),a=n(1),u=n(0),c=n(20),d=n(58);function l(t){return t.performance.getEntriesByType(\"resource\").filter(function(t){return s.isTwimgURL(t.name)||s.isTwitterURL(t.name)}).reduce(function(t,e){return t[e.name]=e.duration,t},{})}r.emitter.bind(r.ALL_WIDGETS_AND_IMAGES_LOADED,function(t){var e,n,r😦];c.hasPerformanceInformation()&&(e=l(a),d.isSupported()||(r=function(t){return t.reduce(function(t,e){return u.aug(t,l(e.contentDocument.defaultView))},{})}(t)),n=u.aug({},e,r),Object.keys(o).forEach(function(t){!function(t,e,n){var r=Object.keys(t).reduce(function(e,r){return n(r)?e+t[r]:e},0);i({duration:r,namespace:{element:e,action:\"resource\"}})}(n,t,o[t])}))})},function(t,e,n){var r=n(3),i={all:function(){return!0},image:function(t){return r.isTwimgURL(t)},settings:function(t){return r.isSettingsURL(t)},widget_iframe:function(t){return r.isWidgetIframeURL(t)}};t.exports=i}])));",
            "</script>",
            "<p>Turns out that even though <code style=\"white-space: pre-wrap;\">useMemo</code> is for memoizing heavy computation, this does not apply when said computation is asynchronous. You have to use <code style=\"white-space: pre-wrap;\">useEffect</code>.</p>",
            "<p>At least until suspense and async comes in early 2019.</p>",
            "<p>Something about always returning the same Promise, which confuses <code style=\"white-space: pre-wrap;\">useMemo</code> and causes an infinite loop when it calls <code style=\"white-space: pre-wrap;\">setState</code> on every render. That was fun.</p>",
            "<p>There’s some computation that goes into this one to prepare the dataset. Let’s start with that.</p>",
            "<h2 id=\"preparing-word-cloud-data\">Preparing word cloud data</h2>",
            "<p>Our data begins life as a flat text file.</p>",
            "<pre><code style=\"white-space: pre-wrap;\">Angels From The Realm Of Glory",
            "",
            "Angels from the realms of glory",
            "Wing your flight over all the earth",
            "Ye, who sang creations story",
            "Now proclaim Messiah&#39;s birth",
            "Come and worship, come and worship",
            "Worship Christ the newborn King",
            "Shepherds in the fields abiding",
            "Watching over your flocks by night",
            "God with man is now residing</code></pre>",
            "<p>And so on. Each carol begins with a title and an empty line. Then there’s a bunch of lines followed by an empty line.</p>",
            "<p>We load this file with <code style=\"white-space: pre-wrap;\">d3.text</code>, pass it into <code style=\"white-space: pre-wrap;\">parseText</code>, and save it to a <code style=\"white-space: pre-wrap;\">carols</code> variable.</p>",
            "<div class=\"sourceCode\" id=\"cb228\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb228-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> [carols<span class=\"op\" style=\"color: #666666;\">,</span> setCarols] <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">useState</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">null</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb228-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb228-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"at\" style=\"color: #7d9029;\">useEffect</span>(() <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb228-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">text</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;/carols.txt&#39;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb228-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">then</span>(parseText)</a>",
            "<a class=\"sourceLine\" id=\"cb228-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">then</span>(setCarols)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb228-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">},</span> [<span class=\"op\" style=\"color: #666666;\">!</span>carols])<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>Typical <code style=\"white-space: pre-wrap;\">useEffect</code>/<code style=\"white-space: pre-wrap;\">useState</code> dance. We run the effect if state isn’t set, the effect fetches some data, sets the state.</p>",
            "<p>Parsing that text into individual carols looks like this</p>",
            "<div class=\"sourceCode\" id=\"cb229\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb229-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span> <span class=\"at\" style=\"color: #7d9029;\">takeUntilEmptyLine</span>(text) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb229-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> result <span class=\"op\" style=\"color: #666666;\">=</span> []<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb229-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb229-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">for</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb229-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> row <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">text</span>.<span class=\"at\" style=\"color: #7d9029;\">shift</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb229-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    row <span class=\"op\" style=\"color: #666666;\">&amp;&amp;</span> <span class=\"va\" style=\"color: #19177c;\">row</span>.<span class=\"at\" style=\"color: #7d9029;\">trim</span>().<span class=\"at\" style=\"color: #7d9029;\">length</span> <span class=\"op\" style=\"color: #666666;\">&gt;</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb229-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    row <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">text</span>.<span class=\"at\" style=\"color: #7d9029;\">shift</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb229-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  ) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb229-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">result</span>.<span class=\"at\" style=\"color: #7d9029;\">push</span>(<span class=\"va\" style=\"color: #19177c;\">row</span>.<span class=\"at\" style=\"color: #7d9029;\">trim</span>())<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb229-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb229-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb229-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> result<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb229-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb229-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb229-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span> <span class=\"at\" style=\"color: #7d9029;\">parseText</span>(text) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb229-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  text <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">text</span>.<span class=\"at\" style=\"color: #7d9029;\">split</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;</span><span class=\"sc\" style=\"color: #4070a0;\">\\n</span><span class=\"st\" style=\"color: #4070a0;\">&#39;</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb229-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb229-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> carols <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;All carols&#39;</span><span class=\"op\" style=\"color: #666666;\">:</span> [] <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb229-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb229-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">while</span> (<span class=\"va\" style=\"color: #19177c;\">text</span>.<span class=\"at\" style=\"color: #7d9029;\">length</span> <span class=\"op\" style=\"color: #666666;\">&gt;</span> <span class=\"dv\" style=\"color: #40a070;\">0</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb229-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> title <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">takeUntilEmptyLine</span>(text)[<span class=\"dv\" style=\"color: #40a070;\">0</span>]<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb229-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> carol <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">takeUntilEmptyLine</span>(text)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb229-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb229-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    carols[title] <span class=\"op\" style=\"color: #666666;\">=</span> carol<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb229-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    carols[<span class=\"st\" style=\"color: #4070a0;\">&#39;All carols&#39;</span>] <span class=\"op\" style=\"color: #666666;\">=</span> [...<span class=\"at\" style=\"color: #7d9029;\">carols</span>[<span class=\"st\" style=\"color: #4070a0;\">&#39;All carols&#39;</span>]<span class=\"op\" style=\"color: #666666;\">,</span> ...<span class=\"at\" style=\"color: #7d9029;\">carol</span>]<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb229-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb229-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb229-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> carols<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb229-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>Our algorithm is based on a <code style=\"white-space: pre-wrap;\">takeUntil</code> function. It takes lines from our text until some condition is met.</p>",
            "<p>Basically:</p>",
            "<ol type=\"1\">",
            "<li>Split text into lines</li>",
            "<li>Run algorithm until you run out of lines</li>",
            "<li>Take lines until you encounter an empty line</li>",
            "<li>Assume the first line is a title</li>",
            "<li>Take lines until you encounter an empty line</li>",
            "<li>This is your carol</li>",
            "<li>Save title and carol in a dictionary</li>",
            "<li>Splat carrol into the <code style=\"white-space: pre-wrap;\">All carols</code> blob as well</li>",
            "</ol>",
            "<p>We’ll use that last one for a joint word cloud of all Christmas carols.</p>",
            "<h2 id=\"calculating-word-clouds-with-d3-cloud\">Calculating word clouds with d3-cloud</h2>",
            "<p>With our carols in hand, we can build a word cloud. We’ll use the wonderful <a href=\"https://github.com/jasondavies/d3-cloud\">d3-cloud</a> library to handle layouting for us. Our job is to feed it data with counted word frequencies.</p>",
            "<p>Easiest way to count words is with a loop</p>",
            "<div class=\"sourceCode\" id=\"cb230\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb230-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span> <span class=\"at\" style=\"color: #7d9029;\">count</span>(words) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb230-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> counts <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{};</span></a>",
            "<a class=\"sourceLine\" id=\"cb230-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb230-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">for</span> (<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> w <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">in</span> words) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb230-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    counts[words[w]] <span class=\"op\" style=\"color: #666666;\">=</span> (counts[words[w]] <span class=\"op\" style=\"color: #666666;\">||</span> <span class=\"dv\" style=\"color: #40a070;\">0</span>) <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"dv\" style=\"color: #40a070;\">1</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb230-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb230-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb230-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> counts<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb230-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>Goes over a list of words, collects them in a dictionary, and does <code style=\"white-space: pre-wrap;\">+1</code> every time.</p>",
            "<p>We use that to feed data into <code style=\"white-space: pre-wrap;\">d3-cloud</code>.</p>",
            "<div class=\"sourceCode\" id=\"cb231\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb231-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span> <span class=\"at\" style=\"color: #7d9029;\">createCloud</span>(<span class=\"op\" style=\"color: #666666;\">{</span> words<span class=\"op\" style=\"color: #666666;\">,</span> width<span class=\"op\" style=\"color: #666666;\">,</span> height <span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb231-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">new</span> <span class=\"at\" style=\"color: #7d9029;\">Promise</span>(resolve <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb231-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> counts <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">count</span>(words)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb231-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb231-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> fontSize <span class=\"op\" style=\"color: #666666;\">=</span> d3</a>",
            "<a class=\"sourceLine\" id=\"cb231-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">scaleLog</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb231-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">domain</span>(<span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">extent</span>(<span class=\"va\" style=\"color: #19177c;\">Object</span>.<span class=\"at\" style=\"color: #7d9029;\">values</span>(counts)))</a>",
            "<a class=\"sourceLine\" id=\"cb231-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">range</span>([<span class=\"dv\" style=\"color: #40a070;\">5</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">75</span>])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb231-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb231-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> layout <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">d3Cloud</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb231-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">size</span>([width<span class=\"op\" style=\"color: #666666;\">,</span> height])</a>",
            "<a class=\"sourceLine\" id=\"cb231-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">words</span>(</a>",
            "<a class=\"sourceLine\" id=\"cb231-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"va\" style=\"color: #19177c;\">Object</span>.<span class=\"at\" style=\"color: #7d9029;\">keys</span>(counts)</a>",
            "<a class=\"sourceLine\" id=\"cb231-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          .<span class=\"at\" style=\"color: #7d9029;\">filter</span>(w <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> counts[w] <span class=\"op\" style=\"color: #666666;\">&gt;</span> <span class=\"dv\" style=\"color: #40a070;\">1</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb231-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          .<span class=\"at\" style=\"color: #7d9029;\">map</span>(word <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> (<span class=\"op\" style=\"color: #666666;\">{</span> word <span class=\"op\" style=\"color: #666666;\">}</span>))</a>",
            "<a class=\"sourceLine\" id=\"cb231-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      )</a>",
            "<a class=\"sourceLine\" id=\"cb231-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">padding</span>(<span class=\"dv\" style=\"color: #40a070;\">5</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb231-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">font</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;Impact&#39;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb231-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">fontSize</span>(d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"at\" style=\"color: #7d9029;\">fontSize</span>(counts[<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">word</span>]))</a>",
            "<a class=\"sourceLine\" id=\"cb231-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">text</span>(d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">word</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb231-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">on</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;end&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> resolve)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb231-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb231-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">layout</span>.<span class=\"at\" style=\"color: #7d9029;\">start</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb231-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb231-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>Our <code style=\"white-space: pre-wrap;\">createCloud</code> function gets a list of words, a width, and a height. Returns a promise because d3-cloud is asynchronous. Something about how long it might take to iteratively come up with a good layout for all those words. It’s a hard problem. 🤯</p>",
            "<p>(that’s why we’re not solving it ourselves)</p>",
            "<p>We get the counts, create a <code style=\"white-space: pre-wrap;\">fontSize</code> logarithmic scale for sicing, and invoke the D3 cloud.</p>",
            "<p>That takes a <code style=\"white-space: pre-wrap;\">size</code>, a list of words without single occurrences turned into <code style=\"white-space: pre-wrap;\">{ word: 'bla' }</code> objects, some padding, a font size method using our <code style=\"white-space: pre-wrap;\">fontSize</code> scale, a helper to get the word and when it’s all done the <code style=\"white-space: pre-wrap;\">end</code> event resolves our promise.</p>",
            "<p>When that’s set up we start the layouting process with <code style=\"white-space: pre-wrap;\">layout.start()</code></p>",
            "<h2 id=\"animating-words\">Animating words</h2>",
            "<p>Great. We’ve done the hard computation, time to start rendering.</p>",
            "<p>We’ll need a self-animating <code style=\"white-space: pre-wrap;\">&lt;Word&gt;</code> componenent that transitions itself into a new position and angle. CSS transitions can’t do that for us, so we’ll have to use D3 transitions.</p>",
            "<div class=\"sourceCode\" id=\"cb232\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb232-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Word <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb232-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  ref <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">createRef</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb232-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  state <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">transform</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">transform</span> <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb232-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb232-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">componentDidUpdate</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb232-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> transform <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb232-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">select</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">ref</span>.<span class=\"at\" style=\"color: #7d9029;\">current</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb232-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">transition</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb232-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">duration</span>(<span class=\"dv\" style=\"color: #40a070;\">500</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb232-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;transform&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">transform</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb232-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">on</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;end&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">setState</span>(<span class=\"op\" style=\"color: #666666;\">{</span> transform <span class=\"op\" style=\"color: #666666;\">}</span>))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb232-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb232-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb232-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb232-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> style<span class=\"op\" style=\"color: #666666;\">,</span> children <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb232-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">{</span> transform <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb232-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb232-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb232-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>text</a>",
            "<a class=\"sourceLine\" id=\"cb232-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        transform<span class=\"op\" style=\"color: #666666;\">={</span>transform<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb232-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        textAnchor<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;middle&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb232-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        style<span class=\"op\" style=\"color: #666666;\">={</span>style<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb232-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        ref<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">ref</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb232-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb232-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">{</span>children<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb232-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      &lt;/text<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb232-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb232-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb232-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>We’re using my <a href=\"https://swizec.com/blog/declarative-d3-transitions-react/swizec/8323\">Declarative D3 transitions with React</a> approach to make it work. You can read about it in detail on my main blog.</p>",
            "<p>In a nutshell:</p>",
            "<ol type=\"1\">",
            "<li>Store the transitioning property in state</li>",
            "<li>State becomes a sort of staging area</li>",
            "<li>Take control of rendering in <code style=\"white-space: pre-wrap;\">componentDidUpdate</code> and run a transition</li>",
            "<li>Update state after transition extends</li>",
            "<li>Render <code style=\"white-space: pre-wrap;\">text</code> from state</li>",
            "</ol>",
            "<p>The result are words that declaratively transition into their new positions. Try it out.</p>",
            "<h2 id=\"putting-it-all-together\">Putting it all together</h2>",
            "<p>Last step in the puzzle is that <code style=\"white-space: pre-wrap;\">&lt;WordCloud&gt;</code> component that was giving me so much trouble and kept hanging my browser. It looks like this</p>",
            "<div class=\"sourceCode\" id=\"cb233\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb233-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span> <span class=\"at\" style=\"color: #7d9029;\">WordCloud</span>(<span class=\"op\" style=\"color: #666666;\">{</span> words<span class=\"op\" style=\"color: #666666;\">,</span> forCarol<span class=\"op\" style=\"color: #666666;\">,</span> width<span class=\"op\" style=\"color: #666666;\">,</span> height <span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb233-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> [cloud<span class=\"op\" style=\"color: #666666;\">,</span> setCloud] <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">useState</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">null</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb233-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">useEffect</span>(() <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb233-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">createCloud</span>(<span class=\"op\" style=\"color: #666666;\">{</span> words<span class=\"op\" style=\"color: #666666;\">,</span> width<span class=\"op\" style=\"color: #666666;\">,</span> height <span class=\"op\" style=\"color: #666666;\">}</span>).<span class=\"at\" style=\"color: #7d9029;\">then</span>(setCloud)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb233-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">},</span> [forCarol<span class=\"op\" style=\"color: #666666;\">,</span> width<span class=\"op\" style=\"color: #666666;\">,</span> height])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb233-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb233-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> colors <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">chroma</span>.<span class=\"va\" style=\"color: #19177c;\">brewer</span>.<span class=\"at\" style=\"color: #7d9029;\">dark2</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb233-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb233-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb233-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    cloud <span class=\"op\" style=\"color: #666666;\">&amp;&amp;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb233-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>g transform<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"vs\" style=\"color: #4070a0;\">`translate(</span><span class=\"sc\" style=\"color: #4070a0;\">${</span>width / <span class=\"dv\" style=\"color: #40a070;\">2</span><span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">, </span><span class=\"sc\" style=\"color: #4070a0;\">${</span>height / <span class=\"dv\" style=\"color: #40a070;\">2</span><span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">)`</span><span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb233-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"va\" style=\"color: #19177c;\">cloud</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>((w<span class=\"op\" style=\"color: #666666;\">,</span> i) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb233-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          <span class=\"op\" style=\"color: #666666;\">&lt;</span>Word</a>",
            "<a class=\"sourceLine\" id=\"cb233-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            transform<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"vs\" style=\"color: #4070a0;\">`translate(</span><span class=\"sc\" style=\"color: #4070a0;\">${</span><span class=\"va\" style=\"color: #19177c;\">w</span>.<span class=\"at\" style=\"color: #7d9029;\">x</span><span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">, </span><span class=\"sc\" style=\"color: #4070a0;\">${</span><span class=\"va\" style=\"color: #19177c;\">w</span>.<span class=\"at\" style=\"color: #7d9029;\">y</span><span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">) rotate(</span><span class=\"sc\" style=\"color: #4070a0;\">${</span><span class=\"va\" style=\"color: #19177c;\">w</span>.<span class=\"at\" style=\"color: #7d9029;\">rotate</span><span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">)`</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb233-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            style<span class=\"op\" style=\"color: #666666;\">={{</span></a>",
            "<a class=\"sourceLine\" id=\"cb233-16\" title=\"16\">              <span class=\"dt\">fontSize</span><span class=\"op\">:</span> <span class=\"va\">w</span>.<span class=\"at\">size</span><span class=\"op\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb233-17\" title=\"17\">              <span class=\"dt\">fontFamily</span><span class=\"op\">:</span> <span class=\"st\">&#39;impact&#39;</span><span class=\"op\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb233-18\" title=\"18\">              <span class=\"dt\">fill</span><span class=\"op\">:</span> colors[i <span class=\"op\">%</span> <span class=\"va\">colors</span>.<span class=\"at\">length</span>]<span class=\"op\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb233-19\" title=\"19\">            <span class=\"op\">}}</span></a>",
            "<a class=\"sourceLine\" id=\"cb233-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            key<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"va\" style=\"color: #19177c;\">w</span>.<span class=\"at\" style=\"color: #7d9029;\">word</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb233-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          <span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb233-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"va\" style=\"color: #19177c;\">w</span>.<span class=\"at\" style=\"color: #7d9029;\">word</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb233-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          &lt;/Word<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb233-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        ))<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb233-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      &lt;/g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb233-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    )</a>",
            "<a class=\"sourceLine\" id=\"cb233-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb233-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>A combination of <code style=\"white-space: pre-wrap;\">useState</code> and <code style=\"white-space: pre-wrap;\">useEffect</code> makes sure we run the cloud generating algorithm every time we pick a different carol to show, or change the size of our word cloud. When the effect runs, it sets state in the <code style=\"white-space: pre-wrap;\">cloud</code> constant.</p>",
            "<p>This triggers a render and returns a grouping element with its center in the center of the page. <code style=\"white-space: pre-wrap;\">d3-cloud</code> creates coordinates spiraling around a center.</p>",
            "<p>Loop through the cloud data, render a <code style=\"white-space: pre-wrap;\">&lt;Word&gt;</code> component for each word. Set a transform, a bit of style, the word itself.</p>",
            "<p>And voila, a declaratively animated word cloud with React and D3 ✌️</p>",
            "<blockquote class=\"twitter-tweet\" data-conversation=\"none\" data-lang=\"en\">",
            "<p lang=\"en\" dir=\"ltr\">",
            "With your powers combined I got it working! Thanks guys 😃 <a href=\"https://t.co/7qKr6joeRC\">pic.twitter.com/7qKr6joeRC</a>",
            "</p>",
            "— Swizec Teller (<span class=\"citation\" data-cites=\"Swizec\">@Swizec</span>) <a href=\"https://twitter.com/Swizec/status/1071468363740639232?ref_src=twsrc%5Etfw\">December 8, 2018</a>",
            "</blockquote>",
            "<script async charset=\"utf-8\">",
            "Function&&Function.prototype&&Function.prototype.bind&&(/MSIE ([6789]|10)/.test(navigator.userAgent)||(window.__twttr&&window.__twttr.widgets&&window.__twttr.widgets.loaded&&window.twttr.widgets.load&&window.twttr.widgets.load(),window.__twttr&&window.__twttr.widgets&&window.__twttr.widgets.init||function(t){function e(e){for(var n,i,o=e[0],s=e[1],a😮,c😦];a<o.length;a++)i😮[a],r[i]&&c.push(r[i][0]),r[i]😮;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]😒[n]);for(u&&u(e);c.length😉c.shift()()}var n={},r={1😮};function i(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(t){var e😦],n=r[t];if(0!==n)if(n)e.push(n[2]);else{var o=new Promise(function(e,i){n=r[t👿e,i]});e.push(n[2]😮);var s,a=document.getElementsByTagName(\"head\")[0],u=document.createElement(\"script\");u.charset=\"utf-8\",u.timeout=120,i.nc&&u.setAttribute(\"nonce\",i.nc),u.src=function(t){return i.p+\"js/\"+({0:\"moment~timeline~tweet\",2:\"dm_button\",3:\"button\",4:\"moment\",5:\"periscope_on_air\",6:\"timeline\",7:\"tweet\"}[t]||t)+\".\"+{0:\"a20574004ea824b1c047f200045ffa1e\",2:\"b573518d7182437fcff1973b0098d272\",3:\"509719336ca39171c37a321231ccaf83\",4:\"f261877d67dc45f3972d303d6b32c138\",5:\"04369ab165b401d73b183f97ed7153fd\",6:\"49693ebcd57b08708ebca7502c7c343d\",7:\"73b7ab8a56ad3263cad8d36ba66467fc\"}[t]+\".js\"}(t),s=function(e){u.onerror=u.onload=null,clearTimeout(c);var n=r[t];if(0!==n){if(n){var i=e&&(\"load\"===e.type?\"missing\":e.type),o=e&&e.target&&e.target.src,s=new Error(\"Loading chunk \"+t+\" failed.\\n(\"+i+\": \"+o+\")\");s.type=i,s.request😮,n[1](s)}r[t]=void 0}};var c=setTimeout(function(){s({type:\"timeout\",target:u})},12e4);u.onerror=u.onload😒,a.appendChild(u)}return Promise.all(e)},i.m=t,i.c=n,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,\"a\",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p=\"https://platform.twitter.com/\",i.oe=function(t){throw console.error(t),t};var o=window.__twttrll=window.__twttrll||[],s😮.push.bind(o);o.push=e,o😮.slice();for(var a😮;a<o.length;a++)e(o[a]);var u😒;i(i.s=91)}([function(t,e,n){var r=n(1);function i(t,e){var n;for(n in t)t.hasOwnProperty&&!t.hasOwnProperty(n)||e(n,t[n]);return t}function o(t){return{}.toString.call(t).match(/\\s([a-zA-Z]+)/)[1].toLowerCase()}function s(t){return t===Object(t)}function a(t){var e;if(!s(t))return!1;if(Object.keys)return!Object.keys(t).length;for(e in t)if(t.hasOwnProperty(e))return!1;return!0}function u(t){return t?Array.prototype.slice.call(t)😦]}t.exports={aug:function(t){return u(arguments).slice(1).forEach(function(e){i(e,function(e,n){t[e]=n})}),t},async:function(t,e){r.setTimeout(function(){t.call(e||null)},0)},compact:function t(e){return i(e,function(n,r){s(r)&&(t(r),a(r)&&delete e[n]),void 0!==r&&null!==r&&\"\"!==r||delete e[n]}),e},contains:function(t,e){return!(!t||!t.indexOf)&&t.indexOf(e)>-1},forIn:i,isObject😒,isEmptyObject:a,toType😮,isType:function(t,e){return t==o(e)},toRealArray:u}},function(t,e){t.exports=window},function(t,e,n){var r=n(6);t.exports=function(){var t=this;this.promise=new r(function(e,n){t.resolve=e,t.reject=n})}},function(t,e,n){var r=n(11),i😕(?:^|(?:https?😃?\\/\\/(?:www\\.)?twitter\\.com(?::\\d+)?(?😕/intent\\/(?:follow|user)\\/?\\?screen_name😐(?😕/#!)?\\/))@?([\\w]+)(?😕?|&|$)/i,o😕(?:^|(?:https?😃?\\/\\/(?:www\\.)?twitter\\.com(?::\\d+)?\\/(?:#!\\/)?[\\w_]+\\/status(?:es)?\\/)(\\d+)/i,s😕^http(s?)😕/\\/(\\w+\\.)*twitter\\.com([😕]|$)/i,a😕^http(s?)😕/\\/pbs\\.twimg\\.com\\//,u😕^#?([^.,<>!\\s/#\\-()'\"]+)$/,c😕twitter\\.com(?::\\d{2,4})?\\/intent\\/(\\w+)/,d😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/\\w+\\/timelines\\/(\\d+)/i,l😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/i\\/moments\\/(\\d+)/i,f😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/(\\w+)\\/(?:likes|favorites)/i,h😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/(\\w+)\\/lists\\/([\\w-%]+)/i,p😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/i\\/live\\/(\\d+)/i,m😕^https?😕/\\/syndication\\.twitter\\.com\\/settings/i,v😕^https?😕/\\/(localhost|platform)\\.twitter\\.com(?::\\d+)?\\/widgets\\/widget_iframe\\.(.+)/i,g😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/search\\?q😦\\w+)/i;function w(t){return\"string\"==typeof t&&i.test(t)&&RegExp.$1.length<=20}function y(t){if(w(t))return RegExp.$1}function b(t,e){var n=r.decodeURL(t);if(e=e||!1,n.screen_name=y(t),n.screen_name)return r.url(\"https://twitter.com/intent/\"+(e?\"follow\":\"user\"),n)}function _(t){return\"string\"==typeof t&&u.test(t)}function E(t){return\"string\"==typeof t&&o.test(t)}t.exports={isHashTag:_,hashTag:function(t,e){if(e=void 0===e||e,_(t))return(e?\"#\":\"\")+RegExp.$1},isScreenName:w,screenName:y,isStatus:E,status:function(t){return E(t)&&RegExp.$1},intentForProfileURL:b,intentForFollowURL:function(t){return b(t,!0)},isTwitterURL:function(t){return s.test(t)},isTwimgURL:function(t){return a.test(t)},isIntentURL:function(t){return c.test(t)},isSettingsURL:function(t){return m.test(t)},isWidgetIframeURL:function(t){return v.test(t)},isSearchUrl:function(t){return g.test(t)},regexen:{profile:i},momentId:function(t){return l.test(t)&&RegExp.$1},collectionId:function(t){return d.test(t)&&RegExp.$1},intentType:function(t){return c.test(t)&&RegExp.$1},likesScreenName:function(t){return f.test(t)&&RegExp.$1},listScreenNameAndSlug:function(t){var e,n,r;if(h.test(t)){e=RegExp.$1,n=RegExp.$2;try{r=decodeURIComponent(n)}catch(t){}return{ownerScreenName:e,slug:r||n}}return!1},eventId:function(t){return p.test(t)&&RegExp.$1}}},function(t,e,n){var r=n(0),i😦!0,1,\"1\",\"on\",\"ON\",\"true\",\"TRUE\",\"yes\",\"YES\"],o😦!1,0,\"0\",\"off\",\"OFF\",\"false\",\"FALSE\",\"no\",\"NO\"];function s(t){return void 0!==t&&null!==t&&\"\"!==t}function a(t){return c(t)&&t%1==0}function u(t){return c(t)&&!a(t)}function c(t){return s(t)&&!isNaN(t)}function d(t){return r.contains(o,t)}function l(t){return r.contains(i,t)}t.exports={hasValue😒,isInt:a,isFloat:u,isNumber:c,isString:function(t){return\"string\"===r.toType(t)},isArray:function(t){return s(t)&&\"array\"==r.toType(t)},isTruthValue:l,isFalseValue😛,asInt:function(t){if(a(t))return parseInt(t,10)},asFloat:function(t){if(u(t))return t},asNumber:function(t){if(c(t))return t},asBoolean:function(t){return!(!s(t)||!l(t)&&(d(t)||!t))}}},function(t,e){t.exports=document},function(t,e,n){var r=n(1),i=n(20),o=n(45);i.hasPromiseSupport()||(r.Promise😮),t.exports=r.Promise},function(t,e,n){var r=n(0);t.exports=function(t,e){var n=Array.prototype.slice.call(arguments,2);return function(){var i=r.toRealArray(arguments);return t.apply(e,n.concat(i))}}},function(t,e){t.exports=location},function(t,e,n){var r=n(47);t.exports=new r(\"__twttr\")},function(t,e,n){var r=n(0),i😕\\b([\\w-_]+)\\b/g;function o(t){return new RegExp(\"\\\\b\"+t+\"\\\\b\",\"g\")}function s(t,e){t.classList?t.classList.add(e)😮(e).test(t.className)||(t.className+=\" \"+e)}function a(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(o(e),\" \")}function u(t,e){return t.classList?t.classList.contains(e):r.contains(c(t),e)}function c(t){return r.toRealArray(t.classList?t.classList:t.className.match(i))}t.exports={add😒,remove:a,replace:function(t,e,n){if(t.classList&&u(t,e))return a(t,e),void s(t,n);t.className=t.className.replace(o(e),n)},toggle:function(t,e,n){return void 0===n&&t.classList&&t.classList.toggle?t.classList.toggle(e,n)😦n?s(t,e):a(t,e),n)},present:u,list:c}},function(t,e,n){var r=n(4),i=n(0);function o(t){return encodeURIComponent(t).replace(/\\+/g,\"%2B\").replace(/'/g,\"%27\")}function s(t){return decodeURIComponent(t)}function a(t){var e😦];return i.forIn(t,function(t,n){var s😮(t);i.isType(\"array\",n)||(n😦n]),n.forEach(function(t){r.hasValue(t)&&e.push(s+\"=\"+o(t))})}),e.sort().join(\"&\")}function u(t){var e={};return t?(t.split(\"&\").forEach(function(t){var n=t.split(\"😊,r😒(n[0]),o😒(n[1]);if(2==n.length){if(!i.isType(\"array\",e[r]))return r in e?(e[r👿e[r]],void e[r].push(o)):void(e[r]😮);e[r].push(o)}}),e):{}}t.exports={url:function(t,e){return a(e).length>0?i.contains(t,\"?\")?t+\"&\"+a(e):t+\"?\"+a(e):t},decodeURL:function(t){var e=t&&t.split(\"?\");return 2==e.length?u(e[1]):{}},decode:u,encode:a,encodePart😮,decodePart😒}},function(t,e,n){var r=n(😎,i=n(1),o=n(0),s={},a😮.contains(r.href,\"tw_debug=true\");function u(){}function c(){}function d(){return i.performance&&+i.performance.now()||+new Date}function l(t,e){if(i.console&&i.console[t])switch(e.length){case 1:i.console[t](e[0]);break;case 2:i.console[t](e[0],e[1]);break;case 3:i.console[t](e[0],e[1],e[2]);break;case 4:i.console[t](e[0],e[1],e[2],e[3]);break;case 5:i.console[t](e[0],e[1],e[2],e[3],e[4]);break;default😮!==e.length&&i.console.warn&&i.console.warn(\"too many params passed to logger.\"+t)}}t.exports={devError:u,devInfo:c,devObject:function(t,e){},publicError:function(){l(\"error\",o.toRealArray(arguments))},publicLog:function(){l(\"info\",o.toRealArray(arguments))},time:function(t){a&&(s[t]😛())},timeEnd:function(t){a&&s[t]&&(d(),s[t])}}},function(t,e,n){var r=n(19),i=n(4),o=n(11),s=n(0),a=n(116);t.exports=function(t){var e=t.href&&t.href.split(\"?\")[1],n=e?o.decode(e):{},u={lang:a(t),width:t.getAttribute(\"data-width\")||t.getAttribute(\"width\"),height:t.getAttribute(\"data-height\")||t.getAttribute(\"height\"),related:t.getAttribute(\"data-related\"),partner:t.getAttribute(\"data-partner\")};return i.asBoolean(t.getAttribute(\"data-dnt\"))&&r.setOn(),s.forIn(u,function(t,e){var r=n[t];n[t]=i.hasValue(r)?r:e}),s.compact(n)}},function(t,e,n){var r=n(79),i=n(22);t.exports=function(){var t=\"data-twitter-extracted-\"+i.generate();return function(e,n){return r(e,n).filter(function(e){return!e.hasAttribute(t)}).map(function(e){return e.setAttribute(t,\"true\"),e})}}},function(t,e){function n(t,e,n,r,i,o){this.factory=t,this.Sandbox=e,this.srcEl😮,this.targetEl=i,this.parameters=r,this.className=n}n.prototype.destroy=function(){this.srcEl=this.targetEl=null},t.exports=n},function(t,e,n){var r=n(6),i=n(49),o=n(19),s=n(4),a=n(0);t.exports=function(t,e,n){var u;return t=t||[],e=e||{},u=\"ƒ(\"+t.join(\", \")+\", target, [options]);\",function(){var c,d,l,f,h=Array.prototype.slice.apply(arguments,[0,t.length]),p=Array.prototype.slice.apply(arguments,[t.length]);return p.forEach(function(t){t&&(t.nodeType!==Node.ELEMENT_NODE?a.isType(\"function\",t)?c=t:a.isType(\"object\",t)&&(d=t):l=t)}),h.length!==t.length||0===p.length?(c&&a.async(function(){c(!1)}),r.reject(new Error(\"Not enough parameters. Expected: \"+u))):l?(d=a.aug({},d||{},e),t.forEach(function(t){d[t]=h.shift()}),s.asBoolean(d.dnt)&&o.setOn(),f=i.addWidget(n(d,l)),c&&f.then(c,function(){c(!1)}),f)😦c&&a.async(function(){c(!1)}),r.reject(new Error(\"No target element specified. Expected: \"+u)))}}},function(t,e,n){var r=n(99),i=n(2),o=n(0);function s(t,e){return function(){try{e.resolve(t.call(this))}catch(t){e.reject(t)}}}t.exports={sync:function(t,e){t.call(e)},read:function(t,e){var n=new i;return r.read(s(t,n),e),n.promise},write:function(t,e){var n=new i;return r.write(s(t,n),e),n.promise},defer:function(t,e,n){var a=new i;return o.isType(\"function\",t)&&(n=e,e=t,t=1),r.defer(t,s(e,a),n),a.promise}}},function(t,e,n){var r=n(9),i😦\"https://syndication.twitter.com\",\"https://cdn.syndication.twimg.com\",\"https://localhost.twitter.com:8444\"],o😦\"https://syndication.twitter.com\",\"https://localhost.twitter.com:8445\"],s=function(t,e){return t.indexOf(e)>-1},a=function(){var t=r.get(\"backendHost\");return t&&s(i,t)?t:\"https://cdn.syndication.twimg.com\"},u=function(){var t=r.get(\"settingsSvcHost\");return t&&s(o,t)?t:\"https://syndication.twitter.com\"};function c(t,e){var n😦t];return e.forEach(function(t){n.push(function(t){var e😦t||\"\").toString(),n=\"/\"===e.slice(0,1)?1😮,r=function(t){return\"/\"===t.slice(-1)}(e)?-1:void 0;return e.slice(n,r)}(t))}),n.join(\"/\")}t.exports={cookieConsent:function(t){var e=t||[];return e.unshift(\"cookie/consent\"),c(u(),e)},eventVideo:function(t){var e=t||[];return e.unshift(\"video/event\"),c(a(),e)},grid:function(t){var e=t||[];return e.unshift(\"grid/collection\"),c(a(),e)},moment:function(t){var e=t||[];return e.unshift(\"moments\"),c(a(),e)},settings:function(t){var e=t||[];return e.unshift(\"settings\"),c(u(),e)},timeline:function(t){var e=t||[];return e.unshift(\"timeline\"),c(a(),e)},tweetBatch:function(t){var e=t||[];return e.unshift(\"tweets.json\"),c(a(),e)},video:function(t){var e=t||[];return e.unshift(\"widgets/video\"),c(a(),e)}}},function(t,e,n){var r=n(5),i=n(😎,o=n(35),s=n(77),a=n(4),u=n(32),c=!1,d😕https?😕/\\/([^/]+).*/i;t.exports={setOn:function(){c=!0},enabled:function(t,e){return!!(c||a.asBoolean(u.val(\"dnt\"))||s.isUrlSensitive(e||i.host)||o.isFramed()&&s.isUrlSensitive(o.rootDocumentLocation())||(t😛.test(t||r.referrer)&&RegExp.$1)&&s.isUrlSensitive(t))}}},function(t,e,n){var r=n(5),i=n(12),o=n(92),s=n(1),a=n(0),u😮.userAgent;function c(t){return/(Trident|MSIE|Edge[/ ]?\\d)/.test(t=t||u)}t.exports={retina:function(t){return(t=t||s).devicePixelRatio?t.devicePixelRatio>=1.5:!!t.matchMedia&&t.matchMedia(\"only screen and (min-resolution: 144dpi)\").matches},anyIE:c,ie9:function(t){return/MSIE 9/.test(t=t||u)},ie10:function(t){return/MSIE 10/.test(t=t||u)},ios:function(t){return/(iPad|iPhone|iPod)/.test(t=t||u)},android:function(t){return/^Mozilla\\/5\\.0 \\(Linux; (U; )?Android/.test(t=t||u)},canPostMessage:function(t,e){return t=t||s,e=e||u,t.postMessage&&!(c(e)&&t.opener)},touch:function(t,e,n){return t=t||s,e=e||o,n=n||u,\"ontouchstart\"in t||/Opera Mini/.test(n)||e.msMaxTouchPoints>0},cssTransitions:function(){var t=r.body.style;return void 0!==t.transition||void 0!==t.webkitTransition||void 0!==t.mozTransition||void 0!==t.oTransition||void 0!==t.msTransition},hasPromiseSupport:function(){return!!(s.Promise&&s.Promise.resolve&&s.Promise.reject&&s.Promise.all&&s.Promise.race&&(new s.Promise(function(e){t=e}),a.isType(\"function\",t)));var t},hasIntersectionObserverSupport:function(){return!!s.IntersectionObserver},hasPerformanceInformation:function(){return s.performance&&s.performance.getEntriesByType},hasLocalStorageSupport:function(){try{return s.localStorage.setItem(\"local_storage_support_test\",\"true\"),void 0!==s.localStorage}catch(t){return i.devError(\"window.localStorage is not supported:\",t),!1}}}},function(t,e,n){var r=n(6),i=n(2);function o(t,e){return t.then(e,e)}function s(t){return t instanceof r}t.exports={always😮,allResolved:function(t){var e;return void 0===t?r.reject(new Error(\"undefined is not an object\")):Array.isArray(t)?(e=t.length)?new r(function(n,r){var i😮,o😦];function a(){(i+=1)===e&&(0===o.length?r():n(o))}function u(t){o.push(t),a()}t.forEach(function(t){s(t)?t.then(u,a):u(t)})}):r.resolve([]):r.reject(new Error(\"Type error\"))},some:function(t){var e;return e😦t=t||[]).length,t=t.filter(s),e?e!==t.length?r.reject(\"non-Promise passed to .some\"):new r(function(e,n){var r😮;function i(){(r+=1)===t.length&&n()}t.forEach(function(t){t.then(e,i)})}):r.reject(\"no promises passed to .some\")},isPromise😒,allSettled:function(t){function e(){}return r.all((t||[]).map(function(t){return o(t,e)}))},timeout:function(t,e){var n=new i;return setTimeout(function(){n.reject(new Error(\"Promise timed out\"))},e),t.then(function(t){n.resolve(t)},function(t){n.reject(t)}),n.promise}}},function(t,e){var n=\"i\",r😮,i😮;t.exports={generate:function(){return n+String(+new Date)+Math.floor(1e5*Math.random())+r++},deterministic:function(){return n+String(i++)}}},function(t,e,n){var r=n(46),i=n(48),o=n(0);t.exports😮.aug(r.get(\"events\")||{},i.Emitter)},function(t,e,n){var r=n(25),i=n(107);t.exports=r.build([i])},function(t,e,n){var r=n(37),i=n(104),o=n(7);(r=Object.create(r)).build😮(r.build,null,i),t.exports=r},function(t,e,n){var r=n(37),i=n(38),o=n(7);(r=Object.create(r)).build😮(r.build,null,i),t.exports=r},function(t,e,n){var r=n(81),i=n(73),o=n(82),s=n(😎,a=n(68),u=n(72),c=n(19),d=n(4),l=n(22),f=n(0);function h(t){if(!t||!t.headers)throw new Error(\"unexpected response schema\");return{html:t.body,config:t.config,pollInterval:1e3*parseInt(t.headers.xPolling,10)||null,maxCursorPosition:t.headers.maxPosition,minCursorPosition:t.headers.minPosition}}function p(t){if(t&&t.headers)throw new Error(t.headers.status);throw t instanceof Error?t:new Error(t)}t.exports=function(t){t.params({instanceId:{required:!0,fallback:l.deterministic},lang:{required:!0,transform:a.matchLanguage,fallback:\"en\"},tweetLimit:{transform😛.asInt}}),t.defineProperty(\"endpoint\",{get:function(){throw new Error(\"endpoint not specified\")}}),t.defineProperty(\"pollEndpoint\",{get:function(){return this.endpoint}}),t.define(\"cbId\",function(t){var e=t?\"_new\":\"_old\";return\"tl_\"+this.params.instanceId+\"_\"+this.id+e}),t.define(\"queryParams\",function(){return{lang:this.params.lang,tz:u.getTimezoneOffset(),t:r(),domain😒.host,tweet_limit:this.params.tweetLimit,dnt:c.enabled()}}),t.define(\"fetch\",function(){return i.fetch(this.endpoint,this.queryParams(),o,this.cbId()).then(h,p)}),t.define(\"poll\",function(t,e){var n,r;return n={since_id😦t=t||{}).sinceId,max_id:t.maxId,min_position:t.minPosition,max_position:t.maxPosition},r=f.aug(this.queryParams(),n),i.fetch(this.pollEndpoint,r,o,this.cbId(e)).then(h,p)})}},function(t,e,n){var r=n(48).makeEmitter();t.exports={emitter:r,START:\"start\",ALL_WIDGETS_RENDER_START:\"all_widgets_render_start\",ALL_WIDGETS_RENDER_END:\"all_widgets_render_end\",ALL_WIDGETS_AND_IMAGES_LOADED:\"all_widgets_and_images_loaded\"}},function(t,e,n){var r=n(5),i=n(0);t.exports=function(t,e,n){var o;if(n=n||r,t=t||{},e=e||{},t.name){try{o=n.createElement('<iframe name=\"'+t.name+'\"></iframe>')}catch(e){(o=n.createElement(\"iframe\")).name=t.name}delete t.name}else o=n.createElement(\"iframe\");return t.id&&(o.id=t.id,delete t.id),o.allowtransparency=\"true\",o.scrolling=\"no\",o.setAttribute(\"frameBorder\",0),o.setAttribute(\"allowTransparency\",!0),i.forIn(t,function(t,e){o.setAttribute(t,e)}),i.forIn(e,function(t,e){o.style[t]=e}),o}},function(t,e,n){var r=n(1).JSON;t.exports={stringify:r.stringify||r.encode,parse:r.parse||r.decode}},function(t,e,n){var r=n(0),i=n(40);t.exports={closest:function t(e,n,o){var s;if(n)return o😮||n&&n.ownerDocument,s=r.isType(\"function\",e)?e:function(t){return function(e){return!!e.tagName&&i(e,t)}}(e),n===o?s(n)?n:void 0😒(n)?n:t(s,n.parentNode,o)}}},function(t,e,n){var r,i=n(5);function o(t){var e,n,o,s😮;for(r={},e😦t=t||i).getElementsByTagName(\"meta\");e[s];s++){if(n=e[s],/^twitter😕.test(n.getAttribute(\"name\")))o=n.getAttribute(\"name\").replace(/^twitter😕,\"\");else{if(!/^twitter😕.test(n.getAttribute(\"property\")))continue;o=n.getAttribute(\"property\").replace(/^twitter😕,\"\")}r[o]=n.getAttribute(\"content\")||n.getAttribute(\"value\")}}o(),t.exports={init😮,val:function(t){return r[t]}}},function(t,e,n){var r=n(5),i=n(30),o=n(19),s=n(0),a=n(41),u=n(9),c=n(3),d=n(31),l=a.version,f=u.get(\"clientEventEndpoint\")||\"https://syndication.twitter.com/i/jot\",h=1;function p(t){return s.aug({client:\"tfw\"},t||{})}function m(t,e,n){return e=e||{},s.aug({},e,{_category_:t,triggered_on:e.triggered_on||+new Date,dnt😮.enabled(n)})}t.exports={extractTermsFromDOM:function t(e,n){var r;return n=n||{},e&&e.nodeType===Node.ELEMENT_NODE?((r=e.getAttribute(\"data-scribe\"))&&r.split(\" \").forEach(function(t){var e=t.trim().split(\"😊,r=e[0],i=e[1];r&&i&&!n[r]&&(n[r]=i)}),t(e.parentNode,n)):n},clickEventElement:function(t){var e😛.closest(\"[data-expanded-url]\",t),n=e&&e.getAttribute(\"data-expanded-url\");return n&&c.isTwitterURL(n)?\"twitter_url\":\"url\"},flattenClientEventPayload:function(t,e){return s.aug({},e,{event_namespace:t})},formatGenericEventData:m,formatClientEventData:function(t,e,n){var i=t&&t.widget_origin||r.referrer;return(t=m(\"tfw_client_event\",t,i)).client_version=l,t.format_version=void 0!==n?n:1,e||(t.widget_origin=i),t},formatClientEventNamespace😛,formatTweetAssociation:function(t,e){var n={};return(e=e||{}).association_namespace😛(t),n[h]=e,n},noticeSeen:function(t){return\"notice\"===t.element&&\"seen\"===t.action},splitLogEntry:function(t){var e,n,r,i,o;return t.item_ids&&t.item_ids.length>1?(e=Math.floor(t.item_ids.length/2),n=t.item_ids.slice(0,e),r={},i=t.item_ids.slice(e),o={},n.forEach(function(e){r[e]=t.item_details[e]}),i.forEach(function(e){o[e]=t.item_details[e]}),[s.aug({},t,{item_ids:n,item_details:r}),s.aug({},t,{item_ids:i,item_details😮})])😦t]},stringify:function(t){var e,n=Array.prototype.toJSON;return delete Array.prototype.toJSON,e=i.stringify(t),n&&(Array.prototype.toJSON=n),e},AUDIENCE_ENDPOINT:\"https://syndication.twitter.com/i/jot/syndication\",CLIENT_EVENT_ENDPOINT:f,RUFOUS_REDIRECT:\"https://platform.twitter.com/jot.html\"}},function(t,e,n){var r=n(10),i={},o=-1,s={};function a(t){var e=t.getAttribute(\"data-twitter-event-id\");return e||(t.setAttribute(\"data-twitter-event-id\",++o),o)}function u(t,e,n){var r😮,i=t&&t.length||0;for(r😮;r<i;r++)if(t[r].call(e,n,e),n.ceaseImmediately)return!1}function c(t,e,n){for(var i=n||t.target||t.srcElement,o=r.list(i).map(function(t){return\".\"+t}).concat(i.tagName),s😮,a😮.length;s<a;s++)if(!1===u(e[o[s]],i,t))return;t.cease||i!==this&&c.call(this,t,e,i.parentElement||i.parentNode)}function d(t,e,n,r){function i(r){c.call(t,r,n[e])}!function(t,e,n,r){t.id&&(s[t.id]😒[t.id]||[],s[t.id].push({el:t,listener:e,type:n,rootId:r}))}(t,i,e,r),t.addEventListener(e,i,!1)}function l(t){t&&t.preventDefault?t.preventDefault():t.returnValue=!1}function f(t){t&&(t.cease=!0)&&t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}t.exports={stop:function(t){return f(t),l(t),!1},stopPropagation:f,stopImmediatePropagation:function(t){t&&(t.ceaseImmediately=!0,f(t),t.stopImmediatePropagation())},preventDefault:l,delegate:function(t,e,n,r){var o=a(t);i[o]=i[o]||{},i[o][e]||(i[o][e]={},d(t,e,i[o],o)),i[o][e][n]=i[o][e][n]||[],i[o][e][n].push(r)},simulate:function(t,e,n){var r=a(e),o=i[r]&&i[r];c.call(e,{target:n},o[t])},removeDelegatesForWidget:function(t){var e😒[t];e&&(e.forEach(function(t){t.el.removeEventListener(t.type,t.listener,!1),delete i[t.rootId]}),delete s[t])}}},function(t,e,n){var r=n(😎,i=n(76),o=n(0),s=i.getCanonicalURL()||r.href,a😒;t.exports={isFramed:function(){return s!==a},rootDocumentLocation:function(t){return t&&o.isType(\"string\",t)&&(s=t),s},currentDocumentLocation:function(){return a}}},function(t,e,n){var r=n(75),i=n(101),o=n(78),s=n(33),a=new(n(109))(function(t){var e,n,a;if(0!==t.length){if(u(t))return c(t);e=r(t,function(t){return s.noticeSeen(t.input.namespace)}),n=e.true,a=e.false,n&&n.length>0&&(n=n.slice(0,1),o.canFlushOneItem(n[0])||(n[0].input.data.message=\"\"),c(n)),a&&(u(a)?c:function(t){i.init(),t.forEach(function(t){var e=t.input.namespace,n=t.input.data,r=t.input.offsite,o=t.input.version;i.clientEvent(e,n,r,o)}),i.flush().then(function(){t.forEach(function(t){t.taskDoneDeferred.resolve()})},function(){t.forEach(function(t){t.taskDoneDeferred.reject()})})})(a)}});function u(t){return 1===t.length&&o.canFlushOneItem(t[0])}function c(t){t.forEach(function(t){var e=t.input.namespace,n=t.input.data,r=t.input.offsite,i=t.input.version;o.clientEvent(e,n,r,i),t.taskDoneDeferred.resolve()})}t.exports={scribe:function(t,e,n,r){return a.add({namespace:t,data:e,offsite:n,version:r})},pause:function(){a.pause()},resume:function(){a.resume()}}},function(t,e,n){var r=n(102),i=n(103),o=n(0);t.exports={couple:function(){return o.toRealArray(arguments)},build:function(t,e,n){var o=new t;return(e=i(r(e||[]))).forEach(function(t){t.call(null,o)}),o.build(n)}}},function(t,e,n){var r=n(105),i=n(0),o=n(39);function s(){this.Component=this.factory(),this._adviceArgs😦],this._lastArgs😦]}i.aug(s.prototype,{factory😮,build:function(t){var e=this;return this.Component,i.aug(this.Component.prototype.boundParams,t),this._adviceArgs.concat(this._lastArgs).forEach(function(t){(function(t,e,n){var r=this[e];if(!r)throw new Error(e+\" does not exist\");this[e]=t(r,n)}).apply(e.Component.prototype,t)}),delete this._lastArgs,delete this._adviceArgs,this.Component},params:function(t){var e=this.Component.prototype.paramConfigs;t=t||{},this.Component.prototype.paramConfigs=i.aug({},t,e)},define:function(t,e){if(t in this.Component.prototype)throw new Error(t+\" has previously been defined\");this.override(t,e)},defineStatic:function(t,e){this.Component[t]=e},override:function(t,e){this.Component.prototype[t]=e},defineProperty:function(t,e){if(t in this.Component.prototype)throw new Error(t+\" has previously been defined\");this.overrideProperty(t,e)},overrideProperty:function(t,e){var n=i.aug({configurable:!0},e);Object.defineProperty(this.Component.prototype,t,n)},before:function(t,e){this._adviceArgs.push([r.before,t,e])},after:function(t,e){this._adviceArgs.push([r.after,t,e])},around:function(t,e){this._adviceArgs.push([r.around,t,e])},last:function(t,e){this._lastArgs.push([r.after,t,e])}}),t.exports😒},function(t,e,n){var r=n(0);function i(){return!0}function o(t){return t}t.exports=function(){function t(t){var e=this;t=t||{},this.params=Object.keys(this.paramConfigs).reduce(function(n,s){var a😦],u=e.boundParams,c=e.paramConfigs[s],d=c.validate||i,l=c.transform||o;if(s in u&&a.push(u[s]),s in t&&a.push(t[s]),a=\"fallback\"in c?a.concat(c.fallback):a,n[s]=function(t,e,n){var i=null;return t.some(function(t){if(t=r.isType(\"function\",t)?t():t,e(t))return i=n(t),!0}),i}(a,d,l),c.required&&null==n[s])throw new Error(s+\" is a required parameter\");return n},{}),this.initialize()}return r.aug(t.prototype,{paramConfigs:{},boundParams:{},initialize:function(){}}),t}},function(t,e,n){var r=n(1).HTMLElement,i=r.prototype.matches||r.prototype.matchesSelector||r.prototype.webkitMatchesSelector||r.prototype.mozMatchesSelector||r.prototype.msMatchesSelector||r.prototype.oMatchesSelector;t.exports=function(t,e){if(i)return i.call(t,e)}},function(t){t.exports={version:\"7e980dd:1559715853415\"}},function(t,e,n){var r,i=n(10),o=n(5),s=n(1),a=n(32),u=n(50),c=n(4),d=n(22),l=\"csptest\";t.exports={inlineStyle:function(){var t=l+d.generate(),e😮.createElement(\"div\"),n😮.createElement(\"style\"),f=\".\"+t+\" { visibility: hidden; }\";return!!o.body&&(c.asBoolean(a.val(\"widgets:csp\"))&&(r=!1),void 0!==r?r😦e.style.display=\"none\",i.add(e,t),n.type=\"text/css\",n.appendChild(o.createTextNode(f)),o.body.appendChild(n),o.body.appendChild(e),r=\"hidden\"===s.getComputedStyle(e).visibility,u(e),u(n),r))}}},function(t,e,n){var r=n(1);t.exports=function(t,e,n){var i,o😮;return n=n||null,function s(){var a=n||this,u=arguments,c=+new Date;if(r.clearTimeout(i),c-o>e)return o=c,void t.apply(a,u);i=r.setTimeout(function(){s.apply(a,u)},e)}}},function(t,e){t.exports=function(t){var e=t.getBoundingClientRect();return{width:e.width,height:e.height}}},function(t,e,n){",
            "/*!",
            " * @overview es6-promise - a tiny implementation of Promises/A+.",
            " * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)",
            " * @license   Licensed under MIT license",
            " *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE",
            " * @version   v4.2.5+7f2b526d",
            " */var r;r=function(){\"use strict\";function t(t){return\"function\"==typeof t}var e=Array.isArray?Array.isArray:function(t){return\"[object Array]\"===Object.prototype.toString.call(t)},n😮,r=void 0,i=void 0,o=function(t,e){f[n]=t,f[n+1]=e,2===(n+=2)&&(i?i(h):w())},s=\"undefined\"!=typeof window?window:void 0,a😒||{},u=a.MutationObserver||a.WebKitMutationObserver,c=\"undefined\"==typeof self&&\"undefined\"!=typeof process&&\"[object process]\"==={}.toString.call(process),d=\"undefined\"!=typeof Uint8ClampedArray&&\"undefined\"!=typeof importScripts&&\"undefined\"!=typeof MessageChannel;function l(){var t=setTimeout;return function(){return t(h,1)}}var f=new Array(1e3);function h(){for(var t😮;t<n;t+=2)(0,f[t])(f[t+1]),f[t]=void 0,f[t+1]=void 0;n😮}var p,m,v,g,w=void 0;function y(t,e){var n=this,r=new this.constructor(E);void 0===r[_]&&k(r);var i=n._state;if(i){var s=arguments[i-1];o(function(){return O(i,r,s,n._result)})}else I(n,r,t,e);return r}function b(t){if(t&&\"object\"==typeof t&&t.constructor===this)return t;var e=new this(E);return N(e,t),e}c?w=function(){return process.nextTick(h)}:u?(m😮,v=new u(h),g=document.createTextNode(\"\"),v.observe(g,{characterData:!0}),w=function(){g.data=m=++m%2})😛?((p=new MessageChannel).port1.onmessage=h,w=function(){return p.port2.postMessage(0)}):w=void 0===s?function(){try{var t=Function(\"return this\")().require(\"vertx\");return void 0!==(r=t.runOnLoop||t.runOnContext)?function(){r(h)}:l()}catch(t){return l()}}():l();var _=Math.random().toString(36).substring(2);function E(){}var x=void 0,A=1,T=2,S={error:null};function R(t){try{return t.then}catch(t){return S.error=t,S}}function C(e,n,r){n.constructor===e.constructor&&r===y&&n.constructor.resolve===b?function(t,e){e._state===A?j(t,e._result):e._state===T?L(t,e._result):I(e,void 0,function(e){return N(t,e)},function(e){return L(t,e)})}(e,n):r===S?(L(e,S.error),S.error=null):void 0===r?j(e,n):t(r)?function(t,e,n){o(function(t){var r=!1,i=function(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}(n,e,function(n){r||(r=!0,e!==n?N(t,n):j(t,n))},function(e){r||(r=!0,L(t,e))},t._label);!r&&i&&(r=!0,L(t,i))},t)}(e,n,r):j(e,n)}function N(t,e){var n,r;t===e?L(t,new TypeError(\"You cannot resolve a promise with itself\"))😦r=typeof(n=e),null===n||\"object\"!==r&&\"function\"!==r?j(t,e):C(t,e,R(e)))}function P(t){t._onerror&&t._onerror(t._result),D(t)}function j(t,e){t._state===x&&(t._result=e,t._state=A,0!==t._subscribers.length&&o(D,t))}function L(t,e){t._state===x&&(t._state=T,t._result=e,o(P,t))}function I(t,e,n,r){var i=t._subscribers,s=i.length;t._onerror=null,i[s]=e,i[s+A]=n,i[s+T]=r,0===s&&t._state&&o(D,t)}function D(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,i=void 0,o=t._result,s😮;s<e.length;s+👨)r=e[s],i=e[s+n],r?O(n,r,i,o):i(o);t._subscribers.length😮}}function O(e,n,r,i){var o=t(r),s=void 0,a=void 0,u=void 0,c=void 0;if(o){if((s=function(t,e){try{return t(e)}catch(t){return S.error=t,S}}(r,i))===S?(c=!0,a😒.error,s.error=null):u=!0,n===s)return void L(n,new TypeError(\"A promises callback cannot return that same promise.\"))}else s=i,u=!0;n._state!==x||(o&&u?N(n,s):c?L(n,a):e===A?j(n,s):e===T&&L(n,s))}var z😮;function k(t){t[_]😒++,t._state=void 0,t._result=void 0,t._subscribers😦]}var M=function(){function t(t,n){this._instanceConstructor=t,this.promise=new t(E),this.promise[_]||k(this.promise),e(n)?(this.length=n.length,this._remaining=n.length,this._result=new Array(this.length),0===this.length?j(this.promise,this._result)😦this.length=this.length||0,this._enumerate(n),0===this._remaining&&j(this.promise,this._result))):L(this.promise,new Error(\"Array Methods must be provided an Array\"))}return t.prototype._enumerate=function(t){for(var e😮;this._state===x&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===b){var i=R(t);if(i===y&&t._state!==😆this._settledAt(t._state,e,t._result);else if(\"function\"!=typeof i)this._remaining--,this._result[e]=t;else if(n===U){var o=new n(E);C(o,t,i),this._willSettleAt(o,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},t.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===x&&(this._remaining--,t===T?L(r,n):this._result[e]=n),0===this._remaining&&j(r,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;I(t,void 0,function(t){return n._settledAt(A,e,t)},function(t){return n._settledAt(T,e,t)})},t}(),U=function(){function e(t){this[_]😒++,this._result=this._state=void 0,this._subscribers😦],E!==t&&(\"function\"!=typeof t&&function(){throw new TypeError(\"You must pass a resolver function as the first argument to the promise constructor\")}(),this instanceof e?function(t,e){try{e(function(e){N(t,e)},function(e){L(t,e)})}catch(e){L(t,e)}}(this,t):function(){throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\")}())}return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.finally=function(e){var n=this.constructor;return t(e)?this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})}):this.then(e,e)},e}();return U.prototype.then=y,U.all=function(t){return new M(this,t).promise},U.race=function(t){var n=this;return e(t)?new n(function(e,r){for(var i=t.length,o😮;o<i;o++)n.resolve(t[o]).then(e,r)}):new n(function(t,e){return e(new TypeError(\"You must pass an array to race.\"))})},U.resolve=b,U.reject=function(t){var e=new this(E);return L(e,t),e},U._setScheduler=function(t){i=t},U._setAsap=function(t){o=t},U._asap😮,U.polyfill=function(){var t=void 0;if(\"undefined\"!=typeof global)t=global;else if(\"undefined\"!=typeof self)t=self;else try{t=Function(\"return this\")()}catch(t){throw new Error(\"polyfill failed because global object is unavailable in this environment\")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if(\"[object Promise]\"===n&&!e.cast)return}t.Promise=U},U.Promise=U,U},t.exports=r()},function(t,e,n){var r=n(47);t.exports=new r(\"twttr\")},function(t,e,n){var r=n(1),i=n(0);function o(t){return i.isType(\"string\",t)?t.split(\".\"):i.isType(\"array\",t)?t😦]}function s(t,e){(e=e||r)[t]=e[t]||{},Object.defineProperty(this,\"base\",{value:e[t]}),Object.defineProperty(this,\"name\",{value:t})}i.aug(s.prototype,{get:function(t){return o(t).reduce(function(t,e){if(i.isObject(t))return t[e]},this.base)},set:function(t,e,n){var r😮(t),s=function(t,e){var n😮(e).slice(0,-1);return n.reduce(function(t,e,r){if(t[e]=t[e]||{},!i.isObject(t[e]))throw new Error(n.slice(0,r+1).join(\".\")+\" is already defined with a value.\");return t[e]},t)}(this.base,t),a=r.slice(-1);return n&&a in s?s[a]😒[a]=e},init:function(t,e){return this.set(t,e,!0)},unset:function(t){var e😮(t),n=this.get(e.slice(0,-1));n&&delete n[e.slice(-1)]},aug:function(t){var e=this.get(t),n=i.toRealArray(arguments).slice(1);if(e=void 0!==e?e:{},n.unshift(e),!n.every(i.isObject))throw new Error(\"Cannot augment non-object.\");return this.set(t,i.aug.apply(null,n))},call:function(t){var e=this.get(t),n=i.toRealArray(arguments).slice(1);if(!i.isType(\"function\",e))throw new Error(\"Function \"+t+\"does not exist.\");return e.apply(null,n)},fullPath:function(t){var e😮(t);return e.unshift(this.name),e.join(\".\")}}),t.exports😒},function(t,e,n){var r=n(0),i=n(7),o={bind:function(t,e){return this._handlers=this._handlers||{},this._handlers[t]=this._handlers[t]||[],this._handlers[t].push(e)},unbind:function(t,e){var n;this._handlers&&this._handlers[t]&&(e?(n=this._handlers[t].indexOf(e))>😮&&this._handlers[t].splice(n,1):this._handlers[t👿])},trigger:function(t,e){var n=this._handlers&&this._handlers[t];(e=e||{}).type=t,n&&n.forEach(function(t){r.async(i(t,this,e))})}};t.exports={Emitter😮,makeEmitter:function(){return r.aug(function(){},o)}}},function(t,e,n){var r=n(98),i=n(74),o=n(6),s=n(21),a=n(7),u=n(0),c=new i(function(t){var e=function(t){return t.reduce(function(t,e){return t[e.className]=t[e.className]||[],t[e.className].push(e),t},{})}(t.map(r.fromRawTask));u.forIn(e,function(t,e){s.allSettled(e.map(function(t){return t.initialize()})).then(function(){e.forEach(function(t){o.all([t.hydrate(),t.insertIntoDom()]).then(a(t.render,t)).then(a(t.success,t),a(t.fail,t))})})})});t.exports={addWidget:function(t){return c.add(t)}}},function(t,e,n){var r=n(17);t.exports=function(t){return r.write(function(){t&&t.parentNode&&t.parentNode.removeChild(t)})}},function(t,e,n){n(12),t.exports={log:function(t,e){}}},function(t,e,n){var r=n(1);function i(t){return(t=t||r).getSelection&&t.getSelection()}t.exports={getSelection:i,getSelectedText:function(t){var e=i(t);return e?e.toString():\"\"}}},function(t,e,n){var r=n(5),i=n(1),o=n(2),s=2e4;t.exports=function(t){var e=new o,n=r.createElement(\"img\");return n.onload=n.onerror=function(){i.setTimeout(e.resolve,50)},n.src=t,i.setTimeout(e.reject,s),e.promise}},function(t,e,n){var r=n(108);t.exports=function(t){t.define(\"createElement\",r),t.define(\"createFragment\",r),t.define(\"htmlToElement\",r),t.define(\"hasSelectedText\",r),t.define(\"addRootClass\",r),t.define(\"removeRootClass\",r),t.define(\"hasRootClass\",r),t.define(\"prependStyleSheet\",r),t.define(\"appendStyleSheet\",r),t.define(\"prependCss\",r),t.define(\"appendCss\",r),t.define(\"makeVisible\",r),t.define(\"injectWidgetEl\",r),t.define(\"matchHeightToContent\",r),t.define(\"matchWidthToContent\",r)}},function(t,e){t.exports=function(t){var e,n=!1;return function(){return n?e😦n=!0,e=t.apply(this,arguments))}}},function(t,e,n){var r=n(15),i=n(117),o=n(57);t.exports=function(t,e,n){return new r(i,o,\"twitter-dm-button\",t,e,n)}},function(t,e,n){var r=n(58),i=n(24);t.exports=r.isSupported()?r:i},function(t,e,n){var r=n(25),i=n(118);t.exports=r.build([i])},function(t,e,n){var r=n(15),i=n(121),o=n(60);t.exports=function(t,e,n){return new r(i,o,\"twitter-follow-button\",t,e,n)}},function(t,e,n){var r=n(25),i=n(122);t.exports=r.build([i])},function(t,e,n){var r=n(15),i=n(129),o=n(24);t.exports=function(t,e,n){return new r(i,o,\"twitter-moment\",t,e,n)}},function(t,e,n){var r=n(15),i=n(131),o=n(24);t.exports=function(t,e,n){return new r(i,o,\"periscope-on-air\",t,e,n)}},function(t,e,n){var r=n(80),i=n(133),o=n(137),s=n(139),a=n(141),u=n(143),c={collection:i,event😮,likes😒,list:a,profile:u,url:l},d😦u,s,i,a,o];function l(t){return r(d,function(e){try{return new e(t)}catch(t){}})}t.exports=function(t){return t?function(t){var e,n;return e😦t.sourceType+\"\").toLowerCase(),(n=c[e])?new n(t):null}(t)||l(t):null}},function(t,e,n){var r=n(15),i=n(145),o=n(24);t.exports=function(t,e,n){return new r(i,o,\"twitter-timeline\",t,e,n)}},function(t,e,n){var r=n(15),i=n(147),o=n(57);t.exports=function(t,e,n){return new r(i,o,\"twitter-tweet\",t,e,n)}},function(t,e,n){var r=n(15),i=n(149),o=n(60);t.exports=function(t,e,n){var s=t&&t.type||\"share\";return new r(i,o,\"hashtag\"==s?\"twitter-hashtag-button\":\"mention\"==s?\"twitter-mention-button\":\"twitter-share-button\",t,e,n)}},function(t,e,n){var r=n(36),i=n(35),o=n(0);t.exports=function(t){var e={widget_origin:i.rootDocumentLocation(),widget_frame:i.isFramed()?i.currentDocumentLocation():null,duration_ms:t.duration,item_ids:t.widgetIds||[]},n😮.aug(t.namespace,{page:\"page\",component:\"performance\"});r.scribe(n,e)}},function(t,e,n){var r=n(0),i=n(134),o😦\"ar\",\"fa\",\"he\",\"ur\"];t.exports={isRtlLang:function(t){return t=String(t).toLowerCase(),r.contains(o,t)},matchLanguage:function(t){return t😦t😦t||\"\").toLowerCase()).replace(\"_\",\"-\"),i(t)?t😦t=t.replace(/-.*/,\"\"),i(t)?t:\"en\")}}},function(t,e,n){var r=n(110),i=n(113);function o(t){return r.settingsLoaded().then(function(e){return e[t]})}function s(){return o(\"experiments\")}t.exports={shouldObtainCookieConsent:function(){return o(\"shouldObtainCookieConsent\")},getExperiments😒,getExperiment:function(t){return s().then(function(e){if(!e[t])throw new Error(\"Experiment not found\");return e[t]})},getActiveExperimentDataString:function(){return s().then(function(t){var e=Object.keys(t).reduce(function(e,n){var r;return t[n].version&&(r=n.split(\"_\").slice(-1)[0],e.push(r+\";\"+t[n].bucket)),e},[]);return i(e.join(\",\"))})},getExperimentKeys:function(){return s().then(function(t){return Object.keys(t)})},load:function(){r.load()}}},function(t){t.exports={tweetButtonHtmlPath:\"/widgets/tweet_button.d753e00c3e838c1b2558149bd3f6ecb8.{{lang}}.html\",followButtonHtmlPath:\"/widgets/follow_button.d753e00c3e838c1b2558149bd3f6ecb8.{{lang}}.html\",hubHtmlPath:\"/widgets/hub.html\",widgetIframeHtmlPath:\"/widgets/widget_iframe.d753e00c3e838c1b2558149bd3f6ecb8.html\",resourceBaseUrl:\"https://platform.twitter.com\"}},function(t,e,n){var r=n(3),i=n(95),o=n(23),s=n(11),a={favorite😦\"favorite\",\"like\"],follow😦\"follow\"],like😦\"favorite\",\"like\"],retweet😦\"retweet\"],tweet😦\"tweet\"]};function u(t){this.srcEl😦],this.element=t}u.open=function(t,e,n){var u😦r.intentType(t)||\"\").toLowerCase();r.isTwitterURL(t)&&(function(t,e){i.open(t,{},e)}(t,n),e&&o.trigger(\"click\",{target:e,region:\"intent\",type:\"click\",data:{}}),e&&a[u]&&a[u].forEach(function(n){o.trigger(n,{target:e,region:\"intent\",type:n,data:function(t,e){var n😒.decodeURL(e);switch(t){case\"favorite\":case\"like\":return{tweet_id:n.tweet_id};case\"follow\":return{screen_name:n.screen_name,user_id:n.user_id};case\"retweet\":return{source_tweet_id:n.tweet_id};default:return{}}}(u,t)})}))},t.exports=u},function(t,e){t.exports={getTimezoneOffset:function(){var t😦new Date).toString().match(/(GMT[+-]?\\d+)/);return t&&t[0]||\"GMT\"}}},function(t,e,n){var r=n(5),i=n(9),o=n(2),s=n(0),a=n(11),u=\"cb\",c😮;t.exports={fetch:function(t,e,n,d){var l,f,h;return d=function(t){if(t)return t.replace(/[^\\w$]/g,\"_\")}(d||u+c++),l=i.fullPath([\"callbacks\",d]),f=r.createElement(\"script\"),h=new o,e😒.aug({},e,{callback:l,suppress_response_codes:!0}),i.set([\"callbacks\",d],function(t){var e;t😦e=n(t||!1)).resp,e.success?h.resolve(t):h.reject(t),f.onload=f.onreadystatechange=null,f.parentNode&&f.parentNode.removeChild(f),i.unset([\"callbacks\",d])}),f.onerror=function(){h.reject(new Error(\"failed to fetch \"+f.src))},f.src=a.url(t,e),f.async=\"async\",r.body.appendChild(f),h.promise}}},function(t,e,n){var r=n(2),i=n(100),o=n(7);function s(t){this._inputsQueue😦],this._task=t,this._hasFlushBeenScheduled=!1}s.prototype.add=function(t){var e=new r;return this._inputsQueue.push({input:t,taskDoneDeferred:e}),this._hasFlushBeenScheduled||(this._hasFlushBeenScheduled=!0,i(o(this._flush,this))),e.promise},s.prototype._flush=function(){try{this._task.call(null,this._inputsQueue)}catch(t){this._inputsQueue.forEach(function(e){e.taskDoneDeferred.reject(t)})}this._inputsQueue😦],this._hasFlushBeenScheduled=!1},t.exports😒},function(t,e){t.exports=function(t,e){return t.reduce(function(t,n){var r=e(n);return t[r]=t[r]||[],t[r].push(n),t},{})}},function(t,e,n){var r=n(5),i=n(😎,o=n(3);function s(t,e){var n,r;return e=e||i,/^https?😕/\\//.test(t)?t😕^\\/\\//.test(t)?e.protocol+t😦n=e.host+(e.port.length?\":\"+e.port:\"\"),0!==t.indexOf(\"/\")&&((r=e.pathname.split(\"/\")).pop(),r.push(t),t=\"/\"+r.join(\"/\")),[e.protocol,\"//\",n,t].join(\"\"))}t.exports={absolutize😒,getCanonicalURL:function(){for(var t,e=r.getElementsByTagName(\"link\"),n😮;e[n];n++)if(\"canonical\"==(t=e[n]).rel)return s(t.href)},getScreenNameFromPage:function(){for(var t,e,n,i😦r.getElementsByTagName(\"a\"),r.getElementsByTagName(\"link\")],s😮,a😮,u😕\\bme\\b/;t=i[s];s++)for(a😮;e=t[a];a++)if(u.test(e.rel)&&(n😮.screenName(e.href)))return n}}},function(t,e,n){var r=n(😎,i😕^[^#?]*\\.(gov|mil)(😕d+)?([#?].*)?$/i,o={};function s(t){return t in o?o[t]😮[t]=i.test(t)}t.exports={isUrlSensitive😒,isHostPageSensitive:function(){return s(r.host)}}},function(t,e,n){var r=n(19),i=n(51),o=n(11),s=n(33),a=n(0),u=n(9).get(\"scribeCallback\"),c=2083,d😦],l😮.url(s.CLIENT_EVENT_ENDPOINT,{dnt😮,l:\"\"}),f=encodeURIComponent(l).length;function h(t,e,n,r){var i=!a.isObject(t),o=!!e&&!a.isObject(e);i||o||(u&&u(arguments),p(s.formatClientEventNamespace(t),s.formatClientEventData(e,n,r),s.CLIENT_EVENT_ENDPOINT))}function p(t,e,n){var r,u;n&&a.isObject(t)&&a.isObject(e)&&(i.log(t,e),r😒.flattenClientEventPayload(t,e),u={l😒.stringify(r)},s.noticeSeen(t)&&(u.notice_seen=!0),r.dnt&&(u.dnt=1),w(o.url(n,u)))}function m(t,e,n,r){var i=!a.isObject(t),o=!!e&&!a.isObject(e);if(!i&&!o)return v(s.flattenClientEventPayload(s.formatClientEventNamespace(t),s.formatClientEventData(e,n,r)))}function v(t){return d.push(t),d}function g(t){return encodeURIComponent(t).length+3}function w(t){return(new Image).src=t}t.exports={canFlushOneItem:function(t){var e=g(s.stringify(t));return f+e<c},_enqueueRawObject:v,scribe😛,clientEvent:h,clientEvent2:function(t,e,n){return h(t,e,n,2)},enqueueClientEvent:m,flushClientEvents:function(){var t;return d.length>1&&m({page:\"widgets_js\",component:\"scribe_pixel\",action:\"batch_log\"},{}),t😛,d😦],t.reduce(function(e,n,r){var i=e.length,o=i&&e[i-1];return r+1==t.length&&n.event_namespace&&\"batch_log\"==n.event_namespace.action&&(n.message😦\"entries:\"+r,\"requests:\"+i].join(\"/\")),function t(e){return Array.isArray(e)||(e😦e]),e.reduce(function(e,n){var r,i😒.stringify(n),o=g(i);return f+o<c?e=e.concat(i)😦r😒.splitLogEntry(n)).length>1&&(e=e.concat(t(r))),e},[])}(n).forEach(function(t){var n=g(t);(!o||o.urlLength+n>c)&&(o={urlLength:f,items😦]},e.push(o)),o.urlLength+=n,o.items.push(t)}),e},[]).map(function(t){var e={l:t.items};return r.enabled()&&(e.dnt=1),w(o.url(s.CLIENT_EVENT_ENDPOINT,e))})},interaction:function(t,e,n,r){var i😒.extractTermsFromDOM(t.target||t.srcElement);i.action=r||\"click\",h(i,e,n)}}},function(t,e,n){var r=n(0),i=n(40);t.exports=function(t,e){return i(t,e)?[t]:r.toRealArray(t.querySelectorAll(e))}},function(t,e){t.exports=function(t,e,n){for(var r,i😮;i<t.length;i++)if(r=e.call(n,t[i],i,t))return r}},function(t,e){t.exports=function(){return Math.floor(+new Date/9e5)}},function(t,e,n){var r=n(12);t.exports=function(t){var e,n;return e=t.headers&&t.headers.status,!(n=t&&!t.error&&200===e)&&t.headers&&t.headers.message&&r.publicError(t.headers.message),{success:n,resp:t}}},function(t,e,n){var r,i=n(28),o😮;function s(){r&&r.length===o&&(i.emitter.trigger(i.ALL_WIDGETS_AND_IMAGES_LOADED,r),r=null)}i.emitter.bind(i.ALL_WIDGETS_RENDER_END,function(t){r=t.widgets,s()}),t.exports={reportImagesLoadForAWidget:function(){o++,s()}}},,,,,,,,function(t,e,n){var r,i=n(2),o=n(5),s=n(93),a=n(46),u=n(9),c=n(94),d=n(23),l=n(97),f=n(150),h=n(158),p=n(159),m=n(28);n(160),m.emitter.trigger(m.START),u.set(\"widgets.init\",!0),a.set(\"init\",!0),p(),r=new i,s.exposeReadyPromise(r.promise,a.base,\"_e\"),a.set(\"widgets\",f),a.set(\"widgets.load\",l.load),a.set(\"events\",d),h(function(){r.resolve(a.base),c.attachTo(o),l.loadPage()})},function(t,e){t.exports=navigator},function(t,e,n){var r=n(7);t.exports={exposeReadyPromise:function(t,e,n){e.ready=r(t.then,t),n&&Array.isArray(e[n])&&(e[n].forEach(r(t.then,t)),delete e[n])}}},function(t,e,n){var r=n(😎,i=n(34),o=n(31),s=n(71),a=n(3);function u(t){var e,n,u;t.altKey||t.metaKey||t.shiftKey||(e😮.closest(function(t){return\"A\"===t.tagName||\"AREA\"===t.tagName},t.target))&&a.isIntentURL(e.href)&&(n😦n😦n😦u=e.href,\"original_referer=\"+r.href].join(-1==u.indexOf(\"?\")?\"?\":\"&\")).replace(/^http[😃/,\"https:\")).replace(/^\\/\\//,\"https://\"),s.open(n,e),i.preventDefault(t))}t.exports={attachTo:function(t){t.addEventListener(\"click\",u,!1)}}},function(t,e,n){var r,i=n(1),o=n(96),s=n(34),a=n(31),u=n(20),c=n(3),d=n(22),l=n(0),f=\"intent_\",h=i.screen.width,p=i.screen.height;function m(t,e){function n(t){return Math.round(t/2)}return t>e?{coordinate😮,size:e}:{coordinate:n(e)-n(t),size:t}}function v(t,e,n){var i,o;e=r.parse(e),n=n||{},i=m(e.width,n.width||h),e.left=i.coordinate,e.width=i.size,o=m(e.height,n.height||p),e.top😮.coordinate,e.height😮.size,this.win=t,this.features=function(t){var e😦];return l.forIn(t,function(t,n){e.push(t+\"=\"+n)}),e.join(\",\")}(e)}r😦new o).defaults({width:550,height:520,personalbar:\"0\",toolbar:\"0\",location:\"1\",scrollbars:\"1\",resizable:\"1\"}),v.prototype.open=function(t,e){var n=e&&\"click\"==e.type&&a.closest(\"a\",e.target),r=e&&(e.altKey||e.metaKey||e.shiftKey),i=n&&(u.ios()||u.android());if(c.isTwitterURL(t))return r||i?this😦this.name=f+d.generate(),this.popup=this.win.open(t,this.name,this.features),e&&s.preventDefault(e),this)},v.open=function(t,e,n){return new v(i,e).open(t,n)},t.exports=v},function(t,e,n){var r=n(4),i=n(0);function o(){this.assertions😦],this._defaults={}}o.prototype.assert=function(t,e){return this.assertions.push({fn:t,msg:e||\"assertion failed\"}),this},o.prototype.defaults=function(t){return this._defaults=t||this._defaults,this},o.prototype.require=function(t){var e=this;return(t=Array.isArray(t)?t:i.toRealArray(arguments)).forEach(function(t){e.assert(function(t){return function(e){return r.hasValue(e[t])}}(t),\"required: \"+t)}),this},o.prototype.parse=function(t){var e,n;if(e=i.aug({},this._defaults,t||{}),(n=this.assertions.reduce(function(t,n){return n.fn(e)||t.push(n.msg),t},[])).length>0)throw new Error(n.join(\"\\n\"));return e},t.exports😮},function(t,e,n){var r=n(5),i=n(6),o=n(21),s=n(49),a=n(32),u=n(9),c=n(36),d=n(23),l=n(4),f=n(0),h=n(69),p=n(114),m=n(28);function v(){var t=a.val(\"widgets:autoload\")||!0;return!l.isFalseValue(t)&&(l.isTruthValue(t)?r.body:r.querySelectorAll(t))}function g(t){var e,n;return t😦t=t||r.body).length?f.toRealArray(t)😦t],c.pause(),n=t.reduce(function(t,e){return t.concat(p.reduce(function(t,n){return t.concat(n(e))},[]))},[]),m.emitter.trigger(m.ALL_WIDGETS_RENDER_START,{widgets:n}),e😮.allResolved(n.map(function(t){return s.addWidget(t)})).then(function(t){d.trigger(\"loaded\",{widgets:t}),t&&t.length&&m.emitter.trigger(m.ALL_WIDGETS_RENDER_END,{widgets:t})}),o.always(e,function(){c.resume()}),e}t.exports={load:g,loadPage:function(){var t=v();return h.load(),!1===t?i.resolve()😦u.set(\"widgets.loaded\",!0),g(t))},_getPageLoadTarget:v}},function(t,e,n){var r=n(10),i=n(17),o=n(23),s=n(50),a=n(6),u=n(21);function c(t,e){this._widget=null,this._sandbox=null,this._hydrated=!1,this._insertedIntoDom=!1,this._Sandbox=t.Sandbox,this._factory=t.factory,this._widgetParams=t.parameters,this._resolve=e,this._className=t.className,this._renderedClassName=t.className+\"-rendered\",this._errorClassName=t.className+\"-error\",this._srcEl=t.srcEl,this._targetGlobal=function(t){return(t.srcEl||t.targetEl).ownerDocument.defaultView}(t),this._insertionStrategy=function(e){var n=t.srcEl,r=t.targetEl;n?r.insertBefore(e,n):r.appendChild(e)}}c.fromRawTask=function(t){return new c(t.input,t.taskDoneDeferred.resolve)},c.prototype.initialize=function(){var t=this,e=new this._Sandbox(this._targetGlobal);return this._factory(this._widgetParams,e).then(function(n){return t._widget=n,t._sandbox=e,n})},c.prototype.insertIntoDom=function(){var t=this;return this._widget?this._sandbox.insert(this._widget.id,{class😦this._className,this._renderedClassName].join(\" \")},null,this._insertionStrategy).then(function(){t._insertedIntoDom=!0}):a.reject(new Error(\"cannot insert widget into DOM before it is initialized\"))},c.prototype.hydrate=function(){var t=this;return this._widget?this._widget.hydrate().then(function(){t._hydrated=!0}):a.reject(new Error(\"cannot hydrate widget before it is initialized\"))},c.prototype.render=function(){var t=this;function e(e){return s(t._sandbox.sandboxEl).then(function(){return a.reject(e)})}return this._hydrated?this._insertedIntoDom?t._widget.render(t._sandbox).then(function(){return t._sandbox.onResize(function(){return t._widget.resize().then(function(){o.trigger(\"resize\",{target:t._sandbox.sandboxEl})})}),t._widget.show()}).then(function(){return s(t._srcEl).then(function(){return t._sandbox.sandboxEl})},e):e(new Error(\"cannot render widget before DOM insertion\")):e(new Error(\"cannot render widget before hydration\"))},c.prototype.fail=function(){var t=this;return this._srcEl?u.always(i.write(function(){r.add(t._srcEl,t._errorClassName)}),function(){o.trigger(\"rendered\",{target:t._srcEl}),t._resolve(t._srcEl)})😦t._resolve(),a.resolve())},c.prototype.success=function(){o.trigger(\"rendered\",{target:this._sandbox.sandboxEl}),this._resolve(this._sandbox.sandboxEl)},t.exports=c},function(t,e,n){var r;!function(){\"use strict\";var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)};function o(){this.frames😦],this.lastId😮,this.raf=i,this.batch={hash:{},read😦],write😦],mode:null}}o.prototype.read=function(t,e){var n=this.add(\"read\",t,e),r=n.id;return this.batch.read.push(n.id),\"reading\"===this.batch.mode||this.batch.scheduled?r😦this.scheduleBatch(),r)},o.prototype.write=function(t,e){var n=this.add(\"write\",t,e),r=this.batch.mode,i=n.id;return this.batch.write.push(n.id),\"writing\"===r||\"reading\"===r||this.batch.scheduled?i😦this.scheduleBatch(),i)},o.prototype.defer=function(t,e,n){\"function\"==typeof t&&(n=e,e=t,t=1);var r=this,i=t-1;return this.schedule(i,function(){r.run({fn:e,ctx:n})})},o.prototype.clear=function(t){if(\"function\"==typeof t)return this.clearFrame(t);t=Number(t);var e=this.batch.hash[t];if(e){var n=this.batch[e.type],r=n.indexOf(t);delete this.batch.hash[t],~r&&n.splice(r,1)}},o.prototype.clearFrame=function(t){var e=this.frames.indexOf(t);~e&&this.frames.splice(e,1)},o.prototype.scheduleBatch=function(){var t=this;this.schedule(0,function(){t.batch.scheduled=!1,t.runBatch()}),this.batch.scheduled=!0},o.prototype.uniqueId=function(){return++this.lastId},o.prototype.flush=function(t){for(var e;e=t.shift()😉this.run(this.batch.hash[e])},o.prototype.runBatch=function(){try{this.batch.mode=\"reading\",this.flush(this.batch.read),this.batch.mode=\"writing\",this.flush(this.batch.write),this.batch.mode=null}catch(t){throw this.runBatch(),t}},o.prototype.add=function(t,e,n){var r=this.uniqueId();return this.batch.hash[r]={id:r,fn:e,ctx:n,type:t}},o.prototype.run=function(t){var e=t.ctx||this,n=t.fn;if(delete this.batch.hash[t.id],!this.onError)return n.call(e);try{n.call(e)}catch(t){this.onError(t)}},o.prototype.loop=function(){var t,e=this,n=this.raf,r=!1;function i(){var t=e.frames.shift();e.frames.length?n(i):e.looping=!1,t&&t()}this.looping||(t=setTimeout(function(){r=!0,i()},500),n(function(){r||(clearTimeout(t),i())}),this.looping=!0)},o.prototype.schedule=function(t,e){return this.frames[t]?this.schedule(t+1,e)😦this.loop(),this.frames[t]=e)};var s=new o;void 0!==t&&t.exports?t.exports😒:void 0===(r=function(){return s}.call(e,n,e,t))||(t.exports=r)}()},function(t,e,n){var r=n(45).Promise;t.exports=r._asap},function(t,e,n){var r,i,o,s=n(5),a=n(1),u=n(29),c=n(19),d=n(2),l=n(6),f=n(51),h=n(33),p=n(0),m=n(24),v=n(9).get(\"scribeCallback\"),g=Math.floor(1e3*Math.random())+\"_\",w=\"rufous-frame-\"+g+\"-\",y=\"rufous-form-\"+g+\"-\",b😮,_=!1,E=new d;function x(){var t😮.createElement(\"form\"),e😮.createElement(\"input\"),n😮.createElement(\"input\");return b++,t.action=h.CLIENT_EVENT_ENDPOINT,t.method=\"POST\",t.target=w+b,t.id=y+b,e.type=\"hidden\",e.name=\"dnt\",e.value=c.enabled(),n.type=\"hidden\",n.name=\"tfw_redirect\",n.value=h.RUFOUS_REDIRECT,t.appendChild(e),t.appendChild(n),t}function A(){var t=w+b;return u({id:t,name:t,width😮,height😮,border😮},{display:\"none\"},o.doc)}t.exports={clientEvent:function(t,e,n,i){(function(t,e){var n=!p.isObject(t),r=!!e&&!p.isObject(e),i=n||r;return i})(t,e)||(v&&v(arguments),E.promise.then(function(){!function(t,e){var n,i,s😜.isObject(t)&&p.isObject(e)&&(f.log(t,e),s=h.flattenClientEventPayload(t,e),(n=r.firstChild).value=+(+n.value||s.dnt||0),(i😮.createElement(\"input\")).type=\"hidden\",i.name=\"l\",i.value=h.stringify(s),r.appendChild(i))}(h.formatClientEventNamespace(t),h.formatClientEventData(e,n,i))}))},flush:function(){return E.promise.then(function(){var t;return r.children.length<=2?l.reject()😦t=l.all([o.doc.body.appendChild(r),o.doc.body.appendChild(i)]).then(function(t){var e=t[0],n=t[1];return n.addEventListener(\"load\",function(){!function(t,e){return function(){var n=t.parentNode;n&&(n.removeChild(t),n.removeChild(e))}}(e,n)()}),e.submit(),t}),r=x(),i=A(),t)})},init:function(){return _?E.promise:((o=new m(a)).insert(\"rufous-sandbox\",null,{display:\"none\"},function(t){s.body.appendChild(t)}).then(function(){o.setTitle(\"Twitter analytics iframe\"),r=x(),i=A(),E.resolve([r,i])}),_=!0,E.promise)}}},function(t,e,n){var r=n(0);t.exports=function t(e){var n😦];return e.forEach(function(e){var i=r.isType(\"array\",e)?t(e)😦e];n=n.concat(i)}),n}},function(t,e){t.exports=function(t){return t.filter(function(e,n){return t.indexOf(e)===n})}},function(t,e,n){var r=n(38),i=n(0),o=n(106);function s(){r.apply(this,arguments)}s.prototype=Object.create(r.prototype),i.aug(s.prototype,{factory😮}),t.exports😒},function(t,e,n){var r=n(21),i=n(0),o=n(7);t.exports={before:function(t,e){return function(){var n,i=this,o=arguments;return n=e.apply(this,arguments),r.isPromise(n)?n.then(function(){return t.apply(i,o)}):t.apply(this,arguments)}},after:function(t,e){return function(){var n,i=this,o=arguments;function s(t,e){return r.isPromise(e)?e.then(function(){return t}):t}return n=t.apply(this,arguments),r.isPromise(n)?n.then(function(t){return s(t,e.apply(i,o))})😒(n,e.apply(this,arguments))}},around:function(t,e){return function(){var n=i.toRealArray(arguments);return n.unshift(o(t,this)),e.apply(this,n)}}}},function(t,e,n){var r=n(10),i=n(17),o=n(39),s=n(6),a=n(0);t.exports=function(){var t😮();function e(e){t.apply(this,arguments),Object.defineProperty(this,\"targetGlobal\",{value:e})}return e.prototype=Object.create(t.prototype),a.aug(e.prototype,{id:null,initialized:!1,width😮,height😮,sandboxEl:null,insert:function(){return s.reject()},onResize:function(){},addClass:function(t){var e=this.sandboxEl;return t=Array.isArray(t)?t😦t],i.write(function(){t.forEach(function(t){r.add(e,t)})})},removeClass:function(t){var e=this.sandboxEl;return t=Array.isArray(t)?t😦t],i.write(function(){t.forEach(function(t){r.remove(e,t)})})},styleSelf:function(t){var e=this;return i.write(function(){a.forIn(t,function(t,n){e.sandboxEl.style[t]=n})})}}),e}},function(t,e,n){var r=n(5),i=n(10),o=n(17),s=n(52),a=n(25),u=n(53),c=n(42),d=n(43),l=n(29),f=n(12),h=n(44),p=n(2),m=n(6),v=n(0),g=n(9),w=n(22),y=n(7),b={allowfullscreen:\"true\"},_={position:\"absolute\",visibility:\"hidden\",display:\"block\",width:\"0px\",height:\"0px\",padding:\"0\",border:\"none\"},E={position:\"static\",visibility:\"visible\"},x=\"SandboxRoot\",A=\".SandboxRoot { display: none; }\",T=50;function S(t,e,n,r){return e=v.aug({id:t},b,e),n=v.aug({},_,n),l(e,n,r)}function R(t,e,n,i,s){var a=new p,u=w.generate(),c😒(t,e,n,s);return g.set([\"sandbox\",u],function(){var t=c.contentWindow.document;o.write(function(){t.write(\"<!DOCTYPE html><html><head></head><body></body></html>\")}).then(function(){t.close(),a.resolve(c)})}),c.src😦\"javascript:\",'document.write(\"\");',\"try { window.parent.document; }\",'catch (e) { document.domain=\"'+r.domain+'\"; }',\"window.parent.\"+g.fullPath([\"sandbox\",u])+\"();\"].join(\"\"),c.addEventListener(\"error\",a.reject,!1),o.write(function(){i.parentNode.replaceChild(c,i)}),a.promise}t.exports=a.couple(n(54),function(t){t.overrideProperty(\"id\",{get:function(){return this.sandboxEl&&this.sandboxEl.id}}),t.overrideProperty(\"initialized\",{get:function(){return!!this.win}}),t.overrideProperty(\"width\",{get:function(){return this._width}}),t.overrideProperty(\"height\",{get:function(){return this._height}}),t.overrideProperty(\"sandboxEl\",{get:function(){return this.iframeEl}}),t.defineProperty(\"iframeEl\",{get:function(){return this._iframe}}),t.defineProperty(\"rootEl\",{get:function(){return this.doc&&this.doc.documentElement}}),t.defineProperty(\"widgetEl\",{get:function(){return this.doc&&this.doc.body.firstElementChild}}),t.defineProperty(\"win\",{get:function(){return this.iframeEl&&this.iframeEl.contentWindow}}),t.defineProperty(\"doc\",{get:function(){return this.win&&this.win.document}}),t.define(\"_updateCachedDimensions\",function(){var t=this;return o.read(function(){var e,n=h(t.sandboxEl);\"visible\"==t.sandboxEl.style.visibility?t._width=n.width😦e=h(t.sandboxEl.parentElement).width,t._width=Math.min(n.width,e)),t._height=n.height})}),t.define(\"_setTargetToBlank\",function(){var t=this.createElement(\"base\");t.target=\"_blank\",this.doc.head.appendChild(t)}),t.define(\"_didResize\",function(){var t=this,e=this._resizeHandlers.slice(0);return this._updateCachedDimensions().then(function(){e.forEach(function(e){e(t)})})}),t.define(\"setTitle\",function(t){this.iframeEl.title=t}),t.override(\"createElement\",function(t){return this.doc.createElement(t)}),t.override(\"createFragment\",function(){return this.doc.createDocumentFragment()}),t.override(\"htmlToElement\",function(t){var e;return(e=this.createElement(\"div\")).innerHTML=t,e.firstElementChild}),t.override(\"hasSelectedText\",function(){return!!s.getSelectedText(this.win)}),t.override(\"addRootClass\",function(t){var e=this.rootEl;return t=Array.isArray(t)?t😦t],this.initialized?o.write(function(){t.forEach(function(t){i.add(e,t)})}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"removeRootClass\",function(t){var e=this.rootEl;return t=Array.isArray(t)?t😦t],this.initialized?o.write(function(){t.forEach(function(t){i.remove(e,t)})}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"hasRootClass\",function(t){return i.present(this.rootEl,t)}),t.define(\"addStyleSheet\",function(t,e){var n,r=new p;return this.initialized?((n=this.createElement(\"link\")).type=\"text/css\",n.rel=\"stylesheet\",n.href=t,n.addEventListener(\"load\",r.resolve,!1),n.addEventListener(\"error\",r.reject,!1),o.write(y(e,null,n)).then(function(){return u(t).then(r.resolve,r.reject),r.promise})):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"prependStyleSheet\",function(t){var e=this.doc;return this.addStyleSheet(t,function(t){var n=e.head.firstElementChild;return n?e.head.insertBefore(t,n):e.head.appendChild(t)})}),t.override(\"appendStyleSheet\",function(t){var e=this.doc;return this.addStyleSheet(t,function(t){return e.head.appendChild(t)})}),t.define(\"addCss\",function(t,e){var n;return c.inlineStyle()?((n=this.createElement(\"style\")).type=\"text/css\",n.appendChild(this.doc.createTextNode(t)),o.write(y(e,null,n)))😦f.devError(\"CSP enabled; cannot embed inline styles\"),m.resolve())}),t.override(\"prependCss\",function(t){var e=this.doc;return this.addCss(t,function(t){var n=e.head.firstElementChild;return n?e.head.insertBefore(t,n):e.head.appendChild(t)})}),t.override(\"appendCss\",function(t){var e=this.doc;return this.addCss(t,function(t){return e.head.appendChild(t)})}),t.override(\"makeVisible\",function(){var t=this;return this.styleSelf(E).then(function(){t._updateCachedDimensions()})}),t.override(\"injectWidgetEl\",function(t){var e=this;return this.initialized?this.widgetEl?m.reject(new Error(\"widget already injected\"))😮.write(function(){e.doc.body.appendChild(t)}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"matchHeightToContent\",function(){var t,e=this;return o.read(function(){t=e.widgetEl?h(e.widgetEl).height😮}),o.write(function(){e.sandboxEl.style.height=t+\"px\"}).then(function(){return e._updateCachedDimensions()})}),t.override(\"matchWidthToContent\",function(){var t,e=this;return o.read(function(){t=e.widgetEl?h(e.widgetEl).width😮}),o.write(function(){e.sandboxEl.style.width=t+\"px\"}).then(function(){return e._updateCachedDimensions()})}),t.after(\"initialize\",function(){this._iframe=null,this._width=this._height😮,this._resizeHandlers😦]}),t.override(\"insert\",function(t,e,n,r){var i=this,s=new p,a=this.targetGlobal.document,u😒(t,e,n,a);return o.write(y(r,null,u)),u.addEventListener(\"load\",function(){(function(t){try{t.contentWindow.document}catch(t){return m.reject(t)}return m.resolve(t)})(u).then(null,y(R,null,t,e,n,u,a)).then(s.resolve,s.reject)},!1),u.addEventListener(\"error\",s.reject,!1),s.promise.then(function(t){var e😛(i._didResize,T,i);return i._iframe=t,i.win.addEventListener(\"resize\",e,!1),m.all([i._setTargetToBlank(),i.addRootClass(😆,i.prependCss(A)])})}),t.override(\"onResize\",function(t){this._resizeHandlers.push(t)}),t.after(\"styleSelf\",function(){return this._updateCachedDimensions()})})},function(t,e){t.exports=function(){throw new Error(\"unimplemented method\")}},function(t,e,n){var r=n(2),i=n(7),o=100,s=3e3;function a(t,e){this._inputsQueue😦],this._task=t,this._isPaused=!1,this._flushDelay=e&&e.flushDelay||o,this._pauseLength=e&&e.pauseLength||s,this._flushTimeout=void 0}a.prototype.add=function(t){var e=new r;return this._inputsQueue.push({input:t,taskDoneDeferred:e}),this._scheduleFlush(),e.promise},a.prototype._scheduleFlush=function(){this._isPaused||(clearTimeout(this._flushTimeout),this._flushTimeout=setTimeout(i(this._flush,this),this._flushDelay))},a.prototype._flush=function(){try{this._task.call(null,this._inputsQueue)}catch(t){this._inputsQueue.forEach(function(e){e.taskDoneDeferred.reject(t)})}this._inputsQueue😦],this._flushTimeout=void 0},a.prototype.pause=function(t){clearTimeout(this._flushTimeout),this._isPaused=!0,!t&&this._pauseLength&&setTimeout(i(this.resume,this),this._pauseLength)},a.prototype.resume=function(){this._isPaused=!1,this._scheduleFlush()},t.exports=a},function(t,e,n){var r,i=n(70),o=n(29),s=n(2),a=n(5),u=n(18),c=n(20),d=n(30),l=n(😎,f=n(12),h=n(111),p=n(55),m=n(9),v=n(11),g=n(112),w=n(0),y=n(1),b😛(function(){return new s});function _(t){var e=t||{should_obtain_cookie_consent:!0,experiments:{}};return new g(e.should_obtain_cookie_consent,e.experiments)}t.exports={load:function(){var t,e,n,s;if(c.ie9()||c.ie10()||\"http:\"!==l.protocol&&\"https:\"!==l.protocol)return f.devError(\"Using default settings due to unsupported browser or protocol.\"),r=_(),void b().resolve();t={origin:l.origin},u.settings().indexOf(\"localhost\")>-1&&(t.localSettings=!0),e=v.url(i.resourceBaseUrl+i.widgetIframeHtmlPath,t),n=function(t){var n;if(e.substr(0,t.origin.length)===t.origin)try{(n=\"string\"==typeof t.data?d.parse(t.data):t.data).namespace===h.settings&&(r=_(n.settings),b().resolve())}catch(t){f.devError(t)}},y.addEventListener(\"message\",n),s😮({src:e,title:\"Twitter settings iframe\"},{display:\"none\"}),a.body.appendChild(s)},settingsLoaded:function(){var t,e,n;return t=new s,e=m.get(\"experimentOverride\"),b().promise.then(function(){e&&e.name&&e.assignment&&((n={})[e.name]={bucket:e.assignment},r.experiments=w.aug(r.experiments,n)),t.resolve(r)}).catch(function(e){t.reject(e)}),t.promise}}},function(t,e){t.exports={settings:\"twttr.settings\"}},function(t,e){t.exports=function(t,e){this.shouldObtainCookieConsent=t,this.experiments=e||{}}},function(t,e){t.exports=function(t){return t.split(\"\").map(function(t){return t.charCodeAt(0).toString(16)}).join(\"\")}},function(t,e,n){t.exports😦n(115),n(120),n(128),n(130),n(132),n(146),n(148)]},function(t,e,n){var r=n(11),i=n(4),o=n(0),s=n(13),a=n(14)(),u=n(56),c=\"a.twitter-dm-button\";t.exports=function(t){return a(t,c).map(function(t){return u(function(t){var e=t.getAttribute(\"data-show-screen-name\"),n😒(t),a=t.getAttribute(\"href\"),u=t.getAttribute(\"data-screen-name\"),c=e?i.asBoolean(e):null,d=t.getAttribute(\"data-size\"),l=r.decodeURL(a),f=l.recipient_id,h=t.getAttribute(\"data-text\")||l.text,p=t.getAttribute(\"data-welcome-message-id\")||l.welcomeMessageId;return o.aug(n,{screenName:u,showScreenName:c,size😛,text:h,userId:f,welcomeMessageId😛})}(t),t.parentNode,t)})}},function(t,e,n){var r=n(0);t.exports=function t(e){var n;if(e)return n=e.lang||e.getAttribute(\"data-lang\"),r.isType(\"string\",n)?n:t(e.parentElement)}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return n.e(2).then(function(r){var o;try{o=n(84),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(119),i=n(1),o=n(10),s=n(34),a=n(17),u=n(52),c=n(25),d=n(53),l=n(42),f=n(44),h=n(7),p=n(43),m=n(6),v=n(0),g=50,w={position:\"absolute\",visibility:\"hidden\",display:\"block\",transform:\"rotate(0deg)\"},y={position:\"static\",visibility:\"visible\"},b=\"twitter-widget\",_=\"open\",E=\"SandboxRoot\",x=\".SandboxRoot { display: none; max-height: 10000px; }\";t.exports=c.couple(n(54),function(t){t.defineStatic(\"isSupported\",function(){return!!i.HTMLElement.prototype.attachShadow&&l.inlineStyle()}),t.overrideProperty(\"id\",{get:function(){return this.sandboxEl&&this.sandboxEl.id}}),t.overrideProperty(\"initialized\",{get:function(){return!!this._shadowHost}}),t.overrideProperty(\"width\",{get:function(){return this._width}}),t.overrideProperty(\"height\",{get:function(){return this._height}}),t.overrideProperty(\"sandboxEl\",{get:function(){return this._shadowHost}}),t.define(\"_updateCachedDimensions\",function(){var t=this;return a.read(function(){var e,n=f(t.sandboxEl);\"visible\"==t.sandboxEl.style.visibility?t._width=n.width😦e=f(t.sandboxEl.parentElement).width,t._width=Math.min(n.width,e)),t._height=n.height})}),t.define(\"_didResize\",function(){var t=this,e=this._resizeHandlers.slice(0);return this._updateCachedDimensions().then(function(){e.forEach(function(e){e(t)})})}),t.override(\"createElement\",function(t){return this.targetGlobal.document.createElement(t)}),t.override(\"createFragment\",function(){return this.targetGlobal.document.createDocumentFragment()}),t.override(\"htmlToElement\",function(t){var e;return(e=this.createElement(\"div\")).innerHTML=t,e.firstElementChild}),t.override(\"hasSelectedText\",function(){return!!u.getSelectedText(this.targetGlobal)}),t.override(\"addRootClass\",function(t){var e=this._shadowRootBody;return t=Array.isArray(t)?t😦t],this.initialized?a.write(function(){t.forEach(function(t){o.add(e,t)})}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"removeRootClass\",function(t){var e=this._shadowRootBody;return t=Array.isArray(t)?t😦t],this.initialized?a.write(function(){t.forEach(function(t){o.remove(e,t)})}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"hasRootClass\",function(t){return o.present(this._shadowRootBody,t)}),t.override(\"addStyleSheet\",function(t,e){return this.addCss('@import url(\"'+t+'\");',e).then(function(){return d(t)})}),t.override(\"prependStyleSheet\",function(t){var e=this._shadowRoot;return this.addStyleSheet(t,function(t){var n=e.firstElementChild;return n?e.insertBefore(t,n):e.appendChild(t)})}),t.override(\"appendStyleSheet\",function(t){var e=this._shadowRoot;return this.addStyleSheet(t,function(t){return e.appendChild(t)})}),t.override(\"addCss\",function(t,e){var n;return this.initialized?l.inlineStyle()?((n=this.createElement(\"style\")).type=\"text/css\",n.appendChild(this.targetGlobal.document.createTextNode(t)),a.write(h(e,null,n))):m.resolve():m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"prependCss\",function(t){var e=this._shadowRoot;return this.addCss(t,function(t){var n=e.firstElementChild;return n?e.insertBefore(t,n):e.appendChild(t)})}),t.override(\"appendCss\",function(t){var e=this._shadowRoot;return this.addCss(t,function(t){return e.appendChild(t)})}),t.override(\"makeVisible\",function(){return this.styleSelf(y)}),t.override(\"injectWidgetEl\",function(t){var e=this;return this.initialized?this._shadowRootBody.firstElementChild?m.reject(new Error(\"widget already injected\")):a.write(function(){e._shadowRootBody.appendChild(t)}).then(function(){return e._updateCachedDimensions()}).then(function(){var t😛(e._didResize,g,e);new r(e._shadowRootBody,t)}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"matchHeightToContent\",function(){return m.resolve()}),t.override(\"matchWidthToContent\",function(){return m.resolve()}),t.override(\"insert\",function(t,e,n,r){var i=this.targetGlobal.document,o=this._shadowHost=i.createElement(b),u=this._shadowRoot😮.attachShadow({mode:_}),c=this._shadowRootBody=i.createElement(\"div\");return v.forIn(e||{},function(t,e){o.setAttribute(t,e)}),o.id=t,u.appendChild(c),s.delegate(c,\"click\",\"A\",function(t,e){e.hasAttribute(\"target\")||e.setAttribute(\"target\",\"_blank\")}),m.all([this.styleSelf(w),this.addRootClass(E),this.prependCss(😆,a.write(r.bind(null,o))])}),t.override(\"onResize\",function(t){this._resizeHandlers.push(t)}),t.after(\"initialize\",function(){this._shadowHost=this._shadowRoot=this._shadowRootBody=null,this._width=this._height😮,this._resizeHandlers😦]}),t.after(\"styleSelf\",function(){return this._updateCachedDimensions()})})},function(t,e){var n;(n=function(t,e){function r(t,e){if(t.resizedAttached){if(t.resizedAttached)return void t.resizedAttached.add(e)}else t.resizedAttached=new function(){var t,e;this.q😦],this.add=function(t){this.q.push(t)},this.call=function(){for(t😮,e=this.q.length;t<e;t++)this.q[t].call()}},t.resizedAttached.add(e);t.resizeSensor=document.createElement(\"div\"),t.resizeSensor.className=\"resize-sensor\";var n=\"position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;\",r=\"position: absolute; left: 0; top: 0; transition: 0s;\";t.resizeSensor.style.cssText=n,t.resizeSensor.innerHTML='<div class=\"resize-sensor-expand\" style=\"'+n+'\"><div style=\"'+r+'\"></div></div><div class=\"resize-sensor-shrink\" style=\"'+n+'\"><div style=\"'+r+' width: 200%; height: 200%\"></div></div>',t.appendChild(t.resizeSensor),{fixed:1,absolute:1}[function(t,e){return t.currentStyle?t.currentStyle[e]:window.getComputedStyle?window.getComputedStyle(t,null).getPropertyValue(e):t.style[e]}(t,\"position\")]||(t.style.position=\"relative\");var i,o,s=t.resizeSensor.childNodes[0],a😒.childNodes[0],u=t.resizeSensor.childNodes[1],c😦u.childNodes[0],function(){a.style.width😒.offsetWidth+10+\"px\",a.style.height😒.offsetHeight+10+\"px\",s.scrollLeft😒.scrollWidth,s.scrollTop😒.scrollHeight,u.scrollLeft=u.scrollWidth,u.scrollTop=u.scrollHeight,i=t.offsetWidth,o=t.offsetHeight});c();var d=function(t,e,n){t.attachEvent?t.attachEvent(\"on\"+e,n):t.addEventListener(e,n)},l=function(){t.offsetWidth==i&&t.offsetHeight==o||t.resizedAttached&&t.resizedAttached.call(),c()}😜(s,\"scroll\",l),d(u,\"scroll\",l)}var i=Object.prototype.toString.call(t),o=\"[object Array]\"===i||\"[object NodeList]\"===i||\"[object HTMLCollection]\"===i||\"undefined\"!=typeof jQuery&&t instanceof jQuery||\"undefined\"!=typeof Elements&&t instanceof Elements;if(o)for(var s😮,a=t.length;s<a;s++)r(t[s],e);else r(t,e);this.detach=function(){if(o)for(var e😮,r=t.length;e<r;e++)n.detach(t[e]);else n.detach(t)}}).detach=function(t){t.resizeSensor&&(t.removeChild(t.resizeSensor),delete t.resizeSensor,delete t.resizedAttached)},void 0!==t&&void 0!==t.exports?t.exports=n:window.ResizeSensor=n},function(t,e,n){var r=n(3),i=n(0),o=n(13),s=n(14)(),a=n(59),u=n(4),c=\"a.twitter-follow-button\";t.exports=function(t){return s(t,c).map(function(t){return a(function(t){var e😮(t),n={screenName:r.screenName(t.href),showScreenName:\"false\"!==t.getAttribute(\"data-show-screen-name\"),showCount:\"false\"!==t.getAttribute(\"data-show-count\"),size:t.getAttribute(\"data-size\"),count:t.getAttribute(\"data-count\"),preview:t.getAttribute(\"data-preview\")};return i.forIn(n,function(t,n){var r=e[t];e[t]=u.hasValue(r)?r:n}),e.screenName=e.screenName||e.screen_name,e}(t),t.parentNode,t)})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return n.e(3).then(function(r){var o;try{o=n(85),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(17),i=n(123),o=n(55),s=n(29),a=n(2),u=n(6),c=n(7),d=n(0),l={position:\"absolute\",visibility:\"hidden\",width:\"0px\",height:\"0px\"},f={position:\"static\",visibility:\"visible\"},h={};i(function(t,e,n){var r=h[t];if(r)return e=e||1,n=n||1,r.styleSelf({width:e+\"px\",height:n+\"px\"}).then(function(){r.didResize()})}),t.exports=function(t){t.overrideProperty(\"id\",{get:function(){return this.sandboxEl&&this.sandboxEl.id}}),t.overrideProperty(\"initialized\",{get:function(){return!!this.iframeEl}}),t.overrideProperty(\"width\",{get:function(){return this._width}}),t.overrideProperty(\"height\",{get:function(){return this._height}}),t.overrideProperty(\"sandboxEl\",{get:function(){return this.iframeEl}}),t.defineProperty(\"iframeEl\",{get:function(){return this._iframe}}),t.define(\"updateCachedDimensions\",function(){var t=this;return this.initialized?r.read(function(){t._width=t.sandboxEl.offsetWidth,t._height=t.sandboxEl.offsetHeight}):u.resolve()}),t.define(\"setTitle\",function(t){this.iframeEl.title=t}),t.define(\"makeVisible\",function(){return this.styleSelf(f)}),t.define(\"didResize\",function(){var t=this,e=t._resizeHandlers.length>0;return this.updateCachedDimensions().then(function(){e&&t._resizeHandlers.forEach(function(e){e(t)})})}),t.define(\"loadDocument\",function(t){var e=new a;return this.initialized?this.iframeEl.src?u.reject(new Error(\"widget already loaded\"))😦this.iframeEl.addEventListener(\"load\",e.resolve,!1),this.iframeEl.addEventListener(\"error\",e.reject,!1),this.iframeEl.src=t,e.promise):u.reject(new Error(\"sandbox not initialized\"))}),t.after(\"initialize\",function(){this._iframe=null,this._width=this._height😮,this._resizeHandlers😦]}),t.override(\"insert\",function(t,e,n,i){var a=this;return e😛.aug({id:t},e),n😛.aug({},l,n),this._iframe😒(e,n),h[t]=this,this.onResize(o(function(){a.makeVisible()})),r.write(c(i,null,this._iframe))}),t.override(\"onResize\",function(t){this._resizeHandlers.push(t)}),t.after(\"styleSelf\",function(){return this.updateCachedDimensions()})}},function(t,e,n){var r=n(1),i=n(124),o=n(126),s=n(23),a=n(4),u=n(127);t.exports=function(t){(new i).attachReceiver(new o.Receiver(r,\"twttr.button\")).bind(\"twttr.private.trigger\",function(t,e){var n=u(this);s.trigger(t,{target:n,region:e,type:t,data:{}})}).bind(\"twttr.private.resizeButton\",function(e){var n=u(this),r=n&&n.id,i=a.asInt(e.width),o=a.asInt(e.height);r&&void 0!==i&&void 0!==o&&t(r,i,o)})}},function(t,e,n){var r=n(30),i=n(125),o=n(0),s=n(6),a=n(21),u=\"2.0\";function c(t){this.registry=t||{}}function d(t){var e,n;return e😮.isType(\"string\",t),n😮.isType(\"number\",t),e||n||null===t}function l(t,e){return{jsonrpc:u,id😛(t)?t:null,error:e}}c.prototype._invoke=function(t,e){var n,r,i;n=this.registry[t.method],r=t.params||[],r😮.isType(\"array\",r)?r😦r];try{i=n.apply(e.source||null,r)}catch(t){i😒.reject(t.message)}return a.isPromise(i)?i😒.resolve(i)},c.prototype._processRequest=function(t,e){var n,r;return function(t){var e,n,r;return!!o.isObject(t)&&(e=t.jsonrpc===u,n😮.isType(\"string\",t.method),r=!(\"id\"in t)||d(t.id),e&&n&&r)}(t)?(n=\"params\"in t&&(r=t.params,!o.isObject(r)||o.isType(\"function\",r))?s.resolve(l(t.id,i.INVALID_PARAMS)):this.registry[t.method]?this._invoke(t,{source:e}).then(function(e){return n=t.id,{jsonrpc:u,id:n,result:e};var n},function(){return l(t.id,i.INTERNAL_ERROR)})😒.resolve(l(t.id,i.METHOD_NOT_FOUND)),null!=t.id?n😒.resolve())😒.resolve(l(t.id,i.INVALID_REQUEST))},c.prototype.attachReceiver=function(t){return t.attachTo(this),this},c.prototype.bind=function(t,e){return this.registry[t]=e,this},c.prototype.receive=function(t,e){var n,a,u,c=this;try{u=t,t😮.isType(\"string\",u)?r.parse(u):u}catch(t){return s.resolve(l(null,i.PARSE_ERROR))}return e=e||null,a=((n😮.isType(\"array\",t))?t😦t]).map(function(t){return c._processRequest(t,e)}),n?function(t){return s.all(t).then(function(t){return(t=t.filter(function(t){return void 0!==t})).length?t:void 0})}(a):a[0]},t.exports=c},function(t){t.exports={PARSE_ERROR:{code😶32700,message:\"Parse error\"},INVALID_REQUEST:{code😶32600,message:\"Invalid Request\"},INVALID_PARAMS:{code😶32602,message:\"Invalid params\"},METHOD_NOT_FOUND:{code😶32601,message:\"Method not found\"},INTERNAL_ERROR:{code😶32603,message:\"Internal error\"}}},function(t,e,n){var r=n(😎,i=n(1),o=n(30),s=n(2),a=n(20),u=n(0),c=n(3),d=n(7),l=a.ie9();function f(t,e,n){var r;t&&t.postMessage&&(l?r😦n||\"\")+o.stringify(e):n?(r={})[n]=e:r=e,t.postMessage(r,\"*\"))}function h(t){return u.isType(\"string\",t)?t:\"JSONRPC\"}function p(t,e){return e?u.isType(\"string\",t)&&0===t.indexOf(e)?t.substring(e.length):t&&t[e]?t[e]:void 0:t}function m(t,e){var n=t.document;this.filter=h(e),this.server=null,this.isTwitterFrame=c.isTwitterURL(n.location.href),t.addEventListener(\"message\",d(this._onMessage,this),!1)}function v(t,e){this.pending={},this.target=t,this.isTwitterHost=c.isTwitterURL(r.href),this.filter=h(e),i.addEventListener(\"message\",d(this._onMessage,this),!1)}u.aug(m.prototype,{_onMessage:function(t){var e,n=this;this.server&&(this.isTwitterFrame&&!c.isTwitterURL(t.origin)||(e😛(t.data,this.filter))&&this.server.receive(e,t.source).then(function(e){e&&f(t.source,e,n.filter)}))},attachTo:function(t){this.server=t},detach:function(){this.server=null}}),u.aug(v.prototype,{_processResponse:function(t){var e=this.pending[t.id];e&&(e.resolve(t),delete this.pending[t.id])},_onMessage:function(t){var e;if((!this.isTwitterHost||c.isTwitterURL(t.origin))&&(e😛(t.data,this.filter))){if(u.isType(\"string\",e))try{e😮.parse(e)}catch(t){return}(e=u.isType(\"array\",e)?e😦e]).forEach(d(this._processResponse,this))}},send:function(t){var e=new s;return t.id?this.pending[t.id]=e:e.resolve(),f(this.target,t,this.filter),e.promise}}),t.exports={Receiver:m,Dispatcher:v,_stringifyPayload:function(t){return arguments.length>0&&(l=!!t),l}}},function(t,e,n){var r=n(5);t.exports=function(t){for(var e,n=r.getElementsByTagName(\"iframe\"),i😮;n[i];i++)if((e=n[i]).contentWindow===t)return e}},function(t,e,n){var r=n(4),i=n(0),o=n(3),s=n(13),a=n(14)(),u=n(61),c=\"a.twitter-moment\";t.exports=function(t){return a(t,c).map(function(t){return u(function(t){var e😒(t),n={momentId😮.momentId(t.href),chrome:t.getAttribute(\"data-chrome\"),limit:t.getAttribute(\"data-limit\")};return i.forIn(n,function(t,n){var i=e[t];e[t]=r.hasValue(i)?i:n}),e}(t),t.parentNode,t)})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return Promise.all([n.e(0),n.e(4)]).then(function(r){var o;try{o=n(86),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(0),i=n(13),o=n(14)(),s=n(62),a=\"a.periscope-on-air\",u😕^https?😕/\\/(?:www\\.)?(?:periscope|pscp)\\.tv\\/@?([a-zA-Z0-9_]+)\\/?$/i;t.exports=function(t){return o(t,a).map(function(t){return s(function(t){var e=i(t),n=t.getAttribute(\"href\"),o=t.getAttribute(\"data-size\"),s=u.exec(n)[1];return r.aug(e,{username😒,size😮})}(t),t.parentNode,t)})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return n.e(5).then(function(r){var o;try{o=n(87),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(4),i=n(0),o=n(63),s=n(13),a=n(14)(),u=n(64),c=n(3),d=n(12),l=\"a.twitter-timeline,div.twitter-timeline,a.twitter-grid\",f=\"Embedded Search timelines have been deprecated. See https://twittercommunity.com/t/deprecating-widget-settings/102295.\",h=\"You may have been affected by an update to settings in embedded timelines. See https://twittercommunity.com/t/deprecating-widget-settings/102295.\",p=\"Embedded grids have been deprecated and will now render as timelines. Please update your embed code to use the twitter-timeline class. More info: https://twittercommunity.com/t/update-on-the-embedded-grid-display-type/119564.\";t.exports=function(t){return a(t,l).map(function(t){return u(function(t){var e😒(t),n=t.getAttribute(\"data-show-replies\"),a={isPreconfigured:!!t.getAttribute(\"data-widget-id\"),chrome:t.getAttribute(\"data-chrome\"),tweetLimit:t.getAttribute(\"data-tweet-limit\")||t.getAttribute(\"data-limit\"),ariaLive:t.getAttribute(\"data-aria-polite\"),theme:t.getAttribute(\"data-theme\"),linkColor:t.getAttribute(\"data-link-color\"),borderColor:t.getAttribute(\"data-border-color\"),showReplies:n?r.asBoolean(n):null,profileScreenName:t.getAttribute(\"data-screen-name\"),profileUserId:t.getAttribute(\"data-user-id\"),favoritesScreenName:t.getAttribute(\"data-favorites-screen-name\"),favoritesUserId:t.getAttribute(\"data-favorites-user-id\"),likesScreenName:t.getAttribute(\"data-likes-screen-name\"),likesUserId:t.getAttribute(\"data-likes-user-id\"),listOwnerScreenName:t.getAttribute(\"data-list-owner-screen-name\"),listOwnerUserId:t.getAttribute(\"data-list-owner-id\"),listId:t.getAttribute(\"data-list-id\"),listSlug:t.getAttribute(\"data-list-slug\"),customTimelineId:t.getAttribute(\"data-custom-timeline-id\"),staticContent:t.getAttribute(\"data-static-content\"),url:t.href};return a.isPreconfigured&&(c.isSearchUrl(a.url)?d.publicError(f,t)😛.publicLog(h,t)),\"twitter-grid\"===t.className&&d.publicLog(p,t),(a=i.aug(a,e)).dataSource😮(a),a.id=a.dataSource&&a.dataSource.id,a}(t),t.parentNode,t)})}},function(t,e,n){var r=n(26);t.exports=r.build([n(27),n(136)])},function(t,e,n){var r=n(0),i=n(135);t.exports=function(t){return\"en\"===t||r.contains(i,t)}},function(t,e){t.exports😦\"hi\",\"zh-cn\",\"fr\",\"zh-tw\",\"msa\",\"fil\",\"fi\",\"sv\",\"pl\",\"ja\",\"ko\",\"de\",\"it\",\"pt\",\"es\",\"ru\",\"id\",\"tr\",\"da\",\"no\",\"nl\",\"hu\",\"fa\",\"ar\",\"ur\",\"he\",\"th\",\"cs\",\"uk\",\"vi\",\"ro\",\"bn\",\"el\",\"en-gb\",\"gu\",\"kn\",\"mr\",\"ta\",\"bg\",\"ca\",\"hr\",\"sr\",\"sk\"]},function(t,e,n){var r=n(3),i=n(0),o=n(18),s=\"collection:\";function a(t,e){return r.collectionId(t)||e}t.exports=function(t){t.params({id:{},url:{}}),t.overrideProperty(\"id\",{get:function(){var t=a(this.params.url,this.params.id);return s+t}}),t.overrideProperty(\"endpoint\",{get:function(){return o.timeline([\"collection\"])}}),t.around(\"queryParams\",function(t){return i.aug(t(),{collection_id:a(this.params.url,this.params.id)})}),t.before(\"initialize\",function(){if(!a(this.params.url,this.params.id))throw new Error(\"one of url or id is required\")})}},function(t,e,n){var r=n(26);t.exports=r.build([n(27),n(138)])},function(t,e,n){var r=n(3),i=n(0),o=n(18),s=\"event:\";function a(t,e){return r.eventId(t)||e}t.exports=function(t){t.params({id:{},url:{}}),t.overrideProperty(\"id\",{get:function(){var t=a(this.params.url,this.params.id);return s+t}}),t.overrideProperty(\"endpoint\",{get:function(){return o.timeline([\"event\"])}}),t.around(\"queryParams\",function(t){return i.aug(t(),{event_id:a(this.params.url,this.params.id)})}),t.before(\"initialize\",function(){if(!a(this.params.url,this.params.id))throw new Error(\"one of url or id is required\")})}},function(t,e,n){var r=n(26);t.exports=r.build([n(27),n(140)])},function(t,e,n){var r=n(3),i=n(0),o=n(18),s=\"likes:\";function a(t){return r.likesScreenName(t.url)||t.screenName}t.exports=function(t){t.params({screenName:{},userId:{},url:{}}),t.overrideProperty(\"id\",{get:function(){var t=a(this.params)||this.params.userId;return s+t}}),t.overrideProperty(\"endpoint\",{get:function(){return o.timeline([\"likes\"])}}),t.define(\"_getLikesQueryParam\",function(){var t=a(this.params);return t?{screen_name:t}:{user_id:this.params.userId}}),t.around(\"queryParams\",function(t){return i.aug(t(),this._getLikesQueryParam())}),t.before(\"initialize\",function(){if(!a(this.params)&&!this.params.userId)throw new Error(\"screen name or user id is required\")})}},function(t,e,n){var r=n(26);t.exports=r.build([n(27),n(142)])},function(t,e,n){var r=n(3),i=n(0),o=n(18),s=\"list:\";function a(t){var e=r.listScreenNameAndSlug(t.url)||t;return i.compact({screen_name:e.ownerScreenName,user_id:e.ownerUserId,list_slug:e.slug})}t.exports=function(t){t.params({id:{},ownerScreenName:{},ownerUserId:{},slug:{},url:{}}),t.overrideProperty(\"id\",{get:function(){var t,e,n;return this.params.id?s+this.params.id😦e😦t=a(this.params))&&t.list_slug.replace(/-/g,\"_\"),n=t&&(t.screen_name||t.user_id),s+(n+\"😊+e)}}),t.overrideProperty(\"endpoint\",{get:function(){return o.timeline([\"list\"])}}),t.define(\"_getListQueryParam\",function(){return this.params.id?{list_id:this.params.id}:a(this.params)}),t.around(\"queryParams\",function(t){return i.aug(t(),this._getListQueryParam())}),t.before(\"initialize\",function(){var t=a(this.params);if(i.isEmptyObject(t)&&!this.params.id)throw new Error(\"qualified slug or list id required\")})}},function(t,e,n){var r=n(26);t.exports=r.build([n(27),n(144)])},function(t,e,n){var r=n(3),i=n(4),o=n(0),s=n(18),a=\"profile:\";function u(t,e){return r.screenName(t)||e}t.exports=function(t){t.params({showReplies:{fallback:!1,transform:i.asBoolean},screenName:{},userId:{},url:{}}),t.overrideProperty(\"id\",{get:function(){var t=u(this.params.url,this.params.screenName);return a+(t||this.params.userId)}}),t.overrideProperty(\"endpoint\",{get:function(){return s.timeline([\"profile\"])}}),t.define(\"_getProfileQueryParam\",function(){var t=u(this.params.url,this.params.screenName),e=t?{screen_name:t}:{user_id:this.params.userId};return o.aug(e,{with_replies:this.params.showReplies?\"true\":\"false\"})}),t.around(\"queryParams\",function(t){return o.aug(t(),this._getProfileQueryParam())}),t.before(\"initialize\",function(){if(!u(this.params.url,this.params.screenName)&&!this.params.userId)throw new Error(\"screen name or user id is required\")})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return Promise.all([n.e(0),n.e(6)]).then(function(r){var o;try{o=n(88),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(10),i=n(3),o=n(0),s=n(13),a=n(14)(),u=n(65),c=\"blockquote.twitter-tweet, blockquote.twitter-video\",d😕\\btw-align-(left|right|center)\\b/;t.exports=function(t){return a(t,c).map(function(t){return u(function(t){var e😒(t),n=t.getElementsByTagName(\"A\"),a=n&&n[n.length-1],u=a&&i.status(a.href),c=t.getAttribute(\"data-conversation\"),l=\"none\"==c||\"hidden\"==c||r.present(t,\"tw-hide-thread\"),f=t.getAttribute(\"data-cards\"),h=\"none\"==f||\"hidden\"==f||r.present(t,\"tw-hide-media\"),p=t.getAttribute(\"data-align\")||t.getAttribute(\"align\"),m=t.getAttribute(\"data-link-color\"),v=t.getAttribute(\"data-theme\");return!p&&d.test(t.className)&&(p=RegExp.$1),o.aug(e,{tweetId:u,hideThread:l,hideCard:h,align😛,linkColor:m,theme:v,id:u})}(t),t.parentNode,t)})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return Promise.all([n.e(0),n.e(7)]).then(function(r){var o;try{o=n(89),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(10),i=n(0),o=n(13),s=n(14)(),a=n(66),u=n(4),c=\"a.twitter-share-button, a.twitter-mention-button, a.twitter-hashtag-button\",d=\"twitter-hashtag-button\",l=\"twitter-mention-button\";t.exports=function(t){return s(t,c).map(function(t){return a(function(t){var e😮(t),n={screenName:t.getAttribute(\"data-button-screen-name\"),text:t.getAttribute(\"data-text\"),type:t.getAttribute(\"data-type\"),size:t.getAttribute(\"data-size\"),url:t.getAttribute(\"data-url\"),hashtags:t.getAttribute(\"data-hashtags\"),via:t.getAttribute(\"data-via\"),buttonHashtag:t.getAttribute(\"data-button-hashtag\")};return i.forIn(n,function(t,n){var r=e[t];e[t]=u.hasValue(r)?r:n}),e.screenName=e.screenName||e.screen_name,e.buttonHashtag=e.buttonHashtag||e.button_hashtag||e.hashtag,r.present(t,d)&&(e.type=\"hashtag\"),r.present(t,l)&&(e.type=\"mention\"),e}(t),t.parentNode,t)})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return n.e(3).then(function(r){var o;try{o=n(90),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(0);t.exports=r.aug({},n(151),n(152),n(153),n(154),n(155),n(156),n(157))},function(t,e,n){var r=n(56),i=n(16)([\"userId\"],{},r);t.exports={createDMButton:i}},function(t,e,n){var r=n(59),i=n(16)([\"screenName\"],{},r);t.exports={createFollowButton:i}},function(t,e,n){var r=n(61),i=n(16)([\"momentId\"],{},r);t.exports={createMoment:i}},function(t,e,n){var r=n(62),i=n(16)([\"username\"],{},r);t.exports={createPeriscopeOnAirButton:i}},function(t,e,n){var r=n(😎,i=n(12),o=n(3),s=n(0),a=n(4),u=n(63),c=n(64),d=n(16)([],{},c),l=n(6),f=\"Embedded grids have been deprecated. Please use twttr.widgets.createTimeline instead. More info: https://twittercommunity.com/t/update-on-the-embedded-grid-display-type/119564.\",h={createTimeline😛,createGridFromCollection:function(t){var e😒.toRealArray(arguments).slice(1),n={sourceType:\"collection\",id:t};return e.unshift(n),i.publicLog(f),p.apply(this,e)}};function p(t){var e,n😒.toRealArray(arguments).slice(1);return a.isString(t)||a.isNumber(t)?l.reject(\"Embedded timelines with widget settings have been deprecated. See https://twittercommunity.com/t/deprecating-widget-settings/102295.\")😒.isObject(t)?(t=t||{},n.forEach(function(t){s.isType(\"object\",t)&&function(t){t.ariaLive=t.ariaPolite}(e=t)}),e||(e={},n.push(e)),t.lang=e.lang,t.tweetLimit=e.tweetLimit,t.showReplies=e.showReplies,e.dataSource=u(t),d.apply(this,n)):l.reject(\"data source must be an object.\")}o.isTwitterURL(r.href)&&(h.createTimelinePreview=function(t,e,n){var r={previewParams:t,useLegacyDefaults:!0,isPreviewTimeline:!0};return r.dataSource=u(r),d(e,r,n)}),t.exports=h},function(t,e,n){var r,i=n(0),o=n(65),s=n(16),a😦r😒([\"tweetId\"],{},o),function(){return i.toRealArray(arguments).slice(1).forEach(function(t){i.isType(\"object\",t)&&(t.hideCard=\"none\"==t.cards||\"hidden\"==t.cards,t.hideThread=\"none\"==t.conversation||\"hidden\"==t.conversation)}),r.apply(this,arguments)});t.exports={createTweet:a,createTweetEmbed:a,createVideo:a}},function(t,e,n){var r=n(0),i=n(66),o=n(16),s😮([\"url\"],{type:\"share\"},i),a😮([\"buttonHashtag\"],{type:\"hashtag\"},i),u😮([\"screenName\"],{type:\"mention\"},i);function c(t){return function(){return r.toRealArray(arguments).slice(1).forEach(function(t){r.isType(\"object\",t)&&(t.screenName=t.screenName||t.screen_name,t.buttonHashtag=t.buttonHashtag||t.button_hashtag||t.hashtag)}),t.apply(this,arguments)}}t.exports={createShareButton:c(s),createHashtagButton:c(a),createMentionButton:c(u)}},function(t,e,n){var r,i,o,s=n(5),a=n(1),u😮,c😦],d😒.createElement(\"a\");function l(){var t,e;for(u=1,t😮,e=c.length;t<e;t++)c[t]()}/^loade|c/.test(s.readyState)&&(u=1),s.addEventListener&&s.addEventListener(\"DOMContentLoaded\",i=function(){s.removeEventListener(\"DOMContentLoaded\",i,!1),l()},!1),d.doScroll&&s.attachEvent(\"onreadystatechange\",r=function(){/^c/.test(s.readyState)&&(s.detachEvent(\"onreadystatechange\",r),l())}),o😛.doScroll?function(t){a.self!=a.top?u?t():c.push(t):function(){try{d.doScroll(\"left\")}catch(e){return setTimeout(function(){o(t)},50)}t()}()}:function(t){u?t():c.push(t)},t.exports😮},function(t,e,n){var r=n(41),i=n(9);t.exports=function(){i.set(\"buildVersion\",r.version)}},function(t,e,n){n(161),n(83),n(164)},function(t,e,n){var r=n(162),i=n(28),o=n(67),s=new r,a=function(t){t.widgets&&1===t.widgets.length&&(s.start(),i.emitter.unbind(i.ALL_WIDGETS_RENDER_START,a))},u=function(t){var e;t.widgets&&1===t.widgets.length&&(e=t.widgets[0],s.end(),e.dataset&&e.dataset.tweetId&&o({duration😒.duration(),namespace:{element:\"tweet\",action:\"render\"},widgetIds😦e.dataset.tweetId]})),i.emitter.unbind(i.ALL_WIDGETS_RENDER_END,u)};i.emitter.bind(i.ALL_WIDGETS_RENDER_START,a),i.emitter.bind(i.ALL_WIDGETS_RENDER_END,u)},function(t,e,n){var r=n(163);function i(){}i.prototype.start=function(){this._startTime=r()},i.prototype.end=function(){this._duration=r()-this._startTime},i.prototype.duration=function(){return this._duration},t.exports=i},function(t,e,n){var r=n(1);t.exports=function(){return r.performance&&r.performance.now?r.performance.now():Date.now()}},function(t,e,n){var r=n(28),i=n(67),o=n(165),s=n(3),a=n(1),u=n(0),c=n(20),d=n(58);function l(t){return t.performance.getEntriesByType(\"resource\").filter(function(t){return s.isTwimgURL(t.name)||s.isTwitterURL(t.name)}).reduce(function(t,e){return t[e.name]=e.duration,t},{})}r.emitter.bind(r.ALL_WIDGETS_AND_IMAGES_LOADED,function(t){var e,n,r😦];c.hasPerformanceInformation()&&(e=l(a),d.isSupported()||(r=function(t){return t.reduce(function(t,e){return u.aug(t,l(e.contentDocument.defaultView))},{})}(t)),n=u.aug({},e,r),Object.keys(o).forEach(function(t){!function(t,e,n){var r=Object.keys(t).reduce(function(e,r){return n(r)?e+t[r]:e},0);i({duration:r,namespace:{element:e,action:\"resource\"}})}(n,t,o[t])}))})},function(t,e,n){var r=n(3),i={all:function(){return!0},image:function(t){return r.isTwimgURL(t)},settings:function(t){return r.isSettingsURL(t)},widget_iframe:function(t){return r.isWidgetIframeURL(t)}};t.exports=i}])));",
            "</script>",
            "<p>Original data from <a href=\"https://github.com/drewconway/ZIA/tree/master/R/Very%20Data%20Christmas\">Drew Conway</a></p>"
          ]
        },
        {
          "lectureTitle": "Will you buy a christmas tree? - a pie chart",
          "lectureLines": [
            "<h1 id=\"challenge-5\">Challenge</h1>",
            "<p>Not everyone buys a Christmas tree. 🎄 Draw a donut chart of people’s thoughts.</p>",
            "<p><a href=\"https://reactviz.holiday/datasets/statistic_id644150_christmas-tree_-purchase-plans-among-us-consumers-2017.xlsx\">Dataset</a></p>",
            "<h1 id=\"my-solution-5\">My Solution</h1>",
            "<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/aaqfCnE0G6s\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen>",
            "</iframe>",
            "<iframe src=\"https://codesandbox.io/embed/zlkrm04jjl?fontsize=14\" style=\"width:100%; height:500px; border😮; border-radius: 4px; overflow:hidden;\" sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\">",
            "</iframe>",
            "<p>This donut chart build was short and sweet. D3 has all the ingredients we need, Chroma’s got the colors, d3-svg-legend has nice legend stuff. Oh and we used it as an excuse to update my <a href=\"https://d3blackbox.com\">d3blackbox</a> library so it actually exports the hooks version.</p>",
            "<p>Thought it did, had it in the docs, published version didn’t have it. 20 day old issue report on GitHub. Oops 😅</p>",
            "<p>You can see data loading in the Codesandbox above. Here’s the fun stuff</p>",
            "<h2 id=\"react-and-d3-pie-chart-tutorial-with-react-hooks\">React and D3 pie chart tutorial with React hooks</h2>",
            "<p>Pie charts and donut charts are the same. If there’s a hole in the middle it’s a donut, otherwise it’s a pie. You should always make donuts because donuts are delicious and easier to read due to intricacies around area size perception.</p>",
            "<p>Our code fits in a functional React component</p>",
            "<div class=\"sourceCode\" id=\"cb234\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb234-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> TreeDonut <span class=\"op\" style=\"color: #666666;\">=</span> (<span class=\"op\" style=\"color: #666666;\">{</span> data<span class=\"op\" style=\"color: #666666;\">,</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y<span class=\"op\" style=\"color: #666666;\">,</span> r <span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{};</span></a></code></pre></div>",
            "<p>Takes <code style=\"white-space: pre-wrap;\">data</code>, <code style=\"white-space: pre-wrap;\">x,y</code> coordinates for positioning, and <code style=\"white-space: pre-wrap;\">r</code> for the total radius.</p>",
            "<p>We begin with a bunch of D3 objects. Scales, pie generators, things like that.</p>",
            "<div class=\"sourceCode\" id=\"cb235\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb235-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> pie <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">pie</span>().<span class=\"at\" style=\"color: #7d9029;\">value</span>(d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">percentage</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb235-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> arc <span class=\"op\" style=\"color: #666666;\">=</span> d3</a>",
            "<a class=\"sourceLine\" id=\"cb235-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  .<span class=\"at\" style=\"color: #7d9029;\">arc</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb235-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  .<span class=\"at\" style=\"color: #7d9029;\">innerRadius</span>(<span class=\"dv\" style=\"color: #40a070;\">90</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb235-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  .<span class=\"at\" style=\"color: #7d9029;\">outerRadius</span>(r)</a>",
            "<a class=\"sourceLine\" id=\"cb235-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  .<span class=\"at\" style=\"color: #7d9029;\">padAngle</span>(<span class=\"fl\" style=\"color: #40a070;\">0.01</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb235-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> color <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">chroma</span>.<span class=\"va\" style=\"color: #19177c;\">brewer</span>.<span class=\"at\" style=\"color: #7d9029;\">set1</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb235-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> colorScale <span class=\"op\" style=\"color: #666666;\">=</span> d3</a>",
            "<a class=\"sourceLine\" id=\"cb235-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  .<span class=\"at\" style=\"color: #7d9029;\">scaleOrdinal</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb235-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  .<span class=\"at\" style=\"color: #7d9029;\">domain</span>(<span class=\"va\" style=\"color: #19177c;\">data</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">answer</span>))</a>",
            "<a class=\"sourceLine\" id=\"cb235-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  .<span class=\"at\" style=\"color: #7d9029;\">range</span>(color)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>Here’s what they do:</p>",
            "<ol type=\"1\">",
            "<li>The <code style=\"white-space: pre-wrap;\">d3.pie()</code> generator takes data and returns everything you need to create a pie chart. Start and end angles of each slice and a few extras.</li>",
            "<li>The <code style=\"white-space: pre-wrap;\">d3.arc()</code> generator creates path definitions for pie slices. We define inner and outer radiuses and add some padding.</li>",
            "<li>We take the <code style=\"white-space: pre-wrap;\">color</code> list from one of Chroma’s pre-defined colors.</li>",
            "<li>We’ll use <code style=\"white-space: pre-wrap;\">colorScale</code> for the legend. Maps answers from our dataset to their colors</li>",
            "</ol>",
            "<p>Next thing we need is some state for the overlay effect. It says which slice is currently selected.</p>",
            "<div class=\"sourceCode\" id=\"cb236\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb236-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> [selected<span class=\"op\" style=\"color: #666666;\">,</span> setSelected] <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">useState</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">null</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>Hooks make this way too easy. 😛 We’ll use <code style=\"white-space: pre-wrap;\">setSelected</code> to set the value and store it in <code style=\"white-space: pre-wrap;\">selected</code>.</p>",
            "<p>Then we render it all with a loop.</p>",
            "<div class=\"sourceCode\" id=\"cb237\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb237-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb237-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">&lt;</span>g transform<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"vs\" style=\"color: #4070a0;\">`translate(</span><span class=\"sc\" style=\"color: #4070a0;\">${</span>x<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">, </span><span class=\"sc\" style=\"color: #4070a0;\">${</span>y<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">)`</span><span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb237-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"at\" style=\"color: #7d9029;\">pie</span>(data).<span class=\"at\" style=\"color: #7d9029;\">map</span>(d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb237-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>path</a>",
            "<a class=\"sourceLine\" id=\"cb237-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        d<span class=\"op\" style=\"color: #666666;\">={</span>arc</a>",
            "<a class=\"sourceLine\" id=\"cb237-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          .<span class=\"at\" style=\"color: #7d9029;\">outerRadius</span>(selected <span class=\"op\" style=\"color: #666666;\">===</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">index</span> <span class=\"op\" style=\"color: #666666;\">?</span> r <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"dv\" style=\"color: #40a070;\">10</span> : r)</a>",
            "<a class=\"sourceLine\" id=\"cb237-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          .<span class=\"at\" style=\"color: #7d9029;\">innerRadius</span>(selected <span class=\"op\" style=\"color: #666666;\">===</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">index</span> <span class=\"op\" style=\"color: #666666;\">?</span> <span class=\"dv\" style=\"color: #40a070;\">85</span> : <span class=\"dv\" style=\"color: #40a070;\">90</span>)(d)<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb237-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        fill<span class=\"op\" style=\"color: #666666;\">={</span>color[<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">index</span>]<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb237-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        onMouseOver<span class=\"op\" style=\"color: #666666;\">={</span>() <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"at\" style=\"color: #7d9029;\">setSelected</span>(<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">index</span>)<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb237-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        onMouseOut<span class=\"op\" style=\"color: #666666;\">={</span>() <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"at\" style=\"color: #7d9029;\">setSelected</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">null</span>)<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb237-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb237-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    ))<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb237-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>Legend x<span class=\"op\" style=\"color: #666666;\">={</span>r<span class=\"op\" style=\"color: #666666;\">}</span> y<span class=\"op\" style=\"color: #666666;\">={</span>r<span class=\"op\" style=\"color: #666666;\">}</span> colorScale<span class=\"op\" style=\"color: #666666;\">={</span>colorScale<span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb237-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  &lt;/g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb237-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>A grouping element positions our piechart from the center out.</p>",
            "<p>Inside that group, we iterate over the output of our <code style=\"white-space: pre-wrap;\">pie()</code> generator and render a <code style=\"white-space: pre-wrap;\">&lt;path&gt;</code> for each entry. Its shape comes from the <code style=\"white-space: pre-wrap;\">arc</code> generator.</p>",
            "<p>We update inner and outer radius on the fly depending on whether the current slice is highlighted. This creates the become-bigger-on-mouse-over effect. We drive it with mouse event callbacks and the <code style=\"white-space: pre-wrap;\">setSelected</code> method.</p>",
            "<p><code style=\"white-space: pre-wrap;\">setSelected</code> stores the current selected index in <code style=\"white-space: pre-wrap;\">selected</code>. This triggers a re-render. The selected slice shows as bigger.</p>",
            "<p>Perfect 👌</p>",
            "<h2 id=\"ps-the-legend-component-with-hooks-is-a-piece-of-cake\">PS: The legend component with hooks is a piece of cake</h2>",
            "<p><code style=\"white-space: pre-wrap;\">d3-svg-legend</code> does it all for us. We use <code style=\"white-space: pre-wrap;\">useD3</code> from my d3blackbox to make it work.</p>",
            "<div class=\"sourceCode\" id=\"cb238\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb238-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> Legend <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(<span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y<span class=\"op\" style=\"color: #666666;\">,</span> colorScale <span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb238-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> ref <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">useD3</span>(anchor <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb238-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">select</span>(anchor).<span class=\"at\" style=\"color: #7d9029;\">call</span>(<span class=\"va\" style=\"color: #19177c;\">d3legend</span>.<span class=\"at\" style=\"color: #7d9029;\">legendColor</span>().<span class=\"at\" style=\"color: #7d9029;\">scale</span>(colorScale))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb238-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb238-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb238-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">&lt;</span>g transform<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"vs\" style=\"color: #4070a0;\">`translate(</span><span class=\"sc\" style=\"color: #4070a0;\">${</span>x<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">, </span><span class=\"sc\" style=\"color: #4070a0;\">${</span>y<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">)`</span><span class=\"op\" style=\"color: #666666;\">}</span> ref<span class=\"op\" style=\"color: #666666;\">={</span>ref<span class=\"op\" style=\"color: #666666;\">}</span> /&gt;<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb238-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">};</span></a></code></pre></div>",
            "<p>Lets us render any D3 code into an anchor element and wrap it in a React component. Behind the scenes <code style=\"white-space: pre-wrap;\">useD3</code> is a combination of <code style=\"white-space: pre-wrap;\">useRef</code> and <code style=\"white-space: pre-wrap;\">useEffect</code>.</p>",
            "<p>Enjoy ✌️</p>"
          ]
        },
        {
          "lectureTitle": "What goes in Chrstmas stockings - a piechart with tooltips",
          "lectureLines": [
            "<h1 id=\"challenge-6\">Challenge</h1>",
            "<p>Ever seen Christmas stockings? They get stuffed with all sorts of stuff. Build a donut chart of what’s what and add a mouse hover effect that shows what a slice represents.</p>",
            "<p><a href=\"https://reactviz.holiday/datasets/statistic_id946574_gifts-likely-to-be-put-in-childs-christmas-stocking-in-the-us-in-2018.xlsx\">Dataset</a></p>",
            "<h1 id=\"my-solution-6\">My Solution</h1>",
            "<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/8IOHiwI74Fc\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen>",
            "</iframe>",
            "<iframe src=\"https://codesandbox.io/embed/7mlxwrjw4x?fontsize=14\" style=\"width:100%; height:500px; border😮; border-radius: 4px; overflow:hidden;\" sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\">",
            "</iframe>",
            "<p>Tooltips … tooltips are hard. So simple in theory yet organizing it into sensible code will wreck your mind. 🤯</p>",
            "<p>Your goal is to build this:</p>",
            "<ol type=\"1\">",
            "<li>A tooltip component</li>",
            "<li>Some way to store tooltip position and content</li>",
            "<li>Ability to change that on mouse over</li>",
            "</ol>",
            "<p>Mousing over a thing - slice of the donut chart in this case - updates positioning and content. This triggers a tooltip re-render. Tooltip shows up where you need saying what you want.</p>",
            "<p>So how do you organize that in a way that makes sense?</p>",
            "<p>🤔</p>",
            "<p>You can watch me flounder around trying different solutions in the stream above. In the end we went with a combination of state in the <code style=\"white-space: pre-wrap;\">App</code> component and React Context shared between everyone else.</p>",
            "<p>We’re using React hooks because hooks are the hot new kid on the block and learning new coding paradigms is fun.</p>",
            "<h2 id=\"managing-and-sharing-tooltip-state\">Managing and sharing tooltip state</h2>",
            "<div class=\"sourceCode\" id=\"cb239\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb239-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> [tooltip<span class=\"op\" style=\"color: #666666;\">,</span> setTooltip] <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">useState</span>(<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb239-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"dt\" style=\"color: #902000;\">show</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">false</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb239-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb239-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb239-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"dt\" style=\"color: #902000;\">content</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb239-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"dt\" style=\"color: #902000;\">orientLeft</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">false</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb239-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>Our <code style=\"white-space: pre-wrap;\">tooltip</code> state holds a <code style=\"white-space: pre-wrap;\">show</code> flag, tooltip coordinates, and <code style=\"white-space: pre-wrap;\">content</code>. <code style=\"white-space: pre-wrap;\">orientLeft</code> is the nascent beginnings of a fuller tooltip API. The tooltip component is going to consume this context and use it to render itself.</p>",
            "<p>To make changing this state easier, we sneakily include <code style=\"white-space: pre-wrap;\">setTooltip</code> in the object passed into React Context itself.</p>",
            "<div class=\"sourceCode\" id=\"cb240\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb240-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">&lt;</span><span class=\"va\" style=\"color: #19177c;\">TooltipContext</span>.<span class=\"at\" style=\"color: #7d9029;\">Provider</span> value<span class=\"op\" style=\"color: #666666;\">={{</span> ...<span class=\"at\">tooltip</span><span class=\"op\">,</span> setTooltip <span class=\"op\">}}&gt;</span></a></code></pre></div>",
            "<p>Now any consumer can change values in context. Whoa</p>",
            "<p><img src=\"https://media.giphy.com/media/SDogLD4FOZMM8/giphy.gif\"></p>",
            "<h2 id=\"the-tooltip-component\">The &lt;Tooltip&gt; component</h2>",
            "<p>Our <code style=\"white-space: pre-wrap;\">&lt;Tooltip&gt;</code> component doesn’t do much on its own. It’s a wrapper that handles positioning, visibility, and supports a nascent orientation API. We can use <code style=\"white-space: pre-wrap;\">orientLeft</code> to align our tooltip left or right. A fuller API would also have top/bottom and a bunch of similar features.</p>",
            "<div class=\"sourceCode\" id=\"cb241\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb241-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> Tooltip <span class=\"op\" style=\"color: #666666;\">=</span> (<span class=\"op\" style=\"color: #666666;\">{</span> width<span class=\"op\" style=\"color: #666666;\">,</span> height<span class=\"op\" style=\"color: #666666;\">,</span> children <span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb241-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y<span class=\"op\" style=\"color: #666666;\">,</span> show<span class=\"op\" style=\"color: #666666;\">,</span> orientLeft <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">useContext</span>(TooltipContext)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb241-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb241-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb241-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>g</a>",
            "<a class=\"sourceLine\" id=\"cb241-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      transform<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"vs\" style=\"color: #4070a0;\">`translate(</span><span class=\"sc\" style=\"color: #4070a0;\">${</span>orientLeft <span class=\"op\" style=\"color: #666666;\">?</span> x <span class=\"op\" style=\"color: #666666;\">-</span> width : x<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">, </span><span class=\"sc\" style=\"color: #4070a0;\">${</span>y<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">)`</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb241-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      style<span class=\"op\" style=\"color: #666666;\">={{</span> <span class=\"dt\">visibility</span><span class=\"op\">:</span> show <span class=\"op\">?</span> <span class=\"st\">&#39;visible&#39;</span> : <span class=\"st\">&#39;hidden&#39;</span> <span class=\"op\">}}</span></a>",
            "<a class=\"sourceLine\" id=\"cb241-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb241-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>foreignObject width<span class=\"op\" style=\"color: #666666;\">={</span>width<span class=\"op\" style=\"color: #666666;\">}</span> height<span class=\"op\" style=\"color: #666666;\">={</span>height<span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb241-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">{</span>children<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb241-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      &lt;/foreignObject<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb241-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    &lt;/g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb241-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb241-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">};</span></a></code></pre></div>",
            "<p><code style=\"white-space: pre-wrap;\">useContext</code> takes the <code style=\"white-space: pre-wrap;\">TooltipContext</code> object and returns its current value on every render. We use destructuring to get at the parts we need: coordinates, show flag, orientation.</p>",
            "<p>Tooltip then renders a <code style=\"white-space: pre-wrap;\">&lt;g&gt;</code> grouping element with positioning based on the orientation, and visibility based on the flag. Inside it wraps children in a sized <code style=\"white-space: pre-wrap;\">foreignObject</code> element. This allows us to embed HTML inside SVG.</p>",
            "<p>HTML is better for tooltip content than SVG because HTML supports text automatic layouting. Set a width and the browser will figure out what to do with long strings. Don’t get that with SVG.</p>",
            "<p>The <code style=\"white-space: pre-wrap;\">Tooltip.js</code> file also exports a React Context.</p>",
            "<div class=\"sourceCode\" id=\"cb242\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb242-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> TooltipContext <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">createContext</span>(<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb242-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"dt\" style=\"color: #902000;\">show</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">false</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb242-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb242-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb242-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"dt\" style=\"color: #902000;\">orientLeft</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">false</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb242-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"dt\" style=\"color: #902000;\">content</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb242-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb242-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb242-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb242-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"im\">default</span> Tooltip<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb242-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">export</span> <span class=\"op\" style=\"color: #666666;\">{</span> TooltipContext <span class=\"op\" style=\"color: #666666;\">};</span></a></code></pre></div>",
            "<p>Makes it easier to share the same context between different consumers.</p>",
            "<h2 id=\"render-tooltip-in-app\">Render Tooltip in App</h2>",
            "<p>Rendering our tooltip happens in the main App component. It also holds tooltip state that gets passed into React Context.</p>",
            "<div class=\"sourceCode\" id=\"cb243\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb243-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> Tooltip<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"op\" style=\"color: #666666;\">{</span> TooltipContext <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;./Tooltip&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb243-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb243-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb243-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb243-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span> <span class=\"at\" style=\"color: #7d9029;\">App</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb243-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> [tooltip<span class=\"op\" style=\"color: #666666;\">,</span> setTooltip] <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">useState</span>(<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb243-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">show</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">false</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb243-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb243-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb243-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">content</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb243-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">orientLeft</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">false</span></a>",
            "<a class=\"sourceLine\" id=\"cb243-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb243-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb243-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb243-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span><span class=\"va\" style=\"color: #19177c;\">TooltipContext</span>.<span class=\"at\" style=\"color: #7d9029;\">Provider</span> value<span class=\"op\" style=\"color: #666666;\">={{</span> ...<span class=\"at\">tooltip</span><span class=\"op\">,</span> setTooltip <span class=\"op\">}}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb243-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>svg width<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;800&quot;</span> height<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;600&quot;</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb243-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          <span class=\"op\" style=\"color: #666666;\">{*</span> <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// where you put tooltip triggerers *}</span></a>",
            "<a class=\"sourceLine\" id=\"cb243-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb243-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          <span class=\"op\" style=\"color: #666666;\">&lt;</span>Tooltip width<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">150</span><span class=\"op\" style=\"color: #666666;\">}</span> height<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">60</span><span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb243-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"op\" style=\"color: #666666;\">&lt;</span>TooltipP<span class=\"op\" style=\"color: #666666;\">&gt;{</span><span class=\"va\" style=\"color: #19177c;\">tooltip</span>.<span class=\"at\" style=\"color: #7d9029;\">content</span><span class=\"op\" style=\"color: #666666;\">}</span>&lt;/TooltipP<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb243-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          &lt;/Tooltip<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb243-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        &lt;/svg<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb243-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      &lt;/<span class=\"va\" style=\"color: #19177c;\">TooltipContext</span>.<span class=\"at\" style=\"color: #7d9029;\">Provider</span><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb243-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb243-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>We import tooltip and its context, then <code style=\"white-space: pre-wrap;\">useState</code> to create a local <code style=\"white-space: pre-wrap;\">tooltip</code> state and its setter. Pass both of those in a common object into a <code style=\"white-space: pre-wrap;\">&lt;TooltipContext.Provider</code>.</p>",
            "<p>That part took me a while to figure out. Yes with React hooks you still need to render Providers. Hooks are consumer side.</p>",
            "<p>Render our Tooltip as a sibling to all the other SVG stuff. Any components that want to render a tooltip will share the same one. That’s how it usually works.</p>",
            "<p><code style=\"white-space: pre-wrap;\">&lt;TooltipP&gt;</code> is a styled component by the way.</p>",
            "<div class=\"sourceCode\" id=\"cb244\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb244-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> TooltipP <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">styled</span>.<span class=\"at\" style=\"color: #7d9029;\">p</span><span class=\"vs\" style=\"color: #4070a0;\">`</span></a>",
            "<a class=\"sourceLine\" id=\"cb244-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"vs\" style=\"color: #4070a0;\">  background: </span><span class=\"sc\" style=\"color: #4070a0;\">${</span><span class=\"at\" style=\"color: #7d9029;\">chroma</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;green&#39;</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb244-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">brighten</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb244-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">hex</span>()<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb244-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"vs\" style=\"color: #4070a0;\">  border-radius: 3px;</span></a>",
            "<a class=\"sourceLine\" id=\"cb244-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"vs\" style=\"color: #4070a0;\">  padding: 1em;</span></a>",
            "<a class=\"sourceLine\" id=\"cb244-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"vs\" style=\"color: #4070a0;\">`</span><span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>Nice green background, rounded corners, and a bit of padding.</p>",
            "<figure>",
            "<img src=\"https://github.com/Swizec/datavizAdvent/raw/master/src/content/gift-stockings/tooltip-closeup.png\" alt=\"I am no designer\"><figcaption>I am no designer</figcaption>",
            "</figure>",
            "<p>I am no designer 😅</p>",
            "<h2 id=\"trigger-tooltips-from-donuts\">Trigger tooltips from donuts</h2>",
            "<p>Donut code itself is based on code we built for the <a href=\"https://reactviz.holiday/buy-a-tree/\">Will you buy a Christmas tree?</a> donut chart.</p>",
            "<p>We split it into the main donut component and a component for each slice, or <code style=\"white-space: pre-wrap;\">&lt;Arc&gt;</code>. Makes it easier to calculate coordinates for tooltips. Means we ca handle slice highlighted state locally in its own component.</p>",
            "<div class=\"sourceCode\" id=\"cb245\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb245-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> Arc <span class=\"op\" style=\"color: #666666;\">=</span> (<span class=\"op\" style=\"color: #666666;\">{</span> d<span class=\"op\" style=\"color: #666666;\">,</span> r<span class=\"op\" style=\"color: #666666;\">,</span> color<span class=\"op\" style=\"color: #666666;\">,</span> offsetX<span class=\"op\" style=\"color: #666666;\">,</span> offsetY <span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb245-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> [selected<span class=\"op\" style=\"color: #666666;\">,</span> setSelected] <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">useState</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">false</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb245-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> tooltipContext <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">useContext</span>(TooltipContext)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb245-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb245-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> arc <span class=\"op\" style=\"color: #666666;\">=</span> d3</a>",
            "<a class=\"sourceLine\" id=\"cb245-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">arc</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb245-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">outerRadius</span>(selected <span class=\"op\" style=\"color: #666666;\">?</span> r <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"dv\" style=\"color: #40a070;\">10</span> : r)</a>",
            "<a class=\"sourceLine\" id=\"cb245-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">innerRadius</span>(selected <span class=\"op\" style=\"color: #666666;\">?</span> r <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"dv\" style=\"color: #40a070;\">80</span> : r <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"dv\" style=\"color: #40a070;\">75</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb245-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">padAngle</span>(<span class=\"fl\" style=\"color: #40a070;\">0.01</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb245-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb245-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> mouseOver <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb245-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> [x<span class=\"op\" style=\"color: #666666;\">,</span> y] <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">arc</span>.<span class=\"at\" style=\"color: #7d9029;\">centroid</span>(d)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb245-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb245-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">setSelected</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">true</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb245-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">tooltipContext</span>.<span class=\"at\" style=\"color: #7d9029;\">setTooltip</span>(<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb245-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"dt\" style=\"color: #902000;\">show</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">index</span> <span class=\"op\" style=\"color: #666666;\">!==</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">null</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb245-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> x <span class=\"op\" style=\"color: #666666;\">+</span> offsetX <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"dv\" style=\"color: #40a070;\">30</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb245-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> y <span class=\"op\" style=\"color: #666666;\">+</span> offsetY <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"dv\" style=\"color: #40a070;\">30</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb245-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"dt\" style=\"color: #902000;\">content</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"va\" style=\"color: #19177c;\">data</span>.<span class=\"at\" style=\"color: #7d9029;\">stuffer</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb245-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"dt\" style=\"color: #902000;\">orientLeft</span><span class=\"op\" style=\"color: #666666;\">:</span> offsetX <span class=\"op\" style=\"color: #666666;\">&lt;</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb245-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb245-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb245-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb245-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> mouseOut <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb245-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">setSelected</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">null</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb245-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">tooltipContext</span>.<span class=\"at\" style=\"color: #7d9029;\">setTooltip</span>(<span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">show</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">false</span> <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb245-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb245-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb245-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb245-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>path</a>",
            "<a class=\"sourceLine\" id=\"cb245-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      d<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"at\" style=\"color: #7d9029;\">arc</span>(d)<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb245-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      fill<span class=\"op\" style=\"color: #666666;\">={</span>color<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb245-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      onMouseOver<span class=\"op\" style=\"color: #666666;\">={</span>mouseOver<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb245-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      onMouseOut<span class=\"op\" style=\"color: #666666;\">={</span>mouseOut<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb245-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      style<span class=\"op\" style=\"color: #666666;\">={{</span> <span class=\"dt\">cursor</span><span class=\"op\">:</span> <span class=\"st\">&#39;pointer&#39;</span> <span class=\"op\">}}</span></a>",
            "<a class=\"sourceLine\" id=\"cb245-36\" title=\"36\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb245-37\" title=\"37\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb245-38\" title=\"38\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">};</span></a></code></pre></div>",
            "<p>Here you can see a downside of hooks: They can lead to pretty sizeable functions if you aren’t careful.</p>",
            "<p>We create a <code style=\"white-space: pre-wrap;\">selected</code> flag and its setter with a <code style=\"white-space: pre-wrap;\">useState</code> hook and we hook into our tooltip context with <code style=\"white-space: pre-wrap;\">useContext</code>. We’ll be able to use that <code style=\"white-space: pre-wrap;\">setTooltip</code> method we added to show a tooltip.</p>",
            "<p>Then we’ve got that <code style=\"white-space: pre-wrap;\">const arc</code> stuff. It creates an arc path shape generator. Radius depends on <code style=\"white-space: pre-wrap;\">selected</code> status.</p>",
            "<p>All that is followed by our mouse eve handling fucntions.</p>",
            "<div class=\"sourceCode\" id=\"cb246\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb246-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> mouseOver <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb246-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> [x<span class=\"op\" style=\"color: #666666;\">,</span> y] <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">arc</span>.<span class=\"at\" style=\"color: #7d9029;\">centroid</span>(d)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb246-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb246-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">setSelected</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">true</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb246-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">tooltipContext</span>.<span class=\"at\" style=\"color: #7d9029;\">setTooltip</span>(<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb246-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">show</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">index</span> <span class=\"op\" style=\"color: #666666;\">!==</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">null</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb246-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> x <span class=\"op\" style=\"color: #666666;\">+</span> offsetX <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"dv\" style=\"color: #40a070;\">30</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb246-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> y <span class=\"op\" style=\"color: #666666;\">+</span> offsetY <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"dv\" style=\"color: #40a070;\">30</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb246-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">content</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"va\" style=\"color: #19177c;\">data</span>.<span class=\"at\" style=\"color: #7d9029;\">stuffer</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb246-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">orientLeft</span><span class=\"op\" style=\"color: #666666;\">:</span> offsetX <span class=\"op\" style=\"color: #666666;\">&lt;</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb246-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb246-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">};</span></a></code></pre></div>",
            "<p><code style=\"white-space: pre-wrap;\">mouseOver</code> is the active function. Mouse over an arc and it calculates its center, sets the arc to <code style=\"white-space: pre-wrap;\">selected</code>, and pushes necessary info into tooltip state. This triggers a re-render of the tooltip component and makes it show up.</p>",
            "<p>Technically it triggers a re-render of our whole app because it’s tied to <code style=\"white-space: pre-wrap;\">App</code> state. You could split that out in a bigger app. Or rely on React being smart enough to figure out the smallest possible re-render.</p>",
            "<p>Deselecting the arc happens in a <code style=\"white-space: pre-wrap;\">mouseOut</code> function</p>",
            "<div class=\"sourceCode\" id=\"cb247\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb247-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> mouseOut <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb247-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">setSelected</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">false</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb247-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">tooltipContext</span>.<span class=\"at\" style=\"color: #7d9029;\">setTooltip</span>(<span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">show</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">false</span> <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb247-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">};</span></a></code></pre></div>",
            "<p>Set <code style=\"white-space: pre-wrap;\">selected</code> to falls and hide the tooltip.</p>",
            "<p>With all that defined, rendering our arc is a matter of returning a path with some attributes.</p>",
            "<div class=\"sourceCode\" id=\"cb248\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb248-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb248-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">&lt;</span>path</a>",
            "<a class=\"sourceLine\" id=\"cb248-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    d<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"at\" style=\"color: #7d9029;\">arc</span>(d)<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb248-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    fill<span class=\"op\" style=\"color: #666666;\">={</span>color<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb248-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    onMouseOver<span class=\"op\" style=\"color: #666666;\">={</span>mouseOver<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb248-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    onMouseOut<span class=\"op\" style=\"color: #666666;\">={</span>mouseOut<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb248-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    style<span class=\"op\" style=\"color: #666666;\">={{</span> <span class=\"dt\">cursor</span><span class=\"op\">:</span> <span class=\"st\">&#39;pointer&#39;</span> <span class=\"op\">}}</span></a>",
            "<a class=\"sourceLine\" id=\"cb248-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb248-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>Use the arc generator to create the shape, fill it with color, set up mouse events, add a dash of styling.</p>",
            "<h3 id=\"render-a-donut\">Render a donut 🍩</h3>",
            "<p>We did all the complicated state and tooltip stuff in individual arcs. The donut component uses a <code style=\"white-space: pre-wrap;\">pie</code> generator and renders them in a loop.</p>",
            "<div class=\"sourceCode\" id=\"cb249\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb249-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> StockingDonut <span class=\"op\" style=\"color: #666666;\">=</span> (<span class=\"op\" style=\"color: #666666;\">{</span> data<span class=\"op\" style=\"color: #666666;\">,</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y<span class=\"op\" style=\"color: #666666;\">,</span> r <span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb249-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> pie <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">pie</span>().<span class=\"at\" style=\"color: #7d9029;\">value</span>(d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">percentage</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb249-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb249-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> color <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">chroma</span>.<span class=\"va\" style=\"color: #19177c;\">brewer</span>.<span class=\"at\" style=\"color: #7d9029;\">set3</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb249-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb249-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>g transform<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"vs\" style=\"color: #4070a0;\">`translate(</span><span class=\"sc\" style=\"color: #4070a0;\">${</span>x<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">, </span><span class=\"sc\" style=\"color: #4070a0;\">${</span>y<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">)`</span><span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb249-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"at\" style=\"color: #7d9029;\">pie</span>(data).<span class=\"at\" style=\"color: #7d9029;\">map</span>(d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb249-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>Arc</a>",
            "<a class=\"sourceLine\" id=\"cb249-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          d<span class=\"op\" style=\"color: #666666;\">={</span>d<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb249-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          color<span class=\"op\" style=\"color: #666666;\">={</span>color[<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">index</span>]<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb249-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          r<span class=\"op\" style=\"color: #666666;\">={</span>r<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb249-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          key<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">index</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb249-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          offsetX<span class=\"op\" style=\"color: #666666;\">={</span>x<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb249-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          offsetY<span class=\"op\" style=\"color: #666666;\">={</span>y<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb249-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb249-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      ))<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb249-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    &lt;/g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb249-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb249-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">};</span></a></code></pre></div>",
            "<p><code style=\"white-space: pre-wrap;\">d3.pie</code> takes our data and returns all the info you need to build a donut. Start angles, end angles, stuff like that.</p>",
            "<p>Render a grouping element that centers our donut on <code style=\"white-space: pre-wrap;\">(x, y)</code> coordiantes, render <code style=\"white-space: pre-wrap;\">&lt;Arc&gt;</code>s in a loop.</p>",
            "<p>Make sure to pass offsetX and offsetY into each arc. Arcs are positioned relatively to our donut center, which means they don’t know their absolute position to pass into the tooltip context. Offsets help with that.</p>",
            "<h2 id=\"section-1\">✌️</h2>",
            "<p>And that’s how you make tooltips in SVG with React hooks. Same concepts and complications apply if you’re using normal React state or even Redux or something.</p>",
            "<p>You need a global way to store info about the tooltip and some way to trigger it from sibling components.</p>",
            "<p><img src=\"https://github.com/Swizec/datavizAdvent/raw/master/src/content/gift-stockings/christmas-stockings.png\"></p>",
            "<h2 id=\"ps-a-neat-way-to-usedata\">PS: A neat way to useData</h2>",
            "<blockquote class=\"twitter-tweet\" data-lang=\"en\">",
            "<p lang=\"en\" dir=\"ltr\">",
            "Yeah I've been doing that pattern a lot.<br><br>const [state, setState] = useState(null)<br>useEffect(() =&gt; doStuff().then(setState), [!state])",
            "</p>",
            "— Swizec Teller (<span class=\"citation\" data-cites=\"Swizec\">@Swizec</span>) <a href=\"https://twitter.com/Swizec/status/1071461874170945536?ref_src=twsrc%5Etfw\">December 8, 2018</a>",
            "</blockquote>",
            "<script async charset=\"utf-8\">",
            "Function&&Function.prototype&&Function.prototype.bind&&(/MSIE ([6789]|10)/.test(navigator.userAgent)||(window.__twttr&&window.__twttr.widgets&&window.__twttr.widgets.loaded&&window.twttr.widgets.load&&window.twttr.widgets.load(),window.__twttr&&window.__twttr.widgets&&window.__twttr.widgets.init||function(t){function e(e){for(var n,i,o=e[0],s=e[1],a😮,c😦];a<o.length;a++)i😮[a],r[i]&&c.push(r[i][0]),r[i]😮;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]😒[n]);for(u&&u(e);c.length😉c.shift()()}var n={},r={1😮};function i(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(t){var e😦],n=r[t];if(0!==n)if(n)e.push(n[2]);else{var o=new Promise(function(e,i){n=r[t👿e,i]});e.push(n[2]😮);var s,a=document.getElementsByTagName(\"head\")[0],u=document.createElement(\"script\");u.charset=\"utf-8\",u.timeout=120,i.nc&&u.setAttribute(\"nonce\",i.nc),u.src=function(t){return i.p+\"js/\"+({0:\"moment~timeline~tweet\",2:\"dm_button\",3:\"button\",4:\"moment\",5:\"periscope_on_air\",6:\"timeline\",7:\"tweet\"}[t]||t)+\".\"+{0:\"a20574004ea824b1c047f200045ffa1e\",2:\"b573518d7182437fcff1973b0098d272\",3:\"509719336ca39171c37a321231ccaf83\",4:\"f261877d67dc45f3972d303d6b32c138\",5:\"04369ab165b401d73b183f97ed7153fd\",6:\"49693ebcd57b08708ebca7502c7c343d\",7:\"73b7ab8a56ad3263cad8d36ba66467fc\"}[t]+\".js\"}(t),s=function(e){u.onerror=u.onload=null,clearTimeout(c);var n=r[t];if(0!==n){if(n){var i=e&&(\"load\"===e.type?\"missing\":e.type),o=e&&e.target&&e.target.src,s=new Error(\"Loading chunk \"+t+\" failed.\\n(\"+i+\": \"+o+\")\");s.type=i,s.request😮,n[1](s)}r[t]=void 0}};var c=setTimeout(function(){s({type:\"timeout\",target:u})},12e4);u.onerror=u.onload😒,a.appendChild(u)}return Promise.all(e)},i.m=t,i.c=n,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,\"a\",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p=\"https://platform.twitter.com/\",i.oe=function(t){throw console.error(t),t};var o=window.__twttrll=window.__twttrll||[],s😮.push.bind(o);o.push=e,o😮.slice();for(var a😮;a<o.length;a++)e(o[a]);var u😒;i(i.s=91)}([function(t,e,n){var r=n(1);function i(t,e){var n;for(n in t)t.hasOwnProperty&&!t.hasOwnProperty(n)||e(n,t[n]);return t}function o(t){return{}.toString.call(t).match(/\\s([a-zA-Z]+)/)[1].toLowerCase()}function s(t){return t===Object(t)}function a(t){var e;if(!s(t))return!1;if(Object.keys)return!Object.keys(t).length;for(e in t)if(t.hasOwnProperty(e))return!1;return!0}function u(t){return t?Array.prototype.slice.call(t)😦]}t.exports={aug:function(t){return u(arguments).slice(1).forEach(function(e){i(e,function(e,n){t[e]=n})}),t},async:function(t,e){r.setTimeout(function(){t.call(e||null)},0)},compact:function t(e){return i(e,function(n,r){s(r)&&(t(r),a(r)&&delete e[n]),void 0!==r&&null!==r&&\"\"!==r||delete e[n]}),e},contains:function(t,e){return!(!t||!t.indexOf)&&t.indexOf(e)>-1},forIn:i,isObject😒,isEmptyObject:a,toType😮,isType:function(t,e){return t==o(e)},toRealArray:u}},function(t,e){t.exports=window},function(t,e,n){var r=n(6);t.exports=function(){var t=this;this.promise=new r(function(e,n){t.resolve=e,t.reject=n})}},function(t,e,n){var r=n(11),i😕(?:^|(?:https?😃?\\/\\/(?:www\\.)?twitter\\.com(?::\\d+)?(?😕/intent\\/(?:follow|user)\\/?\\?screen_name😐(?😕/#!)?\\/))@?([\\w]+)(?😕?|&|$)/i,o😕(?:^|(?:https?😃?\\/\\/(?:www\\.)?twitter\\.com(?::\\d+)?\\/(?:#!\\/)?[\\w_]+\\/status(?:es)?\\/)(\\d+)/i,s😕^http(s?)😕/\\/(\\w+\\.)*twitter\\.com([😕]|$)/i,a😕^http(s?)😕/\\/pbs\\.twimg\\.com\\//,u😕^#?([^.,<>!\\s/#\\-()'\"]+)$/,c😕twitter\\.com(?::\\d{2,4})?\\/intent\\/(\\w+)/,d😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/\\w+\\/timelines\\/(\\d+)/i,l😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/i\\/moments\\/(\\d+)/i,f😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/(\\w+)\\/(?:likes|favorites)/i,h😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/(\\w+)\\/lists\\/([\\w-%]+)/i,p😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/i\\/live\\/(\\d+)/i,m😕^https?😕/\\/syndication\\.twitter\\.com\\/settings/i,v😕^https?😕/\\/(localhost|platform)\\.twitter\\.com(?::\\d+)?\\/widgets\\/widget_iframe\\.(.+)/i,g😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/search\\?q😦\\w+)/i;function w(t){return\"string\"==typeof t&&i.test(t)&&RegExp.$1.length<=20}function y(t){if(w(t))return RegExp.$1}function b(t,e){var n=r.decodeURL(t);if(e=e||!1,n.screen_name=y(t),n.screen_name)return r.url(\"https://twitter.com/intent/\"+(e?\"follow\":\"user\"),n)}function _(t){return\"string\"==typeof t&&u.test(t)}function E(t){return\"string\"==typeof t&&o.test(t)}t.exports={isHashTag:_,hashTag:function(t,e){if(e=void 0===e||e,_(t))return(e?\"#\":\"\")+RegExp.$1},isScreenName:w,screenName:y,isStatus:E,status:function(t){return E(t)&&RegExp.$1},intentForProfileURL:b,intentForFollowURL:function(t){return b(t,!0)},isTwitterURL:function(t){return s.test(t)},isTwimgURL:function(t){return a.test(t)},isIntentURL:function(t){return c.test(t)},isSettingsURL:function(t){return m.test(t)},isWidgetIframeURL:function(t){return v.test(t)},isSearchUrl:function(t){return g.test(t)},regexen:{profile:i},momentId:function(t){return l.test(t)&&RegExp.$1},collectionId:function(t){return d.test(t)&&RegExp.$1},intentType:function(t){return c.test(t)&&RegExp.$1},likesScreenName:function(t){return f.test(t)&&RegExp.$1},listScreenNameAndSlug:function(t){var e,n,r;if(h.test(t)){e=RegExp.$1,n=RegExp.$2;try{r=decodeURIComponent(n)}catch(t){}return{ownerScreenName:e,slug:r||n}}return!1},eventId:function(t){return p.test(t)&&RegExp.$1}}},function(t,e,n){var r=n(0),i😦!0,1,\"1\",\"on\",\"ON\",\"true\",\"TRUE\",\"yes\",\"YES\"],o😦!1,0,\"0\",\"off\",\"OFF\",\"false\",\"FALSE\",\"no\",\"NO\"];function s(t){return void 0!==t&&null!==t&&\"\"!==t}function a(t){return c(t)&&t%1==0}function u(t){return c(t)&&!a(t)}function c(t){return s(t)&&!isNaN(t)}function d(t){return r.contains(o,t)}function l(t){return r.contains(i,t)}t.exports={hasValue😒,isInt:a,isFloat:u,isNumber:c,isString:function(t){return\"string\"===r.toType(t)},isArray:function(t){return s(t)&&\"array\"==r.toType(t)},isTruthValue:l,isFalseValue😛,asInt:function(t){if(a(t))return parseInt(t,10)},asFloat:function(t){if(u(t))return t},asNumber:function(t){if(c(t))return t},asBoolean:function(t){return!(!s(t)||!l(t)&&(d(t)||!t))}}},function(t,e){t.exports=document},function(t,e,n){var r=n(1),i=n(20),o=n(45);i.hasPromiseSupport()||(r.Promise😮),t.exports=r.Promise},function(t,e,n){var r=n(0);t.exports=function(t,e){var n=Array.prototype.slice.call(arguments,2);return function(){var i=r.toRealArray(arguments);return t.apply(e,n.concat(i))}}},function(t,e){t.exports=location},function(t,e,n){var r=n(47);t.exports=new r(\"__twttr\")},function(t,e,n){var r=n(0),i😕\\b([\\w-_]+)\\b/g;function o(t){return new RegExp(\"\\\\b\"+t+\"\\\\b\",\"g\")}function s(t,e){t.classList?t.classList.add(e)😮(e).test(t.className)||(t.className+=\" \"+e)}function a(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(o(e),\" \")}function u(t,e){return t.classList?t.classList.contains(e):r.contains(c(t),e)}function c(t){return r.toRealArray(t.classList?t.classList:t.className.match(i))}t.exports={add😒,remove:a,replace:function(t,e,n){if(t.classList&&u(t,e))return a(t,e),void s(t,n);t.className=t.className.replace(o(e),n)},toggle:function(t,e,n){return void 0===n&&t.classList&&t.classList.toggle?t.classList.toggle(e,n)😦n?s(t,e):a(t,e),n)},present:u,list:c}},function(t,e,n){var r=n(4),i=n(0);function o(t){return encodeURIComponent(t).replace(/\\+/g,\"%2B\").replace(/'/g,\"%27\")}function s(t){return decodeURIComponent(t)}function a(t){var e😦];return i.forIn(t,function(t,n){var s😮(t);i.isType(\"array\",n)||(n😦n]),n.forEach(function(t){r.hasValue(t)&&e.push(s+\"=\"+o(t))})}),e.sort().join(\"&\")}function u(t){var e={};return t?(t.split(\"&\").forEach(function(t){var n=t.split(\"😊,r😒(n[0]),o😒(n[1]);if(2==n.length){if(!i.isType(\"array\",e[r]))return r in e?(e[r👿e[r]],void e[r].push(o)):void(e[r]😮);e[r].push(o)}}),e):{}}t.exports={url:function(t,e){return a(e).length>0?i.contains(t,\"?\")?t+\"&\"+a(e):t+\"?\"+a(e):t},decodeURL:function(t){var e=t&&t.split(\"?\");return 2==e.length?u(e[1]):{}},decode:u,encode:a,encodePart😮,decodePart😒}},function(t,e,n){var r=n(😎,i=n(1),o=n(0),s={},a😮.contains(r.href,\"tw_debug=true\");function u(){}function c(){}function d(){return i.performance&&+i.performance.now()||+new Date}function l(t,e){if(i.console&&i.console[t])switch(e.length){case 1:i.console[t](e[0]);break;case 2:i.console[t](e[0],e[1]);break;case 3:i.console[t](e[0],e[1],e[2]);break;case 4:i.console[t](e[0],e[1],e[2],e[3]);break;case 5:i.console[t](e[0],e[1],e[2],e[3],e[4]);break;default😮!==e.length&&i.console.warn&&i.console.warn(\"too many params passed to logger.\"+t)}}t.exports={devError:u,devInfo:c,devObject:function(t,e){},publicError:function(){l(\"error\",o.toRealArray(arguments))},publicLog:function(){l(\"info\",o.toRealArray(arguments))},time:function(t){a&&(s[t]😛())},timeEnd:function(t){a&&s[t]&&(d(),s[t])}}},function(t,e,n){var r=n(19),i=n(4),o=n(11),s=n(0),a=n(116);t.exports=function(t){var e=t.href&&t.href.split(\"?\")[1],n=e?o.decode(e):{},u={lang:a(t),width:t.getAttribute(\"data-width\")||t.getAttribute(\"width\"),height:t.getAttribute(\"data-height\")||t.getAttribute(\"height\"),related:t.getAttribute(\"data-related\"),partner:t.getAttribute(\"data-partner\")};return i.asBoolean(t.getAttribute(\"data-dnt\"))&&r.setOn(),s.forIn(u,function(t,e){var r=n[t];n[t]=i.hasValue(r)?r:e}),s.compact(n)}},function(t,e,n){var r=n(79),i=n(22);t.exports=function(){var t=\"data-twitter-extracted-\"+i.generate();return function(e,n){return r(e,n).filter(function(e){return!e.hasAttribute(t)}).map(function(e){return e.setAttribute(t,\"true\"),e})}}},function(t,e){function n(t,e,n,r,i,o){this.factory=t,this.Sandbox=e,this.srcEl😮,this.targetEl=i,this.parameters=r,this.className=n}n.prototype.destroy=function(){this.srcEl=this.targetEl=null},t.exports=n},function(t,e,n){var r=n(6),i=n(49),o=n(19),s=n(4),a=n(0);t.exports=function(t,e,n){var u;return t=t||[],e=e||{},u=\"ƒ(\"+t.join(\", \")+\", target, [options]);\",function(){var c,d,l,f,h=Array.prototype.slice.apply(arguments,[0,t.length]),p=Array.prototype.slice.apply(arguments,[t.length]);return p.forEach(function(t){t&&(t.nodeType!==Node.ELEMENT_NODE?a.isType(\"function\",t)?c=t:a.isType(\"object\",t)&&(d=t):l=t)}),h.length!==t.length||0===p.length?(c&&a.async(function(){c(!1)}),r.reject(new Error(\"Not enough parameters. Expected: \"+u))):l?(d=a.aug({},d||{},e),t.forEach(function(t){d[t]=h.shift()}),s.asBoolean(d.dnt)&&o.setOn(),f=i.addWidget(n(d,l)),c&&f.then(c,function(){c(!1)}),f)😦c&&a.async(function(){c(!1)}),r.reject(new Error(\"No target element specified. Expected: \"+u)))}}},function(t,e,n){var r=n(99),i=n(2),o=n(0);function s(t,e){return function(){try{e.resolve(t.call(this))}catch(t){e.reject(t)}}}t.exports={sync:function(t,e){t.call(e)},read:function(t,e){var n=new i;return r.read(s(t,n),e),n.promise},write:function(t,e){var n=new i;return r.write(s(t,n),e),n.promise},defer:function(t,e,n){var a=new i;return o.isType(\"function\",t)&&(n=e,e=t,t=1),r.defer(t,s(e,a),n),a.promise}}},function(t,e,n){var r=n(9),i😦\"https://syndication.twitter.com\",\"https://cdn.syndication.twimg.com\",\"https://localhost.twitter.com:8444\"],o😦\"https://syndication.twitter.com\",\"https://localhost.twitter.com:8445\"],s=function(t,e){return t.indexOf(e)>-1},a=function(){var t=r.get(\"backendHost\");return t&&s(i,t)?t:\"https://cdn.syndication.twimg.com\"},u=function(){var t=r.get(\"settingsSvcHost\");return t&&s(o,t)?t:\"https://syndication.twitter.com\"};function c(t,e){var n😦t];return e.forEach(function(t){n.push(function(t){var e😦t||\"\").toString(),n=\"/\"===e.slice(0,1)?1😮,r=function(t){return\"/\"===t.slice(-1)}(e)?-1:void 0;return e.slice(n,r)}(t))}),n.join(\"/\")}t.exports={cookieConsent:function(t){var e=t||[];return e.unshift(\"cookie/consent\"),c(u(),e)},eventVideo:function(t){var e=t||[];return e.unshift(\"video/event\"),c(a(),e)},grid:function(t){var e=t||[];return e.unshift(\"grid/collection\"),c(a(),e)},moment:function(t){var e=t||[];return e.unshift(\"moments\"),c(a(),e)},settings:function(t){var e=t||[];return e.unshift(\"settings\"),c(u(),e)},timeline:function(t){var e=t||[];return e.unshift(\"timeline\"),c(a(),e)},tweetBatch:function(t){var e=t||[];return e.unshift(\"tweets.json\"),c(a(),e)},video:function(t){var e=t||[];return e.unshift(\"widgets/video\"),c(a(),e)}}},function(t,e,n){var r=n(5),i=n(😎,o=n(35),s=n(77),a=n(4),u=n(32),c=!1,d😕https?😕/\\/([^/]+).*/i;t.exports={setOn:function(){c=!0},enabled:function(t,e){return!!(c||a.asBoolean(u.val(\"dnt\"))||s.isUrlSensitive(e||i.host)||o.isFramed()&&s.isUrlSensitive(o.rootDocumentLocation())||(t😛.test(t||r.referrer)&&RegExp.$1)&&s.isUrlSensitive(t))}}},function(t,e,n){var r=n(5),i=n(12),o=n(92),s=n(1),a=n(0),u😮.userAgent;function c(t){return/(Trident|MSIE|Edge[/ ]?\\d)/.test(t=t||u)}t.exports={retina:function(t){return(t=t||s).devicePixelRatio?t.devicePixelRatio>=1.5:!!t.matchMedia&&t.matchMedia(\"only screen and (min-resolution: 144dpi)\").matches},anyIE:c,ie9:function(t){return/MSIE 9/.test(t=t||u)},ie10:function(t){return/MSIE 10/.test(t=t||u)},ios:function(t){return/(iPad|iPhone|iPod)/.test(t=t||u)},android:function(t){return/^Mozilla\\/5\\.0 \\(Linux; (U; )?Android/.test(t=t||u)},canPostMessage:function(t,e){return t=t||s,e=e||u,t.postMessage&&!(c(e)&&t.opener)},touch:function(t,e,n){return t=t||s,e=e||o,n=n||u,\"ontouchstart\"in t||/Opera Mini/.test(n)||e.msMaxTouchPoints>0},cssTransitions:function(){var t=r.body.style;return void 0!==t.transition||void 0!==t.webkitTransition||void 0!==t.mozTransition||void 0!==t.oTransition||void 0!==t.msTransition},hasPromiseSupport:function(){return!!(s.Promise&&s.Promise.resolve&&s.Promise.reject&&s.Promise.all&&s.Promise.race&&(new s.Promise(function(e){t=e}),a.isType(\"function\",t)));var t},hasIntersectionObserverSupport:function(){return!!s.IntersectionObserver},hasPerformanceInformation:function(){return s.performance&&s.performance.getEntriesByType},hasLocalStorageSupport:function(){try{return s.localStorage.setItem(\"local_storage_support_test\",\"true\"),void 0!==s.localStorage}catch(t){return i.devError(\"window.localStorage is not supported:\",t),!1}}}},function(t,e,n){var r=n(6),i=n(2);function o(t,e){return t.then(e,e)}function s(t){return t instanceof r}t.exports={always😮,allResolved:function(t){var e;return void 0===t?r.reject(new Error(\"undefined is not an object\")):Array.isArray(t)?(e=t.length)?new r(function(n,r){var i😮,o😦];function a(){(i+=1)===e&&(0===o.length?r():n(o))}function u(t){o.push(t),a()}t.forEach(function(t){s(t)?t.then(u,a):u(t)})}):r.resolve([]):r.reject(new Error(\"Type error\"))},some:function(t){var e;return e😦t=t||[]).length,t=t.filter(s),e?e!==t.length?r.reject(\"non-Promise passed to .some\"):new r(function(e,n){var r😮;function i(){(r+=1)===t.length&&n()}t.forEach(function(t){t.then(e,i)})}):r.reject(\"no promises passed to .some\")},isPromise😒,allSettled:function(t){function e(){}return r.all((t||[]).map(function(t){return o(t,e)}))},timeout:function(t,e){var n=new i;return setTimeout(function(){n.reject(new Error(\"Promise timed out\"))},e),t.then(function(t){n.resolve(t)},function(t){n.reject(t)}),n.promise}}},function(t,e){var n=\"i\",r😮,i😮;t.exports={generate:function(){return n+String(+new Date)+Math.floor(1e5*Math.random())+r++},deterministic:function(){return n+String(i++)}}},function(t,e,n){var r=n(46),i=n(48),o=n(0);t.exports😮.aug(r.get(\"events\")||{},i.Emitter)},function(t,e,n){var r=n(25),i=n(107);t.exports=r.build([i])},function(t,e,n){var r=n(37),i=n(104),o=n(7);(r=Object.create(r)).build😮(r.build,null,i),t.exports=r},function(t,e,n){var r=n(37),i=n(38),o=n(7);(r=Object.create(r)).build😮(r.build,null,i),t.exports=r},function(t,e,n){var r=n(81),i=n(73),o=n(82),s=n(😎,a=n(68),u=n(72),c=n(19),d=n(4),l=n(22),f=n(0);function h(t){if(!t||!t.headers)throw new Error(\"unexpected response schema\");return{html:t.body,config:t.config,pollInterval:1e3*parseInt(t.headers.xPolling,10)||null,maxCursorPosition:t.headers.maxPosition,minCursorPosition:t.headers.minPosition}}function p(t){if(t&&t.headers)throw new Error(t.headers.status);throw t instanceof Error?t:new Error(t)}t.exports=function(t){t.params({instanceId:{required:!0,fallback:l.deterministic},lang:{required:!0,transform:a.matchLanguage,fallback:\"en\"},tweetLimit:{transform😛.asInt}}),t.defineProperty(\"endpoint\",{get:function(){throw new Error(\"endpoint not specified\")}}),t.defineProperty(\"pollEndpoint\",{get:function(){return this.endpoint}}),t.define(\"cbId\",function(t){var e=t?\"_new\":\"_old\";return\"tl_\"+this.params.instanceId+\"_\"+this.id+e}),t.define(\"queryParams\",function(){return{lang:this.params.lang,tz:u.getTimezoneOffset(),t:r(),domain😒.host,tweet_limit:this.params.tweetLimit,dnt:c.enabled()}}),t.define(\"fetch\",function(){return i.fetch(this.endpoint,this.queryParams(),o,this.cbId()).then(h,p)}),t.define(\"poll\",function(t,e){var n,r;return n={since_id😦t=t||{}).sinceId,max_id:t.maxId,min_position:t.minPosition,max_position:t.maxPosition},r=f.aug(this.queryParams(),n),i.fetch(this.pollEndpoint,r,o,this.cbId(e)).then(h,p)})}},function(t,e,n){var r=n(48).makeEmitter();t.exports={emitter:r,START:\"start\",ALL_WIDGETS_RENDER_START:\"all_widgets_render_start\",ALL_WIDGETS_RENDER_END:\"all_widgets_render_end\",ALL_WIDGETS_AND_IMAGES_LOADED:\"all_widgets_and_images_loaded\"}},function(t,e,n){var r=n(5),i=n(0);t.exports=function(t,e,n){var o;if(n=n||r,t=t||{},e=e||{},t.name){try{o=n.createElement('<iframe name=\"'+t.name+'\"></iframe>')}catch(e){(o=n.createElement(\"iframe\")).name=t.name}delete t.name}else o=n.createElement(\"iframe\");return t.id&&(o.id=t.id,delete t.id),o.allowtransparency=\"true\",o.scrolling=\"no\",o.setAttribute(\"frameBorder\",0),o.setAttribute(\"allowTransparency\",!0),i.forIn(t,function(t,e){o.setAttribute(t,e)}),i.forIn(e,function(t,e){o.style[t]=e}),o}},function(t,e,n){var r=n(1).JSON;t.exports={stringify:r.stringify||r.encode,parse:r.parse||r.decode}},function(t,e,n){var r=n(0),i=n(40);t.exports={closest:function t(e,n,o){var s;if(n)return o😮||n&&n.ownerDocument,s=r.isType(\"function\",e)?e:function(t){return function(e){return!!e.tagName&&i(e,t)}}(e),n===o?s(n)?n:void 0😒(n)?n:t(s,n.parentNode,o)}}},function(t,e,n){var r,i=n(5);function o(t){var e,n,o,s😮;for(r={},e😦t=t||i).getElementsByTagName(\"meta\");e[s];s++){if(n=e[s],/^twitter😕.test(n.getAttribute(\"name\")))o=n.getAttribute(\"name\").replace(/^twitter😕,\"\");else{if(!/^twitter😕.test(n.getAttribute(\"property\")))continue;o=n.getAttribute(\"property\").replace(/^twitter😕,\"\")}r[o]=n.getAttribute(\"content\")||n.getAttribute(\"value\")}}o(),t.exports={init😮,val:function(t){return r[t]}}},function(t,e,n){var r=n(5),i=n(30),o=n(19),s=n(0),a=n(41),u=n(9),c=n(3),d=n(31),l=a.version,f=u.get(\"clientEventEndpoint\")||\"https://syndication.twitter.com/i/jot\",h=1;function p(t){return s.aug({client:\"tfw\"},t||{})}function m(t,e,n){return e=e||{},s.aug({},e,{_category_:t,triggered_on:e.triggered_on||+new Date,dnt😮.enabled(n)})}t.exports={extractTermsFromDOM:function t(e,n){var r;return n=n||{},e&&e.nodeType===Node.ELEMENT_NODE?((r=e.getAttribute(\"data-scribe\"))&&r.split(\" \").forEach(function(t){var e=t.trim().split(\"😊,r=e[0],i=e[1];r&&i&&!n[r]&&(n[r]=i)}),t(e.parentNode,n)):n},clickEventElement:function(t){var e😛.closest(\"[data-expanded-url]\",t),n=e&&e.getAttribute(\"data-expanded-url\");return n&&c.isTwitterURL(n)?\"twitter_url\":\"url\"},flattenClientEventPayload:function(t,e){return s.aug({},e,{event_namespace:t})},formatGenericEventData:m,formatClientEventData:function(t,e,n){var i=t&&t.widget_origin||r.referrer;return(t=m(\"tfw_client_event\",t,i)).client_version=l,t.format_version=void 0!==n?n:1,e||(t.widget_origin=i),t},formatClientEventNamespace😛,formatTweetAssociation:function(t,e){var n={};return(e=e||{}).association_namespace😛(t),n[h]=e,n},noticeSeen:function(t){return\"notice\"===t.element&&\"seen\"===t.action},splitLogEntry:function(t){var e,n,r,i,o;return t.item_ids&&t.item_ids.length>1?(e=Math.floor(t.item_ids.length/2),n=t.item_ids.slice(0,e),r={},i=t.item_ids.slice(e),o={},n.forEach(function(e){r[e]=t.item_details[e]}),i.forEach(function(e){o[e]=t.item_details[e]}),[s.aug({},t,{item_ids:n,item_details:r}),s.aug({},t,{item_ids:i,item_details😮})])😦t]},stringify:function(t){var e,n=Array.prototype.toJSON;return delete Array.prototype.toJSON,e=i.stringify(t),n&&(Array.prototype.toJSON=n),e},AUDIENCE_ENDPOINT:\"https://syndication.twitter.com/i/jot/syndication\",CLIENT_EVENT_ENDPOINT:f,RUFOUS_REDIRECT:\"https://platform.twitter.com/jot.html\"}},function(t,e,n){var r=n(10),i={},o=-1,s={};function a(t){var e=t.getAttribute(\"data-twitter-event-id\");return e||(t.setAttribute(\"data-twitter-event-id\",++o),o)}function u(t,e,n){var r😮,i=t&&t.length||0;for(r😮;r<i;r++)if(t[r].call(e,n,e),n.ceaseImmediately)return!1}function c(t,e,n){for(var i=n||t.target||t.srcElement,o=r.list(i).map(function(t){return\".\"+t}).concat(i.tagName),s😮,a😮.length;s<a;s++)if(!1===u(e[o[s]],i,t))return;t.cease||i!==this&&c.call(this,t,e,i.parentElement||i.parentNode)}function d(t,e,n,r){function i(r){c.call(t,r,n[e])}!function(t,e,n,r){t.id&&(s[t.id]😒[t.id]||[],s[t.id].push({el:t,listener:e,type:n,rootId:r}))}(t,i,e,r),t.addEventListener(e,i,!1)}function l(t){t&&t.preventDefault?t.preventDefault():t.returnValue=!1}function f(t){t&&(t.cease=!0)&&t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}t.exports={stop:function(t){return f(t),l(t),!1},stopPropagation:f,stopImmediatePropagation:function(t){t&&(t.ceaseImmediately=!0,f(t),t.stopImmediatePropagation())},preventDefault:l,delegate:function(t,e,n,r){var o=a(t);i[o]=i[o]||{},i[o][e]||(i[o][e]={},d(t,e,i[o],o)),i[o][e][n]=i[o][e][n]||[],i[o][e][n].push(r)},simulate:function(t,e,n){var r=a(e),o=i[r]&&i[r];c.call(e,{target:n},o[t])},removeDelegatesForWidget:function(t){var e😒[t];e&&(e.forEach(function(t){t.el.removeEventListener(t.type,t.listener,!1),delete i[t.rootId]}),delete s[t])}}},function(t,e,n){var r=n(😎,i=n(76),o=n(0),s=i.getCanonicalURL()||r.href,a😒;t.exports={isFramed:function(){return s!==a},rootDocumentLocation:function(t){return t&&o.isType(\"string\",t)&&(s=t),s},currentDocumentLocation:function(){return a}}},function(t,e,n){var r=n(75),i=n(101),o=n(78),s=n(33),a=new(n(109))(function(t){var e,n,a;if(0!==t.length){if(u(t))return c(t);e=r(t,function(t){return s.noticeSeen(t.input.namespace)}),n=e.true,a=e.false,n&&n.length>0&&(n=n.slice(0,1),o.canFlushOneItem(n[0])||(n[0].input.data.message=\"\"),c(n)),a&&(u(a)?c:function(t){i.init(),t.forEach(function(t){var e=t.input.namespace,n=t.input.data,r=t.input.offsite,o=t.input.version;i.clientEvent(e,n,r,o)}),i.flush().then(function(){t.forEach(function(t){t.taskDoneDeferred.resolve()})},function(){t.forEach(function(t){t.taskDoneDeferred.reject()})})})(a)}});function u(t){return 1===t.length&&o.canFlushOneItem(t[0])}function c(t){t.forEach(function(t){var e=t.input.namespace,n=t.input.data,r=t.input.offsite,i=t.input.version;o.clientEvent(e,n,r,i),t.taskDoneDeferred.resolve()})}t.exports={scribe:function(t,e,n,r){return a.add({namespace:t,data:e,offsite:n,version:r})},pause:function(){a.pause()},resume:function(){a.resume()}}},function(t,e,n){var r=n(102),i=n(103),o=n(0);t.exports={couple:function(){return o.toRealArray(arguments)},build:function(t,e,n){var o=new t;return(e=i(r(e||[]))).forEach(function(t){t.call(null,o)}),o.build(n)}}},function(t,e,n){var r=n(105),i=n(0),o=n(39);function s(){this.Component=this.factory(),this._adviceArgs😦],this._lastArgs😦]}i.aug(s.prototype,{factory😮,build:function(t){var e=this;return this.Component,i.aug(this.Component.prototype.boundParams,t),this._adviceArgs.concat(this._lastArgs).forEach(function(t){(function(t,e,n){var r=this[e];if(!r)throw new Error(e+\" does not exist\");this[e]=t(r,n)}).apply(e.Component.prototype,t)}),delete this._lastArgs,delete this._adviceArgs,this.Component},params:function(t){var e=this.Component.prototype.paramConfigs;t=t||{},this.Component.prototype.paramConfigs=i.aug({},t,e)},define:function(t,e){if(t in this.Component.prototype)throw new Error(t+\" has previously been defined\");this.override(t,e)},defineStatic:function(t,e){this.Component[t]=e},override:function(t,e){this.Component.prototype[t]=e},defineProperty:function(t,e){if(t in this.Component.prototype)throw new Error(t+\" has previously been defined\");this.overrideProperty(t,e)},overrideProperty:function(t,e){var n=i.aug({configurable:!0},e);Object.defineProperty(this.Component.prototype,t,n)},before:function(t,e){this._adviceArgs.push([r.before,t,e])},after:function(t,e){this._adviceArgs.push([r.after,t,e])},around:function(t,e){this._adviceArgs.push([r.around,t,e])},last:function(t,e){this._lastArgs.push([r.after,t,e])}}),t.exports😒},function(t,e,n){var r=n(0);function i(){return!0}function o(t){return t}t.exports=function(){function t(t){var e=this;t=t||{},this.params=Object.keys(this.paramConfigs).reduce(function(n,s){var a😦],u=e.boundParams,c=e.paramConfigs[s],d=c.validate||i,l=c.transform||o;if(s in u&&a.push(u[s]),s in t&&a.push(t[s]),a=\"fallback\"in c?a.concat(c.fallback):a,n[s]=function(t,e,n){var i=null;return t.some(function(t){if(t=r.isType(\"function\",t)?t():t,e(t))return i=n(t),!0}),i}(a,d,l),c.required&&null==n[s])throw new Error(s+\" is a required parameter\");return n},{}),this.initialize()}return r.aug(t.prototype,{paramConfigs:{},boundParams:{},initialize:function(){}}),t}},function(t,e,n){var r=n(1).HTMLElement,i=r.prototype.matches||r.prototype.matchesSelector||r.prototype.webkitMatchesSelector||r.prototype.mozMatchesSelector||r.prototype.msMatchesSelector||r.prototype.oMatchesSelector;t.exports=function(t,e){if(i)return i.call(t,e)}},function(t){t.exports={version:\"7e980dd:1559715853415\"}},function(t,e,n){var r,i=n(10),o=n(5),s=n(1),a=n(32),u=n(50),c=n(4),d=n(22),l=\"csptest\";t.exports={inlineStyle:function(){var t=l+d.generate(),e😮.createElement(\"div\"),n😮.createElement(\"style\"),f=\".\"+t+\" { visibility: hidden; }\";return!!o.body&&(c.asBoolean(a.val(\"widgets:csp\"))&&(r=!1),void 0!==r?r😦e.style.display=\"none\",i.add(e,t),n.type=\"text/css\",n.appendChild(o.createTextNode(f)),o.body.appendChild(n),o.body.appendChild(e),r=\"hidden\"===s.getComputedStyle(e).visibility,u(e),u(n),r))}}},function(t,e,n){var r=n(1);t.exports=function(t,e,n){var i,o😮;return n=n||null,function s(){var a=n||this,u=arguments,c=+new Date;if(r.clearTimeout(i),c-o>e)return o=c,void t.apply(a,u);i=r.setTimeout(function(){s.apply(a,u)},e)}}},function(t,e){t.exports=function(t){var e=t.getBoundingClientRect();return{width:e.width,height:e.height}}},function(t,e,n){",
            "/*!",
            " * @overview es6-promise - a tiny implementation of Promises/A+.",
            " * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)",
            " * @license   Licensed under MIT license",
            " *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE",
            " * @version   v4.2.5+7f2b526d",
            " */var r;r=function(){\"use strict\";function t(t){return\"function\"==typeof t}var e=Array.isArray?Array.isArray:function(t){return\"[object Array]\"===Object.prototype.toString.call(t)},n😮,r=void 0,i=void 0,o=function(t,e){f[n]=t,f[n+1]=e,2===(n+=2)&&(i?i(h):w())},s=\"undefined\"!=typeof window?window:void 0,a😒||{},u=a.MutationObserver||a.WebKitMutationObserver,c=\"undefined\"==typeof self&&\"undefined\"!=typeof process&&\"[object process]\"==={}.toString.call(process),d=\"undefined\"!=typeof Uint8ClampedArray&&\"undefined\"!=typeof importScripts&&\"undefined\"!=typeof MessageChannel;function l(){var t=setTimeout;return function(){return t(h,1)}}var f=new Array(1e3);function h(){for(var t😮;t<n;t+=2)(0,f[t])(f[t+1]),f[t]=void 0,f[t+1]=void 0;n😮}var p,m,v,g,w=void 0;function y(t,e){var n=this,r=new this.constructor(E);void 0===r[_]&&k(r);var i=n._state;if(i){var s=arguments[i-1];o(function(){return O(i,r,s,n._result)})}else I(n,r,t,e);return r}function b(t){if(t&&\"object\"==typeof t&&t.constructor===this)return t;var e=new this(E);return N(e,t),e}c?w=function(){return process.nextTick(h)}:u?(m😮,v=new u(h),g=document.createTextNode(\"\"),v.observe(g,{characterData:!0}),w=function(){g.data=m=++m%2})😛?((p=new MessageChannel).port1.onmessage=h,w=function(){return p.port2.postMessage(0)}):w=void 0===s?function(){try{var t=Function(\"return this\")().require(\"vertx\");return void 0!==(r=t.runOnLoop||t.runOnContext)?function(){r(h)}:l()}catch(t){return l()}}():l();var _=Math.random().toString(36).substring(2);function E(){}var x=void 0,A=1,T=2,S={error:null};function R(t){try{return t.then}catch(t){return S.error=t,S}}function C(e,n,r){n.constructor===e.constructor&&r===y&&n.constructor.resolve===b?function(t,e){e._state===A?j(t,e._result):e._state===T?L(t,e._result):I(e,void 0,function(e){return N(t,e)},function(e){return L(t,e)})}(e,n):r===S?(L(e,S.error),S.error=null):void 0===r?j(e,n):t(r)?function(t,e,n){o(function(t){var r=!1,i=function(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}(n,e,function(n){r||(r=!0,e!==n?N(t,n):j(t,n))},function(e){r||(r=!0,L(t,e))},t._label);!r&&i&&(r=!0,L(t,i))},t)}(e,n,r):j(e,n)}function N(t,e){var n,r;t===e?L(t,new TypeError(\"You cannot resolve a promise with itself\"))😦r=typeof(n=e),null===n||\"object\"!==r&&\"function\"!==r?j(t,e):C(t,e,R(e)))}function P(t){t._onerror&&t._onerror(t._result),D(t)}function j(t,e){t._state===x&&(t._result=e,t._state=A,0!==t._subscribers.length&&o(D,t))}function L(t,e){t._state===x&&(t._state=T,t._result=e,o(P,t))}function I(t,e,n,r){var i=t._subscribers,s=i.length;t._onerror=null,i[s]=e,i[s+A]=n,i[s+T]=r,0===s&&t._state&&o(D,t)}function D(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,i=void 0,o=t._result,s😮;s<e.length;s+👨)r=e[s],i=e[s+n],r?O(n,r,i,o):i(o);t._subscribers.length😮}}function O(e,n,r,i){var o=t(r),s=void 0,a=void 0,u=void 0,c=void 0;if(o){if((s=function(t,e){try{return t(e)}catch(t){return S.error=t,S}}(r,i))===S?(c=!0,a😒.error,s.error=null):u=!0,n===s)return void L(n,new TypeError(\"A promises callback cannot return that same promise.\"))}else s=i,u=!0;n._state!==x||(o&&u?N(n,s):c?L(n,a):e===A?j(n,s):e===T&&L(n,s))}var z😮;function k(t){t[_]😒++,t._state=void 0,t._result=void 0,t._subscribers😦]}var M=function(){function t(t,n){this._instanceConstructor=t,this.promise=new t(E),this.promise[_]||k(this.promise),e(n)?(this.length=n.length,this._remaining=n.length,this._result=new Array(this.length),0===this.length?j(this.promise,this._result)😦this.length=this.length||0,this._enumerate(n),0===this._remaining&&j(this.promise,this._result))):L(this.promise,new Error(\"Array Methods must be provided an Array\"))}return t.prototype._enumerate=function(t){for(var e😮;this._state===x&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===b){var i=R(t);if(i===y&&t._state!==😆this._settledAt(t._state,e,t._result);else if(\"function\"!=typeof i)this._remaining--,this._result[e]=t;else if(n===U){var o=new n(E);C(o,t,i),this._willSettleAt(o,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},t.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===x&&(this._remaining--,t===T?L(r,n):this._result[e]=n),0===this._remaining&&j(r,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;I(t,void 0,function(t){return n._settledAt(A,e,t)},function(t){return n._settledAt(T,e,t)})},t}(),U=function(){function e(t){this[_]😒++,this._result=this._state=void 0,this._subscribers😦],E!==t&&(\"function\"!=typeof t&&function(){throw new TypeError(\"You must pass a resolver function as the first argument to the promise constructor\")}(),this instanceof e?function(t,e){try{e(function(e){N(t,e)},function(e){L(t,e)})}catch(e){L(t,e)}}(this,t):function(){throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\")}())}return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.finally=function(e){var n=this.constructor;return t(e)?this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})}):this.then(e,e)},e}();return U.prototype.then=y,U.all=function(t){return new M(this,t).promise},U.race=function(t){var n=this;return e(t)?new n(function(e,r){for(var i=t.length,o😮;o<i;o++)n.resolve(t[o]).then(e,r)}):new n(function(t,e){return e(new TypeError(\"You must pass an array to race.\"))})},U.resolve=b,U.reject=function(t){var e=new this(E);return L(e,t),e},U._setScheduler=function(t){i=t},U._setAsap=function(t){o=t},U._asap😮,U.polyfill=function(){var t=void 0;if(\"undefined\"!=typeof global)t=global;else if(\"undefined\"!=typeof self)t=self;else try{t=Function(\"return this\")()}catch(t){throw new Error(\"polyfill failed because global object is unavailable in this environment\")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if(\"[object Promise]\"===n&&!e.cast)return}t.Promise=U},U.Promise=U,U},t.exports=r()},function(t,e,n){var r=n(47);t.exports=new r(\"twttr\")},function(t,e,n){var r=n(1),i=n(0);function o(t){return i.isType(\"string\",t)?t.split(\".\"):i.isType(\"array\",t)?t😦]}function s(t,e){(e=e||r)[t]=e[t]||{},Object.defineProperty(this,\"base\",{value:e[t]}),Object.defineProperty(this,\"name\",{value:t})}i.aug(s.prototype,{get:function(t){return o(t).reduce(function(t,e){if(i.isObject(t))return t[e]},this.base)},set:function(t,e,n){var r😮(t),s=function(t,e){var n😮(e).slice(0,-1);return n.reduce(function(t,e,r){if(t[e]=t[e]||{},!i.isObject(t[e]))throw new Error(n.slice(0,r+1).join(\".\")+\" is already defined with a value.\");return t[e]},t)}(this.base,t),a=r.slice(-1);return n&&a in s?s[a]😒[a]=e},init:function(t,e){return this.set(t,e,!0)},unset:function(t){var e😮(t),n=this.get(e.slice(0,-1));n&&delete n[e.slice(-1)]},aug:function(t){var e=this.get(t),n=i.toRealArray(arguments).slice(1);if(e=void 0!==e?e:{},n.unshift(e),!n.every(i.isObject))throw new Error(\"Cannot augment non-object.\");return this.set(t,i.aug.apply(null,n))},call:function(t){var e=this.get(t),n=i.toRealArray(arguments).slice(1);if(!i.isType(\"function\",e))throw new Error(\"Function \"+t+\"does not exist.\");return e.apply(null,n)},fullPath:function(t){var e😮(t);return e.unshift(this.name),e.join(\".\")}}),t.exports😒},function(t,e,n){var r=n(0),i=n(7),o={bind:function(t,e){return this._handlers=this._handlers||{},this._handlers[t]=this._handlers[t]||[],this._handlers[t].push(e)},unbind:function(t,e){var n;this._handlers&&this._handlers[t]&&(e?(n=this._handlers[t].indexOf(e))>😮&&this._handlers[t].splice(n,1):this._handlers[t👿])},trigger:function(t,e){var n=this._handlers&&this._handlers[t];(e=e||{}).type=t,n&&n.forEach(function(t){r.async(i(t,this,e))})}};t.exports={Emitter😮,makeEmitter:function(){return r.aug(function(){},o)}}},function(t,e,n){var r=n(98),i=n(74),o=n(6),s=n(21),a=n(7),u=n(0),c=new i(function(t){var e=function(t){return t.reduce(function(t,e){return t[e.className]=t[e.className]||[],t[e.className].push(e),t},{})}(t.map(r.fromRawTask));u.forIn(e,function(t,e){s.allSettled(e.map(function(t){return t.initialize()})).then(function(){e.forEach(function(t){o.all([t.hydrate(),t.insertIntoDom()]).then(a(t.render,t)).then(a(t.success,t),a(t.fail,t))})})})});t.exports={addWidget:function(t){return c.add(t)}}},function(t,e,n){var r=n(17);t.exports=function(t){return r.write(function(){t&&t.parentNode&&t.parentNode.removeChild(t)})}},function(t,e,n){n(12),t.exports={log:function(t,e){}}},function(t,e,n){var r=n(1);function i(t){return(t=t||r).getSelection&&t.getSelection()}t.exports={getSelection:i,getSelectedText:function(t){var e=i(t);return e?e.toString():\"\"}}},function(t,e,n){var r=n(5),i=n(1),o=n(2),s=2e4;t.exports=function(t){var e=new o,n=r.createElement(\"img\");return n.onload=n.onerror=function(){i.setTimeout(e.resolve,50)},n.src=t,i.setTimeout(e.reject,s),e.promise}},function(t,e,n){var r=n(108);t.exports=function(t){t.define(\"createElement\",r),t.define(\"createFragment\",r),t.define(\"htmlToElement\",r),t.define(\"hasSelectedText\",r),t.define(\"addRootClass\",r),t.define(\"removeRootClass\",r),t.define(\"hasRootClass\",r),t.define(\"prependStyleSheet\",r),t.define(\"appendStyleSheet\",r),t.define(\"prependCss\",r),t.define(\"appendCss\",r),t.define(\"makeVisible\",r),t.define(\"injectWidgetEl\",r),t.define(\"matchHeightToContent\",r),t.define(\"matchWidthToContent\",r)}},function(t,e){t.exports=function(t){var e,n=!1;return function(){return n?e😦n=!0,e=t.apply(this,arguments))}}},function(t,e,n){var r=n(15),i=n(117),o=n(57);t.exports=function(t,e,n){return new r(i,o,\"twitter-dm-button\",t,e,n)}},function(t,e,n){var r=n(58),i=n(24);t.exports=r.isSupported()?r:i},function(t,e,n){var r=n(25),i=n(118);t.exports=r.build([i])},function(t,e,n){var r=n(15),i=n(121),o=n(60);t.exports=function(t,e,n){return new r(i,o,\"twitter-follow-button\",t,e,n)}},function(t,e,n){var r=n(25),i=n(122);t.exports=r.build([i])},function(t,e,n){var r=n(15),i=n(129),o=n(24);t.exports=function(t,e,n){return new r(i,o,\"twitter-moment\",t,e,n)}},function(t,e,n){var r=n(15),i=n(131),o=n(24);t.exports=function(t,e,n){return new r(i,o,\"periscope-on-air\",t,e,n)}},function(t,e,n){var r=n(80),i=n(133),o=n(137),s=n(139),a=n(141),u=n(143),c={collection:i,event😮,likes😒,list:a,profile:u,url:l},d😦u,s,i,a,o];function l(t){return r(d,function(e){try{return new e(t)}catch(t){}})}t.exports=function(t){return t?function(t){var e,n;return e😦t.sourceType+\"\").toLowerCase(),(n=c[e])?new n(t):null}(t)||l(t):null}},function(t,e,n){var r=n(15),i=n(145),o=n(24);t.exports=function(t,e,n){return new r(i,o,\"twitter-timeline\",t,e,n)}},function(t,e,n){var r=n(15),i=n(147),o=n(57);t.exports=function(t,e,n){return new r(i,o,\"twitter-tweet\",t,e,n)}},function(t,e,n){var r=n(15),i=n(149),o=n(60);t.exports=function(t,e,n){var s=t&&t.type||\"share\";return new r(i,o,\"hashtag\"==s?\"twitter-hashtag-button\":\"mention\"==s?\"twitter-mention-button\":\"twitter-share-button\",t,e,n)}},function(t,e,n){var r=n(36),i=n(35),o=n(0);t.exports=function(t){var e={widget_origin:i.rootDocumentLocation(),widget_frame:i.isFramed()?i.currentDocumentLocation():null,duration_ms:t.duration,item_ids:t.widgetIds||[]},n😮.aug(t.namespace,{page:\"page\",component:\"performance\"});r.scribe(n,e)}},function(t,e,n){var r=n(0),i=n(134),o😦\"ar\",\"fa\",\"he\",\"ur\"];t.exports={isRtlLang:function(t){return t=String(t).toLowerCase(),r.contains(o,t)},matchLanguage:function(t){return t😦t😦t||\"\").toLowerCase()).replace(\"_\",\"-\"),i(t)?t😦t=t.replace(/-.*/,\"\"),i(t)?t:\"en\")}}},function(t,e,n){var r=n(110),i=n(113);function o(t){return r.settingsLoaded().then(function(e){return e[t]})}function s(){return o(\"experiments\")}t.exports={shouldObtainCookieConsent:function(){return o(\"shouldObtainCookieConsent\")},getExperiments😒,getExperiment:function(t){return s().then(function(e){if(!e[t])throw new Error(\"Experiment not found\");return e[t]})},getActiveExperimentDataString:function(){return s().then(function(t){var e=Object.keys(t).reduce(function(e,n){var r;return t[n].version&&(r=n.split(\"_\").slice(-1)[0],e.push(r+\";\"+t[n].bucket)),e},[]);return i(e.join(\",\"))})},getExperimentKeys:function(){return s().then(function(t){return Object.keys(t)})},load:function(){r.load()}}},function(t){t.exports={tweetButtonHtmlPath:\"/widgets/tweet_button.d753e00c3e838c1b2558149bd3f6ecb8.{{lang}}.html\",followButtonHtmlPath:\"/widgets/follow_button.d753e00c3e838c1b2558149bd3f6ecb8.{{lang}}.html\",hubHtmlPath:\"/widgets/hub.html\",widgetIframeHtmlPath:\"/widgets/widget_iframe.d753e00c3e838c1b2558149bd3f6ecb8.html\",resourceBaseUrl:\"https://platform.twitter.com\"}},function(t,e,n){var r=n(3),i=n(95),o=n(23),s=n(11),a={favorite😦\"favorite\",\"like\"],follow😦\"follow\"],like😦\"favorite\",\"like\"],retweet😦\"retweet\"],tweet😦\"tweet\"]};function u(t){this.srcEl😦],this.element=t}u.open=function(t,e,n){var u😦r.intentType(t)||\"\").toLowerCase();r.isTwitterURL(t)&&(function(t,e){i.open(t,{},e)}(t,n),e&&o.trigger(\"click\",{target:e,region:\"intent\",type:\"click\",data:{}}),e&&a[u]&&a[u].forEach(function(n){o.trigger(n,{target:e,region:\"intent\",type:n,data:function(t,e){var n😒.decodeURL(e);switch(t){case\"favorite\":case\"like\":return{tweet_id:n.tweet_id};case\"follow\":return{screen_name:n.screen_name,user_id:n.user_id};case\"retweet\":return{source_tweet_id:n.tweet_id};default:return{}}}(u,t)})}))},t.exports=u},function(t,e){t.exports={getTimezoneOffset:function(){var t😦new Date).toString().match(/(GMT[+-]?\\d+)/);return t&&t[0]||\"GMT\"}}},function(t,e,n){var r=n(5),i=n(9),o=n(2),s=n(0),a=n(11),u=\"cb\",c😮;t.exports={fetch:function(t,e,n,d){var l,f,h;return d=function(t){if(t)return t.replace(/[^\\w$]/g,\"_\")}(d||u+c++),l=i.fullPath([\"callbacks\",d]),f=r.createElement(\"script\"),h=new o,e😒.aug({},e,{callback:l,suppress_response_codes:!0}),i.set([\"callbacks\",d],function(t){var e;t😦e=n(t||!1)).resp,e.success?h.resolve(t):h.reject(t),f.onload=f.onreadystatechange=null,f.parentNode&&f.parentNode.removeChild(f),i.unset([\"callbacks\",d])}),f.onerror=function(){h.reject(new Error(\"failed to fetch \"+f.src))},f.src=a.url(t,e),f.async=\"async\",r.body.appendChild(f),h.promise}}},function(t,e,n){var r=n(2),i=n(100),o=n(7);function s(t){this._inputsQueue😦],this._task=t,this._hasFlushBeenScheduled=!1}s.prototype.add=function(t){var e=new r;return this._inputsQueue.push({input:t,taskDoneDeferred:e}),this._hasFlushBeenScheduled||(this._hasFlushBeenScheduled=!0,i(o(this._flush,this))),e.promise},s.prototype._flush=function(){try{this._task.call(null,this._inputsQueue)}catch(t){this._inputsQueue.forEach(function(e){e.taskDoneDeferred.reject(t)})}this._inputsQueue😦],this._hasFlushBeenScheduled=!1},t.exports😒},function(t,e){t.exports=function(t,e){return t.reduce(function(t,n){var r=e(n);return t[r]=t[r]||[],t[r].push(n),t},{})}},function(t,e,n){var r=n(5),i=n(😎,o=n(3);function s(t,e){var n,r;return e=e||i,/^https?😕/\\//.test(t)?t😕^\\/\\//.test(t)?e.protocol+t😦n=e.host+(e.port.length?\":\"+e.port:\"\"),0!==t.indexOf(\"/\")&&((r=e.pathname.split(\"/\")).pop(),r.push(t),t=\"/\"+r.join(\"/\")),[e.protocol,\"//\",n,t].join(\"\"))}t.exports={absolutize😒,getCanonicalURL:function(){for(var t,e=r.getElementsByTagName(\"link\"),n😮;e[n];n++)if(\"canonical\"==(t=e[n]).rel)return s(t.href)},getScreenNameFromPage:function(){for(var t,e,n,i😦r.getElementsByTagName(\"a\"),r.getElementsByTagName(\"link\")],s😮,a😮,u😕\\bme\\b/;t=i[s];s++)for(a😮;e=t[a];a++)if(u.test(e.rel)&&(n😮.screenName(e.href)))return n}}},function(t,e,n){var r=n(😎,i😕^[^#?]*\\.(gov|mil)(😕d+)?([#?].*)?$/i,o={};function s(t){return t in o?o[t]😮[t]=i.test(t)}t.exports={isUrlSensitive😒,isHostPageSensitive:function(){return s(r.host)}}},function(t,e,n){var r=n(19),i=n(51),o=n(11),s=n(33),a=n(0),u=n(9).get(\"scribeCallback\"),c=2083,d😦],l😮.url(s.CLIENT_EVENT_ENDPOINT,{dnt😮,l:\"\"}),f=encodeURIComponent(l).length;function h(t,e,n,r){var i=!a.isObject(t),o=!!e&&!a.isObject(e);i||o||(u&&u(arguments),p(s.formatClientEventNamespace(t),s.formatClientEventData(e,n,r),s.CLIENT_EVENT_ENDPOINT))}function p(t,e,n){var r,u;n&&a.isObject(t)&&a.isObject(e)&&(i.log(t,e),r😒.flattenClientEventPayload(t,e),u={l😒.stringify(r)},s.noticeSeen(t)&&(u.notice_seen=!0),r.dnt&&(u.dnt=1),w(o.url(n,u)))}function m(t,e,n,r){var i=!a.isObject(t),o=!!e&&!a.isObject(e);if(!i&&!o)return v(s.flattenClientEventPayload(s.formatClientEventNamespace(t),s.formatClientEventData(e,n,r)))}function v(t){return d.push(t),d}function g(t){return encodeURIComponent(t).length+3}function w(t){return(new Image).src=t}t.exports={canFlushOneItem:function(t){var e=g(s.stringify(t));return f+e<c},_enqueueRawObject:v,scribe😛,clientEvent:h,clientEvent2:function(t,e,n){return h(t,e,n,2)},enqueueClientEvent:m,flushClientEvents:function(){var t;return d.length>1&&m({page:\"widgets_js\",component:\"scribe_pixel\",action:\"batch_log\"},{}),t😛,d😦],t.reduce(function(e,n,r){var i=e.length,o=i&&e[i-1];return r+1==t.length&&n.event_namespace&&\"batch_log\"==n.event_namespace.action&&(n.message😦\"entries:\"+r,\"requests:\"+i].join(\"/\")),function t(e){return Array.isArray(e)||(e😦e]),e.reduce(function(e,n){var r,i😒.stringify(n),o=g(i);return f+o<c?e=e.concat(i)😦r😒.splitLogEntry(n)).length>1&&(e=e.concat(t(r))),e},[])}(n).forEach(function(t){var n=g(t);(!o||o.urlLength+n>c)&&(o={urlLength:f,items😦]},e.push(o)),o.urlLength+=n,o.items.push(t)}),e},[]).map(function(t){var e={l:t.items};return r.enabled()&&(e.dnt=1),w(o.url(s.CLIENT_EVENT_ENDPOINT,e))})},interaction:function(t,e,n,r){var i😒.extractTermsFromDOM(t.target||t.srcElement);i.action=r||\"click\",h(i,e,n)}}},function(t,e,n){var r=n(0),i=n(40);t.exports=function(t,e){return i(t,e)?[t]:r.toRealArray(t.querySelectorAll(e))}},function(t,e){t.exports=function(t,e,n){for(var r,i😮;i<t.length;i++)if(r=e.call(n,t[i],i,t))return r}},function(t,e){t.exports=function(){return Math.floor(+new Date/9e5)}},function(t,e,n){var r=n(12);t.exports=function(t){var e,n;return e=t.headers&&t.headers.status,!(n=t&&!t.error&&200===e)&&t.headers&&t.headers.message&&r.publicError(t.headers.message),{success:n,resp:t}}},function(t,e,n){var r,i=n(28),o😮;function s(){r&&r.length===o&&(i.emitter.trigger(i.ALL_WIDGETS_AND_IMAGES_LOADED,r),r=null)}i.emitter.bind(i.ALL_WIDGETS_RENDER_END,function(t){r=t.widgets,s()}),t.exports={reportImagesLoadForAWidget:function(){o++,s()}}},,,,,,,,function(t,e,n){var r,i=n(2),o=n(5),s=n(93),a=n(46),u=n(9),c=n(94),d=n(23),l=n(97),f=n(150),h=n(158),p=n(159),m=n(28);n(160),m.emitter.trigger(m.START),u.set(\"widgets.init\",!0),a.set(\"init\",!0),p(),r=new i,s.exposeReadyPromise(r.promise,a.base,\"_e\"),a.set(\"widgets\",f),a.set(\"widgets.load\",l.load),a.set(\"events\",d),h(function(){r.resolve(a.base),c.attachTo(o),l.loadPage()})},function(t,e){t.exports=navigator},function(t,e,n){var r=n(7);t.exports={exposeReadyPromise:function(t,e,n){e.ready=r(t.then,t),n&&Array.isArray(e[n])&&(e[n].forEach(r(t.then,t)),delete e[n])}}},function(t,e,n){var r=n(😎,i=n(34),o=n(31),s=n(71),a=n(3);function u(t){var e,n,u;t.altKey||t.metaKey||t.shiftKey||(e😮.closest(function(t){return\"A\"===t.tagName||\"AREA\"===t.tagName},t.target))&&a.isIntentURL(e.href)&&(n😦n😦n😦u=e.href,\"original_referer=\"+r.href].join(-1==u.indexOf(\"?\")?\"?\":\"&\")).replace(/^http[😃/,\"https:\")).replace(/^\\/\\//,\"https://\"),s.open(n,e),i.preventDefault(t))}t.exports={attachTo:function(t){t.addEventListener(\"click\",u,!1)}}},function(t,e,n){var r,i=n(1),o=n(96),s=n(34),a=n(31),u=n(20),c=n(3),d=n(22),l=n(0),f=\"intent_\",h=i.screen.width,p=i.screen.height;function m(t,e){function n(t){return Math.round(t/2)}return t>e?{coordinate😮,size:e}:{coordinate:n(e)-n(t),size:t}}function v(t,e,n){var i,o;e=r.parse(e),n=n||{},i=m(e.width,n.width||h),e.left=i.coordinate,e.width=i.size,o=m(e.height,n.height||p),e.top😮.coordinate,e.height😮.size,this.win=t,this.features=function(t){var e😦];return l.forIn(t,function(t,n){e.push(t+\"=\"+n)}),e.join(\",\")}(e)}r😦new o).defaults({width:550,height:520,personalbar:\"0\",toolbar:\"0\",location:\"1\",scrollbars:\"1\",resizable:\"1\"}),v.prototype.open=function(t,e){var n=e&&\"click\"==e.type&&a.closest(\"a\",e.target),r=e&&(e.altKey||e.metaKey||e.shiftKey),i=n&&(u.ios()||u.android());if(c.isTwitterURL(t))return r||i?this😦this.name=f+d.generate(),this.popup=this.win.open(t,this.name,this.features),e&&s.preventDefault(e),this)},v.open=function(t,e,n){return new v(i,e).open(t,n)},t.exports=v},function(t,e,n){var r=n(4),i=n(0);function o(){this.assertions😦],this._defaults={}}o.prototype.assert=function(t,e){return this.assertions.push({fn:t,msg:e||\"assertion failed\"}),this},o.prototype.defaults=function(t){return this._defaults=t||this._defaults,this},o.prototype.require=function(t){var e=this;return(t=Array.isArray(t)?t:i.toRealArray(arguments)).forEach(function(t){e.assert(function(t){return function(e){return r.hasValue(e[t])}}(t),\"required: \"+t)}),this},o.prototype.parse=function(t){var e,n;if(e=i.aug({},this._defaults,t||{}),(n=this.assertions.reduce(function(t,n){return n.fn(e)||t.push(n.msg),t},[])).length>0)throw new Error(n.join(\"\\n\"));return e},t.exports😮},function(t,e,n){var r=n(5),i=n(6),o=n(21),s=n(49),a=n(32),u=n(9),c=n(36),d=n(23),l=n(4),f=n(0),h=n(69),p=n(114),m=n(28);function v(){var t=a.val(\"widgets:autoload\")||!0;return!l.isFalseValue(t)&&(l.isTruthValue(t)?r.body:r.querySelectorAll(t))}function g(t){var e,n;return t😦t=t||r.body).length?f.toRealArray(t)😦t],c.pause(),n=t.reduce(function(t,e){return t.concat(p.reduce(function(t,n){return t.concat(n(e))},[]))},[]),m.emitter.trigger(m.ALL_WIDGETS_RENDER_START,{widgets:n}),e😮.allResolved(n.map(function(t){return s.addWidget(t)})).then(function(t){d.trigger(\"loaded\",{widgets:t}),t&&t.length&&m.emitter.trigger(m.ALL_WIDGETS_RENDER_END,{widgets:t})}),o.always(e,function(){c.resume()}),e}t.exports={load:g,loadPage:function(){var t=v();return h.load(),!1===t?i.resolve()😦u.set(\"widgets.loaded\",!0),g(t))},_getPageLoadTarget:v}},function(t,e,n){var r=n(10),i=n(17),o=n(23),s=n(50),a=n(6),u=n(21);function c(t,e){this._widget=null,this._sandbox=null,this._hydrated=!1,this._insertedIntoDom=!1,this._Sandbox=t.Sandbox,this._factory=t.factory,this._widgetParams=t.parameters,this._resolve=e,this._className=t.className,this._renderedClassName=t.className+\"-rendered\",this._errorClassName=t.className+\"-error\",this._srcEl=t.srcEl,this._targetGlobal=function(t){return(t.srcEl||t.targetEl).ownerDocument.defaultView}(t),this._insertionStrategy=function(e){var n=t.srcEl,r=t.targetEl;n?r.insertBefore(e,n):r.appendChild(e)}}c.fromRawTask=function(t){return new c(t.input,t.taskDoneDeferred.resolve)},c.prototype.initialize=function(){var t=this,e=new this._Sandbox(this._targetGlobal);return this._factory(this._widgetParams,e).then(function(n){return t._widget=n,t._sandbox=e,n})},c.prototype.insertIntoDom=function(){var t=this;return this._widget?this._sandbox.insert(this._widget.id,{class😦this._className,this._renderedClassName].join(\" \")},null,this._insertionStrategy).then(function(){t._insertedIntoDom=!0}):a.reject(new Error(\"cannot insert widget into DOM before it is initialized\"))},c.prototype.hydrate=function(){var t=this;return this._widget?this._widget.hydrate().then(function(){t._hydrated=!0}):a.reject(new Error(\"cannot hydrate widget before it is initialized\"))},c.prototype.render=function(){var t=this;function e(e){return s(t._sandbox.sandboxEl).then(function(){return a.reject(e)})}return this._hydrated?this._insertedIntoDom?t._widget.render(t._sandbox).then(function(){return t._sandbox.onResize(function(){return t._widget.resize().then(function(){o.trigger(\"resize\",{target:t._sandbox.sandboxEl})})}),t._widget.show()}).then(function(){return s(t._srcEl).then(function(){return t._sandbox.sandboxEl})},e):e(new Error(\"cannot render widget before DOM insertion\")):e(new Error(\"cannot render widget before hydration\"))},c.prototype.fail=function(){var t=this;return this._srcEl?u.always(i.write(function(){r.add(t._srcEl,t._errorClassName)}),function(){o.trigger(\"rendered\",{target:t._srcEl}),t._resolve(t._srcEl)})😦t._resolve(),a.resolve())},c.prototype.success=function(){o.trigger(\"rendered\",{target:this._sandbox.sandboxEl}),this._resolve(this._sandbox.sandboxEl)},t.exports=c},function(t,e,n){var r;!function(){\"use strict\";var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)};function o(){this.frames😦],this.lastId😮,this.raf=i,this.batch={hash:{},read😦],write😦],mode:null}}o.prototype.read=function(t,e){var n=this.add(\"read\",t,e),r=n.id;return this.batch.read.push(n.id),\"reading\"===this.batch.mode||this.batch.scheduled?r😦this.scheduleBatch(),r)},o.prototype.write=function(t,e){var n=this.add(\"write\",t,e),r=this.batch.mode,i=n.id;return this.batch.write.push(n.id),\"writing\"===r||\"reading\"===r||this.batch.scheduled?i😦this.scheduleBatch(),i)},o.prototype.defer=function(t,e,n){\"function\"==typeof t&&(n=e,e=t,t=1);var r=this,i=t-1;return this.schedule(i,function(){r.run({fn:e,ctx:n})})},o.prototype.clear=function(t){if(\"function\"==typeof t)return this.clearFrame(t);t=Number(t);var e=this.batch.hash[t];if(e){var n=this.batch[e.type],r=n.indexOf(t);delete this.batch.hash[t],~r&&n.splice(r,1)}},o.prototype.clearFrame=function(t){var e=this.frames.indexOf(t);~e&&this.frames.splice(e,1)},o.prototype.scheduleBatch=function(){var t=this;this.schedule(0,function(){t.batch.scheduled=!1,t.runBatch()}),this.batch.scheduled=!0},o.prototype.uniqueId=function(){return++this.lastId},o.prototype.flush=function(t){for(var e;e=t.shift()😉this.run(this.batch.hash[e])},o.prototype.runBatch=function(){try{this.batch.mode=\"reading\",this.flush(this.batch.read),this.batch.mode=\"writing\",this.flush(this.batch.write),this.batch.mode=null}catch(t){throw this.runBatch(),t}},o.prototype.add=function(t,e,n){var r=this.uniqueId();return this.batch.hash[r]={id:r,fn:e,ctx:n,type:t}},o.prototype.run=function(t){var e=t.ctx||this,n=t.fn;if(delete this.batch.hash[t.id],!this.onError)return n.call(e);try{n.call(e)}catch(t){this.onError(t)}},o.prototype.loop=function(){var t,e=this,n=this.raf,r=!1;function i(){var t=e.frames.shift();e.frames.length?n(i):e.looping=!1,t&&t()}this.looping||(t=setTimeout(function(){r=!0,i()},500),n(function(){r||(clearTimeout(t),i())}),this.looping=!0)},o.prototype.schedule=function(t,e){return this.frames[t]?this.schedule(t+1,e)😦this.loop(),this.frames[t]=e)};var s=new o;void 0!==t&&t.exports?t.exports😒:void 0===(r=function(){return s}.call(e,n,e,t))||(t.exports=r)}()},function(t,e,n){var r=n(45).Promise;t.exports=r._asap},function(t,e,n){var r,i,o,s=n(5),a=n(1),u=n(29),c=n(19),d=n(2),l=n(6),f=n(51),h=n(33),p=n(0),m=n(24),v=n(9).get(\"scribeCallback\"),g=Math.floor(1e3*Math.random())+\"_\",w=\"rufous-frame-\"+g+\"-\",y=\"rufous-form-\"+g+\"-\",b😮,_=!1,E=new d;function x(){var t😮.createElement(\"form\"),e😮.createElement(\"input\"),n😮.createElement(\"input\");return b++,t.action=h.CLIENT_EVENT_ENDPOINT,t.method=\"POST\",t.target=w+b,t.id=y+b,e.type=\"hidden\",e.name=\"dnt\",e.value=c.enabled(),n.type=\"hidden\",n.name=\"tfw_redirect\",n.value=h.RUFOUS_REDIRECT,t.appendChild(e),t.appendChild(n),t}function A(){var t=w+b;return u({id:t,name:t,width😮,height😮,border😮},{display:\"none\"},o.doc)}t.exports={clientEvent:function(t,e,n,i){(function(t,e){var n=!p.isObject(t),r=!!e&&!p.isObject(e),i=n||r;return i})(t,e)||(v&&v(arguments),E.promise.then(function(){!function(t,e){var n,i,s😜.isObject(t)&&p.isObject(e)&&(f.log(t,e),s=h.flattenClientEventPayload(t,e),(n=r.firstChild).value=+(+n.value||s.dnt||0),(i😮.createElement(\"input\")).type=\"hidden\",i.name=\"l\",i.value=h.stringify(s),r.appendChild(i))}(h.formatClientEventNamespace(t),h.formatClientEventData(e,n,i))}))},flush:function(){return E.promise.then(function(){var t;return r.children.length<=2?l.reject()😦t=l.all([o.doc.body.appendChild(r),o.doc.body.appendChild(i)]).then(function(t){var e=t[0],n=t[1];return n.addEventListener(\"load\",function(){!function(t,e){return function(){var n=t.parentNode;n&&(n.removeChild(t),n.removeChild(e))}}(e,n)()}),e.submit(),t}),r=x(),i=A(),t)})},init:function(){return _?E.promise:((o=new m(a)).insert(\"rufous-sandbox\",null,{display:\"none\"},function(t){s.body.appendChild(t)}).then(function(){o.setTitle(\"Twitter analytics iframe\"),r=x(),i=A(),E.resolve([r,i])}),_=!0,E.promise)}}},function(t,e,n){var r=n(0);t.exports=function t(e){var n😦];return e.forEach(function(e){var i=r.isType(\"array\",e)?t(e)😦e];n=n.concat(i)}),n}},function(t,e){t.exports=function(t){return t.filter(function(e,n){return t.indexOf(e)===n})}},function(t,e,n){var r=n(38),i=n(0),o=n(106);function s(){r.apply(this,arguments)}s.prototype=Object.create(r.prototype),i.aug(s.prototype,{factory😮}),t.exports😒},function(t,e,n){var r=n(21),i=n(0),o=n(7);t.exports={before:function(t,e){return function(){var n,i=this,o=arguments;return n=e.apply(this,arguments),r.isPromise(n)?n.then(function(){return t.apply(i,o)}):t.apply(this,arguments)}},after:function(t,e){return function(){var n,i=this,o=arguments;function s(t,e){return r.isPromise(e)?e.then(function(){return t}):t}return n=t.apply(this,arguments),r.isPromise(n)?n.then(function(t){return s(t,e.apply(i,o))})😒(n,e.apply(this,arguments))}},around:function(t,e){return function(){var n=i.toRealArray(arguments);return n.unshift(o(t,this)),e.apply(this,n)}}}},function(t,e,n){var r=n(10),i=n(17),o=n(39),s=n(6),a=n(0);t.exports=function(){var t😮();function e(e){t.apply(this,arguments),Object.defineProperty(this,\"targetGlobal\",{value:e})}return e.prototype=Object.create(t.prototype),a.aug(e.prototype,{id:null,initialized:!1,width😮,height😮,sandboxEl:null,insert:function(){return s.reject()},onResize:function(){},addClass:function(t){var e=this.sandboxEl;return t=Array.isArray(t)?t😦t],i.write(function(){t.forEach(function(t){r.add(e,t)})})},removeClass:function(t){var e=this.sandboxEl;return t=Array.isArray(t)?t😦t],i.write(function(){t.forEach(function(t){r.remove(e,t)})})},styleSelf:function(t){var e=this;return i.write(function(){a.forIn(t,function(t,n){e.sandboxEl.style[t]=n})})}}),e}},function(t,e,n){var r=n(5),i=n(10),o=n(17),s=n(52),a=n(25),u=n(53),c=n(42),d=n(43),l=n(29),f=n(12),h=n(44),p=n(2),m=n(6),v=n(0),g=n(9),w=n(22),y=n(7),b={allowfullscreen:\"true\"},_={position:\"absolute\",visibility:\"hidden\",display:\"block\",width:\"0px\",height:\"0px\",padding:\"0\",border:\"none\"},E={position:\"static\",visibility:\"visible\"},x=\"SandboxRoot\",A=\".SandboxRoot { display: none; }\",T=50;function S(t,e,n,r){return e=v.aug({id:t},b,e),n=v.aug({},_,n),l(e,n,r)}function R(t,e,n,i,s){var a=new p,u=w.generate(),c😒(t,e,n,s);return g.set([\"sandbox\",u],function(){var t=c.contentWindow.document;o.write(function(){t.write(\"<!DOCTYPE html><html><head></head><body></body></html>\")}).then(function(){t.close(),a.resolve(c)})}),c.src😦\"javascript:\",'document.write(\"\");',\"try { window.parent.document; }\",'catch (e) { document.domain=\"'+r.domain+'\"; }',\"window.parent.\"+g.fullPath([\"sandbox\",u])+\"();\"].join(\"\"),c.addEventListener(\"error\",a.reject,!1),o.write(function(){i.parentNode.replaceChild(c,i)}),a.promise}t.exports=a.couple(n(54),function(t){t.overrideProperty(\"id\",{get:function(){return this.sandboxEl&&this.sandboxEl.id}}),t.overrideProperty(\"initialized\",{get:function(){return!!this.win}}),t.overrideProperty(\"width\",{get:function(){return this._width}}),t.overrideProperty(\"height\",{get:function(){return this._height}}),t.overrideProperty(\"sandboxEl\",{get:function(){return this.iframeEl}}),t.defineProperty(\"iframeEl\",{get:function(){return this._iframe}}),t.defineProperty(\"rootEl\",{get:function(){return this.doc&&this.doc.documentElement}}),t.defineProperty(\"widgetEl\",{get:function(){return this.doc&&this.doc.body.firstElementChild}}),t.defineProperty(\"win\",{get:function(){return this.iframeEl&&this.iframeEl.contentWindow}}),t.defineProperty(\"doc\",{get:function(){return this.win&&this.win.document}}),t.define(\"_updateCachedDimensions\",function(){var t=this;return o.read(function(){var e,n=h(t.sandboxEl);\"visible\"==t.sandboxEl.style.visibility?t._width=n.width😦e=h(t.sandboxEl.parentElement).width,t._width=Math.min(n.width,e)),t._height=n.height})}),t.define(\"_setTargetToBlank\",function(){var t=this.createElement(\"base\");t.target=\"_blank\",this.doc.head.appendChild(t)}),t.define(\"_didResize\",function(){var t=this,e=this._resizeHandlers.slice(0);return this._updateCachedDimensions().then(function(){e.forEach(function(e){e(t)})})}),t.define(\"setTitle\",function(t){this.iframeEl.title=t}),t.override(\"createElement\",function(t){return this.doc.createElement(t)}),t.override(\"createFragment\",function(){return this.doc.createDocumentFragment()}),t.override(\"htmlToElement\",function(t){var e;return(e=this.createElement(\"div\")).innerHTML=t,e.firstElementChild}),t.override(\"hasSelectedText\",function(){return!!s.getSelectedText(this.win)}),t.override(\"addRootClass\",function(t){var e=this.rootEl;return t=Array.isArray(t)?t😦t],this.initialized?o.write(function(){t.forEach(function(t){i.add(e,t)})}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"removeRootClass\",function(t){var e=this.rootEl;return t=Array.isArray(t)?t😦t],this.initialized?o.write(function(){t.forEach(function(t){i.remove(e,t)})}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"hasRootClass\",function(t){return i.present(this.rootEl,t)}),t.define(\"addStyleSheet\",function(t,e){var n,r=new p;return this.initialized?((n=this.createElement(\"link\")).type=\"text/css\",n.rel=\"stylesheet\",n.href=t,n.addEventListener(\"load\",r.resolve,!1),n.addEventListener(\"error\",r.reject,!1),o.write(y(e,null,n)).then(function(){return u(t).then(r.resolve,r.reject),r.promise})):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"prependStyleSheet\",function(t){var e=this.doc;return this.addStyleSheet(t,function(t){var n=e.head.firstElementChild;return n?e.head.insertBefore(t,n):e.head.appendChild(t)})}),t.override(\"appendStyleSheet\",function(t){var e=this.doc;return this.addStyleSheet(t,function(t){return e.head.appendChild(t)})}),t.define(\"addCss\",function(t,e){var n;return c.inlineStyle()?((n=this.createElement(\"style\")).type=\"text/css\",n.appendChild(this.doc.createTextNode(t)),o.write(y(e,null,n)))😦f.devError(\"CSP enabled; cannot embed inline styles\"),m.resolve())}),t.override(\"prependCss\",function(t){var e=this.doc;return this.addCss(t,function(t){var n=e.head.firstElementChild;return n?e.head.insertBefore(t,n):e.head.appendChild(t)})}),t.override(\"appendCss\",function(t){var e=this.doc;return this.addCss(t,function(t){return e.head.appendChild(t)})}),t.override(\"makeVisible\",function(){var t=this;return this.styleSelf(E).then(function(){t._updateCachedDimensions()})}),t.override(\"injectWidgetEl\",function(t){var e=this;return this.initialized?this.widgetEl?m.reject(new Error(\"widget already injected\"))😮.write(function(){e.doc.body.appendChild(t)}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"matchHeightToContent\",function(){var t,e=this;return o.read(function(){t=e.widgetEl?h(e.widgetEl).height😮}),o.write(function(){e.sandboxEl.style.height=t+\"px\"}).then(function(){return e._updateCachedDimensions()})}),t.override(\"matchWidthToContent\",function(){var t,e=this;return o.read(function(){t=e.widgetEl?h(e.widgetEl).width😮}),o.write(function(){e.sandboxEl.style.width=t+\"px\"}).then(function(){return e._updateCachedDimensions()})}),t.after(\"initialize\",function(){this._iframe=null,this._width=this._height😮,this._resizeHandlers😦]}),t.override(\"insert\",function(t,e,n,r){var i=this,s=new p,a=this.targetGlobal.document,u😒(t,e,n,a);return o.write(y(r,null,u)),u.addEventListener(\"load\",function(){(function(t){try{t.contentWindow.document}catch(t){return m.reject(t)}return m.resolve(t)})(u).then(null,y(R,null,t,e,n,u,a)).then(s.resolve,s.reject)},!1),u.addEventListener(\"error\",s.reject,!1),s.promise.then(function(t){var e😛(i._didResize,T,i);return i._iframe=t,i.win.addEventListener(\"resize\",e,!1),m.all([i._setTargetToBlank(),i.addRootClass(😆,i.prependCss(A)])})}),t.override(\"onResize\",function(t){this._resizeHandlers.push(t)}),t.after(\"styleSelf\",function(){return this._updateCachedDimensions()})})},function(t,e){t.exports=function(){throw new Error(\"unimplemented method\")}},function(t,e,n){var r=n(2),i=n(7),o=100,s=3e3;function a(t,e){this._inputsQueue😦],this._task=t,this._isPaused=!1,this._flushDelay=e&&e.flushDelay||o,this._pauseLength=e&&e.pauseLength||s,this._flushTimeout=void 0}a.prototype.add=function(t){var e=new r;return this._inputsQueue.push({input:t,taskDoneDeferred:e}),this._scheduleFlush(),e.promise},a.prototype._scheduleFlush=function(){this._isPaused||(clearTimeout(this._flushTimeout),this._flushTimeout=setTimeout(i(this._flush,this),this._flushDelay))},a.prototype._flush=function(){try{this._task.call(null,this._inputsQueue)}catch(t){this._inputsQueue.forEach(function(e){e.taskDoneDeferred.reject(t)})}this._inputsQueue😦],this._flushTimeout=void 0},a.prototype.pause=function(t){clearTimeout(this._flushTimeout),this._isPaused=!0,!t&&this._pauseLength&&setTimeout(i(this.resume,this),this._pauseLength)},a.prototype.resume=function(){this._isPaused=!1,this._scheduleFlush()},t.exports=a},function(t,e,n){var r,i=n(70),o=n(29),s=n(2),a=n(5),u=n(18),c=n(20),d=n(30),l=n(😎,f=n(12),h=n(111),p=n(55),m=n(9),v=n(11),g=n(112),w=n(0),y=n(1),b😛(function(){return new s});function _(t){var e=t||{should_obtain_cookie_consent:!0,experiments:{}};return new g(e.should_obtain_cookie_consent,e.experiments)}t.exports={load:function(){var t,e,n,s;if(c.ie9()||c.ie10()||\"http:\"!==l.protocol&&\"https:\"!==l.protocol)return f.devError(\"Using default settings due to unsupported browser or protocol.\"),r=_(),void b().resolve();t={origin:l.origin},u.settings().indexOf(\"localhost\")>-1&&(t.localSettings=!0),e=v.url(i.resourceBaseUrl+i.widgetIframeHtmlPath,t),n=function(t){var n;if(e.substr(0,t.origin.length)===t.origin)try{(n=\"string\"==typeof t.data?d.parse(t.data):t.data).namespace===h.settings&&(r=_(n.settings),b().resolve())}catch(t){f.devError(t)}},y.addEventListener(\"message\",n),s😮({src:e,title:\"Twitter settings iframe\"},{display:\"none\"}),a.body.appendChild(s)},settingsLoaded:function(){var t,e,n;return t=new s,e=m.get(\"experimentOverride\"),b().promise.then(function(){e&&e.name&&e.assignment&&((n={})[e.name]={bucket:e.assignment},r.experiments=w.aug(r.experiments,n)),t.resolve(r)}).catch(function(e){t.reject(e)}),t.promise}}},function(t,e){t.exports={settings:\"twttr.settings\"}},function(t,e){t.exports=function(t,e){this.shouldObtainCookieConsent=t,this.experiments=e||{}}},function(t,e){t.exports=function(t){return t.split(\"\").map(function(t){return t.charCodeAt(0).toString(16)}).join(\"\")}},function(t,e,n){t.exports😦n(115),n(120),n(128),n(130),n(132),n(146),n(148)]},function(t,e,n){var r=n(11),i=n(4),o=n(0),s=n(13),a=n(14)(),u=n(56),c=\"a.twitter-dm-button\";t.exports=function(t){return a(t,c).map(function(t){return u(function(t){var e=t.getAttribute(\"data-show-screen-name\"),n😒(t),a=t.getAttribute(\"href\"),u=t.getAttribute(\"data-screen-name\"),c=e?i.asBoolean(e):null,d=t.getAttribute(\"data-size\"),l=r.decodeURL(a),f=l.recipient_id,h=t.getAttribute(\"data-text\")||l.text,p=t.getAttribute(\"data-welcome-message-id\")||l.welcomeMessageId;return o.aug(n,{screenName:u,showScreenName:c,size😛,text:h,userId:f,welcomeMessageId😛})}(t),t.parentNode,t)})}},function(t,e,n){var r=n(0);t.exports=function t(e){var n;if(e)return n=e.lang||e.getAttribute(\"data-lang\"),r.isType(\"string\",n)?n:t(e.parentElement)}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return n.e(2).then(function(r){var o;try{o=n(84),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(119),i=n(1),o=n(10),s=n(34),a=n(17),u=n(52),c=n(25),d=n(53),l=n(42),f=n(44),h=n(7),p=n(43),m=n(6),v=n(0),g=50,w={position:\"absolute\",visibility:\"hidden\",display:\"block\",transform:\"rotate(0deg)\"},y={position:\"static\",visibility:\"visible\"},b=\"twitter-widget\",_=\"open\",E=\"SandboxRoot\",x=\".SandboxRoot { display: none; max-height: 10000px; }\";t.exports=c.couple(n(54),function(t){t.defineStatic(\"isSupported\",function(){return!!i.HTMLElement.prototype.attachShadow&&l.inlineStyle()}),t.overrideProperty(\"id\",{get:function(){return this.sandboxEl&&this.sandboxEl.id}}),t.overrideProperty(\"initialized\",{get:function(){return!!this._shadowHost}}),t.overrideProperty(\"width\",{get:function(){return this._width}}),t.overrideProperty(\"height\",{get:function(){return this._height}}),t.overrideProperty(\"sandboxEl\",{get:function(){return this._shadowHost}}),t.define(\"_updateCachedDimensions\",function(){var t=this;return a.read(function(){var e,n=f(t.sandboxEl);\"visible\"==t.sandboxEl.style.visibility?t._width=n.width😦e=f(t.sandboxEl.parentElement).width,t._width=Math.min(n.width,e)),t._height=n.height})}),t.define(\"_didResize\",function(){var t=this,e=this._resizeHandlers.slice(0);return this._updateCachedDimensions().then(function(){e.forEach(function(e){e(t)})})}),t.override(\"createElement\",function(t){return this.targetGlobal.document.createElement(t)}),t.override(\"createFragment\",function(){return this.targetGlobal.document.createDocumentFragment()}),t.override(\"htmlToElement\",function(t){var e;return(e=this.createElement(\"div\")).innerHTML=t,e.firstElementChild}),t.override(\"hasSelectedText\",function(){return!!u.getSelectedText(this.targetGlobal)}),t.override(\"addRootClass\",function(t){var e=this._shadowRootBody;return t=Array.isArray(t)?t😦t],this.initialized?a.write(function(){t.forEach(function(t){o.add(e,t)})}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"removeRootClass\",function(t){var e=this._shadowRootBody;return t=Array.isArray(t)?t😦t],this.initialized?a.write(function(){t.forEach(function(t){o.remove(e,t)})}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"hasRootClass\",function(t){return o.present(this._shadowRootBody,t)}),t.override(\"addStyleSheet\",function(t,e){return this.addCss('@import url(\"'+t+'\");',e).then(function(){return d(t)})}),t.override(\"prependStyleSheet\",function(t){var e=this._shadowRoot;return this.addStyleSheet(t,function(t){var n=e.firstElementChild;return n?e.insertBefore(t,n):e.appendChild(t)})}),t.override(\"appendStyleSheet\",function(t){var e=this._shadowRoot;return this.addStyleSheet(t,function(t){return e.appendChild(t)})}),t.override(\"addCss\",function(t,e){var n;return this.initialized?l.inlineStyle()?((n=this.createElement(\"style\")).type=\"text/css\",n.appendChild(this.targetGlobal.document.createTextNode(t)),a.write(h(e,null,n))):m.resolve():m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"prependCss\",function(t){var e=this._shadowRoot;return this.addCss(t,function(t){var n=e.firstElementChild;return n?e.insertBefore(t,n):e.appendChild(t)})}),t.override(\"appendCss\",function(t){var e=this._shadowRoot;return this.addCss(t,function(t){return e.appendChild(t)})}),t.override(\"makeVisible\",function(){return this.styleSelf(y)}),t.override(\"injectWidgetEl\",function(t){var e=this;return this.initialized?this._shadowRootBody.firstElementChild?m.reject(new Error(\"widget already injected\")):a.write(function(){e._shadowRootBody.appendChild(t)}).then(function(){return e._updateCachedDimensions()}).then(function(){var t😛(e._didResize,g,e);new r(e._shadowRootBody,t)}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"matchHeightToContent\",function(){return m.resolve()}),t.override(\"matchWidthToContent\",function(){return m.resolve()}),t.override(\"insert\",function(t,e,n,r){var i=this.targetGlobal.document,o=this._shadowHost=i.createElement(b),u=this._shadowRoot😮.attachShadow({mode:_}),c=this._shadowRootBody=i.createElement(\"div\");return v.forIn(e||{},function(t,e){o.setAttribute(t,e)}),o.id=t,u.appendChild(c),s.delegate(c,\"click\",\"A\",function(t,e){e.hasAttribute(\"target\")||e.setAttribute(\"target\",\"_blank\")}),m.all([this.styleSelf(w),this.addRootClass(E),this.prependCss(😆,a.write(r.bind(null,o))])}),t.override(\"onResize\",function(t){this._resizeHandlers.push(t)}),t.after(\"initialize\",function(){this._shadowHost=this._shadowRoot=this._shadowRootBody=null,this._width=this._height😮,this._resizeHandlers😦]}),t.after(\"styleSelf\",function(){return this._updateCachedDimensions()})})},function(t,e){var n;(n=function(t,e){function r(t,e){if(t.resizedAttached){if(t.resizedAttached)return void t.resizedAttached.add(e)}else t.resizedAttached=new function(){var t,e;this.q😦],this.add=function(t){this.q.push(t)},this.call=function(){for(t😮,e=this.q.length;t<e;t++)this.q[t].call()}},t.resizedAttached.add(e);t.resizeSensor=document.createElement(\"div\"),t.resizeSensor.className=\"resize-sensor\";var n=\"position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;\",r=\"position: absolute; left: 0; top: 0; transition: 0s;\";t.resizeSensor.style.cssText=n,t.resizeSensor.innerHTML='<div class=\"resize-sensor-expand\" style=\"'+n+'\"><div style=\"'+r+'\"></div></div><div class=\"resize-sensor-shrink\" style=\"'+n+'\"><div style=\"'+r+' width: 200%; height: 200%\"></div></div>',t.appendChild(t.resizeSensor),{fixed:1,absolute:1}[function(t,e){return t.currentStyle?t.currentStyle[e]:window.getComputedStyle?window.getComputedStyle(t,null).getPropertyValue(e):t.style[e]}(t,\"position\")]||(t.style.position=\"relative\");var i,o,s=t.resizeSensor.childNodes[0],a😒.childNodes[0],u=t.resizeSensor.childNodes[1],c😦u.childNodes[0],function(){a.style.width😒.offsetWidth+10+\"px\",a.style.height😒.offsetHeight+10+\"px\",s.scrollLeft😒.scrollWidth,s.scrollTop😒.scrollHeight,u.scrollLeft=u.scrollWidth,u.scrollTop=u.scrollHeight,i=t.offsetWidth,o=t.offsetHeight});c();var d=function(t,e,n){t.attachEvent?t.attachEvent(\"on\"+e,n):t.addEventListener(e,n)},l=function(){t.offsetWidth==i&&t.offsetHeight==o||t.resizedAttached&&t.resizedAttached.call(),c()}😜(s,\"scroll\",l),d(u,\"scroll\",l)}var i=Object.prototype.toString.call(t),o=\"[object Array]\"===i||\"[object NodeList]\"===i||\"[object HTMLCollection]\"===i||\"undefined\"!=typeof jQuery&&t instanceof jQuery||\"undefined\"!=typeof Elements&&t instanceof Elements;if(o)for(var s😮,a=t.length;s<a;s++)r(t[s],e);else r(t,e);this.detach=function(){if(o)for(var e😮,r=t.length;e<r;e++)n.detach(t[e]);else n.detach(t)}}).detach=function(t){t.resizeSensor&&(t.removeChild(t.resizeSensor),delete t.resizeSensor,delete t.resizedAttached)},void 0!==t&&void 0!==t.exports?t.exports=n:window.ResizeSensor=n},function(t,e,n){var r=n(3),i=n(0),o=n(13),s=n(14)(),a=n(59),u=n(4),c=\"a.twitter-follow-button\";t.exports=function(t){return s(t,c).map(function(t){return a(function(t){var e😮(t),n={screenName:r.screenName(t.href),showScreenName:\"false\"!==t.getAttribute(\"data-show-screen-name\"),showCount:\"false\"!==t.getAttribute(\"data-show-count\"),size:t.getAttribute(\"data-size\"),count:t.getAttribute(\"data-count\"),preview:t.getAttribute(\"data-preview\")};return i.forIn(n,function(t,n){var r=e[t];e[t]=u.hasValue(r)?r:n}),e.screenName=e.screenName||e.screen_name,e}(t),t.parentNode,t)})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return n.e(3).then(function(r){var o;try{o=n(85),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(17),i=n(123),o=n(55),s=n(29),a=n(2),u=n(6),c=n(7),d=n(0),l={position:\"absolute\",visibility:\"hidden\",width:\"0px\",height:\"0px\"},f={position:\"static\",visibility:\"visible\"},h={};i(function(t,e,n){var r=h[t];if(r)return e=e||1,n=n||1,r.styleSelf({width:e+\"px\",height:n+\"px\"}).then(function(){r.didResize()})}),t.exports=function(t){t.overrideProperty(\"id\",{get:function(){return this.sandboxEl&&this.sandboxEl.id}}),t.overrideProperty(\"initialized\",{get:function(){return!!this.iframeEl}}),t.overrideProperty(\"width\",{get:function(){return this._width}}),t.overrideProperty(\"height\",{get:function(){return this._height}}),t.overrideProperty(\"sandboxEl\",{get:function(){return this.iframeEl}}),t.defineProperty(\"iframeEl\",{get:function(){return this._iframe}}),t.define(\"updateCachedDimensions\",function(){var t=this;return this.initialized?r.read(function(){t._width=t.sandboxEl.offsetWidth,t._height=t.sandboxEl.offsetHeight}):u.resolve()}),t.define(\"setTitle\",function(t){this.iframeEl.title=t}),t.define(\"makeVisible\",function(){return this.styleSelf(f)}),t.define(\"didResize\",function(){var t=this,e=t._resizeHandlers.length>0;return this.updateCachedDimensions().then(function(){e&&t._resizeHandlers.forEach(function(e){e(t)})})}),t.define(\"loadDocument\",function(t){var e=new a;return this.initialized?this.iframeEl.src?u.reject(new Error(\"widget already loaded\"))😦this.iframeEl.addEventListener(\"load\",e.resolve,!1),this.iframeEl.addEventListener(\"error\",e.reject,!1),this.iframeEl.src=t,e.promise):u.reject(new Error(\"sandbox not initialized\"))}),t.after(\"initialize\",function(){this._iframe=null,this._width=this._height😮,this._resizeHandlers😦]}),t.override(\"insert\",function(t,e,n,i){var a=this;return e😛.aug({id:t},e),n😛.aug({},l,n),this._iframe😒(e,n),h[t]=this,this.onResize(o(function(){a.makeVisible()})),r.write(c(i,null,this._iframe))}),t.override(\"onResize\",function(t){this._resizeHandlers.push(t)}),t.after(\"styleSelf\",function(){return this.updateCachedDimensions()})}},function(t,e,n){var r=n(1),i=n(124),o=n(126),s=n(23),a=n(4),u=n(127);t.exports=function(t){(new i).attachReceiver(new o.Receiver(r,\"twttr.button\")).bind(\"twttr.private.trigger\",function(t,e){var n=u(this);s.trigger(t,{target:n,region:e,type:t,data:{}})}).bind(\"twttr.private.resizeButton\",function(e){var n=u(this),r=n&&n.id,i=a.asInt(e.width),o=a.asInt(e.height);r&&void 0!==i&&void 0!==o&&t(r,i,o)})}},function(t,e,n){var r=n(30),i=n(125),o=n(0),s=n(6),a=n(21),u=\"2.0\";function c(t){this.registry=t||{}}function d(t){var e,n;return e😮.isType(\"string\",t),n😮.isType(\"number\",t),e||n||null===t}function l(t,e){return{jsonrpc:u,id😛(t)?t:null,error:e}}c.prototype._invoke=function(t,e){var n,r,i;n=this.registry[t.method],r=t.params||[],r😮.isType(\"array\",r)?r😦r];try{i=n.apply(e.source||null,r)}catch(t){i😒.reject(t.message)}return a.isPromise(i)?i😒.resolve(i)},c.prototype._processRequest=function(t,e){var n,r;return function(t){var e,n,r;return!!o.isObject(t)&&(e=t.jsonrpc===u,n😮.isType(\"string\",t.method),r=!(\"id\"in t)||d(t.id),e&&n&&r)}(t)?(n=\"params\"in t&&(r=t.params,!o.isObject(r)||o.isType(\"function\",r))?s.resolve(l(t.id,i.INVALID_PARAMS)):this.registry[t.method]?this._invoke(t,{source:e}).then(function(e){return n=t.id,{jsonrpc:u,id:n,result:e};var n},function(){return l(t.id,i.INTERNAL_ERROR)})😒.resolve(l(t.id,i.METHOD_NOT_FOUND)),null!=t.id?n😒.resolve())😒.resolve(l(t.id,i.INVALID_REQUEST))},c.prototype.attachReceiver=function(t){return t.attachTo(this),this},c.prototype.bind=function(t,e){return this.registry[t]=e,this},c.prototype.receive=function(t,e){var n,a,u,c=this;try{u=t,t😮.isType(\"string\",u)?r.parse(u):u}catch(t){return s.resolve(l(null,i.PARSE_ERROR))}return e=e||null,a=((n😮.isType(\"array\",t))?t😦t]).map(function(t){return c._processRequest(t,e)}),n?function(t){return s.all(t).then(function(t){return(t=t.filter(function(t){return void 0!==t})).length?t:void 0})}(a):a[0]},t.exports=c},function(t){t.exports={PARSE_ERROR:{code😶32700,message:\"Parse error\"},INVALID_REQUEST:{code😶32600,message:\"Invalid Request\"},INVALID_PARAMS:{code😶32602,message:\"Invalid params\"},METHOD_NOT_FOUND:{code😶32601,message:\"Method not found\"},INTERNAL_ERROR:{code😶32603,message:\"Internal error\"}}},function(t,e,n){var r=n(😎,i=n(1),o=n(30),s=n(2),a=n(20),u=n(0),c=n(3),d=n(7),l=a.ie9();function f(t,e,n){var r;t&&t.postMessage&&(l?r😦n||\"\")+o.stringify(e):n?(r={})[n]=e:r=e,t.postMessage(r,\"*\"))}function h(t){return u.isType(\"string\",t)?t:\"JSONRPC\"}function p(t,e){return e?u.isType(\"string\",t)&&0===t.indexOf(e)?t.substring(e.length):t&&t[e]?t[e]:void 0:t}function m(t,e){var n=t.document;this.filter=h(e),this.server=null,this.isTwitterFrame=c.isTwitterURL(n.location.href),t.addEventListener(\"message\",d(this._onMessage,this),!1)}function v(t,e){this.pending={},this.target=t,this.isTwitterHost=c.isTwitterURL(r.href),this.filter=h(e),i.addEventListener(\"message\",d(this._onMessage,this),!1)}u.aug(m.prototype,{_onMessage:function(t){var e,n=this;this.server&&(this.isTwitterFrame&&!c.isTwitterURL(t.origin)||(e😛(t.data,this.filter))&&this.server.receive(e,t.source).then(function(e){e&&f(t.source,e,n.filter)}))},attachTo:function(t){this.server=t},detach:function(){this.server=null}}),u.aug(v.prototype,{_processResponse:function(t){var e=this.pending[t.id];e&&(e.resolve(t),delete this.pending[t.id])},_onMessage:function(t){var e;if((!this.isTwitterHost||c.isTwitterURL(t.origin))&&(e😛(t.data,this.filter))){if(u.isType(\"string\",e))try{e😮.parse(e)}catch(t){return}(e=u.isType(\"array\",e)?e😦e]).forEach(d(this._processResponse,this))}},send:function(t){var e=new s;return t.id?this.pending[t.id]=e:e.resolve(),f(this.target,t,this.filter),e.promise}}),t.exports={Receiver:m,Dispatcher:v,_stringifyPayload:function(t){return arguments.length>0&&(l=!!t),l}}},function(t,e,n){var r=n(5);t.exports=function(t){for(var e,n=r.getElementsByTagName(\"iframe\"),i😮;n[i];i++)if((e=n[i]).contentWindow===t)return e}},function(t,e,n){var r=n(4),i=n(0),o=n(3),s=n(13),a=n(14)(),u=n(61),c=\"a.twitter-moment\";t.exports=function(t){return a(t,c).map(function(t){return u(function(t){var e😒(t),n={momentId😮.momentId(t.href),chrome:t.getAttribute(\"data-chrome\"),limit:t.getAttribute(\"data-limit\")};return i.forIn(n,function(t,n){var i=e[t];e[t]=r.hasValue(i)?i:n}),e}(t),t.parentNode,t)})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return Promise.all([n.e(0),n.e(4)]).then(function(r){var o;try{o=n(86),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(0),i=n(13),o=n(14)(),s=n(62),a=\"a.periscope-on-air\",u😕^https?😕/\\/(?:www\\.)?(?:periscope|pscp)\\.tv\\/@?([a-zA-Z0-9_]+)\\/?$/i;t.exports=function(t){return o(t,a).map(function(t){return s(function(t){var e=i(t),n=t.getAttribute(\"href\"),o=t.getAttribute(\"data-size\"),s=u.exec(n)[1];return r.aug(e,{username😒,size😮})}(t),t.parentNode,t)})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return n.e(5).then(function(r){var o;try{o=n(87),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(4),i=n(0),o=n(63),s=n(13),a=n(14)(),u=n(64),c=n(3),d=n(12),l=\"a.twitter-timeline,div.twitter-timeline,a.twitter-grid\",f=\"Embedded Search timelines have been deprecated. See https://twittercommunity.com/t/deprecating-widget-settings/102295.\",h=\"You may have been affected by an update to settings in embedded timelines. See https://twittercommunity.com/t/deprecating-widget-settings/102295.\",p=\"Embedded grids have been deprecated and will now render as timelines. Please update your embed code to use the twitter-timeline class. More info: https://twittercommunity.com/t/update-on-the-embedded-grid-display-type/119564.\";t.exports=function(t){return a(t,l).map(function(t){return u(function(t){var e😒(t),n=t.getAttribute(\"data-show-replies\"),a={isPreconfigured:!!t.getAttribute(\"data-widget-id\"),chrome:t.getAttribute(\"data-chrome\"),tweetLimit:t.getAttribute(\"data-tweet-limit\")||t.getAttribute(\"data-limit\"),ariaLive:t.getAttribute(\"data-aria-polite\"),theme:t.getAttribute(\"data-theme\"),linkColor:t.getAttribute(\"data-link-color\"),borderColor:t.getAttribute(\"data-border-color\"),showReplies:n?r.asBoolean(n):null,profileScreenName:t.getAttribute(\"data-screen-name\"),profileUserId:t.getAttribute(\"data-user-id\"),favoritesScreenName:t.getAttribute(\"data-favorites-screen-name\"),favoritesUserId:t.getAttribute(\"data-favorites-user-id\"),likesScreenName:t.getAttribute(\"data-likes-screen-name\"),likesUserId:t.getAttribute(\"data-likes-user-id\"),listOwnerScreenName:t.getAttribute(\"data-list-owner-screen-name\"),listOwnerUserId:t.getAttribute(\"data-list-owner-id\"),listId:t.getAttribute(\"data-list-id\"),listSlug:t.getAttribute(\"data-list-slug\"),customTimelineId:t.getAttribute(\"data-custom-timeline-id\"),staticContent:t.getAttribute(\"data-static-content\"),url:t.href};return a.isPreconfigured&&(c.isSearchUrl(a.url)?d.publicError(f,t)😛.publicLog(h,t)),\"twitter-grid\"===t.className&&d.publicLog(p,t),(a=i.aug(a,e)).dataSource😮(a),a.id=a.dataSource&&a.dataSource.id,a}(t),t.parentNode,t)})}},function(t,e,n){var r=n(26);t.exports=r.build([n(27),n(136)])},function(t,e,n){var r=n(0),i=n(135);t.exports=function(t){return\"en\"===t||r.contains(i,t)}},function(t,e){t.exports😦\"hi\",\"zh-cn\",\"fr\",\"zh-tw\",\"msa\",\"fil\",\"fi\",\"sv\",\"pl\",\"ja\",\"ko\",\"de\",\"it\",\"pt\",\"es\",\"ru\",\"id\",\"tr\",\"da\",\"no\",\"nl\",\"hu\",\"fa\",\"ar\",\"ur\",\"he\",\"th\",\"cs\",\"uk\",\"vi\",\"ro\",\"bn\",\"el\",\"en-gb\",\"gu\",\"kn\",\"mr\",\"ta\",\"bg\",\"ca\",\"hr\",\"sr\",\"sk\"]},function(t,e,n){var r=n(3),i=n(0),o=n(18),s=\"collection:\";function a(t,e){return r.collectionId(t)||e}t.exports=function(t){t.params({id:{},url:{}}),t.overrideProperty(\"id\",{get:function(){var t=a(this.params.url,this.params.id);return s+t}}),t.overrideProperty(\"endpoint\",{get:function(){return o.timeline([\"collection\"])}}),t.around(\"queryParams\",function(t){return i.aug(t(),{collection_id:a(this.params.url,this.params.id)})}),t.before(\"initialize\",function(){if(!a(this.params.url,this.params.id))throw new Error(\"one of url or id is required\")})}},function(t,e,n){var r=n(26);t.exports=r.build([n(27),n(138)])},function(t,e,n){var r=n(3),i=n(0),o=n(18),s=\"event:\";function a(t,e){return r.eventId(t)||e}t.exports=function(t){t.params({id:{},url:{}}),t.overrideProperty(\"id\",{get:function(){var t=a(this.params.url,this.params.id);return s+t}}),t.overrideProperty(\"endpoint\",{get:function(){return o.timeline([\"event\"])}}),t.around(\"queryParams\",function(t){return i.aug(t(),{event_id:a(this.params.url,this.params.id)})}),t.before(\"initialize\",function(){if(!a(this.params.url,this.params.id))throw new Error(\"one of url or id is required\")})}},function(t,e,n){var r=n(26);t.exports=r.build([n(27),n(140)])},function(t,e,n){var r=n(3),i=n(0),o=n(18),s=\"likes:\";function a(t){return r.likesScreenName(t.url)||t.screenName}t.exports=function(t){t.params({screenName:{},userId:{},url:{}}),t.overrideProperty(\"id\",{get:function(){var t=a(this.params)||this.params.userId;return s+t}}),t.overrideProperty(\"endpoint\",{get:function(){return o.timeline([\"likes\"])}}),t.define(\"_getLikesQueryParam\",function(){var t=a(this.params);return t?{screen_name:t}:{user_id:this.params.userId}}),t.around(\"queryParams\",function(t){return i.aug(t(),this._getLikesQueryParam())}),t.before(\"initialize\",function(){if(!a(this.params)&&!this.params.userId)throw new Error(\"screen name or user id is required\")})}},function(t,e,n){var r=n(26);t.exports=r.build([n(27),n(142)])},function(t,e,n){var r=n(3),i=n(0),o=n(18),s=\"list:\";function a(t){var e=r.listScreenNameAndSlug(t.url)||t;return i.compact({screen_name:e.ownerScreenName,user_id:e.ownerUserId,list_slug:e.slug})}t.exports=function(t){t.params({id:{},ownerScreenName:{},ownerUserId:{},slug:{},url:{}}),t.overrideProperty(\"id\",{get:function(){var t,e,n;return this.params.id?s+this.params.id😦e😦t=a(this.params))&&t.list_slug.replace(/-/g,\"_\"),n=t&&(t.screen_name||t.user_id),s+(n+\"😊+e)}}),t.overrideProperty(\"endpoint\",{get:function(){return o.timeline([\"list\"])}}),t.define(\"_getListQueryParam\",function(){return this.params.id?{list_id:this.params.id}:a(this.params)}),t.around(\"queryParams\",function(t){return i.aug(t(),this._getListQueryParam())}),t.before(\"initialize\",function(){var t=a(this.params);if(i.isEmptyObject(t)&&!this.params.id)throw new Error(\"qualified slug or list id required\")})}},function(t,e,n){var r=n(26);t.exports=r.build([n(27),n(144)])},function(t,e,n){var r=n(3),i=n(4),o=n(0),s=n(18),a=\"profile:\";function u(t,e){return r.screenName(t)||e}t.exports=function(t){t.params({showReplies:{fallback:!1,transform:i.asBoolean},screenName:{},userId:{},url:{}}),t.overrideProperty(\"id\",{get:function(){var t=u(this.params.url,this.params.screenName);return a+(t||this.params.userId)}}),t.overrideProperty(\"endpoint\",{get:function(){return s.timeline([\"profile\"])}}),t.define(\"_getProfileQueryParam\",function(){var t=u(this.params.url,this.params.screenName),e=t?{screen_name:t}:{user_id:this.params.userId};return o.aug(e,{with_replies:this.params.showReplies?\"true\":\"false\"})}),t.around(\"queryParams\",function(t){return o.aug(t(),this._getProfileQueryParam())}),t.before(\"initialize\",function(){if(!u(this.params.url,this.params.screenName)&&!this.params.userId)throw new Error(\"screen name or user id is required\")})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return Promise.all([n.e(0),n.e(6)]).then(function(r){var o;try{o=n(88),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(10),i=n(3),o=n(0),s=n(13),a=n(14)(),u=n(65),c=\"blockquote.twitter-tweet, blockquote.twitter-video\",d😕\\btw-align-(left|right|center)\\b/;t.exports=function(t){return a(t,c).map(function(t){return u(function(t){var e😒(t),n=t.getElementsByTagName(\"A\"),a=n&&n[n.length-1],u=a&&i.status(a.href),c=t.getAttribute(\"data-conversation\"),l=\"none\"==c||\"hidden\"==c||r.present(t,\"tw-hide-thread\"),f=t.getAttribute(\"data-cards\"),h=\"none\"==f||\"hidden\"==f||r.present(t,\"tw-hide-media\"),p=t.getAttribute(\"data-align\")||t.getAttribute(\"align\"),m=t.getAttribute(\"data-link-color\"),v=t.getAttribute(\"data-theme\");return!p&&d.test(t.className)&&(p=RegExp.$1),o.aug(e,{tweetId:u,hideThread:l,hideCard:h,align😛,linkColor:m,theme:v,id:u})}(t),t.parentNode,t)})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return Promise.all([n.e(0),n.e(7)]).then(function(r){var o;try{o=n(89),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(10),i=n(0),o=n(13),s=n(14)(),a=n(66),u=n(4),c=\"a.twitter-share-button, a.twitter-mention-button, a.twitter-hashtag-button\",d=\"twitter-hashtag-button\",l=\"twitter-mention-button\";t.exports=function(t){return s(t,c).map(function(t){return a(function(t){var e😮(t),n={screenName:t.getAttribute(\"data-button-screen-name\"),text:t.getAttribute(\"data-text\"),type:t.getAttribute(\"data-type\"),size:t.getAttribute(\"data-size\"),url:t.getAttribute(\"data-url\"),hashtags:t.getAttribute(\"data-hashtags\"),via:t.getAttribute(\"data-via\"),buttonHashtag:t.getAttribute(\"data-button-hashtag\")};return i.forIn(n,function(t,n){var r=e[t];e[t]=u.hasValue(r)?r:n}),e.screenName=e.screenName||e.screen_name,e.buttonHashtag=e.buttonHashtag||e.button_hashtag||e.hashtag,r.present(t,d)&&(e.type=\"hashtag\"),r.present(t,l)&&(e.type=\"mention\"),e}(t),t.parentNode,t)})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return n.e(3).then(function(r){var o;try{o=n(90),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(0);t.exports=r.aug({},n(151),n(152),n(153),n(154),n(155),n(156),n(157))},function(t,e,n){var r=n(56),i=n(16)([\"userId\"],{},r);t.exports={createDMButton:i}},function(t,e,n){var r=n(59),i=n(16)([\"screenName\"],{},r);t.exports={createFollowButton:i}},function(t,e,n){var r=n(61),i=n(16)([\"momentId\"],{},r);t.exports={createMoment:i}},function(t,e,n){var r=n(62),i=n(16)([\"username\"],{},r);t.exports={createPeriscopeOnAirButton:i}},function(t,e,n){var r=n(😎,i=n(12),o=n(3),s=n(0),a=n(4),u=n(63),c=n(64),d=n(16)([],{},c),l=n(6),f=\"Embedded grids have been deprecated. Please use twttr.widgets.createTimeline instead. More info: https://twittercommunity.com/t/update-on-the-embedded-grid-display-type/119564.\",h={createTimeline😛,createGridFromCollection:function(t){var e😒.toRealArray(arguments).slice(1),n={sourceType:\"collection\",id:t};return e.unshift(n),i.publicLog(f),p.apply(this,e)}};function p(t){var e,n😒.toRealArray(arguments).slice(1);return a.isString(t)||a.isNumber(t)?l.reject(\"Embedded timelines with widget settings have been deprecated. See https://twittercommunity.com/t/deprecating-widget-settings/102295.\")😒.isObject(t)?(t=t||{},n.forEach(function(t){s.isType(\"object\",t)&&function(t){t.ariaLive=t.ariaPolite}(e=t)}),e||(e={},n.push(e)),t.lang=e.lang,t.tweetLimit=e.tweetLimit,t.showReplies=e.showReplies,e.dataSource=u(t),d.apply(this,n)):l.reject(\"data source must be an object.\")}o.isTwitterURL(r.href)&&(h.createTimelinePreview=function(t,e,n){var r={previewParams:t,useLegacyDefaults:!0,isPreviewTimeline:!0};return r.dataSource=u(r),d(e,r,n)}),t.exports=h},function(t,e,n){var r,i=n(0),o=n(65),s=n(16),a😦r😒([\"tweetId\"],{},o),function(){return i.toRealArray(arguments).slice(1).forEach(function(t){i.isType(\"object\",t)&&(t.hideCard=\"none\"==t.cards||\"hidden\"==t.cards,t.hideThread=\"none\"==t.conversation||\"hidden\"==t.conversation)}),r.apply(this,arguments)});t.exports={createTweet:a,createTweetEmbed:a,createVideo:a}},function(t,e,n){var r=n(0),i=n(66),o=n(16),s😮([\"url\"],{type:\"share\"},i),a😮([\"buttonHashtag\"],{type:\"hashtag\"},i),u😮([\"screenName\"],{type:\"mention\"},i);function c(t){return function(){return r.toRealArray(arguments).slice(1).forEach(function(t){r.isType(\"object\",t)&&(t.screenName=t.screenName||t.screen_name,t.buttonHashtag=t.buttonHashtag||t.button_hashtag||t.hashtag)}),t.apply(this,arguments)}}t.exports={createShareButton:c(s),createHashtagButton:c(a),createMentionButton:c(u)}},function(t,e,n){var r,i,o,s=n(5),a=n(1),u😮,c😦],d😒.createElement(\"a\");function l(){var t,e;for(u=1,t😮,e=c.length;t<e;t++)c[t]()}/^loade|c/.test(s.readyState)&&(u=1),s.addEventListener&&s.addEventListener(\"DOMContentLoaded\",i=function(){s.removeEventListener(\"DOMContentLoaded\",i,!1),l()},!1),d.doScroll&&s.attachEvent(\"onreadystatechange\",r=function(){/^c/.test(s.readyState)&&(s.detachEvent(\"onreadystatechange\",r),l())}),o😛.doScroll?function(t){a.self!=a.top?u?t():c.push(t):function(){try{d.doScroll(\"left\")}catch(e){return setTimeout(function(){o(t)},50)}t()}()}:function(t){u?t():c.push(t)},t.exports😮},function(t,e,n){var r=n(41),i=n(9);t.exports=function(){i.set(\"buildVersion\",r.version)}},function(t,e,n){n(161),n(83),n(164)},function(t,e,n){var r=n(162),i=n(28),o=n(67),s=new r,a=function(t){t.widgets&&1===t.widgets.length&&(s.start(),i.emitter.unbind(i.ALL_WIDGETS_RENDER_START,a))},u=function(t){var e;t.widgets&&1===t.widgets.length&&(e=t.widgets[0],s.end(),e.dataset&&e.dataset.tweetId&&o({duration😒.duration(),namespace:{element:\"tweet\",action:\"render\"},widgetIds😦e.dataset.tweetId]})),i.emitter.unbind(i.ALL_WIDGETS_RENDER_END,u)};i.emitter.bind(i.ALL_WIDGETS_RENDER_START,a),i.emitter.bind(i.ALL_WIDGETS_RENDER_END,u)},function(t,e,n){var r=n(163);function i(){}i.prototype.start=function(){this._startTime=r()},i.prototype.end=function(){this._duration=r()-this._startTime},i.prototype.duration=function(){return this._duration},t.exports=i},function(t,e,n){var r=n(1);t.exports=function(){return r.performance&&r.performance.now?r.performance.now():Date.now()}},function(t,e,n){var r=n(28),i=n(67),o=n(165),s=n(3),a=n(1),u=n(0),c=n(20),d=n(58);function l(t){return t.performance.getEntriesByType(\"resource\").filter(function(t){return s.isTwimgURL(t.name)||s.isTwitterURL(t.name)}).reduce(function(t,e){return t[e.name]=e.duration,t},{})}r.emitter.bind(r.ALL_WIDGETS_AND_IMAGES_LOADED,function(t){var e,n,r😦];c.hasPerformanceInformation()&&(e=l(a),d.isSupported()||(r=function(t){return t.reduce(function(t,e){return u.aug(t,l(e.contentDocument.defaultView))},{})}(t)),n=u.aug({},e,r),Object.keys(o).forEach(function(t){!function(t,e,n){var r=Object.keys(t).reduce(function(e,r){return n(r)?e+t[r]:e},0);i({duration:r,namespace:{element:e,action:\"resource\"}})}(n,t,o[t])}))})},function(t,e,n){var r=n(3),i={all:function(){return!0},image:function(t){return r.isTwimgURL(t)},settings:function(t){return r.isSettingsURL(t)},widget_iframe:function(t){return r.isWidgetIframeURL(t)}};t.exports=i}])));",
            "</script>",
            "<p>Got tired of the <code style=\"white-space: pre-wrap;\">useState</code>/<code style=\"white-space: pre-wrap;\">useEffect</code> dance when loading data with hooks. Built a new hook called <code style=\"white-space: pre-wrap;\">useData</code>. That’s a neat feature of hooks; you can make new ones.</p>",
            "<div class=\"sourceCode\" id=\"cb250\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb250-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span> <span class=\"at\" style=\"color: #7d9029;\">useData</span>(loadData) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb250-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> [data<span class=\"op\" style=\"color: #666666;\">,</span> setData] <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">useState</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">null</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb250-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb250-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">useEffect</span>(() <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb250-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"at\" style=\"color: #7d9029;\">loadData</span>(setData)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb250-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">},</span> [<span class=\"op\" style=\"color: #666666;\">!</span>data])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb250-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb250-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> data<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb250-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>Takes a loadData function, sets up <code style=\"white-space: pre-wrap;\">useState</code> for the data, uses an effect to load it, gives you <code style=\"white-space: pre-wrap;\">setData</code> so you can return the value, and returns the final value to your component.</p>",
            "<p>You use it like this 👇</p>",
            "<div class=\"sourceCode\" id=\"cb251\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb251-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span> <span class=\"at\" style=\"color: #7d9029;\">App</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb251-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> data <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">useData</span>(setData <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb251-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    d3</a>",
            "<a class=\"sourceLine\" id=\"cb251-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">tsv</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;/data.tsv&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> (<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb251-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">stuffer</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">stuffer</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb251-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">percentage</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"at\" style=\"color: #7d9029;\">Number</span>(<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">percentage</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb251-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">}</span>))</a>",
            "<a class=\"sourceLine\" id=\"cb251-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">then</span>(setData)</a>",
            "<a class=\"sourceLine\" id=\"cb251-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  )<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>Much cleaner I think 👌</p>",
            "<p>Might be cleaner to take a promise and handle <code style=\"white-space: pre-wrap;\">setData</code> internally. Hmm … 🤔</p>",
            "<p>Thinking I might open source this, but it needs a few more iterations.</p>"
          ]
        },
        {
          "lectureTitle": "When Americans buy Christmas presents - a curved line chart",
          "lectureLines": [
            "<h1 id=\"challenge-7\">Challenge</h1>",
            "<p>My girlfriend likes to buy her presents early, I wait until the last minute. What do other people do? Create a way to visualize the last few weeks of the year and rank them by popularity.</p>",
            "<p><a href=\"https://reactviz.holiday/datasets/statistic_id246669_period-during-which-us-consumers-will-start-holiday-shopping-2018.xlsx\">Dataset</a></p>",
            "<h1 id=\"my-solution-7\">My Solution</h1>",
            "<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/VzAAGCudLe8\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen>",
            "</iframe>",
            "<iframe src=\"https://codesandbox.io/embed/oq730593n9?fontsize=14\" style=\"width:100%; height:500px; border😮; border-radius: 4px; overflow:hidden;\" sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\">",
            "</iframe>",
            "<p>Well that was fun. What do you when you have a sparse dataset? A dataset with so few data points positioned so weirdly that it’s almost certain to hide important trends?</p>",
            "<p>You try to fix it.</p>",
            "<p>With science! Math! Code!</p>",
            "<p>Or … well … you can try. We tried a few things until we were forced to admit defeat in the face of mathematics beyond our station. Or at least beyond mine.</p>",
            "<h2 id=\"our-dataset-and-whats-wrong-with-it\">Our dataset and what’s wrong with it</h2>",
            "<p>We’re visualizing results of a poll asking people <em>When do you start christmas shopping?</em>. The poll had over 4000 responses. We get just the result.</p>",
            "<pre><code style=\"white-space: pre-wrap;\">Before October end  39",
            "November before Thanksgiving    21",
            "November after Thanksgiving 27",
            "December    11",
            "Janaury 2",
            "February    0</code></pre>",
            "<p>39% start shopping before October ends, 21% in November before thanksgiving, 27% right after thanksgiving, and so on.</p>",
            "<p>You can imagine these are long timespans. Ranging from basically a whole year to just a week in length. That’s a problem for us because it makes the datapoints hard to compare.</p>",
            "<p>Of course Before October end is overrepresented: It’s got almost four times as long to accumulate its result as the rest of the time periods combined.</p>",
            "<h2 id=\"a-simple-presentation\">A simple presentation</h2>",
            "<p>We start exploring with a line chart. Borrowing a lot of code from the <a href=\"https://reactviz.holiday/money-spent/\">Money spent on Christmas</a> challenge.</p>",
            "<p><img src=\"https://github.com/Swizec/datavizAdvent/raw/master/src/content/when-to-buy-gifts/plainchart.png\"></p>",
            "<p>That’s our data plotted as a curved line. Circles represent the actual datapoints we’ve got. Curves are a a good first approach to show that our data might not be all that exact.</p>",
            "<p>We borrow axis implementation from <a href=\"https://reactviz.holiday/money-spent/\">Money spent on Christmas</a> using my <a href=\"https://d3blackbox.com\">d3blackbox</a> library.</p>",
            "<div class=\"sourceCode\" id=\"cb253\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb253-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> BottomAxis <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">d3blackbox</span>((anchor<span class=\"op\" style=\"color: #666666;\">,</span> props) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb253-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> axis <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">axisBottom</span>().<span class=\"at\" style=\"color: #7d9029;\">scale</span>(<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">scale</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb253-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">select</span>(<span class=\"va\" style=\"color: #19177c;\">anchor</span>.<span class=\"at\" style=\"color: #7d9029;\">current</span>).<span class=\"at\" style=\"color: #7d9029;\">call</span>(axis)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb253-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb253-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb253-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> LeftAxis <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">d3blackbox</span>((anchor<span class=\"op\" style=\"color: #666666;\">,</span> props) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb253-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> axis <span class=\"op\" style=\"color: #666666;\">=</span> d3</a>",
            "<a class=\"sourceLine\" id=\"cb253-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">axisLeft</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb253-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">scale</span>(<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">scale</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb253-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">tickFormat</span>(d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"vs\" style=\"color: #4070a0;\">`</span><span class=\"sc\" style=\"color: #4070a0;\">${</span>d<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">%`</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb253-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">select</span>(<span class=\"va\" style=\"color: #19177c;\">anchor</span>.<span class=\"at\" style=\"color: #7d9029;\">current</span>).<span class=\"at\" style=\"color: #7d9029;\">call</span>(axis)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb253-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>Each axis implementation renders an anchor element and injects a pure D3 rendered axis on every update. No need to fiddle with building our own.</p>",
            "<h3 id=\"datapoint\">&lt;Datapoint&gt;</h3>",
            "<p>A <code style=\"white-space: pre-wrap;\">&lt;Datapoints&gt;</code> component keeps our main code cleaner. Renders those tiny little circles.</p>",
            "<div class=\"sourceCode\" id=\"cb254\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb254-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> Circle <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">styled</span>.<span class=\"at\" style=\"color: #7d9029;\">circle</span><span class=\"vs\" style=\"color: #4070a0;\">`</span></a>",
            "<a class=\"sourceLine\" id=\"cb254-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"vs\" style=\"color: #4070a0;\">  fill: none;</span></a>",
            "<a class=\"sourceLine\" id=\"cb254-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"vs\" style=\"color: #4070a0;\">  stroke: black;</span></a>",
            "<a class=\"sourceLine\" id=\"cb254-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"vs\" style=\"color: #4070a0;\">  r: 3px;</span></a>",
            "<a class=\"sourceLine\" id=\"cb254-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"vs\" style=\"color: #4070a0;\">`</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb254-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb254-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> Datapoints <span class=\"op\" style=\"color: #666666;\">=</span> (<span class=\"op\" style=\"color: #666666;\">{</span> data<span class=\"op\" style=\"color: #666666;\">,</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y <span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb254-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">&lt;</span>g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb254-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"va\" style=\"color: #19177c;\">data</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb254-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>Circle cx<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"at\" style=\"color: #7d9029;\">x</span>(<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">descriptor</span>)<span class=\"op\" style=\"color: #666666;\">}</span> cy<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"at\" style=\"color: #7d9029;\">y</span>(<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">percentage</span>)<span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb254-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>title<span class=\"op\" style=\"color: #666666;\">&gt;{</span><span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">descriptor</span><span class=\"op\" style=\"color: #666666;\">}</span>&lt;/title<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb254-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      &lt;/Circle<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb254-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    ))<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb254-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  &lt;/g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb254-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>Takes data, an <code style=\"white-space: pre-wrap;\">x</code> scale and a <code style=\"white-space: pre-wrap;\">y</code> scale. Walks through data in a loop, renders circles with a title. Makes it so you can mouse over a circle and if you do it just right a browser native tooltip appears.</p>",
            "<h3 id=\"linechart\">&lt;LineChart&gt;</h3>",
            "<p>The LineChart component brings all of this together and uses a D3 line generator for a single path definition.</p>",
            "<div class=\"sourceCode\" id=\"cb255\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb255-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> Line <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">styled</span>.<span class=\"at\" style=\"color: #7d9029;\">path</span><span class=\"vs\" style=\"color: #4070a0;\">`</span></a>",
            "<a class=\"sourceLine\" id=\"cb255-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"vs\" style=\"color: #4070a0;\">  fill: none;</span></a>",
            "<a class=\"sourceLine\" id=\"cb255-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"vs\" style=\"color: #4070a0;\">  stroke: </span><span class=\"sc\" style=\"color: #4070a0;\">${</span><span class=\"at\" style=\"color: #7d9029;\">chroma</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;green&quot;</span>).<span class=\"at\" style=\"color: #7d9029;\">brighten</span>(<span class=\"fl\" style=\"color: #40a070;\">1.5</span>)<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb255-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"vs\" style=\"color: #4070a0;\">  stroke-width: 2px;</span></a>",
            "<a class=\"sourceLine\" id=\"cb255-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"vs\" style=\"color: #4070a0;\">`</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb255-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb255-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> LineChart <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb255-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  height <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"dv\" style=\"color: #40a070;\">500</span></a>",
            "<a class=\"sourceLine\" id=\"cb255-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb255-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  x <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">scalePoint</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb255-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">domain</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"va\" style=\"color: #19177c;\">data</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">descriptor</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb255-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">range</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">600</span>])<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb255-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  y <span class=\"op\" style=\"color: #666666;\">=</span> d3</a>",
            "<a class=\"sourceLine\" id=\"cb255-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">scaleLinear</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb255-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">domain</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">max</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">data</span><span class=\"op\" style=\"color: #666666;\">,</span> d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">percentage</span>)])</a>",
            "<a class=\"sourceLine\" id=\"cb255-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">range</span>([<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">height</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">0</span>])</a>",
            "<a class=\"sourceLine\" id=\"cb255-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb255-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  line <span class=\"op\" style=\"color: #666666;\">=</span> d3</a>",
            "<a class=\"sourceLine\" id=\"cb255-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">line</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb255-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">x</span>(d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">x</span>(<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">percentage</span>))</a>",
            "<a class=\"sourceLine\" id=\"cb255-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">y</span>(d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">y</span>(<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">descriptor</span>))</a>",
            "<a class=\"sourceLine\" id=\"cb255-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">curve</span>(<span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"va\" style=\"color: #19177c;\">curveCatmullRom</span>.<span class=\"at\" style=\"color: #7d9029;\">alpha</span>(<span class=\"fl\" style=\"color: #40a070;\">0.5</span>))</a>",
            "<a class=\"sourceLine\" id=\"cb255-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb255-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb255-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> data<span class=\"op\" style=\"color: #666666;\">,</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb255-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb255-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb255-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>g transform<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"vs\" style=\"color: #4070a0;\">`translate(</span><span class=\"sc\" style=\"color: #4070a0;\">${</span>x<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">, </span><span class=\"sc\" style=\"color: #4070a0;\">${</span>y<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">)`</span><span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb255-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>Line d<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">line</span>(data)<span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb255-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>Datapoints data<span class=\"op\" style=\"color: #666666;\">={</span>data<span class=\"op\" style=\"color: #666666;\">}</span> x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">x</span><span class=\"op\" style=\"color: #666666;\">}</span> y<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">y</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb255-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>BottomAxis scale<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">x</span><span class=\"op\" style=\"color: #666666;\">}</span> x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">}</span> y<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">height</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb255-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>LeftAxis scale<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">y</span><span class=\"op\" style=\"color: #666666;\">}</span> x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">}</span> y<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb255-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      &lt;/g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb255-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    )</a>",
            "<a class=\"sourceLine\" id=\"cb255-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb255-36\" title=\"36\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>Sets up a horizontal <code style=\"white-space: pre-wrap;\">x</code> point scale, a vertical <code style=\"white-space: pre-wrap;\">y</code> scale with an inverted range, a <code style=\"white-space: pre-wrap;\">line</code> generator with a curve, then renders it all.</p>",
            "<p>Nothing too crazy going on here. You’ve seen it all before. If not, the <a href=\"https://reactviz.holiday/money-spent/\">Money spent on Christmas</a> article focuses more on the line chart part.</p>",
            "<h2 id=\"is-it-realistic\">Is it realistic?</h2>",
            "<p>So how realistic does this chart look to you? Does it represent the true experience?</p>",
            "<p><img src=\"https://github.com/Swizec/datavizAdvent/raw/master/src/content/when-to-buy-gifts/plainchart.png\"></p>",
            "<p>Yes according to the data <em>most</em> people start shopping before the end of October. And it’s true, very many start some time in November, with a moderate spike around Black Friday and Cyber Monday.</p>",
            "<p>Does the variation in time period hide important truths?</p>",
            "<p>🤔</p>",
            "<h2 id=\"making-an-approximation\">Making an approximation</h2>",
            "<p>All of the above is true. And yet it hides an important fact.</p>",
            "<p>39% before October end is a huge percentage. But it might mean August, last day of October, or even March. Who knows? The data sure don’t tell us.</p>",
            "<p>And that week after thanksgiving? It’s got more starting shoppers than all of the rest of November combined. Even though it’s just 1 week versus 3 weeks.</p>",
            "<p>We can tease out these truths 👉 normalize our data by week.</p>",
            "<p><img src=\"https://github.com/Swizec/datavizAdvent/raw/master/src/content/when-to-buy-gifts/approximation.png\"></p>",
            "<p>Assume each datapoint spreads uniformly over its entire period, and a different picture comes out.</p>",
            "<p>October doesn’t look so hot anymore, November looks better, January is chilly, but then that Black Friday and Cyber Monday. Hot damn. Now <em>that</em> is a spike in shopping activity!</p>",
            "<p>See how much stronger that spike looks when you normalize data by time period? Wow.</p>",
            "<h3 id=\"you-can-do-it-with-a-little-elbow-grease\">You can do it with a little elbow grease</h3>",
            "<p>We have to construct a fake dataset with extra points in between the original data. Because our dataset is small, we could do this manually with just a bit of maths.</p>",
            "<p>Goes in <code style=\"white-space: pre-wrap;\">getDerivedStateFromProps</code></p>",
            "<div class=\"sourceCode\" id=\"cb256\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb256-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">static</span> <span class=\"at\" style=\"color: #7d9029;\">getDerivedStateFromProps</span>(props<span class=\"op\" style=\"color: #666666;\">,</span> state) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb256-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Basic goal:</span></a>",
            "<a class=\"sourceLine\" id=\"cb256-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Split &quot;Before October end&quot; into 4 weekly datapoints</span></a>",
            "<a class=\"sourceLine\" id=\"cb256-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// split &quot;November before Thanksgiving&quot; into 3 weekly datapoints</span></a>",
            "<a class=\"sourceLine\" id=\"cb256-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// split &quot;November after Thanksgiving&quot; into 1 weekly datapoint</span></a>",
            "<a class=\"sourceLine\" id=\"cb256-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// split &quot;December&quot; into 4 weekly datapoints</span></a>",
            "<a class=\"sourceLine\" id=\"cb256-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// split &quot;January&quot; into 4 weekly datapoints</span></a>",
            "<a class=\"sourceLine\" id=\"cb256-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> data <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> props<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb256-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> xDescriptive <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> state<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb256-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb256-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> approximateData <span class=\"op\" style=\"color: #666666;\">=</span> [</a>",
            "<a class=\"sourceLine\" id=\"cb256-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      ...<span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">range</span>(<span class=\"dv\" style=\"color: #40a070;\">4</span>).<span class=\"at\" style=\"color: #7d9029;\">map</span>(_ <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> data[<span class=\"dv\" style=\"color: #40a070;\">1</span>].<span class=\"at\" style=\"color: #7d9029;\">percentage</span> / <span class=\"dv\" style=\"color: #40a070;\">4</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb256-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      ...<span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">range</span>(<span class=\"dv\" style=\"color: #40a070;\">3</span>).<span class=\"at\" style=\"color: #7d9029;\">map</span>(_ <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> data[<span class=\"dv\" style=\"color: #40a070;\">1</span>].<span class=\"at\" style=\"color: #7d9029;\">percentage</span> / <span class=\"dv\" style=\"color: #40a070;\">3</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb256-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      ...<span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">range</span>(<span class=\"dv\" style=\"color: #40a070;\">1</span>).<span class=\"at\" style=\"color: #7d9029;\">map</span>(_ <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> data[<span class=\"dv\" style=\"color: #40a070;\">2</span>].<span class=\"at\" style=\"color: #7d9029;\">percentage</span> / <span class=\"dv\" style=\"color: #40a070;\">1</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb256-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      ...<span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">range</span>(<span class=\"dv\" style=\"color: #40a070;\">4</span>).<span class=\"at\" style=\"color: #7d9029;\">map</span>(_ <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> data[<span class=\"dv\" style=\"color: #40a070;\">3</span>].<span class=\"at\" style=\"color: #7d9029;\">percentage</span> / <span class=\"dv\" style=\"color: #40a070;\">4</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb256-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      ...<span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">range</span>(<span class=\"dv\" style=\"color: #40a070;\">4</span>).<span class=\"at\" style=\"color: #7d9029;\">map</span>(_ <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> data[<span class=\"dv\" style=\"color: #40a070;\">4</span>].<span class=\"at\" style=\"color: #7d9029;\">percentage</span> / <span class=\"dv\" style=\"color: #40a070;\">4</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb256-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    ]<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb256-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb256-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">x</span>.<span class=\"at\" style=\"color: #7d9029;\">domain</span>(<span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">range</span>(<span class=\"va\" style=\"color: #19177c;\">approximateData</span>.<span class=\"at\" style=\"color: #7d9029;\">length</span>))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb256-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Manually define range to match number of fake datapoints in approximateData</span></a>",
            "<a class=\"sourceLine\" id=\"cb256-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">xDescriptive</span>.<span class=\"at\" style=\"color: #7d9029;\">range</span>([</a>",
            "<a class=\"sourceLine\" id=\"cb256-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"at\" style=\"color: #7d9029;\">x</span>(<span class=\"dv\" style=\"color: #40a070;\">0</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb256-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"at\" style=\"color: #7d9029;\">x</span>(<span class=\"dv\" style=\"color: #40a070;\">4</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb256-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"at\" style=\"color: #7d9029;\">x</span>(<span class=\"dv\" style=\"color: #40a070;\">4</span> <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"dv\" style=\"color: #40a070;\">3</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb256-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"at\" style=\"color: #7d9029;\">x</span>(<span class=\"dv\" style=\"color: #40a070;\">4</span> <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"dv\" style=\"color: #40a070;\">3</span> <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"dv\" style=\"color: #40a070;\">1</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb256-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"at\" style=\"color: #7d9029;\">x</span>(<span class=\"dv\" style=\"color: #40a070;\">4</span> <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"dv\" style=\"color: #40a070;\">3</span> <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"dv\" style=\"color: #40a070;\">1</span> <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"dv\" style=\"color: #40a070;\">4</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb256-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"at\" style=\"color: #7d9029;\">x</span>(<span class=\"dv\" style=\"color: #40a070;\">4</span> <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"dv\" style=\"color: #40a070;\">3</span> <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"dv\" style=\"color: #40a070;\">1</span> <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"dv\" style=\"color: #40a070;\">4</span> <span class=\"op\" style=\"color: #666666;\">+</span> <span class=\"dv\" style=\"color: #40a070;\">4</span> <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"dv\" style=\"color: #40a070;\">1</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb256-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    ])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb256-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb256-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb256-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      approximateData<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb256-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      x<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb256-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      xDescriptive</a>",
            "<a class=\"sourceLine\" id=\"cb256-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb256-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>We take <code style=\"white-space: pre-wrap;\">props</code> and <code style=\"white-space: pre-wrap;\">state</code>, then split every datapoint into its appropriate number of weeks. Our approach is roughly based on the idea of a running average. You could make a more generalized algorithm for this, but for a small dataset it’s easier to just do it like this.</p>",
            "<p>So the whole of October, that first datapoint, becomes 4 entries with a fourth of the value each. November turns into 3 with thirds. And so on.</p>",
            "<p>Since we want to keep the original labeled axis and datapoints, we have to use two different horizontal scales. One for the approximate dataset, one for the original.</p>",
            "<p>We put them in state so we can set them up in <code style=\"white-space: pre-wrap;\">getDerivedStateFromProps</code>.</p>",
            "<div class=\"sourceCode\" id=\"cb257\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb257-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">state <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb257-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">scalePoint</span>().<span class=\"at\" style=\"color: #7d9029;\">range</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">600</span>])<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb257-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"dt\" style=\"color: #902000;\">xDescriptive</span><span class=\"op\" style=\"color: #666666;\">:</span> d3</a>",
            "<a class=\"sourceLine\" id=\"cb257-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">scaleOrdinal</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb257-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">domain</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"va\" style=\"color: #19177c;\">data</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">descriptor</span>))<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb257-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">};</span></a></code></pre></div>",
            "<p><code style=\"white-space: pre-wrap;\">x</code> is a point scale with a range. Its domain comes from our approximate dataset. One for each entry based on the index.</p>",
            "<p><code style=\"white-space: pre-wrap;\">xDescriptive</code> works much like our old horizontal point scale. But because we have to spread it over more datapoints that it never receives, it needs to be an ordinal scale.</p>",
            "<p>Ordinal scales map inputs directly into outputs. Like a dictionary. Our domain becomes every descriptor from the dataset, the range we define manually to line up with output from the <code style=\"white-space: pre-wrap;\">x</code> scale.</p>",
            "<p>Rendering is still the same, we just gotta be careful which scale we pass into which element.</p>",
            "<div class=\"sourceCode\" id=\"cb258\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb258-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb258-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> data<span class=\"op\" style=\"color: #666666;\">,</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb258-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">{</span> approximateData <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb258-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb258-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb258-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>g transform<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"vs\" style=\"color: #4070a0;\">`translate(</span><span class=\"sc\" style=\"color: #4070a0;\">${</span>x<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">, </span><span class=\"sc\" style=\"color: #4070a0;\">${</span>y<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">)`</span><span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb258-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>Line d<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">line</span>(approximateData)<span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb258-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>Datapoints data<span class=\"op\" style=\"color: #666666;\">={</span>data<span class=\"op\" style=\"color: #666666;\">}</span> x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">xDescriptive</span><span class=\"op\" style=\"color: #666666;\">}</span> y<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">y</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb258-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>BottomAxis scale<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">xDescriptive</span><span class=\"op\" style=\"color: #666666;\">}</span> x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">}</span> y<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">height</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb258-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>LeftAxis scale<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">y</span><span class=\"op\" style=\"color: #666666;\">}</span> x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">}</span> y<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb258-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      &lt;/g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb258-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb258-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p><code style=\"white-space: pre-wrap;\">&lt;Line&gt;</code> gets the approximate data set, <code style=\"white-space: pre-wrap;\">&lt;Datapoints&gt;</code> gets the original dataset with the descriptive horizontal scale. The <code style=\"white-space: pre-wrap;\">&lt;BottomAxis&gt;</code> gets the descriptive scale, and the <code style=\"white-space: pre-wrap;\">&lt;LeftAxis&gt;</code> stays the same.</p>",
            "<p>End result is a chart that tells a more accurate story overlayed with the original data.</p>",
            "<p><img src=\"https://github.com/Swizec/datavizAdvent/raw/master/src/content/when-to-buy-gifts/approximation.png\"></p>",
            "<h2 id=\"attempting-a-more-sophisticated-solution\">Attempting a more sophisticated solution</h2>",
            "<p>One thing still bothers me though. I bet you those weekly distributions aren’t uniform.</p>",
            "<p>You’re less likely to start Christmas shopping in the first week of October than you are in the last week of October. Just like you’re less likely to start at the beginning of November than towards the end.</p>",
            "<p>December should be the inverse. You’re more likely to start in the first week than you are the day before Christmas.</p>",
            "<p>Know what I mean?</p>",
            "<p>It just doesn’t seem to fit real world experience that those weeks would have even probabilities.</p>",
            "<p>And that’s our clue for next steps: You can fit a probability distribution over your weeks, then generate random datapoints that fit the distribition to make a nice smooth curve.</p>",
            "<p>A sort of <a href=\"https://en.wikipedia.org/wiki/Monte_Carlo_method\">Monte Carlo</a> approach. Commonly used for integration, fitting complex lines to probabilities, and stuff like that.</p>",
            "<blockquote>",
            "<p>Monte Carlo methods (or Monte Carlo experiments) are a broad class of computational algorithms that rely on repeated random sampling to obtain numerical results. Their essential idea is using randomness to solve problems that might be deterministic in principle. They are often used in physical and mathematical problems and are most useful when it is difficult or impossible to use other approaches.</p>",
            "</blockquote>",
            "<p>Is it difficult or impossible to use other approaches? I’m not sure.</p>",
            "<p>There’s different ways to fit a polygon to a set of known numbers. Our curve approach did that actually.</p>",
            "<p>Not sure we can do more than that with normal mathematics.</p>",
            "<p>Unfortunately we were unable to implement a monte carlo method to approximate more datapoints. We tried. It didn’t produce good results.</p>",
            "<p>The line kept being random, my math wasn’t good enough to fit those random numbers to a probability distribution and it was just a mess. But a promising mess.</p>",
            "<p>Basic idea goes something like this:</p>",
            "<ol type=\"1\">",
            "<li>Define a probability distribution (less likely week 1, more likely week 4)</li>",
            "<li>Pick random numbers</li>",
            "<li>Keep going until the sum of your points adds up to the known value</li>",
            "<li>Voila, in theory</li>",
            "</ol>",
            "<p>You can watch me flounder around with this before I finally gave up in the stream above.</p>",
            "<p>See you tomorrow ✌️</p>"
          ]
        },
        {
          "lectureTitle": "When people buy candy - animated barchart with easing",
          "lectureLines": [
            "<h1 id=\"challenge-8\">Challenge</h1>",
            "<p>Candy is delicious. When do people buy it most? Visualize the data in a fun way</p>",
            "<p><a href=\"https://reactviz.holiday/datasets/statistic_id947149_retail-sales-of-candy-in-the-united-states-in-2018-by-week.xlsx\">Dataset</a></p>",
            "<h1 id=\"my-solution-8\">My Solution</h1>",
            "<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/Dn_kHCFTUP4\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen>",
            "</iframe>",
            "<iframe src=\"https://codesandbox.io/embed/ov0lzxmplz?fontsize=14\" style=\"width:100%; height:500px; border😮; border-radius: 4px; overflow:hidden;\" sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\">",
            "</iframe>",
            "<p>Did you know Americans buy <code style=\"white-space: pre-wrap;\">Eight hundred million dollars</code> worth of candy on Easter? That’s crazy. Absolutely bonkers. Even the normal baseline of <code style=\"white-space: pre-wrap;\">$300,000,000</code>/week throughout the year is just staggering. 🍭</p>",
            "<p>What better way to visualize it than candy falling from the sky into the shape of a bar chart?</p>",
            "<p><img src=\"https://i.imgur.com/z9bNPZL.gif\"></p>",
            "<p>The basic idea behind that visualization goes like this:</p>",
            "<ol type=\"1\">",
            "<li>Load and parse data</li>",
            "<li>Scale for horizontal position</li>",
            "<li>Scale for vertical height</li>",
            "<li>Render each bar in a loop</li>",
            "<li>Divide height by <code style=\"white-space: pre-wrap;\">12</code></li>",
            "<li>Render that many emojis</li>",
            "<li>Create a custom tween transition to independently animate horizontal and vertical positionioning in a declarative and visually pleasing way</li>",
            "</ol>",
            "<p>😛</p>",
            "<h2 id=\"the-basics\">The basics</h2>",
            "<p>Let’s start with the basics and get them out of the way. Bottom up in the Codesandbox above.</p>",
            "<div class=\"sourceCode\" id=\"cb259\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb259-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> FallingCandy <span class=\"op\" style=\"color: #666666;\">=</span> (<span class=\"op\" style=\"color: #666666;\">{</span> data<span class=\"op\" style=\"color: #666666;\">,</span> x <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> y <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> width <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"dv\" style=\"color: #40a070;\">600</span><span class=\"op\" style=\"color: #666666;\">,</span> height <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"dv\" style=\"color: #40a070;\">600</span> <span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb259-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> xScale <span class=\"op\" style=\"color: #666666;\">=</span> d3</a>",
            "<a class=\"sourceLine\" id=\"cb259-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">scalePoint</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb259-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">domain</span>(<span class=\"va\" style=\"color: #19177c;\">data</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">week</span>))</a>",
            "<a class=\"sourceLine\" id=\"cb259-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">range</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> width])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb259-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> yScale <span class=\"op\" style=\"color: #666666;\">=</span> d3</a>",
            "<a class=\"sourceLine\" id=\"cb259-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">scaleLinear</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb259-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">domain</span>([<span class=\"dv\" style=\"color: #40a070;\">250</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">max</span>(data<span class=\"op\" style=\"color: #666666;\">,</span> d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">sales</span>)])</a>",
            "<a class=\"sourceLine\" id=\"cb259-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">range</span>([height<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">0</span>])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb259-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb259-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb259-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>g transform<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"vs\" style=\"color: #4070a0;\">`translate(</span><span class=\"sc\" style=\"color: #4070a0;\">${</span>x<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">, </span><span class=\"sc\" style=\"color: #4070a0;\">${</span>y<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">)`</span><span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb259-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"va\" style=\"color: #19177c;\">data</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb259-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>CandyJar</a>",
            "<a class=\"sourceLine\" id=\"cb259-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"at\" style=\"color: #7d9029;\">xScale</span>(<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">week</span>)<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb259-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          y<span class=\"op\" style=\"color: #666666;\">={</span>height<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb259-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          height<span class=\"op\" style=\"color: #666666;\">={</span>height <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"at\" style=\"color: #7d9029;\">yScale</span>(<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">sales</span>)<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb259-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          delay<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">week</span> <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"va\" style=\"color: #19177c;\">Math</span>.<span class=\"at\" style=\"color: #7d9029;\">random</span>() <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"dv\" style=\"color: #40a070;\">100</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb259-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          type<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">special</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb259-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">          key<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">week</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb259-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb259-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      ))<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb259-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>BottomAxis scale<span class=\"op\" style=\"color: #666666;\">={</span>xScale<span class=\"op\" style=\"color: #666666;\">}</span> x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">}</span> y<span class=\"op\" style=\"color: #666666;\">={</span>height<span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb259-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>LeftAxis scale<span class=\"op\" style=\"color: #666666;\">={</span>yScale<span class=\"op\" style=\"color: #666666;\">}</span> x<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">}</span> y<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb259-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    &lt;/g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb259-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb259-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">};</span></a></code></pre></div>",
            "<p>The <code style=\"white-space: pre-wrap;\">&lt;FallingCandy&gt;</code> component takes data, positioning, and sizing props. Creates two scales: A point scale for horizontal positioning of each column, a vertical scale for heights.</p>",
            "<p>Render a grouping element to position everything, walk through the data and render a <code style=\"white-space: pre-wrap;\">&lt;CandyJar&gt;</code> component for each entry. Candy jars need coordinates, a height, some delay for staggered animations, and a type.</p>",
            "<p>Type tells them which emoji to render. Makes it so we can have special harts on Valentine’s day, bunnies on Easter, jack-o-lanterns on Halloween, and Christmas trees on Christmas.</p>",
            "<p>I know this works because when my girlfriend saw it this morning she was like <em>“Whaaat why so much candy on Easter?”</em>. Didn’t even have to tell her what the emojis mean 💪</p>",
            "<p>We’ll talk about the animation staggering later. I’ll explain why it has to be random as well.</p>",
            "<h2 id=\"the-axes-1\">The axes</h2>",
            "<p>Using our standard approach for axes: use <a href=\"https://d3blackbox.com\">d3blackbox</a> to render an anchor element, then take over with D3 and use an axis generator.</p>",
            "<div class=\"sourceCode\" id=\"cb260\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb260-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> BottomAxis <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">d3blackbox</span>((anchor<span class=\"op\" style=\"color: #666666;\">,</span> props) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb260-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> scale <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">scale</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb260-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">scale</span>.<span class=\"at\" style=\"color: #7d9029;\">domain</span>(<span class=\"va\" style=\"color: #19177c;\">scale</span>.<span class=\"at\" style=\"color: #7d9029;\">domain</span>().<span class=\"at\" style=\"color: #7d9029;\">filter</span>((_<span class=\"op\" style=\"color: #666666;\">,</span> i) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> i <span class=\"op\" style=\"color: #666666;\">%</span> <span class=\"dv\" style=\"color: #40a070;\">5</span> <span class=\"op\" style=\"color: #666666;\">===</span> <span class=\"dv\" style=\"color: #40a070;\">0</span>))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb260-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb260-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> axis <span class=\"op\" style=\"color: #666666;\">=</span> d3</a>",
            "<a class=\"sourceLine\" id=\"cb260-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">axisBottom</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb260-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">scale</span>(<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">scale</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb260-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">tickFormat</span>(d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"vs\" style=\"color: #4070a0;\">`wk </span><span class=\"sc\" style=\"color: #4070a0;\">${</span>d<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\">`</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb260-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">select</span>(<span class=\"va\" style=\"color: #19177c;\">anchor</span>.<span class=\"at\" style=\"color: #7d9029;\">current</span>).<span class=\"at\" style=\"color: #7d9029;\">call</span>(axis)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb260-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb260-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb260-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> LeftAxis <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">d3blackbox</span>((anchor<span class=\"op\" style=\"color: #666666;\">,</span> props) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb260-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> axis <span class=\"op\" style=\"color: #666666;\">=</span> d3</a>",
            "<a class=\"sourceLine\" id=\"cb260-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">axisLeft</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb260-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">scale</span>(<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">scale</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb260-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">tickFormat</span>(d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"vs\" style=\"color: #4070a0;\">`$</span><span class=\"sc\" style=\"color: #4070a0;\">${</span>d<span class=\"sc\" style=\"color: #4070a0;\">}</span><span class=\"vs\" style=\"color: #4070a0;\"> million`</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb260-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">select</span>(<span class=\"va\" style=\"color: #19177c;\">anchor</span>.<span class=\"at\" style=\"color: #7d9029;\">current</span>).<span class=\"at\" style=\"color: #7d9029;\">call</span>(axis)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb260-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>We have to filter the scale’s domain for <code style=\"white-space: pre-wrap;\">&lt;BottomAxis&gt;</code> because point scales are ordinal. That means there’s no generalized way to interpolate values in between other values, so the axis renders everything.</p>",
            "<p>That looks terrible. Instead, we render every 5th tick.</p>",
            "<p>Both axes get a custom <code style=\"white-space: pre-wrap;\">tickFormat</code> so they’re easier to read.</p>",
            "<h2 id=\"the-candyjar\">The &lt;CandyJar&gt;</h2>",
            "<p>Candy jars are just columns of emojis. There’s not much logic here.</p>",
            "<div class=\"sourceCode\" id=\"cb261\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb261-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> CandyJar <span class=\"op\" style=\"color: #666666;\">=</span> (<span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y<span class=\"op\" style=\"color: #666666;\">,</span> height<span class=\"op\" style=\"color: #666666;\">,</span> delay<span class=\"op\" style=\"color: #666666;\">,</span> type <span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb261-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  d3</a>",
            "<a class=\"sourceLine\" id=\"cb261-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">range</span>(height / <span class=\"dv\" style=\"color: #40a070;\">12</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb261-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">map</span>(i <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb261-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>Candy</a>",
            "<a class=\"sourceLine\" id=\"cb261-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        x<span class=\"op\" style=\"color: #666666;\">={</span>x<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb261-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        y<span class=\"op\" style=\"color: #666666;\">={</span>y <span class=\"op\" style=\"color: #666666;\">-</span> i <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"dv\" style=\"color: #40a070;\">12</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb261-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        type<span class=\"op\" style=\"color: #666666;\">={</span>type<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb261-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        delay<span class=\"op\" style=\"color: #666666;\">={</span>delay <span class=\"op\" style=\"color: #666666;\">+</span> i <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"va\" style=\"color: #19177c;\">Math</span>.<span class=\"at\" style=\"color: #7d9029;\">random</span>() <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"dv\" style=\"color: #40a070;\">100</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb261-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        key<span class=\"op\" style=\"color: #666666;\">={</span>i<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb261-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb261-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    ))<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>Yes, we could have done this in the main <code style=\"white-space: pre-wrap;\">&lt;FallingCandy&gt;</code> component. Code feels cleaner this way.</p>",
            "<p>Create a counting array from zero to <code style=\"white-space: pre-wrap;\">height/12</code>, the number of emojis we need, walk through the array and render <code style=\"white-space: pre-wrap;\">&lt;Candy&gt;</code> components for each entry. At this point we add some more random delay. I’ll tell you why in a bit.</p>",
            "<h2 id=\"the-animated-candy-component\">The animated &lt;Candy&gt; component</h2>",
            "<p><img src=\"https://i.imgur.com/z9bNPZL.gif\"></p>",
            "<p>All that animation happens in the Candy component. Parent components are blissfully unaware and other than passing a <code style=\"white-space: pre-wrap;\">delay</code> prop never have to worry about the details of rendering and animation.</p>",
            "<p>That’s the beauty of declarative code. 👌</p>",
            "<p>Our plan is based on my <a href=\"https://swizec.com/blog/declarative-d3-transitions-react/swizec/8323\">Declarative D3 transitions with React 16.3+</a> approach:</p>",
            "<ol type=\"1\">",
            "<li>Move coordinates into state</li>",
            "<li>Render emoji from state</li>",
            "<li>Run transition on <code style=\"white-space: pre-wrap;\">componentDidMount</code></li>",
            "<li>Update state when transition ends</li>",
            "</ol>",
            "<p>We use component state as a sort of staging area for transitionable props. D3 helps us with what it does best - transitions - and React almost always knows what’s going on so it doesn’t get confused.</p>",
            "<p>Have had issues in the past with manipulating the DOM and React freaking out at me.</p>",
            "<div class=\"sourceCode\" id=\"cb262\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb262-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> Candy <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb262-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  state <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb262-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">Math</span>.<span class=\"at\" style=\"color: #7d9029;\">random</span>() <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"dv\" style=\"color: #40a070;\">600</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb262-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">Math</span>.<span class=\"at\" style=\"color: #7d9029;\">random</span>() <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"dv\" style=\"color: #40a070;\">-50</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb262-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb262-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  candyRef <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">createRef</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb262-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb262-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">componentDidMount</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb262-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> delay <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb262-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb262-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> node <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">select</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">candyRef</span>.<span class=\"at\" style=\"color: #7d9029;\">current</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb262-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb262-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    node</a>",
            "<a class=\"sourceLine\" id=\"cb262-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">transition</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb262-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">duration</span>(<span class=\"dv\" style=\"color: #40a070;\">1500</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb262-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">delay</span>(delay)</a>",
            "<a class=\"sourceLine\" id=\"cb262-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">ease</span>(<span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">easeLinear</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb262-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attrTween</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;y&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"at\" style=\"color: #7d9029;\">candyYTween</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">y</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">y</span>))</a>",
            "<a class=\"sourceLine\" id=\"cb262-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;x&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">x</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb262-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">on</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;end&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">setState</span>(<span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">y</span> <span class=\"op\" style=\"color: #666666;\">}</span>))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb262-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb262-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb262-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  get <span class=\"at\" style=\"color: #7d9029;\">emoji</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb262-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// return emoji based on this.props.type</span></a>",
            "<a class=\"sourceLine\" id=\"cb262-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb262-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb262-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb262-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> x<span class=\"op\" style=\"color: #666666;\">,</span> y <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb262-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb262-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb262-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>text x<span class=\"op\" style=\"color: #666666;\">={</span>x<span class=\"op\" style=\"color: #666666;\">}</span> y<span class=\"op\" style=\"color: #666666;\">={</span>y<span class=\"op\" style=\"color: #666666;\">}</span> style<span class=\"op\" style=\"color: #666666;\">={{</span> <span class=\"dt\">fontSize</span><span class=\"op\">:</span> <span class=\"st\">&#39;12px&#39;</span> <span class=\"op\">}}</span> ref<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">candyRef</span><span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb262-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">emoji</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb262-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      &lt;/text<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb262-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb262-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb262-36\" title=\"36\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>We initate the <code style=\"white-space: pre-wrap;\">&lt;Candy&gt;</code> component in a random location off screen. Too high up to be seen, somewhere on the visualization horizontally. Doesn’t matter where.</p>",
            "<p>I’ll show you why random soon.</p>",
            "<p>We create a ref as well. D3 will need that to get access to the DOM node.</p>",
            "<p>Then we have <code style=\"white-space: pre-wrap;\">componentDidMount</code> which is where the transition happens.</p>",
            "<h3 id=\"separate-yet-parallel-transitions-for-each-axis\">Separate, yet parallel, transitions for each axis</h3>",
            "<div class=\"sourceCode\" id=\"cb263\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb263-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">componentDidMount</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb263-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> delay <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span></a>",
            "<a class=\"sourceLine\" id=\"cb263-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb263-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> node <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">select</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">candyRef</span>.<span class=\"at\" style=\"color: #7d9029;\">current</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb263-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb263-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    node</a>",
            "<a class=\"sourceLine\" id=\"cb263-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">transition</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb263-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">duration</span>(<span class=\"dv\" style=\"color: #40a070;\">1500</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb263-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">delay</span>(delay)</a>",
            "<a class=\"sourceLine\" id=\"cb263-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">ease</span>(<span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">easeLinear</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb263-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attrTween</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;y&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"at\" style=\"color: #7d9029;\">candyYTween</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">y</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">y</span>))</a>",
            "<a class=\"sourceLine\" id=\"cb263-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">attr</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;x&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">x</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb263-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">on</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;end&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">setState</span>(<span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">y</span> <span class=\"op\" style=\"color: #666666;\">}</span>))</a>",
            "<a class=\"sourceLine\" id=\"cb263-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>Key logic here is that we <code style=\"white-space: pre-wrap;\">d3.select()</code> the candy node, start a transition on it, define a duration, pass the delay from our props, <em>disable</em> easing functions, and specify what’s transitioning.</p>",
            "<p>The tricky bit was figuring out how to run two different transitions in parallel.</p>",
            "<p>D3 doesn’t do concurrent transitions, you see. You have to run <strong>a</strong> transition, then the next one. Or you have to cancel the first transition and start a new one.</p>",
            "<p>Of course you <em>can</em> run concurrent transitions on multiple attributes. But only if they’re both the same transition.</p>",
            "<p>In our case we wanted to have candy bounce vertically and fly linearly in the horizontal direction. This was tricky.</p>",
            "<p>I mean I guess it’s okay with a bounce in both directions? 🧐</p>",
            "<p><img src=\"https://i.imgur.com/L00eWnG.gif\"></p>",
            "<p>No that’s weird.</p>",
            "<h3 id=\"you-can-do-it-with-a-tween\">You can do it with a tween</h3>",
            "<p>First you have to understand some basics of how transitions and easing functions work.</p>",
            "<p>They’re based on interpolators. An interpolator is a function that calculates in-between values between a start and end value based on a <code style=\"white-space: pre-wrap;\">t</code> argument. When <code style=\"white-space: pre-wrap;\">t😮</code>, you get the initial value. When <code style=\"white-space: pre-wrap;\">t=1</code> you get the end value.</p>",
            "<div class=\"sourceCode\" id=\"cb264\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb264-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> interpolate <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">interpolate</span>(<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">100</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb264-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb264-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"at\" style=\"color: #7d9029;\">interpolate</span>(<span class=\"dv\" style=\"color: #40a070;\">0</span>)<span class=\"op\" style=\"color: #666666;\">;</span> <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// 0</span></a>",
            "<a class=\"sourceLine\" id=\"cb264-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"at\" style=\"color: #7d9029;\">interpolate</span>(<span class=\"fl\" style=\"color: #40a070;\">0.5</span>)<span class=\"op\" style=\"color: #666666;\">;</span> <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// 50</span></a>",
            "<a class=\"sourceLine\" id=\"cb264-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"at\" style=\"color: #7d9029;\">interpolate</span>(<span class=\"dv\" style=\"color: #40a070;\">1</span>)<span class=\"op\" style=\"color: #666666;\">;</span> <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// 1</span></a></code></pre></div>",
            "<p>Something like that in a nutshell. D3 supports much more complex interpolations than that, but numbers are all we need right now.</p>",
            "<p>Easing functions manipulate how that <code style=\"white-space: pre-wrap;\">t</code> parameter behaves. Does it go from <code style=\"white-space: pre-wrap;\">0</code> to <code style=\"white-space: pre-wrap;\">1</code> linearly? Does it bounce around? Does it accelerate and slow down?</p>",
            "<p>When you start a transition with <code style=\"white-space: pre-wrap;\">easeLinear</code> and <code style=\"white-space: pre-wrap;\">attr('x', this.props.😆</code> you are essentially creating an interpolator from the current value of <code style=\"white-space: pre-wrap;\">x</code> to your desired value, and the <code style=\"white-space: pre-wrap;\">t</code> parameter changes by an equal amount on every tick of the transition.</p>",
            "<p>If you have <code style=\"white-space: pre-wrap;\">1500</code> milliseconds to finish the transition (your duration), that’s 90 frames at 60fps. Means your <code style=\"white-space: pre-wrap;\">t</code> adds 0.01 on every tick of the animation.</p>",
            "<p>We can use that to create a custom tween for the vertical coordinate, <code style=\"white-space: pre-wrap;\">y</code>.</p>",
            "<div class=\"sourceCode\" id=\"cb265\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb265-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span> <span class=\"at\" style=\"color: #7d9029;\">candyYTween</span>(oldY<span class=\"op\" style=\"color: #666666;\">,</span> newY) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb265-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> interpolator <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">interpolate</span>(oldY<span class=\"op\" style=\"color: #666666;\">,</span> newY)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb265-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb265-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">function</span>(t) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb265-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"at\" style=\"color: #7d9029;\">interpolator</span>(<span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">easeBounceOut</span>(t))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb265-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb265-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb265-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p><code style=\"white-space: pre-wrap;\">candyYTween</code> takes the initial and new coordinates, creates an interpolator, and returns a function. This function returns a parametrized function that drives our transition. For every <code style=\"white-space: pre-wrap;\">t</code> we return the value of our <code style=\"white-space: pre-wrap;\">interpolator</code> after passing it through the <code style=\"white-space: pre-wrap;\">easeBounceOut</code> easing function.</p>",
            "<p>We’re basically taking a linear parameter, turning it into a bouncy paramater, and passing <em>that</em> into our interpolator. This creates a bouncy effect without affecting the <code style=\"white-space: pre-wrap;\">x</code> coordinate in the other transition.</p>",
            "<p>I don’t know why we need the double function wrap, but it didn’t work otherwise.</p>",
            "<h2 id=\"so-why-all-the-randomness\">So why all the randomness?</h2>",
            "<p>Randomness makes our visualization look better. More natural.</p>",
            "<p>Here’s what it looks like without any <code style=\"white-space: pre-wrap;\">Math.random()</code></p>",
            "<blockquote class=\"twitter-tweet\" data-lang=\"en\">",
            "<p lang=\"en\" dir=\"ltr\">",
            "Here's why adding randomness to your animations matters 👇<br><br>This chart of candy buying habits in the US is not random at all. Delay based purely on array index. <a href=\"https://t.co/pTTWxovaSp\">pic.twitter.com/pTTWxovaSp</a>",
            "</p>",
            "— Swizec Teller (<span class=\"citation\" data-cites=\"Swizec\">@Swizec</span>) <a href=\"https://twitter.com/Swizec/status/1073285327282876416?ref_src=twsrc%5Etfw\">December 13, 2018</a>",
            "</blockquote>",
            "<script async charset=\"utf-8\">",
            "Function&&Function.prototype&&Function.prototype.bind&&(/MSIE ([6789]|10)/.test(navigator.userAgent)||(window.__twttr&&window.__twttr.widgets&&window.__twttr.widgets.loaded&&window.twttr.widgets.load&&window.twttr.widgets.load(),window.__twttr&&window.__twttr.widgets&&window.__twttr.widgets.init||function(t){function e(e){for(var n,i,o=e[0],s=e[1],a😮,c😦];a<o.length;a++)i😮[a],r[i]&&c.push(r[i][0]),r[i]😮;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]😒[n]);for(u&&u(e);c.length😉c.shift()()}var n={},r={1😮};function i(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(t){var e😦],n=r[t];if(0!==n)if(n)e.push(n[2]);else{var o=new Promise(function(e,i){n=r[t👿e,i]});e.push(n[2]😮);var s,a=document.getElementsByTagName(\"head\")[0],u=document.createElement(\"script\");u.charset=\"utf-8\",u.timeout=120,i.nc&&u.setAttribute(\"nonce\",i.nc),u.src=function(t){return i.p+\"js/\"+({0:\"moment~timeline~tweet\",2:\"dm_button\",3:\"button\",4:\"moment\",5:\"periscope_on_air\",6:\"timeline\",7:\"tweet\"}[t]||t)+\".\"+{0:\"a20574004ea824b1c047f200045ffa1e\",2:\"b573518d7182437fcff1973b0098d272\",3:\"509719336ca39171c37a321231ccaf83\",4:\"f261877d67dc45f3972d303d6b32c138\",5:\"04369ab165b401d73b183f97ed7153fd\",6:\"49693ebcd57b08708ebca7502c7c343d\",7:\"73b7ab8a56ad3263cad8d36ba66467fc\"}[t]+\".js\"}(t),s=function(e){u.onerror=u.onload=null,clearTimeout(c);var n=r[t];if(0!==n){if(n){var i=e&&(\"load\"===e.type?\"missing\":e.type),o=e&&e.target&&e.target.src,s=new Error(\"Loading chunk \"+t+\" failed.\\n(\"+i+\": \"+o+\")\");s.type=i,s.request😮,n[1](s)}r[t]=void 0}};var c=setTimeout(function(){s({type:\"timeout\",target:u})},12e4);u.onerror=u.onload😒,a.appendChild(u)}return Promise.all(e)},i.m=t,i.c=n,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,\"a\",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p=\"https://platform.twitter.com/\",i.oe=function(t){throw console.error(t),t};var o=window.__twttrll=window.__twttrll||[],s😮.push.bind(o);o.push=e,o😮.slice();for(var a😮;a<o.length;a++)e(o[a]);var u😒;i(i.s=91)}([function(t,e,n){var r=n(1);function i(t,e){var n;for(n in t)t.hasOwnProperty&&!t.hasOwnProperty(n)||e(n,t[n]);return t}function o(t){return{}.toString.call(t).match(/\\s([a-zA-Z]+)/)[1].toLowerCase()}function s(t){return t===Object(t)}function a(t){var e;if(!s(t))return!1;if(Object.keys)return!Object.keys(t).length;for(e in t)if(t.hasOwnProperty(e))return!1;return!0}function u(t){return t?Array.prototype.slice.call(t)😦]}t.exports={aug:function(t){return u(arguments).slice(1).forEach(function(e){i(e,function(e,n){t[e]=n})}),t},async:function(t,e){r.setTimeout(function(){t.call(e||null)},0)},compact:function t(e){return i(e,function(n,r){s(r)&&(t(r),a(r)&&delete e[n]),void 0!==r&&null!==r&&\"\"!==r||delete e[n]}),e},contains:function(t,e){return!(!t||!t.indexOf)&&t.indexOf(e)>-1},forIn:i,isObject😒,isEmptyObject:a,toType😮,isType:function(t,e){return t==o(e)},toRealArray:u}},function(t,e){t.exports=window},function(t,e,n){var r=n(6);t.exports=function(){var t=this;this.promise=new r(function(e,n){t.resolve=e,t.reject=n})}},function(t,e,n){var r=n(11),i😕(?:^|(?:https?😃?\\/\\/(?:www\\.)?twitter\\.com(?::\\d+)?(?😕/intent\\/(?:follow|user)\\/?\\?screen_name😐(?😕/#!)?\\/))@?([\\w]+)(?😕?|&|$)/i,o😕(?:^|(?:https?😃?\\/\\/(?:www\\.)?twitter\\.com(?::\\d+)?\\/(?:#!\\/)?[\\w_]+\\/status(?:es)?\\/)(\\d+)/i,s😕^http(s?)😕/\\/(\\w+\\.)*twitter\\.com([😕]|$)/i,a😕^http(s?)😕/\\/pbs\\.twimg\\.com\\//,u😕^#?([^.,<>!\\s/#\\-()'\"]+)$/,c😕twitter\\.com(?::\\d{2,4})?\\/intent\\/(\\w+)/,d😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/\\w+\\/timelines\\/(\\d+)/i,l😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/i\\/moments\\/(\\d+)/i,f😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/(\\w+)\\/(?:likes|favorites)/i,h😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/(\\w+)\\/lists\\/([\\w-%]+)/i,p😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/i\\/live\\/(\\d+)/i,m😕^https?😕/\\/syndication\\.twitter\\.com\\/settings/i,v😕^https?😕/\\/(localhost|platform)\\.twitter\\.com(?::\\d+)?\\/widgets\\/widget_iframe\\.(.+)/i,g😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/search\\?q😦\\w+)/i;function w(t){return\"string\"==typeof t&&i.test(t)&&RegExp.$1.length<=20}function y(t){if(w(t))return RegExp.$1}function b(t,e){var n=r.decodeURL(t);if(e=e||!1,n.screen_name=y(t),n.screen_name)return r.url(\"https://twitter.com/intent/\"+(e?\"follow\":\"user\"),n)}function _(t){return\"string\"==typeof t&&u.test(t)}function E(t){return\"string\"==typeof t&&o.test(t)}t.exports={isHashTag:_,hashTag:function(t,e){if(e=void 0===e||e,_(t))return(e?\"#\":\"\")+RegExp.$1},isScreenName:w,screenName:y,isStatus:E,status:function(t){return E(t)&&RegExp.$1},intentForProfileURL:b,intentForFollowURL:function(t){return b(t,!0)},isTwitterURL:function(t){return s.test(t)},isTwimgURL:function(t){return a.test(t)},isIntentURL:function(t){return c.test(t)},isSettingsURL:function(t){return m.test(t)},isWidgetIframeURL:function(t){return v.test(t)},isSearchUrl:function(t){return g.test(t)},regexen:{profile:i},momentId:function(t){return l.test(t)&&RegExp.$1},collectionId:function(t){return d.test(t)&&RegExp.$1},intentType:function(t){return c.test(t)&&RegExp.$1},likesScreenName:function(t){return f.test(t)&&RegExp.$1},listScreenNameAndSlug:function(t){var e,n,r;if(h.test(t)){e=RegExp.$1,n=RegExp.$2;try{r=decodeURIComponent(n)}catch(t){}return{ownerScreenName:e,slug:r||n}}return!1},eventId:function(t){return p.test(t)&&RegExp.$1}}},function(t,e,n){var r=n(0),i😦!0,1,\"1\",\"on\",\"ON\",\"true\",\"TRUE\",\"yes\",\"YES\"],o😦!1,0,\"0\",\"off\",\"OFF\",\"false\",\"FALSE\",\"no\",\"NO\"];function s(t){return void 0!==t&&null!==t&&\"\"!==t}function a(t){return c(t)&&t%1==0}function u(t){return c(t)&&!a(t)}function c(t){return s(t)&&!isNaN(t)}function d(t){return r.contains(o,t)}function l(t){return r.contains(i,t)}t.exports={hasValue😒,isInt:a,isFloat:u,isNumber:c,isString:function(t){return\"string\"===r.toType(t)},isArray:function(t){return s(t)&&\"array\"==r.toType(t)},isTruthValue:l,isFalseValue😛,asInt:function(t){if(a(t))return parseInt(t,10)},asFloat:function(t){if(u(t))return t},asNumber:function(t){if(c(t))return t},asBoolean:function(t){return!(!s(t)||!l(t)&&(d(t)||!t))}}},function(t,e){t.exports=document},function(t,e,n){var r=n(1),i=n(20),o=n(45);i.hasPromiseSupport()||(r.Promise😮),t.exports=r.Promise},function(t,e,n){var r=n(0);t.exports=function(t,e){var n=Array.prototype.slice.call(arguments,2);return function(){var i=r.toRealArray(arguments);return t.apply(e,n.concat(i))}}},function(t,e){t.exports=location},function(t,e,n){var r=n(47);t.exports=new r(\"__twttr\")},function(t,e,n){var r=n(0),i😕\\b([\\w-_]+)\\b/g;function o(t){return new RegExp(\"\\\\b\"+t+\"\\\\b\",\"g\")}function s(t,e){t.classList?t.classList.add(e)😮(e).test(t.className)||(t.className+=\" \"+e)}function a(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(o(e),\" \")}function u(t,e){return t.classList?t.classList.contains(e):r.contains(c(t),e)}function c(t){return r.toRealArray(t.classList?t.classList:t.className.match(i))}t.exports={add😒,remove:a,replace:function(t,e,n){if(t.classList&&u(t,e))return a(t,e),void s(t,n);t.className=t.className.replace(o(e),n)},toggle:function(t,e,n){return void 0===n&&t.classList&&t.classList.toggle?t.classList.toggle(e,n)😦n?s(t,e):a(t,e),n)},present:u,list:c}},function(t,e,n){var r=n(4),i=n(0);function o(t){return encodeURIComponent(t).replace(/\\+/g,\"%2B\").replace(/'/g,\"%27\")}function s(t){return decodeURIComponent(t)}function a(t){var e😦];return i.forIn(t,function(t,n){var s😮(t);i.isType(\"array\",n)||(n😦n]),n.forEach(function(t){r.hasValue(t)&&e.push(s+\"=\"+o(t))})}),e.sort().join(\"&\")}function u(t){var e={};return t?(t.split(\"&\").forEach(function(t){var n=t.split(\"😊,r😒(n[0]),o😒(n[1]);if(2==n.length){if(!i.isType(\"array\",e[r]))return r in e?(e[r👿e[r]],void e[r].push(o)):void(e[r]😮);e[r].push(o)}}),e):{}}t.exports={url:function(t,e){return a(e).length>0?i.contains(t,\"?\")?t+\"&\"+a(e):t+\"?\"+a(e):t},decodeURL:function(t){var e=t&&t.split(\"?\");return 2==e.length?u(e[1]):{}},decode:u,encode:a,encodePart😮,decodePart😒}},function(t,e,n){var r=n(😎,i=n(1),o=n(0),s={},a😮.contains(r.href,\"tw_debug=true\");function u(){}function c(){}function d(){return i.performance&&+i.performance.now()||+new Date}function l(t,e){if(i.console&&i.console[t])switch(e.length){case 1:i.console[t](e[0]);break;case 2:i.console[t](e[0],e[1]);break;case 3:i.console[t](e[0],e[1],e[2]);break;case 4:i.console[t](e[0],e[1],e[2],e[3]);break;case 5:i.console[t](e[0],e[1],e[2],e[3],e[4]);break;default😮!==e.length&&i.console.warn&&i.console.warn(\"too many params passed to logger.\"+t)}}t.exports={devError:u,devInfo:c,devObject:function(t,e){},publicError:function(){l(\"error\",o.toRealArray(arguments))},publicLog:function(){l(\"info\",o.toRealArray(arguments))},time:function(t){a&&(s[t]😛())},timeEnd:function(t){a&&s[t]&&(d(),s[t])}}},function(t,e,n){var r=n(19),i=n(4),o=n(11),s=n(0),a=n(116);t.exports=function(t){var e=t.href&&t.href.split(\"?\")[1],n=e?o.decode(e):{},u={lang:a(t),width:t.getAttribute(\"data-width\")||t.getAttribute(\"width\"),height:t.getAttribute(\"data-height\")||t.getAttribute(\"height\"),related:t.getAttribute(\"data-related\"),partner:t.getAttribute(\"data-partner\")};return i.asBoolean(t.getAttribute(\"data-dnt\"))&&r.setOn(),s.forIn(u,function(t,e){var r=n[t];n[t]=i.hasValue(r)?r:e}),s.compact(n)}},function(t,e,n){var r=n(79),i=n(22);t.exports=function(){var t=\"data-twitter-extracted-\"+i.generate();return function(e,n){return r(e,n).filter(function(e){return!e.hasAttribute(t)}).map(function(e){return e.setAttribute(t,\"true\"),e})}}},function(t,e){function n(t,e,n,r,i,o){this.factory=t,this.Sandbox=e,this.srcEl😮,this.targetEl=i,this.parameters=r,this.className=n}n.prototype.destroy=function(){this.srcEl=this.targetEl=null},t.exports=n},function(t,e,n){var r=n(6),i=n(49),o=n(19),s=n(4),a=n(0);t.exports=function(t,e,n){var u;return t=t||[],e=e||{},u=\"ƒ(\"+t.join(\", \")+\", target, [options]);\",function(){var c,d,l,f,h=Array.prototype.slice.apply(arguments,[0,t.length]),p=Array.prototype.slice.apply(arguments,[t.length]);return p.forEach(function(t){t&&(t.nodeType!==Node.ELEMENT_NODE?a.isType(\"function\",t)?c=t:a.isType(\"object\",t)&&(d=t):l=t)}),h.length!==t.length||0===p.length?(c&&a.async(function(){c(!1)}),r.reject(new Error(\"Not enough parameters. Expected: \"+u))):l?(d=a.aug({},d||{},e),t.forEach(function(t){d[t]=h.shift()}),s.asBoolean(d.dnt)&&o.setOn(),f=i.addWidget(n(d,l)),c&&f.then(c,function(){c(!1)}),f)😦c&&a.async(function(){c(!1)}),r.reject(new Error(\"No target element specified. Expected: \"+u)))}}},function(t,e,n){var r=n(99),i=n(2),o=n(0);function s(t,e){return function(){try{e.resolve(t.call(this))}catch(t){e.reject(t)}}}t.exports={sync:function(t,e){t.call(e)},read:function(t,e){var n=new i;return r.read(s(t,n),e),n.promise},write:function(t,e){var n=new i;return r.write(s(t,n),e),n.promise},defer:function(t,e,n){var a=new i;return o.isType(\"function\",t)&&(n=e,e=t,t=1),r.defer(t,s(e,a),n),a.promise}}},function(t,e,n){var r=n(9),i😦\"https://syndication.twitter.com\",\"https://cdn.syndication.twimg.com\",\"https://localhost.twitter.com:8444\"],o😦\"https://syndication.twitter.com\",\"https://localhost.twitter.com:8445\"],s=function(t,e){return t.indexOf(e)>-1},a=function(){var t=r.get(\"backendHost\");return t&&s(i,t)?t:\"https://cdn.syndication.twimg.com\"},u=function(){var t=r.get(\"settingsSvcHost\");return t&&s(o,t)?t:\"https://syndication.twitter.com\"};function c(t,e){var n😦t];return e.forEach(function(t){n.push(function(t){var e😦t||\"\").toString(),n=\"/\"===e.slice(0,1)?1😮,r=function(t){return\"/\"===t.slice(-1)}(e)?-1:void 0;return e.slice(n,r)}(t))}),n.join(\"/\")}t.exports={cookieConsent:function(t){var e=t||[];return e.unshift(\"cookie/consent\"),c(u(),e)},eventVideo:function(t){var e=t||[];return e.unshift(\"video/event\"),c(a(),e)},grid:function(t){var e=t||[];return e.unshift(\"grid/collection\"),c(a(),e)},moment:function(t){var e=t||[];return e.unshift(\"moments\"),c(a(),e)},settings:function(t){var e=t||[];return e.unshift(\"settings\"),c(u(),e)},timeline:function(t){var e=t||[];return e.unshift(\"timeline\"),c(a(),e)},tweetBatch:function(t){var e=t||[];return e.unshift(\"tweets.json\"),c(a(),e)},video:function(t){var e=t||[];return e.unshift(\"widgets/video\"),c(a(),e)}}},function(t,e,n){var r=n(5),i=n(😎,o=n(35),s=n(77),a=n(4),u=n(32),c=!1,d😕https?😕/\\/([^/]+).*/i;t.exports={setOn:function(){c=!0},enabled:function(t,e){return!!(c||a.asBoolean(u.val(\"dnt\"))||s.isUrlSensitive(e||i.host)||o.isFramed()&&s.isUrlSensitive(o.rootDocumentLocation())||(t😛.test(t||r.referrer)&&RegExp.$1)&&s.isUrlSensitive(t))}}},function(t,e,n){var r=n(5),i=n(12),o=n(92),s=n(1),a=n(0),u😮.userAgent;function c(t){return/(Trident|MSIE|Edge[/ ]?\\d)/.test(t=t||u)}t.exports={retina:function(t){return(t=t||s).devicePixelRatio?t.devicePixelRatio>=1.5:!!t.matchMedia&&t.matchMedia(\"only screen and (min-resolution: 144dpi)\").matches},anyIE:c,ie9:function(t){return/MSIE 9/.test(t=t||u)},ie10:function(t){return/MSIE 10/.test(t=t||u)},ios:function(t){return/(iPad|iPhone|iPod)/.test(t=t||u)},android:function(t){return/^Mozilla\\/5\\.0 \\(Linux; (U; )?Android/.test(t=t||u)},canPostMessage:function(t,e){return t=t||s,e=e||u,t.postMessage&&!(c(e)&&t.opener)},touch:function(t,e,n){return t=t||s,e=e||o,n=n||u,\"ontouchstart\"in t||/Opera Mini/.test(n)||e.msMaxTouchPoints>0},cssTransitions:function(){var t=r.body.style;return void 0!==t.transition||void 0!==t.webkitTransition||void 0!==t.mozTransition||void 0!==t.oTransition||void 0!==t.msTransition},hasPromiseSupport:function(){return!!(s.Promise&&s.Promise.resolve&&s.Promise.reject&&s.Promise.all&&s.Promise.race&&(new s.Promise(function(e){t=e}),a.isType(\"function\",t)));var t},hasIntersectionObserverSupport:function(){return!!s.IntersectionObserver},hasPerformanceInformation:function(){return s.performance&&s.performance.getEntriesByType},hasLocalStorageSupport:function(){try{return s.localStorage.setItem(\"local_storage_support_test\",\"true\"),void 0!==s.localStorage}catch(t){return i.devError(\"window.localStorage is not supported:\",t),!1}}}},function(t,e,n){var r=n(6),i=n(2);function o(t,e){return t.then(e,e)}function s(t){return t instanceof r}t.exports={always😮,allResolved:function(t){var e;return void 0===t?r.reject(new Error(\"undefined is not an object\")):Array.isArray(t)?(e=t.length)?new r(function(n,r){var i😮,o😦];function a(){(i+=1)===e&&(0===o.length?r():n(o))}function u(t){o.push(t),a()}t.forEach(function(t){s(t)?t.then(u,a):u(t)})}):r.resolve([]):r.reject(new Error(\"Type error\"))},some:function(t){var e;return e😦t=t||[]).length,t=t.filter(s),e?e!==t.length?r.reject(\"non-Promise passed to .some\"):new r(function(e,n){var r😮;function i(){(r+=1)===t.length&&n()}t.forEach(function(t){t.then(e,i)})}):r.reject(\"no promises passed to .some\")},isPromise😒,allSettled:function(t){function e(){}return r.all((t||[]).map(function(t){return o(t,e)}))},timeout:function(t,e){var n=new i;return setTimeout(function(){n.reject(new Error(\"Promise timed out\"))},e),t.then(function(t){n.resolve(t)},function(t){n.reject(t)}),n.promise}}},function(t,e){var n=\"i\",r😮,i😮;t.exports={generate:function(){return n+String(+new Date)+Math.floor(1e5*Math.random())+r++},deterministic:function(){return n+String(i++)}}},function(t,e,n){var r=n(46),i=n(48),o=n(0);t.exports😮.aug(r.get(\"events\")||{},i.Emitter)},function(t,e,n){var r=n(25),i=n(107);t.exports=r.build([i])},function(t,e,n){var r=n(37),i=n(104),o=n(7);(r=Object.create(r)).build😮(r.build,null,i),t.exports=r},function(t,e,n){var r=n(37),i=n(38),o=n(7);(r=Object.create(r)).build😮(r.build,null,i),t.exports=r},function(t,e,n){var r=n(81),i=n(73),o=n(82),s=n(😎,a=n(68),u=n(72),c=n(19),d=n(4),l=n(22),f=n(0);function h(t){if(!t||!t.headers)throw new Error(\"unexpected response schema\");return{html:t.body,config:t.config,pollInterval:1e3*parseInt(t.headers.xPolling,10)||null,maxCursorPosition:t.headers.maxPosition,minCursorPosition:t.headers.minPosition}}function p(t){if(t&&t.headers)throw new Error(t.headers.status);throw t instanceof Error?t:new Error(t)}t.exports=function(t){t.params({instanceId:{required:!0,fallback:l.deterministic},lang:{required:!0,transform:a.matchLanguage,fallback:\"en\"},tweetLimit:{transform😛.asInt}}),t.defineProperty(\"endpoint\",{get:function(){throw new Error(\"endpoint not specified\")}}),t.defineProperty(\"pollEndpoint\",{get:function(){return this.endpoint}}),t.define(\"cbId\",function(t){var e=t?\"_new\":\"_old\";return\"tl_\"+this.params.instanceId+\"_\"+this.id+e}),t.define(\"queryParams\",function(){return{lang:this.params.lang,tz:u.getTimezoneOffset(),t:r(),domain😒.host,tweet_limit:this.params.tweetLimit,dnt:c.enabled()}}),t.define(\"fetch\",function(){return i.fetch(this.endpoint,this.queryParams(),o,this.cbId()).then(h,p)}),t.define(\"poll\",function(t,e){var n,r;return n={since_id😦t=t||{}).sinceId,max_id:t.maxId,min_position:t.minPosition,max_position:t.maxPosition},r=f.aug(this.queryParams(),n),i.fetch(this.pollEndpoint,r,o,this.cbId(e)).then(h,p)})}},function(t,e,n){var r=n(48).makeEmitter();t.exports={emitter:r,START:\"start\",ALL_WIDGETS_RENDER_START:\"all_widgets_render_start\",ALL_WIDGETS_RENDER_END:\"all_widgets_render_end\",ALL_WIDGETS_AND_IMAGES_LOADED:\"all_widgets_and_images_loaded\"}},function(t,e,n){var r=n(5),i=n(0);t.exports=function(t,e,n){var o;if(n=n||r,t=t||{},e=e||{},t.name){try{o=n.createElement('<iframe name=\"'+t.name+'\"></iframe>')}catch(e){(o=n.createElement(\"iframe\")).name=t.name}delete t.name}else o=n.createElement(\"iframe\");return t.id&&(o.id=t.id,delete t.id),o.allowtransparency=\"true\",o.scrolling=\"no\",o.setAttribute(\"frameBorder\",0),o.setAttribute(\"allowTransparency\",!0),i.forIn(t,function(t,e){o.setAttribute(t,e)}),i.forIn(e,function(t,e){o.style[t]=e}),o}},function(t,e,n){var r=n(1).JSON;t.exports={stringify:r.stringify||r.encode,parse:r.parse||r.decode}},function(t,e,n){var r=n(0),i=n(40);t.exports={closest:function t(e,n,o){var s;if(n)return o😮||n&&n.ownerDocument,s=r.isType(\"function\",e)?e:function(t){return function(e){return!!e.tagName&&i(e,t)}}(e),n===o?s(n)?n:void 0😒(n)?n:t(s,n.parentNode,o)}}},function(t,e,n){var r,i=n(5);function o(t){var e,n,o,s😮;for(r={},e😦t=t||i).getElementsByTagName(\"meta\");e[s];s++){if(n=e[s],/^twitter😕.test(n.getAttribute(\"name\")))o=n.getAttribute(\"name\").replace(/^twitter😕,\"\");else{if(!/^twitter😕.test(n.getAttribute(\"property\")))continue;o=n.getAttribute(\"property\").replace(/^twitter😕,\"\")}r[o]=n.getAttribute(\"content\")||n.getAttribute(\"value\")}}o(),t.exports={init😮,val:function(t){return r[t]}}},function(t,e,n){var r=n(5),i=n(30),o=n(19),s=n(0),a=n(41),u=n(9),c=n(3),d=n(31),l=a.version,f=u.get(\"clientEventEndpoint\")||\"https://syndication.twitter.com/i/jot\",h=1;function p(t){return s.aug({client:\"tfw\"},t||{})}function m(t,e,n){return e=e||{},s.aug({},e,{_category_:t,triggered_on:e.triggered_on||+new Date,dnt😮.enabled(n)})}t.exports={extractTermsFromDOM:function t(e,n){var r;return n=n||{},e&&e.nodeType===Node.ELEMENT_NODE?((r=e.getAttribute(\"data-scribe\"))&&r.split(\" \").forEach(function(t){var e=t.trim().split(\"😊,r=e[0],i=e[1];r&&i&&!n[r]&&(n[r]=i)}),t(e.parentNode,n)):n},clickEventElement:function(t){var e😛.closest(\"[data-expanded-url]\",t),n=e&&e.getAttribute(\"data-expanded-url\");return n&&c.isTwitterURL(n)?\"twitter_url\":\"url\"},flattenClientEventPayload:function(t,e){return s.aug({},e,{event_namespace:t})},formatGenericEventData:m,formatClientEventData:function(t,e,n){var i=t&&t.widget_origin||r.referrer;return(t=m(\"tfw_client_event\",t,i)).client_version=l,t.format_version=void 0!==n?n:1,e||(t.widget_origin=i),t},formatClientEventNamespace😛,formatTweetAssociation:function(t,e){var n={};return(e=e||{}).association_namespace😛(t),n[h]=e,n},noticeSeen:function(t){return\"notice\"===t.element&&\"seen\"===t.action},splitLogEntry:function(t){var e,n,r,i,o;return t.item_ids&&t.item_ids.length>1?(e=Math.floor(t.item_ids.length/2),n=t.item_ids.slice(0,e),r={},i=t.item_ids.slice(e),o={},n.forEach(function(e){r[e]=t.item_details[e]}),i.forEach(function(e){o[e]=t.item_details[e]}),[s.aug({},t,{item_ids:n,item_details:r}),s.aug({},t,{item_ids:i,item_details😮})])😦t]},stringify:function(t){var e,n=Array.prototype.toJSON;return delete Array.prototype.toJSON,e=i.stringify(t),n&&(Array.prototype.toJSON=n),e},AUDIENCE_ENDPOINT:\"https://syndication.twitter.com/i/jot/syndication\",CLIENT_EVENT_ENDPOINT:f,RUFOUS_REDIRECT:\"https://platform.twitter.com/jot.html\"}},function(t,e,n){var r=n(10),i={},o=-1,s={};function a(t){var e=t.getAttribute(\"data-twitter-event-id\");return e||(t.setAttribute(\"data-twitter-event-id\",++o),o)}function u(t,e,n){var r😮,i=t&&t.length||0;for(r😮;r<i;r++)if(t[r].call(e,n,e),n.ceaseImmediately)return!1}function c(t,e,n){for(var i=n||t.target||t.srcElement,o=r.list(i).map(function(t){return\".\"+t}).concat(i.tagName),s😮,a😮.length;s<a;s++)if(!1===u(e[o[s]],i,t))return;t.cease||i!==this&&c.call(this,t,e,i.parentElement||i.parentNode)}function d(t,e,n,r){function i(r){c.call(t,r,n[e])}!function(t,e,n,r){t.id&&(s[t.id]😒[t.id]||[],s[t.id].push({el:t,listener:e,type:n,rootId:r}))}(t,i,e,r),t.addEventListener(e,i,!1)}function l(t){t&&t.preventDefault?t.preventDefault():t.returnValue=!1}function f(t){t&&(t.cease=!0)&&t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}t.exports={stop:function(t){return f(t),l(t),!1},stopPropagation:f,stopImmediatePropagation:function(t){t&&(t.ceaseImmediately=!0,f(t),t.stopImmediatePropagation())},preventDefault:l,delegate:function(t,e,n,r){var o=a(t);i[o]=i[o]||{},i[o][e]||(i[o][e]={},d(t,e,i[o],o)),i[o][e][n]=i[o][e][n]||[],i[o][e][n].push(r)},simulate:function(t,e,n){var r=a(e),o=i[r]&&i[r];c.call(e,{target:n},o[t])},removeDelegatesForWidget:function(t){var e😒[t];e&&(e.forEach(function(t){t.el.removeEventListener(t.type,t.listener,!1),delete i[t.rootId]}),delete s[t])}}},function(t,e,n){var r=n(😎,i=n(76),o=n(0),s=i.getCanonicalURL()||r.href,a😒;t.exports={isFramed:function(){return s!==a},rootDocumentLocation:function(t){return t&&o.isType(\"string\",t)&&(s=t),s},currentDocumentLocation:function(){return a}}},function(t,e,n){var r=n(75),i=n(101),o=n(78),s=n(33),a=new(n(109))(function(t){var e,n,a;if(0!==t.length){if(u(t))return c(t);e=r(t,function(t){return s.noticeSeen(t.input.namespace)}),n=e.true,a=e.false,n&&n.length>0&&(n=n.slice(0,1),o.canFlushOneItem(n[0])||(n[0].input.data.message=\"\"),c(n)),a&&(u(a)?c:function(t){i.init(),t.forEach(function(t){var e=t.input.namespace,n=t.input.data,r=t.input.offsite,o=t.input.version;i.clientEvent(e,n,r,o)}),i.flush().then(function(){t.forEach(function(t){t.taskDoneDeferred.resolve()})},function(){t.forEach(function(t){t.taskDoneDeferred.reject()})})})(a)}});function u(t){return 1===t.length&&o.canFlushOneItem(t[0])}function c(t){t.forEach(function(t){var e=t.input.namespace,n=t.input.data,r=t.input.offsite,i=t.input.version;o.clientEvent(e,n,r,i),t.taskDoneDeferred.resolve()})}t.exports={scribe:function(t,e,n,r){return a.add({namespace:t,data:e,offsite:n,version:r})},pause:function(){a.pause()},resume:function(){a.resume()}}},function(t,e,n){var r=n(102),i=n(103),o=n(0);t.exports={couple:function(){return o.toRealArray(arguments)},build:function(t,e,n){var o=new t;return(e=i(r(e||[]))).forEach(function(t){t.call(null,o)}),o.build(n)}}},function(t,e,n){var r=n(105),i=n(0),o=n(39);function s(){this.Component=this.factory(),this._adviceArgs😦],this._lastArgs😦]}i.aug(s.prototype,{factory😮,build:function(t){var e=this;return this.Component,i.aug(this.Component.prototype.boundParams,t),this._adviceArgs.concat(this._lastArgs).forEach(function(t){(function(t,e,n){var r=this[e];if(!r)throw new Error(e+\" does not exist\");this[e]=t(r,n)}).apply(e.Component.prototype,t)}),delete this._lastArgs,delete this._adviceArgs,this.Component},params:function(t){var e=this.Component.prototype.paramConfigs;t=t||{},this.Component.prototype.paramConfigs=i.aug({},t,e)},define:function(t,e){if(t in this.Component.prototype)throw new Error(t+\" has previously been defined\");this.override(t,e)},defineStatic:function(t,e){this.Component[t]=e},override:function(t,e){this.Component.prototype[t]=e},defineProperty:function(t,e){if(t in this.Component.prototype)throw new Error(t+\" has previously been defined\");this.overrideProperty(t,e)},overrideProperty:function(t,e){var n=i.aug({configurable:!0},e);Object.defineProperty(this.Component.prototype,t,n)},before:function(t,e){this._adviceArgs.push([r.before,t,e])},after:function(t,e){this._adviceArgs.push([r.after,t,e])},around:function(t,e){this._adviceArgs.push([r.around,t,e])},last:function(t,e){this._lastArgs.push([r.after,t,e])}}),t.exports😒},function(t,e,n){var r=n(0);function i(){return!0}function o(t){return t}t.exports=function(){function t(t){var e=this;t=t||{},this.params=Object.keys(this.paramConfigs).reduce(function(n,s){var a😦],u=e.boundParams,c=e.paramConfigs[s],d=c.validate||i,l=c.transform||o;if(s in u&&a.push(u[s]),s in t&&a.push(t[s]),a=\"fallback\"in c?a.concat(c.fallback):a,n[s]=function(t,e,n){var i=null;return t.some(function(t){if(t=r.isType(\"function\",t)?t():t,e(t))return i=n(t),!0}),i}(a,d,l),c.required&&null==n[s])throw new Error(s+\" is a required parameter\");return n},{}),this.initialize()}return r.aug(t.prototype,{paramConfigs:{},boundParams:{},initialize:function(){}}),t}},function(t,e,n){var r=n(1).HTMLElement,i=r.prototype.matches||r.prototype.matchesSelector||r.prototype.webkitMatchesSelector||r.prototype.mozMatchesSelector||r.prototype.msMatchesSelector||r.prototype.oMatchesSelector;t.exports=function(t,e){if(i)return i.call(t,e)}},function(t){t.exports={version:\"7e980dd:1559715853415\"}},function(t,e,n){var r,i=n(10),o=n(5),s=n(1),a=n(32),u=n(50),c=n(4),d=n(22),l=\"csptest\";t.exports={inlineStyle:function(){var t=l+d.generate(),e😮.createElement(\"div\"),n😮.createElement(\"style\"),f=\".\"+t+\" { visibility: hidden; }\";return!!o.body&&(c.asBoolean(a.val(\"widgets:csp\"))&&(r=!1),void 0!==r?r😦e.style.display=\"none\",i.add(e,t),n.type=\"text/css\",n.appendChild(o.createTextNode(f)),o.body.appendChild(n),o.body.appendChild(e),r=\"hidden\"===s.getComputedStyle(e).visibility,u(e),u(n),r))}}},function(t,e,n){var r=n(1);t.exports=function(t,e,n){var i,o😮;return n=n||null,function s(){var a=n||this,u=arguments,c=+new Date;if(r.clearTimeout(i),c-o>e)return o=c,void t.apply(a,u);i=r.setTimeout(function(){s.apply(a,u)},e)}}},function(t,e){t.exports=function(t){var e=t.getBoundingClientRect();return{width:e.width,height:e.height}}},function(t,e,n){",
            "/*!",
            " * @overview es6-promise - a tiny implementation of Promises/A+.",
            " * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)",
            " * @license   Licensed under MIT license",
            " *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE",
            " * @version   v4.2.5+7f2b526d",
            " */var r;r=function(){\"use strict\";function t(t){return\"function\"==typeof t}var e=Array.isArray?Array.isArray:function(t){return\"[object Array]\"===Object.prototype.toString.call(t)},n😮,r=void 0,i=void 0,o=function(t,e){f[n]=t,f[n+1]=e,2===(n+=2)&&(i?i(h):w())},s=\"undefined\"!=typeof window?window:void 0,a😒||{},u=a.MutationObserver||a.WebKitMutationObserver,c=\"undefined\"==typeof self&&\"undefined\"!=typeof process&&\"[object process]\"==={}.toString.call(process),d=\"undefined\"!=typeof Uint8ClampedArray&&\"undefined\"!=typeof importScripts&&\"undefined\"!=typeof MessageChannel;function l(){var t=setTimeout;return function(){return t(h,1)}}var f=new Array(1e3);function h(){for(var t😮;t<n;t+=2)(0,f[t])(f[t+1]),f[t]=void 0,f[t+1]=void 0;n😮}var p,m,v,g,w=void 0;function y(t,e){var n=this,r=new this.constructor(E);void 0===r[_]&&k(r);var i=n._state;if(i){var s=arguments[i-1];o(function(){return O(i,r,s,n._result)})}else I(n,r,t,e);return r}function b(t){if(t&&\"object\"==typeof t&&t.constructor===this)return t;var e=new this(E);return N(e,t),e}c?w=function(){return process.nextTick(h)}:u?(m😮,v=new u(h),g=document.createTextNode(\"\"),v.observe(g,{characterData:!0}),w=function(){g.data=m=++m%2})😛?((p=new MessageChannel).port1.onmessage=h,w=function(){return p.port2.postMessage(0)}):w=void 0===s?function(){try{var t=Function(\"return this\")().require(\"vertx\");return void 0!==(r=t.runOnLoop||t.runOnContext)?function(){r(h)}:l()}catch(t){return l()}}():l();var _=Math.random().toString(36).substring(2);function E(){}var x=void 0,A=1,T=2,S={error:null};function R(t){try{return t.then}catch(t){return S.error=t,S}}function C(e,n,r){n.constructor===e.constructor&&r===y&&n.constructor.resolve===b?function(t,e){e._state===A?j(t,e._result):e._state===T?L(t,e._result):I(e,void 0,function(e){return N(t,e)},function(e){return L(t,e)})}(e,n):r===S?(L(e,S.error),S.error=null):void 0===r?j(e,n):t(r)?function(t,e,n){o(function(t){var r=!1,i=function(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}(n,e,function(n){r||(r=!0,e!==n?N(t,n):j(t,n))},function(e){r||(r=!0,L(t,e))},t._label);!r&&i&&(r=!0,L(t,i))},t)}(e,n,r):j(e,n)}function N(t,e){var n,r;t===e?L(t,new TypeError(\"You cannot resolve a promise with itself\"))😦r=typeof(n=e),null===n||\"object\"!==r&&\"function\"!==r?j(t,e):C(t,e,R(e)))}function P(t){t._onerror&&t._onerror(t._result),D(t)}function j(t,e){t._state===x&&(t._result=e,t._state=A,0!==t._subscribers.length&&o(D,t))}function L(t,e){t._state===x&&(t._state=T,t._result=e,o(P,t))}function I(t,e,n,r){var i=t._subscribers,s=i.length;t._onerror=null,i[s]=e,i[s+A]=n,i[s+T]=r,0===s&&t._state&&o(D,t)}function D(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,i=void 0,o=t._result,s😮;s<e.length;s+👨)r=e[s],i=e[s+n],r?O(n,r,i,o):i(o);t._subscribers.length😮}}function O(e,n,r,i){var o=t(r),s=void 0,a=void 0,u=void 0,c=void 0;if(o){if((s=function(t,e){try{return t(e)}catch(t){return S.error=t,S}}(r,i))===S?(c=!0,a😒.error,s.error=null):u=!0,n===s)return void L(n,new TypeError(\"A promises callback cannot return that same promise.\"))}else s=i,u=!0;n._state!==x||(o&&u?N(n,s):c?L(n,a):e===A?j(n,s):e===T&&L(n,s))}var z😮;function k(t){t[_]😒++,t._state=void 0,t._result=void 0,t._subscribers😦]}var M=function(){function t(t,n){this._instanceConstructor=t,this.promise=new t(E),this.promise[_]||k(this.promise),e(n)?(this.length=n.length,this._remaining=n.length,this._result=new Array(this.length),0===this.length?j(this.promise,this._result)😦this.length=this.length||0,this._enumerate(n),0===this._remaining&&j(this.promise,this._result))):L(this.promise,new Error(\"Array Methods must be provided an Array\"))}return t.prototype._enumerate=function(t){for(var e😮;this._state===x&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===b){var i=R(t);if(i===y&&t._state!==😆this._settledAt(t._state,e,t._result);else if(\"function\"!=typeof i)this._remaining--,this._result[e]=t;else if(n===U){var o=new n(E);C(o,t,i),this._willSettleAt(o,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},t.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===x&&(this._remaining--,t===T?L(r,n):this._result[e]=n),0===this._remaining&&j(r,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;I(t,void 0,function(t){return n._settledAt(A,e,t)},function(t){return n._settledAt(T,e,t)})},t}(),U=function(){function e(t){this[_]😒++,this._result=this._state=void 0,this._subscribers😦],E!==t&&(\"function\"!=typeof t&&function(){throw new TypeError(\"You must pass a resolver function as the first argument to the promise constructor\")}(),this instanceof e?function(t,e){try{e(function(e){N(t,e)},function(e){L(t,e)})}catch(e){L(t,e)}}(this,t):function(){throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\")}())}return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.finally=function(e){var n=this.constructor;return t(e)?this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})}):this.then(e,e)},e}();return U.prototype.then=y,U.all=function(t){return new M(this,t).promise},U.race=function(t){var n=this;return e(t)?new n(function(e,r){for(var i=t.length,o😮;o<i;o++)n.resolve(t[o]).then(e,r)}):new n(function(t,e){return e(new TypeError(\"You must pass an array to race.\"))})},U.resolve=b,U.reject=function(t){var e=new this(E);return L(e,t),e},U._setScheduler=function(t){i=t},U._setAsap=function(t){o=t},U._asap😮,U.polyfill=function(){var t=void 0;if(\"undefined\"!=typeof global)t=global;else if(\"undefined\"!=typeof self)t=self;else try{t=Function(\"return this\")()}catch(t){throw new Error(\"polyfill failed because global object is unavailable in this environment\")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if(\"[object Promise]\"===n&&!e.cast)return}t.Promise=U},U.Promise=U,U},t.exports=r()},function(t,e,n){var r=n(47);t.exports=new r(\"twttr\")},function(t,e,n){var r=n(1),i=n(0);function o(t){return i.isType(\"string\",t)?t.split(\".\"):i.isType(\"array\",t)?t😦]}function s(t,e){(e=e||r)[t]=e[t]||{},Object.defineProperty(this,\"base\",{value:e[t]}),Object.defineProperty(this,\"name\",{value:t})}i.aug(s.prototype,{get:function(t){return o(t).reduce(function(t,e){if(i.isObject(t))return t[e]},this.base)},set:function(t,e,n){var r😮(t),s=function(t,e){var n😮(e).slice(0,-1);return n.reduce(function(t,e,r){if(t[e]=t[e]||{},!i.isObject(t[e]))throw new Error(n.slice(0,r+1).join(\".\")+\" is already defined with a value.\");return t[e]},t)}(this.base,t),a=r.slice(-1);return n&&a in s?s[a]😒[a]=e},init:function(t,e){return this.set(t,e,!0)},unset:function(t){var e😮(t),n=this.get(e.slice(0,-1));n&&delete n[e.slice(-1)]},aug:function(t){var e=this.get(t),n=i.toRealArray(arguments).slice(1);if(e=void 0!==e?e:{},n.unshift(e),!n.every(i.isObject))throw new Error(\"Cannot augment non-object.\");return this.set(t,i.aug.apply(null,n))},call:function(t){var e=this.get(t),n=i.toRealArray(arguments).slice(1);if(!i.isType(\"function\",e))throw new Error(\"Function \"+t+\"does not exist.\");return e.apply(null,n)},fullPath:function(t){var e😮(t);return e.unshift(this.name),e.join(\".\")}}),t.exports😒},function(t,e,n){var r=n(0),i=n(7),o={bind:function(t,e){return this._handlers=this._handlers||{},this._handlers[t]=this._handlers[t]||[],this._handlers[t].push(e)},unbind:function(t,e){var n;this._handlers&&this._handlers[t]&&(e?(n=this._handlers[t].indexOf(e))>😮&&this._handlers[t].splice(n,1):this._handlers[t👿])},trigger:function(t,e){var n=this._handlers&&this._handlers[t];(e=e||{}).type=t,n&&n.forEach(function(t){r.async(i(t,this,e))})}};t.exports={Emitter😮,makeEmitter:function(){return r.aug(function(){},o)}}},function(t,e,n){var r=n(98),i=n(74),o=n(6),s=n(21),a=n(7),u=n(0),c=new i(function(t){var e=function(t){return t.reduce(function(t,e){return t[e.className]=t[e.className]||[],t[e.className].push(e),t},{})}(t.map(r.fromRawTask));u.forIn(e,function(t,e){s.allSettled(e.map(function(t){return t.initialize()})).then(function(){e.forEach(function(t){o.all([t.hydrate(),t.insertIntoDom()]).then(a(t.render,t)).then(a(t.success,t),a(t.fail,t))})})})});t.exports={addWidget:function(t){return c.add(t)}}},function(t,e,n){var r=n(17);t.exports=function(t){return r.write(function(){t&&t.parentNode&&t.parentNode.removeChild(t)})}},function(t,e,n){n(12),t.exports={log:function(t,e){}}},function(t,e,n){var r=n(1);function i(t){return(t=t||r).getSelection&&t.getSelection()}t.exports={getSelection:i,getSelectedText:function(t){var e=i(t);return e?e.toString():\"\"}}},function(t,e,n){var r=n(5),i=n(1),o=n(2),s=2e4;t.exports=function(t){var e=new o,n=r.createElement(\"img\");return n.onload=n.onerror=function(){i.setTimeout(e.resolve,50)},n.src=t,i.setTimeout(e.reject,s),e.promise}},function(t,e,n){var r=n(108);t.exports=function(t){t.define(\"createElement\",r),t.define(\"createFragment\",r),t.define(\"htmlToElement\",r),t.define(\"hasSelectedText\",r),t.define(\"addRootClass\",r),t.define(\"removeRootClass\",r),t.define(\"hasRootClass\",r),t.define(\"prependStyleSheet\",r),t.define(\"appendStyleSheet\",r),t.define(\"prependCss\",r),t.define(\"appendCss\",r),t.define(\"makeVisible\",r),t.define(\"injectWidgetEl\",r),t.define(\"matchHeightToContent\",r),t.define(\"matchWidthToContent\",r)}},function(t,e){t.exports=function(t){var e,n=!1;return function(){return n?e😦n=!0,e=t.apply(this,arguments))}}},function(t,e,n){var r=n(15),i=n(117),o=n(57);t.exports=function(t,e,n){return new r(i,o,\"twitter-dm-button\",t,e,n)}},function(t,e,n){var r=n(58),i=n(24);t.exports=r.isSupported()?r:i},function(t,e,n){var r=n(25),i=n(118);t.exports=r.build([i])},function(t,e,n){var r=n(15),i=n(121),o=n(60);t.exports=function(t,e,n){return new r(i,o,\"twitter-follow-button\",t,e,n)}},function(t,e,n){var r=n(25),i=n(122);t.exports=r.build([i])},function(t,e,n){var r=n(15),i=n(129),o=n(24);t.exports=function(t,e,n){return new r(i,o,\"twitter-moment\",t,e,n)}},function(t,e,n){var r=n(15),i=n(131),o=n(24);t.exports=function(t,e,n){return new r(i,o,\"periscope-on-air\",t,e,n)}},function(t,e,n){var r=n(80),i=n(133),o=n(137),s=n(139),a=n(141),u=n(143),c={collection:i,event😮,likes😒,list:a,profile:u,url:l},d😦u,s,i,a,o];function l(t){return r(d,function(e){try{return new e(t)}catch(t){}})}t.exports=function(t){return t?function(t){var e,n;return e😦t.sourceType+\"\").toLowerCase(),(n=c[e])?new n(t):null}(t)||l(t):null}},function(t,e,n){var r=n(15),i=n(145),o=n(24);t.exports=function(t,e,n){return new r(i,o,\"twitter-timeline\",t,e,n)}},function(t,e,n){var r=n(15),i=n(147),o=n(57);t.exports=function(t,e,n){return new r(i,o,\"twitter-tweet\",t,e,n)}},function(t,e,n){var r=n(15),i=n(149),o=n(60);t.exports=function(t,e,n){var s=t&&t.type||\"share\";return new r(i,o,\"hashtag\"==s?\"twitter-hashtag-button\":\"mention\"==s?\"twitter-mention-button\":\"twitter-share-button\",t,e,n)}},function(t,e,n){var r=n(36),i=n(35),o=n(0);t.exports=function(t){var e={widget_origin:i.rootDocumentLocation(),widget_frame:i.isFramed()?i.currentDocumentLocation():null,duration_ms:t.duration,item_ids:t.widgetIds||[]},n😮.aug(t.namespace,{page:\"page\",component:\"performance\"});r.scribe(n,e)}},function(t,e,n){var r=n(0),i=n(134),o😦\"ar\",\"fa\",\"he\",\"ur\"];t.exports={isRtlLang:function(t){return t=String(t).toLowerCase(),r.contains(o,t)},matchLanguage:function(t){return t😦t😦t||\"\").toLowerCase()).replace(\"_\",\"-\"),i(t)?t😦t=t.replace(/-.*/,\"\"),i(t)?t:\"en\")}}},function(t,e,n){var r=n(110),i=n(113);function o(t){return r.settingsLoaded().then(function(e){return e[t]})}function s(){return o(\"experiments\")}t.exports={shouldObtainCookieConsent:function(){return o(\"shouldObtainCookieConsent\")},getExperiments😒,getExperiment:function(t){return s().then(function(e){if(!e[t])throw new Error(\"Experiment not found\");return e[t]})},getActiveExperimentDataString:function(){return s().then(function(t){var e=Object.keys(t).reduce(function(e,n){var r;return t[n].version&&(r=n.split(\"_\").slice(-1)[0],e.push(r+\";\"+t[n].bucket)),e},[]);return i(e.join(\",\"))})},getExperimentKeys:function(){return s().then(function(t){return Object.keys(t)})},load:function(){r.load()}}},function(t){t.exports={tweetButtonHtmlPath:\"/widgets/tweet_button.d753e00c3e838c1b2558149bd3f6ecb8.{{lang}}.html\",followButtonHtmlPath:\"/widgets/follow_button.d753e00c3e838c1b2558149bd3f6ecb8.{{lang}}.html\",hubHtmlPath:\"/widgets/hub.html\",widgetIframeHtmlPath:\"/widgets/widget_iframe.d753e00c3e838c1b2558149bd3f6ecb8.html\",resourceBaseUrl:\"https://platform.twitter.com\"}},function(t,e,n){var r=n(3),i=n(95),o=n(23),s=n(11),a={favorite😦\"favorite\",\"like\"],follow😦\"follow\"],like😦\"favorite\",\"like\"],retweet😦\"retweet\"],tweet😦\"tweet\"]};function u(t){this.srcEl😦],this.element=t}u.open=function(t,e,n){var u😦r.intentType(t)||\"\").toLowerCase();r.isTwitterURL(t)&&(function(t,e){i.open(t,{},e)}(t,n),e&&o.trigger(\"click\",{target:e,region:\"intent\",type:\"click\",data:{}}),e&&a[u]&&a[u].forEach(function(n){o.trigger(n,{target:e,region:\"intent\",type:n,data:function(t,e){var n😒.decodeURL(e);switch(t){case\"favorite\":case\"like\":return{tweet_id:n.tweet_id};case\"follow\":return{screen_name:n.screen_name,user_id:n.user_id};case\"retweet\":return{source_tweet_id:n.tweet_id};default:return{}}}(u,t)})}))},t.exports=u},function(t,e){t.exports={getTimezoneOffset:function(){var t😦new Date).toString().match(/(GMT[+-]?\\d+)/);return t&&t[0]||\"GMT\"}}},function(t,e,n){var r=n(5),i=n(9),o=n(2),s=n(0),a=n(11),u=\"cb\",c😮;t.exports={fetch:function(t,e,n,d){var l,f,h;return d=function(t){if(t)return t.replace(/[^\\w$]/g,\"_\")}(d||u+c++),l=i.fullPath([\"callbacks\",d]),f=r.createElement(\"script\"),h=new o,e😒.aug({},e,{callback:l,suppress_response_codes:!0}),i.set([\"callbacks\",d],function(t){var e;t😦e=n(t||!1)).resp,e.success?h.resolve(t):h.reject(t),f.onload=f.onreadystatechange=null,f.parentNode&&f.parentNode.removeChild(f),i.unset([\"callbacks\",d])}),f.onerror=function(){h.reject(new Error(\"failed to fetch \"+f.src))},f.src=a.url(t,e),f.async=\"async\",r.body.appendChild(f),h.promise}}},function(t,e,n){var r=n(2),i=n(100),o=n(7);function s(t){this._inputsQueue😦],this._task=t,this._hasFlushBeenScheduled=!1}s.prototype.add=function(t){var e=new r;return this._inputsQueue.push({input:t,taskDoneDeferred:e}),this._hasFlushBeenScheduled||(this._hasFlushBeenScheduled=!0,i(o(this._flush,this))),e.promise},s.prototype._flush=function(){try{this._task.call(null,this._inputsQueue)}catch(t){this._inputsQueue.forEach(function(e){e.taskDoneDeferred.reject(t)})}this._inputsQueue😦],this._hasFlushBeenScheduled=!1},t.exports😒},function(t,e){t.exports=function(t,e){return t.reduce(function(t,n){var r=e(n);return t[r]=t[r]||[],t[r].push(n),t},{})}},function(t,e,n){var r=n(5),i=n(😎,o=n(3);function s(t,e){var n,r;return e=e||i,/^https?😕/\\//.test(t)?t😕^\\/\\//.test(t)?e.protocol+t😦n=e.host+(e.port.length?\":\"+e.port:\"\"),0!==t.indexOf(\"/\")&&((r=e.pathname.split(\"/\")).pop(),r.push(t),t=\"/\"+r.join(\"/\")),[e.protocol,\"//\",n,t].join(\"\"))}t.exports={absolutize😒,getCanonicalURL:function(){for(var t,e=r.getElementsByTagName(\"link\"),n😮;e[n];n++)if(\"canonical\"==(t=e[n]).rel)return s(t.href)},getScreenNameFromPage:function(){for(var t,e,n,i😦r.getElementsByTagName(\"a\"),r.getElementsByTagName(\"link\")],s😮,a😮,u😕\\bme\\b/;t=i[s];s++)for(a😮;e=t[a];a++)if(u.test(e.rel)&&(n😮.screenName(e.href)))return n}}},function(t,e,n){var r=n(😎,i😕^[^#?]*\\.(gov|mil)(😕d+)?([#?].*)?$/i,o={};function s(t){return t in o?o[t]😮[t]=i.test(t)}t.exports={isUrlSensitive😒,isHostPageSensitive:function(){return s(r.host)}}},function(t,e,n){var r=n(19),i=n(51),o=n(11),s=n(33),a=n(0),u=n(9).get(\"scribeCallback\"),c=2083,d😦],l😮.url(s.CLIENT_EVENT_ENDPOINT,{dnt😮,l:\"\"}),f=encodeURIComponent(l).length;function h(t,e,n,r){var i=!a.isObject(t),o=!!e&&!a.isObject(e);i||o||(u&&u(arguments),p(s.formatClientEventNamespace(t),s.formatClientEventData(e,n,r),s.CLIENT_EVENT_ENDPOINT))}function p(t,e,n){var r,u;n&&a.isObject(t)&&a.isObject(e)&&(i.log(t,e),r😒.flattenClientEventPayload(t,e),u={l😒.stringify(r)},s.noticeSeen(t)&&(u.notice_seen=!0),r.dnt&&(u.dnt=1),w(o.url(n,u)))}function m(t,e,n,r){var i=!a.isObject(t),o=!!e&&!a.isObject(e);if(!i&&!o)return v(s.flattenClientEventPayload(s.formatClientEventNamespace(t),s.formatClientEventData(e,n,r)))}function v(t){return d.push(t),d}function g(t){return encodeURIComponent(t).length+3}function w(t){return(new Image).src=t}t.exports={canFlushOneItem:function(t){var e=g(s.stringify(t));return f+e<c},_enqueueRawObject:v,scribe😛,clientEvent:h,clientEvent2:function(t,e,n){return h(t,e,n,2)},enqueueClientEvent:m,flushClientEvents:function(){var t;return d.length>1&&m({page:\"widgets_js\",component:\"scribe_pixel\",action:\"batch_log\"},{}),t😛,d😦],t.reduce(function(e,n,r){var i=e.length,o=i&&e[i-1];return r+1==t.length&&n.event_namespace&&\"batch_log\"==n.event_namespace.action&&(n.message😦\"entries:\"+r,\"requests:\"+i].join(\"/\")),function t(e){return Array.isArray(e)||(e😦e]),e.reduce(function(e,n){var r,i😒.stringify(n),o=g(i);return f+o<c?e=e.concat(i)😦r😒.splitLogEntry(n)).length>1&&(e=e.concat(t(r))),e},[])}(n).forEach(function(t){var n=g(t);(!o||o.urlLength+n>c)&&(o={urlLength:f,items😦]},e.push(o)),o.urlLength+=n,o.items.push(t)}),e},[]).map(function(t){var e={l:t.items};return r.enabled()&&(e.dnt=1),w(o.url(s.CLIENT_EVENT_ENDPOINT,e))})},interaction:function(t,e,n,r){var i😒.extractTermsFromDOM(t.target||t.srcElement);i.action=r||\"click\",h(i,e,n)}}},function(t,e,n){var r=n(0),i=n(40);t.exports=function(t,e){return i(t,e)?[t]:r.toRealArray(t.querySelectorAll(e))}},function(t,e){t.exports=function(t,e,n){for(var r,i😮;i<t.length;i++)if(r=e.call(n,t[i],i,t))return r}},function(t,e){t.exports=function(){return Math.floor(+new Date/9e5)}},function(t,e,n){var r=n(12);t.exports=function(t){var e,n;return e=t.headers&&t.headers.status,!(n=t&&!t.error&&200===e)&&t.headers&&t.headers.message&&r.publicError(t.headers.message),{success:n,resp:t}}},function(t,e,n){var r,i=n(28),o😮;function s(){r&&r.length===o&&(i.emitter.trigger(i.ALL_WIDGETS_AND_IMAGES_LOADED,r),r=null)}i.emitter.bind(i.ALL_WIDGETS_RENDER_END,function(t){r=t.widgets,s()}),t.exports={reportImagesLoadForAWidget:function(){o++,s()}}},,,,,,,,function(t,e,n){var r,i=n(2),o=n(5),s=n(93),a=n(46),u=n(9),c=n(94),d=n(23),l=n(97),f=n(150),h=n(158),p=n(159),m=n(28);n(160),m.emitter.trigger(m.START),u.set(\"widgets.init\",!0),a.set(\"init\",!0),p(),r=new i,s.exposeReadyPromise(r.promise,a.base,\"_e\"),a.set(\"widgets\",f),a.set(\"widgets.load\",l.load),a.set(\"events\",d),h(function(){r.resolve(a.base),c.attachTo(o),l.loadPage()})},function(t,e){t.exports=navigator},function(t,e,n){var r=n(7);t.exports={exposeReadyPromise:function(t,e,n){e.ready=r(t.then,t),n&&Array.isArray(e[n])&&(e[n].forEach(r(t.then,t)),delete e[n])}}},function(t,e,n){var r=n(😎,i=n(34),o=n(31),s=n(71),a=n(3);function u(t){var e,n,u;t.altKey||t.metaKey||t.shiftKey||(e😮.closest(function(t){return\"A\"===t.tagName||\"AREA\"===t.tagName},t.target))&&a.isIntentURL(e.href)&&(n😦n😦n😦u=e.href,\"original_referer=\"+r.href].join(-1==u.indexOf(\"?\")?\"?\":\"&\")).replace(/^http[😃/,\"https:\")).replace(/^\\/\\//,\"https://\"),s.open(n,e),i.preventDefault(t))}t.exports={attachTo:function(t){t.addEventListener(\"click\",u,!1)}}},function(t,e,n){var r,i=n(1),o=n(96),s=n(34),a=n(31),u=n(20),c=n(3),d=n(22),l=n(0),f=\"intent_\",h=i.screen.width,p=i.screen.height;function m(t,e){function n(t){return Math.round(t/2)}return t>e?{coordinate😮,size:e}:{coordinate:n(e)-n(t),size:t}}function v(t,e,n){var i,o;e=r.parse(e),n=n||{},i=m(e.width,n.width||h),e.left=i.coordinate,e.width=i.size,o=m(e.height,n.height||p),e.top😮.coordinate,e.height😮.size,this.win=t,this.features=function(t){var e😦];return l.forIn(t,function(t,n){e.push(t+\"=\"+n)}),e.join(\",\")}(e)}r😦new o).defaults({width:550,height:520,personalbar:\"0\",toolbar:\"0\",location:\"1\",scrollbars:\"1\",resizable:\"1\"}),v.prototype.open=function(t,e){var n=e&&\"click\"==e.type&&a.closest(\"a\",e.target),r=e&&(e.altKey||e.metaKey||e.shiftKey),i=n&&(u.ios()||u.android());if(c.isTwitterURL(t))return r||i?this😦this.name=f+d.generate(),this.popup=this.win.open(t,this.name,this.features),e&&s.preventDefault(e),this)},v.open=function(t,e,n){return new v(i,e).open(t,n)},t.exports=v},function(t,e,n){var r=n(4),i=n(0);function o(){this.assertions😦],this._defaults={}}o.prototype.assert=function(t,e){return this.assertions.push({fn:t,msg:e||\"assertion failed\"}),this},o.prototype.defaults=function(t){return this._defaults=t||this._defaults,this},o.prototype.require=function(t){var e=this;return(t=Array.isArray(t)?t:i.toRealArray(arguments)).forEach(function(t){e.assert(function(t){return function(e){return r.hasValue(e[t])}}(t),\"required: \"+t)}),this},o.prototype.parse=function(t){var e,n;if(e=i.aug({},this._defaults,t||{}),(n=this.assertions.reduce(function(t,n){return n.fn(e)||t.push(n.msg),t},[])).length>0)throw new Error(n.join(\"\\n\"));return e},t.exports😮},function(t,e,n){var r=n(5),i=n(6),o=n(21),s=n(49),a=n(32),u=n(9),c=n(36),d=n(23),l=n(4),f=n(0),h=n(69),p=n(114),m=n(28);function v(){var t=a.val(\"widgets:autoload\")||!0;return!l.isFalseValue(t)&&(l.isTruthValue(t)?r.body:r.querySelectorAll(t))}function g(t){var e,n;return t😦t=t||r.body).length?f.toRealArray(t)😦t],c.pause(),n=t.reduce(function(t,e){return t.concat(p.reduce(function(t,n){return t.concat(n(e))},[]))},[]),m.emitter.trigger(m.ALL_WIDGETS_RENDER_START,{widgets:n}),e😮.allResolved(n.map(function(t){return s.addWidget(t)})).then(function(t){d.trigger(\"loaded\",{widgets:t}),t&&t.length&&m.emitter.trigger(m.ALL_WIDGETS_RENDER_END,{widgets:t})}),o.always(e,function(){c.resume()}),e}t.exports={load:g,loadPage:function(){var t=v();return h.load(),!1===t?i.resolve()😦u.set(\"widgets.loaded\",!0),g(t))},_getPageLoadTarget:v}},function(t,e,n){var r=n(10),i=n(17),o=n(23),s=n(50),a=n(6),u=n(21);function c(t,e){this._widget=null,this._sandbox=null,this._hydrated=!1,this._insertedIntoDom=!1,this._Sandbox=t.Sandbox,this._factory=t.factory,this._widgetParams=t.parameters,this._resolve=e,this._className=t.className,this._renderedClassName=t.className+\"-rendered\",this._errorClassName=t.className+\"-error\",this._srcEl=t.srcEl,this._targetGlobal=function(t){return(t.srcEl||t.targetEl).ownerDocument.defaultView}(t),this._insertionStrategy=function(e){var n=t.srcEl,r=t.targetEl;n?r.insertBefore(e,n):r.appendChild(e)}}c.fromRawTask=function(t){return new c(t.input,t.taskDoneDeferred.resolve)},c.prototype.initialize=function(){var t=this,e=new this._Sandbox(this._targetGlobal);return this._factory(this._widgetParams,e).then(function(n){return t._widget=n,t._sandbox=e,n})},c.prototype.insertIntoDom=function(){var t=this;return this._widget?this._sandbox.insert(this._widget.id,{class😦this._className,this._renderedClassName].join(\" \")},null,this._insertionStrategy).then(function(){t._insertedIntoDom=!0}):a.reject(new Error(\"cannot insert widget into DOM before it is initialized\"))},c.prototype.hydrate=function(){var t=this;return this._widget?this._widget.hydrate().then(function(){t._hydrated=!0}):a.reject(new Error(\"cannot hydrate widget before it is initialized\"))},c.prototype.render=function(){var t=this;function e(e){return s(t._sandbox.sandboxEl).then(function(){return a.reject(e)})}return this._hydrated?this._insertedIntoDom?t._widget.render(t._sandbox).then(function(){return t._sandbox.onResize(function(){return t._widget.resize().then(function(){o.trigger(\"resize\",{target:t._sandbox.sandboxEl})})}),t._widget.show()}).then(function(){return s(t._srcEl).then(function(){return t._sandbox.sandboxEl})},e):e(new Error(\"cannot render widget before DOM insertion\")):e(new Error(\"cannot render widget before hydration\"))},c.prototype.fail=function(){var t=this;return this._srcEl?u.always(i.write(function(){r.add(t._srcEl,t._errorClassName)}),function(){o.trigger(\"rendered\",{target:t._srcEl}),t._resolve(t._srcEl)})😦t._resolve(),a.resolve())},c.prototype.success=function(){o.trigger(\"rendered\",{target:this._sandbox.sandboxEl}),this._resolve(this._sandbox.sandboxEl)},t.exports=c},function(t,e,n){var r;!function(){\"use strict\";var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)};function o(){this.frames😦],this.lastId😮,this.raf=i,this.batch={hash:{},read😦],write😦],mode:null}}o.prototype.read=function(t,e){var n=this.add(\"read\",t,e),r=n.id;return this.batch.read.push(n.id),\"reading\"===this.batch.mode||this.batch.scheduled?r😦this.scheduleBatch(),r)},o.prototype.write=function(t,e){var n=this.add(\"write\",t,e),r=this.batch.mode,i=n.id;return this.batch.write.push(n.id),\"writing\"===r||\"reading\"===r||this.batch.scheduled?i😦this.scheduleBatch(),i)},o.prototype.defer=function(t,e,n){\"function\"==typeof t&&(n=e,e=t,t=1);var r=this,i=t-1;return this.schedule(i,function(){r.run({fn:e,ctx:n})})},o.prototype.clear=function(t){if(\"function\"==typeof t)return this.clearFrame(t);t=Number(t);var e=this.batch.hash[t];if(e){var n=this.batch[e.type],r=n.indexOf(t);delete this.batch.hash[t],~r&&n.splice(r,1)}},o.prototype.clearFrame=function(t){var e=this.frames.indexOf(t);~e&&this.frames.splice(e,1)},o.prototype.scheduleBatch=function(){var t=this;this.schedule(0,function(){t.batch.scheduled=!1,t.runBatch()}),this.batch.scheduled=!0},o.prototype.uniqueId=function(){return++this.lastId},o.prototype.flush=function(t){for(var e;e=t.shift()😉this.run(this.batch.hash[e])},o.prototype.runBatch=function(){try{this.batch.mode=\"reading\",this.flush(this.batch.read),this.batch.mode=\"writing\",this.flush(this.batch.write),this.batch.mode=null}catch(t){throw this.runBatch(),t}},o.prototype.add=function(t,e,n){var r=this.uniqueId();return this.batch.hash[r]={id:r,fn:e,ctx:n,type:t}},o.prototype.run=function(t){var e=t.ctx||this,n=t.fn;if(delete this.batch.hash[t.id],!this.onError)return n.call(e);try{n.call(e)}catch(t){this.onError(t)}},o.prototype.loop=function(){var t,e=this,n=this.raf,r=!1;function i(){var t=e.frames.shift();e.frames.length?n(i):e.looping=!1,t&&t()}this.looping||(t=setTimeout(function(){r=!0,i()},500),n(function(){r||(clearTimeout(t),i())}),this.looping=!0)},o.prototype.schedule=function(t,e){return this.frames[t]?this.schedule(t+1,e)😦this.loop(),this.frames[t]=e)};var s=new o;void 0!==t&&t.exports?t.exports😒:void 0===(r=function(){return s}.call(e,n,e,t))||(t.exports=r)}()},function(t,e,n){var r=n(45).Promise;t.exports=r._asap},function(t,e,n){var r,i,o,s=n(5),a=n(1),u=n(29),c=n(19),d=n(2),l=n(6),f=n(51),h=n(33),p=n(0),m=n(24),v=n(9).get(\"scribeCallback\"),g=Math.floor(1e3*Math.random())+\"_\",w=\"rufous-frame-\"+g+\"-\",y=\"rufous-form-\"+g+\"-\",b😮,_=!1,E=new d;function x(){var t😮.createElement(\"form\"),e😮.createElement(\"input\"),n😮.createElement(\"input\");return b++,t.action=h.CLIENT_EVENT_ENDPOINT,t.method=\"POST\",t.target=w+b,t.id=y+b,e.type=\"hidden\",e.name=\"dnt\",e.value=c.enabled(),n.type=\"hidden\",n.name=\"tfw_redirect\",n.value=h.RUFOUS_REDIRECT,t.appendChild(e),t.appendChild(n),t}function A(){var t=w+b;return u({id:t,name:t,width😮,height😮,border😮},{display:\"none\"},o.doc)}t.exports={clientEvent:function(t,e,n,i){(function(t,e){var n=!p.isObject(t),r=!!e&&!p.isObject(e),i=n||r;return i})(t,e)||(v&&v(arguments),E.promise.then(function(){!function(t,e){var n,i,s😜.isObject(t)&&p.isObject(e)&&(f.log(t,e),s=h.flattenClientEventPayload(t,e),(n=r.firstChild).value=+(+n.value||s.dnt||0),(i😮.createElement(\"input\")).type=\"hidden\",i.name=\"l\",i.value=h.stringify(s),r.appendChild(i))}(h.formatClientEventNamespace(t),h.formatClientEventData(e,n,i))}))},flush:function(){return E.promise.then(function(){var t;return r.children.length<=2?l.reject()😦t=l.all([o.doc.body.appendChild(r),o.doc.body.appendChild(i)]).then(function(t){var e=t[0],n=t[1];return n.addEventListener(\"load\",function(){!function(t,e){return function(){var n=t.parentNode;n&&(n.removeChild(t),n.removeChild(e))}}(e,n)()}),e.submit(),t}),r=x(),i=A(),t)})},init:function(){return _?E.promise:((o=new m(a)).insert(\"rufous-sandbox\",null,{display:\"none\"},function(t){s.body.appendChild(t)}).then(function(){o.setTitle(\"Twitter analytics iframe\"),r=x(),i=A(),E.resolve([r,i])}),_=!0,E.promise)}}},function(t,e,n){var r=n(0);t.exports=function t(e){var n😦];return e.forEach(function(e){var i=r.isType(\"array\",e)?t(e)😦e];n=n.concat(i)}),n}},function(t,e){t.exports=function(t){return t.filter(function(e,n){return t.indexOf(e)===n})}},function(t,e,n){var r=n(38),i=n(0),o=n(106);function s(){r.apply(this,arguments)}s.prototype=Object.create(r.prototype),i.aug(s.prototype,{factory😮}),t.exports😒},function(t,e,n){var r=n(21),i=n(0),o=n(7);t.exports={before:function(t,e){return function(){var n,i=this,o=arguments;return n=e.apply(this,arguments),r.isPromise(n)?n.then(function(){return t.apply(i,o)}):t.apply(this,arguments)}},after:function(t,e){return function(){var n,i=this,o=arguments;function s(t,e){return r.isPromise(e)?e.then(function(){return t}):t}return n=t.apply(this,arguments),r.isPromise(n)?n.then(function(t){return s(t,e.apply(i,o))})😒(n,e.apply(this,arguments))}},around:function(t,e){return function(){var n=i.toRealArray(arguments);return n.unshift(o(t,this)),e.apply(this,n)}}}},function(t,e,n){var r=n(10),i=n(17),o=n(39),s=n(6),a=n(0);t.exports=function(){var t😮();function e(e){t.apply(this,arguments),Object.defineProperty(this,\"targetGlobal\",{value:e})}return e.prototype=Object.create(t.prototype),a.aug(e.prototype,{id:null,initialized:!1,width😮,height😮,sandboxEl:null,insert:function(){return s.reject()},onResize:function(){},addClass:function(t){var e=this.sandboxEl;return t=Array.isArray(t)?t😦t],i.write(function(){t.forEach(function(t){r.add(e,t)})})},removeClass:function(t){var e=this.sandboxEl;return t=Array.isArray(t)?t😦t],i.write(function(){t.forEach(function(t){r.remove(e,t)})})},styleSelf:function(t){var e=this;return i.write(function(){a.forIn(t,function(t,n){e.sandboxEl.style[t]=n})})}}),e}},function(t,e,n){var r=n(5),i=n(10),o=n(17),s=n(52),a=n(25),u=n(53),c=n(42),d=n(43),l=n(29),f=n(12),h=n(44),p=n(2),m=n(6),v=n(0),g=n(9),w=n(22),y=n(7),b={allowfullscreen:\"true\"},_={position:\"absolute\",visibility:\"hidden\",display:\"block\",width:\"0px\",height:\"0px\",padding:\"0\",border:\"none\"},E={position:\"static\",visibility:\"visible\"},x=\"SandboxRoot\",A=\".SandboxRoot { display: none; }\",T=50;function S(t,e,n,r){return e=v.aug({id:t},b,e),n=v.aug({},_,n),l(e,n,r)}function R(t,e,n,i,s){var a=new p,u=w.generate(),c😒(t,e,n,s);return g.set([\"sandbox\",u],function(){var t=c.contentWindow.document;o.write(function(){t.write(\"<!DOCTYPE html><html><head></head><body></body></html>\")}).then(function(){t.close(),a.resolve(c)})}),c.src😦\"javascript:\",'document.write(\"\");',\"try { window.parent.document; }\",'catch (e) { document.domain=\"'+r.domain+'\"; }',\"window.parent.\"+g.fullPath([\"sandbox\",u])+\"();\"].join(\"\"),c.addEventListener(\"error\",a.reject,!1),o.write(function(){i.parentNode.replaceChild(c,i)}),a.promise}t.exports=a.couple(n(54),function(t){t.overrideProperty(\"id\",{get:function(){return this.sandboxEl&&this.sandboxEl.id}}),t.overrideProperty(\"initialized\",{get:function(){return!!this.win}}),t.overrideProperty(\"width\",{get:function(){return this._width}}),t.overrideProperty(\"height\",{get:function(){return this._height}}),t.overrideProperty(\"sandboxEl\",{get:function(){return this.iframeEl}}),t.defineProperty(\"iframeEl\",{get:function(){return this._iframe}}),t.defineProperty(\"rootEl\",{get:function(){return this.doc&&this.doc.documentElement}}),t.defineProperty(\"widgetEl\",{get:function(){return this.doc&&this.doc.body.firstElementChild}}),t.defineProperty(\"win\",{get:function(){return this.iframeEl&&this.iframeEl.contentWindow}}),t.defineProperty(\"doc\",{get:function(){return this.win&&this.win.document}}),t.define(\"_updateCachedDimensions\",function(){var t=this;return o.read(function(){var e,n=h(t.sandboxEl);\"visible\"==t.sandboxEl.style.visibility?t._width=n.width😦e=h(t.sandboxEl.parentElement).width,t._width=Math.min(n.width,e)),t._height=n.height})}),t.define(\"_setTargetToBlank\",function(){var t=this.createElement(\"base\");t.target=\"_blank\",this.doc.head.appendChild(t)}),t.define(\"_didResize\",function(){var t=this,e=this._resizeHandlers.slice(0);return this._updateCachedDimensions().then(function(){e.forEach(function(e){e(t)})})}),t.define(\"setTitle\",function(t){this.iframeEl.title=t}),t.override(\"createElement\",function(t){return this.doc.createElement(t)}),t.override(\"createFragment\",function(){return this.doc.createDocumentFragment()}),t.override(\"htmlToElement\",function(t){var e;return(e=this.createElement(\"div\")).innerHTML=t,e.firstElementChild}),t.override(\"hasSelectedText\",function(){return!!s.getSelectedText(this.win)}),t.override(\"addRootClass\",function(t){var e=this.rootEl;return t=Array.isArray(t)?t😦t],this.initialized?o.write(function(){t.forEach(function(t){i.add(e,t)})}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"removeRootClass\",function(t){var e=this.rootEl;return t=Array.isArray(t)?t😦t],this.initialized?o.write(function(){t.forEach(function(t){i.remove(e,t)})}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"hasRootClass\",function(t){return i.present(this.rootEl,t)}),t.define(\"addStyleSheet\",function(t,e){var n,r=new p;return this.initialized?((n=this.createElement(\"link\")).type=\"text/css\",n.rel=\"stylesheet\",n.href=t,n.addEventListener(\"load\",r.resolve,!1),n.addEventListener(\"error\",r.reject,!1),o.write(y(e,null,n)).then(function(){return u(t).then(r.resolve,r.reject),r.promise})):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"prependStyleSheet\",function(t){var e=this.doc;return this.addStyleSheet(t,function(t){var n=e.head.firstElementChild;return n?e.head.insertBefore(t,n):e.head.appendChild(t)})}),t.override(\"appendStyleSheet\",function(t){var e=this.doc;return this.addStyleSheet(t,function(t){return e.head.appendChild(t)})}),t.define(\"addCss\",function(t,e){var n;return c.inlineStyle()?((n=this.createElement(\"style\")).type=\"text/css\",n.appendChild(this.doc.createTextNode(t)),o.write(y(e,null,n)))😦f.devError(\"CSP enabled; cannot embed inline styles\"),m.resolve())}),t.override(\"prependCss\",function(t){var e=this.doc;return this.addCss(t,function(t){var n=e.head.firstElementChild;return n?e.head.insertBefore(t,n):e.head.appendChild(t)})}),t.override(\"appendCss\",function(t){var e=this.doc;return this.addCss(t,function(t){return e.head.appendChild(t)})}),t.override(\"makeVisible\",function(){var t=this;return this.styleSelf(E).then(function(){t._updateCachedDimensions()})}),t.override(\"injectWidgetEl\",function(t){var e=this;return this.initialized?this.widgetEl?m.reject(new Error(\"widget already injected\"))😮.write(function(){e.doc.body.appendChild(t)}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"matchHeightToContent\",function(){var t,e=this;return o.read(function(){t=e.widgetEl?h(e.widgetEl).height😮}),o.write(function(){e.sandboxEl.style.height=t+\"px\"}).then(function(){return e._updateCachedDimensions()})}),t.override(\"matchWidthToContent\",function(){var t,e=this;return o.read(function(){t=e.widgetEl?h(e.widgetEl).width😮}),o.write(function(){e.sandboxEl.style.width=t+\"px\"}).then(function(){return e._updateCachedDimensions()})}),t.after(\"initialize\",function(){this._iframe=null,this._width=this._height😮,this._resizeHandlers😦]}),t.override(\"insert\",function(t,e,n,r){var i=this,s=new p,a=this.targetGlobal.document,u😒(t,e,n,a);return o.write(y(r,null,u)),u.addEventListener(\"load\",function(){(function(t){try{t.contentWindow.document}catch(t){return m.reject(t)}return m.resolve(t)})(u).then(null,y(R,null,t,e,n,u,a)).then(s.resolve,s.reject)},!1),u.addEventListener(\"error\",s.reject,!1),s.promise.then(function(t){var e😛(i._didResize,T,i);return i._iframe=t,i.win.addEventListener(\"resize\",e,!1),m.all([i._setTargetToBlank(),i.addRootClass(😆,i.prependCss(A)])})}),t.override(\"onResize\",function(t){this._resizeHandlers.push(t)}),t.after(\"styleSelf\",function(){return this._updateCachedDimensions()})})},function(t,e){t.exports=function(){throw new Error(\"unimplemented method\")}},function(t,e,n){var r=n(2),i=n(7),o=100,s=3e3;function a(t,e){this._inputsQueue😦],this._task=t,this._isPaused=!1,this._flushDelay=e&&e.flushDelay||o,this._pauseLength=e&&e.pauseLength||s,this._flushTimeout=void 0}a.prototype.add=function(t){var e=new r;return this._inputsQueue.push({input:t,taskDoneDeferred:e}),this._scheduleFlush(),e.promise},a.prototype._scheduleFlush=function(){this._isPaused||(clearTimeout(this._flushTimeout),this._flushTimeout=setTimeout(i(this._flush,this),this._flushDelay))},a.prototype._flush=function(){try{this._task.call(null,this._inputsQueue)}catch(t){this._inputsQueue.forEach(function(e){e.taskDoneDeferred.reject(t)})}this._inputsQueue😦],this._flushTimeout=void 0},a.prototype.pause=function(t){clearTimeout(this._flushTimeout),this._isPaused=!0,!t&&this._pauseLength&&setTimeout(i(this.resume,this),this._pauseLength)},a.prototype.resume=function(){this._isPaused=!1,this._scheduleFlush()},t.exports=a},function(t,e,n){var r,i=n(70),o=n(29),s=n(2),a=n(5),u=n(18),c=n(20),d=n(30),l=n(😎,f=n(12),h=n(111),p=n(55),m=n(9),v=n(11),g=n(112),w=n(0),y=n(1),b😛(function(){return new s});function _(t){var e=t||{should_obtain_cookie_consent:!0,experiments:{}};return new g(e.should_obtain_cookie_consent,e.experiments)}t.exports={load:function(){var t,e,n,s;if(c.ie9()||c.ie10()||\"http:\"!==l.protocol&&\"https:\"!==l.protocol)return f.devError(\"Using default settings due to unsupported browser or protocol.\"),r=_(),void b().resolve();t={origin:l.origin},u.settings().indexOf(\"localhost\")>-1&&(t.localSettings=!0),e=v.url(i.resourceBaseUrl+i.widgetIframeHtmlPath,t),n=function(t){var n;if(e.substr(0,t.origin.length)===t.origin)try{(n=\"string\"==typeof t.data?d.parse(t.data):t.data).namespace===h.settings&&(r=_(n.settings),b().resolve())}catch(t){f.devError(t)}},y.addEventListener(\"message\",n),s😮({src:e,title:\"Twitter settings iframe\"},{display:\"none\"}),a.body.appendChild(s)},settingsLoaded:function(){var t,e,n;return t=new s,e=m.get(\"experimentOverride\"),b().promise.then(function(){e&&e.name&&e.assignment&&((n={})[e.name]={bucket:e.assignment},r.experiments=w.aug(r.experiments,n)),t.resolve(r)}).catch(function(e){t.reject(e)}),t.promise}}},function(t,e){t.exports={settings:\"twttr.settings\"}},function(t,e){t.exports=function(t,e){this.shouldObtainCookieConsent=t,this.experiments=e||{}}},function(t,e){t.exports=function(t){return t.split(\"\").map(function(t){return t.charCodeAt(0).toString(16)}).join(\"\")}},function(t,e,n){t.exports😦n(115),n(120),n(128),n(130),n(132),n(146),n(148)]},function(t,e,n){var r=n(11),i=n(4),o=n(0),s=n(13),a=n(14)(),u=n(56),c=\"a.twitter-dm-button\";t.exports=function(t){return a(t,c).map(function(t){return u(function(t){var e=t.getAttribute(\"data-show-screen-name\"),n😒(t),a=t.getAttribute(\"href\"),u=t.getAttribute(\"data-screen-name\"),c=e?i.asBoolean(e):null,d=t.getAttribute(\"data-size\"),l=r.decodeURL(a),f=l.recipient_id,h=t.getAttribute(\"data-text\")||l.text,p=t.getAttribute(\"data-welcome-message-id\")||l.welcomeMessageId;return o.aug(n,{screenName:u,showScreenName:c,size😛,text:h,userId:f,welcomeMessageId😛})}(t),t.parentNode,t)})}},function(t,e,n){var r=n(0);t.exports=function t(e){var n;if(e)return n=e.lang||e.getAttribute(\"data-lang\"),r.isType(\"string\",n)?n:t(e.parentElement)}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return n.e(2).then(function(r){var o;try{o=n(84),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(119),i=n(1),o=n(10),s=n(34),a=n(17),u=n(52),c=n(25),d=n(53),l=n(42),f=n(44),h=n(7),p=n(43),m=n(6),v=n(0),g=50,w={position:\"absolute\",visibility:\"hidden\",display:\"block\",transform:\"rotate(0deg)\"},y={position:\"static\",visibility:\"visible\"},b=\"twitter-widget\",_=\"open\",E=\"SandboxRoot\",x=\".SandboxRoot { display: none; max-height: 10000px; }\";t.exports=c.couple(n(54),function(t){t.defineStatic(\"isSupported\",function(){return!!i.HTMLElement.prototype.attachShadow&&l.inlineStyle()}),t.overrideProperty(\"id\",{get:function(){return this.sandboxEl&&this.sandboxEl.id}}),t.overrideProperty(\"initialized\",{get:function(){return!!this._shadowHost}}),t.overrideProperty(\"width\",{get:function(){return this._width}}),t.overrideProperty(\"height\",{get:function(){return this._height}}),t.overrideProperty(\"sandboxEl\",{get:function(){return this._shadowHost}}),t.define(\"_updateCachedDimensions\",function(){var t=this;return a.read(function(){var e,n=f(t.sandboxEl);\"visible\"==t.sandboxEl.style.visibility?t._width=n.width😦e=f(t.sandboxEl.parentElement).width,t._width=Math.min(n.width,e)),t._height=n.height})}),t.define(\"_didResize\",function(){var t=this,e=this._resizeHandlers.slice(0);return this._updateCachedDimensions().then(function(){e.forEach(function(e){e(t)})})}),t.override(\"createElement\",function(t){return this.targetGlobal.document.createElement(t)}),t.override(\"createFragment\",function(){return this.targetGlobal.document.createDocumentFragment()}),t.override(\"htmlToElement\",function(t){var e;return(e=this.createElement(\"div\")).innerHTML=t,e.firstElementChild}),t.override(\"hasSelectedText\",function(){return!!u.getSelectedText(this.targetGlobal)}),t.override(\"addRootClass\",function(t){var e=this._shadowRootBody;return t=Array.isArray(t)?t😦t],this.initialized?a.write(function(){t.forEach(function(t){o.add(e,t)})}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"removeRootClass\",function(t){var e=this._shadowRootBody;return t=Array.isArray(t)?t😦t],this.initialized?a.write(function(){t.forEach(function(t){o.remove(e,t)})}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"hasRootClass\",function(t){return o.present(this._shadowRootBody,t)}),t.override(\"addStyleSheet\",function(t,e){return this.addCss('@import url(\"'+t+'\");',e).then(function(){return d(t)})}),t.override(\"prependStyleSheet\",function(t){var e=this._shadowRoot;return this.addStyleSheet(t,function(t){var n=e.firstElementChild;return n?e.insertBefore(t,n):e.appendChild(t)})}),t.override(\"appendStyleSheet\",function(t){var e=this._shadowRoot;return this.addStyleSheet(t,function(t){return e.appendChild(t)})}),t.override(\"addCss\",function(t,e){var n;return this.initialized?l.inlineStyle()?((n=this.createElement(\"style\")).type=\"text/css\",n.appendChild(this.targetGlobal.document.createTextNode(t)),a.write(h(e,null,n))):m.resolve():m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"prependCss\",function(t){var e=this._shadowRoot;return this.addCss(t,function(t){var n=e.firstElementChild;return n?e.insertBefore(t,n):e.appendChild(t)})}),t.override(\"appendCss\",function(t){var e=this._shadowRoot;return this.addCss(t,function(t){return e.appendChild(t)})}),t.override(\"makeVisible\",function(){return this.styleSelf(y)}),t.override(\"injectWidgetEl\",function(t){var e=this;return this.initialized?this._shadowRootBody.firstElementChild?m.reject(new Error(\"widget already injected\")):a.write(function(){e._shadowRootBody.appendChild(t)}).then(function(){return e._updateCachedDimensions()}).then(function(){var t😛(e._didResize,g,e);new r(e._shadowRootBody,t)}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"matchHeightToContent\",function(){return m.resolve()}),t.override(\"matchWidthToContent\",function(){return m.resolve()}),t.override(\"insert\",function(t,e,n,r){var i=this.targetGlobal.document,o=this._shadowHost=i.createElement(b),u=this._shadowRoot😮.attachShadow({mode:_}),c=this._shadowRootBody=i.createElement(\"div\");return v.forIn(e||{},function(t,e){o.setAttribute(t,e)}),o.id=t,u.appendChild(c),s.delegate(c,\"click\",\"A\",function(t,e){e.hasAttribute(\"target\")||e.setAttribute(\"target\",\"_blank\")}),m.all([this.styleSelf(w),this.addRootClass(E),this.prependCss(😆,a.write(r.bind(null,o))])}),t.override(\"onResize\",function(t){this._resizeHandlers.push(t)}),t.after(\"initialize\",function(){this._shadowHost=this._shadowRoot=this._shadowRootBody=null,this._width=this._height😮,this._resizeHandlers😦]}),t.after(\"styleSelf\",function(){return this._updateCachedDimensions()})})},function(t,e){var n;(n=function(t,e){function r(t,e){if(t.resizedAttached){if(t.resizedAttached)return void t.resizedAttached.add(e)}else t.resizedAttached=new function(){var t,e;this.q😦],this.add=function(t){this.q.push(t)},this.call=function(){for(t😮,e=this.q.length;t<e;t++)this.q[t].call()}},t.resizedAttached.add(e);t.resizeSensor=document.createElement(\"div\"),t.resizeSensor.className=\"resize-sensor\";var n=\"position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;\",r=\"position: absolute; left: 0; top: 0; transition: 0s;\";t.resizeSensor.style.cssText=n,t.resizeSensor.innerHTML='<div class=\"resize-sensor-expand\" style=\"'+n+'\"><div style=\"'+r+'\"></div></div><div class=\"resize-sensor-shrink\" style=\"'+n+'\"><div style=\"'+r+' width: 200%; height: 200%\"></div></div>',t.appendChild(t.resizeSensor),{fixed:1,absolute:1}[function(t,e){return t.currentStyle?t.currentStyle[e]:window.getComputedStyle?window.getComputedStyle(t,null).getPropertyValue(e):t.style[e]}(t,\"position\")]||(t.style.position=\"relative\");var i,o,s=t.resizeSensor.childNodes[0],a😒.childNodes[0],u=t.resizeSensor.childNodes[1],c😦u.childNodes[0],function(){a.style.width😒.offsetWidth+10+\"px\",a.style.height😒.offsetHeight+10+\"px\",s.scrollLeft😒.scrollWidth,s.scrollTop😒.scrollHeight,u.scrollLeft=u.scrollWidth,u.scrollTop=u.scrollHeight,i=t.offsetWidth,o=t.offsetHeight});c();var d=function(t,e,n){t.attachEvent?t.attachEvent(\"on\"+e,n):t.addEventListener(e,n)},l=function(){t.offsetWidth==i&&t.offsetHeight==o||t.resizedAttached&&t.resizedAttached.call(),c()}😜(s,\"scroll\",l),d(u,\"scroll\",l)}var i=Object.prototype.toString.call(t),o=\"[object Array]\"===i||\"[object NodeList]\"===i||\"[object HTMLCollection]\"===i||\"undefined\"!=typeof jQuery&&t instanceof jQuery||\"undefined\"!=typeof Elements&&t instanceof Elements;if(o)for(var s😮,a=t.length;s<a;s++)r(t[s],e);else r(t,e);this.detach=function(){if(o)for(var e😮,r=t.length;e<r;e++)n.detach(t[e]);else n.detach(t)}}).detach=function(t){t.resizeSensor&&(t.removeChild(t.resizeSensor),delete t.resizeSensor,delete t.resizedAttached)},void 0!==t&&void 0!==t.exports?t.exports=n:window.ResizeSensor=n},function(t,e,n){var r=n(3),i=n(0),o=n(13),s=n(14)(),a=n(59),u=n(4),c=\"a.twitter-follow-button\";t.exports=function(t){return s(t,c).map(function(t){return a(function(t){var e😮(t),n={screenName:r.screenName(t.href),showScreenName:\"false\"!==t.getAttribute(\"data-show-screen-name\"),showCount:\"false\"!==t.getAttribute(\"data-show-count\"),size:t.getAttribute(\"data-size\"),count:t.getAttribute(\"data-count\"),preview:t.getAttribute(\"data-preview\")};return i.forIn(n,function(t,n){var r=e[t];e[t]=u.hasValue(r)?r:n}),e.screenName=e.screenName||e.screen_name,e}(t),t.parentNode,t)})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return n.e(3).then(function(r){var o;try{o=n(85),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(17),i=n(123),o=n(55),s=n(29),a=n(2),u=n(6),c=n(7),d=n(0),l={position:\"absolute\",visibility:\"hidden\",width:\"0px\",height:\"0px\"},f={position:\"static\",visibility:\"visible\"},h={};i(function(t,e,n){var r=h[t];if(r)return e=e||1,n=n||1,r.styleSelf({width:e+\"px\",height:n+\"px\"}).then(function(){r.didResize()})}),t.exports=function(t){t.overrideProperty(\"id\",{get:function(){return this.sandboxEl&&this.sandboxEl.id}}),t.overrideProperty(\"initialized\",{get:function(){return!!this.iframeEl}}),t.overrideProperty(\"width\",{get:function(){return this._width}}),t.overrideProperty(\"height\",{get:function(){return this._height}}),t.overrideProperty(\"sandboxEl\",{get:function(){return this.iframeEl}}),t.defineProperty(\"iframeEl\",{get:function(){return this._iframe}}),t.define(\"updateCachedDimensions\",function(){var t=this;return this.initialized?r.read(function(){t._width=t.sandboxEl.offsetWidth,t._height=t.sandboxEl.offsetHeight}):u.resolve()}),t.define(\"setTitle\",function(t){this.iframeEl.title=t}),t.define(\"makeVisible\",function(){return this.styleSelf(f)}),t.define(\"didResize\",function(){var t=this,e=t._resizeHandlers.length>0;return this.updateCachedDimensions().then(function(){e&&t._resizeHandlers.forEach(function(e){e(t)})})}),t.define(\"loadDocument\",function(t){var e=new a;return this.initialized?this.iframeEl.src?u.reject(new Error(\"widget already loaded\"))😦this.iframeEl.addEventListener(\"load\",e.resolve,!1),this.iframeEl.addEventListener(\"error\",e.reject,!1),this.iframeEl.src=t,e.promise):u.reject(new Error(\"sandbox not initialized\"))}),t.after(\"initialize\",function(){this._iframe=null,this._width=this._height😮,this._resizeHandlers😦]}),t.override(\"insert\",function(t,e,n,i){var a=this;return e😛.aug({id:t},e),n😛.aug({},l,n),this._iframe😒(e,n),h[t]=this,this.onResize(o(function(){a.makeVisible()})),r.write(c(i,null,this._iframe))}),t.override(\"onResize\",function(t){this._resizeHandlers.push(t)}),t.after(\"styleSelf\",function(){return this.updateCachedDimensions()})}},function(t,e,n){var r=n(1),i=n(124),o=n(126),s=n(23),a=n(4),u=n(127);t.exports=function(t){(new i).attachReceiver(new o.Receiver(r,\"twttr.button\")).bind(\"twttr.private.trigger\",function(t,e){var n=u(this);s.trigger(t,{target:n,region:e,type:t,data:{}})}).bind(\"twttr.private.resizeButton\",function(e){var n=u(this),r=n&&n.id,i=a.asInt(e.width),o=a.asInt(e.height);r&&void 0!==i&&void 0!==o&&t(r,i,o)})}},function(t,e,n){var r=n(30),i=n(125),o=n(0),s=n(6),a=n(21),u=\"2.0\";function c(t){this.registry=t||{}}function d(t){var e,n;return e😮.isType(\"string\",t),n😮.isType(\"number\",t),e||n||null===t}function l(t,e){return{jsonrpc:u,id😛(t)?t:null,error:e}}c.prototype._invoke=function(t,e){var n,r,i;n=this.registry[t.method],r=t.params||[],r😮.isType(\"array\",r)?r😦r];try{i=n.apply(e.source||null,r)}catch(t){i😒.reject(t.message)}return a.isPromise(i)?i😒.resolve(i)},c.prototype._processRequest=function(t,e){var n,r;return function(t){var e,n,r;return!!o.isObject(t)&&(e=t.jsonrpc===u,n😮.isType(\"string\",t.method),r=!(\"id\"in t)||d(t.id),e&&n&&r)}(t)?(n=\"params\"in t&&(r=t.params,!o.isObject(r)||o.isType(\"function\",r))?s.resolve(l(t.id,i.INVALID_PARAMS)):this.registry[t.method]?this._invoke(t,{source:e}).then(function(e){return n=t.id,{jsonrpc:u,id:n,result:e};var n},function(){return l(t.id,i.INTERNAL_ERROR)})😒.resolve(l(t.id,i.METHOD_NOT_FOUND)),null!=t.id?n😒.resolve())😒.resolve(l(t.id,i.INVALID_REQUEST))},c.prototype.attachReceiver=function(t){return t.attachTo(this),this},c.prototype.bind=function(t,e){return this.registry[t]=e,this},c.prototype.receive=function(t,e){var n,a,u,c=this;try{u=t,t😮.isType(\"string\",u)?r.parse(u):u}catch(t){return s.resolve(l(null,i.PARSE_ERROR))}return e=e||null,a=((n😮.isType(\"array\",t))?t😦t]).map(function(t){return c._processRequest(t,e)}),n?function(t){return s.all(t).then(function(t){return(t=t.filter(function(t){return void 0!==t})).length?t:void 0})}(a):a[0]},t.exports=c},function(t){t.exports={PARSE_ERROR:{code😶32700,message:\"Parse error\"},INVALID_REQUEST:{code😶32600,message:\"Invalid Request\"},INVALID_PARAMS:{code😶32602,message:\"Invalid params\"},METHOD_NOT_FOUND:{code😶32601,message:\"Method not found\"},INTERNAL_ERROR:{code😶32603,message:\"Internal error\"}}},function(t,e,n){var r=n(😎,i=n(1),o=n(30),s=n(2),a=n(20),u=n(0),c=n(3),d=n(7),l=a.ie9();function f(t,e,n){var r;t&&t.postMessage&&(l?r😦n||\"\")+o.stringify(e):n?(r={})[n]=e:r=e,t.postMessage(r,\"*\"))}function h(t){return u.isType(\"string\",t)?t:\"JSONRPC\"}function p(t,e){return e?u.isType(\"string\",t)&&0===t.indexOf(e)?t.substring(e.length):t&&t[e]?t[e]:void 0:t}function m(t,e){var n=t.document;this.filter=h(e),this.server=null,this.isTwitterFrame=c.isTwitterURL(n.location.href),t.addEventListener(\"message\",d(this._onMessage,this),!1)}function v(t,e){this.pending={},this.target=t,this.isTwitterHost=c.isTwitterURL(r.href),this.filter=h(e),i.addEventListener(\"message\",d(this._onMessage,this),!1)}u.aug(m.prototype,{_onMessage:function(t){var e,n=this;this.server&&(this.isTwitterFrame&&!c.isTwitterURL(t.origin)||(e😛(t.data,this.filter))&&this.server.receive(e,t.source).then(function(e){e&&f(t.source,e,n.filter)}))},attachTo:function(t){this.server=t},detach:function(){this.server=null}}),u.aug(v.prototype,{_processResponse:function(t){var e=this.pending[t.id];e&&(e.resolve(t),delete this.pending[t.id])},_onMessage:function(t){var e;if((!this.isTwitterHost||c.isTwitterURL(t.origin))&&(e😛(t.data,this.filter))){if(u.isType(\"string\",e))try{e😮.parse(e)}catch(t){return}(e=u.isType(\"array\",e)?e😦e]).forEach(d(this._processResponse,this))}},send:function(t){var e=new s;return t.id?this.pending[t.id]=e:e.resolve(),f(this.target,t,this.filter),e.promise}}),t.exports={Receiver:m,Dispatcher:v,_stringifyPayload:function(t){return arguments.length>0&&(l=!!t),l}}},function(t,e,n){var r=n(5);t.exports=function(t){for(var e,n=r.getElementsByTagName(\"iframe\"),i😮;n[i];i++)if((e=n[i]).contentWindow===t)return e}},function(t,e,n){var r=n(4),i=n(0),o=n(3),s=n(13),a=n(14)(),u=n(61),c=\"a.twitter-moment\";t.exports=function(t){return a(t,c).map(function(t){return u(function(t){var e😒(t),n={momentId😮.momentId(t.href),chrome:t.getAttribute(\"data-chrome\"),limit:t.getAttribute(\"data-limit\")};return i.forIn(n,function(t,n){var i=e[t];e[t]=r.hasValue(i)?i:n}),e}(t),t.parentNode,t)})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return Promise.all([n.e(0),n.e(4)]).then(function(r){var o;try{o=n(86),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(0),i=n(13),o=n(14)(),s=n(62),a=\"a.periscope-on-air\",u😕^https?😕/\\/(?:www\\.)?(?:periscope|pscp)\\.tv\\/@?([a-zA-Z0-9_]+)\\/?$/i;t.exports=function(t){return o(t,a).map(function(t){return s(function(t){var e=i(t),n=t.getAttribute(\"href\"),o=t.getAttribute(\"data-size\"),s=u.exec(n)[1];return r.aug(e,{username😒,size😮})}(t),t.parentNode,t)})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return n.e(5).then(function(r){var o;try{o=n(87),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(4),i=n(0),o=n(63),s=n(13),a=n(14)(),u=n(64),c=n(3),d=n(12),l=\"a.twitter-timeline,div.twitter-timeline,a.twitter-grid\",f=\"Embedded Search timelines have been deprecated. See https://twittercommunity.com/t/deprecating-widget-settings/102295.\",h=\"You may have been affected by an update to settings in embedded timelines. See https://twittercommunity.com/t/deprecating-widget-settings/102295.\",p=\"Embedded grids have been deprecated and will now render as timelines. Please update your embed code to use the twitter-timeline class. More info: https://twittercommunity.com/t/update-on-the-embedded-grid-display-type/119564.\";t.exports=function(t){return a(t,l).map(function(t){return u(function(t){var e😒(t),n=t.getAttribute(\"data-show-replies\"),a={isPreconfigured:!!t.getAttribute(\"data-widget-id\"),chrome:t.getAttribute(\"data-chrome\"),tweetLimit:t.getAttribute(\"data-tweet-limit\")||t.getAttribute(\"data-limit\"),ariaLive:t.getAttribute(\"data-aria-polite\"),theme:t.getAttribute(\"data-theme\"),linkColor:t.getAttribute(\"data-link-color\"),borderColor:t.getAttribute(\"data-border-color\"),showReplies:n?r.asBoolean(n):null,profileScreenName:t.getAttribute(\"data-screen-name\"),profileUserId:t.getAttribute(\"data-user-id\"),favoritesScreenName:t.getAttribute(\"data-favorites-screen-name\"),favoritesUserId:t.getAttribute(\"data-favorites-user-id\"),likesScreenName:t.getAttribute(\"data-likes-screen-name\"),likesUserId:t.getAttribute(\"data-likes-user-id\"),listOwnerScreenName:t.getAttribute(\"data-list-owner-screen-name\"),listOwnerUserId:t.getAttribute(\"data-list-owner-id\"),listId:t.getAttribute(\"data-list-id\"),listSlug:t.getAttribute(\"data-list-slug\"),customTimelineId:t.getAttribute(\"data-custom-timeline-id\"),staticContent:t.getAttribute(\"data-static-content\"),url:t.href};return a.isPreconfigured&&(c.isSearchUrl(a.url)?d.publicError(f,t)😛.publicLog(h,t)),\"twitter-grid\"===t.className&&d.publicLog(p,t),(a=i.aug(a,e)).dataSource😮(a),a.id=a.dataSource&&a.dataSource.id,a}(t),t.parentNode,t)})}},function(t,e,n){var r=n(26);t.exports=r.build([n(27),n(136)])},function(t,e,n){var r=n(0),i=n(135);t.exports=function(t){return\"en\"===t||r.contains(i,t)}},function(t,e){t.exports😦\"hi\",\"zh-cn\",\"fr\",\"zh-tw\",\"msa\",\"fil\",\"fi\",\"sv\",\"pl\",\"ja\",\"ko\",\"de\",\"it\",\"pt\",\"es\",\"ru\",\"id\",\"tr\",\"da\",\"no\",\"nl\",\"hu\",\"fa\",\"ar\",\"ur\",\"he\",\"th\",\"cs\",\"uk\",\"vi\",\"ro\",\"bn\",\"el\",\"en-gb\",\"gu\",\"kn\",\"mr\",\"ta\",\"bg\",\"ca\",\"hr\",\"sr\",\"sk\"]},function(t,e,n){var r=n(3),i=n(0),o=n(18),s=\"collection:\";function a(t,e){return r.collectionId(t)||e}t.exports=function(t){t.params({id:{},url:{}}),t.overrideProperty(\"id\",{get:function(){var t=a(this.params.url,this.params.id);return s+t}}),t.overrideProperty(\"endpoint\",{get:function(){return o.timeline([\"collection\"])}}),t.around(\"queryParams\",function(t){return i.aug(t(),{collection_id:a(this.params.url,this.params.id)})}),t.before(\"initialize\",function(){if(!a(this.params.url,this.params.id))throw new Error(\"one of url or id is required\")})}},function(t,e,n){var r=n(26);t.exports=r.build([n(27),n(138)])},function(t,e,n){var r=n(3),i=n(0),o=n(18),s=\"event:\";function a(t,e){return r.eventId(t)||e}t.exports=function(t){t.params({id:{},url:{}}),t.overrideProperty(\"id\",{get:function(){var t=a(this.params.url,this.params.id);return s+t}}),t.overrideProperty(\"endpoint\",{get:function(){return o.timeline([\"event\"])}}),t.around(\"queryParams\",function(t){return i.aug(t(),{event_id:a(this.params.url,this.params.id)})}),t.before(\"initialize\",function(){if(!a(this.params.url,this.params.id))throw new Error(\"one of url or id is required\")})}},function(t,e,n){var r=n(26);t.exports=r.build([n(27),n(140)])},function(t,e,n){var r=n(3),i=n(0),o=n(18),s=\"likes:\";function a(t){return r.likesScreenName(t.url)||t.screenName}t.exports=function(t){t.params({screenName:{},userId:{},url:{}}),t.overrideProperty(\"id\",{get:function(){var t=a(this.params)||this.params.userId;return s+t}}),t.overrideProperty(\"endpoint\",{get:function(){return o.timeline([\"likes\"])}}),t.define(\"_getLikesQueryParam\",function(){var t=a(this.params);return t?{screen_name:t}:{user_id:this.params.userId}}),t.around(\"queryParams\",function(t){return i.aug(t(),this._getLikesQueryParam())}),t.before(\"initialize\",function(){if(!a(this.params)&&!this.params.userId)throw new Error(\"screen name or user id is required\")})}},function(t,e,n){var r=n(26);t.exports=r.build([n(27),n(142)])},function(t,e,n){var r=n(3),i=n(0),o=n(18),s=\"list:\";function a(t){var e=r.listScreenNameAndSlug(t.url)||t;return i.compact({screen_name:e.ownerScreenName,user_id:e.ownerUserId,list_slug:e.slug})}t.exports=function(t){t.params({id:{},ownerScreenName:{},ownerUserId:{},slug:{},url:{}}),t.overrideProperty(\"id\",{get:function(){var t,e,n;return this.params.id?s+this.params.id😦e😦t=a(this.params))&&t.list_slug.replace(/-/g,\"_\"),n=t&&(t.screen_name||t.user_id),s+(n+\"😊+e)}}),t.overrideProperty(\"endpoint\",{get:function(){return o.timeline([\"list\"])}}),t.define(\"_getListQueryParam\",function(){return this.params.id?{list_id:this.params.id}:a(this.params)}),t.around(\"queryParams\",function(t){return i.aug(t(),this._getListQueryParam())}),t.before(\"initialize\",function(){var t=a(this.params);if(i.isEmptyObject(t)&&!this.params.id)throw new Error(\"qualified slug or list id required\")})}},function(t,e,n){var r=n(26);t.exports=r.build([n(27),n(144)])},function(t,e,n){var r=n(3),i=n(4),o=n(0),s=n(18),a=\"profile:\";function u(t,e){return r.screenName(t)||e}t.exports=function(t){t.params({showReplies:{fallback:!1,transform:i.asBoolean},screenName:{},userId:{},url:{}}),t.overrideProperty(\"id\",{get:function(){var t=u(this.params.url,this.params.screenName);return a+(t||this.params.userId)}}),t.overrideProperty(\"endpoint\",{get:function(){return s.timeline([\"profile\"])}}),t.define(\"_getProfileQueryParam\",function(){var t=u(this.params.url,this.params.screenName),e=t?{screen_name:t}:{user_id:this.params.userId};return o.aug(e,{with_replies:this.params.showReplies?\"true\":\"false\"})}),t.around(\"queryParams\",function(t){return o.aug(t(),this._getProfileQueryParam())}),t.before(\"initialize\",function(){if(!u(this.params.url,this.params.screenName)&&!this.params.userId)throw new Error(\"screen name or user id is required\")})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return Promise.all([n.e(0),n.e(6)]).then(function(r){var o;try{o=n(88),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(10),i=n(3),o=n(0),s=n(13),a=n(14)(),u=n(65),c=\"blockquote.twitter-tweet, blockquote.twitter-video\",d😕\\btw-align-(left|right|center)\\b/;t.exports=function(t){return a(t,c).map(function(t){return u(function(t){var e😒(t),n=t.getElementsByTagName(\"A\"),a=n&&n[n.length-1],u=a&&i.status(a.href),c=t.getAttribute(\"data-conversation\"),l=\"none\"==c||\"hidden\"==c||r.present(t,\"tw-hide-thread\"),f=t.getAttribute(\"data-cards\"),h=\"none\"==f||\"hidden\"==f||r.present(t,\"tw-hide-media\"),p=t.getAttribute(\"data-align\")||t.getAttribute(\"align\"),m=t.getAttribute(\"data-link-color\"),v=t.getAttribute(\"data-theme\");return!p&&d.test(t.className)&&(p=RegExp.$1),o.aug(e,{tweetId:u,hideThread:l,hideCard:h,align😛,linkColor:m,theme:v,id:u})}(t),t.parentNode,t)})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return Promise.all([n.e(0),n.e(7)]).then(function(r){var o;try{o=n(89),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(10),i=n(0),o=n(13),s=n(14)(),a=n(66),u=n(4),c=\"a.twitter-share-button, a.twitter-mention-button, a.twitter-hashtag-button\",d=\"twitter-hashtag-button\",l=\"twitter-mention-button\";t.exports=function(t){return s(t,c).map(function(t){return a(function(t){var e😮(t),n={screenName:t.getAttribute(\"data-button-screen-name\"),text:t.getAttribute(\"data-text\"),type:t.getAttribute(\"data-type\"),size:t.getAttribute(\"data-size\"),url:t.getAttribute(\"data-url\"),hashtags:t.getAttribute(\"data-hashtags\"),via:t.getAttribute(\"data-via\"),buttonHashtag:t.getAttribute(\"data-button-hashtag\")};return i.forIn(n,function(t,n){var r=e[t];e[t]=u.hasValue(r)?r:n}),e.screenName=e.screenName||e.screen_name,e.buttonHashtag=e.buttonHashtag||e.button_hashtag||e.hashtag,r.present(t,d)&&(e.type=\"hashtag\"),r.present(t,l)&&(e.type=\"mention\"),e}(t),t.parentNode,t)})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return n.e(3).then(function(r){var o;try{o=n(90),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(0);t.exports=r.aug({},n(151),n(152),n(153),n(154),n(155),n(156),n(157))},function(t,e,n){var r=n(56),i=n(16)([\"userId\"],{},r);t.exports={createDMButton:i}},function(t,e,n){var r=n(59),i=n(16)([\"screenName\"],{},r);t.exports={createFollowButton:i}},function(t,e,n){var r=n(61),i=n(16)([\"momentId\"],{},r);t.exports={createMoment:i}},function(t,e,n){var r=n(62),i=n(16)([\"username\"],{},r);t.exports={createPeriscopeOnAirButton:i}},function(t,e,n){var r=n(😎,i=n(12),o=n(3),s=n(0),a=n(4),u=n(63),c=n(64),d=n(16)([],{},c),l=n(6),f=\"Embedded grids have been deprecated. Please use twttr.widgets.createTimeline instead. More info: https://twittercommunity.com/t/update-on-the-embedded-grid-display-type/119564.\",h={createTimeline😛,createGridFromCollection:function(t){var e😒.toRealArray(arguments).slice(1),n={sourceType:\"collection\",id:t};return e.unshift(n),i.publicLog(f),p.apply(this,e)}};function p(t){var e,n😒.toRealArray(arguments).slice(1);return a.isString(t)||a.isNumber(t)?l.reject(\"Embedded timelines with widget settings have been deprecated. See https://twittercommunity.com/t/deprecating-widget-settings/102295.\")😒.isObject(t)?(t=t||{},n.forEach(function(t){s.isType(\"object\",t)&&function(t){t.ariaLive=t.ariaPolite}(e=t)}),e||(e={},n.push(e)),t.lang=e.lang,t.tweetLimit=e.tweetLimit,t.showReplies=e.showReplies,e.dataSource=u(t),d.apply(this,n)):l.reject(\"data source must be an object.\")}o.isTwitterURL(r.href)&&(h.createTimelinePreview=function(t,e,n){var r={previewParams:t,useLegacyDefaults:!0,isPreviewTimeline:!0};return r.dataSource=u(r),d(e,r,n)}),t.exports=h},function(t,e,n){var r,i=n(0),o=n(65),s=n(16),a😦r😒([\"tweetId\"],{},o),function(){return i.toRealArray(arguments).slice(1).forEach(function(t){i.isType(\"object\",t)&&(t.hideCard=\"none\"==t.cards||\"hidden\"==t.cards,t.hideThread=\"none\"==t.conversation||\"hidden\"==t.conversation)}),r.apply(this,arguments)});t.exports={createTweet:a,createTweetEmbed:a,createVideo:a}},function(t,e,n){var r=n(0),i=n(66),o=n(16),s😮([\"url\"],{type:\"share\"},i),a😮([\"buttonHashtag\"],{type:\"hashtag\"},i),u😮([\"screenName\"],{type:\"mention\"},i);function c(t){return function(){return r.toRealArray(arguments).slice(1).forEach(function(t){r.isType(\"object\",t)&&(t.screenName=t.screenName||t.screen_name,t.buttonHashtag=t.buttonHashtag||t.button_hashtag||t.hashtag)}),t.apply(this,arguments)}}t.exports={createShareButton:c(s),createHashtagButton:c(a),createMentionButton:c(u)}},function(t,e,n){var r,i,o,s=n(5),a=n(1),u😮,c😦],d😒.createElement(\"a\");function l(){var t,e;for(u=1,t😮,e=c.length;t<e;t++)c[t]()}/^loade|c/.test(s.readyState)&&(u=1),s.addEventListener&&s.addEventListener(\"DOMContentLoaded\",i=function(){s.removeEventListener(\"DOMContentLoaded\",i,!1),l()},!1),d.doScroll&&s.attachEvent(\"onreadystatechange\",r=function(){/^c/.test(s.readyState)&&(s.detachEvent(\"onreadystatechange\",r),l())}),o😛.doScroll?function(t){a.self!=a.top?u?t():c.push(t):function(){try{d.doScroll(\"left\")}catch(e){return setTimeout(function(){o(t)},50)}t()}()}:function(t){u?t():c.push(t)},t.exports😮},function(t,e,n){var r=n(41),i=n(9);t.exports=function(){i.set(\"buildVersion\",r.version)}},function(t,e,n){n(161),n(83),n(164)},function(t,e,n){var r=n(162),i=n(28),o=n(67),s=new r,a=function(t){t.widgets&&1===t.widgets.length&&(s.start(),i.emitter.unbind(i.ALL_WIDGETS_RENDER_START,a))},u=function(t){var e;t.widgets&&1===t.widgets.length&&(e=t.widgets[0],s.end(),e.dataset&&e.dataset.tweetId&&o({duration😒.duration(),namespace:{element:\"tweet\",action:\"render\"},widgetIds😦e.dataset.tweetId]})),i.emitter.unbind(i.ALL_WIDGETS_RENDER_END,u)};i.emitter.bind(i.ALL_WIDGETS_RENDER_START,a),i.emitter.bind(i.ALL_WIDGETS_RENDER_END,u)},function(t,e,n){var r=n(163);function i(){}i.prototype.start=function(){this._startTime=r()},i.prototype.end=function(){this._duration=r()-this._startTime},i.prototype.duration=function(){return this._duration},t.exports=i},function(t,e,n){var r=n(1);t.exports=function(){return r.performance&&r.performance.now?r.performance.now():Date.now()}},function(t,e,n){var r=n(28),i=n(67),o=n(165),s=n(3),a=n(1),u=n(0),c=n(20),d=n(58);function l(t){return t.performance.getEntriesByType(\"resource\").filter(function(t){return s.isTwimgURL(t.name)||s.isTwitterURL(t.name)}).reduce(function(t,e){return t[e.name]=e.duration,t},{})}r.emitter.bind(r.ALL_WIDGETS_AND_IMAGES_LOADED,function(t){var e,n,r😦];c.hasPerformanceInformation()&&(e=l(a),d.isSupported()||(r=function(t){return t.reduce(function(t,e){return u.aug(t,l(e.contentDocument.defaultView))},{})}(t)),n=u.aug({},e,r),Object.keys(o).forEach(function(t){!function(t,e,n){var r=Object.keys(t).reduce(function(e,r){return n(r)?e+t[r]:e},0);i({duration:r,namespace:{element:e,action:\"resource\"}})}(n,t,o[t])}))})},function(t,e,n){var r=n(3),i={all:function(){return!0},image:function(t){return r.isTwimgURL(t)},settings:function(t){return r.isSettingsURL(t)},widget_iframe:function(t){return r.isWidgetIframeURL(t)}};t.exports=i}])));",
            "</script>",
            "<p>Randomness on the CandyJar level.</p>",
            "<blockquote class=\"twitter-tweet\" data-conversation=\"none\" data-lang=\"en\">",
            "<p lang=\"en\" dir=\"ltr\">",
            "Here we add randomness to the column delay. <a href=\"https://t.co/ZPfQzInXvi\">pic.twitter.com/ZPfQzInXvi</a>",
            "</p>",
            "— Swizec Teller (<span class=\"citation\" data-cites=\"Swizec\">@Swizec</span>) <a href=\"https://twitter.com/Swizec/status/1073285329237401600?ref_src=twsrc%5Etfw\">December 13, 2018</a>",
            "</blockquote>",
            "<p>Randomness on the CandyJar <em>and</em> Candy level.</p>",
            "<blockquote class=\"twitter-tweet\" data-conversation=\"none\" data-lang=\"en\">",
            "<p lang=\"en\" dir=\"ltr\">",
            "Adding a random delay to each individual emoji makes it even better 🧐 <a href=\"https://t.co/Xn49KRbcCy\">pic.twitter.com/Xn49KRbcCy</a>",
            "</p>",
            "— Swizec Teller (<span class=\"citation\" data-cites=\"Swizec\">@Swizec</span>) <a href=\"https://twitter.com/Swizec/status/1073285332555194369?ref_src=twsrc%5Etfw\">December 13, 2018</a>",
            "</blockquote>",
            "<p>Randomness in the start position as well.</p>",
            "<blockquote class=\"twitter-tweet\" data-conversation=\"none\" data-lang=\"en\">",
            "<p lang=\"en\" dir=\"ltr\">",
            "And when you add a random start point as well, that's when you unlock true beauty 👌<a href=\"https://twitter.com/hashtag/ReactVizHoliday?src=hash&amp;ref_src=twsrc%5Etfw\">#ReactVizHoliday</a> Day 9 was fun like that.<br>Check it out here 👉 <a href=\"https://t.co/Yh62OVG3pW\">https://t.co/Yh62OVG3pW</a> <a href=\"https://t.co/5N2gQJtfUX\">pic.twitter.com/5N2gQJtfUX</a>",
            "</p>",
            "— Swizec Teller (<span class=\"citation\" data-cites=\"Swizec\">@Swizec</span>) <a href=\"https://twitter.com/Swizec/status/1073285334291501056?ref_src=twsrc%5Etfw\">December 13, 2018</a>",
            "</blockquote>",
            "<p>You decide which looks best ✌️</p>"
          ]
        },
        {
          "lectureTitle": "A responsive stack chart of smartphone market share",
          "lectureLines": [
            "<h1 id=\"challenge-9\">Challenge</h1>",
            "<p>Smartphones, magnificent little things. But there’s only 4 kinds. Draw a responsive stackchart of their marketshare.</p>",
            "<p><a href=\"https://reactviz.holiday/datasets/statistic_id266572_us-smartphone-market-share-2012-2018-by-month.xlsx\">Dataset</a></p>",
            "<h1 id=\"my-solution-9\">My Solution</h1>",
            "<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/lbHy8SF39k8\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen>",
            "</iframe>",
            "<iframe src=\"https://codesandbox.io/embed/0xj8q4k2pp?fontsize=14\" style=\"width:100%; height:500px; border😮; border-radius: 4px; overflow:hidden;\" sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\">",
            "</iframe>",
            "<p>We’ve built stackcharts before, on the <a href=\"https://reactviz.holiday/christmas-gifts/\">What do Americans want for Christmas</a> day. That means we can focus on teh responsive part today.</p>",
            "<p>Although I still had to build the full stack chart from scratch and my jetlagged brain struggled. Sorry viewers. You might want to skip the first several minutes of the stream 😅</p>",
            "<h2 id=\"how-to-make-a-responsive-chart-with-react-and-d3\">How to make a responsive chart with React and D3</h2>",
            "<p>There’s two parts to making responsive charts and data visualizations:</p>",
            "<ol type=\"1\">",
            "<li>Build your chart so it conforms to a width and height</li>",
            "<li>Use CSS to resize your SVG based on viewport size</li>",
            "<li>React to window size changes</li>",
            "<li>Read SVG size</li>",
            "<li>Pass it into your chart</li>",
            "</ol>",
            "<p>We’ll go from the outside-in.</p>",
            "<h3 id=\"dynamically-sized-svg\">Dynamically sized SVG</h3>",
            "<p>There’s a few ways you can render your SVG so it resizes based on available space. Flexbox, css grid, old school CSS tricks.</p>",
            "<p>The easist is a <code style=\"white-space: pre-wrap;\">100%</code> width.</p>",
            "<div class=\"sourceCode\" id=\"cb266\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb266-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">&lt;</span>svg width<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;100%&quot;</span> height<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;400&quot;</span> ref<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">svgRef</span><span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb266-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">{</span>data <span class=\"op\" style=\"color: #666666;\">&amp;&amp;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb266-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>ResponsiveStackChart</a>",
            "<a class=\"sourceLine\" id=\"cb266-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      data<span class=\"op\" style=\"color: #666666;\">={</span>data<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb266-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      keys<span class=\"op\" style=\"color: #666666;\">={</span>[<span class=\"st\" style=\"color: #4070a0;\">&#39;android&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;ios&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;blackberry&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;microsoft&#39;</span>]<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb266-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      width<span class=\"op\" style=\"color: #666666;\">={</span>width<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb266-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      height<span class=\"op\" style=\"color: #666666;\">={</span>height<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb266-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb266-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  )<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb266-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">&lt;/svg<span class=\"op\" style=\"color: #666666;\">&gt;</span></a></code></pre></div>",
            "<p>Our SVG always occupies the full width of its parent div - the whole page in our case. It contains a <code style=\"white-space: pre-wrap;\">&lt;ResponsiveStackChart&gt;</code> that accepts width, height, and data.</p>",
            "<p>Those four come from state.</p>",
            "<div class=\"sourceCode\" id=\"cb267\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb267-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> data<span class=\"op\" style=\"color: #666666;\">,</span> width<span class=\"op\" style=\"color: #666666;\">,</span> height <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>You could track different widths for different charts, do some layouting, things like that. We don’t need those complications because this is a small example.</p>",
            "<h3 id=\"listen-to-window-size-changes\">Listen to window size changes</h3>",
            "<p>Now that we have a dynamic SVG, we have to read its size every time the window size changes. That happens when users resize their browser (never), or when they turn their phone (sometimes).</p>",
            "<p>In reality this part almost never happens. People rarely resize their browsers and only turn their phones if you give them a reason to. But it’s a nice touch when we’re talking about responsive 😃</p>",
            "<p>We add a listener to the <code style=\"white-space: pre-wrap;\">resize</code> window event in <code style=\"white-space: pre-wrap;\">componentDidMount</code> and remove it in <code style=\"white-space: pre-wrap;\">componentWillUnmount</code>. Both in the main App componenet.</p>",
            "<div class=\"sourceCode\" id=\"cb268\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb268-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"at\" style=\"color: #7d9029;\">componentDidMount</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb268-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// data loading</span></a>",
            "<a class=\"sourceLine\" id=\"cb268-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb268-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">measureSVG</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb268-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">window</span>.<span class=\"at\" style=\"color: #7d9029;\">addEventListener</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;resize&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">measureSVG</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb268-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb268-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb268-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"at\" style=\"color: #7d9029;\">componentWillUnmount</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb268-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">window</span>.<span class=\"at\" style=\"color: #7d9029;\">removeEventListener</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;resize&quot;</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">measureSVG</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb268-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p><code style=\"white-space: pre-wrap;\">measureSVG</code> is where the next bit happens.</p>",
            "<h3 id=\"measure-svg-element-size\">Measure SVG element size</h3>",
            "<p>A useful DOM method engineers often forget exists is <code style=\"white-space: pre-wrap;\">getBoundingClientRect</code>. Tells you the exact size of a DOM node. Great for stuff like this 👌</p>",
            "<div class=\"sourceCode\" id=\"cb269\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb269-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">measureSVG <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb269-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> width<span class=\"op\" style=\"color: #666666;\">,</span> height <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">svgRef</span>.<span class=\"va\" style=\"color: #19177c;\">current</span>.<span class=\"at\" style=\"color: #7d9029;\">getBoundingClientRect</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb269-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb269-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">setState</span>(<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb269-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    width<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb269-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    height<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb269-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb269-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">};</span></a></code></pre></div>",
            "<p>Take the bounding client rect of our SVG element, read out its width and height, save it to state. This triggers a re-render of our app, passes new sizing props into the chart, and the chart resizes itself.</p>",
            "<p><img src=\"https://media.giphy.com/media/12NUbkX6p4xOO4/giphy.gif\"></p>",
            "<h2 id=\"a-chart-that-listens-to-its-width-and-height\">A chart that listens to its width and height</h2>",
            "<p>Now that we’ve got dynamic always accurate width and height, we have to listen to them.</p>",
            "<p>Best way to do that is with D3 scales that you keep up to date. We use the dynamic full integration approach from my <a href=\"https://swizec1.teachable.com/p/react-for-data-visualization/\">React for Data Visualization</a> course.</p>",
            "<p>That means:</p>",
            "<ol type=\"1\">",
            "<li>Scales go into state</li>",
            "<li>Scales update their domain and range in <code style=\"white-space: pre-wrap;\">getDerivedStateFromProps</code></li>",
            "</ol>",
            "<div class=\"sourceCode\" id=\"cb270\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb270-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">class</span> ResponsiveStackChart <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">extends</span> <span class=\"va\" style=\"color: #19177c;\">React</span>.<span class=\"at\" style=\"color: #7d9029;\">Component</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb270-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  state <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb270-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">xScale</span><span class=\"op\" style=\"color: #666666;\">:</span> d3</a>",
            "<a class=\"sourceLine\" id=\"cb270-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">scaleBand</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb270-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">domain</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"va\" style=\"color: #19177c;\">data</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">date</span>))</a>",
            "<a class=\"sourceLine\" id=\"cb270-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      .<span class=\"at\" style=\"color: #7d9029;\">range</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">600</span>])<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb270-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">yScale</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">scaleLinear</span>().<span class=\"at\" style=\"color: #7d9029;\">range</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">600</span>])</a>",
            "<a class=\"sourceLine\" id=\"cb270-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb270-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  stack <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">stack</span>().<span class=\"at\" style=\"color: #7d9029;\">keys</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">keys</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb270-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  color <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">chroma</span>.<span class=\"va\" style=\"color: #19177c;\">brewer</span>.<span class=\"at\" style=\"color: #7d9029;\">Paired</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb270-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb270-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">static</span> <span class=\"at\" style=\"color: #7d9029;\">getDerivedStateFromProps</span>(props<span class=\"op\" style=\"color: #666666;\">,</span> state) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb270-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> <span class=\"op\" style=\"color: #666666;\">{</span> xScale<span class=\"op\" style=\"color: #666666;\">,</span> yScale <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> state<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb270-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb270-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">xScale</span>.<span class=\"at\" style=\"color: #7d9029;\">domain</span>(<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"va\" style=\"color: #19177c;\">data</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">date</span>)).<span class=\"at\" style=\"color: #7d9029;\">range</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">width</span>])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb270-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">yScale</span>.<span class=\"at\" style=\"color: #7d9029;\">range</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">height</span> <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"dv\" style=\"color: #40a070;\">50</span>])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb270-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb270-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb270-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      ...<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb270-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      xScale<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb270-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      yScale</a>",
            "<a class=\"sourceLine\" id=\"cb270-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb270-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>We define default state for our <code style=\"white-space: pre-wrap;\">xScale</code> and <code style=\"white-space: pre-wrap;\">yScale</code>. Both assume the chart is going to be 600x600 pixels. xScale has a domain with every identifier in our dataset, the month/year, and yScale will get its domain in the render function. I’ll explain why.</p>",
            "<p><code style=\"white-space: pre-wrap;\">getDerivedStateFromProps</code> runs every time our component updates for any reason. A good place to update our scales so they fit any new into from props.</p>",
            "<p>We redefine their ranges to match the <code style=\"white-space: pre-wrap;\">width</code> and <code style=\"white-space: pre-wrap;\">height</code> props. If we are careful to always rely on scales to position and size elements on our chart, the chart will automatically resize.</p>",
            "<h3 id=\"the-stack-layout\">The stack layout</h3>",
            "<p>To avoid calculating the stack layout multiple times, we do it in the render method. Need its data for rendering and for the <code style=\"white-space: pre-wrap;\">yScale</code> domain.</p>",
            "<div class=\"sourceCode\" id=\"cb271\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb271-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"at\" style=\"color: #7d9029;\">render</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb271-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> data<span class=\"op\" style=\"color: #666666;\">,</span> height <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">props</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb271-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">{</span> yScale<span class=\"op\" style=\"color: #666666;\">,</span> xScale <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb271-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> stack <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">stack</span>(data)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb271-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb271-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">yScale</span>.<span class=\"at\" style=\"color: #7d9029;\">domain</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">max</span>(stack[<span class=\"va\" style=\"color: #19177c;\">stack</span>.<span class=\"at\" style=\"color: #7d9029;\">length</span> <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"dv\" style=\"color: #40a070;\">1</span>].<span class=\"at\" style=\"color: #7d9029;\">map</span>(d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> d[<span class=\"dv\" style=\"color: #40a070;\">1</span>]))])<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>The <code style=\"white-space: pre-wrap;\">stack</code> generator returns an array of arrays. At the top level we have an array for every <code style=\"white-space: pre-wrap;\">key</code> in our dataset. Inside is an array of tuples for each datapoint. The touples hold a <code style=\"white-space: pre-wrap;\">min</code> and <code style=\"white-space: pre-wrap;\">max</code> value that tells us where a datapoint starts and ends.</p>",
            "<p>We use <code style=\"white-space: pre-wrap;\">d3.max</code> to find the highest value in the stack data and feed it into yScale’s domain so it can proportionally size everything when we render.</p>",
            "<p>👌</p>",
            "<h2 id=\"an-axis-with-dynamic-number-of-tricks\">An axis with dynamic number of tricks</h2>",
            "<p>The last step is making our axis look good at every size. We have to make sure ticks don’t overlap and their number adapts to available space.</p>",
            "<div class=\"sourceCode\" id=\"cb272\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb272-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> BottomAxis <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">d3blackbox</span>((anchor<span class=\"op\" style=\"color: #666666;\">,</span> props) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb272-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> scale <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">scale</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb272-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    tickWidth <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"dv\" style=\"color: #40a070;\">60</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb272-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    width <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">scale</span>.<span class=\"at\" style=\"color: #7d9029;\">range</span>()[<span class=\"dv\" style=\"color: #40a070;\">1</span>]<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb272-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    tickN <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">Math</span>.<span class=\"at\" style=\"color: #7d9029;\">floor</span>(width / tickWidth)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb272-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    keepEveryNth <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">Math</span>.<span class=\"at\" style=\"color: #7d9029;\">floor</span>(<span class=\"va\" style=\"color: #19177c;\">scale</span>.<span class=\"at\" style=\"color: #7d9029;\">domain</span>().<span class=\"at\" style=\"color: #7d9029;\">length</span> / tickN)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb272-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb272-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">scale</span>.<span class=\"at\" style=\"color: #7d9029;\">domain</span>(<span class=\"va\" style=\"color: #19177c;\">scale</span>.<span class=\"at\" style=\"color: #7d9029;\">domain</span>().<span class=\"at\" style=\"color: #7d9029;\">filter</span>((_<span class=\"op\" style=\"color: #666666;\">,</span> i) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> i <span class=\"op\" style=\"color: #666666;\">%</span> keepEveryNth <span class=\"op\" style=\"color: #666666;\">===</span> <span class=\"dv\" style=\"color: #40a070;\">0</span>))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb272-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb272-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> timeFormat <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">timeFormat</span>(<span class=\"st\" style=\"color: #4070a0;\">&#39;%b %Y&#39;</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb272-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> axis <span class=\"op\" style=\"color: #666666;\">=</span> d3</a>",
            "<a class=\"sourceLine\" id=\"cb272-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">axisBottom</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb272-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">scale</span>(<span class=\"va\" style=\"color: #19177c;\">props</span>.<span class=\"at\" style=\"color: #7d9029;\">scale</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb272-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">tickFormat</span>(timeFormat)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb272-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">select</span>(<span class=\"va\" style=\"color: #19177c;\">anchor</span>.<span class=\"at\" style=\"color: #7d9029;\">current</span>).<span class=\"at\" style=\"color: #7d9029;\">call</span>(axis)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb272-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>This is quite mathsy. The idea works like this:</p>",
            "<ol type=\"1\">",
            "<li>Decide how much room you want for each tick - <code style=\"white-space: pre-wrap;\">tickWidth</code></li>",
            "<li>Read the width from scale.range - <code style=\"white-space: pre-wrap;\">width</code></li>",
            "<li>Use division to decide how many ticks fit - <code style=\"white-space: pre-wrap;\">tickN</code></li>",
            "<li>Some more division to decide every Nth tick you can keep - <code style=\"white-space: pre-wrap;\">keepEveryNth</code></li>",
            "</ol>",
            "<p>Then we filter the scale’s domain and keep only every <code style=\"white-space: pre-wrap;\">keepEveryNth</code> element.</p>",
            "<p>Only reason we need this is because we’re using a band scale, which is an ordinal scale. Means D3 can’t easily interpolate datapoints and figure these things out on its own.</p>",
            "<p>The result is a perfectly responsive chart 👇</p>",
            "<blockquote class=\"twitter-tweet\" data-lang=\"en\">",
            "<p lang=\"en\" dir=\"ltr\">",
            "A responsive <a href=\"https://twitter.com/hashtag/react?src=hash&amp;ref_src=twsrc%5Etfw\">#react</a> and <a href=\"https://twitter.com/hashtag/d3?src=hash&amp;ref_src=twsrc%5Etfw\">#d3</a> stackchart. <a href=\"https://twitter.com/hashtag/ReactVizHoliday?src=hash&amp;ref_src=twsrc%5Etfw\">#ReactVizHoliday</a> 10<br><br>👉 <a href=\"https://t.co/8a8r5ifhyz\">https://t.co/8a8r5ifhyz</a> <a href=\"https://t.co/kMWgUAZB4J\">pic.twitter.com/kMWgUAZB4J</a>",
            "</p>",
            "— Swizec Teller (<span class=\"citation\" data-cites=\"Swizec\">@Swizec</span>) <a href=\"https://twitter.com/Swizec/status/1074202928221700097?ref_src=twsrc%5Etfw\">December 16, 2018</a>",
            "</blockquote>",
            "<script async charset=\"utf-8\">",
            "Function&&Function.prototype&&Function.prototype.bind&&(/MSIE ([6789]|10)/.test(navigator.userAgent)||(window.__twttr&&window.__twttr.widgets&&window.__twttr.widgets.loaded&&window.twttr.widgets.load&&window.twttr.widgets.load(),window.__twttr&&window.__twttr.widgets&&window.__twttr.widgets.init||function(t){function e(e){for(var n,i,o=e[0],s=e[1],a😮,c😦];a<o.length;a++)i😮[a],r[i]&&c.push(r[i][0]),r[i]😮;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]😒[n]);for(u&&u(e);c.length😉c.shift()()}var n={},r={1😮};function i(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(t){var e😦],n=r[t];if(0!==n)if(n)e.push(n[2]);else{var o=new Promise(function(e,i){n=r[t👿e,i]});e.push(n[2]😮);var s,a=document.getElementsByTagName(\"head\")[0],u=document.createElement(\"script\");u.charset=\"utf-8\",u.timeout=120,i.nc&&u.setAttribute(\"nonce\",i.nc),u.src=function(t){return i.p+\"js/\"+({0:\"moment~timeline~tweet\",2:\"dm_button\",3:\"button\",4:\"moment\",5:\"periscope_on_air\",6:\"timeline\",7:\"tweet\"}[t]||t)+\".\"+{0:\"a20574004ea824b1c047f200045ffa1e\",2:\"b573518d7182437fcff1973b0098d272\",3:\"509719336ca39171c37a321231ccaf83\",4:\"f261877d67dc45f3972d303d6b32c138\",5:\"04369ab165b401d73b183f97ed7153fd\",6:\"49693ebcd57b08708ebca7502c7c343d\",7:\"73b7ab8a56ad3263cad8d36ba66467fc\"}[t]+\".js\"}(t),s=function(e){u.onerror=u.onload=null,clearTimeout(c);var n=r[t];if(0!==n){if(n){var i=e&&(\"load\"===e.type?\"missing\":e.type),o=e&&e.target&&e.target.src,s=new Error(\"Loading chunk \"+t+\" failed.\\n(\"+i+\": \"+o+\")\");s.type=i,s.request😮,n[1](s)}r[t]=void 0}};var c=setTimeout(function(){s({type:\"timeout\",target:u})},12e4);u.onerror=u.onload😒,a.appendChild(u)}return Promise.all(e)},i.m=t,i.c=n,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,\"a\",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p=\"https://platform.twitter.com/\",i.oe=function(t){throw console.error(t),t};var o=window.__twttrll=window.__twttrll||[],s😮.push.bind(o);o.push=e,o😮.slice();for(var a😮;a<o.length;a++)e(o[a]);var u😒;i(i.s=91)}([function(t,e,n){var r=n(1);function i(t,e){var n;for(n in t)t.hasOwnProperty&&!t.hasOwnProperty(n)||e(n,t[n]);return t}function o(t){return{}.toString.call(t).match(/\\s([a-zA-Z]+)/)[1].toLowerCase()}function s(t){return t===Object(t)}function a(t){var e;if(!s(t))return!1;if(Object.keys)return!Object.keys(t).length;for(e in t)if(t.hasOwnProperty(e))return!1;return!0}function u(t){return t?Array.prototype.slice.call(t)😦]}t.exports={aug:function(t){return u(arguments).slice(1).forEach(function(e){i(e,function(e,n){t[e]=n})}),t},async:function(t,e){r.setTimeout(function(){t.call(e||null)},0)},compact:function t(e){return i(e,function(n,r){s(r)&&(t(r),a(r)&&delete e[n]),void 0!==r&&null!==r&&\"\"!==r||delete e[n]}),e},contains:function(t,e){return!(!t||!t.indexOf)&&t.indexOf(e)>-1},forIn:i,isObject😒,isEmptyObject:a,toType😮,isType:function(t,e){return t==o(e)},toRealArray:u}},function(t,e){t.exports=window},function(t,e,n){var r=n(6);t.exports=function(){var t=this;this.promise=new r(function(e,n){t.resolve=e,t.reject=n})}},function(t,e,n){var r=n(11),i😕(?:^|(?:https?😃?\\/\\/(?:www\\.)?twitter\\.com(?::\\d+)?(?😕/intent\\/(?:follow|user)\\/?\\?screen_name😐(?😕/#!)?\\/))@?([\\w]+)(?😕?|&|$)/i,o😕(?:^|(?:https?😃?\\/\\/(?:www\\.)?twitter\\.com(?::\\d+)?\\/(?:#!\\/)?[\\w_]+\\/status(?:es)?\\/)(\\d+)/i,s😕^http(s?)😕/\\/(\\w+\\.)*twitter\\.com([😕]|$)/i,a😕^http(s?)😕/\\/pbs\\.twimg\\.com\\//,u😕^#?([^.,<>!\\s/#\\-()'\"]+)$/,c😕twitter\\.com(?::\\d{2,4})?\\/intent\\/(\\w+)/,d😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/\\w+\\/timelines\\/(\\d+)/i,l😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/i\\/moments\\/(\\d+)/i,f😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/(\\w+)\\/(?:likes|favorites)/i,h😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/(\\w+)\\/lists\\/([\\w-%]+)/i,p😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/i\\/live\\/(\\d+)/i,m😕^https?😕/\\/syndication\\.twitter\\.com\\/settings/i,v😕^https?😕/\\/(localhost|platform)\\.twitter\\.com(?::\\d+)?\\/widgets\\/widget_iframe\\.(.+)/i,g😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/search\\?q😦\\w+)/i;function w(t){return\"string\"==typeof t&&i.test(t)&&RegExp.$1.length<=20}function y(t){if(w(t))return RegExp.$1}function b(t,e){var n=r.decodeURL(t);if(e=e||!1,n.screen_name=y(t),n.screen_name)return r.url(\"https://twitter.com/intent/\"+(e?\"follow\":\"user\"),n)}function _(t){return\"string\"==typeof t&&u.test(t)}function E(t){return\"string\"==typeof t&&o.test(t)}t.exports={isHashTag:_,hashTag:function(t,e){if(e=void 0===e||e,_(t))return(e?\"#\":\"\")+RegExp.$1},isScreenName:w,screenName:y,isStatus:E,status:function(t){return E(t)&&RegExp.$1},intentForProfileURL:b,intentForFollowURL:function(t){return b(t,!0)},isTwitterURL:function(t){return s.test(t)},isTwimgURL:function(t){return a.test(t)},isIntentURL:function(t){return c.test(t)},isSettingsURL:function(t){return m.test(t)},isWidgetIframeURL:function(t){return v.test(t)},isSearchUrl:function(t){return g.test(t)},regexen:{profile:i},momentId:function(t){return l.test(t)&&RegExp.$1},collectionId:function(t){return d.test(t)&&RegExp.$1},intentType:function(t){return c.test(t)&&RegExp.$1},likesScreenName:function(t){return f.test(t)&&RegExp.$1},listScreenNameAndSlug:function(t){var e,n,r;if(h.test(t)){e=RegExp.$1,n=RegExp.$2;try{r=decodeURIComponent(n)}catch(t){}return{ownerScreenName:e,slug:r||n}}return!1},eventId:function(t){return p.test(t)&&RegExp.$1}}},function(t,e,n){var r=n(0),i😦!0,1,\"1\",\"on\",\"ON\",\"true\",\"TRUE\",\"yes\",\"YES\"],o😦!1,0,\"0\",\"off\",\"OFF\",\"false\",\"FALSE\",\"no\",\"NO\"];function s(t){return void 0!==t&&null!==t&&\"\"!==t}function a(t){return c(t)&&t%1==0}function u(t){return c(t)&&!a(t)}function c(t){return s(t)&&!isNaN(t)}function d(t){return r.contains(o,t)}function l(t){return r.contains(i,t)}t.exports={hasValue😒,isInt:a,isFloat:u,isNumber:c,isString:function(t){return\"string\"===r.toType(t)},isArray:function(t){return s(t)&&\"array\"==r.toType(t)},isTruthValue:l,isFalseValue😛,asInt:function(t){if(a(t))return parseInt(t,10)},asFloat:function(t){if(u(t))return t},asNumber:function(t){if(c(t))return t},asBoolean:function(t){return!(!s(t)||!l(t)&&(d(t)||!t))}}},function(t,e){t.exports=document},function(t,e,n){var r=n(1),i=n(20),o=n(45);i.hasPromiseSupport()||(r.Promise😮),t.exports=r.Promise},function(t,e,n){var r=n(0);t.exports=function(t,e){var n=Array.prototype.slice.call(arguments,2);return function(){var i=r.toRealArray(arguments);return t.apply(e,n.concat(i))}}},function(t,e){t.exports=location},function(t,e,n){var r=n(47);t.exports=new r(\"__twttr\")},function(t,e,n){var r=n(0),i😕\\b([\\w-_]+)\\b/g;function o(t){return new RegExp(\"\\\\b\"+t+\"\\\\b\",\"g\")}function s(t,e){t.classList?t.classList.add(e)😮(e).test(t.className)||(t.className+=\" \"+e)}function a(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(o(e),\" \")}function u(t,e){return t.classList?t.classList.contains(e):r.contains(c(t),e)}function c(t){return r.toRealArray(t.classList?t.classList:t.className.match(i))}t.exports={add😒,remove:a,replace:function(t,e,n){if(t.classList&&u(t,e))return a(t,e),void s(t,n);t.className=t.className.replace(o(e),n)},toggle:function(t,e,n){return void 0===n&&t.classList&&t.classList.toggle?t.classList.toggle(e,n)😦n?s(t,e):a(t,e),n)},present:u,list:c}},function(t,e,n){var r=n(4),i=n(0);function o(t){return encodeURIComponent(t).replace(/\\+/g,\"%2B\").replace(/'/g,\"%27\")}function s(t){return decodeURIComponent(t)}function a(t){var e😦];return i.forIn(t,function(t,n){var s😮(t);i.isType(\"array\",n)||(n😦n]),n.forEach(function(t){r.hasValue(t)&&e.push(s+\"=\"+o(t))})}),e.sort().join(\"&\")}function u(t){var e={};return t?(t.split(\"&\").forEach(function(t){var n=t.split(\"😊,r😒(n[0]),o😒(n[1]);if(2==n.length){if(!i.isType(\"array\",e[r]))return r in e?(e[r👿e[r]],void e[r].push(o)):void(e[r]😮);e[r].push(o)}}),e):{}}t.exports={url:function(t,e){return a(e).length>0?i.contains(t,\"?\")?t+\"&\"+a(e):t+\"?\"+a(e):t},decodeURL:function(t){var e=t&&t.split(\"?\");return 2==e.length?u(e[1]):{}},decode:u,encode:a,encodePart😮,decodePart😒}},function(t,e,n){var r=n(😎,i=n(1),o=n(0),s={},a😮.contains(r.href,\"tw_debug=true\");function u(){}function c(){}function d(){return i.performance&&+i.performance.now()||+new Date}function l(t,e){if(i.console&&i.console[t])switch(e.length){case 1:i.console[t](e[0]);break;case 2:i.console[t](e[0],e[1]);break;case 3:i.console[t](e[0],e[1],e[2]);break;case 4:i.console[t](e[0],e[1],e[2],e[3]);break;case 5:i.console[t](e[0],e[1],e[2],e[3],e[4]);break;default😮!==e.length&&i.console.warn&&i.console.warn(\"too many params passed to logger.\"+t)}}t.exports={devError:u,devInfo:c,devObject:function(t,e){},publicError:function(){l(\"error\",o.toRealArray(arguments))},publicLog:function(){l(\"info\",o.toRealArray(arguments))},time:function(t){a&&(s[t]😛())},timeEnd:function(t){a&&s[t]&&(d(),s[t])}}},function(t,e,n){var r=n(19),i=n(4),o=n(11),s=n(0),a=n(116);t.exports=function(t){var e=t.href&&t.href.split(\"?\")[1],n=e?o.decode(e):{},u={lang:a(t),width:t.getAttribute(\"data-width\")||t.getAttribute(\"width\"),height:t.getAttribute(\"data-height\")||t.getAttribute(\"height\"),related:t.getAttribute(\"data-related\"),partner:t.getAttribute(\"data-partner\")};return i.asBoolean(t.getAttribute(\"data-dnt\"))&&r.setOn(),s.forIn(u,function(t,e){var r=n[t];n[t]=i.hasValue(r)?r:e}),s.compact(n)}},function(t,e,n){var r=n(79),i=n(22);t.exports=function(){var t=\"data-twitter-extracted-\"+i.generate();return function(e,n){return r(e,n).filter(function(e){return!e.hasAttribute(t)}).map(function(e){return e.setAttribute(t,\"true\"),e})}}},function(t,e){function n(t,e,n,r,i,o){this.factory=t,this.Sandbox=e,this.srcEl😮,this.targetEl=i,this.parameters=r,this.className=n}n.prototype.destroy=function(){this.srcEl=this.targetEl=null},t.exports=n},function(t,e,n){var r=n(6),i=n(49),o=n(19),s=n(4),a=n(0);t.exports=function(t,e,n){var u;return t=t||[],e=e||{},u=\"ƒ(\"+t.join(\", \")+\", target, [options]);\",function(){var c,d,l,f,h=Array.prototype.slice.apply(arguments,[0,t.length]),p=Array.prototype.slice.apply(arguments,[t.length]);return p.forEach(function(t){t&&(t.nodeType!==Node.ELEMENT_NODE?a.isType(\"function\",t)?c=t:a.isType(\"object\",t)&&(d=t):l=t)}),h.length!==t.length||0===p.length?(c&&a.async(function(){c(!1)}),r.reject(new Error(\"Not enough parameters. Expected: \"+u))):l?(d=a.aug({},d||{},e),t.forEach(function(t){d[t]=h.shift()}),s.asBoolean(d.dnt)&&o.setOn(),f=i.addWidget(n(d,l)),c&&f.then(c,function(){c(!1)}),f)😦c&&a.async(function(){c(!1)}),r.reject(new Error(\"No target element specified. Expected: \"+u)))}}},function(t,e,n){var r=n(99),i=n(2),o=n(0);function s(t,e){return function(){try{e.resolve(t.call(this))}catch(t){e.reject(t)}}}t.exports={sync:function(t,e){t.call(e)},read:function(t,e){var n=new i;return r.read(s(t,n),e),n.promise},write:function(t,e){var n=new i;return r.write(s(t,n),e),n.promise},defer:function(t,e,n){var a=new i;return o.isType(\"function\",t)&&(n=e,e=t,t=1),r.defer(t,s(e,a),n),a.promise}}},function(t,e,n){var r=n(9),i😦\"https://syndication.twitter.com\",\"https://cdn.syndication.twimg.com\",\"https://localhost.twitter.com:8444\"],o😦\"https://syndication.twitter.com\",\"https://localhost.twitter.com:8445\"],s=function(t,e){return t.indexOf(e)>-1},a=function(){var t=r.get(\"backendHost\");return t&&s(i,t)?t:\"https://cdn.syndication.twimg.com\"},u=function(){var t=r.get(\"settingsSvcHost\");return t&&s(o,t)?t:\"https://syndication.twitter.com\"};function c(t,e){var n😦t];return e.forEach(function(t){n.push(function(t){var e😦t||\"\").toString(),n=\"/\"===e.slice(0,1)?1😮,r=function(t){return\"/\"===t.slice(-1)}(e)?-1:void 0;return e.slice(n,r)}(t))}),n.join(\"/\")}t.exports={cookieConsent:function(t){var e=t||[];return e.unshift(\"cookie/consent\"),c(u(),e)},eventVideo:function(t){var e=t||[];return e.unshift(\"video/event\"),c(a(),e)},grid:function(t){var e=t||[];return e.unshift(\"grid/collection\"),c(a(),e)},moment:function(t){var e=t||[];return e.unshift(\"moments\"),c(a(),e)},settings:function(t){var e=t||[];return e.unshift(\"settings\"),c(u(),e)},timeline:function(t){var e=t||[];return e.unshift(\"timeline\"),c(a(),e)},tweetBatch:function(t){var e=t||[];return e.unshift(\"tweets.json\"),c(a(),e)},video:function(t){var e=t||[];return e.unshift(\"widgets/video\"),c(a(),e)}}},function(t,e,n){var r=n(5),i=n(😎,o=n(35),s=n(77),a=n(4),u=n(32),c=!1,d😕https?😕/\\/([^/]+).*/i;t.exports={setOn:function(){c=!0},enabled:function(t,e){return!!(c||a.asBoolean(u.val(\"dnt\"))||s.isUrlSensitive(e||i.host)||o.isFramed()&&s.isUrlSensitive(o.rootDocumentLocation())||(t😛.test(t||r.referrer)&&RegExp.$1)&&s.isUrlSensitive(t))}}},function(t,e,n){var r=n(5),i=n(12),o=n(92),s=n(1),a=n(0),u😮.userAgent;function c(t){return/(Trident|MSIE|Edge[/ ]?\\d)/.test(t=t||u)}t.exports={retina:function(t){return(t=t||s).devicePixelRatio?t.devicePixelRatio>=1.5:!!t.matchMedia&&t.matchMedia(\"only screen and (min-resolution: 144dpi)\").matches},anyIE:c,ie9:function(t){return/MSIE 9/.test(t=t||u)},ie10:function(t){return/MSIE 10/.test(t=t||u)},ios:function(t){return/(iPad|iPhone|iPod)/.test(t=t||u)},android:function(t){return/^Mozilla\\/5\\.0 \\(Linux; (U; )?Android/.test(t=t||u)},canPostMessage:function(t,e){return t=t||s,e=e||u,t.postMessage&&!(c(e)&&t.opener)},touch:function(t,e,n){return t=t||s,e=e||o,n=n||u,\"ontouchstart\"in t||/Opera Mini/.test(n)||e.msMaxTouchPoints>0},cssTransitions:function(){var t=r.body.style;return void 0!==t.transition||void 0!==t.webkitTransition||void 0!==t.mozTransition||void 0!==t.oTransition||void 0!==t.msTransition},hasPromiseSupport:function(){return!!(s.Promise&&s.Promise.resolve&&s.Promise.reject&&s.Promise.all&&s.Promise.race&&(new s.Promise(function(e){t=e}),a.isType(\"function\",t)));var t},hasIntersectionObserverSupport:function(){return!!s.IntersectionObserver},hasPerformanceInformation:function(){return s.performance&&s.performance.getEntriesByType},hasLocalStorageSupport:function(){try{return s.localStorage.setItem(\"local_storage_support_test\",\"true\"),void 0!==s.localStorage}catch(t){return i.devError(\"window.localStorage is not supported:\",t),!1}}}},function(t,e,n){var r=n(6),i=n(2);function o(t,e){return t.then(e,e)}function s(t){return t instanceof r}t.exports={always😮,allResolved:function(t){var e;return void 0===t?r.reject(new Error(\"undefined is not an object\")):Array.isArray(t)?(e=t.length)?new r(function(n,r){var i😮,o😦];function a(){(i+=1)===e&&(0===o.length?r():n(o))}function u(t){o.push(t),a()}t.forEach(function(t){s(t)?t.then(u,a):u(t)})}):r.resolve([]):r.reject(new Error(\"Type error\"))},some:function(t){var e;return e😦t=t||[]).length,t=t.filter(s),e?e!==t.length?r.reject(\"non-Promise passed to .some\"):new r(function(e,n){var r😮;function i(){(r+=1)===t.length&&n()}t.forEach(function(t){t.then(e,i)})}):r.reject(\"no promises passed to .some\")},isPromise😒,allSettled:function(t){function e(){}return r.all((t||[]).map(function(t){return o(t,e)}))},timeout:function(t,e){var n=new i;return setTimeout(function(){n.reject(new Error(\"Promise timed out\"))},e),t.then(function(t){n.resolve(t)},function(t){n.reject(t)}),n.promise}}},function(t,e){var n=\"i\",r😮,i😮;t.exports={generate:function(){return n+String(+new Date)+Math.floor(1e5*Math.random())+r++},deterministic:function(){return n+String(i++)}}},function(t,e,n){var r=n(46),i=n(48),o=n(0);t.exports😮.aug(r.get(\"events\")||{},i.Emitter)},function(t,e,n){var r=n(25),i=n(107);t.exports=r.build([i])},function(t,e,n){var r=n(37),i=n(104),o=n(7);(r=Object.create(r)).build😮(r.build,null,i),t.exports=r},function(t,e,n){var r=n(37),i=n(38),o=n(7);(r=Object.create(r)).build😮(r.build,null,i),t.exports=r},function(t,e,n){var r=n(81),i=n(73),o=n(82),s=n(😎,a=n(68),u=n(72),c=n(19),d=n(4),l=n(22),f=n(0);function h(t){if(!t||!t.headers)throw new Error(\"unexpected response schema\");return{html:t.body,config:t.config,pollInterval:1e3*parseInt(t.headers.xPolling,10)||null,maxCursorPosition:t.headers.maxPosition,minCursorPosition:t.headers.minPosition}}function p(t){if(t&&t.headers)throw new Error(t.headers.status);throw t instanceof Error?t:new Error(t)}t.exports=function(t){t.params({instanceId:{required:!0,fallback:l.deterministic},lang:{required:!0,transform:a.matchLanguage,fallback:\"en\"},tweetLimit:{transform😛.asInt}}),t.defineProperty(\"endpoint\",{get:function(){throw new Error(\"endpoint not specified\")}}),t.defineProperty(\"pollEndpoint\",{get:function(){return this.endpoint}}),t.define(\"cbId\",function(t){var e=t?\"_new\":\"_old\";return\"tl_\"+this.params.instanceId+\"_\"+this.id+e}),t.define(\"queryParams\",function(){return{lang:this.params.lang,tz:u.getTimezoneOffset(),t:r(),domain😒.host,tweet_limit:this.params.tweetLimit,dnt:c.enabled()}}),t.define(\"fetch\",function(){return i.fetch(this.endpoint,this.queryParams(),o,this.cbId()).then(h,p)}),t.define(\"poll\",function(t,e){var n,r;return n={since_id😦t=t||{}).sinceId,max_id:t.maxId,min_position:t.minPosition,max_position:t.maxPosition},r=f.aug(this.queryParams(),n),i.fetch(this.pollEndpoint,r,o,this.cbId(e)).then(h,p)})}},function(t,e,n){var r=n(48).makeEmitter();t.exports={emitter:r,START:\"start\",ALL_WIDGETS_RENDER_START:\"all_widgets_render_start\",ALL_WIDGETS_RENDER_END:\"all_widgets_render_end\",ALL_WIDGETS_AND_IMAGES_LOADED:\"all_widgets_and_images_loaded\"}},function(t,e,n){var r=n(5),i=n(0);t.exports=function(t,e,n){var o;if(n=n||r,t=t||{},e=e||{},t.name){try{o=n.createElement('<iframe name=\"'+t.name+'\"></iframe>')}catch(e){(o=n.createElement(\"iframe\")).name=t.name}delete t.name}else o=n.createElement(\"iframe\");return t.id&&(o.id=t.id,delete t.id),o.allowtransparency=\"true\",o.scrolling=\"no\",o.setAttribute(\"frameBorder\",0),o.setAttribute(\"allowTransparency\",!0),i.forIn(t,function(t,e){o.setAttribute(t,e)}),i.forIn(e,function(t,e){o.style[t]=e}),o}},function(t,e,n){var r=n(1).JSON;t.exports={stringify:r.stringify||r.encode,parse:r.parse||r.decode}},function(t,e,n){var r=n(0),i=n(40);t.exports={closest:function t(e,n,o){var s;if(n)return o😮||n&&n.ownerDocument,s=r.isType(\"function\",e)?e:function(t){return function(e){return!!e.tagName&&i(e,t)}}(e),n===o?s(n)?n:void 0😒(n)?n:t(s,n.parentNode,o)}}},function(t,e,n){var r,i=n(5);function o(t){var e,n,o,s😮;for(r={},e😦t=t||i).getElementsByTagName(\"meta\");e[s];s++){if(n=e[s],/^twitter😕.test(n.getAttribute(\"name\")))o=n.getAttribute(\"name\").replace(/^twitter😕,\"\");else{if(!/^twitter😕.test(n.getAttribute(\"property\")))continue;o=n.getAttribute(\"property\").replace(/^twitter😕,\"\")}r[o]=n.getAttribute(\"content\")||n.getAttribute(\"value\")}}o(),t.exports={init😮,val:function(t){return r[t]}}},function(t,e,n){var r=n(5),i=n(30),o=n(19),s=n(0),a=n(41),u=n(9),c=n(3),d=n(31),l=a.version,f=u.get(\"clientEventEndpoint\")||\"https://syndication.twitter.com/i/jot\",h=1;function p(t){return s.aug({client:\"tfw\"},t||{})}function m(t,e,n){return e=e||{},s.aug({},e,{_category_:t,triggered_on:e.triggered_on||+new Date,dnt😮.enabled(n)})}t.exports={extractTermsFromDOM:function t(e,n){var r;return n=n||{},e&&e.nodeType===Node.ELEMENT_NODE?((r=e.getAttribute(\"data-scribe\"))&&r.split(\" \").forEach(function(t){var e=t.trim().split(\"😊,r=e[0],i=e[1];r&&i&&!n[r]&&(n[r]=i)}),t(e.parentNode,n)):n},clickEventElement:function(t){var e😛.closest(\"[data-expanded-url]\",t),n=e&&e.getAttribute(\"data-expanded-url\");return n&&c.isTwitterURL(n)?\"twitter_url\":\"url\"},flattenClientEventPayload:function(t,e){return s.aug({},e,{event_namespace:t})},formatGenericEventData:m,formatClientEventData:function(t,e,n){var i=t&&t.widget_origin||r.referrer;return(t=m(\"tfw_client_event\",t,i)).client_version=l,t.format_version=void 0!==n?n:1,e||(t.widget_origin=i),t},formatClientEventNamespace😛,formatTweetAssociation:function(t,e){var n={};return(e=e||{}).association_namespace😛(t),n[h]=e,n},noticeSeen:function(t){return\"notice\"===t.element&&\"seen\"===t.action},splitLogEntry:function(t){var e,n,r,i,o;return t.item_ids&&t.item_ids.length>1?(e=Math.floor(t.item_ids.length/2),n=t.item_ids.slice(0,e),r={},i=t.item_ids.slice(e),o={},n.forEach(function(e){r[e]=t.item_details[e]}),i.forEach(function(e){o[e]=t.item_details[e]}),[s.aug({},t,{item_ids:n,item_details:r}),s.aug({},t,{item_ids:i,item_details😮})])😦t]},stringify:function(t){var e,n=Array.prototype.toJSON;return delete Array.prototype.toJSON,e=i.stringify(t),n&&(Array.prototype.toJSON=n),e},AUDIENCE_ENDPOINT:\"https://syndication.twitter.com/i/jot/syndication\",CLIENT_EVENT_ENDPOINT:f,RUFOUS_REDIRECT:\"https://platform.twitter.com/jot.html\"}},function(t,e,n){var r=n(10),i={},o=-1,s={};function a(t){var e=t.getAttribute(\"data-twitter-event-id\");return e||(t.setAttribute(\"data-twitter-event-id\",++o),o)}function u(t,e,n){var r😮,i=t&&t.length||0;for(r😮;r<i;r++)if(t[r].call(e,n,e),n.ceaseImmediately)return!1}function c(t,e,n){for(var i=n||t.target||t.srcElement,o=r.list(i).map(function(t){return\".\"+t}).concat(i.tagName),s😮,a😮.length;s<a;s++)if(!1===u(e[o[s]],i,t))return;t.cease||i!==this&&c.call(this,t,e,i.parentElement||i.parentNode)}function d(t,e,n,r){function i(r){c.call(t,r,n[e])}!function(t,e,n,r){t.id&&(s[t.id]😒[t.id]||[],s[t.id].push({el:t,listener:e,type:n,rootId:r}))}(t,i,e,r),t.addEventListener(e,i,!1)}function l(t){t&&t.preventDefault?t.preventDefault():t.returnValue=!1}function f(t){t&&(t.cease=!0)&&t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}t.exports={stop:function(t){return f(t),l(t),!1},stopPropagation:f,stopImmediatePropagation:function(t){t&&(t.ceaseImmediately=!0,f(t),t.stopImmediatePropagation())},preventDefault:l,delegate:function(t,e,n,r){var o=a(t);i[o]=i[o]||{},i[o][e]||(i[o][e]={},d(t,e,i[o],o)),i[o][e][n]=i[o][e][n]||[],i[o][e][n].push(r)},simulate:function(t,e,n){var r=a(e),o=i[r]&&i[r];c.call(e,{target:n},o[t])},removeDelegatesForWidget:function(t){var e😒[t];e&&(e.forEach(function(t){t.el.removeEventListener(t.type,t.listener,!1),delete i[t.rootId]}),delete s[t])}}},function(t,e,n){var r=n(😎,i=n(76),o=n(0),s=i.getCanonicalURL()||r.href,a😒;t.exports={isFramed:function(){return s!==a},rootDocumentLocation:function(t){return t&&o.isType(\"string\",t)&&(s=t),s},currentDocumentLocation:function(){return a}}},function(t,e,n){var r=n(75),i=n(101),o=n(78),s=n(33),a=new(n(109))(function(t){var e,n,a;if(0!==t.length){if(u(t))return c(t);e=r(t,function(t){return s.noticeSeen(t.input.namespace)}),n=e.true,a=e.false,n&&n.length>0&&(n=n.slice(0,1),o.canFlushOneItem(n[0])||(n[0].input.data.message=\"\"),c(n)),a&&(u(a)?c:function(t){i.init(),t.forEach(function(t){var e=t.input.namespace,n=t.input.data,r=t.input.offsite,o=t.input.version;i.clientEvent(e,n,r,o)}),i.flush().then(function(){t.forEach(function(t){t.taskDoneDeferred.resolve()})},function(){t.forEach(function(t){t.taskDoneDeferred.reject()})})})(a)}});function u(t){return 1===t.length&&o.canFlushOneItem(t[0])}function c(t){t.forEach(function(t){var e=t.input.namespace,n=t.input.data,r=t.input.offsite,i=t.input.version;o.clientEvent(e,n,r,i),t.taskDoneDeferred.resolve()})}t.exports={scribe:function(t,e,n,r){return a.add({namespace:t,data:e,offsite:n,version:r})},pause:function(){a.pause()},resume:function(){a.resume()}}},function(t,e,n){var r=n(102),i=n(103),o=n(0);t.exports={couple:function(){return o.toRealArray(arguments)},build:function(t,e,n){var o=new t;return(e=i(r(e||[]))).forEach(function(t){t.call(null,o)}),o.build(n)}}},function(t,e,n){var r=n(105),i=n(0),o=n(39);function s(){this.Component=this.factory(),this._adviceArgs😦],this._lastArgs😦]}i.aug(s.prototype,{factory😮,build:function(t){var e=this;return this.Component,i.aug(this.Component.prototype.boundParams,t),this._adviceArgs.concat(this._lastArgs).forEach(function(t){(function(t,e,n){var r=this[e];if(!r)throw new Error(e+\" does not exist\");this[e]=t(r,n)}).apply(e.Component.prototype,t)}),delete this._lastArgs,delete this._adviceArgs,this.Component},params:function(t){var e=this.Component.prototype.paramConfigs;t=t||{},this.Component.prototype.paramConfigs=i.aug({},t,e)},define:function(t,e){if(t in this.Component.prototype)throw new Error(t+\" has previously been defined\");this.override(t,e)},defineStatic:function(t,e){this.Component[t]=e},override:function(t,e){this.Component.prototype[t]=e},defineProperty:function(t,e){if(t in this.Component.prototype)throw new Error(t+\" has previously been defined\");this.overrideProperty(t,e)},overrideProperty:function(t,e){var n=i.aug({configurable:!0},e);Object.defineProperty(this.Component.prototype,t,n)},before:function(t,e){this._adviceArgs.push([r.before,t,e])},after:function(t,e){this._adviceArgs.push([r.after,t,e])},around:function(t,e){this._adviceArgs.push([r.around,t,e])},last:function(t,e){this._lastArgs.push([r.after,t,e])}}),t.exports😒},function(t,e,n){var r=n(0);function i(){return!0}function o(t){return t}t.exports=function(){function t(t){var e=this;t=t||{},this.params=Object.keys(this.paramConfigs).reduce(function(n,s){var a😦],u=e.boundParams,c=e.paramConfigs[s],d=c.validate||i,l=c.transform||o;if(s in u&&a.push(u[s]),s in t&&a.push(t[s]),a=\"fallback\"in c?a.concat(c.fallback):a,n[s]=function(t,e,n){var i=null;return t.some(function(t){if(t=r.isType(\"function\",t)?t():t,e(t))return i=n(t),!0}),i}(a,d,l),c.required&&null==n[s])throw new Error(s+\" is a required parameter\");return n},{}),this.initialize()}return r.aug(t.prototype,{paramConfigs:{},boundParams:{},initialize:function(){}}),t}},function(t,e,n){var r=n(1).HTMLElement,i=r.prototype.matches||r.prototype.matchesSelector||r.prototype.webkitMatchesSelector||r.prototype.mozMatchesSelector||r.prototype.msMatchesSelector||r.prototype.oMatchesSelector;t.exports=function(t,e){if(i)return i.call(t,e)}},function(t){t.exports={version:\"7e980dd:1559715853415\"}},function(t,e,n){var r,i=n(10),o=n(5),s=n(1),a=n(32),u=n(50),c=n(4),d=n(22),l=\"csptest\";t.exports={inlineStyle:function(){var t=l+d.generate(),e😮.createElement(\"div\"),n😮.createElement(\"style\"),f=\".\"+t+\" { visibility: hidden; }\";return!!o.body&&(c.asBoolean(a.val(\"widgets:csp\"))&&(r=!1),void 0!==r?r😦e.style.display=\"none\",i.add(e,t),n.type=\"text/css\",n.appendChild(o.createTextNode(f)),o.body.appendChild(n),o.body.appendChild(e),r=\"hidden\"===s.getComputedStyle(e).visibility,u(e),u(n),r))}}},function(t,e,n){var r=n(1);t.exports=function(t,e,n){var i,o😮;return n=n||null,function s(){var a=n||this,u=arguments,c=+new Date;if(r.clearTimeout(i),c-o>e)return o=c,void t.apply(a,u);i=r.setTimeout(function(){s.apply(a,u)},e)}}},function(t,e){t.exports=function(t){var e=t.getBoundingClientRect();return{width:e.width,height:e.height}}},function(t,e,n){",
            "/*!",
            " * @overview es6-promise - a tiny implementation of Promises/A+.",
            " * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)",
            " * @license   Licensed under MIT license",
            " *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE",
            " * @version   v4.2.5+7f2b526d",
            " */var r;r=function(){\"use strict\";function t(t){return\"function\"==typeof t}var e=Array.isArray?Array.isArray:function(t){return\"[object Array]\"===Object.prototype.toString.call(t)},n😮,r=void 0,i=void 0,o=function(t,e){f[n]=t,f[n+1]=e,2===(n+=2)&&(i?i(h):w())},s=\"undefined\"!=typeof window?window:void 0,a😒||{},u=a.MutationObserver||a.WebKitMutationObserver,c=\"undefined\"==typeof self&&\"undefined\"!=typeof process&&\"[object process]\"==={}.toString.call(process),d=\"undefined\"!=typeof Uint8ClampedArray&&\"undefined\"!=typeof importScripts&&\"undefined\"!=typeof MessageChannel;function l(){var t=setTimeout;return function(){return t(h,1)}}var f=new Array(1e3);function h(){for(var t😮;t<n;t+=2)(0,f[t])(f[t+1]),f[t]=void 0,f[t+1]=void 0;n😮}var p,m,v,g,w=void 0;function y(t,e){var n=this,r=new this.constructor(E);void 0===r[_]&&k(r);var i=n._state;if(i){var s=arguments[i-1];o(function(){return O(i,r,s,n._result)})}else I(n,r,t,e);return r}function b(t){if(t&&\"object\"==typeof t&&t.constructor===this)return t;var e=new this(E);return N(e,t),e}c?w=function(){return process.nextTick(h)}:u?(m😮,v=new u(h),g=document.createTextNode(\"\"),v.observe(g,{characterData:!0}),w=function(){g.data=m=++m%2})😛?((p=new MessageChannel).port1.onmessage=h,w=function(){return p.port2.postMessage(0)}):w=void 0===s?function(){try{var t=Function(\"return this\")().require(\"vertx\");return void 0!==(r=t.runOnLoop||t.runOnContext)?function(){r(h)}:l()}catch(t){return l()}}():l();var _=Math.random().toString(36).substring(2);function E(){}var x=void 0,A=1,T=2,S={error:null};function R(t){try{return t.then}catch(t){return S.error=t,S}}function C(e,n,r){n.constructor===e.constructor&&r===y&&n.constructor.resolve===b?function(t,e){e._state===A?j(t,e._result):e._state===T?L(t,e._result):I(e,void 0,function(e){return N(t,e)},function(e){return L(t,e)})}(e,n):r===S?(L(e,S.error),S.error=null):void 0===r?j(e,n):t(r)?function(t,e,n){o(function(t){var r=!1,i=function(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}(n,e,function(n){r||(r=!0,e!==n?N(t,n):j(t,n))},function(e){r||(r=!0,L(t,e))},t._label);!r&&i&&(r=!0,L(t,i))},t)}(e,n,r):j(e,n)}function N(t,e){var n,r;t===e?L(t,new TypeError(\"You cannot resolve a promise with itself\"))😦r=typeof(n=e),null===n||\"object\"!==r&&\"function\"!==r?j(t,e):C(t,e,R(e)))}function P(t){t._onerror&&t._onerror(t._result),D(t)}function j(t,e){t._state===x&&(t._result=e,t._state=A,0!==t._subscribers.length&&o(D,t))}function L(t,e){t._state===x&&(t._state=T,t._result=e,o(P,t))}function I(t,e,n,r){var i=t._subscribers,s=i.length;t._onerror=null,i[s]=e,i[s+A]=n,i[s+T]=r,0===s&&t._state&&o(D,t)}function D(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,i=void 0,o=t._result,s😮;s<e.length;s+👨)r=e[s],i=e[s+n],r?O(n,r,i,o):i(o);t._subscribers.length😮}}function O(e,n,r,i){var o=t(r),s=void 0,a=void 0,u=void 0,c=void 0;if(o){if((s=function(t,e){try{return t(e)}catch(t){return S.error=t,S}}(r,i))===S?(c=!0,a😒.error,s.error=null):u=!0,n===s)return void L(n,new TypeError(\"A promises callback cannot return that same promise.\"))}else s=i,u=!0;n._state!==x||(o&&u?N(n,s):c?L(n,a):e===A?j(n,s):e===T&&L(n,s))}var z😮;function k(t){t[_]😒++,t._state=void 0,t._result=void 0,t._subscribers😦]}var M=function(){function t(t,n){this._instanceConstructor=t,this.promise=new t(E),this.promise[_]||k(this.promise),e(n)?(this.length=n.length,this._remaining=n.length,this._result=new Array(this.length),0===this.length?j(this.promise,this._result)😦this.length=this.length||0,this._enumerate(n),0===this._remaining&&j(this.promise,this._result))):L(this.promise,new Error(\"Array Methods must be provided an Array\"))}return t.prototype._enumerate=function(t){for(var e😮;this._state===x&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===b){var i=R(t);if(i===y&&t._state!==😆this._settledAt(t._state,e,t._result);else if(\"function\"!=typeof i)this._remaining--,this._result[e]=t;else if(n===U){var o=new n(E);C(o,t,i),this._willSettleAt(o,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},t.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===x&&(this._remaining--,t===T?L(r,n):this._result[e]=n),0===this._remaining&&j(r,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;I(t,void 0,function(t){return n._settledAt(A,e,t)},function(t){return n._settledAt(T,e,t)})},t}(),U=function(){function e(t){this[_]😒++,this._result=this._state=void 0,this._subscribers😦],E!==t&&(\"function\"!=typeof t&&function(){throw new TypeError(\"You must pass a resolver function as the first argument to the promise constructor\")}(),this instanceof e?function(t,e){try{e(function(e){N(t,e)},function(e){L(t,e)})}catch(e){L(t,e)}}(this,t):function(){throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\")}())}return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.finally=function(e){var n=this.constructor;return t(e)?this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})}):this.then(e,e)},e}();return U.prototype.then=y,U.all=function(t){return new M(this,t).promise},U.race=function(t){var n=this;return e(t)?new n(function(e,r){for(var i=t.length,o😮;o<i;o++)n.resolve(t[o]).then(e,r)}):new n(function(t,e){return e(new TypeError(\"You must pass an array to race.\"))})},U.resolve=b,U.reject=function(t){var e=new this(E);return L(e,t),e},U._setScheduler=function(t){i=t},U._setAsap=function(t){o=t},U._asap😮,U.polyfill=function(){var t=void 0;if(\"undefined\"!=typeof global)t=global;else if(\"undefined\"!=typeof self)t=self;else try{t=Function(\"return this\")()}catch(t){throw new Error(\"polyfill failed because global object is unavailable in this environment\")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if(\"[object Promise]\"===n&&!e.cast)return}t.Promise=U},U.Promise=U,U},t.exports=r()},function(t,e,n){var r=n(47);t.exports=new r(\"twttr\")},function(t,e,n){var r=n(1),i=n(0);function o(t){return i.isType(\"string\",t)?t.split(\".\"):i.isType(\"array\",t)?t😦]}function s(t,e){(e=e||r)[t]=e[t]||{},Object.defineProperty(this,\"base\",{value:e[t]}),Object.defineProperty(this,\"name\",{value:t})}i.aug(s.prototype,{get:function(t){return o(t).reduce(function(t,e){if(i.isObject(t))return t[e]},this.base)},set:function(t,e,n){var r😮(t),s=function(t,e){var n😮(e).slice(0,-1);return n.reduce(function(t,e,r){if(t[e]=t[e]||{},!i.isObject(t[e]))throw new Error(n.slice(0,r+1).join(\".\")+\" is already defined with a value.\");return t[e]},t)}(this.base,t),a=r.slice(-1);return n&&a in s?s[a]😒[a]=e},init:function(t,e){return this.set(t,e,!0)},unset:function(t){var e😮(t),n=this.get(e.slice(0,-1));n&&delete n[e.slice(-1)]},aug:function(t){var e=this.get(t),n=i.toRealArray(arguments).slice(1);if(e=void 0!==e?e:{},n.unshift(e),!n.every(i.isObject))throw new Error(\"Cannot augment non-object.\");return this.set(t,i.aug.apply(null,n))},call:function(t){var e=this.get(t),n=i.toRealArray(arguments).slice(1);if(!i.isType(\"function\",e))throw new Error(\"Function \"+t+\"does not exist.\");return e.apply(null,n)},fullPath:function(t){var e😮(t);return e.unshift(this.name),e.join(\".\")}}),t.exports😒},function(t,e,n){var r=n(0),i=n(7),o={bind:function(t,e){return this._handlers=this._handlers||{},this._handlers[t]=this._handlers[t]||[],this._handlers[t].push(e)},unbind:function(t,e){var n;this._handlers&&this._handlers[t]&&(e?(n=this._handlers[t].indexOf(e))>😮&&this._handlers[t].splice(n,1):this._handlers[t👿])},trigger:function(t,e){var n=this._handlers&&this._handlers[t];(e=e||{}).type=t,n&&n.forEach(function(t){r.async(i(t,this,e))})}};t.exports={Emitter😮,makeEmitter:function(){return r.aug(function(){},o)}}},function(t,e,n){var r=n(98),i=n(74),o=n(6),s=n(21),a=n(7),u=n(0),c=new i(function(t){var e=function(t){return t.reduce(function(t,e){return t[e.className]=t[e.className]||[],t[e.className].push(e),t},{})}(t.map(r.fromRawTask));u.forIn(e,function(t,e){s.allSettled(e.map(function(t){return t.initialize()})).then(function(){e.forEach(function(t){o.all([t.hydrate(),t.insertIntoDom()]).then(a(t.render,t)).then(a(t.success,t),a(t.fail,t))})})})});t.exports={addWidget:function(t){return c.add(t)}}},function(t,e,n){var r=n(17);t.exports=function(t){return r.write(function(){t&&t.parentNode&&t.parentNode.removeChild(t)})}},function(t,e,n){n(12),t.exports={log:function(t,e){}}},function(t,e,n){var r=n(1);function i(t){return(t=t||r).getSelection&&t.getSelection()}t.exports={getSelection:i,getSelectedText:function(t){var e=i(t);return e?e.toString():\"\"}}},function(t,e,n){var r=n(5),i=n(1),o=n(2),s=2e4;t.exports=function(t){var e=new o,n=r.createElement(\"img\");return n.onload=n.onerror=function(){i.setTimeout(e.resolve,50)},n.src=t,i.setTimeout(e.reject,s),e.promise}},function(t,e,n){var r=n(108);t.exports=function(t){t.define(\"createElement\",r),t.define(\"createFragment\",r),t.define(\"htmlToElement\",r),t.define(\"hasSelectedText\",r),t.define(\"addRootClass\",r),t.define(\"removeRootClass\",r),t.define(\"hasRootClass\",r),t.define(\"prependStyleSheet\",r),t.define(\"appendStyleSheet\",r),t.define(\"prependCss\",r),t.define(\"appendCss\",r),t.define(\"makeVisible\",r),t.define(\"injectWidgetEl\",r),t.define(\"matchHeightToContent\",r),t.define(\"matchWidthToContent\",r)}},function(t,e){t.exports=function(t){var e,n=!1;return function(){return n?e😦n=!0,e=t.apply(this,arguments))}}},function(t,e,n){var r=n(15),i=n(117),o=n(57);t.exports=function(t,e,n){return new r(i,o,\"twitter-dm-button\",t,e,n)}},function(t,e,n){var r=n(58),i=n(24);t.exports=r.isSupported()?r:i},function(t,e,n){var r=n(25),i=n(118);t.exports=r.build([i])},function(t,e,n){var r=n(15),i=n(121),o=n(60);t.exports=function(t,e,n){return new r(i,o,\"twitter-follow-button\",t,e,n)}},function(t,e,n){var r=n(25),i=n(122);t.exports=r.build([i])},function(t,e,n){var r=n(15),i=n(129),o=n(24);t.exports=function(t,e,n){return new r(i,o,\"twitter-moment\",t,e,n)}},function(t,e,n){var r=n(15),i=n(131),o=n(24);t.exports=function(t,e,n){return new r(i,o,\"periscope-on-air\",t,e,n)}},function(t,e,n){var r=n(80),i=n(133),o=n(137),s=n(139),a=n(141),u=n(143),c={collection:i,event😮,likes😒,list:a,profile:u,url:l},d😦u,s,i,a,o];function l(t){return r(d,function(e){try{return new e(t)}catch(t){}})}t.exports=function(t){return t?function(t){var e,n;return e😦t.sourceType+\"\").toLowerCase(),(n=c[e])?new n(t):null}(t)||l(t):null}},function(t,e,n){var r=n(15),i=n(145),o=n(24);t.exports=function(t,e,n){return new r(i,o,\"twitter-timeline\",t,e,n)}},function(t,e,n){var r=n(15),i=n(147),o=n(57);t.exports=function(t,e,n){return new r(i,o,\"twitter-tweet\",t,e,n)}},function(t,e,n){var r=n(15),i=n(149),o=n(60);t.exports=function(t,e,n){var s=t&&t.type||\"share\";return new r(i,o,\"hashtag\"==s?\"twitter-hashtag-button\":\"mention\"==s?\"twitter-mention-button\":\"twitter-share-button\",t,e,n)}},function(t,e,n){var r=n(36),i=n(35),o=n(0);t.exports=function(t){var e={widget_origin:i.rootDocumentLocation(),widget_frame:i.isFramed()?i.currentDocumentLocation():null,duration_ms:t.duration,item_ids:t.widgetIds||[]},n😮.aug(t.namespace,{page:\"page\",component:\"performance\"});r.scribe(n,e)}},function(t,e,n){var r=n(0),i=n(134),o😦\"ar\",\"fa\",\"he\",\"ur\"];t.exports={isRtlLang:function(t){return t=String(t).toLowerCase(),r.contains(o,t)},matchLanguage:function(t){return t😦t😦t||\"\").toLowerCase()).replace(\"_\",\"-\"),i(t)?t😦t=t.replace(/-.*/,\"\"),i(t)?t:\"en\")}}},function(t,e,n){var r=n(110),i=n(113);function o(t){return r.settingsLoaded().then(function(e){return e[t]})}function s(){return o(\"experiments\")}t.exports={shouldObtainCookieConsent:function(){return o(\"shouldObtainCookieConsent\")},getExperiments😒,getExperiment:function(t){return s().then(function(e){if(!e[t])throw new Error(\"Experiment not found\");return e[t]})},getActiveExperimentDataString:function(){return s().then(function(t){var e=Object.keys(t).reduce(function(e,n){var r;return t[n].version&&(r=n.split(\"_\").slice(-1)[0],e.push(r+\";\"+t[n].bucket)),e},[]);return i(e.join(\",\"))})},getExperimentKeys:function(){return s().then(function(t){return Object.keys(t)})},load:function(){r.load()}}},function(t){t.exports={tweetButtonHtmlPath:\"/widgets/tweet_button.d753e00c3e838c1b2558149bd3f6ecb8.{{lang}}.html\",followButtonHtmlPath:\"/widgets/follow_button.d753e00c3e838c1b2558149bd3f6ecb8.{{lang}}.html\",hubHtmlPath:\"/widgets/hub.html\",widgetIframeHtmlPath:\"/widgets/widget_iframe.d753e00c3e838c1b2558149bd3f6ecb8.html\",resourceBaseUrl:\"https://platform.twitter.com\"}},function(t,e,n){var r=n(3),i=n(95),o=n(23),s=n(11),a={favorite😦\"favorite\",\"like\"],follow😦\"follow\"],like😦\"favorite\",\"like\"],retweet😦\"retweet\"],tweet😦\"tweet\"]};function u(t){this.srcEl😦],this.element=t}u.open=function(t,e,n){var u😦r.intentType(t)||\"\").toLowerCase();r.isTwitterURL(t)&&(function(t,e){i.open(t,{},e)}(t,n),e&&o.trigger(\"click\",{target:e,region:\"intent\",type:\"click\",data:{}}),e&&a[u]&&a[u].forEach(function(n){o.trigger(n,{target:e,region:\"intent\",type:n,data:function(t,e){var n😒.decodeURL(e);switch(t){case\"favorite\":case\"like\":return{tweet_id:n.tweet_id};case\"follow\":return{screen_name:n.screen_name,user_id:n.user_id};case\"retweet\":return{source_tweet_id:n.tweet_id};default:return{}}}(u,t)})}))},t.exports=u},function(t,e){t.exports={getTimezoneOffset:function(){var t😦new Date).toString().match(/(GMT[+-]?\\d+)/);return t&&t[0]||\"GMT\"}}},function(t,e,n){var r=n(5),i=n(9),o=n(2),s=n(0),a=n(11),u=\"cb\",c😮;t.exports={fetch:function(t,e,n,d){var l,f,h;return d=function(t){if(t)return t.replace(/[^\\w$]/g,\"_\")}(d||u+c++),l=i.fullPath([\"callbacks\",d]),f=r.createElement(\"script\"),h=new o,e😒.aug({},e,{callback:l,suppress_response_codes:!0}),i.set([\"callbacks\",d],function(t){var e;t😦e=n(t||!1)).resp,e.success?h.resolve(t):h.reject(t),f.onload=f.onreadystatechange=null,f.parentNode&&f.parentNode.removeChild(f),i.unset([\"callbacks\",d])}),f.onerror=function(){h.reject(new Error(\"failed to fetch \"+f.src))},f.src=a.url(t,e),f.async=\"async\",r.body.appendChild(f),h.promise}}},function(t,e,n){var r=n(2),i=n(100),o=n(7);function s(t){this._inputsQueue😦],this._task=t,this._hasFlushBeenScheduled=!1}s.prototype.add=function(t){var e=new r;return this._inputsQueue.push({input:t,taskDoneDeferred:e}),this._hasFlushBeenScheduled||(this._hasFlushBeenScheduled=!0,i(o(this._flush,this))),e.promise},s.prototype._flush=function(){try{this._task.call(null,this._inputsQueue)}catch(t){this._inputsQueue.forEach(function(e){e.taskDoneDeferred.reject(t)})}this._inputsQueue😦],this._hasFlushBeenScheduled=!1},t.exports😒},function(t,e){t.exports=function(t,e){return t.reduce(function(t,n){var r=e(n);return t[r]=t[r]||[],t[r].push(n),t},{})}},function(t,e,n){var r=n(5),i=n(😎,o=n(3);function s(t,e){var n,r;return e=e||i,/^https?😕/\\//.test(t)?t😕^\\/\\//.test(t)?e.protocol+t😦n=e.host+(e.port.length?\":\"+e.port:\"\"),0!==t.indexOf(\"/\")&&((r=e.pathname.split(\"/\")).pop(),r.push(t),t=\"/\"+r.join(\"/\")),[e.protocol,\"//\",n,t].join(\"\"))}t.exports={absolutize😒,getCanonicalURL:function(){for(var t,e=r.getElementsByTagName(\"link\"),n😮;e[n];n++)if(\"canonical\"==(t=e[n]).rel)return s(t.href)},getScreenNameFromPage:function(){for(var t,e,n,i😦r.getElementsByTagName(\"a\"),r.getElementsByTagName(\"link\")],s😮,a😮,u😕\\bme\\b/;t=i[s];s++)for(a😮;e=t[a];a++)if(u.test(e.rel)&&(n😮.screenName(e.href)))return n}}},function(t,e,n){var r=n(😎,i😕^[^#?]*\\.(gov|mil)(😕d+)?([#?].*)?$/i,o={};function s(t){return t in o?o[t]😮[t]=i.test(t)}t.exports={isUrlSensitive😒,isHostPageSensitive:function(){return s(r.host)}}},function(t,e,n){var r=n(19),i=n(51),o=n(11),s=n(33),a=n(0),u=n(9).get(\"scribeCallback\"),c=2083,d😦],l😮.url(s.CLIENT_EVENT_ENDPOINT,{dnt😮,l:\"\"}),f=encodeURIComponent(l).length;function h(t,e,n,r){var i=!a.isObject(t),o=!!e&&!a.isObject(e);i||o||(u&&u(arguments),p(s.formatClientEventNamespace(t),s.formatClientEventData(e,n,r),s.CLIENT_EVENT_ENDPOINT))}function p(t,e,n){var r,u;n&&a.isObject(t)&&a.isObject(e)&&(i.log(t,e),r😒.flattenClientEventPayload(t,e),u={l😒.stringify(r)},s.noticeSeen(t)&&(u.notice_seen=!0),r.dnt&&(u.dnt=1),w(o.url(n,u)))}function m(t,e,n,r){var i=!a.isObject(t),o=!!e&&!a.isObject(e);if(!i&&!o)return v(s.flattenClientEventPayload(s.formatClientEventNamespace(t),s.formatClientEventData(e,n,r)))}function v(t){return d.push(t),d}function g(t){return encodeURIComponent(t).length+3}function w(t){return(new Image).src=t}t.exports={canFlushOneItem:function(t){var e=g(s.stringify(t));return f+e<c},_enqueueRawObject:v,scribe😛,clientEvent:h,clientEvent2:function(t,e,n){return h(t,e,n,2)},enqueueClientEvent:m,flushClientEvents:function(){var t;return d.length>1&&m({page:\"widgets_js\",component:\"scribe_pixel\",action:\"batch_log\"},{}),t😛,d😦],t.reduce(function(e,n,r){var i=e.length,o=i&&e[i-1];return r+1==t.length&&n.event_namespace&&\"batch_log\"==n.event_namespace.action&&(n.message😦\"entries:\"+r,\"requests:\"+i].join(\"/\")),function t(e){return Array.isArray(e)||(e😦e]),e.reduce(function(e,n){var r,i😒.stringify(n),o=g(i);return f+o<c?e=e.concat(i)😦r😒.splitLogEntry(n)).length>1&&(e=e.concat(t(r))),e},[])}(n).forEach(function(t){var n=g(t);(!o||o.urlLength+n>c)&&(o={urlLength:f,items😦]},e.push(o)),o.urlLength+=n,o.items.push(t)}),e},[]).map(function(t){var e={l:t.items};return r.enabled()&&(e.dnt=1),w(o.url(s.CLIENT_EVENT_ENDPOINT,e))})},interaction:function(t,e,n,r){var i😒.extractTermsFromDOM(t.target||t.srcElement);i.action=r||\"click\",h(i,e,n)}}},function(t,e,n){var r=n(0),i=n(40);t.exports=function(t,e){return i(t,e)?[t]:r.toRealArray(t.querySelectorAll(e))}},function(t,e){t.exports=function(t,e,n){for(var r,i😮;i<t.length;i++)if(r=e.call(n,t[i],i,t))return r}},function(t,e){t.exports=function(){return Math.floor(+new Date/9e5)}},function(t,e,n){var r=n(12);t.exports=function(t){var e,n;return e=t.headers&&t.headers.status,!(n=t&&!t.error&&200===e)&&t.headers&&t.headers.message&&r.publicError(t.headers.message),{success:n,resp:t}}},function(t,e,n){var r,i=n(28),o😮;function s(){r&&r.length===o&&(i.emitter.trigger(i.ALL_WIDGETS_AND_IMAGES_LOADED,r),r=null)}i.emitter.bind(i.ALL_WIDGETS_RENDER_END,function(t){r=t.widgets,s()}),t.exports={reportImagesLoadForAWidget:function(){o++,s()}}},,,,,,,,function(t,e,n){var r,i=n(2),o=n(5),s=n(93),a=n(46),u=n(9),c=n(94),d=n(23),l=n(97),f=n(150),h=n(158),p=n(159),m=n(28);n(160),m.emitter.trigger(m.START),u.set(\"widgets.init\",!0),a.set(\"init\",!0),p(),r=new i,s.exposeReadyPromise(r.promise,a.base,\"_e\"),a.set(\"widgets\",f),a.set(\"widgets.load\",l.load),a.set(\"events\",d),h(function(){r.resolve(a.base),c.attachTo(o),l.loadPage()})},function(t,e){t.exports=navigator},function(t,e,n){var r=n(7);t.exports={exposeReadyPromise:function(t,e,n){e.ready=r(t.then,t),n&&Array.isArray(e[n])&&(e[n].forEach(r(t.then,t)),delete e[n])}}},function(t,e,n){var r=n(😎,i=n(34),o=n(31),s=n(71),a=n(3);function u(t){var e,n,u;t.altKey||t.metaKey||t.shiftKey||(e😮.closest(function(t){return\"A\"===t.tagName||\"AREA\"===t.tagName},t.target))&&a.isIntentURL(e.href)&&(n😦n😦n😦u=e.href,\"original_referer=\"+r.href].join(-1==u.indexOf(\"?\")?\"?\":\"&\")).replace(/^http[😃/,\"https:\")).replace(/^\\/\\//,\"https://\"),s.open(n,e),i.preventDefault(t))}t.exports={attachTo:function(t){t.addEventListener(\"click\",u,!1)}}},function(t,e,n){var r,i=n(1),o=n(96),s=n(34),a=n(31),u=n(20),c=n(3),d=n(22),l=n(0),f=\"intent_\",h=i.screen.width,p=i.screen.height;function m(t,e){function n(t){return Math.round(t/2)}return t>e?{coordinate😮,size:e}:{coordinate:n(e)-n(t),size:t}}function v(t,e,n){var i,o;e=r.parse(e),n=n||{},i=m(e.width,n.width||h),e.left=i.coordinate,e.width=i.size,o=m(e.height,n.height||p),e.top😮.coordinate,e.height😮.size,this.win=t,this.features=function(t){var e😦];return l.forIn(t,function(t,n){e.push(t+\"=\"+n)}),e.join(\",\")}(e)}r😦new o).defaults({width:550,height:520,personalbar:\"0\",toolbar:\"0\",location:\"1\",scrollbars:\"1\",resizable:\"1\"}),v.prototype.open=function(t,e){var n=e&&\"click\"==e.type&&a.closest(\"a\",e.target),r=e&&(e.altKey||e.metaKey||e.shiftKey),i=n&&(u.ios()||u.android());if(c.isTwitterURL(t))return r||i?this😦this.name=f+d.generate(),this.popup=this.win.open(t,this.name,this.features),e&&s.preventDefault(e),this)},v.open=function(t,e,n){return new v(i,e).open(t,n)},t.exports=v},function(t,e,n){var r=n(4),i=n(0);function o(){this.assertions😦],this._defaults={}}o.prototype.assert=function(t,e){return this.assertions.push({fn:t,msg:e||\"assertion failed\"}),this},o.prototype.defaults=function(t){return this._defaults=t||this._defaults,this},o.prototype.require=function(t){var e=this;return(t=Array.isArray(t)?t:i.toRealArray(arguments)).forEach(function(t){e.assert(function(t){return function(e){return r.hasValue(e[t])}}(t),\"required: \"+t)}),this},o.prototype.parse=function(t){var e,n;if(e=i.aug({},this._defaults,t||{}),(n=this.assertions.reduce(function(t,n){return n.fn(e)||t.push(n.msg),t},[])).length>0)throw new Error(n.join(\"\\n\"));return e},t.exports😮},function(t,e,n){var r=n(5),i=n(6),o=n(21),s=n(49),a=n(32),u=n(9),c=n(36),d=n(23),l=n(4),f=n(0),h=n(69),p=n(114),m=n(28);function v(){var t=a.val(\"widgets:autoload\")||!0;return!l.isFalseValue(t)&&(l.isTruthValue(t)?r.body:r.querySelectorAll(t))}function g(t){var e,n;return t😦t=t||r.body).length?f.toRealArray(t)😦t],c.pause(),n=t.reduce(function(t,e){return t.concat(p.reduce(function(t,n){return t.concat(n(e))},[]))},[]),m.emitter.trigger(m.ALL_WIDGETS_RENDER_START,{widgets:n}),e😮.allResolved(n.map(function(t){return s.addWidget(t)})).then(function(t){d.trigger(\"loaded\",{widgets:t}),t&&t.length&&m.emitter.trigger(m.ALL_WIDGETS_RENDER_END,{widgets:t})}),o.always(e,function(){c.resume()}),e}t.exports={load:g,loadPage:function(){var t=v();return h.load(),!1===t?i.resolve()😦u.set(\"widgets.loaded\",!0),g(t))},_getPageLoadTarget:v}},function(t,e,n){var r=n(10),i=n(17),o=n(23),s=n(50),a=n(6),u=n(21);function c(t,e){this._widget=null,this._sandbox=null,this._hydrated=!1,this._insertedIntoDom=!1,this._Sandbox=t.Sandbox,this._factory=t.factory,this._widgetParams=t.parameters,this._resolve=e,this._className=t.className,this._renderedClassName=t.className+\"-rendered\",this._errorClassName=t.className+\"-error\",this._srcEl=t.srcEl,this._targetGlobal=function(t){return(t.srcEl||t.targetEl).ownerDocument.defaultView}(t),this._insertionStrategy=function(e){var n=t.srcEl,r=t.targetEl;n?r.insertBefore(e,n):r.appendChild(e)}}c.fromRawTask=function(t){return new c(t.input,t.taskDoneDeferred.resolve)},c.prototype.initialize=function(){var t=this,e=new this._Sandbox(this._targetGlobal);return this._factory(this._widgetParams,e).then(function(n){return t._widget=n,t._sandbox=e,n})},c.prototype.insertIntoDom=function(){var t=this;return this._widget?this._sandbox.insert(this._widget.id,{class😦this._className,this._renderedClassName].join(\" \")},null,this._insertionStrategy).then(function(){t._insertedIntoDom=!0}):a.reject(new Error(\"cannot insert widget into DOM before it is initialized\"))},c.prototype.hydrate=function(){var t=this;return this._widget?this._widget.hydrate().then(function(){t._hydrated=!0}):a.reject(new Error(\"cannot hydrate widget before it is initialized\"))},c.prototype.render=function(){var t=this;function e(e){return s(t._sandbox.sandboxEl).then(function(){return a.reject(e)})}return this._hydrated?this._insertedIntoDom?t._widget.render(t._sandbox).then(function(){return t._sandbox.onResize(function(){return t._widget.resize().then(function(){o.trigger(\"resize\",{target:t._sandbox.sandboxEl})})}),t._widget.show()}).then(function(){return s(t._srcEl).then(function(){return t._sandbox.sandboxEl})},e):e(new Error(\"cannot render widget before DOM insertion\")):e(new Error(\"cannot render widget before hydration\"))},c.prototype.fail=function(){var t=this;return this._srcEl?u.always(i.write(function(){r.add(t._srcEl,t._errorClassName)}),function(){o.trigger(\"rendered\",{target:t._srcEl}),t._resolve(t._srcEl)})😦t._resolve(),a.resolve())},c.prototype.success=function(){o.trigger(\"rendered\",{target:this._sandbox.sandboxEl}),this._resolve(this._sandbox.sandboxEl)},t.exports=c},function(t,e,n){var r;!function(){\"use strict\";var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)};function o(){this.frames😦],this.lastId😮,this.raf=i,this.batch={hash:{},read😦],write😦],mode:null}}o.prototype.read=function(t,e){var n=this.add(\"read\",t,e),r=n.id;return this.batch.read.push(n.id),\"reading\"===this.batch.mode||this.batch.scheduled?r😦this.scheduleBatch(),r)},o.prototype.write=function(t,e){var n=this.add(\"write\",t,e),r=this.batch.mode,i=n.id;return this.batch.write.push(n.id),\"writing\"===r||\"reading\"===r||this.batch.scheduled?i😦this.scheduleBatch(),i)},o.prototype.defer=function(t,e,n){\"function\"==typeof t&&(n=e,e=t,t=1);var r=this,i=t-1;return this.schedule(i,function(){r.run({fn:e,ctx:n})})},o.prototype.clear=function(t){if(\"function\"==typeof t)return this.clearFrame(t);t=Number(t);var e=this.batch.hash[t];if(e){var n=this.batch[e.type],r=n.indexOf(t);delete this.batch.hash[t],~r&&n.splice(r,1)}},o.prototype.clearFrame=function(t){var e=this.frames.indexOf(t);~e&&this.frames.splice(e,1)},o.prototype.scheduleBatch=function(){var t=this;this.schedule(0,function(){t.batch.scheduled=!1,t.runBatch()}),this.batch.scheduled=!0},o.prototype.uniqueId=function(){return++this.lastId},o.prototype.flush=function(t){for(var e;e=t.shift()😉this.run(this.batch.hash[e])},o.prototype.runBatch=function(){try{this.batch.mode=\"reading\",this.flush(this.batch.read),this.batch.mode=\"writing\",this.flush(this.batch.write),this.batch.mode=null}catch(t){throw this.runBatch(),t}},o.prototype.add=function(t,e,n){var r=this.uniqueId();return this.batch.hash[r]={id:r,fn:e,ctx:n,type:t}},o.prototype.run=function(t){var e=t.ctx||this,n=t.fn;if(delete this.batch.hash[t.id],!this.onError)return n.call(e);try{n.call(e)}catch(t){this.onError(t)}},o.prototype.loop=function(){var t,e=this,n=this.raf,r=!1;function i(){var t=e.frames.shift();e.frames.length?n(i):e.looping=!1,t&&t()}this.looping||(t=setTimeout(function(){r=!0,i()},500),n(function(){r||(clearTimeout(t),i())}),this.looping=!0)},o.prototype.schedule=function(t,e){return this.frames[t]?this.schedule(t+1,e)😦this.loop(),this.frames[t]=e)};var s=new o;void 0!==t&&t.exports?t.exports😒:void 0===(r=function(){return s}.call(e,n,e,t))||(t.exports=r)}()},function(t,e,n){var r=n(45).Promise;t.exports=r._asap},function(t,e,n){var r,i,o,s=n(5),a=n(1),u=n(29),c=n(19),d=n(2),l=n(6),f=n(51),h=n(33),p=n(0),m=n(24),v=n(9).get(\"scribeCallback\"),g=Math.floor(1e3*Math.random())+\"_\",w=\"rufous-frame-\"+g+\"-\",y=\"rufous-form-\"+g+\"-\",b😮,_=!1,E=new d;function x(){var t😮.createElement(\"form\"),e😮.createElement(\"input\"),n😮.createElement(\"input\");return b++,t.action=h.CLIENT_EVENT_ENDPOINT,t.method=\"POST\",t.target=w+b,t.id=y+b,e.type=\"hidden\",e.name=\"dnt\",e.value=c.enabled(),n.type=\"hidden\",n.name=\"tfw_redirect\",n.value=h.RUFOUS_REDIRECT,t.appendChild(e),t.appendChild(n),t}function A(){var t=w+b;return u({id:t,name:t,width😮,height😮,border😮},{display:\"none\"},o.doc)}t.exports={clientEvent:function(t,e,n,i){(function(t,e){var n=!p.isObject(t),r=!!e&&!p.isObject(e),i=n||r;return i})(t,e)||(v&&v(arguments),E.promise.then(function(){!function(t,e){var n,i,s😜.isObject(t)&&p.isObject(e)&&(f.log(t,e),s=h.flattenClientEventPayload(t,e),(n=r.firstChild).value=+(+n.value||s.dnt||0),(i😮.createElement(\"input\")).type=\"hidden\",i.name=\"l\",i.value=h.stringify(s),r.appendChild(i))}(h.formatClientEventNamespace(t),h.formatClientEventData(e,n,i))}))},flush:function(){return E.promise.then(function(){var t;return r.children.length<=2?l.reject()😦t=l.all([o.doc.body.appendChild(r),o.doc.body.appendChild(i)]).then(function(t){var e=t[0],n=t[1];return n.addEventListener(\"load\",function(){!function(t,e){return function(){var n=t.parentNode;n&&(n.removeChild(t),n.removeChild(e))}}(e,n)()}),e.submit(),t}),r=x(),i=A(),t)})},init:function(){return _?E.promise:((o=new m(a)).insert(\"rufous-sandbox\",null,{display:\"none\"},function(t){s.body.appendChild(t)}).then(function(){o.setTitle(\"Twitter analytics iframe\"),r=x(),i=A(),E.resolve([r,i])}),_=!0,E.promise)}}},function(t,e,n){var r=n(0);t.exports=function t(e){var n😦];return e.forEach(function(e){var i=r.isType(\"array\",e)?t(e)😦e];n=n.concat(i)}),n}},function(t,e){t.exports=function(t){return t.filter(function(e,n){return t.indexOf(e)===n})}},function(t,e,n){var r=n(38),i=n(0),o=n(106);function s(){r.apply(this,arguments)}s.prototype=Object.create(r.prototype),i.aug(s.prototype,{factory😮}),t.exports😒},function(t,e,n){var r=n(21),i=n(0),o=n(7);t.exports={before:function(t,e){return function(){var n,i=this,o=arguments;return n=e.apply(this,arguments),r.isPromise(n)?n.then(function(){return t.apply(i,o)}):t.apply(this,arguments)}},after:function(t,e){return function(){var n,i=this,o=arguments;function s(t,e){return r.isPromise(e)?e.then(function(){return t}):t}return n=t.apply(this,arguments),r.isPromise(n)?n.then(function(t){return s(t,e.apply(i,o))})😒(n,e.apply(this,arguments))}},around:function(t,e){return function(){var n=i.toRealArray(arguments);return n.unshift(o(t,this)),e.apply(this,n)}}}},function(t,e,n){var r=n(10),i=n(17),o=n(39),s=n(6),a=n(0);t.exports=function(){var t😮();function e(e){t.apply(this,arguments),Object.defineProperty(this,\"targetGlobal\",{value:e})}return e.prototype=Object.create(t.prototype),a.aug(e.prototype,{id:null,initialized:!1,width😮,height😮,sandboxEl:null,insert:function(){return s.reject()},onResize:function(){},addClass:function(t){var e=this.sandboxEl;return t=Array.isArray(t)?t😦t],i.write(function(){t.forEach(function(t){r.add(e,t)})})},removeClass:function(t){var e=this.sandboxEl;return t=Array.isArray(t)?t😦t],i.write(function(){t.forEach(function(t){r.remove(e,t)})})},styleSelf:function(t){var e=this;return i.write(function(){a.forIn(t,function(t,n){e.sandboxEl.style[t]=n})})}}),e}},function(t,e,n){var r=n(5),i=n(10),o=n(17),s=n(52),a=n(25),u=n(53),c=n(42),d=n(43),l=n(29),f=n(12),h=n(44),p=n(2),m=n(6),v=n(0),g=n(9),w=n(22),y=n(7),b={allowfullscreen:\"true\"},_={position:\"absolute\",visibility:\"hidden\",display:\"block\",width:\"0px\",height:\"0px\",padding:\"0\",border:\"none\"},E={position:\"static\",visibility:\"visible\"},x=\"SandboxRoot\",A=\".SandboxRoot { display: none; }\",T=50;function S(t,e,n,r){return e=v.aug({id:t},b,e),n=v.aug({},_,n),l(e,n,r)}function R(t,e,n,i,s){var a=new p,u=w.generate(),c😒(t,e,n,s);return g.set([\"sandbox\",u],function(){var t=c.contentWindow.document;o.write(function(){t.write(\"<!DOCTYPE html><html><head></head><body></body></html>\")}).then(function(){t.close(),a.resolve(c)})}),c.src😦\"javascript:\",'document.write(\"\");',\"try { window.parent.document; }\",'catch (e) { document.domain=\"'+r.domain+'\"; }',\"window.parent.\"+g.fullPath([\"sandbox\",u])+\"();\"].join(\"\"),c.addEventListener(\"error\",a.reject,!1),o.write(function(){i.parentNode.replaceChild(c,i)}),a.promise}t.exports=a.couple(n(54),function(t){t.overrideProperty(\"id\",{get:function(){return this.sandboxEl&&this.sandboxEl.id}}),t.overrideProperty(\"initialized\",{get:function(){return!!this.win}}),t.overrideProperty(\"width\",{get:function(){return this._width}}),t.overrideProperty(\"height\",{get:function(){return this._height}}),t.overrideProperty(\"sandboxEl\",{get:function(){return this.iframeEl}}),t.defineProperty(\"iframeEl\",{get:function(){return this._iframe}}),t.defineProperty(\"rootEl\",{get:function(){return this.doc&&this.doc.documentElement}}),t.defineProperty(\"widgetEl\",{get:function(){return this.doc&&this.doc.body.firstElementChild}}),t.defineProperty(\"win\",{get:function(){return this.iframeEl&&this.iframeEl.contentWindow}}),t.defineProperty(\"doc\",{get:function(){return this.win&&this.win.document}}),t.define(\"_updateCachedDimensions\",function(){var t=this;return o.read(function(){var e,n=h(t.sandboxEl);\"visible\"==t.sandboxEl.style.visibility?t._width=n.width😦e=h(t.sandboxEl.parentElement).width,t._width=Math.min(n.width,e)),t._height=n.height})}),t.define(\"_setTargetToBlank\",function(){var t=this.createElement(\"base\");t.target=\"_blank\",this.doc.head.appendChild(t)}),t.define(\"_didResize\",function(){var t=this,e=this._resizeHandlers.slice(0);return this._updateCachedDimensions().then(function(){e.forEach(function(e){e(t)})})}),t.define(\"setTitle\",function(t){this.iframeEl.title=t}),t.override(\"createElement\",function(t){return this.doc.createElement(t)}),t.override(\"createFragment\",function(){return this.doc.createDocumentFragment()}),t.override(\"htmlToElement\",function(t){var e;return(e=this.createElement(\"div\")).innerHTML=t,e.firstElementChild}),t.override(\"hasSelectedText\",function(){return!!s.getSelectedText(this.win)}),t.override(\"addRootClass\",function(t){var e=this.rootEl;return t=Array.isArray(t)?t😦t],this.initialized?o.write(function(){t.forEach(function(t){i.add(e,t)})}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"removeRootClass\",function(t){var e=this.rootEl;return t=Array.isArray(t)?t😦t],this.initialized?o.write(function(){t.forEach(function(t){i.remove(e,t)})}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"hasRootClass\",function(t){return i.present(this.rootEl,t)}),t.define(\"addStyleSheet\",function(t,e){var n,r=new p;return this.initialized?((n=this.createElement(\"link\")).type=\"text/css\",n.rel=\"stylesheet\",n.href=t,n.addEventListener(\"load\",r.resolve,!1),n.addEventListener(\"error\",r.reject,!1),o.write(y(e,null,n)).then(function(){return u(t).then(r.resolve,r.reject),r.promise})):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"prependStyleSheet\",function(t){var e=this.doc;return this.addStyleSheet(t,function(t){var n=e.head.firstElementChild;return n?e.head.insertBefore(t,n):e.head.appendChild(t)})}),t.override(\"appendStyleSheet\",function(t){var e=this.doc;return this.addStyleSheet(t,function(t){return e.head.appendChild(t)})}),t.define(\"addCss\",function(t,e){var n;return c.inlineStyle()?((n=this.createElement(\"style\")).type=\"text/css\",n.appendChild(this.doc.createTextNode(t)),o.write(y(e,null,n)))😦f.devError(\"CSP enabled; cannot embed inline styles\"),m.resolve())}),t.override(\"prependCss\",function(t){var e=this.doc;return this.addCss(t,function(t){var n=e.head.firstElementChild;return n?e.head.insertBefore(t,n):e.head.appendChild(t)})}),t.override(\"appendCss\",function(t){var e=this.doc;return this.addCss(t,function(t){return e.head.appendChild(t)})}),t.override(\"makeVisible\",function(){var t=this;return this.styleSelf(E).then(function(){t._updateCachedDimensions()})}),t.override(\"injectWidgetEl\",function(t){var e=this;return this.initialized?this.widgetEl?m.reject(new Error(\"widget already injected\"))😮.write(function(){e.doc.body.appendChild(t)}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"matchHeightToContent\",function(){var t,e=this;return o.read(function(){t=e.widgetEl?h(e.widgetEl).height😮}),o.write(function(){e.sandboxEl.style.height=t+\"px\"}).then(function(){return e._updateCachedDimensions()})}),t.override(\"matchWidthToContent\",function(){var t,e=this;return o.read(function(){t=e.widgetEl?h(e.widgetEl).width😮}),o.write(function(){e.sandboxEl.style.width=t+\"px\"}).then(function(){return e._updateCachedDimensions()})}),t.after(\"initialize\",function(){this._iframe=null,this._width=this._height😮,this._resizeHandlers😦]}),t.override(\"insert\",function(t,e,n,r){var i=this,s=new p,a=this.targetGlobal.document,u😒(t,e,n,a);return o.write(y(r,null,u)),u.addEventListener(\"load\",function(){(function(t){try{t.contentWindow.document}catch(t){return m.reject(t)}return m.resolve(t)})(u).then(null,y(R,null,t,e,n,u,a)).then(s.resolve,s.reject)},!1),u.addEventListener(\"error\",s.reject,!1),s.promise.then(function(t){var e😛(i._didResize,T,i);return i._iframe=t,i.win.addEventListener(\"resize\",e,!1),m.all([i._setTargetToBlank(),i.addRootClass(😆,i.prependCss(A)])})}),t.override(\"onResize\",function(t){this._resizeHandlers.push(t)}),t.after(\"styleSelf\",function(){return this._updateCachedDimensions()})})},function(t,e){t.exports=function(){throw new Error(\"unimplemented method\")}},function(t,e,n){var r=n(2),i=n(7),o=100,s=3e3;function a(t,e){this._inputsQueue😦],this._task=t,this._isPaused=!1,this._flushDelay=e&&e.flushDelay||o,this._pauseLength=e&&e.pauseLength||s,this._flushTimeout=void 0}a.prototype.add=function(t){var e=new r;return this._inputsQueue.push({input:t,taskDoneDeferred:e}),this._scheduleFlush(),e.promise},a.prototype._scheduleFlush=function(){this._isPaused||(clearTimeout(this._flushTimeout),this._flushTimeout=setTimeout(i(this._flush,this),this._flushDelay))},a.prototype._flush=function(){try{this._task.call(null,this._inputsQueue)}catch(t){this._inputsQueue.forEach(function(e){e.taskDoneDeferred.reject(t)})}this._inputsQueue😦],this._flushTimeout=void 0},a.prototype.pause=function(t){clearTimeout(this._flushTimeout),this._isPaused=!0,!t&&this._pauseLength&&setTimeout(i(this.resume,this),this._pauseLength)},a.prototype.resume=function(){this._isPaused=!1,this._scheduleFlush()},t.exports=a},function(t,e,n){var r,i=n(70),o=n(29),s=n(2),a=n(5),u=n(18),c=n(20),d=n(30),l=n(😎,f=n(12),h=n(111),p=n(55),m=n(9),v=n(11),g=n(112),w=n(0),y=n(1),b😛(function(){return new s});function _(t){var e=t||{should_obtain_cookie_consent:!0,experiments:{}};return new g(e.should_obtain_cookie_consent,e.experiments)}t.exports={load:function(){var t,e,n,s;if(c.ie9()||c.ie10()||\"http:\"!==l.protocol&&\"https:\"!==l.protocol)return f.devError(\"Using default settings due to unsupported browser or protocol.\"),r=_(),void b().resolve();t={origin:l.origin},u.settings().indexOf(\"localhost\")>-1&&(t.localSettings=!0),e=v.url(i.resourceBaseUrl+i.widgetIframeHtmlPath,t),n=function(t){var n;if(e.substr(0,t.origin.length)===t.origin)try{(n=\"string\"==typeof t.data?d.parse(t.data):t.data).namespace===h.settings&&(r=_(n.settings),b().resolve())}catch(t){f.devError(t)}},y.addEventListener(\"message\",n),s😮({src:e,title:\"Twitter settings iframe\"},{display:\"none\"}),a.body.appendChild(s)},settingsLoaded:function(){var t,e,n;return t=new s,e=m.get(\"experimentOverride\"),b().promise.then(function(){e&&e.name&&e.assignment&&((n={})[e.name]={bucket:e.assignment},r.experiments=w.aug(r.experiments,n)),t.resolve(r)}).catch(function(e){t.reject(e)}),t.promise}}},function(t,e){t.exports={settings:\"twttr.settings\"}},function(t,e){t.exports=function(t,e){this.shouldObtainCookieConsent=t,this.experiments=e||{}}},function(t,e){t.exports=function(t){return t.split(\"\").map(function(t){return t.charCodeAt(0).toString(16)}).join(\"\")}},function(t,e,n){t.exports😦n(115),n(120),n(128),n(130),n(132),n(146),n(148)]},function(t,e,n){var r=n(11),i=n(4),o=n(0),s=n(13),a=n(14)(),u=n(56),c=\"a.twitter-dm-button\";t.exports=function(t){return a(t,c).map(function(t){return u(function(t){var e=t.getAttribute(\"data-show-screen-name\"),n😒(t),a=t.getAttribute(\"href\"),u=t.getAttribute(\"data-screen-name\"),c=e?i.asBoolean(e):null,d=t.getAttribute(\"data-size\"),l=r.decodeURL(a),f=l.recipient_id,h=t.getAttribute(\"data-text\")||l.text,p=t.getAttribute(\"data-welcome-message-id\")||l.welcomeMessageId;return o.aug(n,{screenName:u,showScreenName:c,size😛,text:h,userId:f,welcomeMessageId😛})}(t),t.parentNode,t)})}},function(t,e,n){var r=n(0);t.exports=function t(e){var n;if(e)return n=e.lang||e.getAttribute(\"data-lang\"),r.isType(\"string\",n)?n:t(e.parentElement)}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return n.e(2).then(function(r){var o;try{o=n(84),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(119),i=n(1),o=n(10),s=n(34),a=n(17),u=n(52),c=n(25),d=n(53),l=n(42),f=n(44),h=n(7),p=n(43),m=n(6),v=n(0),g=50,w={position:\"absolute\",visibility:\"hidden\",display:\"block\",transform:\"rotate(0deg)\"},y={position:\"static\",visibility:\"visible\"},b=\"twitter-widget\",_=\"open\",E=\"SandboxRoot\",x=\".SandboxRoot { display: none; max-height: 10000px; }\";t.exports=c.couple(n(54),function(t){t.defineStatic(\"isSupported\",function(){return!!i.HTMLElement.prototype.attachShadow&&l.inlineStyle()}),t.overrideProperty(\"id\",{get:function(){return this.sandboxEl&&this.sandboxEl.id}}),t.overrideProperty(\"initialized\",{get:function(){return!!this._shadowHost}}),t.overrideProperty(\"width\",{get:function(){return this._width}}),t.overrideProperty(\"height\",{get:function(){return this._height}}),t.overrideProperty(\"sandboxEl\",{get:function(){return this._shadowHost}}),t.define(\"_updateCachedDimensions\",function(){var t=this;return a.read(function(){var e,n=f(t.sandboxEl);\"visible\"==t.sandboxEl.style.visibility?t._width=n.width😦e=f(t.sandboxEl.parentElement).width,t._width=Math.min(n.width,e)),t._height=n.height})}),t.define(\"_didResize\",function(){var t=this,e=this._resizeHandlers.slice(0);return this._updateCachedDimensions().then(function(){e.forEach(function(e){e(t)})})}),t.override(\"createElement\",function(t){return this.targetGlobal.document.createElement(t)}),t.override(\"createFragment\",function(){return this.targetGlobal.document.createDocumentFragment()}),t.override(\"htmlToElement\",function(t){var e;return(e=this.createElement(\"div\")).innerHTML=t,e.firstElementChild}),t.override(\"hasSelectedText\",function(){return!!u.getSelectedText(this.targetGlobal)}),t.override(\"addRootClass\",function(t){var e=this._shadowRootBody;return t=Array.isArray(t)?t😦t],this.initialized?a.write(function(){t.forEach(function(t){o.add(e,t)})}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"removeRootClass\",function(t){var e=this._shadowRootBody;return t=Array.isArray(t)?t😦t],this.initialized?a.write(function(){t.forEach(function(t){o.remove(e,t)})}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"hasRootClass\",function(t){return o.present(this._shadowRootBody,t)}),t.override(\"addStyleSheet\",function(t,e){return this.addCss('@import url(\"'+t+'\");',e).then(function(){return d(t)})}),t.override(\"prependStyleSheet\",function(t){var e=this._shadowRoot;return this.addStyleSheet(t,function(t){var n=e.firstElementChild;return n?e.insertBefore(t,n):e.appendChild(t)})}),t.override(\"appendStyleSheet\",function(t){var e=this._shadowRoot;return this.addStyleSheet(t,function(t){return e.appendChild(t)})}),t.override(\"addCss\",function(t,e){var n;return this.initialized?l.inlineStyle()?((n=this.createElement(\"style\")).type=\"text/css\",n.appendChild(this.targetGlobal.document.createTextNode(t)),a.write(h(e,null,n))):m.resolve():m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"prependCss\",function(t){var e=this._shadowRoot;return this.addCss(t,function(t){var n=e.firstElementChild;return n?e.insertBefore(t,n):e.appendChild(t)})}),t.override(\"appendCss\",function(t){var e=this._shadowRoot;return this.addCss(t,function(t){return e.appendChild(t)})}),t.override(\"makeVisible\",function(){return this.styleSelf(y)}),t.override(\"injectWidgetEl\",function(t){var e=this;return this.initialized?this._shadowRootBody.firstElementChild?m.reject(new Error(\"widget already injected\")):a.write(function(){e._shadowRootBody.appendChild(t)}).then(function(){return e._updateCachedDimensions()}).then(function(){var t😛(e._didResize,g,e);new r(e._shadowRootBody,t)}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"matchHeightToContent\",function(){return m.resolve()}),t.override(\"matchWidthToContent\",function(){return m.resolve()}),t.override(\"insert\",function(t,e,n,r){var i=this.targetGlobal.document,o=this._shadowHost=i.createElement(b),u=this._shadowRoot😮.attachShadow({mode:_}),c=this._shadowRootBody=i.createElement(\"div\");return v.forIn(e||{},function(t,e){o.setAttribute(t,e)}),o.id=t,u.appendChild(c),s.delegate(c,\"click\",\"A\",function(t,e){e.hasAttribute(\"target\")||e.setAttribute(\"target\",\"_blank\")}),m.all([this.styleSelf(w),this.addRootClass(E),this.prependCss(😆,a.write(r.bind(null,o))])}),t.override(\"onResize\",function(t){this._resizeHandlers.push(t)}),t.after(\"initialize\",function(){this._shadowHost=this._shadowRoot=this._shadowRootBody=null,this._width=this._height😮,this._resizeHandlers😦]}),t.after(\"styleSelf\",function(){return this._updateCachedDimensions()})})},function(t,e){var n;(n=function(t,e){function r(t,e){if(t.resizedAttached){if(t.resizedAttached)return void t.resizedAttached.add(e)}else t.resizedAttached=new function(){var t,e;this.q😦],this.add=function(t){this.q.push(t)},this.call=function(){for(t😮,e=this.q.length;t<e;t++)this.q[t].call()}},t.resizedAttached.add(e);t.resizeSensor=document.createElement(\"div\"),t.resizeSensor.className=\"resize-sensor\";var n=\"position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;\",r=\"position: absolute; left: 0; top: 0; transition: 0s;\";t.resizeSensor.style.cssText=n,t.resizeSensor.innerHTML='<div class=\"resize-sensor-expand\" style=\"'+n+'\"><div style=\"'+r+'\"></div></div><div class=\"resize-sensor-shrink\" style=\"'+n+'\"><div style=\"'+r+' width: 200%; height: 200%\"></div></div>',t.appendChild(t.resizeSensor),{fixed:1,absolute:1}[function(t,e){return t.currentStyle?t.currentStyle[e]:window.getComputedStyle?window.getComputedStyle(t,null).getPropertyValue(e):t.style[e]}(t,\"position\")]||(t.style.position=\"relative\");var i,o,s=t.resizeSensor.childNodes[0],a😒.childNodes[0],u=t.resizeSensor.childNodes[1],c😦u.childNodes[0],function(){a.style.width😒.offsetWidth+10+\"px\",a.style.height😒.offsetHeight+10+\"px\",s.scrollLeft😒.scrollWidth,s.scrollTop😒.scrollHeight,u.scrollLeft=u.scrollWidth,u.scrollTop=u.scrollHeight,i=t.offsetWidth,o=t.offsetHeight});c();var d=function(t,e,n){t.attachEvent?t.attachEvent(\"on\"+e,n):t.addEventListener(e,n)},l=function(){t.offsetWidth==i&&t.offsetHeight==o||t.resizedAttached&&t.resizedAttached.call(),c()}😜(s,\"scroll\",l),d(u,\"scroll\",l)}var i=Object.prototype.toString.call(t),o=\"[object Array]\"===i||\"[object NodeList]\"===i||\"[object HTMLCollection]\"===i||\"undefined\"!=typeof jQuery&&t instanceof jQuery||\"undefined\"!=typeof Elements&&t instanceof Elements;if(o)for(var s😮,a=t.length;s<a;s++)r(t[s],e);else r(t,e);this.detach=function(){if(o)for(var e😮,r=t.length;e<r;e++)n.detach(t[e]);else n.detach(t)}}).detach=function(t){t.resizeSensor&&(t.removeChild(t.resizeSensor),delete t.resizeSensor,delete t.resizedAttached)},void 0!==t&&void 0!==t.exports?t.exports=n:window.ResizeSensor=n},function(t,e,n){var r=n(3),i=n(0),o=n(13),s=n(14)(),a=n(59),u=n(4),c=\"a.twitter-follow-button\";t.exports=function(t){return s(t,c).map(function(t){return a(function(t){var e😮(t),n={screenName:r.screenName(t.href),showScreenName:\"false\"!==t.getAttribute(\"data-show-screen-name\"),showCount:\"false\"!==t.getAttribute(\"data-show-count\"),size:t.getAttribute(\"data-size\"),count:t.getAttribute(\"data-count\"),preview:t.getAttribute(\"data-preview\")};return i.forIn(n,function(t,n){var r=e[t];e[t]=u.hasValue(r)?r:n}),e.screenName=e.screenName||e.screen_name,e}(t),t.parentNode,t)})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return n.e(3).then(function(r){var o;try{o=n(85),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(17),i=n(123),o=n(55),s=n(29),a=n(2),u=n(6),c=n(7),d=n(0),l={position:\"absolute\",visibility:\"hidden\",width:\"0px\",height:\"0px\"},f={position:\"static\",visibility:\"visible\"},h={};i(function(t,e,n){var r=h[t];if(r)return e=e||1,n=n||1,r.styleSelf({width:e+\"px\",height:n+\"px\"}).then(function(){r.didResize()})}),t.exports=function(t){t.overrideProperty(\"id\",{get:function(){return this.sandboxEl&&this.sandboxEl.id}}),t.overrideProperty(\"initialized\",{get:function(){return!!this.iframeEl}}),t.overrideProperty(\"width\",{get:function(){return this._width}}),t.overrideProperty(\"height\",{get:function(){return this._height}}),t.overrideProperty(\"sandboxEl\",{get:function(){return this.iframeEl}}),t.defineProperty(\"iframeEl\",{get:function(){return this._iframe}}),t.define(\"updateCachedDimensions\",function(){var t=this;return this.initialized?r.read(function(){t._width=t.sandboxEl.offsetWidth,t._height=t.sandboxEl.offsetHeight}):u.resolve()}),t.define(\"setTitle\",function(t){this.iframeEl.title=t}),t.define(\"makeVisible\",function(){return this.styleSelf(f)}),t.define(\"didResize\",function(){var t=this,e=t._resizeHandlers.length>0;return this.updateCachedDimensions().then(function(){e&&t._resizeHandlers.forEach(function(e){e(t)})})}),t.define(\"loadDocument\",function(t){var e=new a;return this.initialized?this.iframeEl.src?u.reject(new Error(\"widget already loaded\"))😦this.iframeEl.addEventListener(\"load\",e.resolve,!1),this.iframeEl.addEventListener(\"error\",e.reject,!1),this.iframeEl.src=t,e.promise):u.reject(new Error(\"sandbox not initialized\"))}),t.after(\"initialize\",function(){this._iframe=null,this._width=this._height😮,this._resizeHandlers😦]}),t.override(\"insert\",function(t,e,n,i){var a=this;return e😛.aug({id:t},e),n😛.aug({},l,n),this._iframe😒(e,n),h[t]=this,this.onResize(o(function(){a.makeVisible()})),r.write(c(i,null,this._iframe))}),t.override(\"onResize\",function(t){this._resizeHandlers.push(t)}),t.after(\"styleSelf\",function(){return this.updateCachedDimensions()})}},function(t,e,n){var r=n(1),i=n(124),o=n(126),s=n(23),a=n(4),u=n(127);t.exports=function(t){(new i).attachReceiver(new o.Receiver(r,\"twttr.button\")).bind(\"twttr.private.trigger\",function(t,e){var n=u(this);s.trigger(t,{target:n,region:e,type:t,data:{}})}).bind(\"twttr.private.resizeButton\",function(e){var n=u(this),r=n&&n.id,i=a.asInt(e.width),o=a.asInt(e.height);r&&void 0!==i&&void 0!==o&&t(r,i,o)})}},function(t,e,n){var r=n(30),i=n(125),o=n(0),s=n(6),a=n(21),u=\"2.0\";function c(t){this.registry=t||{}}function d(t){var e,n;return e😮.isType(\"string\",t),n😮.isType(\"number\",t),e||n||null===t}function l(t,e){return{jsonrpc:u,id😛(t)?t:null,error:e}}c.prototype._invoke=function(t,e){var n,r,i;n=this.registry[t.method],r=t.params||[],r😮.isType(\"array\",r)?r😦r];try{i=n.apply(e.source||null,r)}catch(t){i😒.reject(t.message)}return a.isPromise(i)?i😒.resolve(i)},c.prototype._processRequest=function(t,e){var n,r;return function(t){var e,n,r;return!!o.isObject(t)&&(e=t.jsonrpc===u,n😮.isType(\"string\",t.method),r=!(\"id\"in t)||d(t.id),e&&n&&r)}(t)?(n=\"params\"in t&&(r=t.params,!o.isObject(r)||o.isType(\"function\",r))?s.resolve(l(t.id,i.INVALID_PARAMS)):this.registry[t.method]?this._invoke(t,{source:e}).then(function(e){return n=t.id,{jsonrpc:u,id:n,result:e};var n},function(){return l(t.id,i.INTERNAL_ERROR)})😒.resolve(l(t.id,i.METHOD_NOT_FOUND)),null!=t.id?n😒.resolve())😒.resolve(l(t.id,i.INVALID_REQUEST))},c.prototype.attachReceiver=function(t){return t.attachTo(this),this},c.prototype.bind=function(t,e){return this.registry[t]=e,this},c.prototype.receive=function(t,e){var n,a,u,c=this;try{u=t,t😮.isType(\"string\",u)?r.parse(u):u}catch(t){return s.resolve(l(null,i.PARSE_ERROR))}return e=e||null,a=((n😮.isType(\"array\",t))?t😦t]).map(function(t){return c._processRequest(t,e)}),n?function(t){return s.all(t).then(function(t){return(t=t.filter(function(t){return void 0!==t})).length?t:void 0})}(a):a[0]},t.exports=c},function(t){t.exports={PARSE_ERROR:{code😶32700,message:\"Parse error\"},INVALID_REQUEST:{code😶32600,message:\"Invalid Request\"},INVALID_PARAMS:{code😶32602,message:\"Invalid params\"},METHOD_NOT_FOUND:{code😶32601,message:\"Method not found\"},INTERNAL_ERROR:{code😶32603,message:\"Internal error\"}}},function(t,e,n){var r=n(😎,i=n(1),o=n(30),s=n(2),a=n(20),u=n(0),c=n(3),d=n(7),l=a.ie9();function f(t,e,n){var r;t&&t.postMessage&&(l?r😦n||\"\")+o.stringify(e):n?(r={})[n]=e:r=e,t.postMessage(r,\"*\"))}function h(t){return u.isType(\"string\",t)?t:\"JSONRPC\"}function p(t,e){return e?u.isType(\"string\",t)&&0===t.indexOf(e)?t.substring(e.length):t&&t[e]?t[e]:void 0:t}function m(t,e){var n=t.document;this.filter=h(e),this.server=null,this.isTwitterFrame=c.isTwitterURL(n.location.href),t.addEventListener(\"message\",d(this._onMessage,this),!1)}function v(t,e){this.pending={},this.target=t,this.isTwitterHost=c.isTwitterURL(r.href),this.filter=h(e),i.addEventListener(\"message\",d(this._onMessage,this),!1)}u.aug(m.prototype,{_onMessage:function(t){var e,n=this;this.server&&(this.isTwitterFrame&&!c.isTwitterURL(t.origin)||(e😛(t.data,this.filter))&&this.server.receive(e,t.source).then(function(e){e&&f(t.source,e,n.filter)}))},attachTo:function(t){this.server=t},detach:function(){this.server=null}}),u.aug(v.prototype,{_processResponse:function(t){var e=this.pending[t.id];e&&(e.resolve(t),delete this.pending[t.id])},_onMessage:function(t){var e;if((!this.isTwitterHost||c.isTwitterURL(t.origin))&&(e😛(t.data,this.filter))){if(u.isType(\"string\",e))try{e😮.parse(e)}catch(t){return}(e=u.isType(\"array\",e)?e😦e]).forEach(d(this._processResponse,this))}},send:function(t){var e=new s;return t.id?this.pending[t.id]=e:e.resolve(),f(this.target,t,this.filter),e.promise}}),t.exports={Receiver:m,Dispatcher:v,_stringifyPayload:function(t){return arguments.length>0&&(l=!!t),l}}},function(t,e,n){var r=n(5);t.exports=function(t){for(var e,n=r.getElementsByTagName(\"iframe\"),i😮;n[i];i++)if((e=n[i]).contentWindow===t)return e}},function(t,e,n){var r=n(4),i=n(0),o=n(3),s=n(13),a=n(14)(),u=n(61),c=\"a.twitter-moment\";t.exports=function(t){return a(t,c).map(function(t){return u(function(t){var e😒(t),n={momentId😮.momentId(t.href),chrome:t.getAttribute(\"data-chrome\"),limit:t.getAttribute(\"data-limit\")};return i.forIn(n,function(t,n){var i=e[t];e[t]=r.hasValue(i)?i:n}),e}(t),t.parentNode,t)})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return Promise.all([n.e(0),n.e(4)]).then(function(r){var o;try{o=n(86),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(0),i=n(13),o=n(14)(),s=n(62),a=\"a.periscope-on-air\",u😕^https?😕/\\/(?:www\\.)?(?:periscope|pscp)\\.tv\\/@?([a-zA-Z0-9_]+)\\/?$/i;t.exports=function(t){return o(t,a).map(function(t){return s(function(t){var e=i(t),n=t.getAttribute(\"href\"),o=t.getAttribute(\"data-size\"),s=u.exec(n)[1];return r.aug(e,{username😒,size😮})}(t),t.parentNode,t)})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return n.e(5).then(function(r){var o;try{o=n(87),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(4),i=n(0),o=n(63),s=n(13),a=n(14)(),u=n(64),c=n(3),d=n(12),l=\"a.twitter-timeline,div.twitter-timeline,a.twitter-grid\",f=\"Embedded Search timelines have been deprecated. See https://twittercommunity.com/t/deprecating-widget-settings/102295.\",h=\"You may have been affected by an update to settings in embedded timelines. See https://twittercommunity.com/t/deprecating-widget-settings/102295.\",p=\"Embedded grids have been deprecated and will now render as timelines. Please update your embed code to use the twitter-timeline class. More info: https://twittercommunity.com/t/update-on-the-embedded-grid-display-type/119564.\";t.exports=function(t){return a(t,l).map(function(t){return u(function(t){var e😒(t),n=t.getAttribute(\"data-show-replies\"),a={isPreconfigured:!!t.getAttribute(\"data-widget-id\"),chrome:t.getAttribute(\"data-chrome\"),tweetLimit:t.getAttribute(\"data-tweet-limit\")||t.getAttribute(\"data-limit\"),ariaLive:t.getAttribute(\"data-aria-polite\"),theme:t.getAttribute(\"data-theme\"),linkColor:t.getAttribute(\"data-link-color\"),borderColor:t.getAttribute(\"data-border-color\"),showReplies:n?r.asBoolean(n):null,profileScreenName:t.getAttribute(\"data-screen-name\"),profileUserId:t.getAttribute(\"data-user-id\"),favoritesScreenName:t.getAttribute(\"data-favorites-screen-name\"),favoritesUserId:t.getAttribute(\"data-favorites-user-id\"),likesScreenName:t.getAttribute(\"data-likes-screen-name\"),likesUserId:t.getAttribute(\"data-likes-user-id\"),listOwnerScreenName:t.getAttribute(\"data-list-owner-screen-name\"),listOwnerUserId:t.getAttribute(\"data-list-owner-id\"),listId:t.getAttribute(\"data-list-id\"),listSlug:t.getAttribute(\"data-list-slug\"),customTimelineId:t.getAttribute(\"data-custom-timeline-id\"),staticContent:t.getAttribute(\"data-static-content\"),url:t.href};return a.isPreconfigured&&(c.isSearchUrl(a.url)?d.publicError(f,t)😛.publicLog(h,t)),\"twitter-grid\"===t.className&&d.publicLog(p,t),(a=i.aug(a,e)).dataSource😮(a),a.id=a.dataSource&&a.dataSource.id,a}(t),t.parentNode,t)})}},function(t,e,n){var r=n(26);t.exports=r.build([n(27),n(136)])},function(t,e,n){var r=n(0),i=n(135);t.exports=function(t){return\"en\"===t||r.contains(i,t)}},function(t,e){t.exports😦\"hi\",\"zh-cn\",\"fr\",\"zh-tw\",\"msa\",\"fil\",\"fi\",\"sv\",\"pl\",\"ja\",\"ko\",\"de\",\"it\",\"pt\",\"es\",\"ru\",\"id\",\"tr\",\"da\",\"no\",\"nl\",\"hu\",\"fa\",\"ar\",\"ur\",\"he\",\"th\",\"cs\",\"uk\",\"vi\",\"ro\",\"bn\",\"el\",\"en-gb\",\"gu\",\"kn\",\"mr\",\"ta\",\"bg\",\"ca\",\"hr\",\"sr\",\"sk\"]},function(t,e,n){var r=n(3),i=n(0),o=n(18),s=\"collection:\";function a(t,e){return r.collectionId(t)||e}t.exports=function(t){t.params({id:{},url:{}}),t.overrideProperty(\"id\",{get:function(){var t=a(this.params.url,this.params.id);return s+t}}),t.overrideProperty(\"endpoint\",{get:function(){return o.timeline([\"collection\"])}}),t.around(\"queryParams\",function(t){return i.aug(t(),{collection_id:a(this.params.url,this.params.id)})}),t.before(\"initialize\",function(){if(!a(this.params.url,this.params.id))throw new Error(\"one of url or id is required\")})}},function(t,e,n){var r=n(26);t.exports=r.build([n(27),n(138)])},function(t,e,n){var r=n(3),i=n(0),o=n(18),s=\"event:\";function a(t,e){return r.eventId(t)||e}t.exports=function(t){t.params({id:{},url:{}}),t.overrideProperty(\"id\",{get:function(){var t=a(this.params.url,this.params.id);return s+t}}),t.overrideProperty(\"endpoint\",{get:function(){return o.timeline([\"event\"])}}),t.around(\"queryParams\",function(t){return i.aug(t(),{event_id:a(this.params.url,this.params.id)})}),t.before(\"initialize\",function(){if(!a(this.params.url,this.params.id))throw new Error(\"one of url or id is required\")})}},function(t,e,n){var r=n(26);t.exports=r.build([n(27),n(140)])},function(t,e,n){var r=n(3),i=n(0),o=n(18),s=\"likes:\";function a(t){return r.likesScreenName(t.url)||t.screenName}t.exports=function(t){t.params({screenName:{},userId:{},url:{}}),t.overrideProperty(\"id\",{get:function(){var t=a(this.params)||this.params.userId;return s+t}}),t.overrideProperty(\"endpoint\",{get:function(){return o.timeline([\"likes\"])}}),t.define(\"_getLikesQueryParam\",function(){var t=a(this.params);return t?{screen_name:t}:{user_id:this.params.userId}}),t.around(\"queryParams\",function(t){return i.aug(t(),this._getLikesQueryParam())}),t.before(\"initialize\",function(){if(!a(this.params)&&!this.params.userId)throw new Error(\"screen name or user id is required\")})}},function(t,e,n){var r=n(26);t.exports=r.build([n(27),n(142)])},function(t,e,n){var r=n(3),i=n(0),o=n(18),s=\"list:\";function a(t){var e=r.listScreenNameAndSlug(t.url)||t;return i.compact({screen_name:e.ownerScreenName,user_id:e.ownerUserId,list_slug:e.slug})}t.exports=function(t){t.params({id:{},ownerScreenName:{},ownerUserId:{},slug:{},url:{}}),t.overrideProperty(\"id\",{get:function(){var t,e,n;return this.params.id?s+this.params.id😦e😦t=a(this.params))&&t.list_slug.replace(/-/g,\"_\"),n=t&&(t.screen_name||t.user_id),s+(n+\"😊+e)}}),t.overrideProperty(\"endpoint\",{get:function(){return o.timeline([\"list\"])}}),t.define(\"_getListQueryParam\",function(){return this.params.id?{list_id:this.params.id}:a(this.params)}),t.around(\"queryParams\",function(t){return i.aug(t(),this._getListQueryParam())}),t.before(\"initialize\",function(){var t=a(this.params);if(i.isEmptyObject(t)&&!this.params.id)throw new Error(\"qualified slug or list id required\")})}},function(t,e,n){var r=n(26);t.exports=r.build([n(27),n(144)])},function(t,e,n){var r=n(3),i=n(4),o=n(0),s=n(18),a=\"profile:\";function u(t,e){return r.screenName(t)||e}t.exports=function(t){t.params({showReplies:{fallback:!1,transform:i.asBoolean},screenName:{},userId:{},url:{}}),t.overrideProperty(\"id\",{get:function(){var t=u(this.params.url,this.params.screenName);return a+(t||this.params.userId)}}),t.overrideProperty(\"endpoint\",{get:function(){return s.timeline([\"profile\"])}}),t.define(\"_getProfileQueryParam\",function(){var t=u(this.params.url,this.params.screenName),e=t?{screen_name:t}:{user_id:this.params.userId};return o.aug(e,{with_replies:this.params.showReplies?\"true\":\"false\"})}),t.around(\"queryParams\",function(t){return o.aug(t(),this._getProfileQueryParam())}),t.before(\"initialize\",function(){if(!u(this.params.url,this.params.screenName)&&!this.params.userId)throw new Error(\"screen name or user id is required\")})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return Promise.all([n.e(0),n.e(6)]).then(function(r){var o;try{o=n(88),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(10),i=n(3),o=n(0),s=n(13),a=n(14)(),u=n(65),c=\"blockquote.twitter-tweet, blockquote.twitter-video\",d😕\\btw-align-(left|right|center)\\b/;t.exports=function(t){return a(t,c).map(function(t){return u(function(t){var e😒(t),n=t.getElementsByTagName(\"A\"),a=n&&n[n.length-1],u=a&&i.status(a.href),c=t.getAttribute(\"data-conversation\"),l=\"none\"==c||\"hidden\"==c||r.present(t,\"tw-hide-thread\"),f=t.getAttribute(\"data-cards\"),h=\"none\"==f||\"hidden\"==f||r.present(t,\"tw-hide-media\"),p=t.getAttribute(\"data-align\")||t.getAttribute(\"align\"),m=t.getAttribute(\"data-link-color\"),v=t.getAttribute(\"data-theme\");return!p&&d.test(t.className)&&(p=RegExp.$1),o.aug(e,{tweetId:u,hideThread:l,hideCard:h,align😛,linkColor:m,theme:v,id:u})}(t),t.parentNode,t)})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return Promise.all([n.e(0),n.e(7)]).then(function(r){var o;try{o=n(89),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(10),i=n(0),o=n(13),s=n(14)(),a=n(66),u=n(4),c=\"a.twitter-share-button, a.twitter-mention-button, a.twitter-hashtag-button\",d=\"twitter-hashtag-button\",l=\"twitter-mention-button\";t.exports=function(t){return s(t,c).map(function(t){return a(function(t){var e😮(t),n={screenName:t.getAttribute(\"data-button-screen-name\"),text:t.getAttribute(\"data-text\"),type:t.getAttribute(\"data-type\"),size:t.getAttribute(\"data-size\"),url:t.getAttribute(\"data-url\"),hashtags:t.getAttribute(\"data-hashtags\"),via:t.getAttribute(\"data-via\"),buttonHashtag:t.getAttribute(\"data-button-hashtag\")};return i.forIn(n,function(t,n){var r=e[t];e[t]=u.hasValue(r)?r:n}),e.screenName=e.screenName||e.screen_name,e.buttonHashtag=e.buttonHashtag||e.button_hashtag||e.hashtag,r.present(t,d)&&(e.type=\"hashtag\"),r.present(t,l)&&(e.type=\"mention\"),e}(t),t.parentNode,t)})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return n.e(3).then(function(r){var o;try{o=n(90),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(0);t.exports=r.aug({},n(151),n(152),n(153),n(154),n(155),n(156),n(157))},function(t,e,n){var r=n(56),i=n(16)([\"userId\"],{},r);t.exports={createDMButton:i}},function(t,e,n){var r=n(59),i=n(16)([\"screenName\"],{},r);t.exports={createFollowButton:i}},function(t,e,n){var r=n(61),i=n(16)([\"momentId\"],{},r);t.exports={createMoment:i}},function(t,e,n){var r=n(62),i=n(16)([\"username\"],{},r);t.exports={createPeriscopeOnAirButton:i}},function(t,e,n){var r=n(😎,i=n(12),o=n(3),s=n(0),a=n(4),u=n(63),c=n(64),d=n(16)([],{},c),l=n(6),f=\"Embedded grids have been deprecated. Please use twttr.widgets.createTimeline instead. More info: https://twittercommunity.com/t/update-on-the-embedded-grid-display-type/119564.\",h={createTimeline😛,createGridFromCollection:function(t){var e😒.toRealArray(arguments).slice(1),n={sourceType:\"collection\",id:t};return e.unshift(n),i.publicLog(f),p.apply(this,e)}};function p(t){var e,n😒.toRealArray(arguments).slice(1);return a.isString(t)||a.isNumber(t)?l.reject(\"Embedded timelines with widget settings have been deprecated. See https://twittercommunity.com/t/deprecating-widget-settings/102295.\")😒.isObject(t)?(t=t||{},n.forEach(function(t){s.isType(\"object\",t)&&function(t){t.ariaLive=t.ariaPolite}(e=t)}),e||(e={},n.push(e)),t.lang=e.lang,t.tweetLimit=e.tweetLimit,t.showReplies=e.showReplies,e.dataSource=u(t),d.apply(this,n)):l.reject(\"data source must be an object.\")}o.isTwitterURL(r.href)&&(h.createTimelinePreview=function(t,e,n){var r={previewParams:t,useLegacyDefaults:!0,isPreviewTimeline:!0};return r.dataSource=u(r),d(e,r,n)}),t.exports=h},function(t,e,n){var r,i=n(0),o=n(65),s=n(16),a😦r😒([\"tweetId\"],{},o),function(){return i.toRealArray(arguments).slice(1).forEach(function(t){i.isType(\"object\",t)&&(t.hideCard=\"none\"==t.cards||\"hidden\"==t.cards,t.hideThread=\"none\"==t.conversation||\"hidden\"==t.conversation)}),r.apply(this,arguments)});t.exports={createTweet:a,createTweetEmbed:a,createVideo:a}},function(t,e,n){var r=n(0),i=n(66),o=n(16),s😮([\"url\"],{type:\"share\"},i),a😮([\"buttonHashtag\"],{type:\"hashtag\"},i),u😮([\"screenName\"],{type:\"mention\"},i);function c(t){return function(){return r.toRealArray(arguments).slice(1).forEach(function(t){r.isType(\"object\",t)&&(t.screenName=t.screenName||t.screen_name,t.buttonHashtag=t.buttonHashtag||t.button_hashtag||t.hashtag)}),t.apply(this,arguments)}}t.exports={createShareButton:c(s),createHashtagButton:c(a),createMentionButton:c(u)}},function(t,e,n){var r,i,o,s=n(5),a=n(1),u😮,c😦],d😒.createElement(\"a\");function l(){var t,e;for(u=1,t😮,e=c.length;t<e;t++)c[t]()}/^loade|c/.test(s.readyState)&&(u=1),s.addEventListener&&s.addEventListener(\"DOMContentLoaded\",i=function(){s.removeEventListener(\"DOMContentLoaded\",i,!1),l()},!1),d.doScroll&&s.attachEvent(\"onreadystatechange\",r=function(){/^c/.test(s.readyState)&&(s.detachEvent(\"onreadystatechange\",r),l())}),o😛.doScroll?function(t){a.self!=a.top?u?t():c.push(t):function(){try{d.doScroll(\"left\")}catch(e){return setTimeout(function(){o(t)},50)}t()}()}:function(t){u?t():c.push(t)},t.exports😮},function(t,e,n){var r=n(41),i=n(9);t.exports=function(){i.set(\"buildVersion\",r.version)}},function(t,e,n){n(161),n(83),n(164)},function(t,e,n){var r=n(162),i=n(28),o=n(67),s=new r,a=function(t){t.widgets&&1===t.widgets.length&&(s.start(),i.emitter.unbind(i.ALL_WIDGETS_RENDER_START,a))},u=function(t){var e;t.widgets&&1===t.widgets.length&&(e=t.widgets[0],s.end(),e.dataset&&e.dataset.tweetId&&o({duration😒.duration(),namespace:{element:\"tweet\",action:\"render\"},widgetIds😦e.dataset.tweetId]})),i.emitter.unbind(i.ALL_WIDGETS_RENDER_END,u)};i.emitter.bind(i.ALL_WIDGETS_RENDER_START,a),i.emitter.bind(i.ALL_WIDGETS_RENDER_END,u)},function(t,e,n){var r=n(163);function i(){}i.prototype.start=function(){this._startTime=r()},i.prototype.end=function(){this._duration=r()-this._startTime},i.prototype.duration=function(){return this._duration},t.exports=i},function(t,e,n){var r=n(1);t.exports=function(){return r.performance&&r.performance.now?r.performance.now():Date.now()}},function(t,e,n){var r=n(28),i=n(67),o=n(165),s=n(3),a=n(1),u=n(0),c=n(20),d=n(58);function l(t){return t.performance.getEntriesByType(\"resource\").filter(function(t){return s.isTwimgURL(t.name)||s.isTwitterURL(t.name)}).reduce(function(t,e){return t[e.name]=e.duration,t},{})}r.emitter.bind(r.ALL_WIDGETS_AND_IMAGES_LOADED,function(t){var e,n,r😦];c.hasPerformanceInformation()&&(e=l(a),d.isSupported()||(r=function(t){return t.reduce(function(t,e){return u.aug(t,l(e.contentDocument.defaultView))},{})}(t)),n=u.aug({},e,r),Object.keys(o).forEach(function(t){!function(t,e,n){var r=Object.keys(t).reduce(function(e,r){return n(r)?e+t[r]:e},0);i({duration:r,namespace:{element:e,action:\"resource\"}})}(n,t,o[t])}))})},function(t,e,n){var r=n(3),i={all:function(){return!0},image:function(t){return r.isTwimgURL(t)},settings:function(t){return r.isSettingsURL(t)},widget_iframe:function(t){return r.isWidgetIframeURL(t)}};t.exports=i}])));",
            "</script>"
          ]
        },
        {
          "lectureTitle": "A Sankey diagram",
          "lectureLines": [
            "<h1 id=\"challenge-10\">Challenge</h1>",
            "<blockquote>",
            "<p>Have you ever tried making a sankey diagram with d3+react, I can’t seem to make it work for some reason.😕 Emil</p>",
            "</blockquote>",
            "<p>No Emil, I have not. Let’s give it a shot! Thanks for finding us a dataset that fits 😃</p>",
            "<p><a href=\"https://reactviz.holiday/datasets/ugr-sankey-openspending.json\">Dataset</a></p>",
            "<h1 id=\"my-solution-10\">My Solution</h1>",
            "<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/SAmKimb8wFo\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen>",
            "</iframe>",
            "<iframe src=\"https://codesandbox.io/embed/m9vy7mr5k8?fontsize=14\" style=\"width:100%; height:500px; border😮; border-radius: 4px; overflow:hidden;\" sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\">",
            "</iframe>",
            "<h2 id=\"what-is-a-sankey-diagram\">What is a Sankey diagram?</h2>",
            "<p><a href=\"https://en.wikipedia.org/wiki/Sankey_diagram\">Sankey diagrams</a> are flow diagrams. They’re often used to show flows of money and other resources between different parts of an organization. Or between different organizations. Sankey originally designed them to show energy flows in factories.</p>",
            "<p>Vertical rectangles represent nodes in the flow, lines connecting the rectangles show how each node contributes to the inputs of the next node. Line thickness correlates to flow magnitude.</p>",
            "<p>One of the most famous Sankey diagrams in history is this visualization of Napoleon’s invasion into Russia.</p>",
            "<p><img src=\"https://upload.wikimedia.org/wikipedia/commons/2/29/Minard.png\"></p>",
            "<p>No I’m not quite sure how to read that either. But it’s cool and it’s old ✌️</p>",
            "<h2 id=\"how-do-you-make-a-sankey-with-react-and-d3\">How do you make a sankey with React and D3?</h2>",
            "<p>Turns out building a Sankey diagram with React and D3 isn’t terribly difficult. A D3 extension library called <a href=\"https://github.com/d3/d3-sankey\">d3-sankey</a> provides a generator for them. Your job is to fill it with data, then render.</p>",
            "<p>The dataset Emil found for us was specifically designed for Sankey diagrams so that was awesome. Thanks Emil. 🙏🏻</p>",
            "<p>I don’t know what <em>our</em> data represents, but you gotta wrangle yours into <code style=\"white-space: pre-wrap;\">nodes</code> and <code style=\"white-space: pre-wrap;\">links</code>.</p>",
            "<ol type=\"1\">",
            "<li><code style=\"white-space: pre-wrap;\">nodes</code> are an array of representative keys, names in our case</li>",
            "<li><code style=\"white-space: pre-wrap;\">links</code> are an array of objects mapping a <code style=\"white-space: pre-wrap;\">source</code> inex to a <code style=\"white-space: pre-wrap;\">target</code> index with a numeric <code style=\"white-space: pre-wrap;\">value</code></li>",
            "</ol>",
            "<div class=\"sourceCode\" id=\"cb273\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode json\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode json\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb273-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"fu\" style=\"color: #06287e;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb273-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"dt\" style=\"color: #902000;\">&quot;nodes&quot;</span><span class=\"fu\" style=\"color: #06287e;\">:</span> <span class=\"ot\" style=\"color: #007020;\">[</span></a>",
            "<a class=\"sourceLine\" id=\"cb273-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"fu\" style=\"color: #06287e;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb273-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"dt\" style=\"color: #902000;\">&quot;name&quot;</span><span class=\"fu\" style=\"color: #06287e;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;Universidad de Granada&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb273-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"fu\" style=\"color: #06287e;\">}</span><span class=\"ot\" style=\"color: #007020;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb273-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"fu\" style=\"color: #06287e;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb273-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"dt\" style=\"color: #902000;\">&quot;name&quot;</span><span class=\"fu\" style=\"color: #06287e;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;De Comunidades Autónomas&quot;</span></a>",
            "<a class=\"sourceLine\" id=\"cb273-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"st\" style=\"color: #4070a0;\">    },</span></a>",
            "<a class=\"sourceLine\" id=\"cb273-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"st\" style=\"color: #4070a0;\">   //...</span></a>",
            "<a class=\"sourceLine\" id=\"cb273-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"st\" style=\"color: #4070a0;\">  ],</span></a>",
            "<a class=\"sourceLine\" id=\"cb273-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"st\" style=\"color: #4070a0;\">  &quot;</span><span class=\"er\" style=\"color: #ff0000; font-weight: bold;\">links</span><span class=\"st\" style=\"color: #4070a0;\">&quot;: [</span></a>",
            "<a class=\"sourceLine\" id=\"cb273-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"st\" style=\"color: #4070a0;\">    {</span></a>",
            "<a class=\"sourceLine\" id=\"cb273-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"st\" style=\"color: #4070a0;\">      &quot;</span><span class=\"er\" style=\"color: #ff0000; font-weight: bold;\">source</span><span class=\"st\" style=\"color: #4070a0;\">&quot;: 19,</span></a>",
            "<a class=\"sourceLine\" id=\"cb273-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"st\" style=\"color: #4070a0;\">      &quot;</span><span class=\"er\" style=\"color: #ff0000; font-weight: bold;\">target</span><span class=\"st\" style=\"color: #4070a0;\">&quot;: 26,</span></a>",
            "<a class=\"sourceLine\" id=\"cb273-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"st\" style=\"color: #4070a0;\">      &quot;</span><span class=\"er\" style=\"color: #ff0000; font-weight: bold;\">value</span><span class=\"st\" style=\"color: #4070a0;\">&quot;: 1150000</span></a>",
            "<a class=\"sourceLine\" id=\"cb273-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"st\" style=\"color: #4070a0;\">    },</span></a>",
            "<a class=\"sourceLine\" id=\"cb273-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"st\" style=\"color: #4070a0;\">    {</span></a>",
            "<a class=\"sourceLine\" id=\"cb273-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"st\" style=\"color: #4070a0;\">      &quot;</span><span class=\"er\" style=\"color: #ff0000; font-weight: bold;\">source</span><span class=\"st\" style=\"color: #4070a0;\">&quot;: 0,</span></a>",
            "<a class=\"sourceLine\" id=\"cb273-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"st\" style=\"color: #4070a0;\">      &quot;</span><span class=\"er\" style=\"color: #ff0000; font-weight: bold;\">target</span><span class=\"st\" style=\"color: #4070a0;\">&quot;: 19,</span></a>",
            "<a class=\"sourceLine\" id=\"cb273-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"st\" style=\"color: #4070a0;\">      &quot;</span><span class=\"er\" style=\"color: #ff0000; font-weight: bold;\">value</span><span class=\"st\" style=\"color: #4070a0;\">&quot;: 283175993</span></a>",
            "<a class=\"sourceLine\" id=\"cb273-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"st\" style=\"color: #4070a0;\">    },</span></a>",
            "<a class=\"sourceLine\" id=\"cb273-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"st\" style=\"color: #4070a0;\">    //...</span></a>",
            "<a class=\"sourceLine\" id=\"cb273-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"st\" style=\"color: #4070a0;\">}</span></a></code></pre></div>",
            "<h3 id=\"turn-data-into-a-sankey-layout\">Turn data into a Sankey layout</h3>",
            "<p>We can keep things simple with a functional component that calculates the Sankey layout on the fly with every render. We’ll need some color stuff too. That was actually the hardest, lol.</p>",
            "<div class=\"sourceCode\" id=\"cb274\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb274-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">{</span> sankey<span class=\"op\" style=\"color: #666666;\">,</span> sankeyLinkHorizontal <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;d3-sankey&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb274-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">//...</span></a>",
            "<a class=\"sourceLine\" id=\"cb274-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb274-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> MysteriousSankey <span class=\"op\" style=\"color: #666666;\">=</span> (<span class=\"op\" style=\"color: #666666;\">{</span> data<span class=\"op\" style=\"color: #666666;\">,</span> width<span class=\"op\" style=\"color: #666666;\">,</span> height <span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb274-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> <span class=\"op\" style=\"color: #666666;\">{</span> nodes<span class=\"op\" style=\"color: #666666;\">,</span> links <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">sankey</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb274-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">nodeWidth</span>(<span class=\"dv\" style=\"color: #40a070;\">15</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb274-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">nodePadding</span>(<span class=\"dv\" style=\"color: #40a070;\">10</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb274-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">extent</span>([[<span class=\"dv\" style=\"color: #40a070;\">1</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">1</span>]<span class=\"op\" style=\"color: #666666;\">,</span> [width <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"dv\" style=\"color: #40a070;\">1</span><span class=\"op\" style=\"color: #666666;\">,</span> height <span class=\"op\" style=\"color: #666666;\">-</span> <span class=\"dv\" style=\"color: #40a070;\">5</span>]])(data)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb274-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> color <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">chroma</span>.<span class=\"at\" style=\"color: #7d9029;\">scale</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;Set3&quot;</span>).<span class=\"at\" style=\"color: #7d9029;\">classes</span>(<span class=\"va\" style=\"color: #19177c;\">nodes</span>.<span class=\"at\" style=\"color: #7d9029;\">length</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb274-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> colorScale <span class=\"op\" style=\"color: #666666;\">=</span> d3</a>",
            "<a class=\"sourceLine\" id=\"cb274-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">scaleLinear</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb274-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">domain</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">nodes</span>.<span class=\"at\" style=\"color: #7d9029;\">length</span>])</a>",
            "<a class=\"sourceLine\" id=\"cb274-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">range</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"dv\" style=\"color: #40a070;\">1</span>])<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>It’s called <code style=\"white-space: pre-wrap;\">MysteriousSankey</code> because I don’t know what our dataset represents. Takes a width, a height, and a data prop.</p>",
            "<p>We get the <code style=\"white-space: pre-wrap;\">sankey</code> generator from <code style=\"white-space: pre-wrap;\">d3-sankey</code>, initialize a new generator with <code style=\"white-space: pre-wrap;\">sankey()</code>, define a width for our nodes and give them some vertical padding. Extent defines the size of our diagram with 2 coordinates: the top left and bottom right corner.</p>",
            "<p>Colors are a little trickier. We use <code style=\"white-space: pre-wrap;\">chroma</code> to define a color scale based on the predefined <code style=\"white-space: pre-wrap;\">Set3</code> brewer category. We split it up into <code style=\"white-space: pre-wrap;\">nodes.length</code> worth of colors - one for each node. But this expects inputs like <code style=\"white-space: pre-wrap;\">0.01</code>, <code style=\"white-space: pre-wrap;\">0.1</code> etc.</p>",
            "<p>To make that easier we define a <code style=\"white-space: pre-wrap;\">colorScale</code> as well. It takes indexes of our nodes and translates them into those 0 to 1 numbers. Feed that into the <code style=\"white-space: pre-wrap;\">color</code> thingy and it returns a color for each node.</p>",
            "<h3 id=\"render-your-sankey\">Render your Sankey</h3>",
            "<p>A good approach to render your Sankey diagram is using two components:</p>",
            "<ol type=\"1\">",
            "<li><code style=\"white-space: pre-wrap;\">&lt;SankeyNode&gt;</code> for each node</li>",
            "<li><code style=\"white-space: pre-wrap;\">&lt;SankeyLink&gt;</code> for each link between them</li>",
            "</ol>",
            "<p>You use them in two loops in the main <code style=\"white-space: pre-wrap;\">&lt;MysteriousSankey&gt;</code> component.</p>",
            "<div class=\"sourceCode\" id=\"cb275\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb275-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb275-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">&lt;</span>g style<span class=\"op\" style=\"color: #666666;\">={{</span> <span class=\"dt\">mixBlendMode</span><span class=\"op\">:</span> <span class=\"st\">&#39;multiply&#39;</span> <span class=\"op\">}}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb275-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"va\" style=\"color: #19177c;\">nodes</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>((node<span class=\"op\" style=\"color: #666666;\">,</span> i) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb275-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>SankeyNode</a>",
            "<a class=\"sourceLine\" id=\"cb275-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">{</span>...<span class=\"at\" style=\"color: #7d9029;\">node</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb275-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        color<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"at\" style=\"color: #7d9029;\">color</span>(<span class=\"at\" style=\"color: #7d9029;\">colorScale</span>(i)).<span class=\"at\" style=\"color: #7d9029;\">hex</span>()<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb275-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        key<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"va\" style=\"color: #19177c;\">node</span>.<span class=\"at\" style=\"color: #7d9029;\">name</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb275-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb275-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    ))<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb275-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"va\" style=\"color: #19177c;\">links</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>((link<span class=\"op\" style=\"color: #666666;\">,</span> i) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb275-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>SankeyLink</a>",
            "<a class=\"sourceLine\" id=\"cb275-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        link<span class=\"op\" style=\"color: #666666;\">={</span>link<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb275-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        color<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"at\" style=\"color: #7d9029;\">color</span>(<span class=\"at\" style=\"color: #7d9029;\">colorScale</span>(<span class=\"va\" style=\"color: #19177c;\">link</span>.<span class=\"va\" style=\"color: #19177c;\">source</span>.<span class=\"at\" style=\"color: #7d9029;\">index</span>)).<span class=\"at\" style=\"color: #7d9029;\">hex</span>()<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb275-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb275-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    ))<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb275-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  &lt;/g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb275-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>Here you can see a case of inconsistent API design. <code style=\"white-space: pre-wrap;\">SankeyNode</code> gets node data splatted into props, <code style=\"white-space: pre-wrap;\">SankeyLink</code> prefers a single prop for all the <code style=\"white-space: pre-wrap;\">link</code> info. There’s a reason for that and you might want to keep to the same approach in both anyway.</p>",
            "<p>Both also get a <code style=\"white-space: pre-wrap;\">color</code> prop with the messiness of translating a node index into a <code style=\"white-space: pre-wrap;\">[0, 1]</code> number passed into the chroma color scale, translated into a hex string. Mess.</p>",
            "<h3 id=\"sankeynode\">&lt;SankeyNode&gt;</h3>",
            "<div class=\"sourceCode\" id=\"cb276\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb276-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> SankeyNode <span class=\"op\" style=\"color: #666666;\">=</span> (<span class=\"op\" style=\"color: #666666;\">{</span> name<span class=\"op\" style=\"color: #666666;\">,</span> x0<span class=\"op\" style=\"color: #666666;\">,</span> x1<span class=\"op\" style=\"color: #666666;\">,</span> y0<span class=\"op\" style=\"color: #666666;\">,</span> y1<span class=\"op\" style=\"color: #666666;\">,</span> color <span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb276-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">&lt;</span>rect x<span class=\"op\" style=\"color: #666666;\">={</span>x0<span class=\"op\" style=\"color: #666666;\">}</span> y<span class=\"op\" style=\"color: #666666;\">={</span>y0<span class=\"op\" style=\"color: #666666;\">}</span> width<span class=\"op\" style=\"color: #666666;\">={</span>x1 <span class=\"op\" style=\"color: #666666;\">-</span> x0<span class=\"op\" style=\"color: #666666;\">}</span> height<span class=\"op\" style=\"color: #666666;\">={</span>y1 <span class=\"op\" style=\"color: #666666;\">-</span> y0<span class=\"op\" style=\"color: #666666;\">}</span> fill<span class=\"op\" style=\"color: #666666;\">={</span>color<span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb276-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>title<span class=\"op\" style=\"color: #666666;\">&gt;{</span>name<span class=\"op\" style=\"color: #666666;\">}</span>&lt;/title<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb276-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  &lt;/rect<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb276-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p><code style=\"white-space: pre-wrap;\">SankeyNode</code>s are rectangles with a title. We take top left and bottom right coordinates from the sankey generator and feed them into rect SVG elements. Color comes form the color prop.</p>",
            "<h3 id=\"sankeylink\">&lt;SankeyLink&gt;</h3>",
            "<div class=\"sourceCode\" id=\"cb277\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb277-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> SankeyLink <span class=\"op\" style=\"color: #666666;\">=</span> (<span class=\"op\" style=\"color: #666666;\">{</span> link<span class=\"op\" style=\"color: #666666;\">,</span> color <span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb277-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">&lt;</span>path</a>",
            "<a class=\"sourceLine\" id=\"cb277-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    d<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"at\" style=\"color: #7d9029;\">sankeyLinkHorizontal</span>()(link)<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb277-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    style<span class=\"op\" style=\"color: #666666;\">={{</span></a>",
            "<a class=\"sourceLine\" id=\"cb277-5\" title=\"5\">      <span class=\"dt\">fill</span><span class=\"op\">:</span> <span class=\"st\">&#39;none&#39;</span><span class=\"op\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb277-6\" title=\"6\">      <span class=\"dt\">strokeOpacity</span><span class=\"op\">:</span> <span class=\"st\">&#39;.3&#39;</span><span class=\"op\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb277-7\" title=\"7\">      <span class=\"dt\">stroke</span><span class=\"op\">:</span> color<span class=\"op\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb277-8\" title=\"8\">      <span class=\"dt\">strokeWidth</span><span class=\"op\">:</span> <span class=\"va\">Math</span>.<span class=\"at\">max</span>(<span class=\"dv\">1</span><span class=\"op\">,</span> <span class=\"va\">link</span>.<span class=\"at\">width</span>)<span class=\"op\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb277-9\" title=\"9\">    <span class=\"op\">}}</span></a>",
            "<a class=\"sourceLine\" id=\"cb277-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb277-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p><code style=\"white-space: pre-wrap;\">SankeyLink</code>s are paths. We initialze a <code style=\"white-space: pre-wrap;\">sankeyLinkHorizontal</code> path generator instance, feed it <code style=\"white-space: pre-wrap;\">link</code> info and that creates the path shape for us. This is why it was easier to get everything in a single <code style=\"white-space: pre-wrap;\">link</code> prop. No idea which arguments the generator actually uses.</p>",
            "<p>Styling is tricky too.</p>",
            "<p>Sankey links are lines. They don’t look like lines, but that’s what they are. You want to make sure <code style=\"white-space: pre-wrap;\">fill</code> is set to nothing, and use <code style=\"white-space: pre-wrap;\">strokeWidth</code> to get that nice volume going.</p>",
            "<p>The rest is just colors and opacities to make it look prettier.</p>",
            "<p>A sankey diagram comes out 👇</p>",
            "<p><img src=\"https://github.com/Swizec/datavizAdvent/raw/master/src/content/sankey/sankey.png\"></p>",
            "<p>You can make it betterer with some interaction on the nodes or even links. They’re components so the world is your oyster. Anything you can do with components, you can do with these.</p>"
          ]
        },
        {
          "lectureTitle": "Try Uber's WebGL dataviz library",
          "lectureLines": [
            "<h1 id=\"challenge-11\">Challenge</h1>",
            "<p>Uber has built a cool suite of data visualization tools for WebGL. Let’s explore</p>",
            "<p><a href=\"https://reactviz.holiday/datasets/ugr-sankey-openspending.json\">Dataset</a></p>",
            "<h1 id=\"my-solution-11\">My Solution</h1>",
            "<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/hwIy2dYe6hc\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen>",
            "</iframe>",
            "<iframe src=\"https://codesandbox.io/embed/kkr948o597?fontsize=14\" style=\"width:100%; height:500px; border😮; border-radius: 4px; overflow:hidden;\" sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\">",
            "</iframe>",
            "<p>Today was not a great success so tomorrow’s gonna be part two.</p>",
            "<p>We explored Uber’s suite of WebGL-based data visualization libraries from <a href=\"http://vis.gl/\">vis.gl</a>. There’s a couple:</p>",
            "<ol type=\"1\">",
            "<li><code style=\"white-space: pre-wrap;\">deck.gl</code> is for layering data visualization layers on top of maps</li>",
            "<li><code style=\"white-space: pre-wrap;\">luma.gl</code> is the base library that everything else uses</li>",
            "<li><code style=\"white-space: pre-wrap;\">react-map-gl</code> is a React-based base layer for maps, you then use deck.gl to add layers</li>",
            "<li><code style=\"white-space: pre-wrap;\">react-vis</code> is Uber’s take on the “react abstraction for charts” class of libraries. Renders to SVG</li>",
            "</ol>",
            "<p>Trying out <a href=\"https://luma.gl/\">luma.gl</a> seemed like the best way to get started. It powers everything else and if we’re gonna build custom stuff … well.</p>",
            "<p>Implementing this example of wandering triangles seemed like a good idea.</p>",
            "<iframe src=\"https://luma.gl/#/examples/core-examples/transform-webgl-2\" width=\"100%\" height=\"500\">",
            "<p>Copy pasting a bunch of code and trying to understand what it does even better.</p>",
            "<p>So we built a React harness, spelunked through the demo code, and learned a few things about WebGL.</p>",
            "<div class=\"sourceCode\" id=\"cb278\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb278-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">&lt;</span>LumaFragment component<span class=\"op\" style=\"color: #666666;\">=</span><span class=\"st\" style=\"color: #4070a0;\">&quot;canvas&quot;</span> /&gt;</a></code></pre></div>",
            "<p><code style=\"white-space: pre-wrap;\">&lt;LumaFragment&gt;</code> is a <a href=\"https://d3blackbox.com\">d3blackbox</a> component. It creates a canvas element and lets our render function take over. Our function is mostly a copy paste job.</p>",
            "<p>In this we learned that WebGL renders onto <code style=\"white-space: pre-wrap;\">&lt;canvas&gt;</code>. Somehow I never realized that before.</p>",
            "<p>We create LumaFragment like this:</p>",
            "<div class=\"sourceCode\" id=\"cb279\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb279-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> LumaFragment <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"at\" style=\"color: #7d9029;\">d3blackbox</span>((anchor<span class=\"op\" style=\"color: #666666;\">,</span> props) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb279-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// copy pasta code from official example</span></a>",
            "<a class=\"sourceLine\" id=\"cb279-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb279-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">animationLoop</span>.<span class=\"at\" style=\"color: #7d9029;\">start</span>(<span class=\"op\" style=\"color: #666666;\">{</span> <span class=\"dt\" style=\"color: #902000;\">canvas</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">anchor</span>.<span class=\"at\" style=\"color: #7d9029;\">current</span> <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb279-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a></code></pre></div>",
            "<p>The official example creates an <code style=\"white-space: pre-wrap;\">animationLoop</code> based on the <code style=\"white-space: pre-wrap;\">AnimationLoop</code> import from luma.gl. It works like a game loop approach I believe.</p>",
            "<p>There’s 3 event callbacks the code hooks into:</p>",
            "<ol type=\"1\">",
            "<li><code style=\"white-space: pre-wrap;\">onInitialize</code>, which initializes objects and sets up the visualization</li>",
            "<li><code style=\"white-space: pre-wrap;\">onRender</code>, which runs on every loop of the animation. I think</li>",
            "<li><code style=\"white-space: pre-wrap;\">onFinalize</code>, which runs when the animation runs out, but it looks like that’s never</li>",
            "</ol>",
            "<p>I’d explain the code inside those callbacks here, if I understood it well enough. Right now it still looks a little alien and hard to grok.</p>",
            "<p>What I <em>can</em> tell you, however, it’s that it is designed to run fast. There’s a lot of low level stuff creeping in. Like using <code style=\"white-space: pre-wrap;\">Float32Array</code> instead of just Array because it’s typed.</p>",
            "<p>Yes, some JavaScript is typed didn’t you know?</p>",
            "<p>And it uses a lot of Buffers. Those are low level memory blocks with direct access from the GPU. Makes it faster than working with higher level JavaScript abstractions.</p>",
            "<p>Another trick for more speed is that much of the hard logic happens in shaders.</p>",
            "<p>We put our shaders in the <code style=\"white-space: pre-wrap;\">shaders.js</code> file. Shaders are low-level GPU code, originally named after shading effects, but doing all sorts of stuff these days.</p>",
            "<p>Our example uses 3 shaders: <code style=\"white-space: pre-wrap;\">EMIT_VS</code>, <code style=\"white-space: pre-wrap;\">DRAW_VS</code>, <code style=\"white-space: pre-wrap;\">DRAW_FS</code>. They seem to control how our triangles render and behave, but I haven’t been able to figure out how the JavaScript part ties together with the shaders part.</p>",
            "<p>Guess that’s our next step.</p>",
            "<p>Also figuring out why this happens:</p>",
            "<p>Join me tomorrow. We’ll have fun 😃</p>",
            "<blockquote class=\"twitter-tweet\" data-lang=\"en\">",
            "<p lang=\"en\" dir=\"ltr\">",
            "That went well …<br><br>We continue tomorrow!<br><br>👉 <a href=\"https://t.co/I0MfSzduvn\">https://t.co/I0MfSzduvn</a> <a href=\"https://t.co/DECiZJHPXN\">pic.twitter.com/DECiZJHPXN</a>",
            "</p>",
            "— Swizec Teller (<span class=\"citation\" data-cites=\"Swizec\">@Swizec</span>) <a href=\"https://twitter.com/Swizec/status/1075059774708953088?ref_src=twsrc%5Etfw\">December 18, 2018</a>",
            "</blockquote>",
            "<script async charset=\"utf-8\">",
            "Function&&Function.prototype&&Function.prototype.bind&&(/MSIE ([6789]|10)/.test(navigator.userAgent)||(window.__twttr&&window.__twttr.widgets&&window.__twttr.widgets.loaded&&window.twttr.widgets.load&&window.twttr.widgets.load(),window.__twttr&&window.__twttr.widgets&&window.__twttr.widgets.init||function(t){function e(e){for(var n,i,o=e[0],s=e[1],a😮,c😦];a<o.length;a++)i😮[a],r[i]&&c.push(r[i][0]),r[i]😮;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]😒[n]);for(u&&u(e);c.length😉c.shift()()}var n={},r={1😮};function i(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(t){var e😦],n=r[t];if(0!==n)if(n)e.push(n[2]);else{var o=new Promise(function(e,i){n=r[t👿e,i]});e.push(n[2]😮);var s,a=document.getElementsByTagName(\"head\")[0],u=document.createElement(\"script\");u.charset=\"utf-8\",u.timeout=120,i.nc&&u.setAttribute(\"nonce\",i.nc),u.src=function(t){return i.p+\"js/\"+({0:\"moment~timeline~tweet\",2:\"dm_button\",3:\"button\",4:\"moment\",5:\"periscope_on_air\",6:\"timeline\",7:\"tweet\"}[t]||t)+\".\"+{0:\"a20574004ea824b1c047f200045ffa1e\",2:\"b573518d7182437fcff1973b0098d272\",3:\"509719336ca39171c37a321231ccaf83\",4:\"f261877d67dc45f3972d303d6b32c138\",5:\"04369ab165b401d73b183f97ed7153fd\",6:\"49693ebcd57b08708ebca7502c7c343d\",7:\"73b7ab8a56ad3263cad8d36ba66467fc\"}[t]+\".js\"}(t),s=function(e){u.onerror=u.onload=null,clearTimeout(c);var n=r[t];if(0!==n){if(n){var i=e&&(\"load\"===e.type?\"missing\":e.type),o=e&&e.target&&e.target.src,s=new Error(\"Loading chunk \"+t+\" failed.\\n(\"+i+\": \"+o+\")\");s.type=i,s.request😮,n[1](s)}r[t]=void 0}};var c=setTimeout(function(){s({type:\"timeout\",target:u})},12e4);u.onerror=u.onload😒,a.appendChild(u)}return Promise.all(e)},i.m=t,i.c=n,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,\"a\",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p=\"https://platform.twitter.com/\",i.oe=function(t){throw console.error(t),t};var o=window.__twttrll=window.__twttrll||[],s😮.push.bind(o);o.push=e,o😮.slice();for(var a😮;a<o.length;a++)e(o[a]);var u😒;i(i.s=91)}([function(t,e,n){var r=n(1);function i(t,e){var n;for(n in t)t.hasOwnProperty&&!t.hasOwnProperty(n)||e(n,t[n]);return t}function o(t){return{}.toString.call(t).match(/\\s([a-zA-Z]+)/)[1].toLowerCase()}function s(t){return t===Object(t)}function a(t){var e;if(!s(t))return!1;if(Object.keys)return!Object.keys(t).length;for(e in t)if(t.hasOwnProperty(e))return!1;return!0}function u(t){return t?Array.prototype.slice.call(t)😦]}t.exports={aug:function(t){return u(arguments).slice(1).forEach(function(e){i(e,function(e,n){t[e]=n})}),t},async:function(t,e){r.setTimeout(function(){t.call(e||null)},0)},compact:function t(e){return i(e,function(n,r){s(r)&&(t(r),a(r)&&delete e[n]),void 0!==r&&null!==r&&\"\"!==r||delete e[n]}),e},contains:function(t,e){return!(!t||!t.indexOf)&&t.indexOf(e)>-1},forIn:i,isObject😒,isEmptyObject:a,toType😮,isType:function(t,e){return t==o(e)},toRealArray:u}},function(t,e){t.exports=window},function(t,e,n){var r=n(6);t.exports=function(){var t=this;this.promise=new r(function(e,n){t.resolve=e,t.reject=n})}},function(t,e,n){var r=n(11),i😕(?:^|(?:https?😃?\\/\\/(?:www\\.)?twitter\\.com(?::\\d+)?(?😕/intent\\/(?:follow|user)\\/?\\?screen_name😐(?😕/#!)?\\/))@?([\\w]+)(?😕?|&|$)/i,o😕(?:^|(?:https?😃?\\/\\/(?:www\\.)?twitter\\.com(?::\\d+)?\\/(?:#!\\/)?[\\w_]+\\/status(?:es)?\\/)(\\d+)/i,s😕^http(s?)😕/\\/(\\w+\\.)*twitter\\.com([😕]|$)/i,a😕^http(s?)😕/\\/pbs\\.twimg\\.com\\//,u😕^#?([^.,<>!\\s/#\\-()'\"]+)$/,c😕twitter\\.com(?::\\d{2,4})?\\/intent\\/(\\w+)/,d😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/\\w+\\/timelines\\/(\\d+)/i,l😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/i\\/moments\\/(\\d+)/i,f😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/(\\w+)\\/(?:likes|favorites)/i,h😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/(\\w+)\\/lists\\/([\\w-%]+)/i,p😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/i\\/live\\/(\\d+)/i,m😕^https?😕/\\/syndication\\.twitter\\.com\\/settings/i,v😕^https?😕/\\/(localhost|platform)\\.twitter\\.com(?::\\d+)?\\/widgets\\/widget_iframe\\.(.+)/i,g😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/search\\?q😦\\w+)/i;function w(t){return\"string\"==typeof t&&i.test(t)&&RegExp.$1.length<=20}function y(t){if(w(t))return RegExp.$1}function b(t,e){var n=r.decodeURL(t);if(e=e||!1,n.screen_name=y(t),n.screen_name)return r.url(\"https://twitter.com/intent/\"+(e?\"follow\":\"user\"),n)}function _(t){return\"string\"==typeof t&&u.test(t)}function E(t){return\"string\"==typeof t&&o.test(t)}t.exports={isHashTag:_,hashTag:function(t,e){if(e=void 0===e||e,_(t))return(e?\"#\":\"\")+RegExp.$1},isScreenName:w,screenName:y,isStatus:E,status:function(t){return E(t)&&RegExp.$1},intentForProfileURL:b,intentForFollowURL:function(t){return b(t,!0)},isTwitterURL:function(t){return s.test(t)},isTwimgURL:function(t){return a.test(t)},isIntentURL:function(t){return c.test(t)},isSettingsURL:function(t){return m.test(t)},isWidgetIframeURL:function(t){return v.test(t)},isSearchUrl:function(t){return g.test(t)},regexen:{profile:i},momentId:function(t){return l.test(t)&&RegExp.$1},collectionId:function(t){return d.test(t)&&RegExp.$1},intentType:function(t){return c.test(t)&&RegExp.$1},likesScreenName:function(t){return f.test(t)&&RegExp.$1},listScreenNameAndSlug:function(t){var e,n,r;if(h.test(t)){e=RegExp.$1,n=RegExp.$2;try{r=decodeURIComponent(n)}catch(t){}return{ownerScreenName:e,slug:r||n}}return!1},eventId:function(t){return p.test(t)&&RegExp.$1}}},function(t,e,n){var r=n(0),i😦!0,1,\"1\",\"on\",\"ON\",\"true\",\"TRUE\",\"yes\",\"YES\"],o😦!1,0,\"0\",\"off\",\"OFF\",\"false\",\"FALSE\",\"no\",\"NO\"];function s(t){return void 0!==t&&null!==t&&\"\"!==t}function a(t){return c(t)&&t%1==0}function u(t){return c(t)&&!a(t)}function c(t){return s(t)&&!isNaN(t)}function d(t){return r.contains(o,t)}function l(t){return r.contains(i,t)}t.exports={hasValue😒,isInt:a,isFloat:u,isNumber:c,isString:function(t){return\"string\"===r.toType(t)},isArray:function(t){return s(t)&&\"array\"==r.toType(t)},isTruthValue:l,isFalseValue😛,asInt:function(t){if(a(t))return parseInt(t,10)},asFloat:function(t){if(u(t))return t},asNumber:function(t){if(c(t))return t},asBoolean:function(t){return!(!s(t)||!l(t)&&(d(t)||!t))}}},function(t,e){t.exports=document},function(t,e,n){var r=n(1),i=n(20),o=n(45);i.hasPromiseSupport()||(r.Promise😮),t.exports=r.Promise},function(t,e,n){var r=n(0);t.exports=function(t,e){var n=Array.prototype.slice.call(arguments,2);return function(){var i=r.toRealArray(arguments);return t.apply(e,n.concat(i))}}},function(t,e){t.exports=location},function(t,e,n){var r=n(47);t.exports=new r(\"__twttr\")},function(t,e,n){var r=n(0),i😕\\b([\\w-_]+)\\b/g;function o(t){return new RegExp(\"\\\\b\"+t+\"\\\\b\",\"g\")}function s(t,e){t.classList?t.classList.add(e)😮(e).test(t.className)||(t.className+=\" \"+e)}function a(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(o(e),\" \")}function u(t,e){return t.classList?t.classList.contains(e):r.contains(c(t),e)}function c(t){return r.toRealArray(t.classList?t.classList:t.className.match(i))}t.exports={add😒,remove:a,replace:function(t,e,n){if(t.classList&&u(t,e))return a(t,e),void s(t,n);t.className=t.className.replace(o(e),n)},toggle:function(t,e,n){return void 0===n&&t.classList&&t.classList.toggle?t.classList.toggle(e,n)😦n?s(t,e):a(t,e),n)},present:u,list:c}},function(t,e,n){var r=n(4),i=n(0);function o(t){return encodeURIComponent(t).replace(/\\+/g,\"%2B\").replace(/'/g,\"%27\")}function s(t){return decodeURIComponent(t)}function a(t){var e😦];return i.forIn(t,function(t,n){var s😮(t);i.isType(\"array\",n)||(n😦n]),n.forEach(function(t){r.hasValue(t)&&e.push(s+\"=\"+o(t))})}),e.sort().join(\"&\")}function u(t){var e={};return t?(t.split(\"&\").forEach(function(t){var n=t.split(\"😊,r😒(n[0]),o😒(n[1]);if(2==n.length){if(!i.isType(\"array\",e[r]))return r in e?(e[r👿e[r]],void e[r].push(o)):void(e[r]😮);e[r].push(o)}}),e):{}}t.exports={url:function(t,e){return a(e).length>0?i.contains(t,\"?\")?t+\"&\"+a(e):t+\"?\"+a(e):t},decodeURL:function(t){var e=t&&t.split(\"?\");return 2==e.length?u(e[1]):{}},decode:u,encode:a,encodePart😮,decodePart😒}},function(t,e,n){var r=n(😎,i=n(1),o=n(0),s={},a😮.contains(r.href,\"tw_debug=true\");function u(){}function c(){}function d(){return i.performance&&+i.performance.now()||+new Date}function l(t,e){if(i.console&&i.console[t])switch(e.length){case 1:i.console[t](e[0]);break;case 2:i.console[t](e[0],e[1]);break;case 3:i.console[t](e[0],e[1],e[2]);break;case 4:i.console[t](e[0],e[1],e[2],e[3]);break;case 5:i.console[t](e[0],e[1],e[2],e[3],e[4]);break;default😮!==e.length&&i.console.warn&&i.console.warn(\"too many params passed to logger.\"+t)}}t.exports={devError:u,devInfo:c,devObject:function(t,e){},publicError:function(){l(\"error\",o.toRealArray(arguments))},publicLog:function(){l(\"info\",o.toRealArray(arguments))},time:function(t){a&&(s[t]😛())},timeEnd:function(t){a&&s[t]&&(d(),s[t])}}},function(t,e,n){var r=n(19),i=n(4),o=n(11),s=n(0),a=n(116);t.exports=function(t){var e=t.href&&t.href.split(\"?\")[1],n=e?o.decode(e):{},u={lang:a(t),width:t.getAttribute(\"data-width\")||t.getAttribute(\"width\"),height:t.getAttribute(\"data-height\")||t.getAttribute(\"height\"),related:t.getAttribute(\"data-related\"),partner:t.getAttribute(\"data-partner\")};return i.asBoolean(t.getAttribute(\"data-dnt\"))&&r.setOn(),s.forIn(u,function(t,e){var r=n[t];n[t]=i.hasValue(r)?r:e}),s.compact(n)}},function(t,e,n){var r=n(79),i=n(22);t.exports=function(){var t=\"data-twitter-extracted-\"+i.generate();return function(e,n){return r(e,n).filter(function(e){return!e.hasAttribute(t)}).map(function(e){return e.setAttribute(t,\"true\"),e})}}},function(t,e){function n(t,e,n,r,i,o){this.factory=t,this.Sandbox=e,this.srcEl😮,this.targetEl=i,this.parameters=r,this.className=n}n.prototype.destroy=function(){this.srcEl=this.targetEl=null},t.exports=n},function(t,e,n){var r=n(6),i=n(49),o=n(19),s=n(4),a=n(0);t.exports=function(t,e,n){var u;return t=t||[],e=e||{},u=\"ƒ(\"+t.join(\", \")+\", target, [options]);\",function(){var c,d,l,f,h=Array.prototype.slice.apply(arguments,[0,t.length]),p=Array.prototype.slice.apply(arguments,[t.length]);return p.forEach(function(t){t&&(t.nodeType!==Node.ELEMENT_NODE?a.isType(\"function\",t)?c=t:a.isType(\"object\",t)&&(d=t):l=t)}),h.length!==t.length||0===p.length?(c&&a.async(function(){c(!1)}),r.reject(new Error(\"Not enough parameters. Expected: \"+u))):l?(d=a.aug({},d||{},e),t.forEach(function(t){d[t]=h.shift()}),s.asBoolean(d.dnt)&&o.setOn(),f=i.addWidget(n(d,l)),c&&f.then(c,function(){c(!1)}),f)😦c&&a.async(function(){c(!1)}),r.reject(new Error(\"No target element specified. Expected: \"+u)))}}},function(t,e,n){var r=n(99),i=n(2),o=n(0);function s(t,e){return function(){try{e.resolve(t.call(this))}catch(t){e.reject(t)}}}t.exports={sync:function(t,e){t.call(e)},read:function(t,e){var n=new i;return r.read(s(t,n),e),n.promise},write:function(t,e){var n=new i;return r.write(s(t,n),e),n.promise},defer:function(t,e,n){var a=new i;return o.isType(\"function\",t)&&(n=e,e=t,t=1),r.defer(t,s(e,a),n),a.promise}}},function(t,e,n){var r=n(9),i😦\"https://syndication.twitter.com\",\"https://cdn.syndication.twimg.com\",\"https://localhost.twitter.com:8444\"],o😦\"https://syndication.twitter.com\",\"https://localhost.twitter.com:8445\"],s=function(t,e){return t.indexOf(e)>-1},a=function(){var t=r.get(\"backendHost\");return t&&s(i,t)?t:\"https://cdn.syndication.twimg.com\"},u=function(){var t=r.get(\"settingsSvcHost\");return t&&s(o,t)?t:\"https://syndication.twitter.com\"};function c(t,e){var n😦t];return e.forEach(function(t){n.push(function(t){var e😦t||\"\").toString(),n=\"/\"===e.slice(0,1)?1😮,r=function(t){return\"/\"===t.slice(-1)}(e)?-1:void 0;return e.slice(n,r)}(t))}),n.join(\"/\")}t.exports={cookieConsent:function(t){var e=t||[];return e.unshift(\"cookie/consent\"),c(u(),e)},eventVideo:function(t){var e=t||[];return e.unshift(\"video/event\"),c(a(),e)},grid:function(t){var e=t||[];return e.unshift(\"grid/collection\"),c(a(),e)},moment:function(t){var e=t||[];return e.unshift(\"moments\"),c(a(),e)},settings:function(t){var e=t||[];return e.unshift(\"settings\"),c(u(),e)},timeline:function(t){var e=t||[];return e.unshift(\"timeline\"),c(a(),e)},tweetBatch:function(t){var e=t||[];return e.unshift(\"tweets.json\"),c(a(),e)},video:function(t){var e=t||[];return e.unshift(\"widgets/video\"),c(a(),e)}}},function(t,e,n){var r=n(5),i=n(😎,o=n(35),s=n(77),a=n(4),u=n(32),c=!1,d😕https?😕/\\/([^/]+).*/i;t.exports={setOn:function(){c=!0},enabled:function(t,e){return!!(c||a.asBoolean(u.val(\"dnt\"))||s.isUrlSensitive(e||i.host)||o.isFramed()&&s.isUrlSensitive(o.rootDocumentLocation())||(t😛.test(t||r.referrer)&&RegExp.$1)&&s.isUrlSensitive(t))}}},function(t,e,n){var r=n(5),i=n(12),o=n(92),s=n(1),a=n(0),u😮.userAgent;function c(t){return/(Trident|MSIE|Edge[/ ]?\\d)/.test(t=t||u)}t.exports={retina:function(t){return(t=t||s).devicePixelRatio?t.devicePixelRatio>=1.5:!!t.matchMedia&&t.matchMedia(\"only screen and (min-resolution: 144dpi)\").matches},anyIE:c,ie9:function(t){return/MSIE 9/.test(t=t||u)},ie10:function(t){return/MSIE 10/.test(t=t||u)},ios:function(t){return/(iPad|iPhone|iPod)/.test(t=t||u)},android:function(t){return/^Mozilla\\/5\\.0 \\(Linux; (U; )?Android/.test(t=t||u)},canPostMessage:function(t,e){return t=t||s,e=e||u,t.postMessage&&!(c(e)&&t.opener)},touch:function(t,e,n){return t=t||s,e=e||o,n=n||u,\"ontouchstart\"in t||/Opera Mini/.test(n)||e.msMaxTouchPoints>0},cssTransitions:function(){var t=r.body.style;return void 0!==t.transition||void 0!==t.webkitTransition||void 0!==t.mozTransition||void 0!==t.oTransition||void 0!==t.msTransition},hasPromiseSupport:function(){return!!(s.Promise&&s.Promise.resolve&&s.Promise.reject&&s.Promise.all&&s.Promise.race&&(new s.Promise(function(e){t=e}),a.isType(\"function\",t)));var t},hasIntersectionObserverSupport:function(){return!!s.IntersectionObserver},hasPerformanceInformation:function(){return s.performance&&s.performance.getEntriesByType},hasLocalStorageSupport:function(){try{return s.localStorage.setItem(\"local_storage_support_test\",\"true\"),void 0!==s.localStorage}catch(t){return i.devError(\"window.localStorage is not supported:\",t),!1}}}},function(t,e,n){var r=n(6),i=n(2);function o(t,e){return t.then(e,e)}function s(t){return t instanceof r}t.exports={always😮,allResolved:function(t){var e;return void 0===t?r.reject(new Error(\"undefined is not an object\")):Array.isArray(t)?(e=t.length)?new r(function(n,r){var i😮,o😦];function a(){(i+=1)===e&&(0===o.length?r():n(o))}function u(t){o.push(t),a()}t.forEach(function(t){s(t)?t.then(u,a):u(t)})}):r.resolve([]):r.reject(new Error(\"Type error\"))},some:function(t){var e;return e😦t=t||[]).length,t=t.filter(s),e?e!==t.length?r.reject(\"non-Promise passed to .some\"):new r(function(e,n){var r😮;function i(){(r+=1)===t.length&&n()}t.forEach(function(t){t.then(e,i)})}):r.reject(\"no promises passed to .some\")},isPromise😒,allSettled:function(t){function e(){}return r.all((t||[]).map(function(t){return o(t,e)}))},timeout:function(t,e){var n=new i;return setTimeout(function(){n.reject(new Error(\"Promise timed out\"))},e),t.then(function(t){n.resolve(t)},function(t){n.reject(t)}),n.promise}}},function(t,e){var n=\"i\",r😮,i😮;t.exports={generate:function(){return n+String(+new Date)+Math.floor(1e5*Math.random())+r++},deterministic:function(){return n+String(i++)}}},function(t,e,n){var r=n(46),i=n(48),o=n(0);t.exports😮.aug(r.get(\"events\")||{},i.Emitter)},function(t,e,n){var r=n(25),i=n(107);t.exports=r.build([i])},function(t,e,n){var r=n(37),i=n(104),o=n(7);(r=Object.create(r)).build😮(r.build,null,i),t.exports=r},function(t,e,n){var r=n(37),i=n(38),o=n(7);(r=Object.create(r)).build😮(r.build,null,i),t.exports=r},function(t,e,n){var r=n(81),i=n(73),o=n(82),s=n(😎,a=n(68),u=n(72),c=n(19),d=n(4),l=n(22),f=n(0);function h(t){if(!t||!t.headers)throw new Error(\"unexpected response schema\");return{html:t.body,config:t.config,pollInterval:1e3*parseInt(t.headers.xPolling,10)||null,maxCursorPosition:t.headers.maxPosition,minCursorPosition:t.headers.minPosition}}function p(t){if(t&&t.headers)throw new Error(t.headers.status);throw t instanceof Error?t:new Error(t)}t.exports=function(t){t.params({instanceId:{required:!0,fallback:l.deterministic},lang:{required:!0,transform:a.matchLanguage,fallback:\"en\"},tweetLimit:{transform😛.asInt}}),t.defineProperty(\"endpoint\",{get:function(){throw new Error(\"endpoint not specified\")}}),t.defineProperty(\"pollEndpoint\",{get:function(){return this.endpoint}}),t.define(\"cbId\",function(t){var e=t?\"_new\":\"_old\";return\"tl_\"+this.params.instanceId+\"_\"+this.id+e}),t.define(\"queryParams\",function(){return{lang:this.params.lang,tz:u.getTimezoneOffset(),t:r(),domain😒.host,tweet_limit:this.params.tweetLimit,dnt:c.enabled()}}),t.define(\"fetch\",function(){return i.fetch(this.endpoint,this.queryParams(),o,this.cbId()).then(h,p)}),t.define(\"poll\",function(t,e){var n,r;return n={since_id😦t=t||{}).sinceId,max_id:t.maxId,min_position:t.minPosition,max_position:t.maxPosition},r=f.aug(this.queryParams(),n),i.fetch(this.pollEndpoint,r,o,this.cbId(e)).then(h,p)})}},function(t,e,n){var r=n(48).makeEmitter();t.exports={emitter:r,START:\"start\",ALL_WIDGETS_RENDER_START:\"all_widgets_render_start\",ALL_WIDGETS_RENDER_END:\"all_widgets_render_end\",ALL_WIDGETS_AND_IMAGES_LOADED:\"all_widgets_and_images_loaded\"}},function(t,e,n){var r=n(5),i=n(0);t.exports=function(t,e,n){var o;if(n=n||r,t=t||{},e=e||{},t.name){try{o=n.createElement('<iframe name=\"'+t.name+'\"></iframe>')}catch(e){(o=n.createElement(\"iframe\")).name=t.name}delete t.name}else o=n.createElement(\"iframe\");return t.id&&(o.id=t.id,delete t.id),o.allowtransparency=\"true\",o.scrolling=\"no\",o.setAttribute(\"frameBorder\",0),o.setAttribute(\"allowTransparency\",!0),i.forIn(t,function(t,e){o.setAttribute(t,e)}),i.forIn(e,function(t,e){o.style[t]=e}),o}},function(t,e,n){var r=n(1).JSON;t.exports={stringify:r.stringify||r.encode,parse:r.parse||r.decode}},function(t,e,n){var r=n(0),i=n(40);t.exports={closest:function t(e,n,o){var s;if(n)return o😮||n&&n.ownerDocument,s=r.isType(\"function\",e)?e:function(t){return function(e){return!!e.tagName&&i(e,t)}}(e),n===o?s(n)?n:void 0😒(n)?n:t(s,n.parentNode,o)}}},function(t,e,n){var r,i=n(5);function o(t){var e,n,o,s😮;for(r={},e😦t=t||i).getElementsByTagName(\"meta\");e[s];s++){if(n=e[s],/^twitter😕.test(n.getAttribute(\"name\")))o=n.getAttribute(\"name\").replace(/^twitter😕,\"\");else{if(!/^twitter😕.test(n.getAttribute(\"property\")))continue;o=n.getAttribute(\"property\").replace(/^twitter😕,\"\")}r[o]=n.getAttribute(\"content\")||n.getAttribute(\"value\")}}o(),t.exports={init😮,val:function(t){return r[t]}}},function(t,e,n){var r=n(5),i=n(30),o=n(19),s=n(0),a=n(41),u=n(9),c=n(3),d=n(31),l=a.version,f=u.get(\"clientEventEndpoint\")||\"https://syndication.twitter.com/i/jot\",h=1;function p(t){return s.aug({client:\"tfw\"},t||{})}function m(t,e,n){return e=e||{},s.aug({},e,{_category_:t,triggered_on:e.triggered_on||+new Date,dnt😮.enabled(n)})}t.exports={extractTermsFromDOM:function t(e,n){var r;return n=n||{},e&&e.nodeType===Node.ELEMENT_NODE?((r=e.getAttribute(\"data-scribe\"))&&r.split(\" \").forEach(function(t){var e=t.trim().split(\"😊,r=e[0],i=e[1];r&&i&&!n[r]&&(n[r]=i)}),t(e.parentNode,n)):n},clickEventElement:function(t){var e😛.closest(\"[data-expanded-url]\",t),n=e&&e.getAttribute(\"data-expanded-url\");return n&&c.isTwitterURL(n)?\"twitter_url\":\"url\"},flattenClientEventPayload:function(t,e){return s.aug({},e,{event_namespace:t})},formatGenericEventData:m,formatClientEventData:function(t,e,n){var i=t&&t.widget_origin||r.referrer;return(t=m(\"tfw_client_event\",t,i)).client_version=l,t.format_version=void 0!==n?n:1,e||(t.widget_origin=i),t},formatClientEventNamespace😛,formatTweetAssociation:function(t,e){var n={};return(e=e||{}).association_namespace😛(t),n[h]=e,n},noticeSeen:function(t){return\"notice\"===t.element&&\"seen\"===t.action},splitLogEntry:function(t){var e,n,r,i,o;return t.item_ids&&t.item_ids.length>1?(e=Math.floor(t.item_ids.length/2),n=t.item_ids.slice(0,e),r={},i=t.item_ids.slice(e),o={},n.forEach(function(e){r[e]=t.item_details[e]}),i.forEach(function(e){o[e]=t.item_details[e]}),[s.aug({},t,{item_ids:n,item_details:r}),s.aug({},t,{item_ids:i,item_details😮})])😦t]},stringify:function(t){var e,n=Array.prototype.toJSON;return delete Array.prototype.toJSON,e=i.stringify(t),n&&(Array.prototype.toJSON=n),e},AUDIENCE_ENDPOINT:\"https://syndication.twitter.com/i/jot/syndication\",CLIENT_EVENT_ENDPOINT:f,RUFOUS_REDIRECT:\"https://platform.twitter.com/jot.html\"}},function(t,e,n){var r=n(10),i={},o=-1,s={};function a(t){var e=t.getAttribute(\"data-twitter-event-id\");return e||(t.setAttribute(\"data-twitter-event-id\",++o),o)}function u(t,e,n){var r😮,i=t&&t.length||0;for(r😮;r<i;r++)if(t[r].call(e,n,e),n.ceaseImmediately)return!1}function c(t,e,n){for(var i=n||t.target||t.srcElement,o=r.list(i).map(function(t){return\".\"+t}).concat(i.tagName),s😮,a😮.length;s<a;s++)if(!1===u(e[o[s]],i,t))return;t.cease||i!==this&&c.call(this,t,e,i.parentElement||i.parentNode)}function d(t,e,n,r){function i(r){c.call(t,r,n[e])}!function(t,e,n,r){t.id&&(s[t.id]😒[t.id]||[],s[t.id].push({el:t,listener:e,type:n,rootId:r}))}(t,i,e,r),t.addEventListener(e,i,!1)}function l(t){t&&t.preventDefault?t.preventDefault():t.returnValue=!1}function f(t){t&&(t.cease=!0)&&t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}t.exports={stop:function(t){return f(t),l(t),!1},stopPropagation:f,stopImmediatePropagation:function(t){t&&(t.ceaseImmediately=!0,f(t),t.stopImmediatePropagation())},preventDefault:l,delegate:function(t,e,n,r){var o=a(t);i[o]=i[o]||{},i[o][e]||(i[o][e]={},d(t,e,i[o],o)),i[o][e][n]=i[o][e][n]||[],i[o][e][n].push(r)},simulate:function(t,e,n){var r=a(e),o=i[r]&&i[r];c.call(e,{target:n},o[t])},removeDelegatesForWidget:function(t){var e😒[t];e&&(e.forEach(function(t){t.el.removeEventListener(t.type,t.listener,!1),delete i[t.rootId]}),delete s[t])}}},function(t,e,n){var r=n(😎,i=n(76),o=n(0),s=i.getCanonicalURL()||r.href,a😒;t.exports={isFramed:function(){return s!==a},rootDocumentLocation:function(t){return t&&o.isType(\"string\",t)&&(s=t),s},currentDocumentLocation:function(){return a}}},function(t,e,n){var r=n(75),i=n(101),o=n(78),s=n(33),a=new(n(109))(function(t){var e,n,a;if(0!==t.length){if(u(t))return c(t);e=r(t,function(t){return s.noticeSeen(t.input.namespace)}),n=e.true,a=e.false,n&&n.length>0&&(n=n.slice(0,1),o.canFlushOneItem(n[0])||(n[0].input.data.message=\"\"),c(n)),a&&(u(a)?c:function(t){i.init(),t.forEach(function(t){var e=t.input.namespace,n=t.input.data,r=t.input.offsite,o=t.input.version;i.clientEvent(e,n,r,o)}),i.flush().then(function(){t.forEach(function(t){t.taskDoneDeferred.resolve()})},function(){t.forEach(function(t){t.taskDoneDeferred.reject()})})})(a)}});function u(t){return 1===t.length&&o.canFlushOneItem(t[0])}function c(t){t.forEach(function(t){var e=t.input.namespace,n=t.input.data,r=t.input.offsite,i=t.input.version;o.clientEvent(e,n,r,i),t.taskDoneDeferred.resolve()})}t.exports={scribe:function(t,e,n,r){return a.add({namespace:t,data:e,offsite:n,version:r})},pause:function(){a.pause()},resume:function(){a.resume()}}},function(t,e,n){var r=n(102),i=n(103),o=n(0);t.exports={couple:function(){return o.toRealArray(arguments)},build:function(t,e,n){var o=new t;return(e=i(r(e||[]))).forEach(function(t){t.call(null,o)}),o.build(n)}}},function(t,e,n){var r=n(105),i=n(0),o=n(39);function s(){this.Component=this.factory(),this._adviceArgs😦],this._lastArgs😦]}i.aug(s.prototype,{factory😮,build:function(t){var e=this;return this.Component,i.aug(this.Component.prototype.boundParams,t),this._adviceArgs.concat(this._lastArgs).forEach(function(t){(function(t,e,n){var r=this[e];if(!r)throw new Error(e+\" does not exist\");this[e]=t(r,n)}).apply(e.Component.prototype,t)}),delete this._lastArgs,delete this._adviceArgs,this.Component},params:function(t){var e=this.Component.prototype.paramConfigs;t=t||{},this.Component.prototype.paramConfigs=i.aug({},t,e)},define:function(t,e){if(t in this.Component.prototype)throw new Error(t+\" has previously been defined\");this.override(t,e)},defineStatic:function(t,e){this.Component[t]=e},override:function(t,e){this.Component.prototype[t]=e},defineProperty:function(t,e){if(t in this.Component.prototype)throw new Error(t+\" has previously been defined\");this.overrideProperty(t,e)},overrideProperty:function(t,e){var n=i.aug({configurable:!0},e);Object.defineProperty(this.Component.prototype,t,n)},before:function(t,e){this._adviceArgs.push([r.before,t,e])},after:function(t,e){this._adviceArgs.push([r.after,t,e])},around:function(t,e){this._adviceArgs.push([r.around,t,e])},last:function(t,e){this._lastArgs.push([r.after,t,e])}}),t.exports😒},function(t,e,n){var r=n(0);function i(){return!0}function o(t){return t}t.exports=function(){function t(t){var e=this;t=t||{},this.params=Object.keys(this.paramConfigs).reduce(function(n,s){var a😦],u=e.boundParams,c=e.paramConfigs[s],d=c.validate||i,l=c.transform||o;if(s in u&&a.push(u[s]),s in t&&a.push(t[s]),a=\"fallback\"in c?a.concat(c.fallback):a,n[s]=function(t,e,n){var i=null;return t.some(function(t){if(t=r.isType(\"function\",t)?t():t,e(t))return i=n(t),!0}),i}(a,d,l),c.required&&null==n[s])throw new Error(s+\" is a required parameter\");return n},{}),this.initialize()}return r.aug(t.prototype,{paramConfigs:{},boundParams:{},initialize:function(){}}),t}},function(t,e,n){var r=n(1).HTMLElement,i=r.prototype.matches||r.prototype.matchesSelector||r.prototype.webkitMatchesSelector||r.prototype.mozMatchesSelector||r.prototype.msMatchesSelector||r.prototype.oMatchesSelector;t.exports=function(t,e){if(i)return i.call(t,e)}},function(t){t.exports={version:\"7e980dd:1559715853415\"}},function(t,e,n){var r,i=n(10),o=n(5),s=n(1),a=n(32),u=n(50),c=n(4),d=n(22),l=\"csptest\";t.exports={inlineStyle:function(){var t=l+d.generate(),e😮.createElement(\"div\"),n😮.createElement(\"style\"),f=\".\"+t+\" { visibility: hidden; }\";return!!o.body&&(c.asBoolean(a.val(\"widgets:csp\"))&&(r=!1),void 0!==r?r😦e.style.display=\"none\",i.add(e,t),n.type=\"text/css\",n.appendChild(o.createTextNode(f)),o.body.appendChild(n),o.body.appendChild(e),r=\"hidden\"===s.getComputedStyle(e).visibility,u(e),u(n),r))}}},function(t,e,n){var r=n(1);t.exports=function(t,e,n){var i,o😮;return n=n||null,function s(){var a=n||this,u=arguments,c=+new Date;if(r.clearTimeout(i),c-o>e)return o=c,void t.apply(a,u);i=r.setTimeout(function(){s.apply(a,u)},e)}}},function(t,e){t.exports=function(t){var e=t.getBoundingClientRect();return{width:e.width,height:e.height}}},function(t,e,n){",
            "/*!",
            " * @overview es6-promise - a tiny implementation of Promises/A+.",
            " * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)",
            " * @license   Licensed under MIT license",
            " *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE",
            " * @version   v4.2.5+7f2b526d",
            " */var r;r=function(){\"use strict\";function t(t){return\"function\"==typeof t}var e=Array.isArray?Array.isArray:function(t){return\"[object Array]\"===Object.prototype.toString.call(t)},n😮,r=void 0,i=void 0,o=function(t,e){f[n]=t,f[n+1]=e,2===(n+=2)&&(i?i(h):w())},s=\"undefined\"!=typeof window?window:void 0,a😒||{},u=a.MutationObserver||a.WebKitMutationObserver,c=\"undefined\"==typeof self&&\"undefined\"!=typeof process&&\"[object process]\"==={}.toString.call(process),d=\"undefined\"!=typeof Uint8ClampedArray&&\"undefined\"!=typeof importScripts&&\"undefined\"!=typeof MessageChannel;function l(){var t=setTimeout;return function(){return t(h,1)}}var f=new Array(1e3);function h(){for(var t😮;t<n;t+=2)(0,f[t])(f[t+1]),f[t]=void 0,f[t+1]=void 0;n😮}var p,m,v,g,w=void 0;function y(t,e){var n=this,r=new this.constructor(E);void 0===r[_]&&k(r);var i=n._state;if(i){var s=arguments[i-1];o(function(){return O(i,r,s,n._result)})}else I(n,r,t,e);return r}function b(t){if(t&&\"object\"==typeof t&&t.constructor===this)return t;var e=new this(E);return N(e,t),e}c?w=function(){return process.nextTick(h)}:u?(m😮,v=new u(h),g=document.createTextNode(\"\"),v.observe(g,{characterData:!0}),w=function(){g.data=m=++m%2})😛?((p=new MessageChannel).port1.onmessage=h,w=function(){return p.port2.postMessage(0)}):w=void 0===s?function(){try{var t=Function(\"return this\")().require(\"vertx\");return void 0!==(r=t.runOnLoop||t.runOnContext)?function(){r(h)}:l()}catch(t){return l()}}():l();var _=Math.random().toString(36).substring(2);function E(){}var x=void 0,A=1,T=2,S={error:null};function R(t){try{return t.then}catch(t){return S.error=t,S}}function C(e,n,r){n.constructor===e.constructor&&r===y&&n.constructor.resolve===b?function(t,e){e._state===A?j(t,e._result):e._state===T?L(t,e._result):I(e,void 0,function(e){return N(t,e)},function(e){return L(t,e)})}(e,n):r===S?(L(e,S.error),S.error=null):void 0===r?j(e,n):t(r)?function(t,e,n){o(function(t){var r=!1,i=function(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}(n,e,function(n){r||(r=!0,e!==n?N(t,n):j(t,n))},function(e){r||(r=!0,L(t,e))},t._label);!r&&i&&(r=!0,L(t,i))},t)}(e,n,r):j(e,n)}function N(t,e){var n,r;t===e?L(t,new TypeError(\"You cannot resolve a promise with itself\"))😦r=typeof(n=e),null===n||\"object\"!==r&&\"function\"!==r?j(t,e):C(t,e,R(e)))}function P(t){t._onerror&&t._onerror(t._result),D(t)}function j(t,e){t._state===x&&(t._result=e,t._state=A,0!==t._subscribers.length&&o(D,t))}function L(t,e){t._state===x&&(t._state=T,t._result=e,o(P,t))}function I(t,e,n,r){var i=t._subscribers,s=i.length;t._onerror=null,i[s]=e,i[s+A]=n,i[s+T]=r,0===s&&t._state&&o(D,t)}function D(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,i=void 0,o=t._result,s😮;s<e.length;s+👨)r=e[s],i=e[s+n],r?O(n,r,i,o):i(o);t._subscribers.length😮}}function O(e,n,r,i){var o=t(r),s=void 0,a=void 0,u=void 0,c=void 0;if(o){if((s=function(t,e){try{return t(e)}catch(t){return S.error=t,S}}(r,i))===S?(c=!0,a😒.error,s.error=null):u=!0,n===s)return void L(n,new TypeError(\"A promises callback cannot return that same promise.\"))}else s=i,u=!0;n._state!==x||(o&&u?N(n,s):c?L(n,a):e===A?j(n,s):e===T&&L(n,s))}var z😮;function k(t){t[_]😒++,t._state=void 0,t._result=void 0,t._subscribers😦]}var M=function(){function t(t,n){this._instanceConstructor=t,this.promise=new t(E),this.promise[_]||k(this.promise),e(n)?(this.length=n.length,this._remaining=n.length,this._result=new Array(this.length),0===this.length?j(this.promise,this._result)😦this.length=this.length||0,this._enumerate(n),0===this._remaining&&j(this.promise,this._result))):L(this.promise,new Error(\"Array Methods must be provided an Array\"))}return t.prototype._enumerate=function(t){for(var e😮;this._state===x&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===b){var i=R(t);if(i===y&&t._state!==😆this._settledAt(t._state,e,t._result);else if(\"function\"!=typeof i)this._remaining--,this._result[e]=t;else if(n===U){var o=new n(E);C(o,t,i),this._willSettleAt(o,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},t.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===x&&(this._remaining--,t===T?L(r,n):this._result[e]=n),0===this._remaining&&j(r,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;I(t,void 0,function(t){return n._settledAt(A,e,t)},function(t){return n._settledAt(T,e,t)})},t}(),U=function(){function e(t){this[_]😒++,this._result=this._state=void 0,this._subscribers😦],E!==t&&(\"function\"!=typeof t&&function(){throw new TypeError(\"You must pass a resolver function as the first argument to the promise constructor\")}(),this instanceof e?function(t,e){try{e(function(e){N(t,e)},function(e){L(t,e)})}catch(e){L(t,e)}}(this,t):function(){throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\")}())}return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.finally=function(e){var n=this.constructor;return t(e)?this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})}):this.then(e,e)},e}();return U.prototype.then=y,U.all=function(t){return new M(this,t).promise},U.race=function(t){var n=this;return e(t)?new n(function(e,r){for(var i=t.length,o😮;o<i;o++)n.resolve(t[o]).then(e,r)}):new n(function(t,e){return e(new TypeError(\"You must pass an array to race.\"))})},U.resolve=b,U.reject=function(t){var e=new this(E);return L(e,t),e},U._setScheduler=function(t){i=t},U._setAsap=function(t){o=t},U._asap😮,U.polyfill=function(){var t=void 0;if(\"undefined\"!=typeof global)t=global;else if(\"undefined\"!=typeof self)t=self;else try{t=Function(\"return this\")()}catch(t){throw new Error(\"polyfill failed because global object is unavailable in this environment\")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if(\"[object Promise]\"===n&&!e.cast)return}t.Promise=U},U.Promise=U,U},t.exports=r()},function(t,e,n){var r=n(47);t.exports=new r(\"twttr\")},function(t,e,n){var r=n(1),i=n(0);function o(t){return i.isType(\"string\",t)?t.split(\".\"):i.isType(\"array\",t)?t😦]}function s(t,e){(e=e||r)[t]=e[t]||{},Object.defineProperty(this,\"base\",{value:e[t]}),Object.defineProperty(this,\"name\",{value:t})}i.aug(s.prototype,{get:function(t){return o(t).reduce(function(t,e){if(i.isObject(t))return t[e]},this.base)},set:function(t,e,n){var r😮(t),s=function(t,e){var n😮(e).slice(0,-1);return n.reduce(function(t,e,r){if(t[e]=t[e]||{},!i.isObject(t[e]))throw new Error(n.slice(0,r+1).join(\".\")+\" is already defined with a value.\");return t[e]},t)}(this.base,t),a=r.slice(-1);return n&&a in s?s[a]😒[a]=e},init:function(t,e){return this.set(t,e,!0)},unset:function(t){var e😮(t),n=this.get(e.slice(0,-1));n&&delete n[e.slice(-1)]},aug:function(t){var e=this.get(t),n=i.toRealArray(arguments).slice(1);if(e=void 0!==e?e:{},n.unshift(e),!n.every(i.isObject))throw new Error(\"Cannot augment non-object.\");return this.set(t,i.aug.apply(null,n))},call:function(t){var e=this.get(t),n=i.toRealArray(arguments).slice(1);if(!i.isType(\"function\",e))throw new Error(\"Function \"+t+\"does not exist.\");return e.apply(null,n)},fullPath:function(t){var e😮(t);return e.unshift(this.name),e.join(\".\")}}),t.exports😒},function(t,e,n){var r=n(0),i=n(7),o={bind:function(t,e){return this._handlers=this._handlers||{},this._handlers[t]=this._handlers[t]||[],this._handlers[t].push(e)},unbind:function(t,e){var n;this._handlers&&this._handlers[t]&&(e?(n=this._handlers[t].indexOf(e))>😮&&this._handlers[t].splice(n,1):this._handlers[t👿])},trigger:function(t,e){var n=this._handlers&&this._handlers[t];(e=e||{}).type=t,n&&n.forEach(function(t){r.async(i(t,this,e))})}};t.exports={Emitter😮,makeEmitter:function(){return r.aug(function(){},o)}}},function(t,e,n){var r=n(98),i=n(74),o=n(6),s=n(21),a=n(7),u=n(0),c=new i(function(t){var e=function(t){return t.reduce(function(t,e){return t[e.className]=t[e.className]||[],t[e.className].push(e),t},{})}(t.map(r.fromRawTask));u.forIn(e,function(t,e){s.allSettled(e.map(function(t){return t.initialize()})).then(function(){e.forEach(function(t){o.all([t.hydrate(),t.insertIntoDom()]).then(a(t.render,t)).then(a(t.success,t),a(t.fail,t))})})})});t.exports={addWidget:function(t){return c.add(t)}}},function(t,e,n){var r=n(17);t.exports=function(t){return r.write(function(){t&&t.parentNode&&t.parentNode.removeChild(t)})}},function(t,e,n){n(12),t.exports={log:function(t,e){}}},function(t,e,n){var r=n(1);function i(t){return(t=t||r).getSelection&&t.getSelection()}t.exports={getSelection:i,getSelectedText:function(t){var e=i(t);return e?e.toString():\"\"}}},function(t,e,n){var r=n(5),i=n(1),o=n(2),s=2e4;t.exports=function(t){var e=new o,n=r.createElement(\"img\");return n.onload=n.onerror=function(){i.setTimeout(e.resolve,50)},n.src=t,i.setTimeout(e.reject,s),e.promise}},function(t,e,n){var r=n(108);t.exports=function(t){t.define(\"createElement\",r),t.define(\"createFragment\",r),t.define(\"htmlToElement\",r),t.define(\"hasSelectedText\",r),t.define(\"addRootClass\",r),t.define(\"removeRootClass\",r),t.define(\"hasRootClass\",r),t.define(\"prependStyleSheet\",r),t.define(\"appendStyleSheet\",r),t.define(\"prependCss\",r),t.define(\"appendCss\",r),t.define(\"makeVisible\",r),t.define(\"injectWidgetEl\",r),t.define(\"matchHeightToContent\",r),t.define(\"matchWidthToContent\",r)}},function(t,e){t.exports=function(t){var e,n=!1;return function(){return n?e😦n=!0,e=t.apply(this,arguments))}}},function(t,e,n){var r=n(15),i=n(117),o=n(57);t.exports=function(t,e,n){return new r(i,o,\"twitter-dm-button\",t,e,n)}},function(t,e,n){var r=n(58),i=n(24);t.exports=r.isSupported()?r:i},function(t,e,n){var r=n(25),i=n(118);t.exports=r.build([i])},function(t,e,n){var r=n(15),i=n(121),o=n(60);t.exports=function(t,e,n){return new r(i,o,\"twitter-follow-button\",t,e,n)}},function(t,e,n){var r=n(25),i=n(122);t.exports=r.build([i])},function(t,e,n){var r=n(15),i=n(129),o=n(24);t.exports=function(t,e,n){return new r(i,o,\"twitter-moment\",t,e,n)}},function(t,e,n){var r=n(15),i=n(131),o=n(24);t.exports=function(t,e,n){return new r(i,o,\"periscope-on-air\",t,e,n)}},function(t,e,n){var r=n(80),i=n(133),o=n(137),s=n(139),a=n(141),u=n(143),c={collection:i,event😮,likes😒,list:a,profile:u,url:l},d😦u,s,i,a,o];function l(t){return r(d,function(e){try{return new e(t)}catch(t){}})}t.exports=function(t){return t?function(t){var e,n;return e😦t.sourceType+\"\").toLowerCase(),(n=c[e])?new n(t):null}(t)||l(t):null}},function(t,e,n){var r=n(15),i=n(145),o=n(24);t.exports=function(t,e,n){return new r(i,o,\"twitter-timeline\",t,e,n)}},function(t,e,n){var r=n(15),i=n(147),o=n(57);t.exports=function(t,e,n){return new r(i,o,\"twitter-tweet\",t,e,n)}},function(t,e,n){var r=n(15),i=n(149),o=n(60);t.exports=function(t,e,n){var s=t&&t.type||\"share\";return new r(i,o,\"hashtag\"==s?\"twitter-hashtag-button\":\"mention\"==s?\"twitter-mention-button\":\"twitter-share-button\",t,e,n)}},function(t,e,n){var r=n(36),i=n(35),o=n(0);t.exports=function(t){var e={widget_origin:i.rootDocumentLocation(),widget_frame:i.isFramed()?i.currentDocumentLocation():null,duration_ms:t.duration,item_ids:t.widgetIds||[]},n😮.aug(t.namespace,{page:\"page\",component:\"performance\"});r.scribe(n,e)}},function(t,e,n){var r=n(0),i=n(134),o😦\"ar\",\"fa\",\"he\",\"ur\"];t.exports={isRtlLang:function(t){return t=String(t).toLowerCase(),r.contains(o,t)},matchLanguage:function(t){return t😦t😦t||\"\").toLowerCase()).replace(\"_\",\"-\"),i(t)?t😦t=t.replace(/-.*/,\"\"),i(t)?t:\"en\")}}},function(t,e,n){var r=n(110),i=n(113);function o(t){return r.settingsLoaded().then(function(e){return e[t]})}function s(){return o(\"experiments\")}t.exports={shouldObtainCookieConsent:function(){return o(\"shouldObtainCookieConsent\")},getExperiments😒,getExperiment:function(t){return s().then(function(e){if(!e[t])throw new Error(\"Experiment not found\");return e[t]})},getActiveExperimentDataString:function(){return s().then(function(t){var e=Object.keys(t).reduce(function(e,n){var r;return t[n].version&&(r=n.split(\"_\").slice(-1)[0],e.push(r+\";\"+t[n].bucket)),e},[]);return i(e.join(\",\"))})},getExperimentKeys:function(){return s().then(function(t){return Object.keys(t)})},load:function(){r.load()}}},function(t){t.exports={tweetButtonHtmlPath:\"/widgets/tweet_button.d753e00c3e838c1b2558149bd3f6ecb8.{{lang}}.html\",followButtonHtmlPath:\"/widgets/follow_button.d753e00c3e838c1b2558149bd3f6ecb8.{{lang}}.html\",hubHtmlPath:\"/widgets/hub.html\",widgetIframeHtmlPath:\"/widgets/widget_iframe.d753e00c3e838c1b2558149bd3f6ecb8.html\",resourceBaseUrl:\"https://platform.twitter.com\"}},function(t,e,n){var r=n(3),i=n(95),o=n(23),s=n(11),a={favorite😦\"favorite\",\"like\"],follow😦\"follow\"],like😦\"favorite\",\"like\"],retweet😦\"retweet\"],tweet😦\"tweet\"]};function u(t){this.srcEl😦],this.element=t}u.open=function(t,e,n){var u😦r.intentType(t)||\"\").toLowerCase();r.isTwitterURL(t)&&(function(t,e){i.open(t,{},e)}(t,n),e&&o.trigger(\"click\",{target:e,region:\"intent\",type:\"click\",data:{}}),e&&a[u]&&a[u].forEach(function(n){o.trigger(n,{target:e,region:\"intent\",type:n,data:function(t,e){var n😒.decodeURL(e);switch(t){case\"favorite\":case\"like\":return{tweet_id:n.tweet_id};case\"follow\":return{screen_name:n.screen_name,user_id:n.user_id};case\"retweet\":return{source_tweet_id:n.tweet_id};default:return{}}}(u,t)})}))},t.exports=u},function(t,e){t.exports={getTimezoneOffset:function(){var t😦new Date).toString().match(/(GMT[+-]?\\d+)/);return t&&t[0]||\"GMT\"}}},function(t,e,n){var r=n(5),i=n(9),o=n(2),s=n(0),a=n(11),u=\"cb\",c😮;t.exports={fetch:function(t,e,n,d){var l,f,h;return d=function(t){if(t)return t.replace(/[^\\w$]/g,\"_\")}(d||u+c++),l=i.fullPath([\"callbacks\",d]),f=r.createElement(\"script\"),h=new o,e😒.aug({},e,{callback:l,suppress_response_codes:!0}),i.set([\"callbacks\",d],function(t){var e;t😦e=n(t||!1)).resp,e.success?h.resolve(t):h.reject(t),f.onload=f.onreadystatechange=null,f.parentNode&&f.parentNode.removeChild(f),i.unset([\"callbacks\",d])}),f.onerror=function(){h.reject(new Error(\"failed to fetch \"+f.src))},f.src=a.url(t,e),f.async=\"async\",r.body.appendChild(f),h.promise}}},function(t,e,n){var r=n(2),i=n(100),o=n(7);function s(t){this._inputsQueue😦],this._task=t,this._hasFlushBeenScheduled=!1}s.prototype.add=function(t){var e=new r;return this._inputsQueue.push({input:t,taskDoneDeferred:e}),this._hasFlushBeenScheduled||(this._hasFlushBeenScheduled=!0,i(o(this._flush,this))),e.promise},s.prototype._flush=function(){try{this._task.call(null,this._inputsQueue)}catch(t){this._inputsQueue.forEach(function(e){e.taskDoneDeferred.reject(t)})}this._inputsQueue😦],this._hasFlushBeenScheduled=!1},t.exports😒},function(t,e){t.exports=function(t,e){return t.reduce(function(t,n){var r=e(n);return t[r]=t[r]||[],t[r].push(n),t},{})}},function(t,e,n){var r=n(5),i=n(😎,o=n(3);function s(t,e){var n,r;return e=e||i,/^https?😕/\\//.test(t)?t😕^\\/\\//.test(t)?e.protocol+t😦n=e.host+(e.port.length?\":\"+e.port:\"\"),0!==t.indexOf(\"/\")&&((r=e.pathname.split(\"/\")).pop(),r.push(t),t=\"/\"+r.join(\"/\")),[e.protocol,\"//\",n,t].join(\"\"))}t.exports={absolutize😒,getCanonicalURL:function(){for(var t,e=r.getElementsByTagName(\"link\"),n😮;e[n];n++)if(\"canonical\"==(t=e[n]).rel)return s(t.href)},getScreenNameFromPage:function(){for(var t,e,n,i😦r.getElementsByTagName(\"a\"),r.getElementsByTagName(\"link\")],s😮,a😮,u😕\\bme\\b/;t=i[s];s++)for(a😮;e=t[a];a++)if(u.test(e.rel)&&(n😮.screenName(e.href)))return n}}},function(t,e,n){var r=n(😎,i😕^[^#?]*\\.(gov|mil)(😕d+)?([#?].*)?$/i,o={};function s(t){return t in o?o[t]😮[t]=i.test(t)}t.exports={isUrlSensitive😒,isHostPageSensitive:function(){return s(r.host)}}},function(t,e,n){var r=n(19),i=n(51),o=n(11),s=n(33),a=n(0),u=n(9).get(\"scribeCallback\"),c=2083,d😦],l😮.url(s.CLIENT_EVENT_ENDPOINT,{dnt😮,l:\"\"}),f=encodeURIComponent(l).length;function h(t,e,n,r){var i=!a.isObject(t),o=!!e&&!a.isObject(e);i||o||(u&&u(arguments),p(s.formatClientEventNamespace(t),s.formatClientEventData(e,n,r),s.CLIENT_EVENT_ENDPOINT))}function p(t,e,n){var r,u;n&&a.isObject(t)&&a.isObject(e)&&(i.log(t,e),r😒.flattenClientEventPayload(t,e),u={l😒.stringify(r)},s.noticeSeen(t)&&(u.notice_seen=!0),r.dnt&&(u.dnt=1),w(o.url(n,u)))}function m(t,e,n,r){var i=!a.isObject(t),o=!!e&&!a.isObject(e);if(!i&&!o)return v(s.flattenClientEventPayload(s.formatClientEventNamespace(t),s.formatClientEventData(e,n,r)))}function v(t){return d.push(t),d}function g(t){return encodeURIComponent(t).length+3}function w(t){return(new Image).src=t}t.exports={canFlushOneItem:function(t){var e=g(s.stringify(t));return f+e<c},_enqueueRawObject:v,scribe😛,clientEvent:h,clientEvent2:function(t,e,n){return h(t,e,n,2)},enqueueClientEvent:m,flushClientEvents:function(){var t;return d.length>1&&m({page:\"widgets_js\",component:\"scribe_pixel\",action:\"batch_log\"},{}),t😛,d😦],t.reduce(function(e,n,r){var i=e.length,o=i&&e[i-1];return r+1==t.length&&n.event_namespace&&\"batch_log\"==n.event_namespace.action&&(n.message😦\"entries:\"+r,\"requests:\"+i].join(\"/\")),function t(e){return Array.isArray(e)||(e😦e]),e.reduce(function(e,n){var r,i😒.stringify(n),o=g(i);return f+o<c?e=e.concat(i)😦r😒.splitLogEntry(n)).length>1&&(e=e.concat(t(r))),e},[])}(n).forEach(function(t){var n=g(t);(!o||o.urlLength+n>c)&&(o={urlLength:f,items😦]},e.push(o)),o.urlLength+=n,o.items.push(t)}),e},[]).map(function(t){var e={l:t.items};return r.enabled()&&(e.dnt=1),w(o.url(s.CLIENT_EVENT_ENDPOINT,e))})},interaction:function(t,e,n,r){var i😒.extractTermsFromDOM(t.target||t.srcElement);i.action=r||\"click\",h(i,e,n)}}},function(t,e,n){var r=n(0),i=n(40);t.exports=function(t,e){return i(t,e)?[t]:r.toRealArray(t.querySelectorAll(e))}},function(t,e){t.exports=function(t,e,n){for(var r,i😮;i<t.length;i++)if(r=e.call(n,t[i],i,t))return r}},function(t,e){t.exports=function(){return Math.floor(+new Date/9e5)}},function(t,e,n){var r=n(12);t.exports=function(t){var e,n;return e=t.headers&&t.headers.status,!(n=t&&!t.error&&200===e)&&t.headers&&t.headers.message&&r.publicError(t.headers.message),{success:n,resp:t}}},function(t,e,n){var r,i=n(28),o😮;function s(){r&&r.length===o&&(i.emitter.trigger(i.ALL_WIDGETS_AND_IMAGES_LOADED,r),r=null)}i.emitter.bind(i.ALL_WIDGETS_RENDER_END,function(t){r=t.widgets,s()}),t.exports={reportImagesLoadForAWidget:function(){o++,s()}}},,,,,,,,function(t,e,n){var r,i=n(2),o=n(5),s=n(93),a=n(46),u=n(9),c=n(94),d=n(23),l=n(97),f=n(150),h=n(158),p=n(159),m=n(28);n(160),m.emitter.trigger(m.START),u.set(\"widgets.init\",!0),a.set(\"init\",!0),p(),r=new i,s.exposeReadyPromise(r.promise,a.base,\"_e\"),a.set(\"widgets\",f),a.set(\"widgets.load\",l.load),a.set(\"events\",d),h(function(){r.resolve(a.base),c.attachTo(o),l.loadPage()})},function(t,e){t.exports=navigator},function(t,e,n){var r=n(7);t.exports={exposeReadyPromise:function(t,e,n){e.ready=r(t.then,t),n&&Array.isArray(e[n])&&(e[n].forEach(r(t.then,t)),delete e[n])}}},function(t,e,n){var r=n(😎,i=n(34),o=n(31),s=n(71),a=n(3);function u(t){var e,n,u;t.altKey||t.metaKey||t.shiftKey||(e😮.closest(function(t){return\"A\"===t.tagName||\"AREA\"===t.tagName},t.target))&&a.isIntentURL(e.href)&&(n😦n😦n😦u=e.href,\"original_referer=\"+r.href].join(-1==u.indexOf(\"?\")?\"?\":\"&\")).replace(/^http[😃/,\"https:\")).replace(/^\\/\\//,\"https://\"),s.open(n,e),i.preventDefault(t))}t.exports={attachTo:function(t){t.addEventListener(\"click\",u,!1)}}},function(t,e,n){var r,i=n(1),o=n(96),s=n(34),a=n(31),u=n(20),c=n(3),d=n(22),l=n(0),f=\"intent_\",h=i.screen.width,p=i.screen.height;function m(t,e){function n(t){return Math.round(t/2)}return t>e?{coordinate😮,size:e}:{coordinate:n(e)-n(t),size:t}}function v(t,e,n){var i,o;e=r.parse(e),n=n||{},i=m(e.width,n.width||h),e.left=i.coordinate,e.width=i.size,o=m(e.height,n.height||p),e.top😮.coordinate,e.height😮.size,this.win=t,this.features=function(t){var e😦];return l.forIn(t,function(t,n){e.push(t+\"=\"+n)}),e.join(\",\")}(e)}r😦new o).defaults({width:550,height:520,personalbar:\"0\",toolbar:\"0\",location:\"1\",scrollbars:\"1\",resizable:\"1\"}),v.prototype.open=function(t,e){var n=e&&\"click\"==e.type&&a.closest(\"a\",e.target),r=e&&(e.altKey||e.metaKey||e.shiftKey),i=n&&(u.ios()||u.android());if(c.isTwitterURL(t))return r||i?this😦this.name=f+d.generate(),this.popup=this.win.open(t,this.name,this.features),e&&s.preventDefault(e),this)},v.open=function(t,e,n){return new v(i,e).open(t,n)},t.exports=v},function(t,e,n){var r=n(4),i=n(0);function o(){this.assertions😦],this._defaults={}}o.prototype.assert=function(t,e){return this.assertions.push({fn:t,msg:e||\"assertion failed\"}),this},o.prototype.defaults=function(t){return this._defaults=t||this._defaults,this},o.prototype.require=function(t){var e=this;return(t=Array.isArray(t)?t:i.toRealArray(arguments)).forEach(function(t){e.assert(function(t){return function(e){return r.hasValue(e[t])}}(t),\"required: \"+t)}),this},o.prototype.parse=function(t){var e,n;if(e=i.aug({},this._defaults,t||{}),(n=this.assertions.reduce(function(t,n){return n.fn(e)||t.push(n.msg),t},[])).length>0)throw new Error(n.join(\"\\n\"));return e},t.exports😮},function(t,e,n){var r=n(5),i=n(6),o=n(21),s=n(49),a=n(32),u=n(9),c=n(36),d=n(23),l=n(4),f=n(0),h=n(69),p=n(114),m=n(28);function v(){var t=a.val(\"widgets:autoload\")||!0;return!l.isFalseValue(t)&&(l.isTruthValue(t)?r.body:r.querySelectorAll(t))}function g(t){var e,n;return t😦t=t||r.body).length?f.toRealArray(t)😦t],c.pause(),n=t.reduce(function(t,e){return t.concat(p.reduce(function(t,n){return t.concat(n(e))},[]))},[]),m.emitter.trigger(m.ALL_WIDGETS_RENDER_START,{widgets:n}),e😮.allResolved(n.map(function(t){return s.addWidget(t)})).then(function(t){d.trigger(\"loaded\",{widgets:t}),t&&t.length&&m.emitter.trigger(m.ALL_WIDGETS_RENDER_END,{widgets:t})}),o.always(e,function(){c.resume()}),e}t.exports={load:g,loadPage:function(){var t=v();return h.load(),!1===t?i.resolve()😦u.set(\"widgets.loaded\",!0),g(t))},_getPageLoadTarget:v}},function(t,e,n){var r=n(10),i=n(17),o=n(23),s=n(50),a=n(6),u=n(21);function c(t,e){this._widget=null,this._sandbox=null,this._hydrated=!1,this._insertedIntoDom=!1,this._Sandbox=t.Sandbox,this._factory=t.factory,this._widgetParams=t.parameters,this._resolve=e,this._className=t.className,this._renderedClassName=t.className+\"-rendered\",this._errorClassName=t.className+\"-error\",this._srcEl=t.srcEl,this._targetGlobal=function(t){return(t.srcEl||t.targetEl).ownerDocument.defaultView}(t),this._insertionStrategy=function(e){var n=t.srcEl,r=t.targetEl;n?r.insertBefore(e,n):r.appendChild(e)}}c.fromRawTask=function(t){return new c(t.input,t.taskDoneDeferred.resolve)},c.prototype.initialize=function(){var t=this,e=new this._Sandbox(this._targetGlobal);return this._factory(this._widgetParams,e).then(function(n){return t._widget=n,t._sandbox=e,n})},c.prototype.insertIntoDom=function(){var t=this;return this._widget?this._sandbox.insert(this._widget.id,{class😦this._className,this._renderedClassName].join(\" \")},null,this._insertionStrategy).then(function(){t._insertedIntoDom=!0}):a.reject(new Error(\"cannot insert widget into DOM before it is initialized\"))},c.prototype.hydrate=function(){var t=this;return this._widget?this._widget.hydrate().then(function(){t._hydrated=!0}):a.reject(new Error(\"cannot hydrate widget before it is initialized\"))},c.prototype.render=function(){var t=this;function e(e){return s(t._sandbox.sandboxEl).then(function(){return a.reject(e)})}return this._hydrated?this._insertedIntoDom?t._widget.render(t._sandbox).then(function(){return t._sandbox.onResize(function(){return t._widget.resize().then(function(){o.trigger(\"resize\",{target:t._sandbox.sandboxEl})})}),t._widget.show()}).then(function(){return s(t._srcEl).then(function(){return t._sandbox.sandboxEl})},e):e(new Error(\"cannot render widget before DOM insertion\")):e(new Error(\"cannot render widget before hydration\"))},c.prototype.fail=function(){var t=this;return this._srcEl?u.always(i.write(function(){r.add(t._srcEl,t._errorClassName)}),function(){o.trigger(\"rendered\",{target:t._srcEl}),t._resolve(t._srcEl)})😦t._resolve(),a.resolve())},c.prototype.success=function(){o.trigger(\"rendered\",{target:this._sandbox.sandboxEl}),this._resolve(this._sandbox.sandboxEl)},t.exports=c},function(t,e,n){var r;!function(){\"use strict\";var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)};function o(){this.frames😦],this.lastId😮,this.raf=i,this.batch={hash:{},read😦],write😦],mode:null}}o.prototype.read=function(t,e){var n=this.add(\"read\",t,e),r=n.id;return this.batch.read.push(n.id),\"reading\"===this.batch.mode||this.batch.scheduled?r😦this.scheduleBatch(),r)},o.prototype.write=function(t,e){var n=this.add(\"write\",t,e),r=this.batch.mode,i=n.id;return this.batch.write.push(n.id),\"writing\"===r||\"reading\"===r||this.batch.scheduled?i😦this.scheduleBatch(),i)},o.prototype.defer=function(t,e,n){\"function\"==typeof t&&(n=e,e=t,t=1);var r=this,i=t-1;return this.schedule(i,function(){r.run({fn:e,ctx:n})})},o.prototype.clear=function(t){if(\"function\"==typeof t)return this.clearFrame(t);t=Number(t);var e=this.batch.hash[t];if(e){var n=this.batch[e.type],r=n.indexOf(t);delete this.batch.hash[t],~r&&n.splice(r,1)}},o.prototype.clearFrame=function(t){var e=this.frames.indexOf(t);~e&&this.frames.splice(e,1)},o.prototype.scheduleBatch=function(){var t=this;this.schedule(0,function(){t.batch.scheduled=!1,t.runBatch()}),this.batch.scheduled=!0},o.prototype.uniqueId=function(){return++this.lastId},o.prototype.flush=function(t){for(var e;e=t.shift()😉this.run(this.batch.hash[e])},o.prototype.runBatch=function(){try{this.batch.mode=\"reading\",this.flush(this.batch.read),this.batch.mode=\"writing\",this.flush(this.batch.write),this.batch.mode=null}catch(t){throw this.runBatch(),t}},o.prototype.add=function(t,e,n){var r=this.uniqueId();return this.batch.hash[r]={id:r,fn:e,ctx:n,type:t}},o.prototype.run=function(t){var e=t.ctx||this,n=t.fn;if(delete this.batch.hash[t.id],!this.onError)return n.call(e);try{n.call(e)}catch(t){this.onError(t)}},o.prototype.loop=function(){var t,e=this,n=this.raf,r=!1;function i(){var t=e.frames.shift();e.frames.length?n(i):e.looping=!1,t&&t()}this.looping||(t=setTimeout(function(){r=!0,i()},500),n(function(){r||(clearTimeout(t),i())}),this.looping=!0)},o.prototype.schedule=function(t,e){return this.frames[t]?this.schedule(t+1,e)😦this.loop(),this.frames[t]=e)};var s=new o;void 0!==t&&t.exports?t.exports😒:void 0===(r=function(){return s}.call(e,n,e,t))||(t.exports=r)}()},function(t,e,n){var r=n(45).Promise;t.exports=r._asap},function(t,e,n){var r,i,o,s=n(5),a=n(1),u=n(29),c=n(19),d=n(2),l=n(6),f=n(51),h=n(33),p=n(0),m=n(24),v=n(9).get(\"scribeCallback\"),g=Math.floor(1e3*Math.random())+\"_\",w=\"rufous-frame-\"+g+\"-\",y=\"rufous-form-\"+g+\"-\",b😮,_=!1,E=new d;function x(){var t😮.createElement(\"form\"),e😮.createElement(\"input\"),n😮.createElement(\"input\");return b++,t.action=h.CLIENT_EVENT_ENDPOINT,t.method=\"POST\",t.target=w+b,t.id=y+b,e.type=\"hidden\",e.name=\"dnt\",e.value=c.enabled(),n.type=\"hidden\",n.name=\"tfw_redirect\",n.value=h.RUFOUS_REDIRECT,t.appendChild(e),t.appendChild(n),t}function A(){var t=w+b;return u({id:t,name:t,width😮,height😮,border😮},{display:\"none\"},o.doc)}t.exports={clientEvent:function(t,e,n,i){(function(t,e){var n=!p.isObject(t),r=!!e&&!p.isObject(e),i=n||r;return i})(t,e)||(v&&v(arguments),E.promise.then(function(){!function(t,e){var n,i,s😜.isObject(t)&&p.isObject(e)&&(f.log(t,e),s=h.flattenClientEventPayload(t,e),(n=r.firstChild).value=+(+n.value||s.dnt||0),(i😮.createElement(\"input\")).type=\"hidden\",i.name=\"l\",i.value=h.stringify(s),r.appendChild(i))}(h.formatClientEventNamespace(t),h.formatClientEventData(e,n,i))}))},flush:function(){return E.promise.then(function(){var t;return r.children.length<=2?l.reject()😦t=l.all([o.doc.body.appendChild(r),o.doc.body.appendChild(i)]).then(function(t){var e=t[0],n=t[1];return n.addEventListener(\"load\",function(){!function(t,e){return function(){var n=t.parentNode;n&&(n.removeChild(t),n.removeChild(e))}}(e,n)()}),e.submit(),t}),r=x(),i=A(),t)})},init:function(){return _?E.promise:((o=new m(a)).insert(\"rufous-sandbox\",null,{display:\"none\"},function(t){s.body.appendChild(t)}).then(function(){o.setTitle(\"Twitter analytics iframe\"),r=x(),i=A(),E.resolve([r,i])}),_=!0,E.promise)}}},function(t,e,n){var r=n(0);t.exports=function t(e){var n😦];return e.forEach(function(e){var i=r.isType(\"array\",e)?t(e)😦e];n=n.concat(i)}),n}},function(t,e){t.exports=function(t){return t.filter(function(e,n){return t.indexOf(e)===n})}},function(t,e,n){var r=n(38),i=n(0),o=n(106);function s(){r.apply(this,arguments)}s.prototype=Object.create(r.prototype),i.aug(s.prototype,{factory😮}),t.exports😒},function(t,e,n){var r=n(21),i=n(0),o=n(7);t.exports={before:function(t,e){return function(){var n,i=this,o=arguments;return n=e.apply(this,arguments),r.isPromise(n)?n.then(function(){return t.apply(i,o)}):t.apply(this,arguments)}},after:function(t,e){return function(){var n,i=this,o=arguments;function s(t,e){return r.isPromise(e)?e.then(function(){return t}):t}return n=t.apply(this,arguments),r.isPromise(n)?n.then(function(t){return s(t,e.apply(i,o))})😒(n,e.apply(this,arguments))}},around:function(t,e){return function(){var n=i.toRealArray(arguments);return n.unshift(o(t,this)),e.apply(this,n)}}}},function(t,e,n){var r=n(10),i=n(17),o=n(39),s=n(6),a=n(0);t.exports=function(){var t😮();function e(e){t.apply(this,arguments),Object.defineProperty(this,\"targetGlobal\",{value:e})}return e.prototype=Object.create(t.prototype),a.aug(e.prototype,{id:null,initialized:!1,width😮,height😮,sandboxEl:null,insert:function(){return s.reject()},onResize:function(){},addClass:function(t){var e=this.sandboxEl;return t=Array.isArray(t)?t😦t],i.write(function(){t.forEach(function(t){r.add(e,t)})})},removeClass:function(t){var e=this.sandboxEl;return t=Array.isArray(t)?t😦t],i.write(function(){t.forEach(function(t){r.remove(e,t)})})},styleSelf:function(t){var e=this;return i.write(function(){a.forIn(t,function(t,n){e.sandboxEl.style[t]=n})})}}),e}},function(t,e,n){var r=n(5),i=n(10),o=n(17),s=n(52),a=n(25),u=n(53),c=n(42),d=n(43),l=n(29),f=n(12),h=n(44),p=n(2),m=n(6),v=n(0),g=n(9),w=n(22),y=n(7),b={allowfullscreen:\"true\"},_={position:\"absolute\",visibility:\"hidden\",display:\"block\",width:\"0px\",height:\"0px\",padding:\"0\",border:\"none\"},E={position:\"static\",visibility:\"visible\"},x=\"SandboxRoot\",A=\".SandboxRoot { display: none; }\",T=50;function S(t,e,n,r){return e=v.aug({id:t},b,e),n=v.aug({},_,n),l(e,n,r)}function R(t,e,n,i,s){var a=new p,u=w.generate(),c😒(t,e,n,s);return g.set([\"sandbox\",u],function(){var t=c.contentWindow.document;o.write(function(){t.write(\"<!DOCTYPE html><html><head></head><body></body></html>\")}).then(function(){t.close(),a.resolve(c)})}),c.src😦\"javascript:\",'document.write(\"\");',\"try { window.parent.document; }\",'catch (e) { document.domain=\"'+r.domain+'\"; }',\"window.parent.\"+g.fullPath([\"sandbox\",u])+\"();\"].join(\"\"),c.addEventListener(\"error\",a.reject,!1),o.write(function(){i.parentNode.replaceChild(c,i)}),a.promise}t.exports=a.couple(n(54),function(t){t.overrideProperty(\"id\",{get:function(){return this.sandboxEl&&this.sandboxEl.id}}),t.overrideProperty(\"initialized\",{get:function(){return!!this.win}}),t.overrideProperty(\"width\",{get:function(){return this._width}}),t.overrideProperty(\"height\",{get:function(){return this._height}}),t.overrideProperty(\"sandboxEl\",{get:function(){return this.iframeEl}}),t.defineProperty(\"iframeEl\",{get:function(){return this._iframe}}),t.defineProperty(\"rootEl\",{get:function(){return this.doc&&this.doc.documentElement}}),t.defineProperty(\"widgetEl\",{get:function(){return this.doc&&this.doc.body.firstElementChild}}),t.defineProperty(\"win\",{get:function(){return this.iframeEl&&this.iframeEl.contentWindow}}),t.defineProperty(\"doc\",{get:function(){return this.win&&this.win.document}}),t.define(\"_updateCachedDimensions\",function(){var t=this;return o.read(function(){var e,n=h(t.sandboxEl);\"visible\"==t.sandboxEl.style.visibility?t._width=n.width😦e=h(t.sandboxEl.parentElement).width,t._width=Math.min(n.width,e)),t._height=n.height})}),t.define(\"_setTargetToBlank\",function(){var t=this.createElement(\"base\");t.target=\"_blank\",this.doc.head.appendChild(t)}),t.define(\"_didResize\",function(){var t=this,e=this._resizeHandlers.slice(0);return this._updateCachedDimensions().then(function(){e.forEach(function(e){e(t)})})}),t.define(\"setTitle\",function(t){this.iframeEl.title=t}),t.override(\"createElement\",function(t){return this.doc.createElement(t)}),t.override(\"createFragment\",function(){return this.doc.createDocumentFragment()}),t.override(\"htmlToElement\",function(t){var e;return(e=this.createElement(\"div\")).innerHTML=t,e.firstElementChild}),t.override(\"hasSelectedText\",function(){return!!s.getSelectedText(this.win)}),t.override(\"addRootClass\",function(t){var e=this.rootEl;return t=Array.isArray(t)?t😦t],this.initialized?o.write(function(){t.forEach(function(t){i.add(e,t)})}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"removeRootClass\",function(t){var e=this.rootEl;return t=Array.isArray(t)?t😦t],this.initialized?o.write(function(){t.forEach(function(t){i.remove(e,t)})}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"hasRootClass\",function(t){return i.present(this.rootEl,t)}),t.define(\"addStyleSheet\",function(t,e){var n,r=new p;return this.initialized?((n=this.createElement(\"link\")).type=\"text/css\",n.rel=\"stylesheet\",n.href=t,n.addEventListener(\"load\",r.resolve,!1),n.addEventListener(\"error\",r.reject,!1),o.write(y(e,null,n)).then(function(){return u(t).then(r.resolve,r.reject),r.promise})):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"prependStyleSheet\",function(t){var e=this.doc;return this.addStyleSheet(t,function(t){var n=e.head.firstElementChild;return n?e.head.insertBefore(t,n):e.head.appendChild(t)})}),t.override(\"appendStyleSheet\",function(t){var e=this.doc;return this.addStyleSheet(t,function(t){return e.head.appendChild(t)})}),t.define(\"addCss\",function(t,e){var n;return c.inlineStyle()?((n=this.createElement(\"style\")).type=\"text/css\",n.appendChild(this.doc.createTextNode(t)),o.write(y(e,null,n)))😦f.devError(\"CSP enabled; cannot embed inline styles\"),m.resolve())}),t.override(\"prependCss\",function(t){var e=this.doc;return this.addCss(t,function(t){var n=e.head.firstElementChild;return n?e.head.insertBefore(t,n):e.head.appendChild(t)})}),t.override(\"appendCss\",function(t){var e=this.doc;return this.addCss(t,function(t){return e.head.appendChild(t)})}),t.override(\"makeVisible\",function(){var t=this;return this.styleSelf(E).then(function(){t._updateCachedDimensions()})}),t.override(\"injectWidgetEl\",function(t){var e=this;return this.initialized?this.widgetEl?m.reject(new Error(\"widget already injected\"))😮.write(function(){e.doc.body.appendChild(t)}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"matchHeightToContent\",function(){var t,e=this;return o.read(function(){t=e.widgetEl?h(e.widgetEl).height😮}),o.write(function(){e.sandboxEl.style.height=t+\"px\"}).then(function(){return e._updateCachedDimensions()})}),t.override(\"matchWidthToContent\",function(){var t,e=this;return o.read(function(){t=e.widgetEl?h(e.widgetEl).width😮}),o.write(function(){e.sandboxEl.style.width=t+\"px\"}).then(function(){return e._updateCachedDimensions()})}),t.after(\"initialize\",function(){this._iframe=null,this._width=this._height😮,this._resizeHandlers😦]}),t.override(\"insert\",function(t,e,n,r){var i=this,s=new p,a=this.targetGlobal.document,u😒(t,e,n,a);return o.write(y(r,null,u)),u.addEventListener(\"load\",function(){(function(t){try{t.contentWindow.document}catch(t){return m.reject(t)}return m.resolve(t)})(u).then(null,y(R,null,t,e,n,u,a)).then(s.resolve,s.reject)},!1),u.addEventListener(\"error\",s.reject,!1),s.promise.then(function(t){var e😛(i._didResize,T,i);return i._iframe=t,i.win.addEventListener(\"resize\",e,!1),m.all([i._setTargetToBlank(),i.addRootClass(😆,i.prependCss(A)])})}),t.override(\"onResize\",function(t){this._resizeHandlers.push(t)}),t.after(\"styleSelf\",function(){return this._updateCachedDimensions()})})},function(t,e){t.exports=function(){throw new Error(\"unimplemented method\")}},function(t,e,n){var r=n(2),i=n(7),o=100,s=3e3;function a(t,e){this._inputsQueue😦],this._task=t,this._isPaused=!1,this._flushDelay=e&&e.flushDelay||o,this._pauseLength=e&&e.pauseLength||s,this._flushTimeout=void 0}a.prototype.add=function(t){var e=new r;return this._inputsQueue.push({input:t,taskDoneDeferred:e}),this._scheduleFlush(),e.promise},a.prototype._scheduleFlush=function(){this._isPaused||(clearTimeout(this._flushTimeout),this._flushTimeout=setTimeout(i(this._flush,this),this._flushDelay))},a.prototype._flush=function(){try{this._task.call(null,this._inputsQueue)}catch(t){this._inputsQueue.forEach(function(e){e.taskDoneDeferred.reject(t)})}this._inputsQueue😦],this._flushTimeout=void 0},a.prototype.pause=function(t){clearTimeout(this._flushTimeout),this._isPaused=!0,!t&&this._pauseLength&&setTimeout(i(this.resume,this),this._pauseLength)},a.prototype.resume=function(){this._isPaused=!1,this._scheduleFlush()},t.exports=a},function(t,e,n){var r,i=n(70),o=n(29),s=n(2),a=n(5),u=n(18),c=n(20),d=n(30),l=n(😎,f=n(12),h=n(111),p=n(55),m=n(9),v=n(11),g=n(112),w=n(0),y=n(1),b😛(function(){return new s});function _(t){var e=t||{should_obtain_cookie_consent:!0,experiments:{}};return new g(e.should_obtain_cookie_consent,e.experiments)}t.exports={load:function(){var t,e,n,s;if(c.ie9()||c.ie10()||\"http:\"!==l.protocol&&\"https:\"!==l.protocol)return f.devError(\"Using default settings due to unsupported browser or protocol.\"),r=_(),void b().resolve();t={origin:l.origin},u.settings().indexOf(\"localhost\")>-1&&(t.localSettings=!0),e=v.url(i.resourceBaseUrl+i.widgetIframeHtmlPath,t),n=function(t){var n;if(e.substr(0,t.origin.length)===t.origin)try{(n=\"string\"==typeof t.data?d.parse(t.data):t.data).namespace===h.settings&&(r=_(n.settings),b().resolve())}catch(t){f.devError(t)}},y.addEventListener(\"message\",n),s😮({src:e,title:\"Twitter settings iframe\"},{display:\"none\"}),a.body.appendChild(s)},settingsLoaded:function(){var t,e,n;return t=new s,e=m.get(\"experimentOverride\"),b().promise.then(function(){e&&e.name&&e.assignment&&((n={})[e.name]={bucket:e.assignment},r.experiments=w.aug(r.experiments,n)),t.resolve(r)}).catch(function(e){t.reject(e)}),t.promise}}},function(t,e){t.exports={settings:\"twttr.settings\"}},function(t,e){t.exports=function(t,e){this.shouldObtainCookieConsent=t,this.experiments=e||{}}},function(t,e){t.exports=function(t){return t.split(\"\").map(function(t){return t.charCodeAt(0).toString(16)}).join(\"\")}},function(t,e,n){t.exports😦n(115),n(120),n(128),n(130),n(132),n(146),n(148)]},function(t,e,n){var r=n(11),i=n(4),o=n(0),s=n(13),a=n(14)(),u=n(56),c=\"a.twitter-dm-button\";t.exports=function(t){return a(t,c).map(function(t){return u(function(t){var e=t.getAttribute(\"data-show-screen-name\"),n😒(t),a=t.getAttribute(\"href\"),u=t.getAttribute(\"data-screen-name\"),c=e?i.asBoolean(e):null,d=t.getAttribute(\"data-size\"),l=r.decodeURL(a),f=l.recipient_id,h=t.getAttribute(\"data-text\")||l.text,p=t.getAttribute(\"data-welcome-message-id\")||l.welcomeMessageId;return o.aug(n,{screenName:u,showScreenName:c,size😛,text:h,userId:f,welcomeMessageId😛})}(t),t.parentNode,t)})}},function(t,e,n){var r=n(0);t.exports=function t(e){var n;if(e)return n=e.lang||e.getAttribute(\"data-lang\"),r.isType(\"string\",n)?n:t(e.parentElement)}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return n.e(2).then(function(r){var o;try{o=n(84),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(119),i=n(1),o=n(10),s=n(34),a=n(17),u=n(52),c=n(25),d=n(53),l=n(42),f=n(44),h=n(7),p=n(43),m=n(6),v=n(0),g=50,w={position:\"absolute\",visibility:\"hidden\",display:\"block\",transform:\"rotate(0deg)\"},y={position:\"static\",visibility:\"visible\"},b=\"twitter-widget\",_=\"open\",E=\"SandboxRoot\",x=\".SandboxRoot { display: none; max-height: 10000px; }\";t.exports=c.couple(n(54),function(t){t.defineStatic(\"isSupported\",function(){return!!i.HTMLElement.prototype.attachShadow&&l.inlineStyle()}),t.overrideProperty(\"id\",{get:function(){return this.sandboxEl&&this.sandboxEl.id}}),t.overrideProperty(\"initialized\",{get:function(){return!!this._shadowHost}}),t.overrideProperty(\"width\",{get:function(){return this._width}}),t.overrideProperty(\"height\",{get:function(){return this._height}}),t.overrideProperty(\"sandboxEl\",{get:function(){return this._shadowHost}}),t.define(\"_updateCachedDimensions\",function(){var t=this;return a.read(function(){var e,n=f(t.sandboxEl);\"visible\"==t.sandboxEl.style.visibility?t._width=n.width😦e=f(t.sandboxEl.parentElement).width,t._width=Math.min(n.width,e)),t._height=n.height})}),t.define(\"_didResize\",function(){var t=this,e=this._resizeHandlers.slice(0);return this._updateCachedDimensions().then(function(){e.forEach(function(e){e(t)})})}),t.override(\"createElement\",function(t){return this.targetGlobal.document.createElement(t)}),t.override(\"createFragment\",function(){return this.targetGlobal.document.createDocumentFragment()}),t.override(\"htmlToElement\",function(t){var e;return(e=this.createElement(\"div\")).innerHTML=t,e.firstElementChild}),t.override(\"hasSelectedText\",function(){return!!u.getSelectedText(this.targetGlobal)}),t.override(\"addRootClass\",function(t){var e=this._shadowRootBody;return t=Array.isArray(t)?t😦t],this.initialized?a.write(function(){t.forEach(function(t){o.add(e,t)})}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"removeRootClass\",function(t){var e=this._shadowRootBody;return t=Array.isArray(t)?t😦t],this.initialized?a.write(function(){t.forEach(function(t){o.remove(e,t)})}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"hasRootClass\",function(t){return o.present(this._shadowRootBody,t)}),t.override(\"addStyleSheet\",function(t,e){return this.addCss('@import url(\"'+t+'\");',e).then(function(){return d(t)})}),t.override(\"prependStyleSheet\",function(t){var e=this._shadowRoot;return this.addStyleSheet(t,function(t){var n=e.firstElementChild;return n?e.insertBefore(t,n):e.appendChild(t)})}),t.override(\"appendStyleSheet\",function(t){var e=this._shadowRoot;return this.addStyleSheet(t,function(t){return e.appendChild(t)})}),t.override(\"addCss\",function(t,e){var n;return this.initialized?l.inlineStyle()?((n=this.createElement(\"style\")).type=\"text/css\",n.appendChild(this.targetGlobal.document.createTextNode(t)),a.write(h(e,null,n))):m.resolve():m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"prependCss\",function(t){var e=this._shadowRoot;return this.addCss(t,function(t){var n=e.firstElementChild;return n?e.insertBefore(t,n):e.appendChild(t)})}),t.override(\"appendCss\",function(t){var e=this._shadowRoot;return this.addCss(t,function(t){return e.appendChild(t)})}),t.override(\"makeVisible\",function(){return this.styleSelf(y)}),t.override(\"injectWidgetEl\",function(t){var e=this;return this.initialized?this._shadowRootBody.firstElementChild?m.reject(new Error(\"widget already injected\")):a.write(function(){e._shadowRootBody.appendChild(t)}).then(function(){return e._updateCachedDimensions()}).then(function(){var t😛(e._didResize,g,e);new r(e._shadowRootBody,t)}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"matchHeightToContent\",function(){return m.resolve()}),t.override(\"matchWidthToContent\",function(){return m.resolve()}),t.override(\"insert\",function(t,e,n,r){var i=this.targetGlobal.document,o=this._shadowHost=i.createElement(b),u=this._shadowRoot😮.attachShadow({mode:_}),c=this._shadowRootBody=i.createElement(\"div\");return v.forIn(e||{},function(t,e){o.setAttribute(t,e)}),o.id=t,u.appendChild(c),s.delegate(c,\"click\",\"A\",function(t,e){e.hasAttribute(\"target\")||e.setAttribute(\"target\",\"_blank\")}),m.all([this.styleSelf(w),this.addRootClass(E),this.prependCss(😆,a.write(r.bind(null,o))])}),t.override(\"onResize\",function(t){this._resizeHandlers.push(t)}),t.after(\"initialize\",function(){this._shadowHost=this._shadowRoot=this._shadowRootBody=null,this._width=this._height😮,this._resizeHandlers😦]}),t.after(\"styleSelf\",function(){return this._updateCachedDimensions()})})},function(t,e){var n;(n=function(t,e){function r(t,e){if(t.resizedAttached){if(t.resizedAttached)return void t.resizedAttached.add(e)}else t.resizedAttached=new function(){var t,e;this.q😦],this.add=function(t){this.q.push(t)},this.call=function(){for(t😮,e=this.q.length;t<e;t++)this.q[t].call()}},t.resizedAttached.add(e);t.resizeSensor=document.createElement(\"div\"),t.resizeSensor.className=\"resize-sensor\";var n=\"position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;\",r=\"position: absolute; left: 0; top: 0; transition: 0s;\";t.resizeSensor.style.cssText=n,t.resizeSensor.innerHTML='<div class=\"resize-sensor-expand\" style=\"'+n+'\"><div style=\"'+r+'\"></div></div><div class=\"resize-sensor-shrink\" style=\"'+n+'\"><div style=\"'+r+' width: 200%; height: 200%\"></div></div>',t.appendChild(t.resizeSensor),{fixed:1,absolute:1}[function(t,e){return t.currentStyle?t.currentStyle[e]:window.getComputedStyle?window.getComputedStyle(t,null).getPropertyValue(e):t.style[e]}(t,\"position\")]||(t.style.position=\"relative\");var i,o,s=t.resizeSensor.childNodes[0],a😒.childNodes[0],u=t.resizeSensor.childNodes[1],c😦u.childNodes[0],function(){a.style.width😒.offsetWidth+10+\"px\",a.style.height😒.offsetHeight+10+\"px\",s.scrollLeft😒.scrollWidth,s.scrollTop😒.scrollHeight,u.scrollLeft=u.scrollWidth,u.scrollTop=u.scrollHeight,i=t.offsetWidth,o=t.offsetHeight});c();var d=function(t,e,n){t.attachEvent?t.attachEvent(\"on\"+e,n):t.addEventListener(e,n)},l=function(){t.offsetWidth==i&&t.offsetHeight==o||t.resizedAttached&&t.resizedAttached.call(),c()}😜(s,\"scroll\",l),d(u,\"scroll\",l)}var i=Object.prototype.toString.call(t),o=\"[object Array]\"===i||\"[object NodeList]\"===i||\"[object HTMLCollection]\"===i||\"undefined\"!=typeof jQuery&&t instanceof jQuery||\"undefined\"!=typeof Elements&&t instanceof Elements;if(o)for(var s😮,a=t.length;s<a;s++)r(t[s],e);else r(t,e);this.detach=function(){if(o)for(var e😮,r=t.length;e<r;e++)n.detach(t[e]);else n.detach(t)}}).detach=function(t){t.resizeSensor&&(t.removeChild(t.resizeSensor),delete t.resizeSensor,delete t.resizedAttached)},void 0!==t&&void 0!==t.exports?t.exports=n:window.ResizeSensor=n},function(t,e,n){var r=n(3),i=n(0),o=n(13),s=n(14)(),a=n(59),u=n(4),c=\"a.twitter-follow-button\";t.exports=function(t){return s(t,c).map(function(t){return a(function(t){var e😮(t),n={screenName:r.screenName(t.href),showScreenName:\"false\"!==t.getAttribute(\"data-show-screen-name\"),showCount:\"false\"!==t.getAttribute(\"data-show-count\"),size:t.getAttribute(\"data-size\"),count:t.getAttribute(\"data-count\"),preview:t.getAttribute(\"data-preview\")};return i.forIn(n,function(t,n){var r=e[t];e[t]=u.hasValue(r)?r:n}),e.screenName=e.screenName||e.screen_name,e}(t),t.parentNode,t)})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return n.e(3).then(function(r){var o;try{o=n(85),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(17),i=n(123),o=n(55),s=n(29),a=n(2),u=n(6),c=n(7),d=n(0),l={position:\"absolute\",visibility:\"hidden\",width:\"0px\",height:\"0px\"},f={position:\"static\",visibility:\"visible\"},h={};i(function(t,e,n){var r=h[t];if(r)return e=e||1,n=n||1,r.styleSelf({width:e+\"px\",height:n+\"px\"}).then(function(){r.didResize()})}),t.exports=function(t){t.overrideProperty(\"id\",{get:function(){return this.sandboxEl&&this.sandboxEl.id}}),t.overrideProperty(\"initialized\",{get:function(){return!!this.iframeEl}}),t.overrideProperty(\"width\",{get:function(){return this._width}}),t.overrideProperty(\"height\",{get:function(){return this._height}}),t.overrideProperty(\"sandboxEl\",{get:function(){return this.iframeEl}}),t.defineProperty(\"iframeEl\",{get:function(){return this._iframe}}),t.define(\"updateCachedDimensions\",function(){var t=this;return this.initialized?r.read(function(){t._width=t.sandboxEl.offsetWidth,t._height=t.sandboxEl.offsetHeight}):u.resolve()}),t.define(\"setTitle\",function(t){this.iframeEl.title=t}),t.define(\"makeVisible\",function(){return this.styleSelf(f)}),t.define(\"didResize\",function(){var t=this,e=t._resizeHandlers.length>0;return this.updateCachedDimensions().then(function(){e&&t._resizeHandlers.forEach(function(e){e(t)})})}),t.define(\"loadDocument\",function(t){var e=new a;return this.initialized?this.iframeEl.src?u.reject(new Error(\"widget already loaded\"))😦this.iframeEl.addEventListener(\"load\",e.resolve,!1),this.iframeEl.addEventListener(\"error\",e.reject,!1),this.iframeEl.src=t,e.promise):u.reject(new Error(\"sandbox not initialized\"))}),t.after(\"initialize\",function(){this._iframe=null,this._width=this._height😮,this._resizeHandlers😦]}),t.override(\"insert\",function(t,e,n,i){var a=this;return e😛.aug({id:t},e),n😛.aug({},l,n),this._iframe😒(e,n),h[t]=this,this.onResize(o(function(){a.makeVisible()})),r.write(c(i,null,this._iframe))}),t.override(\"onResize\",function(t){this._resizeHandlers.push(t)}),t.after(\"styleSelf\",function(){return this.updateCachedDimensions()})}},function(t,e,n){var r=n(1),i=n(124),o=n(126),s=n(23),a=n(4),u=n(127);t.exports=function(t){(new i).attachReceiver(new o.Receiver(r,\"twttr.button\")).bind(\"twttr.private.trigger\",function(t,e){var n=u(this);s.trigger(t,{target:n,region:e,type:t,data:{}})}).bind(\"twttr.private.resizeButton\",function(e){var n=u(this),r=n&&n.id,i=a.asInt(e.width),o=a.asInt(e.height);r&&void 0!==i&&void 0!==o&&t(r,i,o)})}},function(t,e,n){var r=n(30),i=n(125),o=n(0),s=n(6),a=n(21),u=\"2.0\";function c(t){this.registry=t||{}}function d(t){var e,n;return e😮.isType(\"string\",t),n😮.isType(\"number\",t),e||n||null===t}function l(t,e){return{jsonrpc:u,id😛(t)?t:null,error:e}}c.prototype._invoke=function(t,e){var n,r,i;n=this.registry[t.method],r=t.params||[],r😮.isType(\"array\",r)?r😦r];try{i=n.apply(e.source||null,r)}catch(t){i😒.reject(t.message)}return a.isPromise(i)?i😒.resolve(i)},c.prototype._processRequest=function(t,e){var n,r;return function(t){var e,n,r;return!!o.isObject(t)&&(e=t.jsonrpc===u,n😮.isType(\"string\",t.method),r=!(\"id\"in t)||d(t.id),e&&n&&r)}(t)?(n=\"params\"in t&&(r=t.params,!o.isObject(r)||o.isType(\"function\",r))?s.resolve(l(t.id,i.INVALID_PARAMS)):this.registry[t.method]?this._invoke(t,{source:e}).then(function(e){return n=t.id,{jsonrpc:u,id:n,result:e};var n},function(){return l(t.id,i.INTERNAL_ERROR)})😒.resolve(l(t.id,i.METHOD_NOT_FOUND)),null!=t.id?n😒.resolve())😒.resolve(l(t.id,i.INVALID_REQUEST))},c.prototype.attachReceiver=function(t){return t.attachTo(this),this},c.prototype.bind=function(t,e){return this.registry[t]=e,this},c.prototype.receive=function(t,e){var n,a,u,c=this;try{u=t,t😮.isType(\"string\",u)?r.parse(u):u}catch(t){return s.resolve(l(null,i.PARSE_ERROR))}return e=e||null,a=((n😮.isType(\"array\",t))?t😦t]).map(function(t){return c._processRequest(t,e)}),n?function(t){return s.all(t).then(function(t){return(t=t.filter(function(t){return void 0!==t})).length?t:void 0})}(a):a[0]},t.exports=c},function(t){t.exports={PARSE_ERROR:{code😶32700,message:\"Parse error\"},INVALID_REQUEST:{code😶32600,message:\"Invalid Request\"},INVALID_PARAMS:{code😶32602,message:\"Invalid params\"},METHOD_NOT_FOUND:{code😶32601,message:\"Method not found\"},INTERNAL_ERROR:{code😶32603,message:\"Internal error\"}}},function(t,e,n){var r=n(😎,i=n(1),o=n(30),s=n(2),a=n(20),u=n(0),c=n(3),d=n(7),l=a.ie9();function f(t,e,n){var r;t&&t.postMessage&&(l?r😦n||\"\")+o.stringify(e):n?(r={})[n]=e:r=e,t.postMessage(r,\"*\"))}function h(t){return u.isType(\"string\",t)?t:\"JSONRPC\"}function p(t,e){return e?u.isType(\"string\",t)&&0===t.indexOf(e)?t.substring(e.length):t&&t[e]?t[e]:void 0:t}function m(t,e){var n=t.document;this.filter=h(e),this.server=null,this.isTwitterFrame=c.isTwitterURL(n.location.href),t.addEventListener(\"message\",d(this._onMessage,this),!1)}function v(t,e){this.pending={},this.target=t,this.isTwitterHost=c.isTwitterURL(r.href),this.filter=h(e),i.addEventListener(\"message\",d(this._onMessage,this),!1)}u.aug(m.prototype,{_onMessage:function(t){var e,n=this;this.server&&(this.isTwitterFrame&&!c.isTwitterURL(t.origin)||(e😛(t.data,this.filter))&&this.server.receive(e,t.source).then(function(e){e&&f(t.source,e,n.filter)}))},attachTo:function(t){this.server=t},detach:function(){this.server=null}}),u.aug(v.prototype,{_processResponse:function(t){var e=this.pending[t.id];e&&(e.resolve(t),delete this.pending[t.id])},_onMessage:function(t){var e;if((!this.isTwitterHost||c.isTwitterURL(t.origin))&&(e😛(t.data,this.filter))){if(u.isType(\"string\",e))try{e😮.parse(e)}catch(t){return}(e=u.isType(\"array\",e)?e😦e]).forEach(d(this._processResponse,this))}},send:function(t){var e=new s;return t.id?this.pending[t.id]=e:e.resolve(),f(this.target,t,this.filter),e.promise}}),t.exports={Receiver:m,Dispatcher:v,_stringifyPayload:function(t){return arguments.length>0&&(l=!!t),l}}},function(t,e,n){var r=n(5);t.exports=function(t){for(var e,n=r.getElementsByTagName(\"iframe\"),i😮;n[i];i++)if((e=n[i]).contentWindow===t)return e}},function(t,e,n){var r=n(4),i=n(0),o=n(3),s=n(13),a=n(14)(),u=n(61),c=\"a.twitter-moment\";t.exports=function(t){return a(t,c).map(function(t){return u(function(t){var e😒(t),n={momentId😮.momentId(t.href),chrome:t.getAttribute(\"data-chrome\"),limit:t.getAttribute(\"data-limit\")};return i.forIn(n,function(t,n){var i=e[t];e[t]=r.hasValue(i)?i:n}),e}(t),t.parentNode,t)})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return Promise.all([n.e(0),n.e(4)]).then(function(r){var o;try{o=n(86),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(0),i=n(13),o=n(14)(),s=n(62),a=\"a.periscope-on-air\",u😕^https?😕/\\/(?:www\\.)?(?:periscope|pscp)\\.tv\\/@?([a-zA-Z0-9_]+)\\/?$/i;t.exports=function(t){return o(t,a).map(function(t){return s(function(t){var e=i(t),n=t.getAttribute(\"href\"),o=t.getAttribute(\"data-size\"),s=u.exec(n)[1];return r.aug(e,{username😒,size😮})}(t),t.parentNode,t)})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return n.e(5).then(function(r){var o;try{o=n(87),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(4),i=n(0),o=n(63),s=n(13),a=n(14)(),u=n(64),c=n(3),d=n(12),l=\"a.twitter-timeline,div.twitter-timeline,a.twitter-grid\",f=\"Embedded Search timelines have been deprecated. See https://twittercommunity.com/t/deprecating-widget-settings/102295.\",h=\"You may have been affected by an update to settings in embedded timelines. See https://twittercommunity.com/t/deprecating-widget-settings/102295.\",p=\"Embedded grids have been deprecated and will now render as timelines. Please update your embed code to use the twitter-timeline class. More info: https://twittercommunity.com/t/update-on-the-embedded-grid-display-type/119564.\";t.exports=function(t){return a(t,l).map(function(t){return u(function(t){var e😒(t),n=t.getAttribute(\"data-show-replies\"),a={isPreconfigured:!!t.getAttribute(\"data-widget-id\"),chrome:t.getAttribute(\"data-chrome\"),tweetLimit:t.getAttribute(\"data-tweet-limit\")||t.getAttribute(\"data-limit\"),ariaLive:t.getAttribute(\"data-aria-polite\"),theme:t.getAttribute(\"data-theme\"),linkColor:t.getAttribute(\"data-link-color\"),borderColor:t.getAttribute(\"data-border-color\"),showReplies:n?r.asBoolean(n):null,profileScreenName:t.getAttribute(\"data-screen-name\"),profileUserId:t.getAttribute(\"data-user-id\"),favoritesScreenName:t.getAttribute(\"data-favorites-screen-name\"),favoritesUserId:t.getAttribute(\"data-favorites-user-id\"),likesScreenName:t.getAttribute(\"data-likes-screen-name\"),likesUserId:t.getAttribute(\"data-likes-user-id\"),listOwnerScreenName:t.getAttribute(\"data-list-owner-screen-name\"),listOwnerUserId:t.getAttribute(\"data-list-owner-id\"),listId:t.getAttribute(\"data-list-id\"),listSlug:t.getAttribute(\"data-list-slug\"),customTimelineId:t.getAttribute(\"data-custom-timeline-id\"),staticContent:t.getAttribute(\"data-static-content\"),url:t.href};return a.isPreconfigured&&(c.isSearchUrl(a.url)?d.publicError(f,t)😛.publicLog(h,t)),\"twitter-grid\"===t.className&&d.publicLog(p,t),(a=i.aug(a,e)).dataSource😮(a),a.id=a.dataSource&&a.dataSource.id,a}(t),t.parentNode,t)})}},function(t,e,n){var r=n(26);t.exports=r.build([n(27),n(136)])},function(t,e,n){var r=n(0),i=n(135);t.exports=function(t){return\"en\"===t||r.contains(i,t)}},function(t,e){t.exports😦\"hi\",\"zh-cn\",\"fr\",\"zh-tw\",\"msa\",\"fil\",\"fi\",\"sv\",\"pl\",\"ja\",\"ko\",\"de\",\"it\",\"pt\",\"es\",\"ru\",\"id\",\"tr\",\"da\",\"no\",\"nl\",\"hu\",\"fa\",\"ar\",\"ur\",\"he\",\"th\",\"cs\",\"uk\",\"vi\",\"ro\",\"bn\",\"el\",\"en-gb\",\"gu\",\"kn\",\"mr\",\"ta\",\"bg\",\"ca\",\"hr\",\"sr\",\"sk\"]},function(t,e,n){var r=n(3),i=n(0),o=n(18),s=\"collection:\";function a(t,e){return r.collectionId(t)||e}t.exports=function(t){t.params({id:{},url:{}}),t.overrideProperty(\"id\",{get:function(){var t=a(this.params.url,this.params.id);return s+t}}),t.overrideProperty(\"endpoint\",{get:function(){return o.timeline([\"collection\"])}}),t.around(\"queryParams\",function(t){return i.aug(t(),{collection_id:a(this.params.url,this.params.id)})}),t.before(\"initialize\",function(){if(!a(this.params.url,this.params.id))throw new Error(\"one of url or id is required\")})}},function(t,e,n){var r=n(26);t.exports=r.build([n(27),n(138)])},function(t,e,n){var r=n(3),i=n(0),o=n(18),s=\"event:\";function a(t,e){return r.eventId(t)||e}t.exports=function(t){t.params({id:{},url:{}}),t.overrideProperty(\"id\",{get:function(){var t=a(this.params.url,this.params.id);return s+t}}),t.overrideProperty(\"endpoint\",{get:function(){return o.timeline([\"event\"])}}),t.around(\"queryParams\",function(t){return i.aug(t(),{event_id:a(this.params.url,this.params.id)})}),t.before(\"initialize\",function(){if(!a(this.params.url,this.params.id))throw new Error(\"one of url or id is required\")})}},function(t,e,n){var r=n(26);t.exports=r.build([n(27),n(140)])},function(t,e,n){var r=n(3),i=n(0),o=n(18),s=\"likes:\";function a(t){return r.likesScreenName(t.url)||t.screenName}t.exports=function(t){t.params({screenName:{},userId:{},url:{}}),t.overrideProperty(\"id\",{get:function(){var t=a(this.params)||this.params.userId;return s+t}}),t.overrideProperty(\"endpoint\",{get:function(){return o.timeline([\"likes\"])}}),t.define(\"_getLikesQueryParam\",function(){var t=a(this.params);return t?{screen_name:t}:{user_id:this.params.userId}}),t.around(\"queryParams\",function(t){return i.aug(t(),this._getLikesQueryParam())}),t.before(\"initialize\",function(){if(!a(this.params)&&!this.params.userId)throw new Error(\"screen name or user id is required\")})}},function(t,e,n){var r=n(26);t.exports=r.build([n(27),n(142)])},function(t,e,n){var r=n(3),i=n(0),o=n(18),s=\"list:\";function a(t){var e=r.listScreenNameAndSlug(t.url)||t;return i.compact({screen_name:e.ownerScreenName,user_id:e.ownerUserId,list_slug:e.slug})}t.exports=function(t){t.params({id:{},ownerScreenName:{},ownerUserId:{},slug:{},url:{}}),t.overrideProperty(\"id\",{get:function(){var t,e,n;return this.params.id?s+this.params.id😦e😦t=a(this.params))&&t.list_slug.replace(/-/g,\"_\"),n=t&&(t.screen_name||t.user_id),s+(n+\"😊+e)}}),t.overrideProperty(\"endpoint\",{get:function(){return o.timeline([\"list\"])}}),t.define(\"_getListQueryParam\",function(){return this.params.id?{list_id:this.params.id}:a(this.params)}),t.around(\"queryParams\",function(t){return i.aug(t(),this._getListQueryParam())}),t.before(\"initialize\",function(){var t=a(this.params);if(i.isEmptyObject(t)&&!this.params.id)throw new Error(\"qualified slug or list id required\")})}},function(t,e,n){var r=n(26);t.exports=r.build([n(27),n(144)])},function(t,e,n){var r=n(3),i=n(4),o=n(0),s=n(18),a=\"profile:\";function u(t,e){return r.screenName(t)||e}t.exports=function(t){t.params({showReplies:{fallback:!1,transform:i.asBoolean},screenName:{},userId:{},url:{}}),t.overrideProperty(\"id\",{get:function(){var t=u(this.params.url,this.params.screenName);return a+(t||this.params.userId)}}),t.overrideProperty(\"endpoint\",{get:function(){return s.timeline([\"profile\"])}}),t.define(\"_getProfileQueryParam\",function(){var t=u(this.params.url,this.params.screenName),e=t?{screen_name:t}:{user_id:this.params.userId};return o.aug(e,{with_replies:this.params.showReplies?\"true\":\"false\"})}),t.around(\"queryParams\",function(t){return o.aug(t(),this._getProfileQueryParam())}),t.before(\"initialize\",function(){if(!u(this.params.url,this.params.screenName)&&!this.params.userId)throw new Error(\"screen name or user id is required\")})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return Promise.all([n.e(0),n.e(6)]).then(function(r){var o;try{o=n(88),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(10),i=n(3),o=n(0),s=n(13),a=n(14)(),u=n(65),c=\"blockquote.twitter-tweet, blockquote.twitter-video\",d😕\\btw-align-(left|right|center)\\b/;t.exports=function(t){return a(t,c).map(function(t){return u(function(t){var e😒(t),n=t.getElementsByTagName(\"A\"),a=n&&n[n.length-1],u=a&&i.status(a.href),c=t.getAttribute(\"data-conversation\"),l=\"none\"==c||\"hidden\"==c||r.present(t,\"tw-hide-thread\"),f=t.getAttribute(\"data-cards\"),h=\"none\"==f||\"hidden\"==f||r.present(t,\"tw-hide-media\"),p=t.getAttribute(\"data-align\")||t.getAttribute(\"align\"),m=t.getAttribute(\"data-link-color\"),v=t.getAttribute(\"data-theme\");return!p&&d.test(t.className)&&(p=RegExp.$1),o.aug(e,{tweetId:u,hideThread:l,hideCard:h,align😛,linkColor:m,theme:v,id:u})}(t),t.parentNode,t)})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return Promise.all([n.e(0),n.e(7)]).then(function(r){var o;try{o=n(89),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(10),i=n(0),o=n(13),s=n(14)(),a=n(66),u=n(4),c=\"a.twitter-share-button, a.twitter-mention-button, a.twitter-hashtag-button\",d=\"twitter-hashtag-button\",l=\"twitter-mention-button\";t.exports=function(t){return s(t,c).map(function(t){return a(function(t){var e😮(t),n={screenName:t.getAttribute(\"data-button-screen-name\"),text:t.getAttribute(\"data-text\"),type:t.getAttribute(\"data-type\"),size:t.getAttribute(\"data-size\"),url:t.getAttribute(\"data-url\"),hashtags:t.getAttribute(\"data-hashtags\"),via:t.getAttribute(\"data-via\"),buttonHashtag:t.getAttribute(\"data-button-hashtag\")};return i.forIn(n,function(t,n){var r=e[t];e[t]=u.hasValue(r)?r:n}),e.screenName=e.screenName||e.screen_name,e.buttonHashtag=e.buttonHashtag||e.button_hashtag||e.hashtag,r.present(t,d)&&(e.type=\"hashtag\"),r.present(t,l)&&(e.type=\"mention\"),e}(t),t.parentNode,t)})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return n.e(3).then(function(r){var o;try{o=n(90),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(0);t.exports=r.aug({},n(151),n(152),n(153),n(154),n(155),n(156),n(157))},function(t,e,n){var r=n(56),i=n(16)([\"userId\"],{},r);t.exports={createDMButton:i}},function(t,e,n){var r=n(59),i=n(16)([\"screenName\"],{},r);t.exports={createFollowButton:i}},function(t,e,n){var r=n(61),i=n(16)([\"momentId\"],{},r);t.exports={createMoment:i}},function(t,e,n){var r=n(62),i=n(16)([\"username\"],{},r);t.exports={createPeriscopeOnAirButton:i}},function(t,e,n){var r=n(😎,i=n(12),o=n(3),s=n(0),a=n(4),u=n(63),c=n(64),d=n(16)([],{},c),l=n(6),f=\"Embedded grids have been deprecated. Please use twttr.widgets.createTimeline instead. More info: https://twittercommunity.com/t/update-on-the-embedded-grid-display-type/119564.\",h={createTimeline😛,createGridFromCollection:function(t){var e😒.toRealArray(arguments).slice(1),n={sourceType:\"collection\",id:t};return e.unshift(n),i.publicLog(f),p.apply(this,e)}};function p(t){var e,n😒.toRealArray(arguments).slice(1);return a.isString(t)||a.isNumber(t)?l.reject(\"Embedded timelines with widget settings have been deprecated. See https://twittercommunity.com/t/deprecating-widget-settings/102295.\")😒.isObject(t)?(t=t||{},n.forEach(function(t){s.isType(\"object\",t)&&function(t){t.ariaLive=t.ariaPolite}(e=t)}),e||(e={},n.push(e)),t.lang=e.lang,t.tweetLimit=e.tweetLimit,t.showReplies=e.showReplies,e.dataSource=u(t),d.apply(this,n)):l.reject(\"data source must be an object.\")}o.isTwitterURL(r.href)&&(h.createTimelinePreview=function(t,e,n){var r={previewParams:t,useLegacyDefaults:!0,isPreviewTimeline:!0};return r.dataSource=u(r),d(e,r,n)}),t.exports=h},function(t,e,n){var r,i=n(0),o=n(65),s=n(16),a😦r😒([\"tweetId\"],{},o),function(){return i.toRealArray(arguments).slice(1).forEach(function(t){i.isType(\"object\",t)&&(t.hideCard=\"none\"==t.cards||\"hidden\"==t.cards,t.hideThread=\"none\"==t.conversation||\"hidden\"==t.conversation)}),r.apply(this,arguments)});t.exports={createTweet:a,createTweetEmbed:a,createVideo:a}},function(t,e,n){var r=n(0),i=n(66),o=n(16),s😮([\"url\"],{type:\"share\"},i),a😮([\"buttonHashtag\"],{type:\"hashtag\"},i),u😮([\"screenName\"],{type:\"mention\"},i);function c(t){return function(){return r.toRealArray(arguments).slice(1).forEach(function(t){r.isType(\"object\",t)&&(t.screenName=t.screenName||t.screen_name,t.buttonHashtag=t.buttonHashtag||t.button_hashtag||t.hashtag)}),t.apply(this,arguments)}}t.exports={createShareButton:c(s),createHashtagButton:c(a),createMentionButton:c(u)}},function(t,e,n){var r,i,o,s=n(5),a=n(1),u😮,c😦],d😒.createElement(\"a\");function l(){var t,e;for(u=1,t😮,e=c.length;t<e;t++)c[t]()}/^loade|c/.test(s.readyState)&&(u=1),s.addEventListener&&s.addEventListener(\"DOMContentLoaded\",i=function(){s.removeEventListener(\"DOMContentLoaded\",i,!1),l()},!1),d.doScroll&&s.attachEvent(\"onreadystatechange\",r=function(){/^c/.test(s.readyState)&&(s.detachEvent(\"onreadystatechange\",r),l())}),o😛.doScroll?function(t){a.self!=a.top?u?t():c.push(t):function(){try{d.doScroll(\"left\")}catch(e){return setTimeout(function(){o(t)},50)}t()}()}:function(t){u?t():c.push(t)},t.exports😮},function(t,e,n){var r=n(41),i=n(9);t.exports=function(){i.set(\"buildVersion\",r.version)}},function(t,e,n){n(161),n(83),n(164)},function(t,e,n){var r=n(162),i=n(28),o=n(67),s=new r,a=function(t){t.widgets&&1===t.widgets.length&&(s.start(),i.emitter.unbind(i.ALL_WIDGETS_RENDER_START,a))},u=function(t){var e;t.widgets&&1===t.widgets.length&&(e=t.widgets[0],s.end(),e.dataset&&e.dataset.tweetId&&o({duration😒.duration(),namespace:{element:\"tweet\",action:\"render\"},widgetIds😦e.dataset.tweetId]})),i.emitter.unbind(i.ALL_WIDGETS_RENDER_END,u)};i.emitter.bind(i.ALL_WIDGETS_RENDER_START,a),i.emitter.bind(i.ALL_WIDGETS_RENDER_END,u)},function(t,e,n){var r=n(163);function i(){}i.prototype.start=function(){this._startTime=r()},i.prototype.end=function(){this._duration=r()-this._startTime},i.prototype.duration=function(){return this._duration},t.exports=i},function(t,e,n){var r=n(1);t.exports=function(){return r.performance&&r.performance.now?r.performance.now():Date.now()}},function(t,e,n){var r=n(28),i=n(67),o=n(165),s=n(3),a=n(1),u=n(0),c=n(20),d=n(58);function l(t){return t.performance.getEntriesByType(\"resource\").filter(function(t){return s.isTwimgURL(t.name)||s.isTwitterURL(t.name)}).reduce(function(t,e){return t[e.name]=e.duration,t},{})}r.emitter.bind(r.ALL_WIDGETS_AND_IMAGES_LOADED,function(t){var e,n,r😦];c.hasPerformanceInformation()&&(e=l(a),d.isSupported()||(r=function(t){return t.reduce(function(t,e){return u.aug(t,l(e.contentDocument.defaultView))},{})}(t)),n=u.aug({},e,r),Object.keys(o).forEach(function(t){!function(t,e,n){var r=Object.keys(t).reduce(function(e,r){return n(r)?e+t[r]:e},0);i({duration:r,namespace:{element:e,action:\"resource\"}})}(n,t,o[t])}))})},function(t,e,n){var r=n(3),i={all:function(){return!0},image:function(t){return r.isTwimgURL(t)},settings:function(t){return r.isSettingsURL(t)},widget_iframe:function(t){return r.isWidgetIframeURL(t)}};t.exports=i}])));",
            "</script>"
          ]
        },
        {
          "lectureTitle": "Real-time WebGL map of all airplanes in the world",
          "lectureLines": [
            "<h1 id=\"challenge-12\">Challenge</h1>",
            "<p>Uber has built a cool suite of data visualization tools for WebGL. Let’s explore with a real-time dataset of global airplane positions.</p>",
            "<h1 id=\"my-solution-12\">My Solution</h1>",
            "<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/YGv1LNgKbn4\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen>",
            "</iframe>",
            "<iframe src=\"https://codesandbox.io/embed/6yqx23v6mn?fontsize=14\" style=\"width:100%; height:500px; border😮; border-radius: 4px; overflow:hidden;\" sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\">",
            "</iframe>",
            "<p>Giving up on <a href=\"https://reactviz.holiday/lumagl-pt1/\">luma.gl</a> as too low level, we tried something else: <a href=\"http://deck.gl\">Deck.gl</a>. Same suite of WebGL React tools from Uber but higher level and therefore more fun.</p>",
            "<p>Of course Deck.gl is built for maps so we had to make a map. What better way to have fun with a map than drawing live positions of all airplanes in the sky?</p>",
            "<p>All six thousand of them. Sixty times per second.</p>",
            "<p>Yes we can! 💪</p>",
            "<p>This is the plan:</p>",
            "<ol type=\"1\">",
            "<li>Fetch data from <a href=\"https://opensky-network.org\">OpenSky</a></li>",
            "<li>Render map with <a href=\"https://github.com/uber/react-map-gl\">react-map-gl</a></li>",
            "<li>Overlay a Deck.gl <a href=\"http://deck.gl/#/documentation/deckgl-api-reference/layers/icon-layer\">IconLayer</a></li>",
            "<li>Predict each airplane’s position on the next Fetch</li>",
            "<li>Interpolate positions 60 times per second</li>",
            "<li>Update and redraw</li>",
            "</ol>",
            "<p>Out goal is to create a faux live map of airplane positions. We can fetch real positions every 10 seconds per OpenSky usage policy.</p>",
            "<p>You can see the <a href=\"https://github.com/Swizec/webgl-airplanes-map\">full code on GitHub</a>. No Codesandbox today because it makes my computer struggle when WebGL is involved.</p>",
            "<p>&lt;TweetEmbed id=“1076067452038115328” options={{ conversation: ‘none’ }} /&gt;</p>",
            "<p>See the airplanes in your browser 👉 <a href=\"https://create-react-app-gsqfy1eaq.now.sh\">click me 🛩</a></p>",
            "<h2 id=\"fetch-data-from-opensky\">Fetch data from OpenSky</h2>",
            "<p>OpenSky is a receiver network which continuously collects air traffic surveillance data. They keep it for forever and make it available via an API.</p>",
            "<p>As an anon user you can get real-time data of all the world’s airplanes current positions every 10 seconds. With some finnagling you can get historic data, super real-time stuff, and so on. We don’t need any of that.</p>",
            "<p>We <code style=\"white-space: pre-wrap;\">fetchData</code> in <code style=\"white-space: pre-wrap;\">componentDidMount</code>. Parse each entry into an object, update local state, and start the animation. Also schedule the next fetch.</p>",
            "<div class=\"sourceCode\" id=\"cb280\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb280-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"at\" style=\"color: #7d9029;\">componentDidMount</span>() <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb280-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">fetchData</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb280-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb280-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb280-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">fetchData <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb280-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">json</span>(<span class=\"st\" style=\"color: #4070a0;\">&quot;https://opensky-network.org/api/states/all&quot;</span>).<span class=\"at\" style=\"color: #7d9029;\">then</span>(</a>",
            "<a class=\"sourceLine\" id=\"cb280-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        (<span class=\"op\" style=\"color: #666666;\">{</span> states <span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb280-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">setState</span>(</a>",
            "<a class=\"sourceLine\" id=\"cb280-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb280-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// from https://opensky-network.org/apidoc/rest.html#response</span></a>",
            "<a class=\"sourceLine\" id=\"cb280-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"dt\" style=\"color: #902000;\">airplanes</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">states</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> (<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb280-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        <span class=\"dt\" style=\"color: #902000;\">callsign</span><span class=\"op\" style=\"color: #666666;\">:</span> d[<span class=\"dv\" style=\"color: #40a070;\">1</span>]<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb280-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        <span class=\"dt\" style=\"color: #902000;\">longitude</span><span class=\"op\" style=\"color: #666666;\">:</span> d[<span class=\"dv\" style=\"color: #40a070;\">5</span>]<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb280-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        <span class=\"dt\" style=\"color: #902000;\">latitude</span><span class=\"op\" style=\"color: #666666;\">:</span> d[<span class=\"dv\" style=\"color: #40a070;\">6</span>]<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb280-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        <span class=\"dt\" style=\"color: #902000;\">velocity</span><span class=\"op\" style=\"color: #666666;\">:</span> d[<span class=\"dv\" style=\"color: #40a070;\">9</span>]<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb280-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        <span class=\"dt\" style=\"color: #902000;\">altitude</span><span class=\"op\" style=\"color: #666666;\">:</span> d[<span class=\"dv\" style=\"color: #40a070;\">13</span>]<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb280-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        <span class=\"dt\" style=\"color: #902000;\">origin_country</span><span class=\"op\" style=\"color: #666666;\">:</span> d[<span class=\"dv\" style=\"color: #40a070;\">2</span>]<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb280-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        <span class=\"dt\" style=\"color: #902000;\">true_track</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"op\" style=\"color: #666666;\">-</span>d[<span class=\"dv\" style=\"color: #40a070;\">10</span>]<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb280-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        <span class=\"dt\" style=\"color: #902000;\">interpolatePos</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">geoInterpolate</span>(</a>",
            "<a class=\"sourceLine\" id=\"cb280-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                            [d[<span class=\"dv\" style=\"color: #40a070;\">5</span>]<span class=\"op\" style=\"color: #666666;\">,</span> d[<span class=\"dv\" style=\"color: #40a070;\">6</span>]]<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb280-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                            <span class=\"at\" style=\"color: #7d9029;\">destinationPoint</span>(</a>",
            "<a class=\"sourceLine\" id=\"cb280-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                                d[<span class=\"dv\" style=\"color: #40a070;\">5</span>]<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb280-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                                d[<span class=\"dv\" style=\"color: #40a070;\">6</span>]<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb280-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                                d[<span class=\"dv\" style=\"color: #40a070;\">9</span>] <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">fetchEverySeconds</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb280-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                                d[<span class=\"dv\" style=\"color: #40a070;\">10</span>]</a>",
            "<a class=\"sourceLine\" id=\"cb280-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                            )</a>",
            "<a class=\"sourceLine\" id=\"cb280-27\" title=\"27\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        )</a>",
            "<a class=\"sourceLine\" id=\"cb280-28\" title=\"28\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"op\" style=\"color: #666666;\">}</span>))</a>",
            "<a class=\"sourceLine\" id=\"cb280-29\" title=\"29\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb280-30\" title=\"30\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb280-31\" title=\"31\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">startAnimation</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb280-32\" title=\"32\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    <span class=\"at\" style=\"color: #7d9029;\">setTimeout</span>(</a>",
            "<a class=\"sourceLine\" id=\"cb280-33\" title=\"33\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">fetchData</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb280-34\" title=\"34\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                        <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">fetchEverySeconds</span> <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"dv\" style=\"color: #40a070;\">1000</span></a>",
            "<a class=\"sourceLine\" id=\"cb280-35\" title=\"35\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                    )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb280-36\" title=\"36\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">                <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb280-37\" title=\"37\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">            )</a>",
            "<a class=\"sourceLine\" id=\"cb280-38\" title=\"38\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb280-39\" title=\"39\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">};</span></a></code></pre></div>",
            "<p><code style=\"white-space: pre-wrap;\">d3.json</code> fetches JSON data from a URL, returns a promise. We map through the data and assign indexes to representative object keys. Makes the other code easier to read.</p>",
            "<p>In the <code style=\"white-space: pre-wrap;\">setState</code> callback, we start the animation and use a <code style=\"white-space: pre-wrap;\">setTimeout</code> to call <code style=\"white-space: pre-wrap;\">fetchData</code> again in 10 seconds. More about teh animation in a bit.</p>",
            "<h2 id=\"render-map-with-react-map-gl\">Render map with react-map-gl</h2>",
            "<p>Turns out rendering a map with Uber’s react-map-gl is really easy. The library does everything for you.</p>",
            "<div class=\"sourceCode\" id=\"cb281\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb281-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> <span class=\"op\" style=\"color: #666666;\">{</span> StaticMap <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;react-map-gl&#39;</span></a>",
            "<a class=\"sourceLine\" id=\"cb281-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> DeckGL<span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"op\" style=\"color: #666666;\">{</span> IconLayer <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&quot;deck.gl&quot;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb281-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb281-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Set your mapbox access token here</span></a>",
            "<a class=\"sourceLine\" id=\"cb281-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> MAPBOX_ACCESS_TOKEN <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;&lt;your token&gt;&#39;</span></a>",
            "<a class=\"sourceLine\" id=\"cb281-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb281-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// Initial viewport settings</span></a>",
            "<a class=\"sourceLine\" id=\"cb281-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> initialViewState <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb281-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"dt\" style=\"color: #902000;\">longitude</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"fl\" style=\"color: #40a070;\">-122.41669</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb281-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"dt\" style=\"color: #902000;\">latitude</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"fl\" style=\"color: #40a070;\">37.7853</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb281-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"dt\" style=\"color: #902000;\">zoom</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">5</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb281-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"dt\" style=\"color: #902000;\">pitch</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb281-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"dt\" style=\"color: #902000;\">bearing</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb281-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb281-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb281-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// ...</span></a>",
            "<a class=\"sourceLine\" id=\"cb281-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb281-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">&lt;</span>DeckGL</a>",
            "<a class=\"sourceLine\" id=\"cb281-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    initialViewState<span class=\"op\" style=\"color: #666666;\">={</span>initialViewState<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb281-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    controller<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">true</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb281-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    layers<span class=\"op\" style=\"color: #666666;\">={</span>layers<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb281-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb281-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>StaticMap mapboxApiAccessToken<span class=\"op\" style=\"color: #666666;\">={</span>MAPBOX_ACCESS_TOKEN<span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb281-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">&lt;/DeckGL<span class=\"op\" style=\"color: #666666;\">&gt;</span></a></code></pre></div>",
            "<p>That is all.</p>",
            "<p>You need to create a Mapbox account and get your token, the <code style=\"white-space: pre-wrap;\">initialViewState</code> I copied from Uber’s docs. It points to San Francisco.</p>",
            "<p>In the render method you then return <code style=\"white-space: pre-wrap;\">&lt;DeckGL</code> which sets up the layering stuff, and plop a <code style=\"white-space: pre-wrap;\">&lt;StaticMap&gt;</code> inside. This gives you pan and zoom behavior out of the box. I’m sure with some twiddling you could get cool views and rotations and all sorts of 3D stuff.</p>",
            "<p>I say that because I’ve seen pics in Uber docs 😛</p>",
            "<h2 id=\"overlay-a-deck.gl-iconlayer\">Overlay a Deck.gl IconLayer</h2>",
            "<p>That <code style=\"white-space: pre-wrap;\">layers</code> prop needs a list of layers. You’re meant to create a new copy on every render, but internally Deck.gl promises to keep things memoized and figure out a minimal set of changes necessary. How they do that I don’t know and as long as it works it doesn’t really matter how.</p>",
            "<p>We configure the icon layer like this:</p>",
            "<div class=\"sourceCode\" id=\"cb282\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb282-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"im\">import</span> Airplane <span class=\"im\">from</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;./airplane-icon.jpg&#39;</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb282-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb282-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> layers <span class=\"op\" style=\"color: #666666;\">=</span> [</a>",
            "<a class=\"sourceLine\" id=\"cb282-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">new</span> <span class=\"at\" style=\"color: #7d9029;\">IconLayer</span>(<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb282-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">id</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;airplanes&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb282-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">data</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">state</span>.<span class=\"at\" style=\"color: #7d9029;\">airplanes</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb282-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">pickable</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">false</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb282-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">iconAtlas</span><span class=\"op\" style=\"color: #666666;\">:</span> Airplane<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb282-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">iconMapping</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb282-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"dt\" style=\"color: #902000;\">airplane</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb282-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">x</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb282-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">y</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb282-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">width</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">512</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb282-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"dt\" style=\"color: #902000;\">height</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">512</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb282-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb282-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">},</span></a>",
            "<a class=\"sourceLine\" id=\"cb282-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">sizeScale</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">20</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb282-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">getPosition</span><span class=\"op\" style=\"color: #666666;\">:</span> d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> [<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">longitude</span><span class=\"op\" style=\"color: #666666;\">,</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">latitude</span>]<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb282-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">getIcon</span><span class=\"op\" style=\"color: #666666;\">:</span> d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"st\" style=\"color: #4070a0;\">&#39;airplane&#39;</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb282-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"dt\" style=\"color: #902000;\">getAngle</span><span class=\"op\" style=\"color: #666666;\">:</span> d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"dv\" style=\"color: #40a070;\">45</span> <span class=\"op\" style=\"color: #666666;\">+</span> (<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">true_track</span> <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"dv\" style=\"color: #40a070;\">180</span>) / <span class=\"va\" style=\"color: #19177c;\">Math</span>.<span class=\"at\" style=\"color: #7d9029;\">PI</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb282-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb282-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">]<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>We name it <code style=\"white-space: pre-wrap;\">airplanes</code> because it’s showing airplanes, pass in our data, and define the airplane icon. <code style=\"white-space: pre-wrap;\">iconAtlas</code> is a sprite and the mapping specifies which parts of the image map to which name. With just one icon in the image that’s pretty quick.</p>",
            "<p>We use <code style=\"white-space: pre-wrap;\">getPosition</code> to fetch longitude and latitude from each airplane and pass it to the drawing layer. <code style=\"white-space: pre-wrap;\">getIcon</code> specifies that we’re rendering the <code style=\"white-space: pre-wrap;\">airplane</code> icon and <code style=\"white-space: pre-wrap;\">getAngle</code> rotates everything first by 45 degrees because our icon is weird, and then by the direction of the airplane from our data.</p>",
            "<p><code style=\"white-space: pre-wrap;\">true_track</code> is the airplane’s bearing in radians so we transform it to degrees with some math.</p>",
            "<p><img src=\"https://github.com/Swizec/datavizAdvent/blob/master/src/content/webgl-airplanes/airplane-icon.jpg\"></p>",
            "<h2 id=\"predict-airplanes-next-position\">Predict airplanes’ next position</h2>",
            "<p>Predicting each airplane’s position 10 seconds from now is … mathsy. Positions are in latitudes and longitudes, velocities are in meters per second.</p>",
            "<p>I’m not so great with spherical euclidean maths so I borrowed the solution from <a href=\"https://stackoverflow.com/questions/19352921/how-to-use-direction-angle-and-speed-to-calculate-next-times-latitude-and-longi\">StackOverflow</a> and made some adjustments to fit our arguments.</p>",
            "<p>We use that to create a <code style=\"white-space: pre-wrap;\">d3.geoInterpolate</code> interpolator between the start and end point. That enables us to feed in numbers between 0 and 1 and get airplane positions at specific moments in time.</p>",
            "<div class=\"sourceCode\" id=\"cb283\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb283-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">interpolatePos<span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">geoInterpolate</span>(</a>",
            "<a class=\"sourceLine\" id=\"cb283-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  [d[<span class=\"dv\" style=\"color: #40a070;\">5</span>]<span class=\"op\" style=\"color: #666666;\">,</span> d[<span class=\"dv\" style=\"color: #40a070;\">6</span>]]<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb283-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"at\" style=\"color: #7d9029;\">destinationPoint</span>(d[<span class=\"dv\" style=\"color: #40a070;\">5</span>]<span class=\"op\" style=\"color: #666666;\">,</span> d[<span class=\"dv\" style=\"color: #40a070;\">6</span>]<span class=\"op\" style=\"color: #666666;\">,</span> d[<span class=\"dv\" style=\"color: #40a070;\">9</span>] <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">fetchEverySeconds</span><span class=\"op\" style=\"color: #666666;\">,</span> d[<span class=\"dv\" style=\"color: #40a070;\">10</span>])</a>",
            "<a class=\"sourceLine\" id=\"cb283-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">)<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>Gobbledygook. Almost as bad as the <a href=\"https://github.com/Swizec/webgl-airplanes-map/blob/master/src/destinationPoint.js\">destinationPoint function code</a></p>",
            "<h2 id=\"interpolate-and-redraw\">Interpolate and redraw</h2>",
            "<p>With that interpolator in hand, we can start our animation.</p>",
            "<div class=\"sourceCode\" id=\"cb284\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb284-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">currentFrame <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">null</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb284-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">timer <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">null</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb284-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb284-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">startAnimation <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb284-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">if</span> (<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">timer</span>) <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb284-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"va\" style=\"color: #19177c;\">timer</span>.<span class=\"at\" style=\"color: #7d9029;\">stop</span>()<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb284-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb284-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">currentFrame</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb284-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">timer</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">timer</span>(<span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">animationFrame</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb284-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb284-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb284-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">animationFrame <span class=\"op\" style=\"color: #666666;\">=</span> () <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb284-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">let</span> <span class=\"op\" style=\"color: #666666;\">{</span> airplanes <span class=\"op\" style=\"color: #666666;\">}</span> <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">state</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb284-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  airplanes <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">airplanes</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>(d <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb284-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> [longitude<span class=\"op\" style=\"color: #666666;\">,</span> latitude] <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">interpolatePos</span>(</a>",
            "<a class=\"sourceLine\" id=\"cb284-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">currentFrame</span> / <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">framesPerFetch</span></a>",
            "<a class=\"sourceLine\" id=\"cb284-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb284-18\" title=\"18\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb284-19\" title=\"19\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      ...<span class=\"at\" style=\"color: #7d9029;\">d</span><span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb284-20\" title=\"20\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      longitude<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb284-21\" title=\"21\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      latitude<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb284-22\" title=\"22\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">};</span></a>",
            "<a class=\"sourceLine\" id=\"cb284-23\" title=\"23\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb284-24\" title=\"24\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">currentFrame</span> <span class=\"op\" style=\"color: #666666;\">+=</span> <span class=\"dv\" style=\"color: #40a070;\">1</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb284-25\" title=\"25\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">this</span>.<span class=\"at\" style=\"color: #7d9029;\">setState</span>(<span class=\"op\" style=\"color: #666666;\">{</span> airplanes <span class=\"op\" style=\"color: #666666;\">}</span>)<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb284-26\" title=\"26\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">};</span></a></code></pre></div>",
            "<p>We use a <code style=\"white-space: pre-wrap;\">d3.timer</code> to run our <code style=\"white-space: pre-wrap;\">animationFrame</code> function 60 times per second. Or every <code style=\"white-space: pre-wrap;\">requestAnimationFrame</code>. That’s all internal and D3 figures out the best option.</p>",
            "<p>Also gotta make sure to stop any existing timers when running a new one 😃</p>",
            "<p>The <code style=\"white-space: pre-wrap;\">animationFrame</code> method itself maps through the airplanes and creates a new list. On each iteration we copy over the whole datapoint and use the interpolator we defined earlier to calculate the new position.</p>",
            "<p>To get numbers from 0 to 1 we try to predict how many frames we’re gonna render and keep track of which frame we’re at. So 0/60 gives 0, 10/60 gives 0.16, 60/60 gives 1 etc. The interpolator takes this and returns geospatial positions along that path.</p>",
            "<p>Of course this can’t take into account any changes in direction the airplane might make.</p>",
            "<p>Updating component state triggers a re-render.</p>",
            "<h2 id=\"and-thats-cool\">And that’s cool</h2>",
            "<p>What I find really cool about all this is that even though we’re copying and recreating and recalculating and ultimately redrawing some 6000 airplanes it works smoothly. Because WebGL is more performant than I ever dreamed possible.</p>",
            "<p>We could improve performance further by moving this animation out of React state and redraw into vertex shaders but that’s hard and turns out we don’t have to.</p>",
            "<blockquote class=\"twitter-tweet\" data-lang=\"en\">",
            "<p lang=\"en\" dir=\"ltr\">",
            "Look at those little WebGL airplanes go! 🛩<br><br>👉 <a href=\"https://t.co/Q7rpzKGQHi\">https://t.co/Q7rpzKGQHi</a> <a href=\"https://t.co/xOMUJk1J2Z\">pic.twitter.com/xOMUJk1J2Z</a>",
            "</p>",
            "— Swizec Teller (<span class=\"citation\" data-cites=\"Swizec\">@Swizec</span>) <a href=\"https://twitter.com/Swizec/status/1076067452038115328?ref_src=twsrc%5Etfw\">December 21, 2018</a>",
            "</blockquote>",
            "<script async charset=\"utf-8\">",
            "Function&&Function.prototype&&Function.prototype.bind&&(/MSIE ([6789]|10)/.test(navigator.userAgent)||(window.__twttr&&window.__twttr.widgets&&window.__twttr.widgets.loaded&&window.twttr.widgets.load&&window.twttr.widgets.load(),window.__twttr&&window.__twttr.widgets&&window.__twttr.widgets.init||function(t){function e(e){for(var n,i,o=e[0],s=e[1],a😮,c😦];a<o.length;a++)i😮[a],r[i]&&c.push(r[i][0]),r[i]😮;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]😒[n]);for(u&&u(e);c.length😉c.shift()()}var n={},r={1😮};function i(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(t){var e😦],n=r[t];if(0!==n)if(n)e.push(n[2]);else{var o=new Promise(function(e,i){n=r[t👿e,i]});e.push(n[2]😮);var s,a=document.getElementsByTagName(\"head\")[0],u=document.createElement(\"script\");u.charset=\"utf-8\",u.timeout=120,i.nc&&u.setAttribute(\"nonce\",i.nc),u.src=function(t){return i.p+\"js/\"+({0:\"moment~timeline~tweet\",2:\"dm_button\",3:\"button\",4:\"moment\",5:\"periscope_on_air\",6:\"timeline\",7:\"tweet\"}[t]||t)+\".\"+{0:\"a20574004ea824b1c047f200045ffa1e\",2:\"b573518d7182437fcff1973b0098d272\",3:\"509719336ca39171c37a321231ccaf83\",4:\"f261877d67dc45f3972d303d6b32c138\",5:\"04369ab165b401d73b183f97ed7153fd\",6:\"49693ebcd57b08708ebca7502c7c343d\",7:\"73b7ab8a56ad3263cad8d36ba66467fc\"}[t]+\".js\"}(t),s=function(e){u.onerror=u.onload=null,clearTimeout(c);var n=r[t];if(0!==n){if(n){var i=e&&(\"load\"===e.type?\"missing\":e.type),o=e&&e.target&&e.target.src,s=new Error(\"Loading chunk \"+t+\" failed.\\n(\"+i+\": \"+o+\")\");s.type=i,s.request😮,n[1](s)}r[t]=void 0}};var c=setTimeout(function(){s({type:\"timeout\",target:u})},12e4);u.onerror=u.onload😒,a.appendChild(u)}return Promise.all(e)},i.m=t,i.c=n,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,\"a\",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p=\"https://platform.twitter.com/\",i.oe=function(t){throw console.error(t),t};var o=window.__twttrll=window.__twttrll||[],s😮.push.bind(o);o.push=e,o😮.slice();for(var a😮;a<o.length;a++)e(o[a]);var u😒;i(i.s=91)}([function(t,e,n){var r=n(1);function i(t,e){var n;for(n in t)t.hasOwnProperty&&!t.hasOwnProperty(n)||e(n,t[n]);return t}function o(t){return{}.toString.call(t).match(/\\s([a-zA-Z]+)/)[1].toLowerCase()}function s(t){return t===Object(t)}function a(t){var e;if(!s(t))return!1;if(Object.keys)return!Object.keys(t).length;for(e in t)if(t.hasOwnProperty(e))return!1;return!0}function u(t){return t?Array.prototype.slice.call(t)😦]}t.exports={aug:function(t){return u(arguments).slice(1).forEach(function(e){i(e,function(e,n){t[e]=n})}),t},async:function(t,e){r.setTimeout(function(){t.call(e||null)},0)},compact:function t(e){return i(e,function(n,r){s(r)&&(t(r),a(r)&&delete e[n]),void 0!==r&&null!==r&&\"\"!==r||delete e[n]}),e},contains:function(t,e){return!(!t||!t.indexOf)&&t.indexOf(e)>-1},forIn:i,isObject😒,isEmptyObject:a,toType😮,isType:function(t,e){return t==o(e)},toRealArray:u}},function(t,e){t.exports=window},function(t,e,n){var r=n(6);t.exports=function(){var t=this;this.promise=new r(function(e,n){t.resolve=e,t.reject=n})}},function(t,e,n){var r=n(11),i😕(?:^|(?:https?😃?\\/\\/(?:www\\.)?twitter\\.com(?::\\d+)?(?😕/intent\\/(?:follow|user)\\/?\\?screen_name😐(?😕/#!)?\\/))@?([\\w]+)(?😕?|&|$)/i,o😕(?:^|(?:https?😃?\\/\\/(?:www\\.)?twitter\\.com(?::\\d+)?\\/(?:#!\\/)?[\\w_]+\\/status(?:es)?\\/)(\\d+)/i,s😕^http(s?)😕/\\/(\\w+\\.)*twitter\\.com([😕]|$)/i,a😕^http(s?)😕/\\/pbs\\.twimg\\.com\\//,u😕^#?([^.,<>!\\s/#\\-()'\"]+)$/,c😕twitter\\.com(?::\\d{2,4})?\\/intent\\/(\\w+)/,d😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/\\w+\\/timelines\\/(\\d+)/i,l😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/i\\/moments\\/(\\d+)/i,f😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/(\\w+)\\/(?:likes|favorites)/i,h😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/(\\w+)\\/lists\\/([\\w-%]+)/i,p😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/i\\/live\\/(\\d+)/i,m😕^https?😕/\\/syndication\\.twitter\\.com\\/settings/i,v😕^https?😕/\\/(localhost|platform)\\.twitter\\.com(?::\\d+)?\\/widgets\\/widget_iframe\\.(.+)/i,g😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/search\\?q😦\\w+)/i;function w(t){return\"string\"==typeof t&&i.test(t)&&RegExp.$1.length<=20}function y(t){if(w(t))return RegExp.$1}function b(t,e){var n=r.decodeURL(t);if(e=e||!1,n.screen_name=y(t),n.screen_name)return r.url(\"https://twitter.com/intent/\"+(e?\"follow\":\"user\"),n)}function _(t){return\"string\"==typeof t&&u.test(t)}function E(t){return\"string\"==typeof t&&o.test(t)}t.exports={isHashTag:_,hashTag:function(t,e){if(e=void 0===e||e,_(t))return(e?\"#\":\"\")+RegExp.$1},isScreenName:w,screenName:y,isStatus:E,status:function(t){return E(t)&&RegExp.$1},intentForProfileURL:b,intentForFollowURL:function(t){return b(t,!0)},isTwitterURL:function(t){return s.test(t)},isTwimgURL:function(t){return a.test(t)},isIntentURL:function(t){return c.test(t)},isSettingsURL:function(t){return m.test(t)},isWidgetIframeURL:function(t){return v.test(t)},isSearchUrl:function(t){return g.test(t)},regexen:{profile:i},momentId:function(t){return l.test(t)&&RegExp.$1},collectionId:function(t){return d.test(t)&&RegExp.$1},intentType:function(t){return c.test(t)&&RegExp.$1},likesScreenName:function(t){return f.test(t)&&RegExp.$1},listScreenNameAndSlug:function(t){var e,n,r;if(h.test(t)){e=RegExp.$1,n=RegExp.$2;try{r=decodeURIComponent(n)}catch(t){}return{ownerScreenName:e,slug:r||n}}return!1},eventId:function(t){return p.test(t)&&RegExp.$1}}},function(t,e,n){var r=n(0),i😦!0,1,\"1\",\"on\",\"ON\",\"true\",\"TRUE\",\"yes\",\"YES\"],o😦!1,0,\"0\",\"off\",\"OFF\",\"false\",\"FALSE\",\"no\",\"NO\"];function s(t){return void 0!==t&&null!==t&&\"\"!==t}function a(t){return c(t)&&t%1==0}function u(t){return c(t)&&!a(t)}function c(t){return s(t)&&!isNaN(t)}function d(t){return r.contains(o,t)}function l(t){return r.contains(i,t)}t.exports={hasValue😒,isInt:a,isFloat:u,isNumber:c,isString:function(t){return\"string\"===r.toType(t)},isArray:function(t){return s(t)&&\"array\"==r.toType(t)},isTruthValue:l,isFalseValue😛,asInt:function(t){if(a(t))return parseInt(t,10)},asFloat:function(t){if(u(t))return t},asNumber:function(t){if(c(t))return t},asBoolean:function(t){return!(!s(t)||!l(t)&&(d(t)||!t))}}},function(t,e){t.exports=document},function(t,e,n){var r=n(1),i=n(20),o=n(45);i.hasPromiseSupport()||(r.Promise😮),t.exports=r.Promise},function(t,e,n){var r=n(0);t.exports=function(t,e){var n=Array.prototype.slice.call(arguments,2);return function(){var i=r.toRealArray(arguments);return t.apply(e,n.concat(i))}}},function(t,e){t.exports=location},function(t,e,n){var r=n(47);t.exports=new r(\"__twttr\")},function(t,e,n){var r=n(0),i😕\\b([\\w-_]+)\\b/g;function o(t){return new RegExp(\"\\\\b\"+t+\"\\\\b\",\"g\")}function s(t,e){t.classList?t.classList.add(e)😮(e).test(t.className)||(t.className+=\" \"+e)}function a(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(o(e),\" \")}function u(t,e){return t.classList?t.classList.contains(e):r.contains(c(t),e)}function c(t){return r.toRealArray(t.classList?t.classList:t.className.match(i))}t.exports={add😒,remove:a,replace:function(t,e,n){if(t.classList&&u(t,e))return a(t,e),void s(t,n);t.className=t.className.replace(o(e),n)},toggle:function(t,e,n){return void 0===n&&t.classList&&t.classList.toggle?t.classList.toggle(e,n)😦n?s(t,e):a(t,e),n)},present:u,list:c}},function(t,e,n){var r=n(4),i=n(0);function o(t){return encodeURIComponent(t).replace(/\\+/g,\"%2B\").replace(/'/g,\"%27\")}function s(t){return decodeURIComponent(t)}function a(t){var e😦];return i.forIn(t,function(t,n){var s😮(t);i.isType(\"array\",n)||(n😦n]),n.forEach(function(t){r.hasValue(t)&&e.push(s+\"=\"+o(t))})}),e.sort().join(\"&\")}function u(t){var e={};return t?(t.split(\"&\").forEach(function(t){var n=t.split(\"😊,r😒(n[0]),o😒(n[1]);if(2==n.length){if(!i.isType(\"array\",e[r]))return r in e?(e[r👿e[r]],void e[r].push(o)):void(e[r]😮);e[r].push(o)}}),e):{}}t.exports={url:function(t,e){return a(e).length>0?i.contains(t,\"?\")?t+\"&\"+a(e):t+\"?\"+a(e):t},decodeURL:function(t){var e=t&&t.split(\"?\");return 2==e.length?u(e[1]):{}},decode:u,encode:a,encodePart😮,decodePart😒}},function(t,e,n){var r=n(😎,i=n(1),o=n(0),s={},a😮.contains(r.href,\"tw_debug=true\");function u(){}function c(){}function d(){return i.performance&&+i.performance.now()||+new Date}function l(t,e){if(i.console&&i.console[t])switch(e.length){case 1:i.console[t](e[0]);break;case 2:i.console[t](e[0],e[1]);break;case 3:i.console[t](e[0],e[1],e[2]);break;case 4:i.console[t](e[0],e[1],e[2],e[3]);break;case 5:i.console[t](e[0],e[1],e[2],e[3],e[4]);break;default😮!==e.length&&i.console.warn&&i.console.warn(\"too many params passed to logger.\"+t)}}t.exports={devError:u,devInfo:c,devObject:function(t,e){},publicError:function(){l(\"error\",o.toRealArray(arguments))},publicLog:function(){l(\"info\",o.toRealArray(arguments))},time:function(t){a&&(s[t]😛())},timeEnd:function(t){a&&s[t]&&(d(),s[t])}}},function(t,e,n){var r=n(19),i=n(4),o=n(11),s=n(0),a=n(116);t.exports=function(t){var e=t.href&&t.href.split(\"?\")[1],n=e?o.decode(e):{},u={lang:a(t),width:t.getAttribute(\"data-width\")||t.getAttribute(\"width\"),height:t.getAttribute(\"data-height\")||t.getAttribute(\"height\"),related:t.getAttribute(\"data-related\"),partner:t.getAttribute(\"data-partner\")};return i.asBoolean(t.getAttribute(\"data-dnt\"))&&r.setOn(),s.forIn(u,function(t,e){var r=n[t];n[t]=i.hasValue(r)?r:e}),s.compact(n)}},function(t,e,n){var r=n(79),i=n(22);t.exports=function(){var t=\"data-twitter-extracted-\"+i.generate();return function(e,n){return r(e,n).filter(function(e){return!e.hasAttribute(t)}).map(function(e){return e.setAttribute(t,\"true\"),e})}}},function(t,e){function n(t,e,n,r,i,o){this.factory=t,this.Sandbox=e,this.srcEl😮,this.targetEl=i,this.parameters=r,this.className=n}n.prototype.destroy=function(){this.srcEl=this.targetEl=null},t.exports=n},function(t,e,n){var r=n(6),i=n(49),o=n(19),s=n(4),a=n(0);t.exports=function(t,e,n){var u;return t=t||[],e=e||{},u=\"ƒ(\"+t.join(\", \")+\", target, [options]);\",function(){var c,d,l,f,h=Array.prototype.slice.apply(arguments,[0,t.length]),p=Array.prototype.slice.apply(arguments,[t.length]);return p.forEach(function(t){t&&(t.nodeType!==Node.ELEMENT_NODE?a.isType(\"function\",t)?c=t:a.isType(\"object\",t)&&(d=t):l=t)}),h.length!==t.length||0===p.length?(c&&a.async(function(){c(!1)}),r.reject(new Error(\"Not enough parameters. Expected: \"+u))):l?(d=a.aug({},d||{},e),t.forEach(function(t){d[t]=h.shift()}),s.asBoolean(d.dnt)&&o.setOn(),f=i.addWidget(n(d,l)),c&&f.then(c,function(){c(!1)}),f)😦c&&a.async(function(){c(!1)}),r.reject(new Error(\"No target element specified. Expected: \"+u)))}}},function(t,e,n){var r=n(99),i=n(2),o=n(0);function s(t,e){return function(){try{e.resolve(t.call(this))}catch(t){e.reject(t)}}}t.exports={sync:function(t,e){t.call(e)},read:function(t,e){var n=new i;return r.read(s(t,n),e),n.promise},write:function(t,e){var n=new i;return r.write(s(t,n),e),n.promise},defer:function(t,e,n){var a=new i;return o.isType(\"function\",t)&&(n=e,e=t,t=1),r.defer(t,s(e,a),n),a.promise}}},function(t,e,n){var r=n(9),i😦\"https://syndication.twitter.com\",\"https://cdn.syndication.twimg.com\",\"https://localhost.twitter.com:8444\"],o😦\"https://syndication.twitter.com\",\"https://localhost.twitter.com:8445\"],s=function(t,e){return t.indexOf(e)>-1},a=function(){var t=r.get(\"backendHost\");return t&&s(i,t)?t:\"https://cdn.syndication.twimg.com\"},u=function(){var t=r.get(\"settingsSvcHost\");return t&&s(o,t)?t:\"https://syndication.twitter.com\"};function c(t,e){var n😦t];return e.forEach(function(t){n.push(function(t){var e😦t||\"\").toString(),n=\"/\"===e.slice(0,1)?1😮,r=function(t){return\"/\"===t.slice(-1)}(e)?-1:void 0;return e.slice(n,r)}(t))}),n.join(\"/\")}t.exports={cookieConsent:function(t){var e=t||[];return e.unshift(\"cookie/consent\"),c(u(),e)},eventVideo:function(t){var e=t||[];return e.unshift(\"video/event\"),c(a(),e)},grid:function(t){var e=t||[];return e.unshift(\"grid/collection\"),c(a(),e)},moment:function(t){var e=t||[];return e.unshift(\"moments\"),c(a(),e)},settings:function(t){var e=t||[];return e.unshift(\"settings\"),c(u(),e)},timeline:function(t){var e=t||[];return e.unshift(\"timeline\"),c(a(),e)},tweetBatch:function(t){var e=t||[];return e.unshift(\"tweets.json\"),c(a(),e)},video:function(t){var e=t||[];return e.unshift(\"widgets/video\"),c(a(),e)}}},function(t,e,n){var r=n(5),i=n(😎,o=n(35),s=n(77),a=n(4),u=n(32),c=!1,d😕https?😕/\\/([^/]+).*/i;t.exports={setOn:function(){c=!0},enabled:function(t,e){return!!(c||a.asBoolean(u.val(\"dnt\"))||s.isUrlSensitive(e||i.host)||o.isFramed()&&s.isUrlSensitive(o.rootDocumentLocation())||(t😛.test(t||r.referrer)&&RegExp.$1)&&s.isUrlSensitive(t))}}},function(t,e,n){var r=n(5),i=n(12),o=n(92),s=n(1),a=n(0),u😮.userAgent;function c(t){return/(Trident|MSIE|Edge[/ ]?\\d)/.test(t=t||u)}t.exports={retina:function(t){return(t=t||s).devicePixelRatio?t.devicePixelRatio>=1.5:!!t.matchMedia&&t.matchMedia(\"only screen and (min-resolution: 144dpi)\").matches},anyIE:c,ie9:function(t){return/MSIE 9/.test(t=t||u)},ie10:function(t){return/MSIE 10/.test(t=t||u)},ios:function(t){return/(iPad|iPhone|iPod)/.test(t=t||u)},android:function(t){return/^Mozilla\\/5\\.0 \\(Linux; (U; )?Android/.test(t=t||u)},canPostMessage:function(t,e){return t=t||s,e=e||u,t.postMessage&&!(c(e)&&t.opener)},touch:function(t,e,n){return t=t||s,e=e||o,n=n||u,\"ontouchstart\"in t||/Opera Mini/.test(n)||e.msMaxTouchPoints>0},cssTransitions:function(){var t=r.body.style;return void 0!==t.transition||void 0!==t.webkitTransition||void 0!==t.mozTransition||void 0!==t.oTransition||void 0!==t.msTransition},hasPromiseSupport:function(){return!!(s.Promise&&s.Promise.resolve&&s.Promise.reject&&s.Promise.all&&s.Promise.race&&(new s.Promise(function(e){t=e}),a.isType(\"function\",t)));var t},hasIntersectionObserverSupport:function(){return!!s.IntersectionObserver},hasPerformanceInformation:function(){return s.performance&&s.performance.getEntriesByType},hasLocalStorageSupport:function(){try{return s.localStorage.setItem(\"local_storage_support_test\",\"true\"),void 0!==s.localStorage}catch(t){return i.devError(\"window.localStorage is not supported:\",t),!1}}}},function(t,e,n){var r=n(6),i=n(2);function o(t,e){return t.then(e,e)}function s(t){return t instanceof r}t.exports={always😮,allResolved:function(t){var e;return void 0===t?r.reject(new Error(\"undefined is not an object\")):Array.isArray(t)?(e=t.length)?new r(function(n,r){var i😮,o😦];function a(){(i+=1)===e&&(0===o.length?r():n(o))}function u(t){o.push(t),a()}t.forEach(function(t){s(t)?t.then(u,a):u(t)})}):r.resolve([]):r.reject(new Error(\"Type error\"))},some:function(t){var e;return e😦t=t||[]).length,t=t.filter(s),e?e!==t.length?r.reject(\"non-Promise passed to .some\"):new r(function(e,n){var r😮;function i(){(r+=1)===t.length&&n()}t.forEach(function(t){t.then(e,i)})}):r.reject(\"no promises passed to .some\")},isPromise😒,allSettled:function(t){function e(){}return r.all((t||[]).map(function(t){return o(t,e)}))},timeout:function(t,e){var n=new i;return setTimeout(function(){n.reject(new Error(\"Promise timed out\"))},e),t.then(function(t){n.resolve(t)},function(t){n.reject(t)}),n.promise}}},function(t,e){var n=\"i\",r😮,i😮;t.exports={generate:function(){return n+String(+new Date)+Math.floor(1e5*Math.random())+r++},deterministic:function(){return n+String(i++)}}},function(t,e,n){var r=n(46),i=n(48),o=n(0);t.exports😮.aug(r.get(\"events\")||{},i.Emitter)},function(t,e,n){var r=n(25),i=n(107);t.exports=r.build([i])},function(t,e,n){var r=n(37),i=n(104),o=n(7);(r=Object.create(r)).build😮(r.build,null,i),t.exports=r},function(t,e,n){var r=n(37),i=n(38),o=n(7);(r=Object.create(r)).build😮(r.build,null,i),t.exports=r},function(t,e,n){var r=n(81),i=n(73),o=n(82),s=n(😎,a=n(68),u=n(72),c=n(19),d=n(4),l=n(22),f=n(0);function h(t){if(!t||!t.headers)throw new Error(\"unexpected response schema\");return{html:t.body,config:t.config,pollInterval:1e3*parseInt(t.headers.xPolling,10)||null,maxCursorPosition:t.headers.maxPosition,minCursorPosition:t.headers.minPosition}}function p(t){if(t&&t.headers)throw new Error(t.headers.status);throw t instanceof Error?t:new Error(t)}t.exports=function(t){t.params({instanceId:{required:!0,fallback:l.deterministic},lang:{required:!0,transform:a.matchLanguage,fallback:\"en\"},tweetLimit:{transform😛.asInt}}),t.defineProperty(\"endpoint\",{get:function(){throw new Error(\"endpoint not specified\")}}),t.defineProperty(\"pollEndpoint\",{get:function(){return this.endpoint}}),t.define(\"cbId\",function(t){var e=t?\"_new\":\"_old\";return\"tl_\"+this.params.instanceId+\"_\"+this.id+e}),t.define(\"queryParams\",function(){return{lang:this.params.lang,tz:u.getTimezoneOffset(),t:r(),domain😒.host,tweet_limit:this.params.tweetLimit,dnt:c.enabled()}}),t.define(\"fetch\",function(){return i.fetch(this.endpoint,this.queryParams(),o,this.cbId()).then(h,p)}),t.define(\"poll\",function(t,e){var n,r;return n={since_id😦t=t||{}).sinceId,max_id:t.maxId,min_position:t.minPosition,max_position:t.maxPosition},r=f.aug(this.queryParams(),n),i.fetch(this.pollEndpoint,r,o,this.cbId(e)).then(h,p)})}},function(t,e,n){var r=n(48).makeEmitter();t.exports={emitter:r,START:\"start\",ALL_WIDGETS_RENDER_START:\"all_widgets_render_start\",ALL_WIDGETS_RENDER_END:\"all_widgets_render_end\",ALL_WIDGETS_AND_IMAGES_LOADED:\"all_widgets_and_images_loaded\"}},function(t,e,n){var r=n(5),i=n(0);t.exports=function(t,e,n){var o;if(n=n||r,t=t||{},e=e||{},t.name){try{o=n.createElement('<iframe name=\"'+t.name+'\"></iframe>')}catch(e){(o=n.createElement(\"iframe\")).name=t.name}delete t.name}else o=n.createElement(\"iframe\");return t.id&&(o.id=t.id,delete t.id),o.allowtransparency=\"true\",o.scrolling=\"no\",o.setAttribute(\"frameBorder\",0),o.setAttribute(\"allowTransparency\",!0),i.forIn(t,function(t,e){o.setAttribute(t,e)}),i.forIn(e,function(t,e){o.style[t]=e}),o}},function(t,e,n){var r=n(1).JSON;t.exports={stringify:r.stringify||r.encode,parse:r.parse||r.decode}},function(t,e,n){var r=n(0),i=n(40);t.exports={closest:function t(e,n,o){var s;if(n)return o😮||n&&n.ownerDocument,s=r.isType(\"function\",e)?e:function(t){return function(e){return!!e.tagName&&i(e,t)}}(e),n===o?s(n)?n:void 0😒(n)?n:t(s,n.parentNode,o)}}},function(t,e,n){var r,i=n(5);function o(t){var e,n,o,s😮;for(r={},e😦t=t||i).getElementsByTagName(\"meta\");e[s];s++){if(n=e[s],/^twitter😕.test(n.getAttribute(\"name\")))o=n.getAttribute(\"name\").replace(/^twitter😕,\"\");else{if(!/^twitter😕.test(n.getAttribute(\"property\")))continue;o=n.getAttribute(\"property\").replace(/^twitter😕,\"\")}r[o]=n.getAttribute(\"content\")||n.getAttribute(\"value\")}}o(),t.exports={init😮,val:function(t){return r[t]}}},function(t,e,n){var r=n(5),i=n(30),o=n(19),s=n(0),a=n(41),u=n(9),c=n(3),d=n(31),l=a.version,f=u.get(\"clientEventEndpoint\")||\"https://syndication.twitter.com/i/jot\",h=1;function p(t){return s.aug({client:\"tfw\"},t||{})}function m(t,e,n){return e=e||{},s.aug({},e,{_category_:t,triggered_on:e.triggered_on||+new Date,dnt😮.enabled(n)})}t.exports={extractTermsFromDOM:function t(e,n){var r;return n=n||{},e&&e.nodeType===Node.ELEMENT_NODE?((r=e.getAttribute(\"data-scribe\"))&&r.split(\" \").forEach(function(t){var e=t.trim().split(\"😊,r=e[0],i=e[1];r&&i&&!n[r]&&(n[r]=i)}),t(e.parentNode,n)):n},clickEventElement:function(t){var e😛.closest(\"[data-expanded-url]\",t),n=e&&e.getAttribute(\"data-expanded-url\");return n&&c.isTwitterURL(n)?\"twitter_url\":\"url\"},flattenClientEventPayload:function(t,e){return s.aug({},e,{event_namespace:t})},formatGenericEventData:m,formatClientEventData:function(t,e,n){var i=t&&t.widget_origin||r.referrer;return(t=m(\"tfw_client_event\",t,i)).client_version=l,t.format_version=void 0!==n?n:1,e||(t.widget_origin=i),t},formatClientEventNamespace😛,formatTweetAssociation:function(t,e){var n={};return(e=e||{}).association_namespace😛(t),n[h]=e,n},noticeSeen:function(t){return\"notice\"===t.element&&\"seen\"===t.action},splitLogEntry:function(t){var e,n,r,i,o;return t.item_ids&&t.item_ids.length>1?(e=Math.floor(t.item_ids.length/2),n=t.item_ids.slice(0,e),r={},i=t.item_ids.slice(e),o={},n.forEach(function(e){r[e]=t.item_details[e]}),i.forEach(function(e){o[e]=t.item_details[e]}),[s.aug({},t,{item_ids:n,item_details:r}),s.aug({},t,{item_ids:i,item_details😮})])😦t]},stringify:function(t){var e,n=Array.prototype.toJSON;return delete Array.prototype.toJSON,e=i.stringify(t),n&&(Array.prototype.toJSON=n),e},AUDIENCE_ENDPOINT:\"https://syndication.twitter.com/i/jot/syndication\",CLIENT_EVENT_ENDPOINT:f,RUFOUS_REDIRECT:\"https://platform.twitter.com/jot.html\"}},function(t,e,n){var r=n(10),i={},o=-1,s={};function a(t){var e=t.getAttribute(\"data-twitter-event-id\");return e||(t.setAttribute(\"data-twitter-event-id\",++o),o)}function u(t,e,n){var r😮,i=t&&t.length||0;for(r😮;r<i;r++)if(t[r].call(e,n,e),n.ceaseImmediately)return!1}function c(t,e,n){for(var i=n||t.target||t.srcElement,o=r.list(i).map(function(t){return\".\"+t}).concat(i.tagName),s😮,a😮.length;s<a;s++)if(!1===u(e[o[s]],i,t))return;t.cease||i!==this&&c.call(this,t,e,i.parentElement||i.parentNode)}function d(t,e,n,r){function i(r){c.call(t,r,n[e])}!function(t,e,n,r){t.id&&(s[t.id]😒[t.id]||[],s[t.id].push({el:t,listener:e,type:n,rootId:r}))}(t,i,e,r),t.addEventListener(e,i,!1)}function l(t){t&&t.preventDefault?t.preventDefault():t.returnValue=!1}function f(t){t&&(t.cease=!0)&&t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}t.exports={stop:function(t){return f(t),l(t),!1},stopPropagation:f,stopImmediatePropagation:function(t){t&&(t.ceaseImmediately=!0,f(t),t.stopImmediatePropagation())},preventDefault:l,delegate:function(t,e,n,r){var o=a(t);i[o]=i[o]||{},i[o][e]||(i[o][e]={},d(t,e,i[o],o)),i[o][e][n]=i[o][e][n]||[],i[o][e][n].push(r)},simulate:function(t,e,n){var r=a(e),o=i[r]&&i[r];c.call(e,{target:n},o[t])},removeDelegatesForWidget:function(t){var e😒[t];e&&(e.forEach(function(t){t.el.removeEventListener(t.type,t.listener,!1),delete i[t.rootId]}),delete s[t])}}},function(t,e,n){var r=n(😎,i=n(76),o=n(0),s=i.getCanonicalURL()||r.href,a😒;t.exports={isFramed:function(){return s!==a},rootDocumentLocation:function(t){return t&&o.isType(\"string\",t)&&(s=t),s},currentDocumentLocation:function(){return a}}},function(t,e,n){var r=n(75),i=n(101),o=n(78),s=n(33),a=new(n(109))(function(t){var e,n,a;if(0!==t.length){if(u(t))return c(t);e=r(t,function(t){return s.noticeSeen(t.input.namespace)}),n=e.true,a=e.false,n&&n.length>0&&(n=n.slice(0,1),o.canFlushOneItem(n[0])||(n[0].input.data.message=\"\"),c(n)),a&&(u(a)?c:function(t){i.init(),t.forEach(function(t){var e=t.input.namespace,n=t.input.data,r=t.input.offsite,o=t.input.version;i.clientEvent(e,n,r,o)}),i.flush().then(function(){t.forEach(function(t){t.taskDoneDeferred.resolve()})},function(){t.forEach(function(t){t.taskDoneDeferred.reject()})})})(a)}});function u(t){return 1===t.length&&o.canFlushOneItem(t[0])}function c(t){t.forEach(function(t){var e=t.input.namespace,n=t.input.data,r=t.input.offsite,i=t.input.version;o.clientEvent(e,n,r,i),t.taskDoneDeferred.resolve()})}t.exports={scribe:function(t,e,n,r){return a.add({namespace:t,data:e,offsite:n,version:r})},pause:function(){a.pause()},resume:function(){a.resume()}}},function(t,e,n){var r=n(102),i=n(103),o=n(0);t.exports={couple:function(){return o.toRealArray(arguments)},build:function(t,e,n){var o=new t;return(e=i(r(e||[]))).forEach(function(t){t.call(null,o)}),o.build(n)}}},function(t,e,n){var r=n(105),i=n(0),o=n(39);function s(){this.Component=this.factory(),this._adviceArgs😦],this._lastArgs😦]}i.aug(s.prototype,{factory😮,build:function(t){var e=this;return this.Component,i.aug(this.Component.prototype.boundParams,t),this._adviceArgs.concat(this._lastArgs).forEach(function(t){(function(t,e,n){var r=this[e];if(!r)throw new Error(e+\" does not exist\");this[e]=t(r,n)}).apply(e.Component.prototype,t)}),delete this._lastArgs,delete this._adviceArgs,this.Component},params:function(t){var e=this.Component.prototype.paramConfigs;t=t||{},this.Component.prototype.paramConfigs=i.aug({},t,e)},define:function(t,e){if(t in this.Component.prototype)throw new Error(t+\" has previously been defined\");this.override(t,e)},defineStatic:function(t,e){this.Component[t]=e},override:function(t,e){this.Component.prototype[t]=e},defineProperty:function(t,e){if(t in this.Component.prototype)throw new Error(t+\" has previously been defined\");this.overrideProperty(t,e)},overrideProperty:function(t,e){var n=i.aug({configurable:!0},e);Object.defineProperty(this.Component.prototype,t,n)},before:function(t,e){this._adviceArgs.push([r.before,t,e])},after:function(t,e){this._adviceArgs.push([r.after,t,e])},around:function(t,e){this._adviceArgs.push([r.around,t,e])},last:function(t,e){this._lastArgs.push([r.after,t,e])}}),t.exports😒},function(t,e,n){var r=n(0);function i(){return!0}function o(t){return t}t.exports=function(){function t(t){var e=this;t=t||{},this.params=Object.keys(this.paramConfigs).reduce(function(n,s){var a😦],u=e.boundParams,c=e.paramConfigs[s],d=c.validate||i,l=c.transform||o;if(s in u&&a.push(u[s]),s in t&&a.push(t[s]),a=\"fallback\"in c?a.concat(c.fallback):a,n[s]=function(t,e,n){var i=null;return t.some(function(t){if(t=r.isType(\"function\",t)?t():t,e(t))return i=n(t),!0}),i}(a,d,l),c.required&&null==n[s])throw new Error(s+\" is a required parameter\");return n},{}),this.initialize()}return r.aug(t.prototype,{paramConfigs:{},boundParams:{},initialize:function(){}}),t}},function(t,e,n){var r=n(1).HTMLElement,i=r.prototype.matches||r.prototype.matchesSelector||r.prototype.webkitMatchesSelector||r.prototype.mozMatchesSelector||r.prototype.msMatchesSelector||r.prototype.oMatchesSelector;t.exports=function(t,e){if(i)return i.call(t,e)}},function(t){t.exports={version:\"7e980dd:1559715853415\"}},function(t,e,n){var r,i=n(10),o=n(5),s=n(1),a=n(32),u=n(50),c=n(4),d=n(22),l=\"csptest\";t.exports={inlineStyle:function(){var t=l+d.generate(),e😮.createElement(\"div\"),n😮.createElement(\"style\"),f=\".\"+t+\" { visibility: hidden; }\";return!!o.body&&(c.asBoolean(a.val(\"widgets:csp\"))&&(r=!1),void 0!==r?r😦e.style.display=\"none\",i.add(e,t),n.type=\"text/css\",n.appendChild(o.createTextNode(f)),o.body.appendChild(n),o.body.appendChild(e),r=\"hidden\"===s.getComputedStyle(e).visibility,u(e),u(n),r))}}},function(t,e,n){var r=n(1);t.exports=function(t,e,n){var i,o😮;return n=n||null,function s(){var a=n||this,u=arguments,c=+new Date;if(r.clearTimeout(i),c-o>e)return o=c,void t.apply(a,u);i=r.setTimeout(function(){s.apply(a,u)},e)}}},function(t,e){t.exports=function(t){var e=t.getBoundingClientRect();return{width:e.width,height:e.height}}},function(t,e,n){",
            "/*!",
            " * @overview es6-promise - a tiny implementation of Promises/A+.",
            " * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)",
            " * @license   Licensed under MIT license",
            " *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE",
            " * @version   v4.2.5+7f2b526d",
            " */var r;r=function(){\"use strict\";function t(t){return\"function\"==typeof t}var e=Array.isArray?Array.isArray:function(t){return\"[object Array]\"===Object.prototype.toString.call(t)},n😮,r=void 0,i=void 0,o=function(t,e){f[n]=t,f[n+1]=e,2===(n+=2)&&(i?i(h):w())},s=\"undefined\"!=typeof window?window:void 0,a😒||{},u=a.MutationObserver||a.WebKitMutationObserver,c=\"undefined\"==typeof self&&\"undefined\"!=typeof process&&\"[object process]\"==={}.toString.call(process),d=\"undefined\"!=typeof Uint8ClampedArray&&\"undefined\"!=typeof importScripts&&\"undefined\"!=typeof MessageChannel;function l(){var t=setTimeout;return function(){return t(h,1)}}var f=new Array(1e3);function h(){for(var t😮;t<n;t+=2)(0,f[t])(f[t+1]),f[t]=void 0,f[t+1]=void 0;n😮}var p,m,v,g,w=void 0;function y(t,e){var n=this,r=new this.constructor(E);void 0===r[_]&&k(r);var i=n._state;if(i){var s=arguments[i-1];o(function(){return O(i,r,s,n._result)})}else I(n,r,t,e);return r}function b(t){if(t&&\"object\"==typeof t&&t.constructor===this)return t;var e=new this(E);return N(e,t),e}c?w=function(){return process.nextTick(h)}:u?(m😮,v=new u(h),g=document.createTextNode(\"\"),v.observe(g,{characterData:!0}),w=function(){g.data=m=++m%2})😛?((p=new MessageChannel).port1.onmessage=h,w=function(){return p.port2.postMessage(0)}):w=void 0===s?function(){try{var t=Function(\"return this\")().require(\"vertx\");return void 0!==(r=t.runOnLoop||t.runOnContext)?function(){r(h)}:l()}catch(t){return l()}}():l();var _=Math.random().toString(36).substring(2);function E(){}var x=void 0,A=1,T=2,S={error:null};function R(t){try{return t.then}catch(t){return S.error=t,S}}function C(e,n,r){n.constructor===e.constructor&&r===y&&n.constructor.resolve===b?function(t,e){e._state===A?j(t,e._result):e._state===T?L(t,e._result):I(e,void 0,function(e){return N(t,e)},function(e){return L(t,e)})}(e,n):r===S?(L(e,S.error),S.error=null):void 0===r?j(e,n):t(r)?function(t,e,n){o(function(t){var r=!1,i=function(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}(n,e,function(n){r||(r=!0,e!==n?N(t,n):j(t,n))},function(e){r||(r=!0,L(t,e))},t._label);!r&&i&&(r=!0,L(t,i))},t)}(e,n,r):j(e,n)}function N(t,e){var n,r;t===e?L(t,new TypeError(\"You cannot resolve a promise with itself\"))😦r=typeof(n=e),null===n||\"object\"!==r&&\"function\"!==r?j(t,e):C(t,e,R(e)))}function P(t){t._onerror&&t._onerror(t._result),D(t)}function j(t,e){t._state===x&&(t._result=e,t._state=A,0!==t._subscribers.length&&o(D,t))}function L(t,e){t._state===x&&(t._state=T,t._result=e,o(P,t))}function I(t,e,n,r){var i=t._subscribers,s=i.length;t._onerror=null,i[s]=e,i[s+A]=n,i[s+T]=r,0===s&&t._state&&o(D,t)}function D(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,i=void 0,o=t._result,s😮;s<e.length;s+👨)r=e[s],i=e[s+n],r?O(n,r,i,o):i(o);t._subscribers.length😮}}function O(e,n,r,i){var o=t(r),s=void 0,a=void 0,u=void 0,c=void 0;if(o){if((s=function(t,e){try{return t(e)}catch(t){return S.error=t,S}}(r,i))===S?(c=!0,a😒.error,s.error=null):u=!0,n===s)return void L(n,new TypeError(\"A promises callback cannot return that same promise.\"))}else s=i,u=!0;n._state!==x||(o&&u?N(n,s):c?L(n,a):e===A?j(n,s):e===T&&L(n,s))}var z😮;function k(t){t[_]😒++,t._state=void 0,t._result=void 0,t._subscribers😦]}var M=function(){function t(t,n){this._instanceConstructor=t,this.promise=new t(E),this.promise[_]||k(this.promise),e(n)?(this.length=n.length,this._remaining=n.length,this._result=new Array(this.length),0===this.length?j(this.promise,this._result)😦this.length=this.length||0,this._enumerate(n),0===this._remaining&&j(this.promise,this._result))):L(this.promise,new Error(\"Array Methods must be provided an Array\"))}return t.prototype._enumerate=function(t){for(var e😮;this._state===x&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===b){var i=R(t);if(i===y&&t._state!==😆this._settledAt(t._state,e,t._result);else if(\"function\"!=typeof i)this._remaining--,this._result[e]=t;else if(n===U){var o=new n(E);C(o,t,i),this._willSettleAt(o,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},t.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===x&&(this._remaining--,t===T?L(r,n):this._result[e]=n),0===this._remaining&&j(r,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;I(t,void 0,function(t){return n._settledAt(A,e,t)},function(t){return n._settledAt(T,e,t)})},t}(),U=function(){function e(t){this[_]😒++,this._result=this._state=void 0,this._subscribers😦],E!==t&&(\"function\"!=typeof t&&function(){throw new TypeError(\"You must pass a resolver function as the first argument to the promise constructor\")}(),this instanceof e?function(t,e){try{e(function(e){N(t,e)},function(e){L(t,e)})}catch(e){L(t,e)}}(this,t):function(){throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\")}())}return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.finally=function(e){var n=this.constructor;return t(e)?this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})}):this.then(e,e)},e}();return U.prototype.then=y,U.all=function(t){return new M(this,t).promise},U.race=function(t){var n=this;return e(t)?new n(function(e,r){for(var i=t.length,o😮;o<i;o++)n.resolve(t[o]).then(e,r)}):new n(function(t,e){return e(new TypeError(\"You must pass an array to race.\"))})},U.resolve=b,U.reject=function(t){var e=new this(E);return L(e,t),e},U._setScheduler=function(t){i=t},U._setAsap=function(t){o=t},U._asap😮,U.polyfill=function(){var t=void 0;if(\"undefined\"!=typeof global)t=global;else if(\"undefined\"!=typeof self)t=self;else try{t=Function(\"return this\")()}catch(t){throw new Error(\"polyfill failed because global object is unavailable in this environment\")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if(\"[object Promise]\"===n&&!e.cast)return}t.Promise=U},U.Promise=U,U},t.exports=r()},function(t,e,n){var r=n(47);t.exports=new r(\"twttr\")},function(t,e,n){var r=n(1),i=n(0);function o(t){return i.isType(\"string\",t)?t.split(\".\"):i.isType(\"array\",t)?t😦]}function s(t,e){(e=e||r)[t]=e[t]||{},Object.defineProperty(this,\"base\",{value:e[t]}),Object.defineProperty(this,\"name\",{value:t})}i.aug(s.prototype,{get:function(t){return o(t).reduce(function(t,e){if(i.isObject(t))return t[e]},this.base)},set:function(t,e,n){var r😮(t),s=function(t,e){var n😮(e).slice(0,-1);return n.reduce(function(t,e,r){if(t[e]=t[e]||{},!i.isObject(t[e]))throw new Error(n.slice(0,r+1).join(\".\")+\" is already defined with a value.\");return t[e]},t)}(this.base,t),a=r.slice(-1);return n&&a in s?s[a]😒[a]=e},init:function(t,e){return this.set(t,e,!0)},unset:function(t){var e😮(t),n=this.get(e.slice(0,-1));n&&delete n[e.slice(-1)]},aug:function(t){var e=this.get(t),n=i.toRealArray(arguments).slice(1);if(e=void 0!==e?e:{},n.unshift(e),!n.every(i.isObject))throw new Error(\"Cannot augment non-object.\");return this.set(t,i.aug.apply(null,n))},call:function(t){var e=this.get(t),n=i.toRealArray(arguments).slice(1);if(!i.isType(\"function\",e))throw new Error(\"Function \"+t+\"does not exist.\");return e.apply(null,n)},fullPath:function(t){var e😮(t);return e.unshift(this.name),e.join(\".\")}}),t.exports😒},function(t,e,n){var r=n(0),i=n(7),o={bind:function(t,e){return this._handlers=this._handlers||{},this._handlers[t]=this._handlers[t]||[],this._handlers[t].push(e)},unbind:function(t,e){var n;this._handlers&&this._handlers[t]&&(e?(n=this._handlers[t].indexOf(e))>😮&&this._handlers[t].splice(n,1):this._handlers[t👿])},trigger:function(t,e){var n=this._handlers&&this._handlers[t];(e=e||{}).type=t,n&&n.forEach(function(t){r.async(i(t,this,e))})}};t.exports={Emitter😮,makeEmitter:function(){return r.aug(function(){},o)}}},function(t,e,n){var r=n(98),i=n(74),o=n(6),s=n(21),a=n(7),u=n(0),c=new i(function(t){var e=function(t){return t.reduce(function(t,e){return t[e.className]=t[e.className]||[],t[e.className].push(e),t},{})}(t.map(r.fromRawTask));u.forIn(e,function(t,e){s.allSettled(e.map(function(t){return t.initialize()})).then(function(){e.forEach(function(t){o.all([t.hydrate(),t.insertIntoDom()]).then(a(t.render,t)).then(a(t.success,t),a(t.fail,t))})})})});t.exports={addWidget:function(t){return c.add(t)}}},function(t,e,n){var r=n(17);t.exports=function(t){return r.write(function(){t&&t.parentNode&&t.parentNode.removeChild(t)})}},function(t,e,n){n(12),t.exports={log:function(t,e){}}},function(t,e,n){var r=n(1);function i(t){return(t=t||r).getSelection&&t.getSelection()}t.exports={getSelection:i,getSelectedText:function(t){var e=i(t);return e?e.toString():\"\"}}},function(t,e,n){var r=n(5),i=n(1),o=n(2),s=2e4;t.exports=function(t){var e=new o,n=r.createElement(\"img\");return n.onload=n.onerror=function(){i.setTimeout(e.resolve,50)},n.src=t,i.setTimeout(e.reject,s),e.promise}},function(t,e,n){var r=n(108);t.exports=function(t){t.define(\"createElement\",r),t.define(\"createFragment\",r),t.define(\"htmlToElement\",r),t.define(\"hasSelectedText\",r),t.define(\"addRootClass\",r),t.define(\"removeRootClass\",r),t.define(\"hasRootClass\",r),t.define(\"prependStyleSheet\",r),t.define(\"appendStyleSheet\",r),t.define(\"prependCss\",r),t.define(\"appendCss\",r),t.define(\"makeVisible\",r),t.define(\"injectWidgetEl\",r),t.define(\"matchHeightToContent\",r),t.define(\"matchWidthToContent\",r)}},function(t,e){t.exports=function(t){var e,n=!1;return function(){return n?e😦n=!0,e=t.apply(this,arguments))}}},function(t,e,n){var r=n(15),i=n(117),o=n(57);t.exports=function(t,e,n){return new r(i,o,\"twitter-dm-button\",t,e,n)}},function(t,e,n){var r=n(58),i=n(24);t.exports=r.isSupported()?r:i},function(t,e,n){var r=n(25),i=n(118);t.exports=r.build([i])},function(t,e,n){var r=n(15),i=n(121),o=n(60);t.exports=function(t,e,n){return new r(i,o,\"twitter-follow-button\",t,e,n)}},function(t,e,n){var r=n(25),i=n(122);t.exports=r.build([i])},function(t,e,n){var r=n(15),i=n(129),o=n(24);t.exports=function(t,e,n){return new r(i,o,\"twitter-moment\",t,e,n)}},function(t,e,n){var r=n(15),i=n(131),o=n(24);t.exports=function(t,e,n){return new r(i,o,\"periscope-on-air\",t,e,n)}},function(t,e,n){var r=n(80),i=n(133),o=n(137),s=n(139),a=n(141),u=n(143),c={collection:i,event😮,likes😒,list:a,profile:u,url:l},d😦u,s,i,a,o];function l(t){return r(d,function(e){try{return new e(t)}catch(t){}})}t.exports=function(t){return t?function(t){var e,n;return e😦t.sourceType+\"\").toLowerCase(),(n=c[e])?new n(t):null}(t)||l(t):null}},function(t,e,n){var r=n(15),i=n(145),o=n(24);t.exports=function(t,e,n){return new r(i,o,\"twitter-timeline\",t,e,n)}},function(t,e,n){var r=n(15),i=n(147),o=n(57);t.exports=function(t,e,n){return new r(i,o,\"twitter-tweet\",t,e,n)}},function(t,e,n){var r=n(15),i=n(149),o=n(60);t.exports=function(t,e,n){var s=t&&t.type||\"share\";return new r(i,o,\"hashtag\"==s?\"twitter-hashtag-button\":\"mention\"==s?\"twitter-mention-button\":\"twitter-share-button\",t,e,n)}},function(t,e,n){var r=n(36),i=n(35),o=n(0);t.exports=function(t){var e={widget_origin:i.rootDocumentLocation(),widget_frame:i.isFramed()?i.currentDocumentLocation():null,duration_ms:t.duration,item_ids:t.widgetIds||[]},n😮.aug(t.namespace,{page:\"page\",component:\"performance\"});r.scribe(n,e)}},function(t,e,n){var r=n(0),i=n(134),o😦\"ar\",\"fa\",\"he\",\"ur\"];t.exports={isRtlLang:function(t){return t=String(t).toLowerCase(),r.contains(o,t)},matchLanguage:function(t){return t😦t😦t||\"\").toLowerCase()).replace(\"_\",\"-\"),i(t)?t😦t=t.replace(/-.*/,\"\"),i(t)?t:\"en\")}}},function(t,e,n){var r=n(110),i=n(113);function o(t){return r.settingsLoaded().then(function(e){return e[t]})}function s(){return o(\"experiments\")}t.exports={shouldObtainCookieConsent:function(){return o(\"shouldObtainCookieConsent\")},getExperiments😒,getExperiment:function(t){return s().then(function(e){if(!e[t])throw new Error(\"Experiment not found\");return e[t]})},getActiveExperimentDataString:function(){return s().then(function(t){var e=Object.keys(t).reduce(function(e,n){var r;return t[n].version&&(r=n.split(\"_\").slice(-1)[0],e.push(r+\";\"+t[n].bucket)),e},[]);return i(e.join(\",\"))})},getExperimentKeys:function(){return s().then(function(t){return Object.keys(t)})},load:function(){r.load()}}},function(t){t.exports={tweetButtonHtmlPath:\"/widgets/tweet_button.d753e00c3e838c1b2558149bd3f6ecb8.{{lang}}.html\",followButtonHtmlPath:\"/widgets/follow_button.d753e00c3e838c1b2558149bd3f6ecb8.{{lang}}.html\",hubHtmlPath:\"/widgets/hub.html\",widgetIframeHtmlPath:\"/widgets/widget_iframe.d753e00c3e838c1b2558149bd3f6ecb8.html\",resourceBaseUrl:\"https://platform.twitter.com\"}},function(t,e,n){var r=n(3),i=n(95),o=n(23),s=n(11),a={favorite😦\"favorite\",\"like\"],follow😦\"follow\"],like😦\"favorite\",\"like\"],retweet😦\"retweet\"],tweet😦\"tweet\"]};function u(t){this.srcEl😦],this.element=t}u.open=function(t,e,n){var u😦r.intentType(t)||\"\").toLowerCase();r.isTwitterURL(t)&&(function(t,e){i.open(t,{},e)}(t,n),e&&o.trigger(\"click\",{target:e,region:\"intent\",type:\"click\",data:{}}),e&&a[u]&&a[u].forEach(function(n){o.trigger(n,{target:e,region:\"intent\",type:n,data:function(t,e){var n😒.decodeURL(e);switch(t){case\"favorite\":case\"like\":return{tweet_id:n.tweet_id};case\"follow\":return{screen_name:n.screen_name,user_id:n.user_id};case\"retweet\":return{source_tweet_id:n.tweet_id};default:return{}}}(u,t)})}))},t.exports=u},function(t,e){t.exports={getTimezoneOffset:function(){var t😦new Date).toString().match(/(GMT[+-]?\\d+)/);return t&&t[0]||\"GMT\"}}},function(t,e,n){var r=n(5),i=n(9),o=n(2),s=n(0),a=n(11),u=\"cb\",c😮;t.exports={fetch:function(t,e,n,d){var l,f,h;return d=function(t){if(t)return t.replace(/[^\\w$]/g,\"_\")}(d||u+c++),l=i.fullPath([\"callbacks\",d]),f=r.createElement(\"script\"),h=new o,e😒.aug({},e,{callback:l,suppress_response_codes:!0}),i.set([\"callbacks\",d],function(t){var e;t😦e=n(t||!1)).resp,e.success?h.resolve(t):h.reject(t),f.onload=f.onreadystatechange=null,f.parentNode&&f.parentNode.removeChild(f),i.unset([\"callbacks\",d])}),f.onerror=function(){h.reject(new Error(\"failed to fetch \"+f.src))},f.src=a.url(t,e),f.async=\"async\",r.body.appendChild(f),h.promise}}},function(t,e,n){var r=n(2),i=n(100),o=n(7);function s(t){this._inputsQueue😦],this._task=t,this._hasFlushBeenScheduled=!1}s.prototype.add=function(t){var e=new r;return this._inputsQueue.push({input:t,taskDoneDeferred:e}),this._hasFlushBeenScheduled||(this._hasFlushBeenScheduled=!0,i(o(this._flush,this))),e.promise},s.prototype._flush=function(){try{this._task.call(null,this._inputsQueue)}catch(t){this._inputsQueue.forEach(function(e){e.taskDoneDeferred.reject(t)})}this._inputsQueue😦],this._hasFlushBeenScheduled=!1},t.exports😒},function(t,e){t.exports=function(t,e){return t.reduce(function(t,n){var r=e(n);return t[r]=t[r]||[],t[r].push(n),t},{})}},function(t,e,n){var r=n(5),i=n(😎,o=n(3);function s(t,e){var n,r;return e=e||i,/^https?😕/\\//.test(t)?t😕^\\/\\//.test(t)?e.protocol+t😦n=e.host+(e.port.length?\":\"+e.port:\"\"),0!==t.indexOf(\"/\")&&((r=e.pathname.split(\"/\")).pop(),r.push(t),t=\"/\"+r.join(\"/\")),[e.protocol,\"//\",n,t].join(\"\"))}t.exports={absolutize😒,getCanonicalURL:function(){for(var t,e=r.getElementsByTagName(\"link\"),n😮;e[n];n++)if(\"canonical\"==(t=e[n]).rel)return s(t.href)},getScreenNameFromPage:function(){for(var t,e,n,i😦r.getElementsByTagName(\"a\"),r.getElementsByTagName(\"link\")],s😮,a😮,u😕\\bme\\b/;t=i[s];s++)for(a😮;e=t[a];a++)if(u.test(e.rel)&&(n😮.screenName(e.href)))return n}}},function(t,e,n){var r=n(😎,i😕^[^#?]*\\.(gov|mil)(😕d+)?([#?].*)?$/i,o={};function s(t){return t in o?o[t]😮[t]=i.test(t)}t.exports={isUrlSensitive😒,isHostPageSensitive:function(){return s(r.host)}}},function(t,e,n){var r=n(19),i=n(51),o=n(11),s=n(33),a=n(0),u=n(9).get(\"scribeCallback\"),c=2083,d😦],l😮.url(s.CLIENT_EVENT_ENDPOINT,{dnt😮,l:\"\"}),f=encodeURIComponent(l).length;function h(t,e,n,r){var i=!a.isObject(t),o=!!e&&!a.isObject(e);i||o||(u&&u(arguments),p(s.formatClientEventNamespace(t),s.formatClientEventData(e,n,r),s.CLIENT_EVENT_ENDPOINT))}function p(t,e,n){var r,u;n&&a.isObject(t)&&a.isObject(e)&&(i.log(t,e),r😒.flattenClientEventPayload(t,e),u={l😒.stringify(r)},s.noticeSeen(t)&&(u.notice_seen=!0),r.dnt&&(u.dnt=1),w(o.url(n,u)))}function m(t,e,n,r){var i=!a.isObject(t),o=!!e&&!a.isObject(e);if(!i&&!o)return v(s.flattenClientEventPayload(s.formatClientEventNamespace(t),s.formatClientEventData(e,n,r)))}function v(t){return d.push(t),d}function g(t){return encodeURIComponent(t).length+3}function w(t){return(new Image).src=t}t.exports={canFlushOneItem:function(t){var e=g(s.stringify(t));return f+e<c},_enqueueRawObject:v,scribe😛,clientEvent:h,clientEvent2:function(t,e,n){return h(t,e,n,2)},enqueueClientEvent:m,flushClientEvents:function(){var t;return d.length>1&&m({page:\"widgets_js\",component:\"scribe_pixel\",action:\"batch_log\"},{}),t😛,d😦],t.reduce(function(e,n,r){var i=e.length,o=i&&e[i-1];return r+1==t.length&&n.event_namespace&&\"batch_log\"==n.event_namespace.action&&(n.message😦\"entries:\"+r,\"requests:\"+i].join(\"/\")),function t(e){return Array.isArray(e)||(e😦e]),e.reduce(function(e,n){var r,i😒.stringify(n),o=g(i);return f+o<c?e=e.concat(i)😦r😒.splitLogEntry(n)).length>1&&(e=e.concat(t(r))),e},[])}(n).forEach(function(t){var n=g(t);(!o||o.urlLength+n>c)&&(o={urlLength:f,items😦]},e.push(o)),o.urlLength+=n,o.items.push(t)}),e},[]).map(function(t){var e={l:t.items};return r.enabled()&&(e.dnt=1),w(o.url(s.CLIENT_EVENT_ENDPOINT,e))})},interaction:function(t,e,n,r){var i😒.extractTermsFromDOM(t.target||t.srcElement);i.action=r||\"click\",h(i,e,n)}}},function(t,e,n){var r=n(0),i=n(40);t.exports=function(t,e){return i(t,e)?[t]:r.toRealArray(t.querySelectorAll(e))}},function(t,e){t.exports=function(t,e,n){for(var r,i😮;i<t.length;i++)if(r=e.call(n,t[i],i,t))return r}},function(t,e){t.exports=function(){return Math.floor(+new Date/9e5)}},function(t,e,n){var r=n(12);t.exports=function(t){var e,n;return e=t.headers&&t.headers.status,!(n=t&&!t.error&&200===e)&&t.headers&&t.headers.message&&r.publicError(t.headers.message),{success:n,resp:t}}},function(t,e,n){var r,i=n(28),o😮;function s(){r&&r.length===o&&(i.emitter.trigger(i.ALL_WIDGETS_AND_IMAGES_LOADED,r),r=null)}i.emitter.bind(i.ALL_WIDGETS_RENDER_END,function(t){r=t.widgets,s()}),t.exports={reportImagesLoadForAWidget:function(){o++,s()}}},,,,,,,,function(t,e,n){var r,i=n(2),o=n(5),s=n(93),a=n(46),u=n(9),c=n(94),d=n(23),l=n(97),f=n(150),h=n(158),p=n(159),m=n(28);n(160),m.emitter.trigger(m.START),u.set(\"widgets.init\",!0),a.set(\"init\",!0),p(),r=new i,s.exposeReadyPromise(r.promise,a.base,\"_e\"),a.set(\"widgets\",f),a.set(\"widgets.load\",l.load),a.set(\"events\",d),h(function(){r.resolve(a.base),c.attachTo(o),l.loadPage()})},function(t,e){t.exports=navigator},function(t,e,n){var r=n(7);t.exports={exposeReadyPromise:function(t,e,n){e.ready=r(t.then,t),n&&Array.isArray(e[n])&&(e[n].forEach(r(t.then,t)),delete e[n])}}},function(t,e,n){var r=n(😎,i=n(34),o=n(31),s=n(71),a=n(3);function u(t){var e,n,u;t.altKey||t.metaKey||t.shiftKey||(e😮.closest(function(t){return\"A\"===t.tagName||\"AREA\"===t.tagName},t.target))&&a.isIntentURL(e.href)&&(n😦n😦n😦u=e.href,\"original_referer=\"+r.href].join(-1==u.indexOf(\"?\")?\"?\":\"&\")).replace(/^http[😃/,\"https:\")).replace(/^\\/\\//,\"https://\"),s.open(n,e),i.preventDefault(t))}t.exports={attachTo:function(t){t.addEventListener(\"click\",u,!1)}}},function(t,e,n){var r,i=n(1),o=n(96),s=n(34),a=n(31),u=n(20),c=n(3),d=n(22),l=n(0),f=\"intent_\",h=i.screen.width,p=i.screen.height;function m(t,e){function n(t){return Math.round(t/2)}return t>e?{coordinate😮,size:e}:{coordinate:n(e)-n(t),size:t}}function v(t,e,n){var i,o;e=r.parse(e),n=n||{},i=m(e.width,n.width||h),e.left=i.coordinate,e.width=i.size,o=m(e.height,n.height||p),e.top😮.coordinate,e.height😮.size,this.win=t,this.features=function(t){var e😦];return l.forIn(t,function(t,n){e.push(t+\"=\"+n)}),e.join(\",\")}(e)}r😦new o).defaults({width:550,height:520,personalbar:\"0\",toolbar:\"0\",location:\"1\",scrollbars:\"1\",resizable:\"1\"}),v.prototype.open=function(t,e){var n=e&&\"click\"==e.type&&a.closest(\"a\",e.target),r=e&&(e.altKey||e.metaKey||e.shiftKey),i=n&&(u.ios()||u.android());if(c.isTwitterURL(t))return r||i?this😦this.name=f+d.generate(),this.popup=this.win.open(t,this.name,this.features),e&&s.preventDefault(e),this)},v.open=function(t,e,n){return new v(i,e).open(t,n)},t.exports=v},function(t,e,n){var r=n(4),i=n(0);function o(){this.assertions😦],this._defaults={}}o.prototype.assert=function(t,e){return this.assertions.push({fn:t,msg:e||\"assertion failed\"}),this},o.prototype.defaults=function(t){return this._defaults=t||this._defaults,this},o.prototype.require=function(t){var e=this;return(t=Array.isArray(t)?t:i.toRealArray(arguments)).forEach(function(t){e.assert(function(t){return function(e){return r.hasValue(e[t])}}(t),\"required: \"+t)}),this},o.prototype.parse=function(t){var e,n;if(e=i.aug({},this._defaults,t||{}),(n=this.assertions.reduce(function(t,n){return n.fn(e)||t.push(n.msg),t},[])).length>0)throw new Error(n.join(\"\\n\"));return e},t.exports😮},function(t,e,n){var r=n(5),i=n(6),o=n(21),s=n(49),a=n(32),u=n(9),c=n(36),d=n(23),l=n(4),f=n(0),h=n(69),p=n(114),m=n(28);function v(){var t=a.val(\"widgets:autoload\")||!0;return!l.isFalseValue(t)&&(l.isTruthValue(t)?r.body:r.querySelectorAll(t))}function g(t){var e,n;return t😦t=t||r.body).length?f.toRealArray(t)😦t],c.pause(),n=t.reduce(function(t,e){return t.concat(p.reduce(function(t,n){return t.concat(n(e))},[]))},[]),m.emitter.trigger(m.ALL_WIDGETS_RENDER_START,{widgets:n}),e😮.allResolved(n.map(function(t){return s.addWidget(t)})).then(function(t){d.trigger(\"loaded\",{widgets:t}),t&&t.length&&m.emitter.trigger(m.ALL_WIDGETS_RENDER_END,{widgets:t})}),o.always(e,function(){c.resume()}),e}t.exports={load:g,loadPage:function(){var t=v();return h.load(),!1===t?i.resolve()😦u.set(\"widgets.loaded\",!0),g(t))},_getPageLoadTarget:v}},function(t,e,n){var r=n(10),i=n(17),o=n(23),s=n(50),a=n(6),u=n(21);function c(t,e){this._widget=null,this._sandbox=null,this._hydrated=!1,this._insertedIntoDom=!1,this._Sandbox=t.Sandbox,this._factory=t.factory,this._widgetParams=t.parameters,this._resolve=e,this._className=t.className,this._renderedClassName=t.className+\"-rendered\",this._errorClassName=t.className+\"-error\",this._srcEl=t.srcEl,this._targetGlobal=function(t){return(t.srcEl||t.targetEl).ownerDocument.defaultView}(t),this._insertionStrategy=function(e){var n=t.srcEl,r=t.targetEl;n?r.insertBefore(e,n):r.appendChild(e)}}c.fromRawTask=function(t){return new c(t.input,t.taskDoneDeferred.resolve)},c.prototype.initialize=function(){var t=this,e=new this._Sandbox(this._targetGlobal);return this._factory(this._widgetParams,e).then(function(n){return t._widget=n,t._sandbox=e,n})},c.prototype.insertIntoDom=function(){var t=this;return this._widget?this._sandbox.insert(this._widget.id,{class😦this._className,this._renderedClassName].join(\" \")},null,this._insertionStrategy).then(function(){t._insertedIntoDom=!0}):a.reject(new Error(\"cannot insert widget into DOM before it is initialized\"))},c.prototype.hydrate=function(){var t=this;return this._widget?this._widget.hydrate().then(function(){t._hydrated=!0}):a.reject(new Error(\"cannot hydrate widget before it is initialized\"))},c.prototype.render=function(){var t=this;function e(e){return s(t._sandbox.sandboxEl).then(function(){return a.reject(e)})}return this._hydrated?this._insertedIntoDom?t._widget.render(t._sandbox).then(function(){return t._sandbox.onResize(function(){return t._widget.resize().then(function(){o.trigger(\"resize\",{target:t._sandbox.sandboxEl})})}),t._widget.show()}).then(function(){return s(t._srcEl).then(function(){return t._sandbox.sandboxEl})},e):e(new Error(\"cannot render widget before DOM insertion\")):e(new Error(\"cannot render widget before hydration\"))},c.prototype.fail=function(){var t=this;return this._srcEl?u.always(i.write(function(){r.add(t._srcEl,t._errorClassName)}),function(){o.trigger(\"rendered\",{target:t._srcEl}),t._resolve(t._srcEl)})😦t._resolve(),a.resolve())},c.prototype.success=function(){o.trigger(\"rendered\",{target:this._sandbox.sandboxEl}),this._resolve(this._sandbox.sandboxEl)},t.exports=c},function(t,e,n){var r;!function(){\"use strict\";var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)};function o(){this.frames😦],this.lastId😮,this.raf=i,this.batch={hash:{},read😦],write😦],mode:null}}o.prototype.read=function(t,e){var n=this.add(\"read\",t,e),r=n.id;return this.batch.read.push(n.id),\"reading\"===this.batch.mode||this.batch.scheduled?r😦this.scheduleBatch(),r)},o.prototype.write=function(t,e){var n=this.add(\"write\",t,e),r=this.batch.mode,i=n.id;return this.batch.write.push(n.id),\"writing\"===r||\"reading\"===r||this.batch.scheduled?i😦this.scheduleBatch(),i)},o.prototype.defer=function(t,e,n){\"function\"==typeof t&&(n=e,e=t,t=1);var r=this,i=t-1;return this.schedule(i,function(){r.run({fn:e,ctx:n})})},o.prototype.clear=function(t){if(\"function\"==typeof t)return this.clearFrame(t);t=Number(t);var e=this.batch.hash[t];if(e){var n=this.batch[e.type],r=n.indexOf(t);delete this.batch.hash[t],~r&&n.splice(r,1)}},o.prototype.clearFrame=function(t){var e=this.frames.indexOf(t);~e&&this.frames.splice(e,1)},o.prototype.scheduleBatch=function(){var t=this;this.schedule(0,function(){t.batch.scheduled=!1,t.runBatch()}),this.batch.scheduled=!0},o.prototype.uniqueId=function(){return++this.lastId},o.prototype.flush=function(t){for(var e;e=t.shift()😉this.run(this.batch.hash[e])},o.prototype.runBatch=function(){try{this.batch.mode=\"reading\",this.flush(this.batch.read),this.batch.mode=\"writing\",this.flush(this.batch.write),this.batch.mode=null}catch(t){throw this.runBatch(),t}},o.prototype.add=function(t,e,n){var r=this.uniqueId();return this.batch.hash[r]={id:r,fn:e,ctx:n,type:t}},o.prototype.run=function(t){var e=t.ctx||this,n=t.fn;if(delete this.batch.hash[t.id],!this.onError)return n.call(e);try{n.call(e)}catch(t){this.onError(t)}},o.prototype.loop=function(){var t,e=this,n=this.raf,r=!1;function i(){var t=e.frames.shift();e.frames.length?n(i):e.looping=!1,t&&t()}this.looping||(t=setTimeout(function(){r=!0,i()},500),n(function(){r||(clearTimeout(t),i())}),this.looping=!0)},o.prototype.schedule=function(t,e){return this.frames[t]?this.schedule(t+1,e)😦this.loop(),this.frames[t]=e)};var s=new o;void 0!==t&&t.exports?t.exports😒:void 0===(r=function(){return s}.call(e,n,e,t))||(t.exports=r)}()},function(t,e,n){var r=n(45).Promise;t.exports=r._asap},function(t,e,n){var r,i,o,s=n(5),a=n(1),u=n(29),c=n(19),d=n(2),l=n(6),f=n(51),h=n(33),p=n(0),m=n(24),v=n(9).get(\"scribeCallback\"),g=Math.floor(1e3*Math.random())+\"_\",w=\"rufous-frame-\"+g+\"-\",y=\"rufous-form-\"+g+\"-\",b😮,_=!1,E=new d;function x(){var t😮.createElement(\"form\"),e😮.createElement(\"input\"),n😮.createElement(\"input\");return b++,t.action=h.CLIENT_EVENT_ENDPOINT,t.method=\"POST\",t.target=w+b,t.id=y+b,e.type=\"hidden\",e.name=\"dnt\",e.value=c.enabled(),n.type=\"hidden\",n.name=\"tfw_redirect\",n.value=h.RUFOUS_REDIRECT,t.appendChild(e),t.appendChild(n),t}function A(){var t=w+b;return u({id:t,name:t,width😮,height😮,border😮},{display:\"none\"},o.doc)}t.exports={clientEvent:function(t,e,n,i){(function(t,e){var n=!p.isObject(t),r=!!e&&!p.isObject(e),i=n||r;return i})(t,e)||(v&&v(arguments),E.promise.then(function(){!function(t,e){var n,i,s😜.isObject(t)&&p.isObject(e)&&(f.log(t,e),s=h.flattenClientEventPayload(t,e),(n=r.firstChild).value=+(+n.value||s.dnt||0),(i😮.createElement(\"input\")).type=\"hidden\",i.name=\"l\",i.value=h.stringify(s),r.appendChild(i))}(h.formatClientEventNamespace(t),h.formatClientEventData(e,n,i))}))},flush:function(){return E.promise.then(function(){var t;return r.children.length<=2?l.reject()😦t=l.all([o.doc.body.appendChild(r),o.doc.body.appendChild(i)]).then(function(t){var e=t[0],n=t[1];return n.addEventListener(\"load\",function(){!function(t,e){return function(){var n=t.parentNode;n&&(n.removeChild(t),n.removeChild(e))}}(e,n)()}),e.submit(),t}),r=x(),i=A(),t)})},init:function(){return _?E.promise:((o=new m(a)).insert(\"rufous-sandbox\",null,{display:\"none\"},function(t){s.body.appendChild(t)}).then(function(){o.setTitle(\"Twitter analytics iframe\"),r=x(),i=A(),E.resolve([r,i])}),_=!0,E.promise)}}},function(t,e,n){var r=n(0);t.exports=function t(e){var n😦];return e.forEach(function(e){var i=r.isType(\"array\",e)?t(e)😦e];n=n.concat(i)}),n}},function(t,e){t.exports=function(t){return t.filter(function(e,n){return t.indexOf(e)===n})}},function(t,e,n){var r=n(38),i=n(0),o=n(106);function s(){r.apply(this,arguments)}s.prototype=Object.create(r.prototype),i.aug(s.prototype,{factory😮}),t.exports😒},function(t,e,n){var r=n(21),i=n(0),o=n(7);t.exports={before:function(t,e){return function(){var n,i=this,o=arguments;return n=e.apply(this,arguments),r.isPromise(n)?n.then(function(){return t.apply(i,o)}):t.apply(this,arguments)}},after:function(t,e){return function(){var n,i=this,o=arguments;function s(t,e){return r.isPromise(e)?e.then(function(){return t}):t}return n=t.apply(this,arguments),r.isPromise(n)?n.then(function(t){return s(t,e.apply(i,o))})😒(n,e.apply(this,arguments))}},around:function(t,e){return function(){var n=i.toRealArray(arguments);return n.unshift(o(t,this)),e.apply(this,n)}}}},function(t,e,n){var r=n(10),i=n(17),o=n(39),s=n(6),a=n(0);t.exports=function(){var t😮();function e(e){t.apply(this,arguments),Object.defineProperty(this,\"targetGlobal\",{value:e})}return e.prototype=Object.create(t.prototype),a.aug(e.prototype,{id:null,initialized:!1,width😮,height😮,sandboxEl:null,insert:function(){return s.reject()},onResize:function(){},addClass:function(t){var e=this.sandboxEl;return t=Array.isArray(t)?t😦t],i.write(function(){t.forEach(function(t){r.add(e,t)})})},removeClass:function(t){var e=this.sandboxEl;return t=Array.isArray(t)?t😦t],i.write(function(){t.forEach(function(t){r.remove(e,t)})})},styleSelf:function(t){var e=this;return i.write(function(){a.forIn(t,function(t,n){e.sandboxEl.style[t]=n})})}}),e}},function(t,e,n){var r=n(5),i=n(10),o=n(17),s=n(52),a=n(25),u=n(53),c=n(42),d=n(43),l=n(29),f=n(12),h=n(44),p=n(2),m=n(6),v=n(0),g=n(9),w=n(22),y=n(7),b={allowfullscreen:\"true\"},_={position:\"absolute\",visibility:\"hidden\",display:\"block\",width:\"0px\",height:\"0px\",padding:\"0\",border:\"none\"},E={position:\"static\",visibility:\"visible\"},x=\"SandboxRoot\",A=\".SandboxRoot { display: none; }\",T=50;function S(t,e,n,r){return e=v.aug({id:t},b,e),n=v.aug({},_,n),l(e,n,r)}function R(t,e,n,i,s){var a=new p,u=w.generate(),c😒(t,e,n,s);return g.set([\"sandbox\",u],function(){var t=c.contentWindow.document;o.write(function(){t.write(\"<!DOCTYPE html><html><head></head><body></body></html>\")}).then(function(){t.close(),a.resolve(c)})}),c.src😦\"javascript:\",'document.write(\"\");',\"try { window.parent.document; }\",'catch (e) { document.domain=\"'+r.domain+'\"; }',\"window.parent.\"+g.fullPath([\"sandbox\",u])+\"();\"].join(\"\"),c.addEventListener(\"error\",a.reject,!1),o.write(function(){i.parentNode.replaceChild(c,i)}),a.promise}t.exports=a.couple(n(54),function(t){t.overrideProperty(\"id\",{get:function(){return this.sandboxEl&&this.sandboxEl.id}}),t.overrideProperty(\"initialized\",{get:function(){return!!this.win}}),t.overrideProperty(\"width\",{get:function(){return this._width}}),t.overrideProperty(\"height\",{get:function(){return this._height}}),t.overrideProperty(\"sandboxEl\",{get:function(){return this.iframeEl}}),t.defineProperty(\"iframeEl\",{get:function(){return this._iframe}}),t.defineProperty(\"rootEl\",{get:function(){return this.doc&&this.doc.documentElement}}),t.defineProperty(\"widgetEl\",{get:function(){return this.doc&&this.doc.body.firstElementChild}}),t.defineProperty(\"win\",{get:function(){return this.iframeEl&&this.iframeEl.contentWindow}}),t.defineProperty(\"doc\",{get:function(){return this.win&&this.win.document}}),t.define(\"_updateCachedDimensions\",function(){var t=this;return o.read(function(){var e,n=h(t.sandboxEl);\"visible\"==t.sandboxEl.style.visibility?t._width=n.width😦e=h(t.sandboxEl.parentElement).width,t._width=Math.min(n.width,e)),t._height=n.height})}),t.define(\"_setTargetToBlank\",function(){var t=this.createElement(\"base\");t.target=\"_blank\",this.doc.head.appendChild(t)}),t.define(\"_didResize\",function(){var t=this,e=this._resizeHandlers.slice(0);return this._updateCachedDimensions().then(function(){e.forEach(function(e){e(t)})})}),t.define(\"setTitle\",function(t){this.iframeEl.title=t}),t.override(\"createElement\",function(t){return this.doc.createElement(t)}),t.override(\"createFragment\",function(){return this.doc.createDocumentFragment()}),t.override(\"htmlToElement\",function(t){var e;return(e=this.createElement(\"div\")).innerHTML=t,e.firstElementChild}),t.override(\"hasSelectedText\",function(){return!!s.getSelectedText(this.win)}),t.override(\"addRootClass\",function(t){var e=this.rootEl;return t=Array.isArray(t)?t😦t],this.initialized?o.write(function(){t.forEach(function(t){i.add(e,t)})}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"removeRootClass\",function(t){var e=this.rootEl;return t=Array.isArray(t)?t😦t],this.initialized?o.write(function(){t.forEach(function(t){i.remove(e,t)})}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"hasRootClass\",function(t){return i.present(this.rootEl,t)}),t.define(\"addStyleSheet\",function(t,e){var n,r=new p;return this.initialized?((n=this.createElement(\"link\")).type=\"text/css\",n.rel=\"stylesheet\",n.href=t,n.addEventListener(\"load\",r.resolve,!1),n.addEventListener(\"error\",r.reject,!1),o.write(y(e,null,n)).then(function(){return u(t).then(r.resolve,r.reject),r.promise})):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"prependStyleSheet\",function(t){var e=this.doc;return this.addStyleSheet(t,function(t){var n=e.head.firstElementChild;return n?e.head.insertBefore(t,n):e.head.appendChild(t)})}),t.override(\"appendStyleSheet\",function(t){var e=this.doc;return this.addStyleSheet(t,function(t){return e.head.appendChild(t)})}),t.define(\"addCss\",function(t,e){var n;return c.inlineStyle()?((n=this.createElement(\"style\")).type=\"text/css\",n.appendChild(this.doc.createTextNode(t)),o.write(y(e,null,n)))😦f.devError(\"CSP enabled; cannot embed inline styles\"),m.resolve())}),t.override(\"prependCss\",function(t){var e=this.doc;return this.addCss(t,function(t){var n=e.head.firstElementChild;return n?e.head.insertBefore(t,n):e.head.appendChild(t)})}),t.override(\"appendCss\",function(t){var e=this.doc;return this.addCss(t,function(t){return e.head.appendChild(t)})}),t.override(\"makeVisible\",function(){var t=this;return this.styleSelf(E).then(function(){t._updateCachedDimensions()})}),t.override(\"injectWidgetEl\",function(t){var e=this;return this.initialized?this.widgetEl?m.reject(new Error(\"widget already injected\"))😮.write(function(){e.doc.body.appendChild(t)}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"matchHeightToContent\",function(){var t,e=this;return o.read(function(){t=e.widgetEl?h(e.widgetEl).height😮}),o.write(function(){e.sandboxEl.style.height=t+\"px\"}).then(function(){return e._updateCachedDimensions()})}),t.override(\"matchWidthToContent\",function(){var t,e=this;return o.read(function(){t=e.widgetEl?h(e.widgetEl).width😮}),o.write(function(){e.sandboxEl.style.width=t+\"px\"}).then(function(){return e._updateCachedDimensions()})}),t.after(\"initialize\",function(){this._iframe=null,this._width=this._height😮,this._resizeHandlers😦]}),t.override(\"insert\",function(t,e,n,r){var i=this,s=new p,a=this.targetGlobal.document,u😒(t,e,n,a);return o.write(y(r,null,u)),u.addEventListener(\"load\",function(){(function(t){try{t.contentWindow.document}catch(t){return m.reject(t)}return m.resolve(t)})(u).then(null,y(R,null,t,e,n,u,a)).then(s.resolve,s.reject)},!1),u.addEventListener(\"error\",s.reject,!1),s.promise.then(function(t){var e😛(i._didResize,T,i);return i._iframe=t,i.win.addEventListener(\"resize\",e,!1),m.all([i._setTargetToBlank(),i.addRootClass(😆,i.prependCss(A)])})}),t.override(\"onResize\",function(t){this._resizeHandlers.push(t)}),t.after(\"styleSelf\",function(){return this._updateCachedDimensions()})})},function(t,e){t.exports=function(){throw new Error(\"unimplemented method\")}},function(t,e,n){var r=n(2),i=n(7),o=100,s=3e3;function a(t,e){this._inputsQueue😦],this._task=t,this._isPaused=!1,this._flushDelay=e&&e.flushDelay||o,this._pauseLength=e&&e.pauseLength||s,this._flushTimeout=void 0}a.prototype.add=function(t){var e=new r;return this._inputsQueue.push({input:t,taskDoneDeferred:e}),this._scheduleFlush(),e.promise},a.prototype._scheduleFlush=function(){this._isPaused||(clearTimeout(this._flushTimeout),this._flushTimeout=setTimeout(i(this._flush,this),this._flushDelay))},a.prototype._flush=function(){try{this._task.call(null,this._inputsQueue)}catch(t){this._inputsQueue.forEach(function(e){e.taskDoneDeferred.reject(t)})}this._inputsQueue😦],this._flushTimeout=void 0},a.prototype.pause=function(t){clearTimeout(this._flushTimeout),this._isPaused=!0,!t&&this._pauseLength&&setTimeout(i(this.resume,this),this._pauseLength)},a.prototype.resume=function(){this._isPaused=!1,this._scheduleFlush()},t.exports=a},function(t,e,n){var r,i=n(70),o=n(29),s=n(2),a=n(5),u=n(18),c=n(20),d=n(30),l=n(😎,f=n(12),h=n(111),p=n(55),m=n(9),v=n(11),g=n(112),w=n(0),y=n(1),b😛(function(){return new s});function _(t){var e=t||{should_obtain_cookie_consent:!0,experiments:{}};return new g(e.should_obtain_cookie_consent,e.experiments)}t.exports={load:function(){var t,e,n,s;if(c.ie9()||c.ie10()||\"http:\"!==l.protocol&&\"https:\"!==l.protocol)return f.devError(\"Using default settings due to unsupported browser or protocol.\"),r=_(),void b().resolve();t={origin:l.origin},u.settings().indexOf(\"localhost\")>-1&&(t.localSettings=!0),e=v.url(i.resourceBaseUrl+i.widgetIframeHtmlPath,t),n=function(t){var n;if(e.substr(0,t.origin.length)===t.origin)try{(n=\"string\"==typeof t.data?d.parse(t.data):t.data).namespace===h.settings&&(r=_(n.settings),b().resolve())}catch(t){f.devError(t)}},y.addEventListener(\"message\",n),s😮({src:e,title:\"Twitter settings iframe\"},{display:\"none\"}),a.body.appendChild(s)},settingsLoaded:function(){var t,e,n;return t=new s,e=m.get(\"experimentOverride\"),b().promise.then(function(){e&&e.name&&e.assignment&&((n={})[e.name]={bucket:e.assignment},r.experiments=w.aug(r.experiments,n)),t.resolve(r)}).catch(function(e){t.reject(e)}),t.promise}}},function(t,e){t.exports={settings:\"twttr.settings\"}},function(t,e){t.exports=function(t,e){this.shouldObtainCookieConsent=t,this.experiments=e||{}}},function(t,e){t.exports=function(t){return t.split(\"\").map(function(t){return t.charCodeAt(0).toString(16)}).join(\"\")}},function(t,e,n){t.exports😦n(115),n(120),n(128),n(130),n(132),n(146),n(148)]},function(t,e,n){var r=n(11),i=n(4),o=n(0),s=n(13),a=n(14)(),u=n(56),c=\"a.twitter-dm-button\";t.exports=function(t){return a(t,c).map(function(t){return u(function(t){var e=t.getAttribute(\"data-show-screen-name\"),n😒(t),a=t.getAttribute(\"href\"),u=t.getAttribute(\"data-screen-name\"),c=e?i.asBoolean(e):null,d=t.getAttribute(\"data-size\"),l=r.decodeURL(a),f=l.recipient_id,h=t.getAttribute(\"data-text\")||l.text,p=t.getAttribute(\"data-welcome-message-id\")||l.welcomeMessageId;return o.aug(n,{screenName:u,showScreenName:c,size😛,text:h,userId:f,welcomeMessageId😛})}(t),t.parentNode,t)})}},function(t,e,n){var r=n(0);t.exports=function t(e){var n;if(e)return n=e.lang||e.getAttribute(\"data-lang\"),r.isType(\"string\",n)?n:t(e.parentElement)}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return n.e(2).then(function(r){var o;try{o=n(84),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(119),i=n(1),o=n(10),s=n(34),a=n(17),u=n(52),c=n(25),d=n(53),l=n(42),f=n(44),h=n(7),p=n(43),m=n(6),v=n(0),g=50,w={position:\"absolute\",visibility:\"hidden\",display:\"block\",transform:\"rotate(0deg)\"},y={position:\"static\",visibility:\"visible\"},b=\"twitter-widget\",_=\"open\",E=\"SandboxRoot\",x=\".SandboxRoot { display: none; max-height: 10000px; }\";t.exports=c.couple(n(54),function(t){t.defineStatic(\"isSupported\",function(){return!!i.HTMLElement.prototype.attachShadow&&l.inlineStyle()}),t.overrideProperty(\"id\",{get:function(){return this.sandboxEl&&this.sandboxEl.id}}),t.overrideProperty(\"initialized\",{get:function(){return!!this._shadowHost}}),t.overrideProperty(\"width\",{get:function(){return this._width}}),t.overrideProperty(\"height\",{get:function(){return this._height}}),t.overrideProperty(\"sandboxEl\",{get:function(){return this._shadowHost}}),t.define(\"_updateCachedDimensions\",function(){var t=this;return a.read(function(){var e,n=f(t.sandboxEl);\"visible\"==t.sandboxEl.style.visibility?t._width=n.width😦e=f(t.sandboxEl.parentElement).width,t._width=Math.min(n.width,e)),t._height=n.height})}),t.define(\"_didResize\",function(){var t=this,e=this._resizeHandlers.slice(0);return this._updateCachedDimensions().then(function(){e.forEach(function(e){e(t)})})}),t.override(\"createElement\",function(t){return this.targetGlobal.document.createElement(t)}),t.override(\"createFragment\",function(){return this.targetGlobal.document.createDocumentFragment()}),t.override(\"htmlToElement\",function(t){var e;return(e=this.createElement(\"div\")).innerHTML=t,e.firstElementChild}),t.override(\"hasSelectedText\",function(){return!!u.getSelectedText(this.targetGlobal)}),t.override(\"addRootClass\",function(t){var e=this._shadowRootBody;return t=Array.isArray(t)?t😦t],this.initialized?a.write(function(){t.forEach(function(t){o.add(e,t)})}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"removeRootClass\",function(t){var e=this._shadowRootBody;return t=Array.isArray(t)?t😦t],this.initialized?a.write(function(){t.forEach(function(t){o.remove(e,t)})}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"hasRootClass\",function(t){return o.present(this._shadowRootBody,t)}),t.override(\"addStyleSheet\",function(t,e){return this.addCss('@import url(\"'+t+'\");',e).then(function(){return d(t)})}),t.override(\"prependStyleSheet\",function(t){var e=this._shadowRoot;return this.addStyleSheet(t,function(t){var n=e.firstElementChild;return n?e.insertBefore(t,n):e.appendChild(t)})}),t.override(\"appendStyleSheet\",function(t){var e=this._shadowRoot;return this.addStyleSheet(t,function(t){return e.appendChild(t)})}),t.override(\"addCss\",function(t,e){var n;return this.initialized?l.inlineStyle()?((n=this.createElement(\"style\")).type=\"text/css\",n.appendChild(this.targetGlobal.document.createTextNode(t)),a.write(h(e,null,n))):m.resolve():m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"prependCss\",function(t){var e=this._shadowRoot;return this.addCss(t,function(t){var n=e.firstElementChild;return n?e.insertBefore(t,n):e.appendChild(t)})}),t.override(\"appendCss\",function(t){var e=this._shadowRoot;return this.addCss(t,function(t){return e.appendChild(t)})}),t.override(\"makeVisible\",function(){return this.styleSelf(y)}),t.override(\"injectWidgetEl\",function(t){var e=this;return this.initialized?this._shadowRootBody.firstElementChild?m.reject(new Error(\"widget already injected\")):a.write(function(){e._shadowRootBody.appendChild(t)}).then(function(){return e._updateCachedDimensions()}).then(function(){var t😛(e._didResize,g,e);new r(e._shadowRootBody,t)}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"matchHeightToContent\",function(){return m.resolve()}),t.override(\"matchWidthToContent\",function(){return m.resolve()}),t.override(\"insert\",function(t,e,n,r){var i=this.targetGlobal.document,o=this._shadowHost=i.createElement(b),u=this._shadowRoot😮.attachShadow({mode:_}),c=this._shadowRootBody=i.createElement(\"div\");return v.forIn(e||{},function(t,e){o.setAttribute(t,e)}),o.id=t,u.appendChild(c),s.delegate(c,\"click\",\"A\",function(t,e){e.hasAttribute(\"target\")||e.setAttribute(\"target\",\"_blank\")}),m.all([this.styleSelf(w),this.addRootClass(E),this.prependCss(😆,a.write(r.bind(null,o))])}),t.override(\"onResize\",function(t){this._resizeHandlers.push(t)}),t.after(\"initialize\",function(){this._shadowHost=this._shadowRoot=this._shadowRootBody=null,this._width=this._height😮,this._resizeHandlers😦]}),t.after(\"styleSelf\",function(){return this._updateCachedDimensions()})})},function(t,e){var n;(n=function(t,e){function r(t,e){if(t.resizedAttached){if(t.resizedAttached)return void t.resizedAttached.add(e)}else t.resizedAttached=new function(){var t,e;this.q😦],this.add=function(t){this.q.push(t)},this.call=function(){for(t😮,e=this.q.length;t<e;t++)this.q[t].call()}},t.resizedAttached.add(e);t.resizeSensor=document.createElement(\"div\"),t.resizeSensor.className=\"resize-sensor\";var n=\"position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;\",r=\"position: absolute; left: 0; top: 0; transition: 0s;\";t.resizeSensor.style.cssText=n,t.resizeSensor.innerHTML='<div class=\"resize-sensor-expand\" style=\"'+n+'\"><div style=\"'+r+'\"></div></div><div class=\"resize-sensor-shrink\" style=\"'+n+'\"><div style=\"'+r+' width: 200%; height: 200%\"></div></div>',t.appendChild(t.resizeSensor),{fixed:1,absolute:1}[function(t,e){return t.currentStyle?t.currentStyle[e]:window.getComputedStyle?window.getComputedStyle(t,null).getPropertyValue(e):t.style[e]}(t,\"position\")]||(t.style.position=\"relative\");var i,o,s=t.resizeSensor.childNodes[0],a😒.childNodes[0],u=t.resizeSensor.childNodes[1],c😦u.childNodes[0],function(){a.style.width😒.offsetWidth+10+\"px\",a.style.height😒.offsetHeight+10+\"px\",s.scrollLeft😒.scrollWidth,s.scrollTop😒.scrollHeight,u.scrollLeft=u.scrollWidth,u.scrollTop=u.scrollHeight,i=t.offsetWidth,o=t.offsetHeight});c();var d=function(t,e,n){t.attachEvent?t.attachEvent(\"on\"+e,n):t.addEventListener(e,n)},l=function(){t.offsetWidth==i&&t.offsetHeight==o||t.resizedAttached&&t.resizedAttached.call(),c()}😜(s,\"scroll\",l),d(u,\"scroll\",l)}var i=Object.prototype.toString.call(t),o=\"[object Array]\"===i||\"[object NodeList]\"===i||\"[object HTMLCollection]\"===i||\"undefined\"!=typeof jQuery&&t instanceof jQuery||\"undefined\"!=typeof Elements&&t instanceof Elements;if(o)for(var s😮,a=t.length;s<a;s++)r(t[s],e);else r(t,e);this.detach=function(){if(o)for(var e😮,r=t.length;e<r;e++)n.detach(t[e]);else n.detach(t)}}).detach=function(t){t.resizeSensor&&(t.removeChild(t.resizeSensor),delete t.resizeSensor,delete t.resizedAttached)},void 0!==t&&void 0!==t.exports?t.exports=n:window.ResizeSensor=n},function(t,e,n){var r=n(3),i=n(0),o=n(13),s=n(14)(),a=n(59),u=n(4),c=\"a.twitter-follow-button\";t.exports=function(t){return s(t,c).map(function(t){return a(function(t){var e😮(t),n={screenName:r.screenName(t.href),showScreenName:\"false\"!==t.getAttribute(\"data-show-screen-name\"),showCount:\"false\"!==t.getAttribute(\"data-show-count\"),size:t.getAttribute(\"data-size\"),count:t.getAttribute(\"data-count\"),preview:t.getAttribute(\"data-preview\")};return i.forIn(n,function(t,n){var r=e[t];e[t]=u.hasValue(r)?r:n}),e.screenName=e.screenName||e.screen_name,e}(t),t.parentNode,t)})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return n.e(3).then(function(r){var o;try{o=n(85),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(17),i=n(123),o=n(55),s=n(29),a=n(2),u=n(6),c=n(7),d=n(0),l={position:\"absolute\",visibility:\"hidden\",width:\"0px\",height:\"0px\"},f={position:\"static\",visibility:\"visible\"},h={};i(function(t,e,n){var r=h[t];if(r)return e=e||1,n=n||1,r.styleSelf({width:e+\"px\",height:n+\"px\"}).then(function(){r.didResize()})}),t.exports=function(t){t.overrideProperty(\"id\",{get:function(){return this.sandboxEl&&this.sandboxEl.id}}),t.overrideProperty(\"initialized\",{get:function(){return!!this.iframeEl}}),t.overrideProperty(\"width\",{get:function(){return this._width}}),t.overrideProperty(\"height\",{get:function(){return this._height}}),t.overrideProperty(\"sandboxEl\",{get:function(){return this.iframeEl}}),t.defineProperty(\"iframeEl\",{get:function(){return this._iframe}}),t.define(\"updateCachedDimensions\",function(){var t=this;return this.initialized?r.read(function(){t._width=t.sandboxEl.offsetWidth,t._height=t.sandboxEl.offsetHeight}):u.resolve()}),t.define(\"setTitle\",function(t){this.iframeEl.title=t}),t.define(\"makeVisible\",function(){return this.styleSelf(f)}),t.define(\"didResize\",function(){var t=this,e=t._resizeHandlers.length>0;return this.updateCachedDimensions().then(function(){e&&t._resizeHandlers.forEach(function(e){e(t)})})}),t.define(\"loadDocument\",function(t){var e=new a;return this.initialized?this.iframeEl.src?u.reject(new Error(\"widget already loaded\"))😦this.iframeEl.addEventListener(\"load\",e.resolve,!1),this.iframeEl.addEventListener(\"error\",e.reject,!1),this.iframeEl.src=t,e.promise):u.reject(new Error(\"sandbox not initialized\"))}),t.after(\"initialize\",function(){this._iframe=null,this._width=this._height😮,this._resizeHandlers😦]}),t.override(\"insert\",function(t,e,n,i){var a=this;return e😛.aug({id:t},e),n😛.aug({},l,n),this._iframe😒(e,n),h[t]=this,this.onResize(o(function(){a.makeVisible()})),r.write(c(i,null,this._iframe))}),t.override(\"onResize\",function(t){this._resizeHandlers.push(t)}),t.after(\"styleSelf\",function(){return this.updateCachedDimensions()})}},function(t,e,n){var r=n(1),i=n(124),o=n(126),s=n(23),a=n(4),u=n(127);t.exports=function(t){(new i).attachReceiver(new o.Receiver(r,\"twttr.button\")).bind(\"twttr.private.trigger\",function(t,e){var n=u(this);s.trigger(t,{target:n,region:e,type:t,data:{}})}).bind(\"twttr.private.resizeButton\",function(e){var n=u(this),r=n&&n.id,i=a.asInt(e.width),o=a.asInt(e.height);r&&void 0!==i&&void 0!==o&&t(r,i,o)})}},function(t,e,n){var r=n(30),i=n(125),o=n(0),s=n(6),a=n(21),u=\"2.0\";function c(t){this.registry=t||{}}function d(t){var e,n;return e😮.isType(\"string\",t),n😮.isType(\"number\",t),e||n||null===t}function l(t,e){return{jsonrpc:u,id😛(t)?t:null,error:e}}c.prototype._invoke=function(t,e){var n,r,i;n=this.registry[t.method],r=t.params||[],r😮.isType(\"array\",r)?r😦r];try{i=n.apply(e.source||null,r)}catch(t){i😒.reject(t.message)}return a.isPromise(i)?i😒.resolve(i)},c.prototype._processRequest=function(t,e){var n,r;return function(t){var e,n,r;return!!o.isObject(t)&&(e=t.jsonrpc===u,n😮.isType(\"string\",t.method),r=!(\"id\"in t)||d(t.id),e&&n&&r)}(t)?(n=\"params\"in t&&(r=t.params,!o.isObject(r)||o.isType(\"function\",r))?s.resolve(l(t.id,i.INVALID_PARAMS)):this.registry[t.method]?this._invoke(t,{source:e}).then(function(e){return n=t.id,{jsonrpc:u,id:n,result:e};var n},function(){return l(t.id,i.INTERNAL_ERROR)})😒.resolve(l(t.id,i.METHOD_NOT_FOUND)),null!=t.id?n😒.resolve())😒.resolve(l(t.id,i.INVALID_REQUEST))},c.prototype.attachReceiver=function(t){return t.attachTo(this),this},c.prototype.bind=function(t,e){return this.registry[t]=e,this},c.prototype.receive=function(t,e){var n,a,u,c=this;try{u=t,t😮.isType(\"string\",u)?r.parse(u):u}catch(t){return s.resolve(l(null,i.PARSE_ERROR))}return e=e||null,a=((n😮.isType(\"array\",t))?t😦t]).map(function(t){return c._processRequest(t,e)}),n?function(t){return s.all(t).then(function(t){return(t=t.filter(function(t){return void 0!==t})).length?t:void 0})}(a):a[0]},t.exports=c},function(t){t.exports={PARSE_ERROR:{code😶32700,message:\"Parse error\"},INVALID_REQUEST:{code😶32600,message:\"Invalid Request\"},INVALID_PARAMS:{code😶32602,message:\"Invalid params\"},METHOD_NOT_FOUND:{code😶32601,message:\"Method not found\"},INTERNAL_ERROR:{code😶32603,message:\"Internal error\"}}},function(t,e,n){var r=n(😎,i=n(1),o=n(30),s=n(2),a=n(20),u=n(0),c=n(3),d=n(7),l=a.ie9();function f(t,e,n){var r;t&&t.postMessage&&(l?r😦n||\"\")+o.stringify(e):n?(r={})[n]=e:r=e,t.postMessage(r,\"*\"))}function h(t){return u.isType(\"string\",t)?t:\"JSONRPC\"}function p(t,e){return e?u.isType(\"string\",t)&&0===t.indexOf(e)?t.substring(e.length):t&&t[e]?t[e]:void 0:t}function m(t,e){var n=t.document;this.filter=h(e),this.server=null,this.isTwitterFrame=c.isTwitterURL(n.location.href),t.addEventListener(\"message\",d(this._onMessage,this),!1)}function v(t,e){this.pending={},this.target=t,this.isTwitterHost=c.isTwitterURL(r.href),this.filter=h(e),i.addEventListener(\"message\",d(this._onMessage,this),!1)}u.aug(m.prototype,{_onMessage:function(t){var e,n=this;this.server&&(this.isTwitterFrame&&!c.isTwitterURL(t.origin)||(e😛(t.data,this.filter))&&this.server.receive(e,t.source).then(function(e){e&&f(t.source,e,n.filter)}))},attachTo:function(t){this.server=t},detach:function(){this.server=null}}),u.aug(v.prototype,{_processResponse:function(t){var e=this.pending[t.id];e&&(e.resolve(t),delete this.pending[t.id])},_onMessage:function(t){var e;if((!this.isTwitterHost||c.isTwitterURL(t.origin))&&(e😛(t.data,this.filter))){if(u.isType(\"string\",e))try{e😮.parse(e)}catch(t){return}(e=u.isType(\"array\",e)?e😦e]).forEach(d(this._processResponse,this))}},send:function(t){var e=new s;return t.id?this.pending[t.id]=e:e.resolve(),f(this.target,t,this.filter),e.promise}}),t.exports={Receiver:m,Dispatcher:v,_stringifyPayload:function(t){return arguments.length>0&&(l=!!t),l}}},function(t,e,n){var r=n(5);t.exports=function(t){for(var e,n=r.getElementsByTagName(\"iframe\"),i😮;n[i];i++)if((e=n[i]).contentWindow===t)return e}},function(t,e,n){var r=n(4),i=n(0),o=n(3),s=n(13),a=n(14)(),u=n(61),c=\"a.twitter-moment\";t.exports=function(t){return a(t,c).map(function(t){return u(function(t){var e😒(t),n={momentId😮.momentId(t.href),chrome:t.getAttribute(\"data-chrome\"),limit:t.getAttribute(\"data-limit\")};return i.forIn(n,function(t,n){var i=e[t];e[t]=r.hasValue(i)?i:n}),e}(t),t.parentNode,t)})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return Promise.all([n.e(0),n.e(4)]).then(function(r){var o;try{o=n(86),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(0),i=n(13),o=n(14)(),s=n(62),a=\"a.periscope-on-air\",u😕^https?😕/\\/(?:www\\.)?(?:periscope|pscp)\\.tv\\/@?([a-zA-Z0-9_]+)\\/?$/i;t.exports=function(t){return o(t,a).map(function(t){return s(function(t){var e=i(t),n=t.getAttribute(\"href\"),o=t.getAttribute(\"data-size\"),s=u.exec(n)[1];return r.aug(e,{username😒,size😮})}(t),t.parentNode,t)})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return n.e(5).then(function(r){var o;try{o=n(87),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(4),i=n(0),o=n(63),s=n(13),a=n(14)(),u=n(64),c=n(3),d=n(12),l=\"a.twitter-timeline,div.twitter-timeline,a.twitter-grid\",f=\"Embedded Search timelines have been deprecated. See https://twittercommunity.com/t/deprecating-widget-settings/102295.\",h=\"You may have been affected by an update to settings in embedded timelines. See https://twittercommunity.com/t/deprecating-widget-settings/102295.\",p=\"Embedded grids have been deprecated and will now render as timelines. Please update your embed code to use the twitter-timeline class. More info: https://twittercommunity.com/t/update-on-the-embedded-grid-display-type/119564.\";t.exports=function(t){return a(t,l).map(function(t){return u(function(t){var e😒(t),n=t.getAttribute(\"data-show-replies\"),a={isPreconfigured:!!t.getAttribute(\"data-widget-id\"),chrome:t.getAttribute(\"data-chrome\"),tweetLimit:t.getAttribute(\"data-tweet-limit\")||t.getAttribute(\"data-limit\"),ariaLive:t.getAttribute(\"data-aria-polite\"),theme:t.getAttribute(\"data-theme\"),linkColor:t.getAttribute(\"data-link-color\"),borderColor:t.getAttribute(\"data-border-color\"),showReplies:n?r.asBoolean(n):null,profileScreenName:t.getAttribute(\"data-screen-name\"),profileUserId:t.getAttribute(\"data-user-id\"),favoritesScreenName:t.getAttribute(\"data-favorites-screen-name\"),favoritesUserId:t.getAttribute(\"data-favorites-user-id\"),likesScreenName:t.getAttribute(\"data-likes-screen-name\"),likesUserId:t.getAttribute(\"data-likes-user-id\"),listOwnerScreenName:t.getAttribute(\"data-list-owner-screen-name\"),listOwnerUserId:t.getAttribute(\"data-list-owner-id\"),listId:t.getAttribute(\"data-list-id\"),listSlug:t.getAttribute(\"data-list-slug\"),customTimelineId:t.getAttribute(\"data-custom-timeline-id\"),staticContent:t.getAttribute(\"data-static-content\"),url:t.href};return a.isPreconfigured&&(c.isSearchUrl(a.url)?d.publicError(f,t)😛.publicLog(h,t)),\"twitter-grid\"===t.className&&d.publicLog(p,t),(a=i.aug(a,e)).dataSource😮(a),a.id=a.dataSource&&a.dataSource.id,a}(t),t.parentNode,t)})}},function(t,e,n){var r=n(26);t.exports=r.build([n(27),n(136)])},function(t,e,n){var r=n(0),i=n(135);t.exports=function(t){return\"en\"===t||r.contains(i,t)}},function(t,e){t.exports😦\"hi\",\"zh-cn\",\"fr\",\"zh-tw\",\"msa\",\"fil\",\"fi\",\"sv\",\"pl\",\"ja\",\"ko\",\"de\",\"it\",\"pt\",\"es\",\"ru\",\"id\",\"tr\",\"da\",\"no\",\"nl\",\"hu\",\"fa\",\"ar\",\"ur\",\"he\",\"th\",\"cs\",\"uk\",\"vi\",\"ro\",\"bn\",\"el\",\"en-gb\",\"gu\",\"kn\",\"mr\",\"ta\",\"bg\",\"ca\",\"hr\",\"sr\",\"sk\"]},function(t,e,n){var r=n(3),i=n(0),o=n(18),s=\"collection:\";function a(t,e){return r.collectionId(t)||e}t.exports=function(t){t.params({id:{},url:{}}),t.overrideProperty(\"id\",{get:function(){var t=a(this.params.url,this.params.id);return s+t}}),t.overrideProperty(\"endpoint\",{get:function(){return o.timeline([\"collection\"])}}),t.around(\"queryParams\",function(t){return i.aug(t(),{collection_id:a(this.params.url,this.params.id)})}),t.before(\"initialize\",function(){if(!a(this.params.url,this.params.id))throw new Error(\"one of url or id is required\")})}},function(t,e,n){var r=n(26);t.exports=r.build([n(27),n(138)])},function(t,e,n){var r=n(3),i=n(0),o=n(18),s=\"event:\";function a(t,e){return r.eventId(t)||e}t.exports=function(t){t.params({id:{},url:{}}),t.overrideProperty(\"id\",{get:function(){var t=a(this.params.url,this.params.id);return s+t}}),t.overrideProperty(\"endpoint\",{get:function(){return o.timeline([\"event\"])}}),t.around(\"queryParams\",function(t){return i.aug(t(),{event_id:a(this.params.url,this.params.id)})}),t.before(\"initialize\",function(){if(!a(this.params.url,this.params.id))throw new Error(\"one of url or id is required\")})}},function(t,e,n){var r=n(26);t.exports=r.build([n(27),n(140)])},function(t,e,n){var r=n(3),i=n(0),o=n(18),s=\"likes:\";function a(t){return r.likesScreenName(t.url)||t.screenName}t.exports=function(t){t.params({screenName:{},userId:{},url:{}}),t.overrideProperty(\"id\",{get:function(){var t=a(this.params)||this.params.userId;return s+t}}),t.overrideProperty(\"endpoint\",{get:function(){return o.timeline([\"likes\"])}}),t.define(\"_getLikesQueryParam\",function(){var t=a(this.params);return t?{screen_name:t}:{user_id:this.params.userId}}),t.around(\"queryParams\",function(t){return i.aug(t(),this._getLikesQueryParam())}),t.before(\"initialize\",function(){if(!a(this.params)&&!this.params.userId)throw new Error(\"screen name or user id is required\")})}},function(t,e,n){var r=n(26);t.exports=r.build([n(27),n(142)])},function(t,e,n){var r=n(3),i=n(0),o=n(18),s=\"list:\";function a(t){var e=r.listScreenNameAndSlug(t.url)||t;return i.compact({screen_name:e.ownerScreenName,user_id:e.ownerUserId,list_slug:e.slug})}t.exports=function(t){t.params({id:{},ownerScreenName:{},ownerUserId:{},slug:{},url:{}}),t.overrideProperty(\"id\",{get:function(){var t,e,n;return this.params.id?s+this.params.id😦e😦t=a(this.params))&&t.list_slug.replace(/-/g,\"_\"),n=t&&(t.screen_name||t.user_id),s+(n+\"😊+e)}}),t.overrideProperty(\"endpoint\",{get:function(){return o.timeline([\"list\"])}}),t.define(\"_getListQueryParam\",function(){return this.params.id?{list_id:this.params.id}:a(this.params)}),t.around(\"queryParams\",function(t){return i.aug(t(),this._getListQueryParam())}),t.before(\"initialize\",function(){var t=a(this.params);if(i.isEmptyObject(t)&&!this.params.id)throw new Error(\"qualified slug or list id required\")})}},function(t,e,n){var r=n(26);t.exports=r.build([n(27),n(144)])},function(t,e,n){var r=n(3),i=n(4),o=n(0),s=n(18),a=\"profile:\";function u(t,e){return r.screenName(t)||e}t.exports=function(t){t.params({showReplies:{fallback:!1,transform:i.asBoolean},screenName:{},userId:{},url:{}}),t.overrideProperty(\"id\",{get:function(){var t=u(this.params.url,this.params.screenName);return a+(t||this.params.userId)}}),t.overrideProperty(\"endpoint\",{get:function(){return s.timeline([\"profile\"])}}),t.define(\"_getProfileQueryParam\",function(){var t=u(this.params.url,this.params.screenName),e=t?{screen_name:t}:{user_id:this.params.userId};return o.aug(e,{with_replies:this.params.showReplies?\"true\":\"false\"})}),t.around(\"queryParams\",function(t){return o.aug(t(),this._getProfileQueryParam())}),t.before(\"initialize\",function(){if(!u(this.params.url,this.params.screenName)&&!this.params.userId)throw new Error(\"screen name or user id is required\")})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return Promise.all([n.e(0),n.e(6)]).then(function(r){var o;try{o=n(88),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(10),i=n(3),o=n(0),s=n(13),a=n(14)(),u=n(65),c=\"blockquote.twitter-tweet, blockquote.twitter-video\",d😕\\btw-align-(left|right|center)\\b/;t.exports=function(t){return a(t,c).map(function(t){return u(function(t){var e😒(t),n=t.getElementsByTagName(\"A\"),a=n&&n[n.length-1],u=a&&i.status(a.href),c=t.getAttribute(\"data-conversation\"),l=\"none\"==c||\"hidden\"==c||r.present(t,\"tw-hide-thread\"),f=t.getAttribute(\"data-cards\"),h=\"none\"==f||\"hidden\"==f||r.present(t,\"tw-hide-media\"),p=t.getAttribute(\"data-align\")||t.getAttribute(\"align\"),m=t.getAttribute(\"data-link-color\"),v=t.getAttribute(\"data-theme\");return!p&&d.test(t.className)&&(p=RegExp.$1),o.aug(e,{tweetId:u,hideThread:l,hideCard:h,align😛,linkColor:m,theme:v,id:u})}(t),t.parentNode,t)})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return Promise.all([n.e(0),n.e(7)]).then(function(r){var o;try{o=n(89),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(10),i=n(0),o=n(13),s=n(14)(),a=n(66),u=n(4),c=\"a.twitter-share-button, a.twitter-mention-button, a.twitter-hashtag-button\",d=\"twitter-hashtag-button\",l=\"twitter-mention-button\";t.exports=function(t){return s(t,c).map(function(t){return a(function(t){var e😮(t),n={screenName:t.getAttribute(\"data-button-screen-name\"),text:t.getAttribute(\"data-text\"),type:t.getAttribute(\"data-type\"),size:t.getAttribute(\"data-size\"),url:t.getAttribute(\"data-url\"),hashtags:t.getAttribute(\"data-hashtags\"),via:t.getAttribute(\"data-via\"),buttonHashtag:t.getAttribute(\"data-button-hashtag\")};return i.forIn(n,function(t,n){var r=e[t];e[t]=u.hasValue(r)?r:n}),e.screenName=e.screenName||e.screen_name,e.buttonHashtag=e.buttonHashtag||e.button_hashtag||e.hashtag,r.present(t,d)&&(e.type=\"hashtag\"),r.present(t,l)&&(e.type=\"mention\"),e}(t),t.parentNode,t)})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return n.e(3).then(function(r){var o;try{o=n(90),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(0);t.exports=r.aug({},n(151),n(152),n(153),n(154),n(155),n(156),n(157))},function(t,e,n){var r=n(56),i=n(16)([\"userId\"],{},r);t.exports={createDMButton:i}},function(t,e,n){var r=n(59),i=n(16)([\"screenName\"],{},r);t.exports={createFollowButton:i}},function(t,e,n){var r=n(61),i=n(16)([\"momentId\"],{},r);t.exports={createMoment:i}},function(t,e,n){var r=n(62),i=n(16)([\"username\"],{},r);t.exports={createPeriscopeOnAirButton:i}},function(t,e,n){var r=n(😎,i=n(12),o=n(3),s=n(0),a=n(4),u=n(63),c=n(64),d=n(16)([],{},c),l=n(6),f=\"Embedded grids have been deprecated. Please use twttr.widgets.createTimeline instead. More info: https://twittercommunity.com/t/update-on-the-embedded-grid-display-type/119564.\",h={createTimeline😛,createGridFromCollection:function(t){var e😒.toRealArray(arguments).slice(1),n={sourceType:\"collection\",id:t};return e.unshift(n),i.publicLog(f),p.apply(this,e)}};function p(t){var e,n😒.toRealArray(arguments).slice(1);return a.isString(t)||a.isNumber(t)?l.reject(\"Embedded timelines with widget settings have been deprecated. See https://twittercommunity.com/t/deprecating-widget-settings/102295.\")😒.isObject(t)?(t=t||{},n.forEach(function(t){s.isType(\"object\",t)&&function(t){t.ariaLive=t.ariaPolite}(e=t)}),e||(e={},n.push(e)),t.lang=e.lang,t.tweetLimit=e.tweetLimit,t.showReplies=e.showReplies,e.dataSource=u(t),d.apply(this,n)):l.reject(\"data source must be an object.\")}o.isTwitterURL(r.href)&&(h.createTimelinePreview=function(t,e,n){var r={previewParams:t,useLegacyDefaults:!0,isPreviewTimeline:!0};return r.dataSource=u(r),d(e,r,n)}),t.exports=h},function(t,e,n){var r,i=n(0),o=n(65),s=n(16),a😦r😒([\"tweetId\"],{},o),function(){return i.toRealArray(arguments).slice(1).forEach(function(t){i.isType(\"object\",t)&&(t.hideCard=\"none\"==t.cards||\"hidden\"==t.cards,t.hideThread=\"none\"==t.conversation||\"hidden\"==t.conversation)}),r.apply(this,arguments)});t.exports={createTweet:a,createTweetEmbed:a,createVideo:a}},function(t,e,n){var r=n(0),i=n(66),o=n(16),s😮([\"url\"],{type:\"share\"},i),a😮([\"buttonHashtag\"],{type:\"hashtag\"},i),u😮([\"screenName\"],{type:\"mention\"},i);function c(t){return function(){return r.toRealArray(arguments).slice(1).forEach(function(t){r.isType(\"object\",t)&&(t.screenName=t.screenName||t.screen_name,t.buttonHashtag=t.buttonHashtag||t.button_hashtag||t.hashtag)}),t.apply(this,arguments)}}t.exports={createShareButton:c(s),createHashtagButton:c(a),createMentionButton:c(u)}},function(t,e,n){var r,i,o,s=n(5),a=n(1),u😮,c😦],d😒.createElement(\"a\");function l(){var t,e;for(u=1,t😮,e=c.length;t<e;t++)c[t]()}/^loade|c/.test(s.readyState)&&(u=1),s.addEventListener&&s.addEventListener(\"DOMContentLoaded\",i=function(){s.removeEventListener(\"DOMContentLoaded\",i,!1),l()},!1),d.doScroll&&s.attachEvent(\"onreadystatechange\",r=function(){/^c/.test(s.readyState)&&(s.detachEvent(\"onreadystatechange\",r),l())}),o😛.doScroll?function(t){a.self!=a.top?u?t():c.push(t):function(){try{d.doScroll(\"left\")}catch(e){return setTimeout(function(){o(t)},50)}t()}()}:function(t){u?t():c.push(t)},t.exports😮},function(t,e,n){var r=n(41),i=n(9);t.exports=function(){i.set(\"buildVersion\",r.version)}},function(t,e,n){n(161),n(83),n(164)},function(t,e,n){var r=n(162),i=n(28),o=n(67),s=new r,a=function(t){t.widgets&&1===t.widgets.length&&(s.start(),i.emitter.unbind(i.ALL_WIDGETS_RENDER_START,a))},u=function(t){var e;t.widgets&&1===t.widgets.length&&(e=t.widgets[0],s.end(),e.dataset&&e.dataset.tweetId&&o({duration😒.duration(),namespace:{element:\"tweet\",action:\"render\"},widgetIds😦e.dataset.tweetId]})),i.emitter.unbind(i.ALL_WIDGETS_RENDER_END,u)};i.emitter.bind(i.ALL_WIDGETS_RENDER_START,a),i.emitter.bind(i.ALL_WIDGETS_RENDER_END,u)},function(t,e,n){var r=n(163);function i(){}i.prototype.start=function(){this._startTime=r()},i.prototype.end=function(){this._duration=r()-this._startTime},i.prototype.duration=function(){return this._duration},t.exports=i},function(t,e,n){var r=n(1);t.exports=function(){return r.performance&&r.performance.now?r.performance.now():Date.now()}},function(t,e,n){var r=n(28),i=n(67),o=n(165),s=n(3),a=n(1),u=n(0),c=n(20),d=n(58);function l(t){return t.performance.getEntriesByType(\"resource\").filter(function(t){return s.isTwimgURL(t.name)||s.isTwitterURL(t.name)}).reduce(function(t,e){return t[e.name]=e.duration,t},{})}r.emitter.bind(r.ALL_WIDGETS_AND_IMAGES_LOADED,function(t){var e,n,r😦];c.hasPerformanceInformation()&&(e=l(a),d.isSupported()||(r=function(t){return t.reduce(function(t,e){return u.aug(t,l(e.contentDocument.defaultView))},{})}(t)),n=u.aug({},e,r),Object.keys(o).forEach(function(t){!function(t,e,n){var r=Object.keys(t).reduce(function(e,r){return n(r)?e+t[r]:e},0);i({duration:r,namespace:{element:e,action:\"resource\"}})}(n,t,o[t])}))})},function(t,e,n){var r=n(3),i={all:function(){return!0},image:function(t){return r.isTwimgURL(t)},settings:function(t){return r.isSettingsURL(t)},widget_iframe:function(t){return r.isWidgetIframeURL(t)}};t.exports=i}])));",
            "</script>"
          ]
        },
        {
          "lectureTitle": "A compound arc chart",
          "lectureLines": [
            "<h1 id=\"challenge-13\">Challenge</h1>",
            "<p>Kiran has a problem. He’s working on a project and doesn’t know how. Let’s help</p>",
            "<h1 id=\"my-solution-13\">My Solution</h1>",
            "<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/_tNeyToiCsI\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen>",
            "</iframe>",
            "<iframe src=\"https://codesandbox.io/embed/14w5j15kol?fontsize=14\" style=\"width:100%; height:500px; border😮; border-radius: 4px; overflow:hidden;\" sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\">",
            "</iframe>",
            "<p><a href=\"https://twitter.com/kiran_gaurang\">Kiran</a> wants to build a “circle with arcs” chart, but he’s having trouble. He asked for help so here we are 😃</p>",
            "<p><img src=\"https://github.com/Swizec/datavizAdvent/raw/master/src/content/kiran-challenge/ask-for-help.png\"></p>",
            "<p>I livecoded this one from the Paris airport so there’s no sound in the video. I was too shy to narrate my actions in the middle of a busy Starbucks. Maybe next time.</p>",
            "<p>Anyway, to build an arc circle like this, we can take many cues from how you would build a piechart. Arcs are still arcs: They’re round, have an inner and outer radius, and represent a datapoint. We can layer them on top of each other with a band scale feeding into radiuses.</p>",
            "<p>Like this 👇</p>",
            "<h2 id=\"first-you-need-a-dataset\">First you need a dataset</h2>",
            "<p>We fake the dataset because Kiran didn’t provide one.</p>",
            "<div class=\"sourceCode\" id=\"cb285\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb285-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"co\" style=\"color: #60a0b0; font-style: italic;\">// 5 percentages represent our dataset</span></a>",
            "<a class=\"sourceLine\" id=\"cb285-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> data <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">range</span>(<span class=\"dv\" style=\"color: #40a070;\">5</span>).<span class=\"at\" style=\"color: #7d9029;\">map</span>(_ <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> (<span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb285-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"dt\" style=\"color: #902000;\">name</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"va\" style=\"color: #19177c;\">Faker</span>.<span class=\"va\" style=\"color: #19177c;\">hacker</span>.<span class=\"at\" style=\"color: #7d9029;\">verb</span>()<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb285-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"dt\" style=\"color: #902000;\">percentage</span><span class=\"op\" style=\"color: #666666;\">:</span> <span class=\"dv\" style=\"color: #40a070;\">75</span> <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"va\" style=\"color: #19177c;\">Math</span>.<span class=\"at\" style=\"color: #7d9029;\">random</span>()<span class=\"op\" style=\"color: #666666;\">,</span></a>",
            "<a class=\"sourceLine\" id=\"cb285-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">}</span>))<span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>5 datapoints, fake name with faker, and a random chunk out of 75%. Tried going full 100 at first and it didn’t look great at all.</p>",
            "<h2 id=\"then-you-need-a-parent-component\">Then you need a parent component</h2>",
            "<div class=\"sourceCode\" id=\"cb286\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb286-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> CircleArcs <span class=\"op\" style=\"color: #666666;\">=</span> (<span class=\"op\" style=\"color: #666666;\">{</span> data<span class=\"op\" style=\"color: #666666;\">,</span> maxR <span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb286-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> rScale <span class=\"op\" style=\"color: #666666;\">=</span> d3</a>",
            "<a class=\"sourceLine\" id=\"cb286-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">scaleBand</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb286-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">paddingInner</span>(<span class=\"fl\" style=\"color: #40a070;\">0.4</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb286-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">paddingOuter</span>(<span class=\"dv\" style=\"color: #40a070;\">1</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb286-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">domain</span>(<span class=\"va\" style=\"color: #19177c;\">d3</span>.<span class=\"at\" style=\"color: #7d9029;\">range</span>(<span class=\"va\" style=\"color: #19177c;\">data</span>.<span class=\"at\" style=\"color: #7d9029;\">length</span>))</a>",
            "<a class=\"sourceLine\" id=\"cb286-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">range</span>([<span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">,</span> maxR])<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb286-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb286-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb286-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb286-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>Circle cx<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">}</span> cy<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"dv\" style=\"color: #40a070;\">0</span><span class=\"op\" style=\"color: #666666;\">}</span> r<span class=\"op\" style=\"color: #666666;\">={</span>maxR<span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb286-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"va\" style=\"color: #19177c;\">data</span>.<span class=\"at\" style=\"color: #7d9029;\">map</span>((d<span class=\"op\" style=\"color: #666666;\">,</span> i) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb286-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">&lt;</span>Arc d<span class=\"op\" style=\"color: #666666;\">={</span>d<span class=\"op\" style=\"color: #666666;\">}</span> r<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"at\" style=\"color: #7d9029;\">rScale</span>(i)<span class=\"op\" style=\"color: #666666;\">}</span> width<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"va\" style=\"color: #19177c;\">rScale</span>.<span class=\"at\" style=\"color: #7d9029;\">bandwidth</span>()<span class=\"op\" style=\"color: #666666;\">}</span> key<span class=\"op\" style=\"color: #666666;\">={</span>i<span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb286-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      ))<span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb286-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    &lt;/g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb286-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb286-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">};</span></a></code></pre></div>",
            "<p>A functional component will do. Create a band scale for the radiuses. Those cut up a given space into equal bands and let you define padding. Same scale you’d use for a barchart to position the bars.</p>",
            "<p>The band scale is ordinal so our domain has to match the number of inputs, <code style=\"white-space: pre-wrap;\">d3.range</code> takes care of that. For our dataset that sets the domain to <code style=\"white-space: pre-wrap;\">[0,1,2,3,4]</code>.</p>",
            "<p>Scale range goes from zero to max radius.</p>",
            "<p>Render a <code style=\"white-space: pre-wrap;\">&lt;Circle&gt;</code> which is a styled circle component, loop through the data and render an <code style=\"white-space: pre-wrap;\">&lt;Arc&gt;</code> component for each entry. The arc takes data in the <code style=\"white-space: pre-wrap;\">d</code> prop, call <code style=\"white-space: pre-wrap;\">rScale</code> to get the radius, and use <code style=\"white-space: pre-wrap;\">rScale.bandwidth()</code> to define the width. Band scales calculate optimal widths on their own.</p>",
            "<p>We can use index for keys because we know arcs will never re-order.</p>",
            "<h2 id=\"the-parent-component-needs-arcs\">The parent component needs arcs</h2>",
            "<p>That’s what it’s rendering. They look like this</p>",
            "<div class=\"sourceCode\" id=\"cb287\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb287-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> Arc <span class=\"op\" style=\"color: #666666;\">=</span> (<span class=\"op\" style=\"color: #666666;\">{</span> d<span class=\"op\" style=\"color: #666666;\">,</span> r<span class=\"op\" style=\"color: #666666;\">,</span> width <span class=\"op\" style=\"color: #666666;\">}</span>) <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">=&gt;</span> <span class=\"op\" style=\"color: #666666;\">{</span></a>",
            "<a class=\"sourceLine\" id=\"cb287-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> arc <span class=\"op\" style=\"color: #666666;\">=</span> d3</a>",
            "<a class=\"sourceLine\" id=\"cb287-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">arc</span>()</a>",
            "<a class=\"sourceLine\" id=\"cb287-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">innerRadius</span>(r)</a>",
            "<a class=\"sourceLine\" id=\"cb287-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">outerRadius</span>(r <span class=\"op\" style=\"color: #666666;\">+</span> width)</a>",
            "<a class=\"sourceLine\" id=\"cb287-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">startAngle</span>(<span class=\"dv\" style=\"color: #40a070;\">0</span>)</a>",
            "<a class=\"sourceLine\" id=\"cb287-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    .<span class=\"at\" style=\"color: #7d9029;\">endAngle</span>((<span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">percentage</span> / <span class=\"dv\" style=\"color: #40a070;\">100</span>) <span class=\"op\" style=\"color: #666666;\">*</span> (<span class=\"va\" style=\"color: #19177c;\">Math</span>.<span class=\"at\" style=\"color: #7d9029;\">PI</span> <span class=\"op\" style=\"color: #666666;\">*</span> <span class=\"dv\" style=\"color: #40a070;\">2</span>))<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb287-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb287-9\" title=\"9\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  <span class=\"cf\" style=\"color: #007020; font-weight: bold;\">return</span> (</a>",
            "<a class=\"sourceLine\" id=\"cb287-10\" title=\"10\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    <span class=\"op\" style=\"color: #666666;\">&lt;</span>g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb287-11\" title=\"11\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>Label y<span class=\"op\" style=\"color: #666666;\">={-</span>r<span class=\"op\" style=\"color: #666666;\">}</span> x<span class=\"op\" style=\"color: #666666;\">={-</span><span class=\"dv\" style=\"color: #40a070;\">10</span><span class=\"op\" style=\"color: #666666;\">}&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb287-12\" title=\"12\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">        <span class=\"op\" style=\"color: #666666;\">{</span><span class=\"va\" style=\"color: #19177c;\">d</span>.<span class=\"at\" style=\"color: #7d9029;\">name</span><span class=\"op\" style=\"color: #666666;\">}</span></a>",
            "<a class=\"sourceLine\" id=\"cb287-13\" title=\"13\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      &lt;/Label<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb287-14\" title=\"14\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">      <span class=\"op\" style=\"color: #666666;\">&lt;</span>ArcPath d<span class=\"op\" style=\"color: #666666;\">={</span><span class=\"at\" style=\"color: #7d9029;\">arc</span>()<span class=\"op\" style=\"color: #666666;\">}</span> /&gt;</a>",
            "<a class=\"sourceLine\" id=\"cb287-15\" title=\"15\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">    &lt;/g<span class=\"op\" style=\"color: #666666;\">&gt;</span></a>",
            "<a class=\"sourceLine\" id=\"cb287-16\" title=\"16\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\">  )<span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb287-17\" title=\"17\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"op\" style=\"color: #666666;\">};</span></a></code></pre></div>",
            "<p>A D3 arc generator defines the path shape of our arcs. Inner radius comes from the <code style=\"white-space: pre-wrap;\">r</code> prop, outer radius is <code style=\"white-space: pre-wrap;\">r+width</code>. Unlike a traditional pie chart, every arc starts at angle zero.</p>",
            "<p>The end angle makes our arcs communicate their value. A percentage of full circle.</p>",
            "<p>Each arc also comes with a label at its start. We position those at the beginning of the arc using the <code style=\"white-space: pre-wrap;\">x</code> and <code style=\"white-space: pre-wrap;\">y</code> props. Setting their anchor point as <code style=\"white-space: pre-wrap;\">end</code> automatically makes them <em>end</em> at that point.</p>",
            "<div class=\"sourceCode\" id=\"cb288\" style=\"overflow: visible; margin: 1em 0;\"><pre class=\"sourceCode javascript\" style=\"overflow: visible; margin: 0;\"><code class=\"sourceCode javascript\" style=\"overflow: visible; white-space: pre; position: relative;\"><a class=\"sourceLine\" id=\"cb288-1\" title=\"1\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> ArcPath <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">styled</span>.<span class=\"at\" style=\"color: #7d9029;\">path</span><span class=\"vs\" style=\"color: #4070a0;\">`</span></a>",
            "<a class=\"sourceLine\" id=\"cb288-2\" title=\"2\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"vs\" style=\"color: #4070a0;\">  fill: white;</span></a>",
            "<a class=\"sourceLine\" id=\"cb288-3\" title=\"3\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"vs\" style=\"color: #4070a0;\">`</span><span class=\"op\" style=\"color: #666666;\">;</span></a>",
            "<a class=\"sourceLine\" id=\"cb288-4\" title=\"4\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;\"></a>",
            "<a class=\"sourceLine\" id=\"cb288-5\" title=\"5\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"kw\" style=\"color: #007020; font-weight: bold;\">const</span> Label <span class=\"op\" style=\"color: #666666;\">=</span> <span class=\"va\" style=\"color: #19177c;\">styled</span>.<span class=\"at\" style=\"color: #7d9029;\">text</span><span class=\"vs\" style=\"color: #4070a0;\">`</span></a>",
            "<a class=\"sourceLine\" id=\"cb288-6\" title=\"6\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"vs\" style=\"color: #4070a0;\">  fill: white;</span></a>",
            "<a class=\"sourceLine\" id=\"cb288-7\" title=\"7\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"vs\" style=\"color: #4070a0;\">  text-anchor: end;</span></a>",
            "<a class=\"sourceLine\" id=\"cb288-8\" title=\"8\" style=\"display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;\"><span class=\"vs\" style=\"color: #4070a0;\">`</span><span class=\"op\" style=\"color: #666666;\">;</span></a></code></pre></div>",
            "<p>Styled components work great for setting pretty much any SVG prop 👌</p>",
            "<p>And the result is a circle arc chart thing. Wonderful.</p>",
            "<blockquote class=\"twitter-tweet\" data-lang=\"en\">",
            "<p lang=\"en\" dir=\"ltr\">",
            "For <a href=\"https://twitter.com/hashtag/ReactVizHoliday?src=hash&amp;ref_src=twsrc%5Etfw\">#ReactVizHoliday</a> Day 14 we solved the <a href=\"https://twitter.com/kiran_gaurang?ref_src=twsrc%5Etfw\"><span class=\"citation\" data-cites=\"kiran_gaurang\">@kiran_gaurang</span></a> challenge: How do you build a arc circle chart thing<br><br>Solved live from the Paris airport because free wifi in France gets 3000kb/s upload 👌<br><br>👉 <a href=\"https://t.co/fKD856bWMp\">https://t.co/fKD856bWMp</a> <a href=\"https://t.co/QwDAS7L63o\">pic.twitter.com/QwDAS7L63o</a>",
            "</p>",
            "— Swizec Teller (<span class=\"citation\" data-cites=\"Swizec\">@Swizec</span>) <a href=\"https://twitter.com/Swizec/status/1076448516619362304?ref_src=twsrc%5Etfw\">December 22, 2018</a>",
            "</blockquote>",
            "<script async charset=\"utf-8\">",
            "Function&&Function.prototype&&Function.prototype.bind&&(/MSIE ([6789]|10)/.test(navigator.userAgent)||(window.__twttr&&window.__twttr.widgets&&window.__twttr.widgets.loaded&&window.twttr.widgets.load&&window.twttr.widgets.load(),window.__twttr&&window.__twttr.widgets&&window.__twttr.widgets.init||function(t){function e(e){for(var n,i,o=e[0],s=e[1],a😮,c😦];a<o.length;a++)i😮[a],r[i]&&c.push(r[i][0]),r[i]😮;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]😒[n]);for(u&&u(e);c.length😉c.shift()()}var n={},r={1😮};function i(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(t){var e😦],n=r[t];if(0!==n)if(n)e.push(n[2]);else{var o=new Promise(function(e,i){n=r[t👿e,i]});e.push(n[2]😮);var s,a=document.getElementsByTagName(\"head\")[0],u=document.createElement(\"script\");u.charset=\"utf-8\",u.timeout=120,i.nc&&u.setAttribute(\"nonce\",i.nc),u.src=function(t){return i.p+\"js/\"+({0:\"moment~timeline~tweet\",2:\"dm_button\",3:\"button\",4:\"moment\",5:\"periscope_on_air\",6:\"timeline\",7:\"tweet\"}[t]||t)+\".\"+{0:\"a20574004ea824b1c047f200045ffa1e\",2:\"b573518d7182437fcff1973b0098d272\",3:\"509719336ca39171c37a321231ccaf83\",4:\"f261877d67dc45f3972d303d6b32c138\",5:\"04369ab165b401d73b183f97ed7153fd\",6:\"49693ebcd57b08708ebca7502c7c343d\",7:\"73b7ab8a56ad3263cad8d36ba66467fc\"}[t]+\".js\"}(t),s=function(e){u.onerror=u.onload=null,clearTimeout(c);var n=r[t];if(0!==n){if(n){var i=e&&(\"load\"===e.type?\"missing\":e.type),o=e&&e.target&&e.target.src,s=new Error(\"Loading chunk \"+t+\" failed.\\n(\"+i+\": \"+o+\")\");s.type=i,s.request😮,n[1](s)}r[t]=void 0}};var c=setTimeout(function(){s({type:\"timeout\",target:u})},12e4);u.onerror=u.onload😒,a.appendChild(u)}return Promise.all(e)},i.m=t,i.c=n,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,\"a\",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p=\"https://platform.twitter.com/\",i.oe=function(t){throw console.error(t),t};var o=window.__twttrll=window.__twttrll||[],s😮.push.bind(o);o.push=e,o😮.slice();for(var a😮;a<o.length;a++)e(o[a]);var u😒;i(i.s=91)}([function(t,e,n){var r=n(1);function i(t,e){var n;for(n in t)t.hasOwnProperty&&!t.hasOwnProperty(n)||e(n,t[n]);return t}function o(t){return{}.toString.call(t).match(/\\s([a-zA-Z]+)/)[1].toLowerCase()}function s(t){return t===Object(t)}function a(t){var e;if(!s(t))return!1;if(Object.keys)return!Object.keys(t).length;for(e in t)if(t.hasOwnProperty(e))return!1;return!0}function u(t){return t?Array.prototype.slice.call(t)😦]}t.exports={aug:function(t){return u(arguments).slice(1).forEach(function(e){i(e,function(e,n){t[e]=n})}),t},async:function(t,e){r.setTimeout(function(){t.call(e||null)},0)},compact:function t(e){return i(e,function(n,r){s(r)&&(t(r),a(r)&&delete e[n]),void 0!==r&&null!==r&&\"\"!==r||delete e[n]}),e},contains:function(t,e){return!(!t||!t.indexOf)&&t.indexOf(e)>-1},forIn:i,isObject😒,isEmptyObject:a,toType😮,isType:function(t,e){return t==o(e)},toRealArray:u}},function(t,e){t.exports=window},function(t,e,n){var r=n(6);t.exports=function(){var t=this;this.promise=new r(function(e,n){t.resolve=e,t.reject=n})}},function(t,e,n){var r=n(11),i😕(?:^|(?:https?😃?\\/\\/(?:www\\.)?twitter\\.com(?::\\d+)?(?😕/intent\\/(?:follow|user)\\/?\\?screen_name😐(?😕/#!)?\\/))@?([\\w]+)(?😕?|&|$)/i,o😕(?:^|(?:https?😃?\\/\\/(?:www\\.)?twitter\\.com(?::\\d+)?\\/(?:#!\\/)?[\\w_]+\\/status(?:es)?\\/)(\\d+)/i,s😕^http(s?)😕/\\/(\\w+\\.)*twitter\\.com([😕]|$)/i,a😕^http(s?)😕/\\/pbs\\.twimg\\.com\\//,u😕^#?([^.,<>!\\s/#\\-()'\"]+)$/,c😕twitter\\.com(?::\\d{2,4})?\\/intent\\/(\\w+)/,d😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/\\w+\\/timelines\\/(\\d+)/i,l😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/i\\/moments\\/(\\d+)/i,f😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/(\\w+)\\/(?:likes|favorites)/i,h😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/(\\w+)\\/lists\\/([\\w-%]+)/i,p😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/i\\/live\\/(\\d+)/i,m😕^https?😕/\\/syndication\\.twitter\\.com\\/settings/i,v😕^https?😕/\\/(localhost|platform)\\.twitter\\.com(?::\\d+)?\\/widgets\\/widget_iframe\\.(.+)/i,g😕^https?😕/\\/(?:www\\.)?twitter\\.com\\/search\\?q😦\\w+)/i;function w(t){return\"string\"==typeof t&&i.test(t)&&RegExp.$1.length<=20}function y(t){if(w(t))return RegExp.$1}function b(t,e){var n=r.decodeURL(t);if(e=e||!1,n.screen_name=y(t),n.screen_name)return r.url(\"https://twitter.com/intent/\"+(e?\"follow\":\"user\"),n)}function _(t){return\"string\"==typeof t&&u.test(t)}function E(t){return\"string\"==typeof t&&o.test(t)}t.exports={isHashTag:_,hashTag:function(t,e){if(e=void 0===e||e,_(t))return(e?\"#\":\"\")+RegExp.$1},isScreenName:w,screenName:y,isStatus:E,status:function(t){return E(t)&&RegExp.$1},intentForProfileURL:b,intentForFollowURL:function(t){return b(t,!0)},isTwitterURL:function(t){return s.test(t)},isTwimgURL:function(t){return a.test(t)},isIntentURL:function(t){return c.test(t)},isSettingsURL:function(t){return m.test(t)},isWidgetIframeURL:function(t){return v.test(t)},isSearchUrl:function(t){return g.test(t)},regexen:{profile:i},momentId:function(t){return l.test(t)&&RegExp.$1},collectionId:function(t){return d.test(t)&&RegExp.$1},intentType:function(t){return c.test(t)&&RegExp.$1},likesScreenName:function(t){return f.test(t)&&RegExp.$1},listScreenNameAndSlug:function(t){var e,n,r;if(h.test(t)){e=RegExp.$1,n=RegExp.$2;try{r=decodeURIComponent(n)}catch(t){}return{ownerScreenName:e,slug:r||n}}return!1},eventId:function(t){return p.test(t)&&RegExp.$1}}},function(t,e,n){var r=n(0),i😦!0,1,\"1\",\"on\",\"ON\",\"true\",\"TRUE\",\"yes\",\"YES\"],o😦!1,0,\"0\",\"off\",\"OFF\",\"false\",\"FALSE\",\"no\",\"NO\"];function s(t){return void 0!==t&&null!==t&&\"\"!==t}function a(t){return c(t)&&t%1==0}function u(t){return c(t)&&!a(t)}function c(t){return s(t)&&!isNaN(t)}function d(t){return r.contains(o,t)}function l(t){return r.contains(i,t)}t.exports={hasValue😒,isInt:a,isFloat:u,isNumber:c,isString:function(t){return\"string\"===r.toType(t)},isArray:function(t){return s(t)&&\"array\"==r.toType(t)},isTruthValue:l,isFalseValue😛,asInt:function(t){if(a(t))return parseInt(t,10)},asFloat:function(t){if(u(t))return t},asNumber:function(t){if(c(t))return t},asBoolean:function(t){return!(!s(t)||!l(t)&&(d(t)||!t))}}},function(t,e){t.exports=document},function(t,e,n){var r=n(1),i=n(20),o=n(45);i.hasPromiseSupport()||(r.Promise😮),t.exports=r.Promise},function(t,e,n){var r=n(0);t.exports=function(t,e){var n=Array.prototype.slice.call(arguments,2);return function(){var i=r.toRealArray(arguments);return t.apply(e,n.concat(i))}}},function(t,e){t.exports=location},function(t,e,n){var r=n(47);t.exports=new r(\"__twttr\")},function(t,e,n){var r=n(0),i😕\\b([\\w-_]+)\\b/g;function o(t){return new RegExp(\"\\\\b\"+t+\"\\\\b\",\"g\")}function s(t,e){t.classList?t.classList.add(e)😮(e).test(t.className)||(t.className+=\" \"+e)}function a(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(o(e),\" \")}function u(t,e){return t.classList?t.classList.contains(e):r.contains(c(t),e)}function c(t){return r.toRealArray(t.classList?t.classList:t.className.match(i))}t.exports={add😒,remove:a,replace:function(t,e,n){if(t.classList&&u(t,e))return a(t,e),void s(t,n);t.className=t.className.replace(o(e),n)},toggle:function(t,e,n){return void 0===n&&t.classList&&t.classList.toggle?t.classList.toggle(e,n)😦n?s(t,e):a(t,e),n)},present:u,list:c}},function(t,e,n){var r=n(4),i=n(0);function o(t){return encodeURIComponent(t).replace(/\\+/g,\"%2B\").replace(/'/g,\"%27\")}function s(t){return decodeURIComponent(t)}function a(t){var e😦];return i.forIn(t,function(t,n){var s😮(t);i.isType(\"array\",n)||(n😦n]),n.forEach(function(t){r.hasValue(t)&&e.push(s+\"=\"+o(t))})}),e.sort().join(\"&\")}function u(t){var e={};return t?(t.split(\"&\").forEach(function(t){var n=t.split(\"😊,r😒(n[0]),o😒(n[1]);if(2==n.length){if(!i.isType(\"array\",e[r]))return r in e?(e[r👿e[r]],void e[r].push(o)):void(e[r]😮);e[r].push(o)}}),e):{}}t.exports={url:function(t,e){return a(e).length>0?i.contains(t,\"?\")?t+\"&\"+a(e):t+\"?\"+a(e):t},decodeURL:function(t){var e=t&&t.split(\"?\");return 2==e.length?u(e[1]):{}},decode:u,encode:a,encodePart😮,decodePart😒}},function(t,e,n){var r=n(😎,i=n(1),o=n(0),s={},a😮.contains(r.href,\"tw_debug=true\");function u(){}function c(){}function d(){return i.performance&&+i.performance.now()||+new Date}function l(t,e){if(i.console&&i.console[t])switch(e.length){case 1:i.console[t](e[0]);break;case 2:i.console[t](e[0],e[1]);break;case 3:i.console[t](e[0],e[1],e[2]);break;case 4:i.console[t](e[0],e[1],e[2],e[3]);break;case 5:i.console[t](e[0],e[1],e[2],e[3],e[4]);break;default😮!==e.length&&i.console.warn&&i.console.warn(\"too many params passed to logger.\"+t)}}t.exports={devError:u,devInfo:c,devObject:function(t,e){},publicError:function(){l(\"error\",o.toRealArray(arguments))},publicLog:function(){l(\"info\",o.toRealArray(arguments))},time:function(t){a&&(s[t]😛())},timeEnd:function(t){a&&s[t]&&(d(),s[t])}}},function(t,e,n){var r=n(19),i=n(4),o=n(11),s=n(0),a=n(116);t.exports=function(t){var e=t.href&&t.href.split(\"?\")[1],n=e?o.decode(e):{},u={lang:a(t),width:t.getAttribute(\"data-width\")||t.getAttribute(\"width\"),height:t.getAttribute(\"data-height\")||t.getAttribute(\"height\"),related:t.getAttribute(\"data-related\"),partner:t.getAttribute(\"data-partner\")};return i.asBoolean(t.getAttribute(\"data-dnt\"))&&r.setOn(),s.forIn(u,function(t,e){var r=n[t];n[t]=i.hasValue(r)?r:e}),s.compact(n)}},function(t,e,n){var r=n(79),i=n(22);t.exports=function(){var t=\"data-twitter-extracted-\"+i.generate();return function(e,n){return r(e,n).filter(function(e){return!e.hasAttribute(t)}).map(function(e){return e.setAttribute(t,\"true\"),e})}}},function(t,e){function n(t,e,n,r,i,o){this.factory=t,this.Sandbox=e,this.srcEl😮,this.targetEl=i,this.parameters=r,this.className=n}n.prototype.destroy=function(){this.srcEl=this.targetEl=null},t.exports=n},function(t,e,n){var r=n(6),i=n(49),o=n(19),s=n(4),a=n(0);t.exports=function(t,e,n){var u;return t=t||[],e=e||{},u=\"ƒ(\"+t.join(\", \")+\", target, [options]);\",function(){var c,d,l,f,h=Array.prototype.slice.apply(arguments,[0,t.length]),p=Array.prototype.slice.apply(arguments,[t.length]);return p.forEach(function(t){t&&(t.nodeType!==Node.ELEMENT_NODE?a.isType(\"function\",t)?c=t:a.isType(\"object\",t)&&(d=t):l=t)}),h.length!==t.length||0===p.length?(c&&a.async(function(){c(!1)}),r.reject(new Error(\"Not enough parameters. Expected: \"+u))):l?(d=a.aug({},d||{},e),t.forEach(function(t){d[t]=h.shift()}),s.asBoolean(d.dnt)&&o.setOn(),f=i.addWidget(n(d,l)),c&&f.then(c,function(){c(!1)}),f)😦c&&a.async(function(){c(!1)}),r.reject(new Error(\"No target element specified. Expected: \"+u)))}}},function(t,e,n){var r=n(99),i=n(2),o=n(0);function s(t,e){return function(){try{e.resolve(t.call(this))}catch(t){e.reject(t)}}}t.exports={sync:function(t,e){t.call(e)},read:function(t,e){var n=new i;return r.read(s(t,n),e),n.promise},write:function(t,e){var n=new i;return r.write(s(t,n),e),n.promise},defer:function(t,e,n){var a=new i;return o.isType(\"function\",t)&&(n=e,e=t,t=1),r.defer(t,s(e,a),n),a.promise}}},function(t,e,n){var r=n(9),i😦\"https://syndication.twitter.com\",\"https://cdn.syndication.twimg.com\",\"https://localhost.twitter.com:8444\"],o😦\"https://syndication.twitter.com\",\"https://localhost.twitter.com:8445\"],s=function(t,e){return t.indexOf(e)>-1},a=function(){var t=r.get(\"backendHost\");return t&&s(i,t)?t:\"https://cdn.syndication.twimg.com\"},u=function(){var t=r.get(\"settingsSvcHost\");return t&&s(o,t)?t:\"https://syndication.twitter.com\"};function c(t,e){var n😦t];return e.forEach(function(t){n.push(function(t){var e😦t||\"\").toString(),n=\"/\"===e.slice(0,1)?1😮,r=function(t){return\"/\"===t.slice(-1)}(e)?-1:void 0;return e.slice(n,r)}(t))}),n.join(\"/\")}t.exports={cookieConsent:function(t){var e=t||[];return e.unshift(\"cookie/consent\"),c(u(),e)},eventVideo:function(t){var e=t||[];return e.unshift(\"video/event\"),c(a(),e)},grid:function(t){var e=t||[];return e.unshift(\"grid/collection\"),c(a(),e)},moment:function(t){var e=t||[];return e.unshift(\"moments\"),c(a(),e)},settings:function(t){var e=t||[];return e.unshift(\"settings\"),c(u(),e)},timeline:function(t){var e=t||[];return e.unshift(\"timeline\"),c(a(),e)},tweetBatch:function(t){var e=t||[];return e.unshift(\"tweets.json\"),c(a(),e)},video:function(t){var e=t||[];return e.unshift(\"widgets/video\"),c(a(),e)}}},function(t,e,n){var r=n(5),i=n(😎,o=n(35),s=n(77),a=n(4),u=n(32),c=!1,d😕https?😕/\\/([^/]+).*/i;t.exports={setOn:function(){c=!0},enabled:function(t,e){return!!(c||a.asBoolean(u.val(\"dnt\"))||s.isUrlSensitive(e||i.host)||o.isFramed()&&s.isUrlSensitive(o.rootDocumentLocation())||(t😛.test(t||r.referrer)&&RegExp.$1)&&s.isUrlSensitive(t))}}},function(t,e,n){var r=n(5),i=n(12),o=n(92),s=n(1),a=n(0),u😮.userAgent;function c(t){return/(Trident|MSIE|Edge[/ ]?\\d)/.test(t=t||u)}t.exports={retina:function(t){return(t=t||s).devicePixelRatio?t.devicePixelRatio>=1.5:!!t.matchMedia&&t.matchMedia(\"only screen and (min-resolution: 144dpi)\").matches},anyIE:c,ie9:function(t){return/MSIE 9/.test(t=t||u)},ie10:function(t){return/MSIE 10/.test(t=t||u)},ios:function(t){return/(iPad|iPhone|iPod)/.test(t=t||u)},android:function(t){return/^Mozilla\\/5\\.0 \\(Linux; (U; )?Android/.test(t=t||u)},canPostMessage:function(t,e){return t=t||s,e=e||u,t.postMessage&&!(c(e)&&t.opener)},touch:function(t,e,n){return t=t||s,e=e||o,n=n||u,\"ontouchstart\"in t||/Opera Mini/.test(n)||e.msMaxTouchPoints>0},cssTransitions:function(){var t=r.body.style;return void 0!==t.transition||void 0!==t.webkitTransition||void 0!==t.mozTransition||void 0!==t.oTransition||void 0!==t.msTransition},hasPromiseSupport:function(){return!!(s.Promise&&s.Promise.resolve&&s.Promise.reject&&s.Promise.all&&s.Promise.race&&(new s.Promise(function(e){t=e}),a.isType(\"function\",t)));var t},hasIntersectionObserverSupport:function(){return!!s.IntersectionObserver},hasPerformanceInformation:function(){return s.performance&&s.performance.getEntriesByType},hasLocalStorageSupport:function(){try{return s.localStorage.setItem(\"local_storage_support_test\",\"true\"),void 0!==s.localStorage}catch(t){return i.devError(\"window.localStorage is not supported:\",t),!1}}}},function(t,e,n){var r=n(6),i=n(2);function o(t,e){return t.then(e,e)}function s(t){return t instanceof r}t.exports={always😮,allResolved:function(t){var e;return void 0===t?r.reject(new Error(\"undefined is not an object\")):Array.isArray(t)?(e=t.length)?new r(function(n,r){var i😮,o😦];function a(){(i+=1)===e&&(0===o.length?r():n(o))}function u(t){o.push(t),a()}t.forEach(function(t){s(t)?t.then(u,a):u(t)})}):r.resolve([]):r.reject(new Error(\"Type error\"))},some:function(t){var e;return e😦t=t||[]).length,t=t.filter(s),e?e!==t.length?r.reject(\"non-Promise passed to .some\"):new r(function(e,n){var r😮;function i(){(r+=1)===t.length&&n()}t.forEach(function(t){t.then(e,i)})}):r.reject(\"no promises passed to .some\")},isPromise😒,allSettled:function(t){function e(){}return r.all((t||[]).map(function(t){return o(t,e)}))},timeout:function(t,e){var n=new i;return setTimeout(function(){n.reject(new Error(\"Promise timed out\"))},e),t.then(function(t){n.resolve(t)},function(t){n.reject(t)}),n.promise}}},function(t,e){var n=\"i\",r😮,i😮;t.exports={generate:function(){return n+String(+new Date)+Math.floor(1e5*Math.random())+r++},deterministic:function(){return n+String(i++)}}},function(t,e,n){var r=n(46),i=n(48),o=n(0);t.exports😮.aug(r.get(\"events\")||{},i.Emitter)},function(t,e,n){var r=n(25),i=n(107);t.exports=r.build([i])},function(t,e,n){var r=n(37),i=n(104),o=n(7);(r=Object.create(r)).build😮(r.build,null,i),t.exports=r},function(t,e,n){var r=n(37),i=n(38),o=n(7);(r=Object.create(r)).build😮(r.build,null,i),t.exports=r},function(t,e,n){var r=n(81),i=n(73),o=n(82),s=n(😎,a=n(68),u=n(72),c=n(19),d=n(4),l=n(22),f=n(0);function h(t){if(!t||!t.headers)throw new Error(\"unexpected response schema\");return{html:t.body,config:t.config,pollInterval:1e3*parseInt(t.headers.xPolling,10)||null,maxCursorPosition:t.headers.maxPosition,minCursorPosition:t.headers.minPosition}}function p(t){if(t&&t.headers)throw new Error(t.headers.status);throw t instanceof Error?t:new Error(t)}t.exports=function(t){t.params({instanceId:{required:!0,fallback:l.deterministic},lang:{required:!0,transform:a.matchLanguage,fallback:\"en\"},tweetLimit:{transform😛.asInt}}),t.defineProperty(\"endpoint\",{get:function(){throw new Error(\"endpoint not specified\")}}),t.defineProperty(\"pollEndpoint\",{get:function(){return this.endpoint}}),t.define(\"cbId\",function(t){var e=t?\"_new\":\"_old\";return\"tl_\"+this.params.instanceId+\"_\"+this.id+e}),t.define(\"queryParams\",function(){return{lang:this.params.lang,tz:u.getTimezoneOffset(),t:r(),domain😒.host,tweet_limit:this.params.tweetLimit,dnt:c.enabled()}}),t.define(\"fetch\",function(){return i.fetch(this.endpoint,this.queryParams(),o,this.cbId()).then(h,p)}),t.define(\"poll\",function(t,e){var n,r;return n={since_id😦t=t||{}).sinceId,max_id:t.maxId,min_position:t.minPosition,max_position:t.maxPosition},r=f.aug(this.queryParams(),n),i.fetch(this.pollEndpoint,r,o,this.cbId(e)).then(h,p)})}},function(t,e,n){var r=n(48).makeEmitter();t.exports={emitter:r,START:\"start\",ALL_WIDGETS_RENDER_START:\"all_widgets_render_start\",ALL_WIDGETS_RENDER_END:\"all_widgets_render_end\",ALL_WIDGETS_AND_IMAGES_LOADED:\"all_widgets_and_images_loaded\"}},function(t,e,n){var r=n(5),i=n(0);t.exports=function(t,e,n){var o;if(n=n||r,t=t||{},e=e||{},t.name){try{o=n.createElement('<iframe name=\"'+t.name+'\"></iframe>')}catch(e){(o=n.createElement(\"iframe\")).name=t.name}delete t.name}else o=n.createElement(\"iframe\");return t.id&&(o.id=t.id,delete t.id),o.allowtransparency=\"true\",o.scrolling=\"no\",o.setAttribute(\"frameBorder\",0),o.setAttribute(\"allowTransparency\",!0),i.forIn(t,function(t,e){o.setAttribute(t,e)}),i.forIn(e,function(t,e){o.style[t]=e}),o}},function(t,e,n){var r=n(1).JSON;t.exports={stringify:r.stringify||r.encode,parse:r.parse||r.decode}},function(t,e,n){var r=n(0),i=n(40);t.exports={closest:function t(e,n,o){var s;if(n)return o😮||n&&n.ownerDocument,s=r.isType(\"function\",e)?e:function(t){return function(e){return!!e.tagName&&i(e,t)}}(e),n===o?s(n)?n:void 0😒(n)?n:t(s,n.parentNode,o)}}},function(t,e,n){var r,i=n(5);function o(t){var e,n,o,s😮;for(r={},e😦t=t||i).getElementsByTagName(\"meta\");e[s];s++){if(n=e[s],/^twitter😕.test(n.getAttribute(\"name\")))o=n.getAttribute(\"name\").replace(/^twitter😕,\"\");else{if(!/^twitter😕.test(n.getAttribute(\"property\")))continue;o=n.getAttribute(\"property\").replace(/^twitter😕,\"\")}r[o]=n.getAttribute(\"content\")||n.getAttribute(\"value\")}}o(),t.exports={init😮,val:function(t){return r[t]}}},function(t,e,n){var r=n(5),i=n(30),o=n(19),s=n(0),a=n(41),u=n(9),c=n(3),d=n(31),l=a.version,f=u.get(\"clientEventEndpoint\")||\"https://syndication.twitter.com/i/jot\",h=1;function p(t){return s.aug({client:\"tfw\"},t||{})}function m(t,e,n){return e=e||{},s.aug({},e,{_category_:t,triggered_on:e.triggered_on||+new Date,dnt😮.enabled(n)})}t.exports={extractTermsFromDOM:function t(e,n){var r;return n=n||{},e&&e.nodeType===Node.ELEMENT_NODE?((r=e.getAttribute(\"data-scribe\"))&&r.split(\" \").forEach(function(t){var e=t.trim().split(\"😊,r=e[0],i=e[1];r&&i&&!n[r]&&(n[r]=i)}),t(e.parentNode,n)):n},clickEventElement:function(t){var e😛.closest(\"[data-expanded-url]\",t),n=e&&e.getAttribute(\"data-expanded-url\");return n&&c.isTwitterURL(n)?\"twitter_url\":\"url\"},flattenClientEventPayload:function(t,e){return s.aug({},e,{event_namespace:t})},formatGenericEventData:m,formatClientEventData:function(t,e,n){var i=t&&t.widget_origin||r.referrer;return(t=m(\"tfw_client_event\",t,i)).client_version=l,t.format_version=void 0!==n?n:1,e||(t.widget_origin=i),t},formatClientEventNamespace😛,formatTweetAssociation:function(t,e){var n={};return(e=e||{}).association_namespace😛(t),n[h]=e,n},noticeSeen:function(t){return\"notice\"===t.element&&\"seen\"===t.action},splitLogEntry:function(t){var e,n,r,i,o;return t.item_ids&&t.item_ids.length>1?(e=Math.floor(t.item_ids.length/2),n=t.item_ids.slice(0,e),r={},i=t.item_ids.slice(e),o={},n.forEach(function(e){r[e]=t.item_details[e]}),i.forEach(function(e){o[e]=t.item_details[e]}),[s.aug({},t,{item_ids:n,item_details:r}),s.aug({},t,{item_ids:i,item_details😮})])😦t]},stringify:function(t){var e,n=Array.prototype.toJSON;return delete Array.prototype.toJSON,e=i.stringify(t),n&&(Array.prototype.toJSON=n),e},AUDIENCE_ENDPOINT:\"https://syndication.twitter.com/i/jot/syndication\",CLIENT_EVENT_ENDPOINT:f,RUFOUS_REDIRECT:\"https://platform.twitter.com/jot.html\"}},function(t,e,n){var r=n(10),i={},o=-1,s={};function a(t){var e=t.getAttribute(\"data-twitter-event-id\");return e||(t.setAttribute(\"data-twitter-event-id\",++o),o)}function u(t,e,n){var r😮,i=t&&t.length||0;for(r😮;r<i;r++)if(t[r].call(e,n,e),n.ceaseImmediately)return!1}function c(t,e,n){for(var i=n||t.target||t.srcElement,o=r.list(i).map(function(t){return\".\"+t}).concat(i.tagName),s😮,a😮.length;s<a;s++)if(!1===u(e[o[s]],i,t))return;t.cease||i!==this&&c.call(this,t,e,i.parentElement||i.parentNode)}function d(t,e,n,r){function i(r){c.call(t,r,n[e])}!function(t,e,n,r){t.id&&(s[t.id]😒[t.id]||[],s[t.id].push({el:t,listener:e,type:n,rootId:r}))}(t,i,e,r),t.addEventListener(e,i,!1)}function l(t){t&&t.preventDefault?t.preventDefault():t.returnValue=!1}function f(t){t&&(t.cease=!0)&&t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}t.exports={stop:function(t){return f(t),l(t),!1},stopPropagation:f,stopImmediatePropagation:function(t){t&&(t.ceaseImmediately=!0,f(t),t.stopImmediatePropagation())},preventDefault:l,delegate:function(t,e,n,r){var o=a(t);i[o]=i[o]||{},i[o][e]||(i[o][e]={},d(t,e,i[o],o)),i[o][e][n]=i[o][e][n]||[],i[o][e][n].push(r)},simulate:function(t,e,n){var r=a(e),o=i[r]&&i[r];c.call(e,{target:n},o[t])},removeDelegatesForWidget:function(t){var e😒[t];e&&(e.forEach(function(t){t.el.removeEventListener(t.type,t.listener,!1),delete i[t.rootId]}),delete s[t])}}},function(t,e,n){var r=n(😎,i=n(76),o=n(0),s=i.getCanonicalURL()||r.href,a😒;t.exports={isFramed:function(){return s!==a},rootDocumentLocation:function(t){return t&&o.isType(\"string\",t)&&(s=t),s},currentDocumentLocation:function(){return a}}},function(t,e,n){var r=n(75),i=n(101),o=n(78),s=n(33),a=new(n(109))(function(t){var e,n,a;if(0!==t.length){if(u(t))return c(t);e=r(t,function(t){return s.noticeSeen(t.input.namespace)}),n=e.true,a=e.false,n&&n.length>0&&(n=n.slice(0,1),o.canFlushOneItem(n[0])||(n[0].input.data.message=\"\"),c(n)),a&&(u(a)?c:function(t){i.init(),t.forEach(function(t){var e=t.input.namespace,n=t.input.data,r=t.input.offsite,o=t.input.version;i.clientEvent(e,n,r,o)}),i.flush().then(function(){t.forEach(function(t){t.taskDoneDeferred.resolve()})},function(){t.forEach(function(t){t.taskDoneDeferred.reject()})})})(a)}});function u(t){return 1===t.length&&o.canFlushOneItem(t[0])}function c(t){t.forEach(function(t){var e=t.input.namespace,n=t.input.data,r=t.input.offsite,i=t.input.version;o.clientEvent(e,n,r,i),t.taskDoneDeferred.resolve()})}t.exports={scribe:function(t,e,n,r){return a.add({namespace:t,data:e,offsite:n,version:r})},pause:function(){a.pause()},resume:function(){a.resume()}}},function(t,e,n){var r=n(102),i=n(103),o=n(0);t.exports={couple:function(){return o.toRealArray(arguments)},build:function(t,e,n){var o=new t;return(e=i(r(e||[]))).forEach(function(t){t.call(null,o)}),o.build(n)}}},function(t,e,n){var r=n(105),i=n(0),o=n(39);function s(){this.Component=this.factory(),this._adviceArgs😦],this._lastArgs😦]}i.aug(s.prototype,{factory😮,build:function(t){var e=this;return this.Component,i.aug(this.Component.prototype.boundParams,t),this._adviceArgs.concat(this._lastArgs).forEach(function(t){(function(t,e,n){var r=this[e];if(!r)throw new Error(e+\" does not exist\");this[e]=t(r,n)}).apply(e.Component.prototype,t)}),delete this._lastArgs,delete this._adviceArgs,this.Component},params:function(t){var e=this.Component.prototype.paramConfigs;t=t||{},this.Component.prototype.paramConfigs=i.aug({},t,e)},define:function(t,e){if(t in this.Component.prototype)throw new Error(t+\" has previously been defined\");this.override(t,e)},defineStatic:function(t,e){this.Component[t]=e},override:function(t,e){this.Component.prototype[t]=e},defineProperty:function(t,e){if(t in this.Component.prototype)throw new Error(t+\" has previously been defined\");this.overrideProperty(t,e)},overrideProperty:function(t,e){var n=i.aug({configurable:!0},e);Object.defineProperty(this.Component.prototype,t,n)},before:function(t,e){this._adviceArgs.push([r.before,t,e])},after:function(t,e){this._adviceArgs.push([r.after,t,e])},around:function(t,e){this._adviceArgs.push([r.around,t,e])},last:function(t,e){this._lastArgs.push([r.after,t,e])}}),t.exports😒},function(t,e,n){var r=n(0);function i(){return!0}function o(t){return t}t.exports=function(){function t(t){var e=this;t=t||{},this.params=Object.keys(this.paramConfigs).reduce(function(n,s){var a😦],u=e.boundParams,c=e.paramConfigs[s],d=c.validate||i,l=c.transform||o;if(s in u&&a.push(u[s]),s in t&&a.push(t[s]),a=\"fallback\"in c?a.concat(c.fallback):a,n[s]=function(t,e,n){var i=null;return t.some(function(t){if(t=r.isType(\"function\",t)?t():t,e(t))return i=n(t),!0}),i}(a,d,l),c.required&&null==n[s])throw new Error(s+\" is a required parameter\");return n},{}),this.initialize()}return r.aug(t.prototype,{paramConfigs:{},boundParams:{},initialize:function(){}}),t}},function(t,e,n){var r=n(1).HTMLElement,i=r.prototype.matches||r.prototype.matchesSelector||r.prototype.webkitMatchesSelector||r.prototype.mozMatchesSelector||r.prototype.msMatchesSelector||r.prototype.oMatchesSelector;t.exports=function(t,e){if(i)return i.call(t,e)}},function(t){t.exports={version:\"7e980dd:1559715853415\"}},function(t,e,n){var r,i=n(10),o=n(5),s=n(1),a=n(32),u=n(50),c=n(4),d=n(22),l=\"csptest\";t.exports={inlineStyle:function(){var t=l+d.generate(),e😮.createElement(\"div\"),n😮.createElement(\"style\"),f=\".\"+t+\" { visibility: hidden; }\";return!!o.body&&(c.asBoolean(a.val(\"widgets:csp\"))&&(r=!1),void 0!==r?r😦e.style.display=\"none\",i.add(e,t),n.type=\"text/css\",n.appendChild(o.createTextNode(f)),o.body.appendChild(n),o.body.appendChild(e),r=\"hidden\"===s.getComputedStyle(e).visibility,u(e),u(n),r))}}},function(t,e,n){var r=n(1);t.exports=function(t,e,n){var i,o😮;return n=n||null,function s(){var a=n||this,u=arguments,c=+new Date;if(r.clearTimeout(i),c-o>e)return o=c,void t.apply(a,u);i=r.setTimeout(function(){s.apply(a,u)},e)}}},function(t,e){t.exports=function(t){var e=t.getBoundingClientRect();return{width:e.width,height:e.height}}},function(t,e,n){",
            "/*!",
            " * @overview es6-promise - a tiny implementation of Promises/A+.",
            " * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)",
            " * @license   Licensed under MIT license",
            " *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE",
            " * @version   v4.2.5+7f2b526d",
            " */var r;r=function(){\"use strict\";function t(t){return\"function\"==typeof t}var e=Array.isArray?Array.isArray:function(t){return\"[object Array]\"===Object.prototype.toString.call(t)},n😮,r=void 0,i=void 0,o=function(t,e){f[n]=t,f[n+1]=e,2===(n+=2)&&(i?i(h):w())},s=\"undefined\"!=typeof window?window:void 0,a😒||{},u=a.MutationObserver||a.WebKitMutationObserver,c=\"undefined\"==typeof self&&\"undefined\"!=typeof process&&\"[object process]\"==={}.toString.call(process),d=\"undefined\"!=typeof Uint8ClampedArray&&\"undefined\"!=typeof importScripts&&\"undefined\"!=typeof MessageChannel;function l(){var t=setTimeout;return function(){return t(h,1)}}var f=new Array(1e3);function h(){for(var t😮;t<n;t+=2)(0,f[t])(f[t+1]),f[t]=void 0,f[t+1]=void 0;n😮}var p,m,v,g,w=void 0;function y(t,e){var n=this,r=new this.constructor(E);void 0===r[_]&&k(r);var i=n._state;if(i){var s=arguments[i-1];o(function(){return O(i,r,s,n._result)})}else I(n,r,t,e);return r}function b(t){if(t&&\"object\"==typeof t&&t.constructor===this)return t;var e=new this(E);return N(e,t),e}c?w=function(){return process.nextTick(h)}:u?(m😮,v=new u(h),g=document.createTextNode(\"\"),v.observe(g,{characterData:!0}),w=function(){g.data=m=++m%2})😛?((p=new MessageChannel).port1.onmessage=h,w=function(){return p.port2.postMessage(0)}):w=void 0===s?function(){try{var t=Function(\"return this\")().require(\"vertx\");return void 0!==(r=t.runOnLoop||t.runOnContext)?function(){r(h)}:l()}catch(t){return l()}}():l();var _=Math.random().toString(36).substring(2);function E(){}var x=void 0,A=1,T=2,S={error:null};function R(t){try{return t.then}catch(t){return S.error=t,S}}function C(e,n,r){n.constructor===e.constructor&&r===y&&n.constructor.resolve===b?function(t,e){e._state===A?j(t,e._result):e._state===T?L(t,e._result):I(e,void 0,function(e){return N(t,e)},function(e){return L(t,e)})}(e,n):r===S?(L(e,S.error),S.error=null):void 0===r?j(e,n):t(r)?function(t,e,n){o(function(t){var r=!1,i=function(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}(n,e,function(n){r||(r=!0,e!==n?N(t,n):j(t,n))},function(e){r||(r=!0,L(t,e))},t._label);!r&&i&&(r=!0,L(t,i))},t)}(e,n,r):j(e,n)}function N(t,e){var n,r;t===e?L(t,new TypeError(\"You cannot resolve a promise with itself\"))😦r=typeof(n=e),null===n||\"object\"!==r&&\"function\"!==r?j(t,e):C(t,e,R(e)))}function P(t){t._onerror&&t._onerror(t._result),D(t)}function j(t,e){t._state===x&&(t._result=e,t._state=A,0!==t._subscribers.length&&o(D,t))}function L(t,e){t._state===x&&(t._state=T,t._result=e,o(P,t))}function I(t,e,n,r){var i=t._subscribers,s=i.length;t._onerror=null,i[s]=e,i[s+A]=n,i[s+T]=r,0===s&&t._state&&o(D,t)}function D(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,i=void 0,o=t._result,s😮;s<e.length;s+👨)r=e[s],i=e[s+n],r?O(n,r,i,o):i(o);t._subscribers.length😮}}function O(e,n,r,i){var o=t(r),s=void 0,a=void 0,u=void 0,c=void 0;if(o){if((s=function(t,e){try{return t(e)}catch(t){return S.error=t,S}}(r,i))===S?(c=!0,a😒.error,s.error=null):u=!0,n===s)return void L(n,new TypeError(\"A promises callback cannot return that same promise.\"))}else s=i,u=!0;n._state!==x||(o&&u?N(n,s):c?L(n,a):e===A?j(n,s):e===T&&L(n,s))}var z😮;function k(t){t[_]😒++,t._state=void 0,t._result=void 0,t._subscribers😦]}var M=function(){function t(t,n){this._instanceConstructor=t,this.promise=new t(E),this.promise[_]||k(this.promise),e(n)?(this.length=n.length,this._remaining=n.length,this._result=new Array(this.length),0===this.length?j(this.promise,this._result)😦this.length=this.length||0,this._enumerate(n),0===this._remaining&&j(this.promise,this._result))):L(this.promise,new Error(\"Array Methods must be provided an Array\"))}return t.prototype._enumerate=function(t){for(var e😮;this._state===x&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===b){var i=R(t);if(i===y&&t._state!==😆this._settledAt(t._state,e,t._result);else if(\"function\"!=typeof i)this._remaining--,this._result[e]=t;else if(n===U){var o=new n(E);C(o,t,i),this._willSettleAt(o,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},t.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===x&&(this._remaining--,t===T?L(r,n):this._result[e]=n),0===this._remaining&&j(r,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;I(t,void 0,function(t){return n._settledAt(A,e,t)},function(t){return n._settledAt(T,e,t)})},t}(),U=function(){function e(t){this[_]😒++,this._result=this._state=void 0,this._subscribers😦],E!==t&&(\"function\"!=typeof t&&function(){throw new TypeError(\"You must pass a resolver function as the first argument to the promise constructor\")}(),this instanceof e?function(t,e){try{e(function(e){N(t,e)},function(e){L(t,e)})}catch(e){L(t,e)}}(this,t):function(){throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\")}())}return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.finally=function(e){var n=this.constructor;return t(e)?this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})}):this.then(e,e)},e}();return U.prototype.then=y,U.all=function(t){return new M(this,t).promise},U.race=function(t){var n=this;return e(t)?new n(function(e,r){for(var i=t.length,o😮;o<i;o++)n.resolve(t[o]).then(e,r)}):new n(function(t,e){return e(new TypeError(\"You must pass an array to race.\"))})},U.resolve=b,U.reject=function(t){var e=new this(E);return L(e,t),e},U._setScheduler=function(t){i=t},U._setAsap=function(t){o=t},U._asap😮,U.polyfill=function(){var t=void 0;if(\"undefined\"!=typeof global)t=global;else if(\"undefined\"!=typeof self)t=self;else try{t=Function(\"return this\")()}catch(t){throw new Error(\"polyfill failed because global object is unavailable in this environment\")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if(\"[object Promise]\"===n&&!e.cast)return}t.Promise=U},U.Promise=U,U},t.exports=r()},function(t,e,n){var r=n(47);t.exports=new r(\"twttr\")},function(t,e,n){var r=n(1),i=n(0);function o(t){return i.isType(\"string\",t)?t.split(\".\"):i.isType(\"array\",t)?t😦]}function s(t,e){(e=e||r)[t]=e[t]||{},Object.defineProperty(this,\"base\",{value:e[t]}),Object.defineProperty(this,\"name\",{value:t})}i.aug(s.prototype,{get:function(t){return o(t).reduce(function(t,e){if(i.isObject(t))return t[e]},this.base)},set:function(t,e,n){var r😮(t),s=function(t,e){var n😮(e).slice(0,-1);return n.reduce(function(t,e,r){if(t[e]=t[e]||{},!i.isObject(t[e]))throw new Error(n.slice(0,r+1).join(\".\")+\" is already defined with a value.\");return t[e]},t)}(this.base,t),a=r.slice(-1);return n&&a in s?s[a]😒[a]=e},init:function(t,e){return this.set(t,e,!0)},unset:function(t){var e😮(t),n=this.get(e.slice(0,-1));n&&delete n[e.slice(-1)]},aug:function(t){var e=this.get(t),n=i.toRealArray(arguments).slice(1);if(e=void 0!==e?e:{},n.unshift(e),!n.every(i.isObject))throw new Error(\"Cannot augment non-object.\");return this.set(t,i.aug.apply(null,n))},call:function(t){var e=this.get(t),n=i.toRealArray(arguments).slice(1);if(!i.isType(\"function\",e))throw new Error(\"Function \"+t+\"does not exist.\");return e.apply(null,n)},fullPath:function(t){var e😮(t);return e.unshift(this.name),e.join(\".\")}}),t.exports😒},function(t,e,n){var r=n(0),i=n(7),o={bind:function(t,e){return this._handlers=this._handlers||{},this._handlers[t]=this._handlers[t]||[],this._handlers[t].push(e)},unbind:function(t,e){var n;this._handlers&&this._handlers[t]&&(e?(n=this._handlers[t].indexOf(e))>😮&&this._handlers[t].splice(n,1):this._handlers[t👿])},trigger:function(t,e){var n=this._handlers&&this._handlers[t];(e=e||{}).type=t,n&&n.forEach(function(t){r.async(i(t,this,e))})}};t.exports={Emitter😮,makeEmitter:function(){return r.aug(function(){},o)}}},function(t,e,n){var r=n(98),i=n(74),o=n(6),s=n(21),a=n(7),u=n(0),c=new i(function(t){var e=function(t){return t.reduce(function(t,e){return t[e.className]=t[e.className]||[],t[e.className].push(e),t},{})}(t.map(r.fromRawTask));u.forIn(e,function(t,e){s.allSettled(e.map(function(t){return t.initialize()})).then(function(){e.forEach(function(t){o.all([t.hydrate(),t.insertIntoDom()]).then(a(t.render,t)).then(a(t.success,t),a(t.fail,t))})})})});t.exports={addWidget:function(t){return c.add(t)}}},function(t,e,n){var r=n(17);t.exports=function(t){return r.write(function(){t&&t.parentNode&&t.parentNode.removeChild(t)})}},function(t,e,n){n(12),t.exports={log:function(t,e){}}},function(t,e,n){var r=n(1);function i(t){return(t=t||r).getSelection&&t.getSelection()}t.exports={getSelection:i,getSelectedText:function(t){var e=i(t);return e?e.toString():\"\"}}},function(t,e,n){var r=n(5),i=n(1),o=n(2),s=2e4;t.exports=function(t){var e=new o,n=r.createElement(\"img\");return n.onload=n.onerror=function(){i.setTimeout(e.resolve,50)},n.src=t,i.setTimeout(e.reject,s),e.promise}},function(t,e,n){var r=n(108);t.exports=function(t){t.define(\"createElement\",r),t.define(\"createFragment\",r),t.define(\"htmlToElement\",r),t.define(\"hasSelectedText\",r),t.define(\"addRootClass\",r),t.define(\"removeRootClass\",r),t.define(\"hasRootClass\",r),t.define(\"prependStyleSheet\",r),t.define(\"appendStyleSheet\",r),t.define(\"prependCss\",r),t.define(\"appendCss\",r),t.define(\"makeVisible\",r),t.define(\"injectWidgetEl\",r),t.define(\"matchHeightToContent\",r),t.define(\"matchWidthToContent\",r)}},function(t,e){t.exports=function(t){var e,n=!1;return function(){return n?e😦n=!0,e=t.apply(this,arguments))}}},function(t,e,n){var r=n(15),i=n(117),o=n(57);t.exports=function(t,e,n){return new r(i,o,\"twitter-dm-button\",t,e,n)}},function(t,e,n){var r=n(58),i=n(24);t.exports=r.isSupported()?r:i},function(t,e,n){var r=n(25),i=n(118);t.exports=r.build([i])},function(t,e,n){var r=n(15),i=n(121),o=n(60);t.exports=function(t,e,n){return new r(i,o,\"twitter-follow-button\",t,e,n)}},function(t,e,n){var r=n(25),i=n(122);t.exports=r.build([i])},function(t,e,n){var r=n(15),i=n(129),o=n(24);t.exports=function(t,e,n){return new r(i,o,\"twitter-moment\",t,e,n)}},function(t,e,n){var r=n(15),i=n(131),o=n(24);t.exports=function(t,e,n){return new r(i,o,\"periscope-on-air\",t,e,n)}},function(t,e,n){var r=n(80),i=n(133),o=n(137),s=n(139),a=n(141),u=n(143),c={collection:i,event😮,likes😒,list:a,profile:u,url:l},d😦u,s,i,a,o];function l(t){return r(d,function(e){try{return new e(t)}catch(t){}})}t.exports=function(t){return t?function(t){var e,n;return e😦t.sourceType+\"\").toLowerCase(),(n=c[e])?new n(t):null}(t)||l(t):null}},function(t,e,n){var r=n(15),i=n(145),o=n(24);t.exports=function(t,e,n){return new r(i,o,\"twitter-timeline\",t,e,n)}},function(t,e,n){var r=n(15),i=n(147),o=n(57);t.exports=function(t,e,n){return new r(i,o,\"twitter-tweet\",t,e,n)}},function(t,e,n){var r=n(15),i=n(149),o=n(60);t.exports=function(t,e,n){var s=t&&t.type||\"share\";return new r(i,o,\"hashtag\"==s?\"twitter-hashtag-button\":\"mention\"==s?\"twitter-mention-button\":\"twitter-share-button\",t,e,n)}},function(t,e,n){var r=n(36),i=n(35),o=n(0);t.exports=function(t){var e={widget_origin:i.rootDocumentLocation(),widget_frame:i.isFramed()?i.currentDocumentLocation():null,duration_ms:t.duration,item_ids:t.widgetIds||[]},n😮.aug(t.namespace,{page:\"page\",component:\"performance\"});r.scribe(n,e)}},function(t,e,n){var r=n(0),i=n(134),o😦\"ar\",\"fa\",\"he\",\"ur\"];t.exports={isRtlLang:function(t){return t=String(t).toLowerCase(),r.contains(o,t)},matchLanguage:function(t){return t😦t😦t||\"\").toLowerCase()).replace(\"_\",\"-\"),i(t)?t😦t=t.replace(/-.*/,\"\"),i(t)?t:\"en\")}}},function(t,e,n){var r=n(110),i=n(113);function o(t){return r.settingsLoaded().then(function(e){return e[t]})}function s(){return o(\"experiments\")}t.exports={shouldObtainCookieConsent:function(){return o(\"shouldObtainCookieConsent\")},getExperiments😒,getExperiment:function(t){return s().then(function(e){if(!e[t])throw new Error(\"Experiment not found\");return e[t]})},getActiveExperimentDataString:function(){return s().then(function(t){var e=Object.keys(t).reduce(function(e,n){var r;return t[n].version&&(r=n.split(\"_\").slice(-1)[0],e.push(r+\";\"+t[n].bucket)),e},[]);return i(e.join(\",\"))})},getExperimentKeys:function(){return s().then(function(t){return Object.keys(t)})},load:function(){r.load()}}},function(t){t.exports={tweetButtonHtmlPath:\"/widgets/tweet_button.d753e00c3e838c1b2558149bd3f6ecb8.{{lang}}.html\",followButtonHtmlPath:\"/widgets/follow_button.d753e00c3e838c1b2558149bd3f6ecb8.{{lang}}.html\",hubHtmlPath:\"/widgets/hub.html\",widgetIframeHtmlPath:\"/widgets/widget_iframe.d753e00c3e838c1b2558149bd3f6ecb8.html\",resourceBaseUrl:\"https://platform.twitter.com\"}},function(t,e,n){var r=n(3),i=n(95),o=n(23),s=n(11),a={favorite😦\"favorite\",\"like\"],follow😦\"follow\"],like😦\"favorite\",\"like\"],retweet😦\"retweet\"],tweet😦\"tweet\"]};function u(t){this.srcEl😦],this.element=t}u.open=function(t,e,n){var u😦r.intentType(t)||\"\").toLowerCase();r.isTwitterURL(t)&&(function(t,e){i.open(t,{},e)}(t,n),e&&o.trigger(\"click\",{target:e,region:\"intent\",type:\"click\",data:{}}),e&&a[u]&&a[u].forEach(function(n){o.trigger(n,{target:e,region:\"intent\",type:n,data:function(t,e){var n😒.decodeURL(e);switch(t){case\"favorite\":case\"like\":return{tweet_id:n.tweet_id};case\"follow\":return{screen_name:n.screen_name,user_id:n.user_id};case\"retweet\":return{source_tweet_id:n.tweet_id};default:return{}}}(u,t)})}))},t.exports=u},function(t,e){t.exports={getTimezoneOffset:function(){var t😦new Date).toString().match(/(GMT[+-]?\\d+)/);return t&&t[0]||\"GMT\"}}},function(t,e,n){var r=n(5),i=n(9),o=n(2),s=n(0),a=n(11),u=\"cb\",c😮;t.exports={fetch:function(t,e,n,d){var l,f,h;return d=function(t){if(t)return t.replace(/[^\\w$]/g,\"_\")}(d||u+c++),l=i.fullPath([\"callbacks\",d]),f=r.createElement(\"script\"),h=new o,e😒.aug({},e,{callback:l,suppress_response_codes:!0}),i.set([\"callbacks\",d],function(t){var e;t😦e=n(t||!1)).resp,e.success?h.resolve(t):h.reject(t),f.onload=f.onreadystatechange=null,f.parentNode&&f.parentNode.removeChild(f),i.unset([\"callbacks\",d])}),f.onerror=function(){h.reject(new Error(\"failed to fetch \"+f.src))},f.src=a.url(t,e),f.async=\"async\",r.body.appendChild(f),h.promise}}},function(t,e,n){var r=n(2),i=n(100),o=n(7);function s(t){this._inputsQueue😦],this._task=t,this._hasFlushBeenScheduled=!1}s.prototype.add=function(t){var e=new r;return this._inputsQueue.push({input:t,taskDoneDeferred:e}),this._hasFlushBeenScheduled||(this._hasFlushBeenScheduled=!0,i(o(this._flush,this))),e.promise},s.prototype._flush=function(){try{this._task.call(null,this._inputsQueue)}catch(t){this._inputsQueue.forEach(function(e){e.taskDoneDeferred.reject(t)})}this._inputsQueue😦],this._hasFlushBeenScheduled=!1},t.exports😒},function(t,e){t.exports=function(t,e){return t.reduce(function(t,n){var r=e(n);return t[r]=t[r]||[],t[r].push(n),t},{})}},function(t,e,n){var r=n(5),i=n(😎,o=n(3);function s(t,e){var n,r;return e=e||i,/^https?😕/\\//.test(t)?t😕^\\/\\//.test(t)?e.protocol+t😦n=e.host+(e.port.length?\":\"+e.port:\"\"),0!==t.indexOf(\"/\")&&((r=e.pathname.split(\"/\")).pop(),r.push(t),t=\"/\"+r.join(\"/\")),[e.protocol,\"//\",n,t].join(\"\"))}t.exports={absolutize😒,getCanonicalURL:function(){for(var t,e=r.getElementsByTagName(\"link\"),n😮;e[n];n++)if(\"canonical\"==(t=e[n]).rel)return s(t.href)},getScreenNameFromPage:function(){for(var t,e,n,i😦r.getElementsByTagName(\"a\"),r.getElementsByTagName(\"link\")],s😮,a😮,u😕\\bme\\b/;t=i[s];s++)for(a😮;e=t[a];a++)if(u.test(e.rel)&&(n😮.screenName(e.href)))return n}}},function(t,e,n){var r=n(😎,i😕^[^#?]*\\.(gov|mil)(😕d+)?([#?].*)?$/i,o={};function s(t){return t in o?o[t]😮[t]=i.test(t)}t.exports={isUrlSensitive😒,isHostPageSensitive:function(){return s(r.host)}}},function(t,e,n){var r=n(19),i=n(51),o=n(11),s=n(33),a=n(0),u=n(9).get(\"scribeCallback\"),c=2083,d😦],l😮.url(s.CLIENT_EVENT_ENDPOINT,{dnt😮,l:\"\"}),f=encodeURIComponent(l).length;function h(t,e,n,r){var i=!a.isObject(t),o=!!e&&!a.isObject(e);i||o||(u&&u(arguments),p(s.formatClientEventNamespace(t),s.formatClientEventData(e,n,r),s.CLIENT_EVENT_ENDPOINT))}function p(t,e,n){var r,u;n&&a.isObject(t)&&a.isObject(e)&&(i.log(t,e),r😒.flattenClientEventPayload(t,e),u={l😒.stringify(r)},s.noticeSeen(t)&&(u.notice_seen=!0),r.dnt&&(u.dnt=1),w(o.url(n,u)))}function m(t,e,n,r){var i=!a.isObject(t),o=!!e&&!a.isObject(e);if(!i&&!o)return v(s.flattenClientEventPayload(s.formatClientEventNamespace(t),s.formatClientEventData(e,n,r)))}function v(t){return d.push(t),d}function g(t){return encodeURIComponent(t).length+3}function w(t){return(new Image).src=t}t.exports={canFlushOneItem:function(t){var e=g(s.stringify(t));return f+e<c},_enqueueRawObject:v,scribe😛,clientEvent:h,clientEvent2:function(t,e,n){return h(t,e,n,2)},enqueueClientEvent:m,flushClientEvents:function(){var t;return d.length>1&&m({page:\"widgets_js\",component:\"scribe_pixel\",action:\"batch_log\"},{}),t😛,d😦],t.reduce(function(e,n,r){var i=e.length,o=i&&e[i-1];return r+1==t.length&&n.event_namespace&&\"batch_log\"==n.event_namespace.action&&(n.message😦\"entries:\"+r,\"requests:\"+i].join(\"/\")),function t(e){return Array.isArray(e)||(e😦e]),e.reduce(function(e,n){var r,i😒.stringify(n),o=g(i);return f+o<c?e=e.concat(i)😦r😒.splitLogEntry(n)).length>1&&(e=e.concat(t(r))),e},[])}(n).forEach(function(t){var n=g(t);(!o||o.urlLength+n>c)&&(o={urlLength:f,items😦]},e.push(o)),o.urlLength+=n,o.items.push(t)}),e},[]).map(function(t){var e={l:t.items};return r.enabled()&&(e.dnt=1),w(o.url(s.CLIENT_EVENT_ENDPOINT,e))})},interaction:function(t,e,n,r){var i😒.extractTermsFromDOM(t.target||t.srcElement);i.action=r||\"click\",h(i,e,n)}}},function(t,e,n){var r=n(0),i=n(40);t.exports=function(t,e){return i(t,e)?[t]:r.toRealArray(t.querySelectorAll(e))}},function(t,e){t.exports=function(t,e,n){for(var r,i😮;i<t.length;i++)if(r=e.call(n,t[i],i,t))return r}},function(t,e){t.exports=function(){return Math.floor(+new Date/9e5)}},function(t,e,n){var r=n(12);t.exports=function(t){var e,n;return e=t.headers&&t.headers.status,!(n=t&&!t.error&&200===e)&&t.headers&&t.headers.message&&r.publicError(t.headers.message),{success:n,resp:t}}},function(t,e,n){var r,i=n(28),o😮;function s(){r&&r.length===o&&(i.emitter.trigger(i.ALL_WIDGETS_AND_IMAGES_LOADED,r),r=null)}i.emitter.bind(i.ALL_WIDGETS_RENDER_END,function(t){r=t.widgets,s()}),t.exports={reportImagesLoadForAWidget:function(){o++,s()}}},,,,,,,,function(t,e,n){var r,i=n(2),o=n(5),s=n(93),a=n(46),u=n(9),c=n(94),d=n(23),l=n(97),f=n(150),h=n(158),p=n(159),m=n(28);n(160),m.emitter.trigger(m.START),u.set(\"widgets.init\",!0),a.set(\"init\",!0),p(),r=new i,s.exposeReadyPromise(r.promise,a.base,\"_e\"),a.set(\"widgets\",f),a.set(\"widgets.load\",l.load),a.set(\"events\",d),h(function(){r.resolve(a.base),c.attachTo(o),l.loadPage()})},function(t,e){t.exports=navigator},function(t,e,n){var r=n(7);t.exports={exposeReadyPromise:function(t,e,n){e.ready=r(t.then,t),n&&Array.isArray(e[n])&&(e[n].forEach(r(t.then,t)),delete e[n])}}},function(t,e,n){var r=n(😎,i=n(34),o=n(31),s=n(71),a=n(3);function u(t){var e,n,u;t.altKey||t.metaKey||t.shiftKey||(e😮.closest(function(t){return\"A\"===t.tagName||\"AREA\"===t.tagName},t.target))&&a.isIntentURL(e.href)&&(n😦n😦n😦u=e.href,\"original_referer=\"+r.href].join(-1==u.indexOf(\"?\")?\"?\":\"&\")).replace(/^http[😃/,\"https:\")).replace(/^\\/\\//,\"https://\"),s.open(n,e),i.preventDefault(t))}t.exports={attachTo:function(t){t.addEventListener(\"click\",u,!1)}}},function(t,e,n){var r,i=n(1),o=n(96),s=n(34),a=n(31),u=n(20),c=n(3),d=n(22),l=n(0),f=\"intent_\",h=i.screen.width,p=i.screen.height;function m(t,e){function n(t){return Math.round(t/2)}return t>e?{coordinate😮,size:e}:{coordinate:n(e)-n(t),size:t}}function v(t,e,n){var i,o;e=r.parse(e),n=n||{},i=m(e.width,n.width||h),e.left=i.coordinate,e.width=i.size,o=m(e.height,n.height||p),e.top😮.coordinate,e.height😮.size,this.win=t,this.features=function(t){var e😦];return l.forIn(t,function(t,n){e.push(t+\"=\"+n)}),e.join(\",\")}(e)}r😦new o).defaults({width:550,height:520,personalbar:\"0\",toolbar:\"0\",location:\"1\",scrollbars:\"1\",resizable:\"1\"}),v.prototype.open=function(t,e){var n=e&&\"click\"==e.type&&a.closest(\"a\",e.target),r=e&&(e.altKey||e.metaKey||e.shiftKey),i=n&&(u.ios()||u.android());if(c.isTwitterURL(t))return r||i?this😦this.name=f+d.generate(),this.popup=this.win.open(t,this.name,this.features),e&&s.preventDefault(e),this)},v.open=function(t,e,n){return new v(i,e).open(t,n)},t.exports=v},function(t,e,n){var r=n(4),i=n(0);function o(){this.assertions😦],this._defaults={}}o.prototype.assert=function(t,e){return this.assertions.push({fn:t,msg:e||\"assertion failed\"}),this},o.prototype.defaults=function(t){return this._defaults=t||this._defaults,this},o.prototype.require=function(t){var e=this;return(t=Array.isArray(t)?t:i.toRealArray(arguments)).forEach(function(t){e.assert(function(t){return function(e){return r.hasValue(e[t])}}(t),\"required: \"+t)}),this},o.prototype.parse=function(t){var e,n;if(e=i.aug({},this._defaults,t||{}),(n=this.assertions.reduce(function(t,n){return n.fn(e)||t.push(n.msg),t},[])).length>0)throw new Error(n.join(\"\\n\"));return e},t.exports😮},function(t,e,n){var r=n(5),i=n(6),o=n(21),s=n(49),a=n(32),u=n(9),c=n(36),d=n(23),l=n(4),f=n(0),h=n(69),p=n(114),m=n(28);function v(){var t=a.val(\"widgets:autoload\")||!0;return!l.isFalseValue(t)&&(l.isTruthValue(t)?r.body:r.querySelectorAll(t))}function g(t){var e,n;return t😦t=t||r.body).length?f.toRealArray(t)😦t],c.pause(),n=t.reduce(function(t,e){return t.concat(p.reduce(function(t,n){return t.concat(n(e))},[]))},[]),m.emitter.trigger(m.ALL_WIDGETS_RENDER_START,{widgets:n}),e😮.allResolved(n.map(function(t){return s.addWidget(t)})).then(function(t){d.trigger(\"loaded\",{widgets:t}),t&&t.length&&m.emitter.trigger(m.ALL_WIDGETS_RENDER_END,{widgets:t})}),o.always(e,function(){c.resume()}),e}t.exports={load:g,loadPage:function(){var t=v();return h.load(),!1===t?i.resolve()😦u.set(\"widgets.loaded\",!0),g(t))},_getPageLoadTarget:v}},function(t,e,n){var r=n(10),i=n(17),o=n(23),s=n(50),a=n(6),u=n(21);function c(t,e){this._widget=null,this._sandbox=null,this._hydrated=!1,this._insertedIntoDom=!1,this._Sandbox=t.Sandbox,this._factory=t.factory,this._widgetParams=t.parameters,this._resolve=e,this._className=t.className,this._renderedClassName=t.className+\"-rendered\",this._errorClassName=t.className+\"-error\",this._srcEl=t.srcEl,this._targetGlobal=function(t){return(t.srcEl||t.targetEl).ownerDocument.defaultView}(t),this._insertionStrategy=function(e){var n=t.srcEl,r=t.targetEl;n?r.insertBefore(e,n):r.appendChild(e)}}c.fromRawTask=function(t){return new c(t.input,t.taskDoneDeferred.resolve)},c.prototype.initialize=function(){var t=this,e=new this._Sandbox(this._targetGlobal);return this._factory(this._widgetParams,e).then(function(n){return t._widget=n,t._sandbox=e,n})},c.prototype.insertIntoDom=function(){var t=this;return this._widget?this._sandbox.insert(this._widget.id,{class😦this._className,this._renderedClassName].join(\" \")},null,this._insertionStrategy).then(function(){t._insertedIntoDom=!0}):a.reject(new Error(\"cannot insert widget into DOM before it is initialized\"))},c.prototype.hydrate=function(){var t=this;return this._widget?this._widget.hydrate().then(function(){t._hydrated=!0}):a.reject(new Error(\"cannot hydrate widget before it is initialized\"))},c.prototype.render=function(){var t=this;function e(e){return s(t._sandbox.sandboxEl).then(function(){return a.reject(e)})}return this._hydrated?this._insertedIntoDom?t._widget.render(t._sandbox).then(function(){return t._sandbox.onResize(function(){return t._widget.resize().then(function(){o.trigger(\"resize\",{target:t._sandbox.sandboxEl})})}),t._widget.show()}).then(function(){return s(t._srcEl).then(function(){return t._sandbox.sandboxEl})},e):e(new Error(\"cannot render widget before DOM insertion\")):e(new Error(\"cannot render widget before hydration\"))},c.prototype.fail=function(){var t=this;return this._srcEl?u.always(i.write(function(){r.add(t._srcEl,t._errorClassName)}),function(){o.trigger(\"rendered\",{target:t._srcEl}),t._resolve(t._srcEl)})😦t._resolve(),a.resolve())},c.prototype.success=function(){o.trigger(\"rendered\",{target:this._sandbox.sandboxEl}),this._resolve(this._sandbox.sandboxEl)},t.exports=c},function(t,e,n){var r;!function(){\"use strict\";var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)};function o(){this.frames😦],this.lastId😮,this.raf=i,this.batch={hash:{},read😦],write😦],mode:null}}o.prototype.read=function(t,e){var n=this.add(\"read\",t,e),r=n.id;return this.batch.read.push(n.id),\"reading\"===this.batch.mode||this.batch.scheduled?r😦this.scheduleBatch(),r)},o.prototype.write=function(t,e){var n=this.add(\"write\",t,e),r=this.batch.mode,i=n.id;return this.batch.write.push(n.id),\"writing\"===r||\"reading\"===r||this.batch.scheduled?i😦this.scheduleBatch(),i)},o.prototype.defer=function(t,e,n){\"function\"==typeof t&&(n=e,e=t,t=1);var r=this,i=t-1;return this.schedule(i,function(){r.run({fn:e,ctx:n})})},o.prototype.clear=function(t){if(\"function\"==typeof t)return this.clearFrame(t);t=Number(t);var e=this.batch.hash[t];if(e){var n=this.batch[e.type],r=n.indexOf(t);delete this.batch.hash[t],~r&&n.splice(r,1)}},o.prototype.clearFrame=function(t){var e=this.frames.indexOf(t);~e&&this.frames.splice(e,1)},o.prototype.scheduleBatch=function(){var t=this;this.schedule(0,function(){t.batch.scheduled=!1,t.runBatch()}),this.batch.scheduled=!0},o.prototype.uniqueId=function(){return++this.lastId},o.prototype.flush=function(t){for(var e;e=t.shift()😉this.run(this.batch.hash[e])},o.prototype.runBatch=function(){try{this.batch.mode=\"reading\",this.flush(this.batch.read),this.batch.mode=\"writing\",this.flush(this.batch.write),this.batch.mode=null}catch(t){throw this.runBatch(),t}},o.prototype.add=function(t,e,n){var r=this.uniqueId();return this.batch.hash[r]={id:r,fn:e,ctx:n,type:t}},o.prototype.run=function(t){var e=t.ctx||this,n=t.fn;if(delete this.batch.hash[t.id],!this.onError)return n.call(e);try{n.call(e)}catch(t){this.onError(t)}},o.prototype.loop=function(){var t,e=this,n=this.raf,r=!1;function i(){var t=e.frames.shift();e.frames.length?n(i):e.looping=!1,t&&t()}this.looping||(t=setTimeout(function(){r=!0,i()},500),n(function(){r||(clearTimeout(t),i())}),this.looping=!0)},o.prototype.schedule=function(t,e){return this.frames[t]?this.schedule(t+1,e)😦this.loop(),this.frames[t]=e)};var s=new o;void 0!==t&&t.exports?t.exports😒:void 0===(r=function(){return s}.call(e,n,e,t))||(t.exports=r)}()},function(t,e,n){var r=n(45).Promise;t.exports=r._asap},function(t,e,n){var r,i,o,s=n(5),a=n(1),u=n(29),c=n(19),d=n(2),l=n(6),f=n(51),h=n(33),p=n(0),m=n(24),v=n(9).get(\"scribeCallback\"),g=Math.floor(1e3*Math.random())+\"_\",w=\"rufous-frame-\"+g+\"-\",y=\"rufous-form-\"+g+\"-\",b😮,_=!1,E=new d;function x(){var t😮.createElement(\"form\"),e😮.createElement(\"input\"),n😮.createElement(\"input\");return b++,t.action=h.CLIENT_EVENT_ENDPOINT,t.method=\"POST\",t.target=w+b,t.id=y+b,e.type=\"hidden\",e.name=\"dnt\",e.value=c.enabled(),n.type=\"hidden\",n.name=\"tfw_redirect\",n.value=h.RUFOUS_REDIRECT,t.appendChild(e),t.appendChild(n),t}function A(){var t=w+b;return u({id:t,name:t,width😮,height😮,border😮},{display:\"none\"},o.doc)}t.exports={clientEvent:function(t,e,n,i){(function(t,e){var n=!p.isObject(t),r=!!e&&!p.isObject(e),i=n||r;return i})(t,e)||(v&&v(arguments),E.promise.then(function(){!function(t,e){var n,i,s😜.isObject(t)&&p.isObject(e)&&(f.log(t,e),s=h.flattenClientEventPayload(t,e),(n=r.firstChild).value=+(+n.value||s.dnt||0),(i😮.createElement(\"input\")).type=\"hidden\",i.name=\"l\",i.value=h.stringify(s),r.appendChild(i))}(h.formatClientEventNamespace(t),h.formatClientEventData(e,n,i))}))},flush:function(){return E.promise.then(function(){var t;return r.children.length<=2?l.reject()😦t=l.all([o.doc.body.appendChild(r),o.doc.body.appendChild(i)]).then(function(t){var e=t[0],n=t[1];return n.addEventListener(\"load\",function(){!function(t,e){return function(){var n=t.parentNode;n&&(n.removeChild(t),n.removeChild(e))}}(e,n)()}),e.submit(),t}),r=x(),i=A(),t)})},init:function(){return _?E.promise:((o=new m(a)).insert(\"rufous-sandbox\",null,{display:\"none\"},function(t){s.body.appendChild(t)}).then(function(){o.setTitle(\"Twitter analytics iframe\"),r=x(),i=A(),E.resolve([r,i])}),_=!0,E.promise)}}},function(t,e,n){var r=n(0);t.exports=function t(e){var n😦];return e.forEach(function(e){var i=r.isType(\"array\",e)?t(e)😦e];n=n.concat(i)}),n}},function(t,e){t.exports=function(t){return t.filter(function(e,n){return t.indexOf(e)===n})}},function(t,e,n){var r=n(38),i=n(0),o=n(106);function s(){r.apply(this,arguments)}s.prototype=Object.create(r.prototype),i.aug(s.prototype,{factory😮}),t.exports😒},function(t,e,n){var r=n(21),i=n(0),o=n(7);t.exports={before:function(t,e){return function(){var n,i=this,o=arguments;return n=e.apply(this,arguments),r.isPromise(n)?n.then(function(){return t.apply(i,o)}):t.apply(this,arguments)}},after:function(t,e){return function(){var n,i=this,o=arguments;function s(t,e){return r.isPromise(e)?e.then(function(){return t}):t}return n=t.apply(this,arguments),r.isPromise(n)?n.then(function(t){return s(t,e.apply(i,o))})😒(n,e.apply(this,arguments))}},around:function(t,e){return function(){var n=i.toRealArray(arguments);return n.unshift(o(t,this)),e.apply(this,n)}}}},function(t,e,n){var r=n(10),i=n(17),o=n(39),s=n(6),a=n(0);t.exports=function(){var t😮();function e(e){t.apply(this,arguments),Object.defineProperty(this,\"targetGlobal\",{value:e})}return e.prototype=Object.create(t.prototype),a.aug(e.prototype,{id:null,initialized:!1,width😮,height😮,sandboxEl:null,insert:function(){return s.reject()},onResize:function(){},addClass:function(t){var e=this.sandboxEl;return t=Array.isArray(t)?t😦t],i.write(function(){t.forEach(function(t){r.add(e,t)})})},removeClass:function(t){var e=this.sandboxEl;return t=Array.isArray(t)?t😦t],i.write(function(){t.forEach(function(t){r.remove(e,t)})})},styleSelf:function(t){var e=this;return i.write(function(){a.forIn(t,function(t,n){e.sandboxEl.style[t]=n})})}}),e}},function(t,e,n){var r=n(5),i=n(10),o=n(17),s=n(52),a=n(25),u=n(53),c=n(42),d=n(43),l=n(29),f=n(12),h=n(44),p=n(2),m=n(6),v=n(0),g=n(9),w=n(22),y=n(7),b={allowfullscreen:\"true\"},_={position:\"absolute\",visibility:\"hidden\",display:\"block\",width:\"0px\",height:\"0px\",padding:\"0\",border:\"none\"},E={position:\"static\",visibility:\"visible\"},x=\"SandboxRoot\",A=\".SandboxRoot { display: none; }\",T=50;function S(t,e,n,r){return e=v.aug({id:t},b,e),n=v.aug({},_,n),l(e,n,r)}function R(t,e,n,i,s){var a=new p,u=w.generate(),c😒(t,e,n,s);return g.set([\"sandbox\",u],function(){var t=c.contentWindow.document;o.write(function(){t.write(\"<!DOCTYPE html><html><head></head><body></body></html>\")}).then(function(){t.close(),a.resolve(c)})}),c.src😦\"javascript:\",'document.write(\"\");',\"try { window.parent.document; }\",'catch (e) { document.domain=\"'+r.domain+'\"; }',\"window.parent.\"+g.fullPath([\"sandbox\",u])+\"();\"].join(\"\"),c.addEventListener(\"error\",a.reject,!1),o.write(function(){i.parentNode.replaceChild(c,i)}),a.promise}t.exports=a.couple(n(54),function(t){t.overrideProperty(\"id\",{get:function(){return this.sandboxEl&&this.sandboxEl.id}}),t.overrideProperty(\"initialized\",{get:function(){return!!this.win}}),t.overrideProperty(\"width\",{get:function(){return this._width}}),t.overrideProperty(\"height\",{get:function(){return this._height}}),t.overrideProperty(\"sandboxEl\",{get:function(){return this.iframeEl}}),t.defineProperty(\"iframeEl\",{get:function(){return this._iframe}}),t.defineProperty(\"rootEl\",{get:function(){return this.doc&&this.doc.documentElement}}),t.defineProperty(\"widgetEl\",{get:function(){return this.doc&&this.doc.body.firstElementChild}}),t.defineProperty(\"win\",{get:function(){return this.iframeEl&&this.iframeEl.contentWindow}}),t.defineProperty(\"doc\",{get:function(){return this.win&&this.win.document}}),t.define(\"_updateCachedDimensions\",function(){var t=this;return o.read(function(){var e,n=h(t.sandboxEl);\"visible\"==t.sandboxEl.style.visibility?t._width=n.width😦e=h(t.sandboxEl.parentElement).width,t._width=Math.min(n.width,e)),t._height=n.height})}),t.define(\"_setTargetToBlank\",function(){var t=this.createElement(\"base\");t.target=\"_blank\",this.doc.head.appendChild(t)}),t.define(\"_didResize\",function(){var t=this,e=this._resizeHandlers.slice(0);return this._updateCachedDimensions().then(function(){e.forEach(function(e){e(t)})})}),t.define(\"setTitle\",function(t){this.iframeEl.title=t}),t.override(\"createElement\",function(t){return this.doc.createElement(t)}),t.override(\"createFragment\",function(){return this.doc.createDocumentFragment()}),t.override(\"htmlToElement\",function(t){var e;return(e=this.createElement(\"div\")).innerHTML=t,e.firstElementChild}),t.override(\"hasSelectedText\",function(){return!!s.getSelectedText(this.win)}),t.override(\"addRootClass\",function(t){var e=this.rootEl;return t=Array.isArray(t)?t😦t],this.initialized?o.write(function(){t.forEach(function(t){i.add(e,t)})}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"removeRootClass\",function(t){var e=this.rootEl;return t=Array.isArray(t)?t😦t],this.initialized?o.write(function(){t.forEach(function(t){i.remove(e,t)})}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"hasRootClass\",function(t){return i.present(this.rootEl,t)}),t.define(\"addStyleSheet\",function(t,e){var n,r=new p;return this.initialized?((n=this.createElement(\"link\")).type=\"text/css\",n.rel=\"stylesheet\",n.href=t,n.addEventListener(\"load\",r.resolve,!1),n.addEventListener(\"error\",r.reject,!1),o.write(y(e,null,n)).then(function(){return u(t).then(r.resolve,r.reject),r.promise})):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"prependStyleSheet\",function(t){var e=this.doc;return this.addStyleSheet(t,function(t){var n=e.head.firstElementChild;return n?e.head.insertBefore(t,n):e.head.appendChild(t)})}),t.override(\"appendStyleSheet\",function(t){var e=this.doc;return this.addStyleSheet(t,function(t){return e.head.appendChild(t)})}),t.define(\"addCss\",function(t,e){var n;return c.inlineStyle()?((n=this.createElement(\"style\")).type=\"text/css\",n.appendChild(this.doc.createTextNode(t)),o.write(y(e,null,n)))😦f.devError(\"CSP enabled; cannot embed inline styles\"),m.resolve())}),t.override(\"prependCss\",function(t){var e=this.doc;return this.addCss(t,function(t){var n=e.head.firstElementChild;return n?e.head.insertBefore(t,n):e.head.appendChild(t)})}),t.override(\"appendCss\",function(t){var e=this.doc;return this.addCss(t,function(t){return e.head.appendChild(t)})}),t.override(\"makeVisible\",function(){var t=this;return this.styleSelf(E).then(function(){t._updateCachedDimensions()})}),t.override(\"injectWidgetEl\",function(t){var e=this;return this.initialized?this.widgetEl?m.reject(new Error(\"widget already injected\"))😮.write(function(){e.doc.body.appendChild(t)}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"matchHeightToContent\",function(){var t,e=this;return o.read(function(){t=e.widgetEl?h(e.widgetEl).height😮}),o.write(function(){e.sandboxEl.style.height=t+\"px\"}).then(function(){return e._updateCachedDimensions()})}),t.override(\"matchWidthToContent\",function(){var t,e=this;return o.read(function(){t=e.widgetEl?h(e.widgetEl).width😮}),o.write(function(){e.sandboxEl.style.width=t+\"px\"}).then(function(){return e._updateCachedDimensions()})}),t.after(\"initialize\",function(){this._iframe=null,this._width=this._height😮,this._resizeHandlers😦]}),t.override(\"insert\",function(t,e,n,r){var i=this,s=new p,a=this.targetGlobal.document,u😒(t,e,n,a);return o.write(y(r,null,u)),u.addEventListener(\"load\",function(){(function(t){try{t.contentWindow.document}catch(t){return m.reject(t)}return m.resolve(t)})(u).then(null,y(R,null,t,e,n,u,a)).then(s.resolve,s.reject)},!1),u.addEventListener(\"error\",s.reject,!1),s.promise.then(function(t){var e😛(i._didResize,T,i);return i._iframe=t,i.win.addEventListener(\"resize\",e,!1),m.all([i._setTargetToBlank(),i.addRootClass(😆,i.prependCss(A)])})}),t.override(\"onResize\",function(t){this._resizeHandlers.push(t)}),t.after(\"styleSelf\",function(){return this._updateCachedDimensions()})})},function(t,e){t.exports=function(){throw new Error(\"unimplemented method\")}},function(t,e,n){var r=n(2),i=n(7),o=100,s=3e3;function a(t,e){this._inputsQueue😦],this._task=t,this._isPaused=!1,this._flushDelay=e&&e.flushDelay||o,this._pauseLength=e&&e.pauseLength||s,this._flushTimeout=void 0}a.prototype.add=function(t){var e=new r;return this._inputsQueue.push({input:t,taskDoneDeferred:e}),this._scheduleFlush(),e.promise},a.prototype._scheduleFlush=function(){this._isPaused||(clearTimeout(this._flushTimeout),this._flushTimeout=setTimeout(i(this._flush,this),this._flushDelay))},a.prototype._flush=function(){try{this._task.call(null,this._inputsQueue)}catch(t){this._inputsQueue.forEach(function(e){e.taskDoneDeferred.reject(t)})}this._inputsQueue😦],this._flushTimeout=void 0},a.prototype.pause=function(t){clearTimeout(this._flushTimeout),this._isPaused=!0,!t&&this._pauseLength&&setTimeout(i(this.resume,this),this._pauseLength)},a.prototype.resume=function(){this._isPaused=!1,this._scheduleFlush()},t.exports=a},function(t,e,n){var r,i=n(70),o=n(29),s=n(2),a=n(5),u=n(18),c=n(20),d=n(30),l=n(😎,f=n(12),h=n(111),p=n(55),m=n(9),v=n(11),g=n(112),w=n(0),y=n(1),b😛(function(){return new s});function _(t){var e=t||{should_obtain_cookie_consent:!0,experiments:{}};return new g(e.should_obtain_cookie_consent,e.experiments)}t.exports={load:function(){var t,e,n,s;if(c.ie9()||c.ie10()||\"http:\"!==l.protocol&&\"https:\"!==l.protocol)return f.devError(\"Using default settings due to unsupported browser or protocol.\"),r=_(),void b().resolve();t={origin:l.origin},u.settings().indexOf(\"localhost\")>-1&&(t.localSettings=!0),e=v.url(i.resourceBaseUrl+i.widgetIframeHtmlPath,t),n=function(t){var n;if(e.substr(0,t.origin.length)===t.origin)try{(n=\"string\"==typeof t.data?d.parse(t.data):t.data).namespace===h.settings&&(r=_(n.settings),b().resolve())}catch(t){f.devError(t)}},y.addEventListener(\"message\",n),s😮({src:e,title:\"Twitter settings iframe\"},{display:\"none\"}),a.body.appendChild(s)},settingsLoaded:function(){var t,e,n;return t=new s,e=m.get(\"experimentOverride\"),b().promise.then(function(){e&&e.name&&e.assignment&&((n={})[e.name]={bucket:e.assignment},r.experiments=w.aug(r.experiments,n)),t.resolve(r)}).catch(function(e){t.reject(e)}),t.promise}}},function(t,e){t.exports={settings:\"twttr.settings\"}},function(t,e){t.exports=function(t,e){this.shouldObtainCookieConsent=t,this.experiments=e||{}}},function(t,e){t.exports=function(t){return t.split(\"\").map(function(t){return t.charCodeAt(0).toString(16)}).join(\"\")}},function(t,e,n){t.exports😦n(115),n(120),n(128),n(130),n(132),n(146),n(148)]},function(t,e,n){var r=n(11),i=n(4),o=n(0),s=n(13),a=n(14)(),u=n(56),c=\"a.twitter-dm-button\";t.exports=function(t){return a(t,c).map(function(t){return u(function(t){var e=t.getAttribute(\"data-show-screen-name\"),n😒(t),a=t.getAttribute(\"href\"),u=t.getAttribute(\"data-screen-name\"),c=e?i.asBoolean(e):null,d=t.getAttribute(\"data-size\"),l=r.decodeURL(a),f=l.recipient_id,h=t.getAttribute(\"data-text\")||l.text,p=t.getAttribute(\"data-welcome-message-id\")||l.welcomeMessageId;return o.aug(n,{screenName:u,showScreenName:c,size😛,text:h,userId:f,welcomeMessageId😛})}(t),t.parentNode,t)})}},function(t,e,n){var r=n(0);t.exports=function t(e){var n;if(e)return n=e.lang||e.getAttribute(\"data-lang\"),r.isType(\"string\",n)?n:t(e.parentElement)}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return n.e(2).then(function(r){var o;try{o=n(84),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(119),i=n(1),o=n(10),s=n(34),a=n(17),u=n(52),c=n(25),d=n(53),l=n(42),f=n(44),h=n(7),p=n(43),m=n(6),v=n(0),g=50,w={position:\"absolute\",visibility:\"hidden\",display:\"block\",transform:\"rotate(0deg)\"},y={position:\"static\",visibility:\"visible\"},b=\"twitter-widget\",_=\"open\",E=\"SandboxRoot\",x=\".SandboxRoot { display: none; max-height: 10000px; }\";t.exports=c.couple(n(54),function(t){t.defineStatic(\"isSupported\",function(){return!!i.HTMLElement.prototype.attachShadow&&l.inlineStyle()}),t.overrideProperty(\"id\",{get:function(){return this.sandboxEl&&this.sandboxEl.id}}),t.overrideProperty(\"initialized\",{get:function(){return!!this._shadowHost}}),t.overrideProperty(\"width\",{get:function(){return this._width}}),t.overrideProperty(\"height\",{get:function(){return this._height}}),t.overrideProperty(\"sandboxEl\",{get:function(){return this._shadowHost}}),t.define(\"_updateCachedDimensions\",function(){var t=this;return a.read(function(){var e,n=f(t.sandboxEl);\"visible\"==t.sandboxEl.style.visibility?t._width=n.width😦e=f(t.sandboxEl.parentElement).width,t._width=Math.min(n.width,e)),t._height=n.height})}),t.define(\"_didResize\",function(){var t=this,e=this._resizeHandlers.slice(0);return this._updateCachedDimensions().then(function(){e.forEach(function(e){e(t)})})}),t.override(\"createElement\",function(t){return this.targetGlobal.document.createElement(t)}),t.override(\"createFragment\",function(){return this.targetGlobal.document.createDocumentFragment()}),t.override(\"htmlToElement\",function(t){var e;return(e=this.createElement(\"div\")).innerHTML=t,e.firstElementChild}),t.override(\"hasSelectedText\",function(){return!!u.getSelectedText(this.targetGlobal)}),t.override(\"addRootClass\",function(t){var e=this._shadowRootBody;return t=Array.isArray(t)?t😦t],this.initialized?a.write(function(){t.forEach(function(t){o.add(e,t)})}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"removeRootClass\",function(t){var e=this._shadowRootBody;return t=Array.isArray(t)?t😦t],this.initialized?a.write(function(){t.forEach(function(t){o.remove(e,t)})}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"hasRootClass\",function(t){return o.present(this._shadowRootBody,t)}),t.override(\"addStyleSheet\",function(t,e){return this.addCss('@import url(\"'+t+'\");',e).then(function(){return d(t)})}),t.override(\"prependStyleSheet\",function(t){var e=this._shadowRoot;return this.addStyleSheet(t,function(t){var n=e.firstElementChild;return n?e.insertBefore(t,n):e.appendChild(t)})}),t.override(\"appendStyleSheet\",function(t){var e=this._shadowRoot;return this.addStyleSheet(t,function(t){return e.appendChild(t)})}),t.override(\"addCss\",function(t,e){var n;return this.initialized?l.inlineStyle()?((n=this.createElement(\"style\")).type=\"text/css\",n.appendChild(this.targetGlobal.document.createTextNode(t)),a.write(h(e,null,n))):m.resolve():m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"prependCss\",function(t){var e=this._shadowRoot;return this.addCss(t,function(t){var n=e.firstElementChild;return n?e.insertBefore(t,n):e.appendChild(t)})}),t.override(\"appendCss\",function(t){var e=this._shadowRoot;return this.addCss(t,function(t){return e.appendChild(t)})}),t.override(\"makeVisible\",function(){return this.styleSelf(y)}),t.override(\"injectWidgetEl\",function(t){var e=this;return this.initialized?this._shadowRootBody.firstElementChild?m.reject(new Error(\"widget already injected\")):a.write(function(){e._shadowRootBody.appendChild(t)}).then(function(){return e._updateCachedDimensions()}).then(function(){var t😛(e._didResize,g,e);new r(e._shadowRootBody,t)}):m.reject(new Error(\"sandbox not initialized\"))}),t.override(\"matchHeightToContent\",function(){return m.resolve()}),t.override(\"matchWidthToContent\",function(){return m.resolve()}),t.override(\"insert\",function(t,e,n,r){var i=this.targetGlobal.document,o=this._shadowHost=i.createElement(b),u=this._shadowRoot😮.attachShadow({mode:_}),c=this._shadowRootBody=i.createElement(\"div\");return v.forIn(e||{},function(t,e){o.setAttribute(t,e)}),o.id=t,u.appendChild(c),s.delegate(c,\"click\",\"A\",function(t,e){e.hasAttribute(\"target\")||e.setAttribute(\"target\",\"_blank\")}),m.all([this.styleSelf(w),this.addRootClass(E),this.prependCss(😆,a.write(r.bind(null,o))])}),t.override(\"onResize\",function(t){this._resizeHandlers.push(t)}),t.after(\"initialize\",function(){this._shadowHost=this._shadowRoot=this._shadowRootBody=null,this._width=this._height😮,this._resizeHandlers😦]}),t.after(\"styleSelf\",function(){return this._updateCachedDimensions()})})},function(t,e){var n;(n=function(t,e){function r(t,e){if(t.resizedAttached){if(t.resizedAttached)return void t.resizedAttached.add(e)}else t.resizedAttached=new function(){var t,e;this.q😦],this.add=function(t){this.q.push(t)},this.call=function(){for(t😮,e=this.q.length;t<e;t++)this.q[t].call()}},t.resizedAttached.add(e);t.resizeSensor=document.createElement(\"div\"),t.resizeSensor.className=\"resize-sensor\";var n=\"position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;\",r=\"position: absolute; left: 0; top: 0; transition: 0s;\";t.resizeSensor.style.cssText=n,t.resizeSensor.innerHTML='<div class=\"resize-sensor-expand\" style=\"'+n+'\"><div style=\"'+r+'\"></div></div><div class=\"resize-sensor-shrink\" style=\"'+n+'\"><div style=\"'+r+' width: 200%; height: 200%\"></div></div>',t.appendChild(t.resizeSensor),{fixed:1,absolute:1}[function(t,e){return t.currentStyle?t.currentStyle[e]:window.getComputedStyle?window.getComputedStyle(t,null).getPropertyValue(e):t.style[e]}(t,\"position\")]||(t.style.position=\"relative\");var i,o,s=t.resizeSensor.childNodes[0],a😒.childNodes[0],u=t.resizeSensor.childNodes[1],c😦u.childNodes[0],function(){a.style.width😒.offsetWidth+10+\"px\",a.style.height😒.offsetHeight+10+\"px\",s.scrollLeft😒.scrollWidth,s.scrollTop😒.scrollHeight,u.scrollLeft=u.scrollWidth,u.scrollTop=u.scrollHeight,i=t.offsetWidth,o=t.offsetHeight});c();var d=function(t,e,n){t.attachEvent?t.attachEvent(\"on\"+e,n):t.addEventListener(e,n)},l=function(){t.offsetWidth==i&&t.offsetHeight==o||t.resizedAttached&&t.resizedAttached.call(),c()}😜(s,\"scroll\",l),d(u,\"scroll\",l)}var i=Object.prototype.toString.call(t),o=\"[object Array]\"===i||\"[object NodeList]\"===i||\"[object HTMLCollection]\"===i||\"undefined\"!=typeof jQuery&&t instanceof jQuery||\"undefined\"!=typeof Elements&&t instanceof Elements;if(o)for(var s😮,a=t.length;s<a;s++)r(t[s],e);else r(t,e);this.detach=function(){if(o)for(var e😮,r=t.length;e<r;e++)n.detach(t[e]);else n.detach(t)}}).detach=function(t){t.resizeSensor&&(t.removeChild(t.resizeSensor),delete t.resizeSensor,delete t.resizedAttached)},void 0!==t&&void 0!==t.exports?t.exports=n:window.ResizeSensor=n},function(t,e,n){var r=n(3),i=n(0),o=n(13),s=n(14)(),a=n(59),u=n(4),c=\"a.twitter-follow-button\";t.exports=function(t){return s(t,c).map(function(t){return a(function(t){var e😮(t),n={screenName:r.screenName(t.href),showScreenName:\"false\"!==t.getAttribute(\"data-show-screen-name\"),showCount:\"false\"!==t.getAttribute(\"data-show-count\"),size:t.getAttribute(\"data-size\"),count:t.getAttribute(\"data-count\"),preview:t.getAttribute(\"data-preview\")};return i.forIn(n,function(t,n){var r=e[t];e[t]=u.hasValue(r)?r:n}),e.screenName=e.screenName||e.screen_name,e}(t),t.parentNode,t)})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return n.e(3).then(function(r){var o;try{o=n(85),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(17),i=n(123),o=n(55),s=n(29),a=n(2),u=n(6),c=n(7),d=n(0),l={position:\"absolute\",visibility:\"hidden\",width:\"0px\",height:\"0px\"},f={position:\"static\",visibility:\"visible\"},h={};i(function(t,e,n){var r=h[t];if(r)return e=e||1,n=n||1,r.styleSelf({width:e+\"px\",height:n+\"px\"}).then(function(){r.didResize()})}),t.exports=function(t){t.overrideProperty(\"id\",{get:function(){return this.sandboxEl&&this.sandboxEl.id}}),t.overrideProperty(\"initialized\",{get:function(){return!!this.iframeEl}}),t.overrideProperty(\"width\",{get:function(){return this._width}}),t.overrideProperty(\"height\",{get:function(){return this._height}}),t.overrideProperty(\"sandboxEl\",{get:function(){return this.iframeEl}}),t.defineProperty(\"iframeEl\",{get:function(){return this._iframe}}),t.define(\"updateCachedDimensions\",function(){var t=this;return this.initialized?r.read(function(){t._width=t.sandboxEl.offsetWidth,t._height=t.sandboxEl.offsetHeight}):u.resolve()}),t.define(\"setTitle\",function(t){this.iframeEl.title=t}),t.define(\"makeVisible\",function(){return this.styleSelf(f)}),t.define(\"didResize\",function(){var t=this,e=t._resizeHandlers.length>0;return this.updateCachedDimensions().then(function(){e&&t._resizeHandlers.forEach(function(e){e(t)})})}),t.define(\"loadDocument\",function(t){var e=new a;return this.initialized?this.iframeEl.src?u.reject(new Error(\"widget already loaded\"))😦this.iframeEl.addEventListener(\"load\",e.resolve,!1),this.iframeEl.addEventListener(\"error\",e.reject,!1),this.iframeEl.src=t,e.promise):u.reject(new Error(\"sandbox not initialized\"))}),t.after(\"initialize\",function(){this._iframe=null,this._width=this._height😮,this._resizeHandlers😦]}),t.override(\"insert\",function(t,e,n,i){var a=this;return e😛.aug({id:t},e),n😛.aug({},l,n),this._iframe😒(e,n),h[t]=this,this.onResize(o(function(){a.makeVisible()})),r.write(c(i,null,this._iframe))}),t.override(\"onResize\",function(t){this._resizeHandlers.push(t)}),t.after(\"styleSelf\",function(){return this.updateCachedDimensions()})}},function(t,e,n){var r=n(1),i=n(124),o=n(126),s=n(23),a=n(4),u=n(127);t.exports=function(t){(new i).attachReceiver(new o.Receiver(r,\"twttr.button\")).bind(\"twttr.private.trigger\",function(t,e){var n=u(this);s.trigger(t,{target:n,region:e,type:t,data:{}})}).bind(\"twttr.private.resizeButton\",function(e){var n=u(this),r=n&&n.id,i=a.asInt(e.width),o=a.asInt(e.height);r&&void 0!==i&&void 0!==o&&t(r,i,o)})}},function(t,e,n){var r=n(30),i=n(125),o=n(0),s=n(6),a=n(21),u=\"2.0\";function c(t){this.registry=t||{}}function d(t){var e,n;return e😮.isType(\"string\",t),n😮.isType(\"number\",t),e||n||null===t}function l(t,e){return{jsonrpc:u,id😛(t)?t:null,error:e}}c.prototype._invoke=function(t,e){var n,r,i;n=this.registry[t.method],r=t.params||[],r😮.isType(\"array\",r)?r😦r];try{i=n.apply(e.source||null,r)}catch(t){i😒.reject(t.message)}return a.isPromise(i)?i😒.resolve(i)},c.prototype._processRequest=function(t,e){var n,r;return function(t){var e,n,r;return!!o.isObject(t)&&(e=t.jsonrpc===u,n😮.isType(\"string\",t.method),r=!(\"id\"in t)||d(t.id),e&&n&&r)}(t)?(n=\"params\"in t&&(r=t.params,!o.isObject(r)||o.isType(\"function\",r))?s.resolve(l(t.id,i.INVALID_PARAMS)):this.registry[t.method]?this._invoke(t,{source:e}).then(function(e){return n=t.id,{jsonrpc:u,id:n,result:e};var n},function(){return l(t.id,i.INTERNAL_ERROR)})😒.resolve(l(t.id,i.METHOD_NOT_FOUND)),null!=t.id?n😒.resolve())😒.resolve(l(t.id,i.INVALID_REQUEST))},c.prototype.attachReceiver=function(t){return t.attachTo(this),this},c.prototype.bind=function(t,e){return this.registry[t]=e,this},c.prototype.receive=function(t,e){var n,a,u,c=this;try{u=t,t😮.isType(\"string\",u)?r.parse(u):u}catch(t){return s.resolve(l(null,i.PARSE_ERROR))}return e=e||null,a=((n😮.isType(\"array\",t))?t😦t]).map(function(t){return c._processRequest(t,e)}),n?function(t){return s.all(t).then(function(t){return(t=t.filter(function(t){return void 0!==t})).length?t:void 0})}(a):a[0]},t.exports=c},function(t){t.exports={PARSE_ERROR:{code😶32700,message:\"Parse error\"},INVALID_REQUEST:{code😶32600,message:\"Invalid Request\"},INVALID_PARAMS:{code😶32602,message:\"Invalid params\"},METHOD_NOT_FOUND:{code😶32601,message:\"Method not found\"},INTERNAL_ERROR:{code😶32603,message:\"Internal error\"}}},function(t,e,n){var r=n(😎,i=n(1),o=n(30),s=n(2),a=n(20),u=n(0),c=n(3),d=n(7),l=a.ie9();function f(t,e,n){var r;t&&t.postMessage&&(l?r😦n||\"\")+o.stringify(e):n?(r={})[n]=e:r=e,t.postMessage(r,\"*\"))}function h(t){return u.isType(\"string\",t)?t:\"JSONRPC\"}function p(t,e){return e?u.isType(\"string\",t)&&0===t.indexOf(e)?t.substring(e.length):t&&t[e]?t[e]:void 0:t}function m(t,e){var n=t.document;this.filter=h(e),this.server=null,this.isTwitterFrame=c.isTwitterURL(n.location.href),t.addEventListener(\"message\",d(this._onMessage,this),!1)}function v(t,e){this.pending={},this.target=t,this.isTwitterHost=c.isTwitterURL(r.href),this.filter=h(e),i.addEventListener(\"message\",d(this._onMessage,this),!1)}u.aug(m.prototype,{_onMessage:function(t){var e,n=this;this.server&&(this.isTwitterFrame&&!c.isTwitterURL(t.origin)||(e😛(t.data,this.filter))&&this.server.receive(e,t.source).then(function(e){e&&f(t.source,e,n.filter)}))},attachTo:function(t){this.server=t},detach:function(){this.server=null}}),u.aug(v.prototype,{_processResponse:function(t){var e=this.pending[t.id];e&&(e.resolve(t),delete this.pending[t.id])},_onMessage:function(t){var e;if((!this.isTwitterHost||c.isTwitterURL(t.origin))&&(e😛(t.data,this.filter))){if(u.isType(\"string\",e))try{e😮.parse(e)}catch(t){return}(e=u.isType(\"array\",e)?e😦e]).forEach(d(this._processResponse,this))}},send:function(t){var e=new s;return t.id?this.pending[t.id]=e:e.resolve(),f(this.target,t,this.filter),e.promise}}),t.exports={Receiver:m,Dispatcher:v,_stringifyPayload:function(t){return arguments.length>0&&(l=!!t),l}}},function(t,e,n){var r=n(5);t.exports=function(t){for(var e,n=r.getElementsByTagName(\"iframe\"),i😮;n[i];i++)if((e=n[i]).contentWindow===t)return e}},function(t,e,n){var r=n(4),i=n(0),o=n(3),s=n(13),a=n(14)(),u=n(61),c=\"a.twitter-moment\";t.exports=function(t){return a(t,c).map(function(t){return u(function(t){var e😒(t),n={momentId😮.momentId(t.href),chrome:t.getAttribute(\"data-chrome\"),limit:t.getAttribute(\"data-limit\")};return i.forIn(n,function(t,n){var i=e[t];e[t]=r.hasValue(i)?i:n}),e}(t),t.parentNode,t)})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return Promise.all([n.e(0),n.e(4)]).then(function(r){var o;try{o=n(86),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(0),i=n(13),o=n(14)(),s=n(62),a=\"a.periscope-on-air\",u😕^https?😕/\\/(?:www\\.)?(?:periscope|pscp)\\.tv\\/@?([a-zA-Z0-9_]+)\\/?$/i;t.exports=function(t){return o(t,a).map(function(t){return s(function(t){var e=i(t),n=t.getAttribute(\"href\"),o=t.getAttribute(\"data-size\"),s=u.exec(n)[1];return r.aug(e,{username😒,size😮})}(t),t.parentNode,t)})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return n.e(5).then(function(r){var o;try{o=n(87),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(4),i=n(0),o=n(63),s=n(13),a=n(14)(),u=n(64),c=n(3),d=n(12),l=\"a.twitter-timeline,div.twitter-timeline,a.twitter-grid\",f=\"Embedded Search timelines have been deprecated. See https://twittercommunity.com/t/deprecating-widget-settings/102295.\",h=\"You may have been affected by an update to settings in embedded timelines. See https://twittercommunity.com/t/deprecating-widget-settings/102295.\",p=\"Embedded grids have been deprecated and will now render as timelines. Please update your embed code to use the twitter-timeline class. More info: https://twittercommunity.com/t/update-on-the-embedded-grid-display-type/119564.\";t.exports=function(t){return a(t,l).map(function(t){return u(function(t){var e😒(t),n=t.getAttribute(\"data-show-replies\"),a={isPreconfigured:!!t.getAttribute(\"data-widget-id\"),chrome:t.getAttribute(\"data-chrome\"),tweetLimit:t.getAttribute(\"data-tweet-limit\")||t.getAttribute(\"data-limit\"),ariaLive:t.getAttribute(\"data-aria-polite\"),theme:t.getAttribute(\"data-theme\"),linkColor:t.getAttribute(\"data-link-color\"),borderColor:t.getAttribute(\"data-border-color\"),showReplies:n?r.asBoolean(n):null,profileScreenName:t.getAttribute(\"data-screen-name\"),profileUserId:t.getAttribute(\"data-user-id\"),favoritesScreenName:t.getAttribute(\"data-favorites-screen-name\"),favoritesUserId:t.getAttribute(\"data-favorites-user-id\"),likesScreenName:t.getAttribute(\"data-likes-screen-name\"),likesUserId:t.getAttribute(\"data-likes-user-id\"),listOwnerScreenName:t.getAttribute(\"data-list-owner-screen-name\"),listOwnerUserId:t.getAttribute(\"data-list-owner-id\"),listId:t.getAttribute(\"data-list-id\"),listSlug:t.getAttribute(\"data-list-slug\"),customTimelineId:t.getAttribute(\"data-custom-timeline-id\"),staticContent:t.getAttribute(\"data-static-content\"),url:t.href};return a.isPreconfigured&&(c.isSearchUrl(a.url)?d.publicError(f,t)😛.publicLog(h,t)),\"twitter-grid\"===t.className&&d.publicLog(p,t),(a=i.aug(a,e)).dataSource😮(a),a.id=a.dataSource&&a.dataSource.id,a}(t),t.parentNode,t)})}},function(t,e,n){var r=n(26);t.exports=r.build([n(27),n(136)])},function(t,e,n){var r=n(0),i=n(135);t.exports=function(t){return\"en\"===t||r.contains(i,t)}},function(t,e){t.exports😦\"hi\",\"zh-cn\",\"fr\",\"zh-tw\",\"msa\",\"fil\",\"fi\",\"sv\",\"pl\",\"ja\",\"ko\",\"de\",\"it\",\"pt\",\"es\",\"ru\",\"id\",\"tr\",\"da\",\"no\",\"nl\",\"hu\",\"fa\",\"ar\",\"ur\",\"he\",\"th\",\"cs\",\"uk\",\"vi\",\"ro\",\"bn\",\"el\",\"en-gb\",\"gu\",\"kn\",\"mr\",\"ta\",\"bg\",\"ca\",\"hr\",\"sr\",\"sk\"]},function(t,e,n){var r=n(3),i=n(0),o=n(18),s=\"collection:\";function a(t,e){return r.collectionId(t)||e}t.exports=function(t){t.params({id:{},url:{}}),t.overrideProperty(\"id\",{get:function(){var t=a(this.params.url,this.params.id);return s+t}}),t.overrideProperty(\"endpoint\",{get:function(){return o.timeline([\"collection\"])}}),t.around(\"queryParams\",function(t){return i.aug(t(),{collection_id:a(this.params.url,this.params.id)})}),t.before(\"initialize\",function(){if(!a(this.params.url,this.params.id))throw new Error(\"one of url or id is required\")})}},function(t,e,n){var r=n(26);t.exports=r.build([n(27),n(138)])},function(t,e,n){var r=n(3),i=n(0),o=n(18),s=\"event:\";function a(t,e){return r.eventId(t)||e}t.exports=function(t){t.params({id:{},url:{}}),t.overrideProperty(\"id\",{get:function(){var t=a(this.params.url,this.params.id);return s+t}}),t.overrideProperty(\"endpoint\",{get:function(){return o.timeline([\"event\"])}}),t.around(\"queryParams\",function(t){return i.aug(t(),{event_id:a(this.params.url,this.params.id)})}),t.before(\"initialize\",function(){if(!a(this.params.url,this.params.id))throw new Error(\"one of url or id is required\")})}},function(t,e,n){var r=n(26);t.exports=r.build([n(27),n(140)])},function(t,e,n){var r=n(3),i=n(0),o=n(18),s=\"likes:\";function a(t){return r.likesScreenName(t.url)||t.screenName}t.exports=function(t){t.params({screenName:{},userId:{},url:{}}),t.overrideProperty(\"id\",{get:function(){var t=a(this.params)||this.params.userId;return s+t}}),t.overrideProperty(\"endpoint\",{get:function(){return o.timeline([\"likes\"])}}),t.define(\"_getLikesQueryParam\",function(){var t=a(this.params);return t?{screen_name:t}:{user_id:this.params.userId}}),t.around(\"queryParams\",function(t){return i.aug(t(),this._getLikesQueryParam())}),t.before(\"initialize\",function(){if(!a(this.params)&&!this.params.userId)throw new Error(\"screen name or user id is required\")})}},function(t,e,n){var r=n(26);t.exports=r.build([n(27),n(142)])},function(t,e,n){var r=n(3),i=n(0),o=n(18),s=\"list:\";function a(t){var e=r.listScreenNameAndSlug(t.url)||t;return i.compact({screen_name:e.ownerScreenName,user_id:e.ownerUserId,list_slug:e.slug})}t.exports=function(t){t.params({id:{},ownerScreenName:{},ownerUserId:{},slug:{},url:{}}),t.overrideProperty(\"id\",{get:function(){var t,e,n;return this.params.id?s+this.params.id😦e😦t=a(this.params))&&t.list_slug.replace(/-/g,\"_\"),n=t&&(t.screen_name||t.user_id),s+(n+\"😊+e)}}),t.overrideProperty(\"endpoint\",{get:function(){return o.timeline([\"list\"])}}),t.define(\"_getListQueryParam\",function(){return this.params.id?{list_id:this.params.id}:a(this.params)}),t.around(\"queryParams\",function(t){return i.aug(t(),this._getListQueryParam())}),t.before(\"initialize\",function(){var t=a(this.params);if(i.isEmptyObject(t)&&!this.params.id)throw new Error(\"qualified slug or list id required\")})}},function(t,e,n){var r=n(26);t.exports=r.build([n(27),n(144)])},function(t,e,n){var r=n(3),i=n(4),o=n(0),s=n(18),a=\"profile:\";function u(t,e){return r.screenName(t)||e}t.exports=function(t){t.params({showReplies:{fallback:!1,transform:i.asBoolean},screenName:{},userId:{},url:{}}),t.overrideProperty(\"id\",{get:function(){var t=u(this.params.url,this.params.screenName);return a+(t||this.params.userId)}}),t.overrideProperty(\"endpoint\",{get:function(){return s.timeline([\"profile\"])}}),t.define(\"_getProfileQueryParam\",function(){var t=u(this.params.url,this.params.screenName),e=t?{screen_name:t}:{user_id:this.params.userId};return o.aug(e,{with_replies:this.params.showReplies?\"true\":\"false\"})}),t.around(\"queryParams\",function(t){return o.aug(t(),this._getProfileQueryParam())}),t.before(\"initialize\",function(){if(!u(this.params.url,this.params.screenName)&&!this.params.userId)throw new Error(\"screen name or user id is required\")})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return Promise.all([n.e(0),n.e(6)]).then(function(r){var o;try{o=n(88),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(10),i=n(3),o=n(0),s=n(13),a=n(14)(),u=n(65),c=\"blockquote.twitter-tweet, blockquote.twitter-video\",d😕\\btw-align-(left|right|center)\\b/;t.exports=function(t){return a(t,c).map(function(t){return u(function(t){var e😒(t),n=t.getElementsByTagName(\"A\"),a=n&&n[n.length-1],u=a&&i.status(a.href),c=t.getAttribute(\"data-conversation\"),l=\"none\"==c||\"hidden\"==c||r.present(t,\"tw-hide-thread\"),f=t.getAttribute(\"data-cards\"),h=\"none\"==f||\"hidden\"==f||r.present(t,\"tw-hide-media\"),p=t.getAttribute(\"data-align\")||t.getAttribute(\"align\"),m=t.getAttribute(\"data-link-color\"),v=t.getAttribute(\"data-theme\");return!p&&d.test(t.className)&&(p=RegExp.$1),o.aug(e,{tweetId:u,hideThread:l,hideCard:h,align😛,linkColor:m,theme:v,id:u})}(t),t.parentNode,t)})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return Promise.all([n.e(0),n.e(7)]).then(function(r){var o;try{o=n(89),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(10),i=n(0),o=n(13),s=n(14)(),a=n(66),u=n(4),c=\"a.twitter-share-button, a.twitter-mention-button, a.twitter-hashtag-button\",d=\"twitter-hashtag-button\",l=\"twitter-mention-button\";t.exports=function(t){return s(t,c).map(function(t){return a(function(t){var e😮(t),n={screenName:t.getAttribute(\"data-button-screen-name\"),text:t.getAttribute(\"data-text\"),type:t.getAttribute(\"data-type\"),size:t.getAttribute(\"data-size\"),url:t.getAttribute(\"data-url\"),hashtags:t.getAttribute(\"data-hashtags\"),via:t.getAttribute(\"data-via\"),buttonHashtag:t.getAttribute(\"data-button-hashtag\")};return i.forIn(n,function(t,n){var r=e[t];e[t]=u.hasValue(r)?r:n}),e.screenName=e.screenName||e.screen_name,e.buttonHashtag=e.buttonHashtag||e.button_hashtag||e.hashtag,r.present(t,d)&&(e.type=\"hashtag\"),r.present(t,l)&&(e.type=\"mention\"),e}(t),t.parentNode,t)})}},function(t,e,n){var r=n(2);t.exports=function(t,e){var i=new r;return n.e(3).then(function(r){var o;try{o=n(90),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(0);t.exports=r.aug({},n(151),n(152),n(153),n(154),n(155),n(156),n(157))},function(t,e,n){var r=n(56),i=n(16)([\"userId\"],{},r);t.exports={createDMButton:i}},function(t,e,n){var r=n(59),i=n(16)([\"screenName\"],{},r);t.exports={createFollowButton:i}},function(t,e,n){var r=n(61),i=n(16)([\"momentId\"],{},r);t.exports={createMoment:i}},function(t,e,n){var r=n(62),i=n(16)([\"username\"],{},r);t.exports={createPeriscopeOnAirButton:i}},function(t,e,n){var r=n(😎,i=n(12),o=n(3),s=n(0),a=n(4),u=n(63),c=n(64),d=n(16)([],{},c),l=n(6),f=\"Embedded grids have been deprecated. Please use twttr.widgets.createTimeline instead. More info: https://twittercommunity.com/t/update-on-the-embedded-grid-display-type/119564.\",h={createTimeline😛,createGridFromCollection:function(t){var e😒.toRealArray(arguments).slice(1),n={sourceType:\"collection\",id:t};return e.unshift(n),i.publicLog(f),p.apply(this,e)}};function p(t){var e,n😒.toRealArray(arguments).slice(1);return a.isString(t)||a.isNumber(t)?l.reject(\"Embedded timelines with widget settings have been deprecated. See https://twittercommunity.com/t/deprecating-widget-settings/102295.\")😒.isObject(t)?(t=t||{},n.forEach(function(t){s.isType(\"object\",t)&&function(t){t.ariaLive=t.ariaPolite}(e=t)}),e||(e={},n.push(e)),t.lang=e.lang,t.tweetLimit=e.tweetLimit,t.showReplies=e.showReplies,e.dataSource=u(t),d.apply(this,n)):l.reject(\"data source must be an object.\")}o.isTwitterURL(r.href)&&(h.createTimelinePreview=function(t,e,n){var r={previewParams:t,useLegacyDefaults:!0,isPreviewTimeline:!0};return r.dataSource=u(r),d(e,r,n)}),t.exports=h},function(t,e,n){var r,i=n(0),o=n(65),s=n(16),a😦r😒([\"tweetId\"],{},o),function(){return i.toRealArray(arguments).slice(1).forEach(function(t){i.isType(\"object\",t)&&(t.hideCard=\"none\"==t.cards||\"hidden\"==t.cards,t.hideThread=\"none\"==t.conversation||\"hidden\"==t.conversation)}),r.apply(this,arguments)});t.exports={createTweet:a,createTweetEmbed:a,createVideo:a}},function(t,e,n){var r=n(0),i=n(66),o=n(16),s😮([\"url\"],{type:\"share\"},i),a😮([\"buttonHashtag\"],{type:\"hashtag\"},i),u😮([\"screenName\"],{type:\"mention\"},i);function c(t){return function(){return r.toRealArray(arguments).slice(1).forEach(function(t){r.isType(\"object\",t)&&(t.screenName=t.screenName||t.screen_name,t.buttonHashtag=t.buttonHashtag||t.button_hashtag||t.hashtag)}),t.apply(this,arguments)}}t.exports={createShareButton:c(s),createHashtagButton:c(a),createMentionButton:c(u)}},function(t,e,n){var r,i,o,s=n(5),a=n(1),u😮,c😦],d😒.createElement(\"a\");function l(){var t,e;for(u=1,t😮,e=c.length;t<e;t++)c[t]()}/^loade|c/.test(s.readyState)&&(u=1),s.addEventListener&&s.addEventListener(\"DOMContentLoaded\",i=function(){s.removeEventListener(\"DOMContentLoaded\",i,!1),l()},!1),d.doScroll&&s.attachEvent(\"onreadystatechange\",r=function(){/^c/.test(s.readyState)&&(s.detachEvent(\"onreadystatechange\",r),l())}),o😛.doScroll?function(t){a.self!=a.top?u?t():c.push(t):function(){try{d.doScroll(\"left\")}catch(e){return setTimeout(function(){o(t)},50)}t()}()}:function(t){u?t():c.push(t)},t.exports😮},function(t,e,n){var r=n(41),i=n(9);t.exports=function(){i.set(\"buildVersion\",r.version)}},function(t,e,n){n(161),n(83),n(164)},function(t,e,n){var r=n(162),i=n(28),o=n(67),s=new r,a=function(t){t.widgets&&1===t.widgets.length&&(s.start(),i.emitter.unbind(i.ALL_WIDGETS_RENDER_START,a))},u=function(t){var e;t.widgets&&1===t.widgets.length&&(e=t.widgets[0],s.end(),e.dataset&&e.dataset.tweetId&&o({duration😒.duration(),namespace:{element:\"tweet\",action:\"render\"},widgetIds😦e.dataset.tweetId]})),i.emitter.unbind(i.ALL_WIDGETS_RENDER_END,u)};i.emitter.bind(i.ALL_WIDGETS_RENDER_START,a),i.emitter.bind(i.ALL_WIDGETS_RENDER_END,u)},function(t,e,n){var r=n(163);function i(){}i.prototype.start=function(){this._startTime=r()},i.prototype.end=function(){this._duration=r()-this._startTime},i.prototype.duration=function(){return this._duration},t.exports=i},function(t,e,n){var r=n(1);t.exports=function(){return r.performance&&r.performance.now?r.performance.now():Date.now()}},function(t,e,n){var r=n(28),i=n(67),o=n(165),s=n(3),a=n(1),u=n(0),c=n(20),d=n(58);function l(t){return t.performance.getEntriesByType(\"resource\").filter(function(t){return s.isTwimgURL(t.name)||s.isTwitterURL(t.name)}).reduce(function(t,e){return t[e.name]=e.duration,t},{})}r.emitter.bind(r.ALL_WIDGETS_AND_IMAGES_LOADED,function(t){var e,n,r😦];c.hasPerformanceInformation()&&(e=l(a),d.isSupported()||(r=function(t){return t.reduce(function(t,e){return u.aug(t,l(e.contentDocument.defaultView))},{})}(t)),n=u.aug({},e,r),Object.keys(o).forEach(function(t){!function(t,e,n){var r=Object.keys(t).reduce(function(e,r){return n(r)?e+t[r]:e},0);i({duration:r,namespace:{element:e,action:\"resource\"}})}(n,t,o[t])}))})},function(t,e,n){var r=n(3),i={all:function(){return!0},image:function(t){return r.isTwimgURL(t)},settings:function(t){return r.isSettingsURL(t)},widget_iframe:function(t){return r.isWidgetIframeURL(t)}};t.exports=i}])));",
            "</script>"
          ]
        }
      ]
    }
  ]
}
